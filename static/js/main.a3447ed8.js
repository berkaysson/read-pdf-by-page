/*! For license information please see main.a3447ed8.js.LICENSE.txt */
(()=>{"use strict";var e={43:(e,t,n)=>{e.exports=n(202)},153:(e,t,n)=>{var i=n(43),r=Symbol.for("react.element"),s=Symbol.for("react.fragment"),o=Object.prototype.hasOwnProperty,a=i.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,l={key:!0,ref:!0,__self:!0,__source:!0};function c(e,t,n){var i,s={},c=null,u=null;for(i in void 0!==n&&(c=""+n),void 0!==t.key&&(c=""+t.key),void 0!==t.ref&&(u=t.ref),t)o.call(t,i)&&!l.hasOwnProperty(i)&&(s[i]=t[i]);if(e&&e.defaultProps)for(i in t=e.defaultProps)void 0===s[i]&&(s[i]=t[i]);return{$$typeof:r,type:e,key:c,ref:u,props:s,_owner:a.current}}t.Fragment=s,t.jsx=c,t.jsxs=c},202:(e,t)=>{var n=Symbol.for("react.element"),i=Symbol.for("react.portal"),r=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),a=Symbol.for("react.provider"),l=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),u=Symbol.for("react.suspense"),h=Symbol.for("react.memo"),d=Symbol.for("react.lazy"),p=Symbol.iterator;var f={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},g=Object.assign,m={};function v(e,t,n){this.props=e,this.context=t,this.refs=m,this.updater=n||f}function y(){}function _(e,t,n){this.props=e,this.context=t,this.refs=m,this.updater=n||f}v.prototype.isReactComponent={},v.prototype.setState=function(e,t){if("object"!==typeof e&&"function"!==typeof e&&null!=e)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")},v.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},y.prototype=v.prototype;var w=_.prototype=new y;w.constructor=_,g(w,v.prototype),w.isPureReactComponent=!0;var b=Array.isArray,x=Object.prototype.hasOwnProperty,k={current:null},E={key:!0,ref:!0,__self:!0,__source:!0};function C(e,t,i){var r,s={},o=null,a=null;if(null!=t)for(r in void 0!==t.ref&&(a=t.ref),void 0!==t.key&&(o=""+t.key),t)x.call(t,r)&&!E.hasOwnProperty(r)&&(s[r]=t[r]);var l=arguments.length-2;if(1===l)s.children=i;else if(1<l){for(var c=Array(l),u=0;u<l;u++)c[u]=arguments[u+2];s.children=c}if(e&&e.defaultProps)for(r in l=e.defaultProps)void 0===s[r]&&(s[r]=l[r]);return{$$typeof:n,type:e,key:o,ref:a,props:s,_owner:k.current}}function S(e){return"object"===typeof e&&null!==e&&e.$$typeof===n}var A=/\/+/g;function T(e,t){return"object"===typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(e){return t[e]})}(""+e.key):t.toString(36)}function P(e,t,r,s,o){var a=typeof e;"undefined"!==a&&"boolean"!==a||(e=null);var l=!1;if(null===e)l=!0;else switch(a){case"string":case"number":l=!0;break;case"object":switch(e.$$typeof){case n:case i:l=!0}}if(l)return o=o(l=e),e=""===s?"."+T(l,0):s,b(o)?(r="",null!=e&&(r=e.replace(A,"$&/")+"/"),P(o,t,r,"",function(e){return e})):null!=o&&(S(o)&&(o=function(e,t){return{$$typeof:n,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(o,r+(!o.key||l&&l.key===o.key?"":(""+o.key).replace(A,"$&/")+"/")+e)),t.push(o)),1;if(l=0,s=""===s?".":s+":",b(e))for(var c=0;c<e.length;c++){var u=s+T(a=e[c],c);l+=P(a,t,r,u,o)}else if(u=function(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=p&&e[p]||e["@@iterator"])?e:null}(e),"function"===typeof u)for(e=u.call(e),c=0;!(a=e.next()).done;)l+=P(a=a.value,t,r,u=s+T(a,c++),o);else if("object"===a)throw t=String(e),Error("Objects are not valid as a React child (found: "+("[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return l}function I(e,t,n){if(null==e)return e;var i=[],r=0;return P(e,i,"","",function(e){return t.call(n,e,r++)}),i}function R(e){if(-1===e._status){var t=e._result;(t=t()).then(function(t){0!==e._status&&-1!==e._status||(e._status=1,e._result=t)},function(t){0!==e._status&&-1!==e._status||(e._status=2,e._result=t)}),-1===e._status&&(e._status=0,e._result=t)}if(1===e._status)return e._result.default;throw e._result}var M={current:null},N={transition:null},D={ReactCurrentDispatcher:M,ReactCurrentBatchConfig:N,ReactCurrentOwner:k};t.Children={map:I,forEach:function(e,t,n){I(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return I(e,function(){t++}),t},toArray:function(e){return I(e,function(e){return e})||[]},only:function(e){if(!S(e))throw Error("React.Children.only expected to receive a single React element child.");return e}},t.Component=v,t.Fragment=r,t.Profiler=o,t.PureComponent=_,t.StrictMode=s,t.Suspense=u,t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=D,t.cloneElement=function(e,t,i){if(null===e||void 0===e)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var r=g({},e.props),s=e.key,o=e.ref,a=e._owner;if(null!=t){if(void 0!==t.ref&&(o=t.ref,a=k.current),void 0!==t.key&&(s=""+t.key),e.type&&e.type.defaultProps)var l=e.type.defaultProps;for(c in t)x.call(t,c)&&!E.hasOwnProperty(c)&&(r[c]=void 0===t[c]&&void 0!==l?l[c]:t[c])}var c=arguments.length-2;if(1===c)r.children=i;else if(1<c){l=Array(c);for(var u=0;u<c;u++)l[u]=arguments[u+2];r.children=l}return{$$typeof:n,type:e.type,key:s,ref:o,props:r,_owner:a}},t.createContext=function(e){return(e={$$typeof:l,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null}).Provider={$$typeof:a,_context:e},e.Consumer=e},t.createElement=C,t.createFactory=function(e){var t=C.bind(null,e);return t.type=e,t},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:c,render:e}},t.isValidElement=S,t.lazy=function(e){return{$$typeof:d,_payload:{_status:-1,_result:e},_init:R}},t.memo=function(e,t){return{$$typeof:h,type:e,compare:void 0===t?null:t}},t.startTransition=function(e){var t=N.transition;N.transition={};try{e()}finally{N.transition=t}},t.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")},t.useCallback=function(e,t){return M.current.useCallback(e,t)},t.useContext=function(e){return M.current.useContext(e)},t.useDebugValue=function(){},t.useDeferredValue=function(e){return M.current.useDeferredValue(e)},t.useEffect=function(e,t){return M.current.useEffect(e,t)},t.useId=function(){return M.current.useId()},t.useImperativeHandle=function(e,t,n){return M.current.useImperativeHandle(e,t,n)},t.useInsertionEffect=function(e,t){return M.current.useInsertionEffect(e,t)},t.useLayoutEffect=function(e,t){return M.current.useLayoutEffect(e,t)},t.useMemo=function(e,t){return M.current.useMemo(e,t)},t.useReducer=function(e,t,n){return M.current.useReducer(e,t,n)},t.useRef=function(e){return M.current.useRef(e)},t.useState=function(e){return M.current.useState(e)},t.useSyncExternalStore=function(e,t,n){return M.current.useSyncExternalStore(e,t,n)},t.useTransition=function(){return M.current.useTransition()},t.version="18.2.0"},234:(e,t)=>{function n(e,t){var n=e.length;e.push(t);e:for(;0<n;){var i=n-1>>>1,r=e[i];if(!(0<s(r,t)))break e;e[i]=t,e[n]=r,n=i}}function i(e){return 0===e.length?null:e[0]}function r(e){if(0===e.length)return null;var t=e[0],n=e.pop();if(n!==t){e[0]=n;e:for(var i=0,r=e.length,o=r>>>1;i<o;){var a=2*(i+1)-1,l=e[a],c=a+1,u=e[c];if(0>s(l,n))c<r&&0>s(u,l)?(e[i]=u,e[c]=n,i=c):(e[i]=l,e[a]=n,i=a);else{if(!(c<r&&0>s(u,n)))break e;e[i]=u,e[c]=n,i=c}}}return t}function s(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}if("object"===typeof performance&&"function"===typeof performance.now){var o=performance;t.unstable_now=function(){return o.now()}}else{var a=Date,l=a.now();t.unstable_now=function(){return a.now()-l}}var c=[],u=[],h=1,d=null,p=3,f=!1,g=!1,m=!1,v="function"===typeof setTimeout?setTimeout:null,y="function"===typeof clearTimeout?clearTimeout:null,_="undefined"!==typeof setImmediate?setImmediate:null;function w(e){for(var t=i(u);null!==t;){if(null===t.callback)r(u);else{if(!(t.startTime<=e))break;r(u),t.sortIndex=t.expirationTime,n(c,t)}t=i(u)}}function b(e){if(m=!1,w(e),!g)if(null!==i(c))g=!0,N(x);else{var t=i(u);null!==t&&D(b,t.startTime-e)}}function x(e,n){g=!1,m&&(m=!1,y(S),S=-1),f=!0;var s=p;try{for(w(n),d=i(c);null!==d&&(!(d.expirationTime>n)||e&&!P());){var o=d.callback;if("function"===typeof o){d.callback=null,p=d.priorityLevel;var a=o(d.expirationTime<=n);n=t.unstable_now(),"function"===typeof a?d.callback=a:d===i(c)&&r(c),w(n)}else r(c);d=i(c)}if(null!==d)var l=!0;else{var h=i(u);null!==h&&D(b,h.startTime-n),l=!1}return l}finally{d=null,p=s,f=!1}}"undefined"!==typeof navigator&&void 0!==navigator.scheduling&&void 0!==navigator.scheduling.isInputPending&&navigator.scheduling.isInputPending.bind(navigator.scheduling);var k,E=!1,C=null,S=-1,A=5,T=-1;function P(){return!(t.unstable_now()-T<A)}function I(){if(null!==C){var e=t.unstable_now();T=e;var n=!0;try{n=C(!0,e)}finally{n?k():(E=!1,C=null)}}else E=!1}if("function"===typeof _)k=function(){_(I)};else if("undefined"!==typeof MessageChannel){var R=new MessageChannel,M=R.port2;R.port1.onmessage=I,k=function(){M.postMessage(null)}}else k=function(){v(I,0)};function N(e){C=e,E||(E=!0,k())}function D(e,n){S=v(function(){e(t.unstable_now())},n)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_continueExecution=function(){g||f||(g=!0,N(x))},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):A=0<e?Math.floor(1e3/e):5},t.unstable_getCurrentPriorityLevel=function(){return p},t.unstable_getFirstCallbackNode=function(){return i(c)},t.unstable_next=function(e){switch(p){case 1:case 2:case 3:var t=3;break;default:t=p}var n=p;p=t;try{return e()}finally{p=n}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=p;p=e;try{return t()}finally{p=n}},t.unstable_scheduleCallback=function(e,r,s){var o=t.unstable_now();switch("object"===typeof s&&null!==s?s="number"===typeof(s=s.delay)&&0<s?o+s:o:s=o,e){case 1:var a=-1;break;case 2:a=250;break;case 5:a=1073741823;break;case 4:a=1e4;break;default:a=5e3}return e={id:h++,callback:r,priorityLevel:e,startTime:s,expirationTime:a=s+a,sortIndex:-1},s>o?(e.sortIndex=s,n(u,e),null===i(c)&&e===i(u)&&(m?(y(S),S=-1):m=!0,D(b,s-o))):(e.sortIndex=a,n(c,e),g||f||(g=!0,N(x))),e},t.unstable_shouldYield=P,t.unstable_wrapCallback=function(e){var t=p;return function(){var n=p;p=t;try{return e.apply(this,arguments)}finally{p=n}}}},391:(e,t,n)=>{var i=n(950);t.createRoot=i.createRoot,t.hydrateRoot=i.hydrateRoot},579:(e,t,n)=>{e.exports=n(153)},730:(e,t,n)=>{var i=n(43),r=n(853);function s(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var o=new Set,a={};function l(e,t){c(e,t),c(e+"Capture",t)}function c(e,t){for(a[e]=t,e=0;e<t.length;e++)o.add(t[e])}var u=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),h=Object.prototype.hasOwnProperty,d=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,p={},f={};function g(e,t,n,i,r,s,o){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=i,this.attributeNamespace=r,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=s,this.removeEmptyString=o}var m={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){m[e]=new g(e,0,!1,e,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];m[t]=new g(t,1,!1,e[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(e){m[e]=new g(e,2,!1,e.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){m[e]=new g(e,2,!1,e,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){m[e]=new g(e,3,!1,e.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(e){m[e]=new g(e,3,!0,e,null,!1,!1)}),["capture","download"].forEach(function(e){m[e]=new g(e,4,!1,e,null,!1,!1)}),["cols","rows","size","span"].forEach(function(e){m[e]=new g(e,6,!1,e,null,!1,!1)}),["rowSpan","start"].forEach(function(e){m[e]=new g(e,5,!1,e.toLowerCase(),null,!1,!1)});var v=/[\-:]([a-z])/g;function y(e){return e[1].toUpperCase()}function _(e,t,n,i){var r=m.hasOwnProperty(t)?m[t]:null;(null!==r?0!==r.type:i||!(2<t.length)||"o"!==t[0]&&"O"!==t[0]||"n"!==t[1]&&"N"!==t[1])&&(function(e,t,n,i){if(null===t||"undefined"===typeof t||function(e,t,n,i){if(null!==n&&0===n.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!i&&(null!==n?!n.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(e,t,n,i))return!0;if(i)return!1;if(null!==n)switch(n.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}(t,n,r,i)&&(n=null),i||null===r?function(e){return!!h.call(f,e)||!h.call(p,e)&&(d.test(e)?f[e]=!0:(p[e]=!0,!1))}(t)&&(null===n?e.removeAttribute(t):e.setAttribute(t,""+n)):r.mustUseProperty?e[r.propertyName]=null===n?3!==r.type&&"":n:(t=r.attributeName,i=r.attributeNamespace,null===n?e.removeAttribute(t):(n=3===(r=r.type)||4===r&&!0===n?"":""+n,i?e.setAttributeNS(i,t,n):e.setAttribute(t,n))))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(v,y);m[t]=new g(t,1,!1,e,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(v,y);m[t]=new g(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(v,y);m[t]=new g(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(e){m[e]=new g(e,1,!1,e.toLowerCase(),null,!1,!1)}),m.xlinkHref=new g("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(e){m[e]=new g(e,1,!1,e.toLowerCase(),null,!0,!0)});var w=i.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,b=Symbol.for("react.element"),x=Symbol.for("react.portal"),k=Symbol.for("react.fragment"),E=Symbol.for("react.strict_mode"),C=Symbol.for("react.profiler"),S=Symbol.for("react.provider"),A=Symbol.for("react.context"),T=Symbol.for("react.forward_ref"),P=Symbol.for("react.suspense"),I=Symbol.for("react.suspense_list"),R=Symbol.for("react.memo"),M=Symbol.for("react.lazy");Symbol.for("react.scope"),Symbol.for("react.debug_trace_mode");var N=Symbol.for("react.offscreen");Symbol.for("react.legacy_hidden"),Symbol.for("react.cache"),Symbol.for("react.tracing_marker");var D=Symbol.iterator;function O(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=D&&e[D]||e["@@iterator"])?e:null}var L,F=Object.assign;function j(e){if(void 0===L)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);L=t&&t[1]||""}return"\n"+L+e}var B=!1;function W(e,t){if(!e||B)return"";B=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),"object"===typeof Reflect&&Reflect.construct){try{Reflect.construct(t,[])}catch(c){var i=c}Reflect.construct(e,[],t)}else{try{t.call()}catch(c){i=c}e.call(t.prototype)}else{try{throw Error()}catch(c){i=c}e()}}catch(c){if(c&&i&&"string"===typeof c.stack){for(var r=c.stack.split("\n"),s=i.stack.split("\n"),o=r.length-1,a=s.length-1;1<=o&&0<=a&&r[o]!==s[a];)a--;for(;1<=o&&0<=a;o--,a--)if(r[o]!==s[a]){if(1!==o||1!==a)do{if(o--,0>--a||r[o]!==s[a]){var l="\n"+r[o].replace(" at new "," at ");return e.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",e.displayName)),l}}while(1<=o&&0<=a);break}}}finally{B=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?j(e):""}function U(e){switch(e.tag){case 5:return j(e.type);case 16:return j("Lazy");case 13:return j("Suspense");case 19:return j("SuspenseList");case 0:case 2:case 15:return e=W(e.type,!1);case 11:return e=W(e.type.render,!1);case 1:return e=W(e.type,!0);default:return""}}function z(e){if(null==e)return null;if("function"===typeof e)return e.displayName||e.name||null;if("string"===typeof e)return e;switch(e){case k:return"Fragment";case x:return"Portal";case C:return"Profiler";case E:return"StrictMode";case P:return"Suspense";case I:return"SuspenseList"}if("object"===typeof e)switch(e.$$typeof){case A:return(e.displayName||"Context")+".Consumer";case S:return(e._context.displayName||"Context")+".Provider";case T:var t=e.render;return(e=e.displayName)||(e=""!==(e=t.displayName||t.name||"")?"ForwardRef("+e+")":"ForwardRef"),e;case R:return null!==(t=e.displayName||null)?t:z(e.type)||"Memo";case M:t=e._payload,e=e._init;try{return z(e(t))}catch(n){}}return null}function H(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=(e=t.render).displayName||e.name||"",t.displayName||(""!==e?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return z(t);case 8:return t===E?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if("function"===typeof t)return t.displayName||t.name||null;if("string"===typeof t)return t}return null}function V(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":case"object":return e;default:return""}}function q(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function G(e){e._valueTracker||(e._valueTracker=function(e){var t=q(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),i=""+e[t];if(!e.hasOwnProperty(t)&&"undefined"!==typeof n&&"function"===typeof n.get&&"function"===typeof n.set){var r=n.get,s=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return r.call(this)},set:function(e){i=""+e,s.call(this,e)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return i},setValue:function(e){i=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function K(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),i="";return e&&(i=q(e)?e.checked?"true":"false":e.value),(e=i)!==n&&(t.setValue(e),!0)}function Y(e){if("undefined"===typeof(e=e||("undefined"!==typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}function X(e,t){var n=t.checked;return F({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=n?n:e._wrapperState.initialChecked})}function Q(e,t){var n=null==t.defaultValue?"":t.defaultValue,i=null!=t.checked?t.checked:t.defaultChecked;n=V(null!=t.value?t.value:n),e._wrapperState={initialChecked:i,initialValue:n,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function $(e,t){null!=(t=t.checked)&&_(e,"checked",t,!1)}function J(e,t){$(e,t);var n=V(t.value),i=t.type;if(null!=n)"number"===i?(0===n&&""===e.value||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if("submit"===i||"reset"===i)return void e.removeAttribute("value");t.hasOwnProperty("value")?ee(e,t.type,n):t.hasOwnProperty("defaultValue")&&ee(e,t.type,V(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function Z(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var i=t.type;if(!("submit"!==i&&"reset"!==i||void 0!==t.value&&null!==t.value))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}""!==(n=e.name)&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,""!==n&&(e.name=n)}function ee(e,t,n){"number"===t&&Y(e.ownerDocument)===e||(null==n?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var te=Array.isArray;function ne(e,t,n,i){if(e=e.options,t){t={};for(var r=0;r<n.length;r++)t["$"+n[r]]=!0;for(n=0;n<e.length;n++)r=t.hasOwnProperty("$"+e[n].value),e[n].selected!==r&&(e[n].selected=r),r&&i&&(e[n].defaultSelected=!0)}else{for(n=""+V(n),t=null,r=0;r<e.length;r++){if(e[r].value===n)return e[r].selected=!0,void(i&&(e[r].defaultSelected=!0));null!==t||e[r].disabled||(t=e[r])}null!==t&&(t.selected=!0)}}function ie(e,t){if(null!=t.dangerouslySetInnerHTML)throw Error(s(91));return F({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function re(e,t){var n=t.value;if(null==n){if(n=t.children,t=t.defaultValue,null!=n){if(null!=t)throw Error(s(92));if(te(n)){if(1<n.length)throw Error(s(93));n=n[0]}t=n}null==t&&(t=""),n=t}e._wrapperState={initialValue:V(n)}}function se(e,t){var n=V(t.value),i=V(t.defaultValue);null!=n&&((n=""+n)!==e.value&&(e.value=n),null==t.defaultValue&&e.defaultValue!==n&&(e.defaultValue=n)),null!=i&&(e.defaultValue=""+i)}function oe(e){var t=e.textContent;t===e._wrapperState.initialValue&&""!==t&&null!==t&&(e.value=t)}function ae(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function le(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?ae(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}var ce,ue,he=(ue=function(e,t){if("http://www.w3.org/2000/svg"!==e.namespaceURI||"innerHTML"in e)e.innerHTML=t;else{for((ce=ce||document.createElement("div")).innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=ce.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}},"undefined"!==typeof MSApp&&MSApp.execUnsafeLocalFunction?function(e,t,n,i){MSApp.execUnsafeLocalFunction(function(){return ue(e,t)})}:ue);function de(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}var pe={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},fe=["Webkit","ms","Moz","O"];function ge(e,t,n){return null==t||"boolean"===typeof t||""===t?"":n||"number"!==typeof t||0===t||pe.hasOwnProperty(e)&&pe[e]?(""+t).trim():t+"px"}function me(e,t){for(var n in e=e.style,t)if(t.hasOwnProperty(n)){var i=0===n.indexOf("--"),r=ge(n,t[n],i);"float"===n&&(n="cssFloat"),i?e.setProperty(n,r):e[n]=r}}Object.keys(pe).forEach(function(e){fe.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),pe[t]=pe[e]})});var ve=F({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ye(e,t){if(t){if(ve[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML))throw Error(s(137,e));if(null!=t.dangerouslySetInnerHTML){if(null!=t.children)throw Error(s(60));if("object"!==typeof t.dangerouslySetInnerHTML||!("__html"in t.dangerouslySetInnerHTML))throw Error(s(61))}if(null!=t.style&&"object"!==typeof t.style)throw Error(s(62))}}function _e(e,t){if(-1===e.indexOf("-"))return"string"===typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var we=null;function be(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var xe=null,ke=null,Ee=null;function Ce(e){if(e=_r(e)){if("function"!==typeof xe)throw Error(s(280));var t=e.stateNode;t&&(t=br(t),xe(e.stateNode,e.type,t))}}function Se(e){ke?Ee?Ee.push(e):Ee=[e]:ke=e}function Ae(){if(ke){var e=ke,t=Ee;if(Ee=ke=null,Ce(e),t)for(e=0;e<t.length;e++)Ce(t[e])}}function Te(e,t){return e(t)}function Pe(){}var Ie=!1;function Re(e,t,n){if(Ie)return e(t,n);Ie=!0;try{return Te(e,t,n)}finally{Ie=!1,(null!==ke||null!==Ee)&&(Pe(),Ae())}}function Me(e,t){var n=e.stateNode;if(null===n)return null;var i=br(n);if(null===i)return null;n=i[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(i=!i.disabled)||(i=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!i;break e;default:e=!1}if(e)return null;if(n&&"function"!==typeof n)throw Error(s(231,t,typeof n));return n}var Ne=!1;if(u)try{var De={};Object.defineProperty(De,"passive",{get:function(){Ne=!0}}),window.addEventListener("test",De,De),window.removeEventListener("test",De,De)}catch(ue){Ne=!1}function Oe(e,t,n,i,r,s,o,a,l){var c=Array.prototype.slice.call(arguments,3);try{t.apply(n,c)}catch(u){this.onError(u)}}var Le=!1,Fe=null,je=!1,Be=null,We={onError:function(e){Le=!0,Fe=e}};function Ue(e,t,n,i,r,s,o,a,l){Le=!1,Fe=null,Oe.apply(We,arguments)}function ze(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!==(4098&(t=e).flags)&&(n=t.return),e=t.return}while(e)}return 3===t.tag?n:null}function He(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function Ve(e){if(ze(e)!==e)throw Error(s(188))}function qe(e){return null!==(e=function(e){var t=e.alternate;if(!t){if(null===(t=ze(e)))throw Error(s(188));return t!==e?null:e}for(var n=e,i=t;;){var r=n.return;if(null===r)break;var o=r.alternate;if(null===o){if(null!==(i=r.return)){n=i;continue}break}if(r.child===o.child){for(o=r.child;o;){if(o===n)return Ve(r),e;if(o===i)return Ve(r),t;o=o.sibling}throw Error(s(188))}if(n.return!==i.return)n=r,i=o;else{for(var a=!1,l=r.child;l;){if(l===n){a=!0,n=r,i=o;break}if(l===i){a=!0,i=r,n=o;break}l=l.sibling}if(!a){for(l=o.child;l;){if(l===n){a=!0,n=o,i=r;break}if(l===i){a=!0,i=o,n=r;break}l=l.sibling}if(!a)throw Error(s(189))}}if(n.alternate!==i)throw Error(s(190))}if(3!==n.tag)throw Error(s(188));return n.stateNode.current===n?e:t}(e))?Ge(e):null}function Ge(e){if(5===e.tag||6===e.tag)return e;for(e=e.child;null!==e;){var t=Ge(e);if(null!==t)return t;e=e.sibling}return null}var Ke=r.unstable_scheduleCallback,Ye=r.unstable_cancelCallback,Xe=r.unstable_shouldYield,Qe=r.unstable_requestPaint,$e=r.unstable_now,Je=r.unstable_getCurrentPriorityLevel,Ze=r.unstable_ImmediatePriority,et=r.unstable_UserBlockingPriority,tt=r.unstable_NormalPriority,nt=r.unstable_LowPriority,it=r.unstable_IdlePriority,rt=null,st=null;var ot=Math.clz32?Math.clz32:function(e){return e>>>=0,0===e?32:31-(at(e)/lt|0)|0},at=Math.log,lt=Math.LN2;var ct=64,ut=4194304;function ht(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194240&e;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return 130023424&e;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function dt(e,t){var n=e.pendingLanes;if(0===n)return 0;var i=0,r=e.suspendedLanes,s=e.pingedLanes,o=268435455&n;if(0!==o){var a=o&~r;0!==a?i=ht(a):0!==(s&=o)&&(i=ht(s))}else 0!==(o=n&~r)?i=ht(o):0!==s&&(i=ht(s));if(0===i)return 0;if(0!==t&&t!==i&&0===(t&r)&&((r=i&-i)>=(s=t&-t)||16===r&&0!==(4194240&s)))return t;if(0!==(4&i)&&(i|=16&n),0!==(t=e.entangledLanes))for(e=e.entanglements,t&=i;0<t;)r=1<<(n=31-ot(t)),i|=e[n],t&=~r;return i}function pt(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;default:return-1}}function ft(e){return 0!==(e=-1073741825&e.pendingLanes)?e:1073741824&e?1073741824:0}function gt(){var e=ct;return 0===(4194240&(ct<<=1))&&(ct=64),e}function mt(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function vt(e,t,n){e.pendingLanes|=t,536870912!==t&&(e.suspendedLanes=0,e.pingedLanes=0),(e=e.eventTimes)[t=31-ot(t)]=n}function yt(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var i=31-ot(n),r=1<<i;r&t|e[i]&t&&(e[i]|=t),n&=~r}}var _t=0;function wt(e){return 1<(e&=-e)?4<e?0!==(268435455&e)?16:536870912:4:1}var bt,xt,kt,Et,Ct,St=!1,At=[],Tt=null,Pt=null,It=null,Rt=new Map,Mt=new Map,Nt=[],Dt="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Ot(e,t){switch(e){case"focusin":case"focusout":Tt=null;break;case"dragenter":case"dragleave":Pt=null;break;case"mouseover":case"mouseout":It=null;break;case"pointerover":case"pointerout":Rt.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Mt.delete(t.pointerId)}}function Lt(e,t,n,i,r,s){return null===e||e.nativeEvent!==s?(e={blockedOn:t,domEventName:n,eventSystemFlags:i,nativeEvent:s,targetContainers:[r]},null!==t&&(null!==(t=_r(t))&&xt(t)),e):(e.eventSystemFlags|=i,t=e.targetContainers,null!==r&&-1===t.indexOf(r)&&t.push(r),e)}function Ft(e){var t=yr(e.target);if(null!==t){var n=ze(t);if(null!==n)if(13===(t=n.tag)){if(null!==(t=He(n)))return e.blockedOn=t,void Ct(e.priority,function(){kt(n)})}else if(3===t&&n.stateNode.current.memoizedState.isDehydrated)return void(e.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}e.blockedOn=null}function jt(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var n=Xt(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==n)return null!==(t=_r(n))&&xt(t),e.blockedOn=n,!1;var i=new(n=e.nativeEvent).constructor(n.type,n);we=i,n.target.dispatchEvent(i),we=null,t.shift()}return!0}function Bt(e,t,n){jt(e)&&n.delete(t)}function Wt(){St=!1,null!==Tt&&jt(Tt)&&(Tt=null),null!==Pt&&jt(Pt)&&(Pt=null),null!==It&&jt(It)&&(It=null),Rt.forEach(Bt),Mt.forEach(Bt)}function Ut(e,t){e.blockedOn===t&&(e.blockedOn=null,St||(St=!0,r.unstable_scheduleCallback(r.unstable_NormalPriority,Wt)))}function zt(e){function t(t){return Ut(t,e)}if(0<At.length){Ut(At[0],e);for(var n=1;n<At.length;n++){var i=At[n];i.blockedOn===e&&(i.blockedOn=null)}}for(null!==Tt&&Ut(Tt,e),null!==Pt&&Ut(Pt,e),null!==It&&Ut(It,e),Rt.forEach(t),Mt.forEach(t),n=0;n<Nt.length;n++)(i=Nt[n]).blockedOn===e&&(i.blockedOn=null);for(;0<Nt.length&&null===(n=Nt[0]).blockedOn;)Ft(n),null===n.blockedOn&&Nt.shift()}var Ht=w.ReactCurrentBatchConfig,Vt=!0;function qt(e,t,n,i){var r=_t,s=Ht.transition;Ht.transition=null;try{_t=1,Kt(e,t,n,i)}finally{_t=r,Ht.transition=s}}function Gt(e,t,n,i){var r=_t,s=Ht.transition;Ht.transition=null;try{_t=4,Kt(e,t,n,i)}finally{_t=r,Ht.transition=s}}function Kt(e,t,n,i){if(Vt){var r=Xt(e,t,n,i);if(null===r)Vi(e,t,i,Yt,n),Ot(e,i);else if(function(e,t,n,i,r){switch(t){case"focusin":return Tt=Lt(Tt,e,t,n,i,r),!0;case"dragenter":return Pt=Lt(Pt,e,t,n,i,r),!0;case"mouseover":return It=Lt(It,e,t,n,i,r),!0;case"pointerover":var s=r.pointerId;return Rt.set(s,Lt(Rt.get(s)||null,e,t,n,i,r)),!0;case"gotpointercapture":return s=r.pointerId,Mt.set(s,Lt(Mt.get(s)||null,e,t,n,i,r)),!0}return!1}(r,e,t,n,i))i.stopPropagation();else if(Ot(e,i),4&t&&-1<Dt.indexOf(e)){for(;null!==r;){var s=_r(r);if(null!==s&&bt(s),null===(s=Xt(e,t,n,i))&&Vi(e,t,i,Yt,n),s===r)break;r=s}null!==r&&i.stopPropagation()}else Vi(e,t,i,null,n)}}var Yt=null;function Xt(e,t,n,i){if(Yt=null,null!==(e=yr(e=be(i))))if(null===(t=ze(e)))e=null;else if(13===(n=t.tag)){if(null!==(e=He(t)))return e;e=null}else if(3===n){if(t.stateNode.current.memoizedState.isDehydrated)return 3===t.tag?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Yt=e,null}function Qt(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Je()){case Ze:return 1;case et:return 4;case tt:case nt:return 16;case it:return 536870912;default:return 16}default:return 16}}var $t=null,Jt=null,Zt=null;function en(){if(Zt)return Zt;var e,t,n=Jt,i=n.length,r="value"in $t?$t.value:$t.textContent,s=r.length;for(e=0;e<i&&n[e]===r[e];e++);var o=i-e;for(t=1;t<=o&&n[i-t]===r[s-t];t++);return Zt=r.slice(e,1<t?1-t:void 0)}function tn(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function nn(){return!0}function rn(){return!1}function sn(e){function t(t,n,i,r,s){for(var o in this._reactName=t,this._targetInst=i,this.type=n,this.nativeEvent=r,this.target=s,this.currentTarget=null,e)e.hasOwnProperty(o)&&(t=e[o],this[o]=t?t(r):r[o]);return this.isDefaultPrevented=(null!=r.defaultPrevented?r.defaultPrevented:!1===r.returnValue)?nn:rn,this.isPropagationStopped=rn,this}return F(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!==typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=nn)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!==typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=nn)},persist:function(){},isPersistent:nn}),t}var on,an,ln,cn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},un=sn(cn),hn=F({},cn,{view:0,detail:0}),dn=sn(hn),pn=F({},hn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Cn,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==ln&&(ln&&"mousemove"===e.type?(on=e.screenX-ln.screenX,an=e.screenY-ln.screenY):an=on=0,ln=e),on)},movementY:function(e){return"movementY"in e?e.movementY:an}}),fn=sn(pn),gn=sn(F({},pn,{dataTransfer:0})),mn=sn(F({},hn,{relatedTarget:0})),vn=sn(F({},cn,{animationName:0,elapsedTime:0,pseudoElement:0})),yn=F({},cn,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),_n=sn(yn),wn=sn(F({},cn,{data:0})),bn={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},xn={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},kn={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function En(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=kn[e])&&!!t[e]}function Cn(){return En}var Sn=F({},hn,{key:function(e){if(e.key){var t=bn[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=tn(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?xn[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Cn,charCode:function(e){return"keypress"===e.type?tn(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?tn(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}}),An=sn(Sn),Tn=sn(F({},pn,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),Pn=sn(F({},hn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Cn})),In=sn(F({},cn,{propertyName:0,elapsedTime:0,pseudoElement:0})),Rn=F({},pn,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Mn=sn(Rn),Nn=[9,13,27,32],Dn=u&&"CompositionEvent"in window,On=null;u&&"documentMode"in document&&(On=document.documentMode);var Ln=u&&"TextEvent"in window&&!On,Fn=u&&(!Dn||On&&8<On&&11>=On),jn=String.fromCharCode(32),Bn=!1;function Wn(e,t){switch(e){case"keyup":return-1!==Nn.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Un(e){return"object"===typeof(e=e.detail)&&"data"in e?e.data:null}var zn=!1;var Hn={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Vn(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!Hn[e.type]:"textarea"===t}function qn(e,t,n,i){Se(i),0<(t=Gi(t,"onChange")).length&&(n=new un("onChange","change",null,n,i),e.push({event:n,listeners:t}))}var Gn=null,Kn=null;function Yn(e){ji(e,0)}function Xn(e){if(K(wr(e)))return e}function Qn(e,t){if("change"===e)return t}var $n=!1;if(u){var Jn;if(u){var Zn="oninput"in document;if(!Zn){var ei=document.createElement("div");ei.setAttribute("oninput","return;"),Zn="function"===typeof ei.oninput}Jn=Zn}else Jn=!1;$n=Jn&&(!document.documentMode||9<document.documentMode)}function ti(){Gn&&(Gn.detachEvent("onpropertychange",ni),Kn=Gn=null)}function ni(e){if("value"===e.propertyName&&Xn(Kn)){var t=[];qn(t,Kn,e,be(e)),Re(Yn,t)}}function ii(e,t,n){"focusin"===e?(ti(),Kn=n,(Gn=t).attachEvent("onpropertychange",ni)):"focusout"===e&&ti()}function ri(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return Xn(Kn)}function si(e,t){if("click"===e)return Xn(t)}function oi(e,t){if("input"===e||"change"===e)return Xn(t)}var ai="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t};function li(e,t){if(ai(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var n=Object.keys(e),i=Object.keys(t);if(n.length!==i.length)return!1;for(i=0;i<n.length;i++){var r=n[i];if(!h.call(t,r)||!ai(e[r],t[r]))return!1}return!0}function ci(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function ui(e,t){var n,i=ci(e);for(e=0;i;){if(3===i.nodeType){if(n=e+i.textContent.length,e<=t&&n>=t)return{node:i,offset:t-e};e=n}e:{for(;i;){if(i.nextSibling){i=i.nextSibling;break e}i=i.parentNode}i=void 0}i=ci(i)}}function hi(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?hi(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function di(){for(var e=window,t=Y();t instanceof e.HTMLIFrameElement;){try{var n="string"===typeof t.contentWindow.location.href}catch(i){n=!1}if(!n)break;t=Y((e=t.contentWindow).document)}return t}function pi(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}function fi(e){var t=di(),n=e.focusedElem,i=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&hi(n.ownerDocument.documentElement,n)){if(null!==i&&pi(n))if(t=i.start,void 0===(e=i.end)&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if((e=(t=n.ownerDocument||document)&&t.defaultView||window).getSelection){e=e.getSelection();var r=n.textContent.length,s=Math.min(i.start,r);i=void 0===i.end?s:Math.min(i.end,r),!e.extend&&s>i&&(r=i,i=s,s=r),r=ui(n,s);var o=ui(n,i);r&&o&&(1!==e.rangeCount||e.anchorNode!==r.node||e.anchorOffset!==r.offset||e.focusNode!==o.node||e.focusOffset!==o.offset)&&((t=t.createRange()).setStart(r.node,r.offset),e.removeAllRanges(),s>i?(e.addRange(t),e.extend(o.node,o.offset)):(t.setEnd(o.node,o.offset),e.addRange(t)))}for(t=[],e=n;e=e.parentNode;)1===e.nodeType&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for("function"===typeof n.focus&&n.focus(),n=0;n<t.length;n++)(e=t[n]).element.scrollLeft=e.left,e.element.scrollTop=e.top}}var gi=u&&"documentMode"in document&&11>=document.documentMode,mi=null,vi=null,yi=null,_i=!1;function wi(e,t,n){var i=n.window===n?n.document:9===n.nodeType?n:n.ownerDocument;_i||null==mi||mi!==Y(i)||("selectionStart"in(i=mi)&&pi(i)?i={start:i.selectionStart,end:i.selectionEnd}:i={anchorNode:(i=(i.ownerDocument&&i.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:i.anchorOffset,focusNode:i.focusNode,focusOffset:i.focusOffset},yi&&li(yi,i)||(yi=i,0<(i=Gi(vi,"onSelect")).length&&(t=new un("onSelect","select",null,t,n),e.push({event:t,listeners:i}),t.target=mi)))}function bi(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var xi={animationend:bi("Animation","AnimationEnd"),animationiteration:bi("Animation","AnimationIteration"),animationstart:bi("Animation","AnimationStart"),transitionend:bi("Transition","TransitionEnd")},ki={},Ei={};function Ci(e){if(ki[e])return ki[e];if(!xi[e])return e;var t,n=xi[e];for(t in n)if(n.hasOwnProperty(t)&&t in Ei)return ki[e]=n[t];return e}u&&(Ei=document.createElement("div").style,"AnimationEvent"in window||(delete xi.animationend.animation,delete xi.animationiteration.animation,delete xi.animationstart.animation),"TransitionEvent"in window||delete xi.transitionend.transition);var Si=Ci("animationend"),Ai=Ci("animationiteration"),Ti=Ci("animationstart"),Pi=Ci("transitionend"),Ii=new Map,Ri="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Mi(e,t){Ii.set(e,t),l(t,[e])}for(var Ni=0;Ni<Ri.length;Ni++){var Di=Ri[Ni];Mi(Di.toLowerCase(),"on"+(Di[0].toUpperCase()+Di.slice(1)))}Mi(Si,"onAnimationEnd"),Mi(Ai,"onAnimationIteration"),Mi(Ti,"onAnimationStart"),Mi("dblclick","onDoubleClick"),Mi("focusin","onFocus"),Mi("focusout","onBlur"),Mi(Pi,"onTransitionEnd"),c("onMouseEnter",["mouseout","mouseover"]),c("onMouseLeave",["mouseout","mouseover"]),c("onPointerEnter",["pointerout","pointerover"]),c("onPointerLeave",["pointerout","pointerover"]),l("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),l("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),l("onBeforeInput",["compositionend","keypress","textInput","paste"]),l("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Oi="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Li=new Set("cancel close invalid load scroll toggle".split(" ").concat(Oi));function Fi(e,t,n){var i=e.type||"unknown-event";e.currentTarget=n,function(e,t,n,i,r,o,a,l,c){if(Ue.apply(this,arguments),Le){if(!Le)throw Error(s(198));var u=Fe;Le=!1,Fe=null,je||(je=!0,Be=u)}}(i,t,void 0,e),e.currentTarget=null}function ji(e,t){t=0!==(4&t);for(var n=0;n<e.length;n++){var i=e[n],r=i.event;i=i.listeners;e:{var s=void 0;if(t)for(var o=i.length-1;0<=o;o--){var a=i[o],l=a.instance,c=a.currentTarget;if(a=a.listener,l!==s&&r.isPropagationStopped())break e;Fi(r,a,c),s=l}else for(o=0;o<i.length;o++){if(l=(a=i[o]).instance,c=a.currentTarget,a=a.listener,l!==s&&r.isPropagationStopped())break e;Fi(r,a,c),s=l}}}if(je)throw e=Be,je=!1,Be=null,e}function Bi(e,t){var n=t[gr];void 0===n&&(n=t[gr]=new Set);var i=e+"__bubble";n.has(i)||(Hi(t,e,2,!1),n.add(i))}function Wi(e,t,n){var i=0;t&&(i|=4),Hi(n,e,i,t)}var Ui="_reactListening"+Math.random().toString(36).slice(2);function zi(e){if(!e[Ui]){e[Ui]=!0,o.forEach(function(t){"selectionchange"!==t&&(Li.has(t)||Wi(t,!1,e),Wi(t,!0,e))});var t=9===e.nodeType?e:e.ownerDocument;null===t||t[Ui]||(t[Ui]=!0,Wi("selectionchange",!1,t))}}function Hi(e,t,n,i){switch(Qt(t)){case 1:var r=qt;break;case 4:r=Gt;break;default:r=Kt}n=r.bind(null,t,n,e),r=void 0,!Ne||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(r=!0),i?void 0!==r?e.addEventListener(t,n,{capture:!0,passive:r}):e.addEventListener(t,n,!0):void 0!==r?e.addEventListener(t,n,{passive:r}):e.addEventListener(t,n,!1)}function Vi(e,t,n,i,r){var s=i;if(0===(1&t)&&0===(2&t)&&null!==i)e:for(;;){if(null===i)return;var o=i.tag;if(3===o||4===o){var a=i.stateNode.containerInfo;if(a===r||8===a.nodeType&&a.parentNode===r)break;if(4===o)for(o=i.return;null!==o;){var l=o.tag;if((3===l||4===l)&&((l=o.stateNode.containerInfo)===r||8===l.nodeType&&l.parentNode===r))return;o=o.return}for(;null!==a;){if(null===(o=yr(a)))return;if(5===(l=o.tag)||6===l){i=s=o;continue e}a=a.parentNode}}i=i.return}Re(function(){var i=s,r=be(n),o=[];e:{var a=Ii.get(e);if(void 0!==a){var l=un,c=e;switch(e){case"keypress":if(0===tn(n))break e;case"keydown":case"keyup":l=An;break;case"focusin":c="focus",l=mn;break;case"focusout":c="blur",l=mn;break;case"beforeblur":case"afterblur":l=mn;break;case"click":if(2===n.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":l=fn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":l=gn;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":l=Pn;break;case Si:case Ai:case Ti:l=vn;break;case Pi:l=In;break;case"scroll":l=dn;break;case"wheel":l=Mn;break;case"copy":case"cut":case"paste":l=_n;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":l=Tn}var u=0!==(4&t),h=!u&&"scroll"===e,d=u?null!==a?a+"Capture":null:a;u=[];for(var p,f=i;null!==f;){var g=(p=f).stateNode;if(5===p.tag&&null!==g&&(p=g,null!==d&&(null!=(g=Me(f,d))&&u.push(qi(f,g,p)))),h)break;f=f.return}0<u.length&&(a=new l(a,c,null,n,r),o.push({event:a,listeners:u}))}}if(0===(7&t)){if(l="mouseout"===e||"pointerout"===e,(!(a="mouseover"===e||"pointerover"===e)||n===we||!(c=n.relatedTarget||n.fromElement)||!yr(c)&&!c[fr])&&(l||a)&&(a=r.window===r?r:(a=r.ownerDocument)?a.defaultView||a.parentWindow:window,l?(l=i,null!==(c=(c=n.relatedTarget||n.toElement)?yr(c):null)&&(c!==(h=ze(c))||5!==c.tag&&6!==c.tag)&&(c=null)):(l=null,c=i),l!==c)){if(u=fn,g="onMouseLeave",d="onMouseEnter",f="mouse","pointerout"!==e&&"pointerover"!==e||(u=Tn,g="onPointerLeave",d="onPointerEnter",f="pointer"),h=null==l?a:wr(l),p=null==c?a:wr(c),(a=new u(g,f+"leave",l,n,r)).target=h,a.relatedTarget=p,g=null,yr(r)===i&&((u=new u(d,f+"enter",c,n,r)).target=p,u.relatedTarget=h,g=u),h=g,l&&c)e:{for(d=c,f=0,p=u=l;p;p=Ki(p))f++;for(p=0,g=d;g;g=Ki(g))p++;for(;0<f-p;)u=Ki(u),f--;for(;0<p-f;)d=Ki(d),p--;for(;f--;){if(u===d||null!==d&&u===d.alternate)break e;u=Ki(u),d=Ki(d)}u=null}else u=null;null!==l&&Yi(o,a,l,u,!1),null!==c&&null!==h&&Yi(o,h,c,u,!0)}if("select"===(l=(a=i?wr(i):window).nodeName&&a.nodeName.toLowerCase())||"input"===l&&"file"===a.type)var m=Qn;else if(Vn(a))if($n)m=oi;else{m=ri;var v=ii}else(l=a.nodeName)&&"input"===l.toLowerCase()&&("checkbox"===a.type||"radio"===a.type)&&(m=si);switch(m&&(m=m(e,i))?qn(o,m,n,r):(v&&v(e,a,i),"focusout"===e&&(v=a._wrapperState)&&v.controlled&&"number"===a.type&&ee(a,"number",a.value)),v=i?wr(i):window,e){case"focusin":(Vn(v)||"true"===v.contentEditable)&&(mi=v,vi=i,yi=null);break;case"focusout":yi=vi=mi=null;break;case"mousedown":_i=!0;break;case"contextmenu":case"mouseup":case"dragend":_i=!1,wi(o,n,r);break;case"selectionchange":if(gi)break;case"keydown":case"keyup":wi(o,n,r)}var y;if(Dn)e:{switch(e){case"compositionstart":var _="onCompositionStart";break e;case"compositionend":_="onCompositionEnd";break e;case"compositionupdate":_="onCompositionUpdate";break e}_=void 0}else zn?Wn(e,n)&&(_="onCompositionEnd"):"keydown"===e&&229===n.keyCode&&(_="onCompositionStart");_&&(Fn&&"ko"!==n.locale&&(zn||"onCompositionStart"!==_?"onCompositionEnd"===_&&zn&&(y=en()):(Jt="value"in($t=r)?$t.value:$t.textContent,zn=!0)),0<(v=Gi(i,_)).length&&(_=new wn(_,e,null,n,r),o.push({event:_,listeners:v}),y?_.data=y:null!==(y=Un(n))&&(_.data=y))),(y=Ln?function(e,t){switch(e){case"compositionend":return Un(t);case"keypress":return 32!==t.which?null:(Bn=!0,jn);case"textInput":return(e=t.data)===jn&&Bn?null:e;default:return null}}(e,n):function(e,t){if(zn)return"compositionend"===e||!Dn&&Wn(e,t)?(e=en(),Zt=Jt=$t=null,zn=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Fn&&"ko"!==t.locale?null:t.data}}(e,n))&&(0<(i=Gi(i,"onBeforeInput")).length&&(r=new wn("onBeforeInput","beforeinput",null,n,r),o.push({event:r,listeners:i}),r.data=y))}ji(o,t)})}function qi(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Gi(e,t){for(var n=t+"Capture",i=[];null!==e;){var r=e,s=r.stateNode;5===r.tag&&null!==s&&(r=s,null!=(s=Me(e,n))&&i.unshift(qi(e,s,r)),null!=(s=Me(e,t))&&i.push(qi(e,s,r))),e=e.return}return i}function Ki(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag);return e||null}function Yi(e,t,n,i,r){for(var s=t._reactName,o=[];null!==n&&n!==i;){var a=n,l=a.alternate,c=a.stateNode;if(null!==l&&l===i)break;5===a.tag&&null!==c&&(a=c,r?null!=(l=Me(n,s))&&o.unshift(qi(n,l,a)):r||null!=(l=Me(n,s))&&o.push(qi(n,l,a))),n=n.return}0!==o.length&&e.push({event:t,listeners:o})}var Xi=/\r\n?/g,Qi=/\u0000|\uFFFD/g;function $i(e){return("string"===typeof e?e:""+e).replace(Xi,"\n").replace(Qi,"")}function Ji(e,t,n){if(t=$i(t),$i(e)!==t&&n)throw Error(s(425))}function Zi(){}var er=null,tr=null;function nr(e,t){return"textarea"===e||"noscript"===e||"string"===typeof t.children||"number"===typeof t.children||"object"===typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var ir="function"===typeof setTimeout?setTimeout:void 0,rr="function"===typeof clearTimeout?clearTimeout:void 0,sr="function"===typeof Promise?Promise:void 0,or="function"===typeof queueMicrotask?queueMicrotask:"undefined"!==typeof sr?function(e){return sr.resolve(null).then(e).catch(ar)}:ir;function ar(e){setTimeout(function(){throw e})}function lr(e,t){var n=t,i=0;do{var r=n.nextSibling;if(e.removeChild(n),r&&8===r.nodeType)if("/$"===(n=r.data)){if(0===i)return e.removeChild(r),void zt(t);i--}else"$"!==n&&"$?"!==n&&"$!"!==n||i++;n=r}while(n);zt(t)}function cr(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break;if(8===t){if("$"===(t=e.data)||"$!"===t||"$?"===t)break;if("/$"===t)return null}}return e}function ur(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("$"===n||"$!"===n||"$?"===n){if(0===t)return e;t--}else"/$"===n&&t++}e=e.previousSibling}return null}var hr=Math.random().toString(36).slice(2),dr="__reactFiber$"+hr,pr="__reactProps$"+hr,fr="__reactContainer$"+hr,gr="__reactEvents$"+hr,mr="__reactListeners$"+hr,vr="__reactHandles$"+hr;function yr(e){var t=e[dr];if(t)return t;for(var n=e.parentNode;n;){if(t=n[fr]||n[dr]){if(n=t.alternate,null!==t.child||null!==n&&null!==n.child)for(e=ur(e);null!==e;){if(n=e[dr])return n;e=ur(e)}return t}n=(e=n).parentNode}return null}function _r(e){return!(e=e[dr]||e[fr])||5!==e.tag&&6!==e.tag&&13!==e.tag&&3!==e.tag?null:e}function wr(e){if(5===e.tag||6===e.tag)return e.stateNode;throw Error(s(33))}function br(e){return e[pr]||null}var xr=[],kr=-1;function Er(e){return{current:e}}function Cr(e){0>kr||(e.current=xr[kr],xr[kr]=null,kr--)}function Sr(e,t){kr++,xr[kr]=e.current,e.current=t}var Ar={},Tr=Er(Ar),Pr=Er(!1),Ir=Ar;function Rr(e,t){var n=e.type.contextTypes;if(!n)return Ar;var i=e.stateNode;if(i&&i.__reactInternalMemoizedUnmaskedChildContext===t)return i.__reactInternalMemoizedMaskedChildContext;var r,s={};for(r in n)s[r]=t[r];return i&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=s),s}function Mr(e){return null!==(e=e.childContextTypes)&&void 0!==e}function Nr(){Cr(Pr),Cr(Tr)}function Dr(e,t,n){if(Tr.current!==Ar)throw Error(s(168));Sr(Tr,t),Sr(Pr,n)}function Or(e,t,n){var i=e.stateNode;if(t=t.childContextTypes,"function"!==typeof i.getChildContext)return n;for(var r in i=i.getChildContext())if(!(r in t))throw Error(s(108,H(e)||"Unknown",r));return F({},n,i)}function Lr(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Ar,Ir=Tr.current,Sr(Tr,e),Sr(Pr,Pr.current),!0}function Fr(e,t,n){var i=e.stateNode;if(!i)throw Error(s(169));n?(e=Or(e,t,Ir),i.__reactInternalMemoizedMergedChildContext=e,Cr(Pr),Cr(Tr),Sr(Tr,e)):Cr(Pr),Sr(Pr,n)}var jr=null,Br=!1,Wr=!1;function Ur(e){null===jr?jr=[e]:jr.push(e)}function zr(){if(!Wr&&null!==jr){Wr=!0;var e=0,t=_t;try{var n=jr;for(_t=1;e<n.length;e++){var i=n[e];do{i=i(!0)}while(null!==i)}jr=null,Br=!1}catch(r){throw null!==jr&&(jr=jr.slice(e+1)),Ke(Ze,zr),r}finally{_t=t,Wr=!1}}return null}var Hr=[],Vr=0,qr=null,Gr=0,Kr=[],Yr=0,Xr=null,Qr=1,$r="";function Jr(e,t){Hr[Vr++]=Gr,Hr[Vr++]=qr,qr=e,Gr=t}function Zr(e,t,n){Kr[Yr++]=Qr,Kr[Yr++]=$r,Kr[Yr++]=Xr,Xr=e;var i=Qr;e=$r;var r=32-ot(i)-1;i&=~(1<<r),n+=1;var s=32-ot(t)+r;if(30<s){var o=r-r%5;s=(i&(1<<o)-1).toString(32),i>>=o,r-=o,Qr=1<<32-ot(t)+r|n<<r|i,$r=s+e}else Qr=1<<s|n<<r|i,$r=e}function es(e){null!==e.return&&(Jr(e,1),Zr(e,1,0))}function ts(e){for(;e===qr;)qr=Hr[--Vr],Hr[Vr]=null,Gr=Hr[--Vr],Hr[Vr]=null;for(;e===Xr;)Xr=Kr[--Yr],Kr[Yr]=null,$r=Kr[--Yr],Kr[Yr]=null,Qr=Kr[--Yr],Kr[Yr]=null}var ns=null,is=null,rs=!1,ss=null;function os(e,t){var n=Mc(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,null===(t=e.deletions)?(e.deletions=[n],e.flags|=16):t.push(n)}function as(e,t){switch(e.tag){case 5:var n=e.type;return null!==(t=1!==t.nodeType||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t)&&(e.stateNode=t,ns=e,is=cr(t.firstChild),!0);case 6:return null!==(t=""===e.pendingProps||3!==t.nodeType?null:t)&&(e.stateNode=t,ns=e,is=null,!0);case 13:return null!==(t=8!==t.nodeType?null:t)&&(n=null!==Xr?{id:Qr,overflow:$r}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},(n=Mc(18,null,null,0)).stateNode=t,n.return=e,e.child=n,ns=e,is=null,!0);default:return!1}}function ls(e){return 0!==(1&e.mode)&&0===(128&e.flags)}function cs(e){if(rs){var t=is;if(t){var n=t;if(!as(e,t)){if(ls(e))throw Error(s(418));t=cr(n.nextSibling);var i=ns;t&&as(e,t)?os(i,n):(e.flags=-4097&e.flags|2,rs=!1,ns=e)}}else{if(ls(e))throw Error(s(418));e.flags=-4097&e.flags|2,rs=!1,ns=e}}}function us(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;ns=e}function hs(e){if(e!==ns)return!1;if(!rs)return us(e),rs=!0,!1;var t;if((t=3!==e.tag)&&!(t=5!==e.tag)&&(t="head"!==(t=e.type)&&"body"!==t&&!nr(e.type,e.memoizedProps)),t&&(t=is)){if(ls(e))throw ds(),Error(s(418));for(;t;)os(e,t),t=cr(t.nextSibling)}if(us(e),13===e.tag){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(s(317));e:{for(e=e.nextSibling,t=0;e;){if(8===e.nodeType){var n=e.data;if("/$"===n){if(0===t){is=cr(e.nextSibling);break e}t--}else"$"!==n&&"$!"!==n&&"$?"!==n||t++}e=e.nextSibling}is=null}}else is=ns?cr(e.stateNode.nextSibling):null;return!0}function ds(){for(var e=is;e;)e=cr(e.nextSibling)}function ps(){is=ns=null,rs=!1}function fs(e){null===ss?ss=[e]:ss.push(e)}var gs=w.ReactCurrentBatchConfig;function ms(e,t){if(e&&e.defaultProps){for(var n in t=F({},t),e=e.defaultProps)void 0===t[n]&&(t[n]=e[n]);return t}return t}var vs=Er(null),ys=null,_s=null,ws=null;function bs(){ws=_s=ys=null}function xs(e){var t=vs.current;Cr(vs),e._currentValue=t}function ks(e,t,n){for(;null!==e;){var i=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,null!==i&&(i.childLanes|=t)):null!==i&&(i.childLanes&t)!==t&&(i.childLanes|=t),e===n)break;e=e.return}}function Es(e,t){ys=e,ws=_s=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(0!==(e.lanes&t)&&(wa=!0),e.firstContext=null)}function Cs(e){var t=e._currentValue;if(ws!==e)if(e={context:e,memoizedValue:t,next:null},null===_s){if(null===ys)throw Error(s(308));_s=e,ys.dependencies={lanes:0,firstContext:e}}else _s=_s.next=e;return t}var Ss=null;function As(e){null===Ss?Ss=[e]:Ss.push(e)}function Ts(e,t,n,i){var r=t.interleaved;return null===r?(n.next=n,As(t)):(n.next=r.next,r.next=n),t.interleaved=n,Ps(e,i)}function Ps(e,t){e.lanes|=t;var n=e.alternate;for(null!==n&&(n.lanes|=t),n=e,e=e.return;null!==e;)e.childLanes|=t,null!==(n=e.alternate)&&(n.childLanes|=t),n=e,e=e.return;return 3===n.tag?n.stateNode:null}var Is=!1;function Rs(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Ms(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Ns(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Ds(e,t,n){var i=e.updateQueue;if(null===i)return null;if(i=i.shared,0!==(2&Pl)){var r=i.pending;return null===r?t.next=t:(t.next=r.next,r.next=t),i.pending=t,Ps(e,n)}return null===(r=i.interleaved)?(t.next=t,As(i)):(t.next=r.next,r.next=t),i.interleaved=t,Ps(e,n)}function Os(e,t,n){if(null!==(t=t.updateQueue)&&(t=t.shared,0!==(4194240&n))){var i=t.lanes;n|=i&=e.pendingLanes,t.lanes=n,yt(e,n)}}function Ls(e,t){var n=e.updateQueue,i=e.alternate;if(null!==i&&n===(i=i.updateQueue)){var r=null,s=null;if(null!==(n=n.firstBaseUpdate)){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};null===s?r=s=o:s=s.next=o,n=n.next}while(null!==n);null===s?r=s=t:s=s.next=t}else r=s=t;return n={baseState:i.baseState,firstBaseUpdate:r,lastBaseUpdate:s,shared:i.shared,effects:i.effects},void(e.updateQueue=n)}null===(e=n.lastBaseUpdate)?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function Fs(e,t,n,i){var r=e.updateQueue;Is=!1;var s=r.firstBaseUpdate,o=r.lastBaseUpdate,a=r.shared.pending;if(null!==a){r.shared.pending=null;var l=a,c=l.next;l.next=null,null===o?s=c:o.next=c,o=l;var u=e.alternate;null!==u&&((a=(u=u.updateQueue).lastBaseUpdate)!==o&&(null===a?u.firstBaseUpdate=c:a.next=c,u.lastBaseUpdate=l))}if(null!==s){var h=r.baseState;for(o=0,u=c=l=null,a=s;;){var d=a.lane,p=a.eventTime;if((i&d)===d){null!==u&&(u=u.next={eventTime:p,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var f=e,g=a;switch(d=t,p=n,g.tag){case 1:if("function"===typeof(f=g.payload)){h=f.call(p,h,d);break e}h=f;break e;case 3:f.flags=-65537&f.flags|128;case 0:if(null===(d="function"===typeof(f=g.payload)?f.call(p,h,d):f)||void 0===d)break e;h=F({},h,d);break e;case 2:Is=!0}}null!==a.callback&&0!==a.lane&&(e.flags|=64,null===(d=r.effects)?r.effects=[a]:d.push(a))}else p={eventTime:p,lane:d,tag:a.tag,payload:a.payload,callback:a.callback,next:null},null===u?(c=u=p,l=h):u=u.next=p,o|=d;if(null===(a=a.next)){if(null===(a=r.shared.pending))break;a=(d=a).next,d.next=null,r.lastBaseUpdate=d,r.shared.pending=null}}if(null===u&&(l=h),r.baseState=l,r.firstBaseUpdate=c,r.lastBaseUpdate=u,null!==(t=r.shared.interleaved)){r=t;do{o|=r.lane,r=r.next}while(r!==t)}else null===s&&(r.shared.lanes=0);Fl|=o,e.lanes=o,e.memoizedState=h}}function js(e,t,n){if(e=t.effects,t.effects=null,null!==e)for(t=0;t<e.length;t++){var i=e[t],r=i.callback;if(null!==r){if(i.callback=null,i=n,"function"!==typeof r)throw Error(s(191,r));r.call(i)}}}var Bs=(new i.Component).refs;function Ws(e,t,n,i){n=null===(n=n(i,t=e.memoizedState))||void 0===n?t:F({},t,n),e.memoizedState=n,0===e.lanes&&(e.updateQueue.baseState=n)}var Us={isMounted:function(e){return!!(e=e._reactInternals)&&ze(e)===e},enqueueSetState:function(e,t,n){e=e._reactInternals;var i=tc(),r=nc(e),s=Ns(i,r);s.payload=t,void 0!==n&&null!==n&&(s.callback=n),null!==(t=Ds(e,s,r))&&(ic(t,e,r,i),Os(t,e,r))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var i=tc(),r=nc(e),s=Ns(i,r);s.tag=1,s.payload=t,void 0!==n&&null!==n&&(s.callback=n),null!==(t=Ds(e,s,r))&&(ic(t,e,r,i),Os(t,e,r))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=tc(),i=nc(e),r=Ns(n,i);r.tag=2,void 0!==t&&null!==t&&(r.callback=t),null!==(t=Ds(e,r,i))&&(ic(t,e,i,n),Os(t,e,i))}};function zs(e,t,n,i,r,s,o){return"function"===typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(i,s,o):!t.prototype||!t.prototype.isPureReactComponent||(!li(n,i)||!li(r,s))}function Hs(e,t,n){var i=!1,r=Ar,s=t.contextType;return"object"===typeof s&&null!==s?s=Cs(s):(r=Mr(t)?Ir:Tr.current,s=(i=null!==(i=t.contextTypes)&&void 0!==i)?Rr(e,r):Ar),t=new t(n,s),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=Us,e.stateNode=t,t._reactInternals=e,i&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=r,e.__reactInternalMemoizedMaskedChildContext=s),t}function Vs(e,t,n,i){e=t.state,"function"===typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,i),"function"===typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,i),t.state!==e&&Us.enqueueReplaceState(t,t.state,null)}function qs(e,t,n,i){var r=e.stateNode;r.props=n,r.state=e.memoizedState,r.refs=Bs,Rs(e);var s=t.contextType;"object"===typeof s&&null!==s?r.context=Cs(s):(s=Mr(t)?Ir:Tr.current,r.context=Rr(e,s)),r.state=e.memoizedState,"function"===typeof(s=t.getDerivedStateFromProps)&&(Ws(e,t,s,n),r.state=e.memoizedState),"function"===typeof t.getDerivedStateFromProps||"function"===typeof r.getSnapshotBeforeUpdate||"function"!==typeof r.UNSAFE_componentWillMount&&"function"!==typeof r.componentWillMount||(t=r.state,"function"===typeof r.componentWillMount&&r.componentWillMount(),"function"===typeof r.UNSAFE_componentWillMount&&r.UNSAFE_componentWillMount(),t!==r.state&&Us.enqueueReplaceState(r,r.state,null),Fs(e,n,r,i),r.state=e.memoizedState),"function"===typeof r.componentDidMount&&(e.flags|=4194308)}function Gs(e,t,n){if(null!==(e=n.ref)&&"function"!==typeof e&&"object"!==typeof e){if(n._owner){if(n=n._owner){if(1!==n.tag)throw Error(s(309));var i=n.stateNode}if(!i)throw Error(s(147,e));var r=i,o=""+e;return null!==t&&null!==t.ref&&"function"===typeof t.ref&&t.ref._stringRef===o?t.ref:(t=function(e){var t=r.refs;t===Bs&&(t=r.refs={}),null===e?delete t[o]:t[o]=e},t._stringRef=o,t)}if("string"!==typeof e)throw Error(s(284));if(!n._owner)throw Error(s(290,e))}return e}function Ks(e,t){throw e=Object.prototype.toString.call(t),Error(s(31,"[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function Ys(e){return(0,e._init)(e._payload)}function Xs(e){function t(t,n){if(e){var i=t.deletions;null===i?(t.deletions=[n],t.flags|=16):i.push(n)}}function n(n,i){if(!e)return null;for(;null!==i;)t(n,i),i=i.sibling;return null}function i(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function r(e,t){return(e=Dc(e,t)).index=0,e.sibling=null,e}function o(t,n,i){return t.index=i,e?null!==(i=t.alternate)?(i=i.index)<n?(t.flags|=2,n):i:(t.flags|=2,n):(t.flags|=1048576,n)}function a(t){return e&&null===t.alternate&&(t.flags|=2),t}function l(e,t,n,i){return null===t||6!==t.tag?((t=jc(n,e.mode,i)).return=e,t):((t=r(t,n)).return=e,t)}function c(e,t,n,i){var s=n.type;return s===k?h(e,t,n.props.children,i,n.key):null!==t&&(t.elementType===s||"object"===typeof s&&null!==s&&s.$$typeof===M&&Ys(s)===t.type)?((i=r(t,n.props)).ref=Gs(e,t,n),i.return=e,i):((i=Oc(n.type,n.key,n.props,null,e.mode,i)).ref=Gs(e,t,n),i.return=e,i)}function u(e,t,n,i){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=Bc(n,e.mode,i)).return=e,t):((t=r(t,n.children||[])).return=e,t)}function h(e,t,n,i,s){return null===t||7!==t.tag?((t=Lc(n,e.mode,i,s)).return=e,t):((t=r(t,n)).return=e,t)}function d(e,t,n){if("string"===typeof t&&""!==t||"number"===typeof t)return(t=jc(""+t,e.mode,n)).return=e,t;if("object"===typeof t&&null!==t){switch(t.$$typeof){case b:return(n=Oc(t.type,t.key,t.props,null,e.mode,n)).ref=Gs(e,null,t),n.return=e,n;case x:return(t=Bc(t,e.mode,n)).return=e,t;case M:return d(e,(0,t._init)(t._payload),n)}if(te(t)||O(t))return(t=Lc(t,e.mode,n,null)).return=e,t;Ks(e,t)}return null}function p(e,t,n,i){var r=null!==t?t.key:null;if("string"===typeof n&&""!==n||"number"===typeof n)return null!==r?null:l(e,t,""+n,i);if("object"===typeof n&&null!==n){switch(n.$$typeof){case b:return n.key===r?c(e,t,n,i):null;case x:return n.key===r?u(e,t,n,i):null;case M:return p(e,t,(r=n._init)(n._payload),i)}if(te(n)||O(n))return null!==r?null:h(e,t,n,i,null);Ks(e,n)}return null}function f(e,t,n,i,r){if("string"===typeof i&&""!==i||"number"===typeof i)return l(t,e=e.get(n)||null,""+i,r);if("object"===typeof i&&null!==i){switch(i.$$typeof){case b:return c(t,e=e.get(null===i.key?n:i.key)||null,i,r);case x:return u(t,e=e.get(null===i.key?n:i.key)||null,i,r);case M:return f(e,t,n,(0,i._init)(i._payload),r)}if(te(i)||O(i))return h(t,e=e.get(n)||null,i,r,null);Ks(t,i)}return null}function g(r,s,a,l){for(var c=null,u=null,h=s,g=s=0,m=null;null!==h&&g<a.length;g++){h.index>g?(m=h,h=null):m=h.sibling;var v=p(r,h,a[g],l);if(null===v){null===h&&(h=m);break}e&&h&&null===v.alternate&&t(r,h),s=o(v,s,g),null===u?c=v:u.sibling=v,u=v,h=m}if(g===a.length)return n(r,h),rs&&Jr(r,g),c;if(null===h){for(;g<a.length;g++)null!==(h=d(r,a[g],l))&&(s=o(h,s,g),null===u?c=h:u.sibling=h,u=h);return rs&&Jr(r,g),c}for(h=i(r,h);g<a.length;g++)null!==(m=f(h,r,g,a[g],l))&&(e&&null!==m.alternate&&h.delete(null===m.key?g:m.key),s=o(m,s,g),null===u?c=m:u.sibling=m,u=m);return e&&h.forEach(function(e){return t(r,e)}),rs&&Jr(r,g),c}function m(r,a,l,c){var u=O(l);if("function"!==typeof u)throw Error(s(150));if(null==(l=u.call(l)))throw Error(s(151));for(var h=u=null,g=a,m=a=0,v=null,y=l.next();null!==g&&!y.done;m++,y=l.next()){g.index>m?(v=g,g=null):v=g.sibling;var _=p(r,g,y.value,c);if(null===_){null===g&&(g=v);break}e&&g&&null===_.alternate&&t(r,g),a=o(_,a,m),null===h?u=_:h.sibling=_,h=_,g=v}if(y.done)return n(r,g),rs&&Jr(r,m),u;if(null===g){for(;!y.done;m++,y=l.next())null!==(y=d(r,y.value,c))&&(a=o(y,a,m),null===h?u=y:h.sibling=y,h=y);return rs&&Jr(r,m),u}for(g=i(r,g);!y.done;m++,y=l.next())null!==(y=f(g,r,m,y.value,c))&&(e&&null!==y.alternate&&g.delete(null===y.key?m:y.key),a=o(y,a,m),null===h?u=y:h.sibling=y,h=y);return e&&g.forEach(function(e){return t(r,e)}),rs&&Jr(r,m),u}return function e(i,s,o,l){if("object"===typeof o&&null!==o&&o.type===k&&null===o.key&&(o=o.props.children),"object"===typeof o&&null!==o){switch(o.$$typeof){case b:e:{for(var c=o.key,u=s;null!==u;){if(u.key===c){if((c=o.type)===k){if(7===u.tag){n(i,u.sibling),(s=r(u,o.props.children)).return=i,i=s;break e}}else if(u.elementType===c||"object"===typeof c&&null!==c&&c.$$typeof===M&&Ys(c)===u.type){n(i,u.sibling),(s=r(u,o.props)).ref=Gs(i,u,o),s.return=i,i=s;break e}n(i,u);break}t(i,u),u=u.sibling}o.type===k?((s=Lc(o.props.children,i.mode,l,o.key)).return=i,i=s):((l=Oc(o.type,o.key,o.props,null,i.mode,l)).ref=Gs(i,s,o),l.return=i,i=l)}return a(i);case x:e:{for(u=o.key;null!==s;){if(s.key===u){if(4===s.tag&&s.stateNode.containerInfo===o.containerInfo&&s.stateNode.implementation===o.implementation){n(i,s.sibling),(s=r(s,o.children||[])).return=i,i=s;break e}n(i,s);break}t(i,s),s=s.sibling}(s=Bc(o,i.mode,l)).return=i,i=s}return a(i);case M:return e(i,s,(u=o._init)(o._payload),l)}if(te(o))return g(i,s,o,l);if(O(o))return m(i,s,o,l);Ks(i,o)}return"string"===typeof o&&""!==o||"number"===typeof o?(o=""+o,null!==s&&6===s.tag?(n(i,s.sibling),(s=r(s,o)).return=i,i=s):(n(i,s),(s=jc(o,i.mode,l)).return=i,i=s),a(i)):n(i,s)}}var Qs=Xs(!0),$s=Xs(!1),Js={},Zs=Er(Js),eo=Er(Js),to=Er(Js);function no(e){if(e===Js)throw Error(s(174));return e}function io(e,t){switch(Sr(to,t),Sr(eo,e),Sr(Zs,Js),e=t.nodeType){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:le(null,"");break;default:t=le(t=(e=8===e?t.parentNode:t).namespaceURI||null,e=e.tagName)}Cr(Zs),Sr(Zs,t)}function ro(){Cr(Zs),Cr(eo),Cr(to)}function so(e){no(to.current);var t=no(Zs.current),n=le(t,e.type);t!==n&&(Sr(eo,e),Sr(Zs,n))}function oo(e){eo.current===e&&(Cr(Zs),Cr(eo))}var ao=Er(0);function lo(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||"$?"===n.data||"$!"===n.data))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!==(128&t.flags))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var co=[];function uo(){for(var e=0;e<co.length;e++)co[e]._workInProgressVersionPrimary=null;co.length=0}var ho=w.ReactCurrentDispatcher,po=w.ReactCurrentBatchConfig,fo=0,go=null,mo=null,vo=null,yo=!1,_o=!1,wo=0,bo=0;function xo(){throw Error(s(321))}function ko(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!ai(e[n],t[n]))return!1;return!0}function Eo(e,t,n,i,r,o){if(fo=o,go=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,ho.current=null===e||null===e.memoizedState?aa:la,e=n(i,r),_o){o=0;do{if(_o=!1,wo=0,25<=o)throw Error(s(301));o+=1,vo=mo=null,t.updateQueue=null,ho.current=ca,e=n(i,r)}while(_o)}if(ho.current=oa,t=null!==mo&&null!==mo.next,fo=0,vo=mo=go=null,yo=!1,t)throw Error(s(300));return e}function Co(){var e=0!==wo;return wo=0,e}function So(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===vo?go.memoizedState=vo=e:vo=vo.next=e,vo}function Ao(){if(null===mo){var e=go.alternate;e=null!==e?e.memoizedState:null}else e=mo.next;var t=null===vo?go.memoizedState:vo.next;if(null!==t)vo=t,mo=e;else{if(null===e)throw Error(s(310));e={memoizedState:(mo=e).memoizedState,baseState:mo.baseState,baseQueue:mo.baseQueue,queue:mo.queue,next:null},null===vo?go.memoizedState=vo=e:vo=vo.next=e}return vo}function To(e,t){return"function"===typeof t?t(e):t}function Po(e){var t=Ao(),n=t.queue;if(null===n)throw Error(s(311));n.lastRenderedReducer=e;var i=mo,r=i.baseQueue,o=n.pending;if(null!==o){if(null!==r){var a=r.next;r.next=o.next,o.next=a}i.baseQueue=r=o,n.pending=null}if(null!==r){o=r.next,i=i.baseState;var l=a=null,c=null,u=o;do{var h=u.lane;if((fo&h)===h)null!==c&&(c=c.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),i=u.hasEagerState?u.eagerState:e(i,u.action);else{var d={lane:h,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};null===c?(l=c=d,a=i):c=c.next=d,go.lanes|=h,Fl|=h}u=u.next}while(null!==u&&u!==o);null===c?a=i:c.next=l,ai(i,t.memoizedState)||(wa=!0),t.memoizedState=i,t.baseState=a,t.baseQueue=c,n.lastRenderedState=i}if(null!==(e=n.interleaved)){r=e;do{o=r.lane,go.lanes|=o,Fl|=o,r=r.next}while(r!==e)}else null===r&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function Io(e){var t=Ao(),n=t.queue;if(null===n)throw Error(s(311));n.lastRenderedReducer=e;var i=n.dispatch,r=n.pending,o=t.memoizedState;if(null!==r){n.pending=null;var a=r=r.next;do{o=e(o,a.action),a=a.next}while(a!==r);ai(o,t.memoizedState)||(wa=!0),t.memoizedState=o,null===t.baseQueue&&(t.baseState=o),n.lastRenderedState=o}return[o,i]}function Ro(){}function Mo(e,t){var n=go,i=Ao(),r=t(),o=!ai(i.memoizedState,r);if(o&&(i.memoizedState=r,wa=!0),i=i.queue,Vo(Oo.bind(null,n,i,e),[e]),i.getSnapshot!==t||o||null!==vo&&1&vo.memoizedState.tag){if(n.flags|=2048,Bo(9,Do.bind(null,n,i,r,t),void 0,null),null===Il)throw Error(s(349));0!==(30&fo)||No(n,t,r)}return r}function No(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},null===(t=go.updateQueue)?(t={lastEffect:null,stores:null},go.updateQueue=t,t.stores=[e]):null===(n=t.stores)?t.stores=[e]:n.push(e)}function Do(e,t,n,i){t.value=n,t.getSnapshot=i,Lo(t)&&Fo(e)}function Oo(e,t,n){return n(function(){Lo(t)&&Fo(e)})}function Lo(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!ai(e,n)}catch(i){return!0}}function Fo(e){var t=Ps(e,1);null!==t&&ic(t,e,1,-1)}function jo(e){var t=So();return"function"===typeof e&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:To,lastRenderedState:e},t.queue=e,e=e.dispatch=na.bind(null,go,e),[t.memoizedState,e]}function Bo(e,t,n,i){return e={tag:e,create:t,destroy:n,deps:i,next:null},null===(t=go.updateQueue)?(t={lastEffect:null,stores:null},go.updateQueue=t,t.lastEffect=e.next=e):null===(n=t.lastEffect)?t.lastEffect=e.next=e:(i=n.next,n.next=e,e.next=i,t.lastEffect=e),e}function Wo(){return Ao().memoizedState}function Uo(e,t,n,i){var r=So();go.flags|=e,r.memoizedState=Bo(1|t,n,void 0,void 0===i?null:i)}function zo(e,t,n,i){var r=Ao();i=void 0===i?null:i;var s=void 0;if(null!==mo){var o=mo.memoizedState;if(s=o.destroy,null!==i&&ko(i,o.deps))return void(r.memoizedState=Bo(t,n,s,i))}go.flags|=e,r.memoizedState=Bo(1|t,n,s,i)}function Ho(e,t){return Uo(8390656,8,e,t)}function Vo(e,t){return zo(2048,8,e,t)}function qo(e,t){return zo(4,2,e,t)}function Go(e,t){return zo(4,4,e,t)}function Ko(e,t){return"function"===typeof t?(e=e(),t(e),function(){t(null)}):null!==t&&void 0!==t?(e=e(),t.current=e,function(){t.current=null}):void 0}function Yo(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,zo(4,4,Ko.bind(null,t,e),n)}function Xo(){}function Qo(e,t){var n=Ao();t=void 0===t?null:t;var i=n.memoizedState;return null!==i&&null!==t&&ko(t,i[1])?i[0]:(n.memoizedState=[e,t],e)}function $o(e,t){var n=Ao();t=void 0===t?null:t;var i=n.memoizedState;return null!==i&&null!==t&&ko(t,i[1])?i[0]:(e=e(),n.memoizedState=[e,t],e)}function Jo(e,t,n){return 0===(21&fo)?(e.baseState&&(e.baseState=!1,wa=!0),e.memoizedState=n):(ai(n,t)||(n=gt(),go.lanes|=n,Fl|=n,e.baseState=!0),t)}function Zo(e,t){var n=_t;_t=0!==n&&4>n?n:4,e(!0);var i=po.transition;po.transition={};try{e(!1),t()}finally{_t=n,po.transition=i}}function ea(){return Ao().memoizedState}function ta(e,t,n){var i=nc(e);if(n={lane:i,action:n,hasEagerState:!1,eagerState:null,next:null},ia(e))ra(t,n);else if(null!==(n=Ts(e,t,n,i))){ic(n,e,i,tc()),sa(n,t,i)}}function na(e,t,n){var i=nc(e),r={lane:i,action:n,hasEagerState:!1,eagerState:null,next:null};if(ia(e))ra(t,r);else{var s=e.alternate;if(0===e.lanes&&(null===s||0===s.lanes)&&null!==(s=t.lastRenderedReducer))try{var o=t.lastRenderedState,a=s(o,n);if(r.hasEagerState=!0,r.eagerState=a,ai(a,o)){var l=t.interleaved;return null===l?(r.next=r,As(t)):(r.next=l.next,l.next=r),void(t.interleaved=r)}}catch(c){}null!==(n=Ts(e,t,r,i))&&(ic(n,e,i,r=tc()),sa(n,t,i))}}function ia(e){var t=e.alternate;return e===go||null!==t&&t===go}function ra(e,t){_o=yo=!0;var n=e.pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function sa(e,t,n){if(0!==(4194240&n)){var i=t.lanes;n|=i&=e.pendingLanes,t.lanes=n,yt(e,n)}}var oa={readContext:Cs,useCallback:xo,useContext:xo,useEffect:xo,useImperativeHandle:xo,useInsertionEffect:xo,useLayoutEffect:xo,useMemo:xo,useReducer:xo,useRef:xo,useState:xo,useDebugValue:xo,useDeferredValue:xo,useTransition:xo,useMutableSource:xo,useSyncExternalStore:xo,useId:xo,unstable_isNewReconciler:!1},aa={readContext:Cs,useCallback:function(e,t){return So().memoizedState=[e,void 0===t?null:t],e},useContext:Cs,useEffect:Ho,useImperativeHandle:function(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,Uo(4194308,4,Ko.bind(null,t,e),n)},useLayoutEffect:function(e,t){return Uo(4194308,4,e,t)},useInsertionEffect:function(e,t){return Uo(4,2,e,t)},useMemo:function(e,t){var n=So();return t=void 0===t?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var i=So();return t=void 0!==n?n(t):t,i.memoizedState=i.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},i.queue=e,e=e.dispatch=ta.bind(null,go,e),[i.memoizedState,e]},useRef:function(e){return e={current:e},So().memoizedState=e},useState:jo,useDebugValue:Xo,useDeferredValue:function(e){return So().memoizedState=e},useTransition:function(){var e=jo(!1),t=e[0];return e=Zo.bind(null,e[1]),So().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var i=go,r=So();if(rs){if(void 0===n)throw Error(s(407));n=n()}else{if(n=t(),null===Il)throw Error(s(349));0!==(30&fo)||No(i,t,n)}r.memoizedState=n;var o={value:n,getSnapshot:t};return r.queue=o,Ho(Oo.bind(null,i,o,e),[e]),i.flags|=2048,Bo(9,Do.bind(null,i,o,n,t),void 0,null),n},useId:function(){var e=So(),t=Il.identifierPrefix;if(rs){var n=$r;t=":"+t+"R"+(n=(Qr&~(1<<32-ot(Qr)-1)).toString(32)+n),0<(n=wo++)&&(t+="H"+n.toString(32)),t+=":"}else t=":"+t+"r"+(n=bo++).toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},la={readContext:Cs,useCallback:Qo,useContext:Cs,useEffect:Vo,useImperativeHandle:Yo,useInsertionEffect:qo,useLayoutEffect:Go,useMemo:$o,useReducer:Po,useRef:Wo,useState:function(){return Po(To)},useDebugValue:Xo,useDeferredValue:function(e){return Jo(Ao(),mo.memoizedState,e)},useTransition:function(){return[Po(To)[0],Ao().memoizedState]},useMutableSource:Ro,useSyncExternalStore:Mo,useId:ea,unstable_isNewReconciler:!1},ca={readContext:Cs,useCallback:Qo,useContext:Cs,useEffect:Vo,useImperativeHandle:Yo,useInsertionEffect:qo,useLayoutEffect:Go,useMemo:$o,useReducer:Io,useRef:Wo,useState:function(){return Io(To)},useDebugValue:Xo,useDeferredValue:function(e){var t=Ao();return null===mo?t.memoizedState=e:Jo(t,mo.memoizedState,e)},useTransition:function(){return[Io(To)[0],Ao().memoizedState]},useMutableSource:Ro,useSyncExternalStore:Mo,useId:ea,unstable_isNewReconciler:!1};function ua(e,t){try{var n="",i=t;do{n+=U(i),i=i.return}while(i);var r=n}catch(s){r="\nError generating stack: "+s.message+"\n"+s.stack}return{value:e,source:t,stack:r,digest:null}}function ha(e,t,n){return{value:e,source:null,stack:null!=n?n:null,digest:null!=t?t:null}}function da(e,t){try{console.error(t.value)}catch(n){setTimeout(function(){throw n})}}var pa="function"===typeof WeakMap?WeakMap:Map;function fa(e,t,n){(n=Ns(-1,n)).tag=3,n.payload={element:null};var i=t.value;return n.callback=function(){ql||(ql=!0,Gl=i),da(0,t)},n}function ga(e,t,n){(n=Ns(-1,n)).tag=3;var i=e.type.getDerivedStateFromError;if("function"===typeof i){var r=t.value;n.payload=function(){return i(r)},n.callback=function(){da(0,t)}}var s=e.stateNode;return null!==s&&"function"===typeof s.componentDidCatch&&(n.callback=function(){da(0,t),"function"!==typeof i&&(null===Kl?Kl=new Set([this]):Kl.add(this));var e=t.stack;this.componentDidCatch(t.value,{componentStack:null!==e?e:""})}),n}function ma(e,t,n){var i=e.pingCache;if(null===i){i=e.pingCache=new pa;var r=new Set;i.set(t,r)}else void 0===(r=i.get(t))&&(r=new Set,i.set(t,r));r.has(n)||(r.add(n),e=Sc.bind(null,e,t,n),t.then(e,e))}function va(e){do{var t;if((t=13===e.tag)&&(t=null===(t=e.memoizedState)||null!==t.dehydrated),t)return e;e=e.return}while(null!==e);return null}function ya(e,t,n,i,r){return 0===(1&e.mode)?(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,1===n.tag&&(null===n.alternate?n.tag=17:((t=Ns(-1,1)).tag=2,Ds(n,t,1))),n.lanes|=1),e):(e.flags|=65536,e.lanes=r,e)}var _a=w.ReactCurrentOwner,wa=!1;function ba(e,t,n,i){t.child=null===e?$s(t,null,n,i):Qs(t,e.child,n,i)}function xa(e,t,n,i,r){n=n.render;var s=t.ref;return Es(t,r),i=Eo(e,t,n,i,s,r),n=Co(),null===e||wa?(rs&&n&&es(t),t.flags|=1,ba(e,t,i,r),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~r,qa(e,t,r))}function ka(e,t,n,i,r){if(null===e){var s=n.type;return"function"!==typeof s||Nc(s)||void 0!==s.defaultProps||null!==n.compare||void 0!==n.defaultProps?((e=Oc(n.type,null,i,t,t.mode,r)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=s,Ea(e,t,s,i,r))}if(s=e.child,0===(e.lanes&r)){var o=s.memoizedProps;if((n=null!==(n=n.compare)?n:li)(o,i)&&e.ref===t.ref)return qa(e,t,r)}return t.flags|=1,(e=Dc(s,i)).ref=t.ref,e.return=t,t.child=e}function Ea(e,t,n,i,r){if(null!==e){var s=e.memoizedProps;if(li(s,i)&&e.ref===t.ref){if(wa=!1,t.pendingProps=i=s,0===(e.lanes&r))return t.lanes=e.lanes,qa(e,t,r);0!==(131072&e.flags)&&(wa=!0)}}return Aa(e,t,n,i,r)}function Ca(e,t,n){var i=t.pendingProps,r=i.children,s=null!==e?e.memoizedState:null;if("hidden"===i.mode)if(0===(1&t.mode))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Sr(Dl,Nl),Nl|=n;else{if(0===(1073741824&n))return e=null!==s?s.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Sr(Dl,Nl),Nl|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},i=null!==s?s.baseLanes:n,Sr(Dl,Nl),Nl|=i}else null!==s?(i=s.baseLanes|n,t.memoizedState=null):i=n,Sr(Dl,Nl),Nl|=i;return ba(e,t,r,n),t.child}function Sa(e,t){var n=t.ref;(null===e&&null!==n||null!==e&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function Aa(e,t,n,i,r){var s=Mr(n)?Ir:Tr.current;return s=Rr(t,s),Es(t,r),n=Eo(e,t,n,i,s,r),i=Co(),null===e||wa?(rs&&i&&es(t),t.flags|=1,ba(e,t,n,r),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~r,qa(e,t,r))}function Ta(e,t,n,i,r){if(Mr(n)){var s=!0;Lr(t)}else s=!1;if(Es(t,r),null===t.stateNode)Va(e,t),Hs(t,n,i),qs(t,n,i,r),i=!0;else if(null===e){var o=t.stateNode,a=t.memoizedProps;o.props=a;var l=o.context,c=n.contextType;"object"===typeof c&&null!==c?c=Cs(c):c=Rr(t,c=Mr(n)?Ir:Tr.current);var u=n.getDerivedStateFromProps,h="function"===typeof u||"function"===typeof o.getSnapshotBeforeUpdate;h||"function"!==typeof o.UNSAFE_componentWillReceiveProps&&"function"!==typeof o.componentWillReceiveProps||(a!==i||l!==c)&&Vs(t,o,i,c),Is=!1;var d=t.memoizedState;o.state=d,Fs(t,i,o,r),l=t.memoizedState,a!==i||d!==l||Pr.current||Is?("function"===typeof u&&(Ws(t,n,u,i),l=t.memoizedState),(a=Is||zs(t,n,a,i,d,l,c))?(h||"function"!==typeof o.UNSAFE_componentWillMount&&"function"!==typeof o.componentWillMount||("function"===typeof o.componentWillMount&&o.componentWillMount(),"function"===typeof o.UNSAFE_componentWillMount&&o.UNSAFE_componentWillMount()),"function"===typeof o.componentDidMount&&(t.flags|=4194308)):("function"===typeof o.componentDidMount&&(t.flags|=4194308),t.memoizedProps=i,t.memoizedState=l),o.props=i,o.state=l,o.context=c,i=a):("function"===typeof o.componentDidMount&&(t.flags|=4194308),i=!1)}else{o=t.stateNode,Ms(e,t),a=t.memoizedProps,c=t.type===t.elementType?a:ms(t.type,a),o.props=c,h=t.pendingProps,d=o.context,"object"===typeof(l=n.contextType)&&null!==l?l=Cs(l):l=Rr(t,l=Mr(n)?Ir:Tr.current);var p=n.getDerivedStateFromProps;(u="function"===typeof p||"function"===typeof o.getSnapshotBeforeUpdate)||"function"!==typeof o.UNSAFE_componentWillReceiveProps&&"function"!==typeof o.componentWillReceiveProps||(a!==h||d!==l)&&Vs(t,o,i,l),Is=!1,d=t.memoizedState,o.state=d,Fs(t,i,o,r);var f=t.memoizedState;a!==h||d!==f||Pr.current||Is?("function"===typeof p&&(Ws(t,n,p,i),f=t.memoizedState),(c=Is||zs(t,n,c,i,d,f,l)||!1)?(u||"function"!==typeof o.UNSAFE_componentWillUpdate&&"function"!==typeof o.componentWillUpdate||("function"===typeof o.componentWillUpdate&&o.componentWillUpdate(i,f,l),"function"===typeof o.UNSAFE_componentWillUpdate&&o.UNSAFE_componentWillUpdate(i,f,l)),"function"===typeof o.componentDidUpdate&&(t.flags|=4),"function"===typeof o.getSnapshotBeforeUpdate&&(t.flags|=1024)):("function"!==typeof o.componentDidUpdate||a===e.memoizedProps&&d===e.memoizedState||(t.flags|=4),"function"!==typeof o.getSnapshotBeforeUpdate||a===e.memoizedProps&&d===e.memoizedState||(t.flags|=1024),t.memoizedProps=i,t.memoizedState=f),o.props=i,o.state=f,o.context=l,i=c):("function"!==typeof o.componentDidUpdate||a===e.memoizedProps&&d===e.memoizedState||(t.flags|=4),"function"!==typeof o.getSnapshotBeforeUpdate||a===e.memoizedProps&&d===e.memoizedState||(t.flags|=1024),i=!1)}return Pa(e,t,n,i,s,r)}function Pa(e,t,n,i,r,s){Sa(e,t);var o=0!==(128&t.flags);if(!i&&!o)return r&&Fr(t,n,!1),qa(e,t,s);i=t.stateNode,_a.current=t;var a=o&&"function"!==typeof n.getDerivedStateFromError?null:i.render();return t.flags|=1,null!==e&&o?(t.child=Qs(t,e.child,null,s),t.child=Qs(t,null,a,s)):ba(e,t,a,s),t.memoizedState=i.state,r&&Fr(t,n,!0),t.child}function Ia(e){var t=e.stateNode;t.pendingContext?Dr(0,t.pendingContext,t.pendingContext!==t.context):t.context&&Dr(0,t.context,!1),io(e,t.containerInfo)}function Ra(e,t,n,i,r){return ps(),fs(r),t.flags|=256,ba(e,t,n,i),t.child}var Ma,Na,Da,Oa,La={dehydrated:null,treeContext:null,retryLane:0};function Fa(e){return{baseLanes:e,cachePool:null,transitions:null}}function ja(e,t,n){var i,r=t.pendingProps,o=ao.current,a=!1,l=0!==(128&t.flags);if((i=l)||(i=(null===e||null!==e.memoizedState)&&0!==(2&o)),i?(a=!0,t.flags&=-129):null!==e&&null===e.memoizedState||(o|=1),Sr(ao,1&o),null===e)return cs(t),null!==(e=t.memoizedState)&&null!==(e=e.dehydrated)?(0===(1&t.mode)?t.lanes=1:"$!"===e.data?t.lanes=8:t.lanes=1073741824,null):(l=r.children,e=r.fallback,a?(r=t.mode,a=t.child,l={mode:"hidden",children:l},0===(1&r)&&null!==a?(a.childLanes=0,a.pendingProps=l):a=Fc(l,r,0,null),e=Lc(e,r,n,null),a.return=t,e.return=t,a.sibling=e,t.child=a,t.child.memoizedState=Fa(n),t.memoizedState=La,e):Ba(t,l));if(null!==(o=e.memoizedState)&&null!==(i=o.dehydrated))return function(e,t,n,i,r,o,a){if(n)return 256&t.flags?(t.flags&=-257,Wa(e,t,a,i=ha(Error(s(422))))):null!==t.memoizedState?(t.child=e.child,t.flags|=128,null):(o=i.fallback,r=t.mode,i=Fc({mode:"visible",children:i.children},r,0,null),(o=Lc(o,r,a,null)).flags|=2,i.return=t,o.return=t,i.sibling=o,t.child=i,0!==(1&t.mode)&&Qs(t,e.child,null,a),t.child.memoizedState=Fa(a),t.memoizedState=La,o);if(0===(1&t.mode))return Wa(e,t,a,null);if("$!"===r.data){if(i=r.nextSibling&&r.nextSibling.dataset)var l=i.dgst;return i=l,Wa(e,t,a,i=ha(o=Error(s(419)),i,void 0))}if(l=0!==(a&e.childLanes),wa||l){if(null!==(i=Il)){switch(a&-a){case 4:r=2;break;case 16:r=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:r=32;break;case 536870912:r=268435456;break;default:r=0}0!==(r=0!==(r&(i.suspendedLanes|a))?0:r)&&r!==o.retryLane&&(o.retryLane=r,Ps(e,r),ic(i,e,r,-1))}return mc(),Wa(e,t,a,i=ha(Error(s(421))))}return"$?"===r.data?(t.flags|=128,t.child=e.child,t=Tc.bind(null,e),r._reactRetry=t,null):(e=o.treeContext,is=cr(r.nextSibling),ns=t,rs=!0,ss=null,null!==e&&(Kr[Yr++]=Qr,Kr[Yr++]=$r,Kr[Yr++]=Xr,Qr=e.id,$r=e.overflow,Xr=t),t=Ba(t,i.children),t.flags|=4096,t)}(e,t,l,r,i,o,n);if(a){a=r.fallback,l=t.mode,i=(o=e.child).sibling;var c={mode:"hidden",children:r.children};return 0===(1&l)&&t.child!==o?((r=t.child).childLanes=0,r.pendingProps=c,t.deletions=null):(r=Dc(o,c)).subtreeFlags=14680064&o.subtreeFlags,null!==i?a=Dc(i,a):(a=Lc(a,l,n,null)).flags|=2,a.return=t,r.return=t,r.sibling=a,t.child=r,r=a,a=t.child,l=null===(l=e.child.memoizedState)?Fa(n):{baseLanes:l.baseLanes|n,cachePool:null,transitions:l.transitions},a.memoizedState=l,a.childLanes=e.childLanes&~n,t.memoizedState=La,r}return e=(a=e.child).sibling,r=Dc(a,{mode:"visible",children:r.children}),0===(1&t.mode)&&(r.lanes=n),r.return=t,r.sibling=null,null!==e&&(null===(n=t.deletions)?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=r,t.memoizedState=null,r}function Ba(e,t){return(t=Fc({mode:"visible",children:t},e.mode,0,null)).return=e,e.child=t}function Wa(e,t,n,i){return null!==i&&fs(i),Qs(t,e.child,null,n),(e=Ba(t,t.pendingProps.children)).flags|=2,t.memoizedState=null,e}function Ua(e,t,n){e.lanes|=t;var i=e.alternate;null!==i&&(i.lanes|=t),ks(e.return,t,n)}function za(e,t,n,i,r){var s=e.memoizedState;null===s?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:i,tail:n,tailMode:r}:(s.isBackwards=t,s.rendering=null,s.renderingStartTime=0,s.last=i,s.tail=n,s.tailMode=r)}function Ha(e,t,n){var i=t.pendingProps,r=i.revealOrder,s=i.tail;if(ba(e,t,i.children,n),0!==(2&(i=ao.current)))i=1&i|2,t.flags|=128;else{if(null!==e&&0!==(128&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&Ua(e,n,t);else if(19===e.tag)Ua(e,n,t);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}i&=1}if(Sr(ao,i),0===(1&t.mode))t.memoizedState=null;else switch(r){case"forwards":for(n=t.child,r=null;null!==n;)null!==(e=n.alternate)&&null===lo(e)&&(r=n),n=n.sibling;null===(n=r)?(r=t.child,t.child=null):(r=n.sibling,n.sibling=null),za(t,!1,r,n,s);break;case"backwards":for(n=null,r=t.child,t.child=null;null!==r;){if(null!==(e=r.alternate)&&null===lo(e)){t.child=r;break}e=r.sibling,r.sibling=n,n=r,r=e}za(t,!0,n,null,s);break;case"together":za(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Va(e,t){0===(1&t.mode)&&null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2)}function qa(e,t,n){if(null!==e&&(t.dependencies=e.dependencies),Fl|=t.lanes,0===(n&t.childLanes))return null;if(null!==e&&t.child!==e.child)throw Error(s(153));if(null!==t.child){for(n=Dc(e=t.child,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=Dc(e,e.pendingProps)).return=t;n.sibling=null}return t.child}function Ga(e,t){if(!rs)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var i=null;null!==n;)null!==n.alternate&&(i=n),n=n.sibling;null===i?t||null===e.tail?e.tail=null:e.tail.sibling=null:i.sibling=null}}function Ka(e){var t=null!==e.alternate&&e.alternate.child===e.child,n=0,i=0;if(t)for(var r=e.child;null!==r;)n|=r.lanes|r.childLanes,i|=14680064&r.subtreeFlags,i|=14680064&r.flags,r.return=e,r=r.sibling;else for(r=e.child;null!==r;)n|=r.lanes|r.childLanes,i|=r.subtreeFlags,i|=r.flags,r.return=e,r=r.sibling;return e.subtreeFlags|=i,e.childLanes=n,t}function Ya(e,t,n){var i=t.pendingProps;switch(ts(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ka(t),null;case 1:case 17:return Mr(t.type)&&Nr(),Ka(t),null;case 3:return i=t.stateNode,ro(),Cr(Pr),Cr(Tr),uo(),i.pendingContext&&(i.context=i.pendingContext,i.pendingContext=null),null!==e&&null!==e.child||(hs(t)?t.flags|=4:null===e||e.memoizedState.isDehydrated&&0===(256&t.flags)||(t.flags|=1024,null!==ss&&(ac(ss),ss=null))),Na(e,t),Ka(t),null;case 5:oo(t);var r=no(to.current);if(n=t.type,null!==e&&null!=t.stateNode)Da(e,t,n,i,r),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!i){if(null===t.stateNode)throw Error(s(166));return Ka(t),null}if(e=no(Zs.current),hs(t)){i=t.stateNode,n=t.type;var o=t.memoizedProps;switch(i[dr]=t,i[pr]=o,e=0!==(1&t.mode),n){case"dialog":Bi("cancel",i),Bi("close",i);break;case"iframe":case"object":case"embed":Bi("load",i);break;case"video":case"audio":for(r=0;r<Oi.length;r++)Bi(Oi[r],i);break;case"source":Bi("error",i);break;case"img":case"image":case"link":Bi("error",i),Bi("load",i);break;case"details":Bi("toggle",i);break;case"input":Q(i,o),Bi("invalid",i);break;case"select":i._wrapperState={wasMultiple:!!o.multiple},Bi("invalid",i);break;case"textarea":re(i,o),Bi("invalid",i)}for(var l in ye(n,o),r=null,o)if(o.hasOwnProperty(l)){var c=o[l];"children"===l?"string"===typeof c?i.textContent!==c&&(!0!==o.suppressHydrationWarning&&Ji(i.textContent,c,e),r=["children",c]):"number"===typeof c&&i.textContent!==""+c&&(!0!==o.suppressHydrationWarning&&Ji(i.textContent,c,e),r=["children",""+c]):a.hasOwnProperty(l)&&null!=c&&"onScroll"===l&&Bi("scroll",i)}switch(n){case"input":G(i),Z(i,o,!0);break;case"textarea":G(i),oe(i);break;case"select":case"option":break;default:"function"===typeof o.onClick&&(i.onclick=Zi)}i=r,t.updateQueue=i,null!==i&&(t.flags|=4)}else{l=9===r.nodeType?r:r.ownerDocument,"http://www.w3.org/1999/xhtml"===e&&(e=ae(n)),"http://www.w3.org/1999/xhtml"===e?"script"===n?((e=l.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):"string"===typeof i.is?e=l.createElement(n,{is:i.is}):(e=l.createElement(n),"select"===n&&(l=e,i.multiple?l.multiple=!0:i.size&&(l.size=i.size))):e=l.createElementNS(e,n),e[dr]=t,e[pr]=i,Ma(e,t,!1,!1),t.stateNode=e;e:{switch(l=_e(n,i),n){case"dialog":Bi("cancel",e),Bi("close",e),r=i;break;case"iframe":case"object":case"embed":Bi("load",e),r=i;break;case"video":case"audio":for(r=0;r<Oi.length;r++)Bi(Oi[r],e);r=i;break;case"source":Bi("error",e),r=i;break;case"img":case"image":case"link":Bi("error",e),Bi("load",e),r=i;break;case"details":Bi("toggle",e),r=i;break;case"input":Q(e,i),r=X(e,i),Bi("invalid",e);break;case"option":default:r=i;break;case"select":e._wrapperState={wasMultiple:!!i.multiple},r=F({},i,{value:void 0}),Bi("invalid",e);break;case"textarea":re(e,i),r=ie(e,i),Bi("invalid",e)}for(o in ye(n,r),c=r)if(c.hasOwnProperty(o)){var u=c[o];"style"===o?me(e,u):"dangerouslySetInnerHTML"===o?null!=(u=u?u.__html:void 0)&&he(e,u):"children"===o?"string"===typeof u?("textarea"!==n||""!==u)&&de(e,u):"number"===typeof u&&de(e,""+u):"suppressContentEditableWarning"!==o&&"suppressHydrationWarning"!==o&&"autoFocus"!==o&&(a.hasOwnProperty(o)?null!=u&&"onScroll"===o&&Bi("scroll",e):null!=u&&_(e,o,u,l))}switch(n){case"input":G(e),Z(e,i,!1);break;case"textarea":G(e),oe(e);break;case"option":null!=i.value&&e.setAttribute("value",""+V(i.value));break;case"select":e.multiple=!!i.multiple,null!=(o=i.value)?ne(e,!!i.multiple,o,!1):null!=i.defaultValue&&ne(e,!!i.multiple,i.defaultValue,!0);break;default:"function"===typeof r.onClick&&(e.onclick=Zi)}switch(n){case"button":case"input":case"select":case"textarea":i=!!i.autoFocus;break e;case"img":i=!0;break e;default:i=!1}}i&&(t.flags|=4)}null!==t.ref&&(t.flags|=512,t.flags|=2097152)}return Ka(t),null;case 6:if(e&&null!=t.stateNode)Oa(e,t,e.memoizedProps,i);else{if("string"!==typeof i&&null===t.stateNode)throw Error(s(166));if(n=no(to.current),no(Zs.current),hs(t)){if(i=t.stateNode,n=t.memoizedProps,i[dr]=t,(o=i.nodeValue!==n)&&null!==(e=ns))switch(e.tag){case 3:Ji(i.nodeValue,n,0!==(1&e.mode));break;case 5:!0!==e.memoizedProps.suppressHydrationWarning&&Ji(i.nodeValue,n,0!==(1&e.mode))}o&&(t.flags|=4)}else(i=(9===n.nodeType?n:n.ownerDocument).createTextNode(i))[dr]=t,t.stateNode=i}return Ka(t),null;case 13:if(Cr(ao),i=t.memoizedState,null===e||null!==e.memoizedState&&null!==e.memoizedState.dehydrated){if(rs&&null!==is&&0!==(1&t.mode)&&0===(128&t.flags))ds(),ps(),t.flags|=98560,o=!1;else if(o=hs(t),null!==i&&null!==i.dehydrated){if(null===e){if(!o)throw Error(s(318));if(!(o=null!==(o=t.memoizedState)?o.dehydrated:null))throw Error(s(317));o[dr]=t}else ps(),0===(128&t.flags)&&(t.memoizedState=null),t.flags|=4;Ka(t),o=!1}else null!==ss&&(ac(ss),ss=null),o=!0;if(!o)return 65536&t.flags?t:null}return 0!==(128&t.flags)?(t.lanes=n,t):((i=null!==i)!==(null!==e&&null!==e.memoizedState)&&i&&(t.child.flags|=8192,0!==(1&t.mode)&&(null===e||0!==(1&ao.current)?0===Ol&&(Ol=3):mc())),null!==t.updateQueue&&(t.flags|=4),Ka(t),null);case 4:return ro(),Na(e,t),null===e&&zi(t.stateNode.containerInfo),Ka(t),null;case 10:return xs(t.type._context),Ka(t),null;case 19:if(Cr(ao),null===(o=t.memoizedState))return Ka(t),null;if(i=0!==(128&t.flags),null===(l=o.rendering))if(i)Ga(o,!1);else{if(0!==Ol||null!==e&&0!==(128&e.flags))for(e=t.child;null!==e;){if(null!==(l=lo(e))){for(t.flags|=128,Ga(o,!1),null!==(i=l.updateQueue)&&(t.updateQueue=i,t.flags|=4),t.subtreeFlags=0,i=n,n=t.child;null!==n;)e=i,(o=n).flags&=14680066,null===(l=o.alternate)?(o.childLanes=0,o.lanes=e,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=l.childLanes,o.lanes=l.lanes,o.child=l.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=l.memoizedProps,o.memoizedState=l.memoizedState,o.updateQueue=l.updateQueue,o.type=l.type,e=l.dependencies,o.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return Sr(ao,1&ao.current|2),t.child}e=e.sibling}null!==o.tail&&$e()>Hl&&(t.flags|=128,i=!0,Ga(o,!1),t.lanes=4194304)}else{if(!i)if(null!==(e=lo(l))){if(t.flags|=128,i=!0,null!==(n=e.updateQueue)&&(t.updateQueue=n,t.flags|=4),Ga(o,!0),null===o.tail&&"hidden"===o.tailMode&&!l.alternate&&!rs)return Ka(t),null}else 2*$e()-o.renderingStartTime>Hl&&1073741824!==n&&(t.flags|=128,i=!0,Ga(o,!1),t.lanes=4194304);o.isBackwards?(l.sibling=t.child,t.child=l):(null!==(n=o.last)?n.sibling=l:t.child=l,o.last=l)}return null!==o.tail?(t=o.tail,o.rendering=t,o.tail=t.sibling,o.renderingStartTime=$e(),t.sibling=null,n=ao.current,Sr(ao,i?1&n|2:1&n),t):(Ka(t),null);case 22:case 23:return dc(),i=null!==t.memoizedState,null!==e&&null!==e.memoizedState!==i&&(t.flags|=8192),i&&0!==(1&t.mode)?0!==(1073741824&Nl)&&(Ka(t),6&t.subtreeFlags&&(t.flags|=8192)):Ka(t),null;case 24:case 25:return null}throw Error(s(156,t.tag))}function Xa(e,t){switch(ts(t),t.tag){case 1:return Mr(t.type)&&Nr(),65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 3:return ro(),Cr(Pr),Cr(Tr),uo(),0!==(65536&(e=t.flags))&&0===(128&e)?(t.flags=-65537&e|128,t):null;case 5:return oo(t),null;case 13:if(Cr(ao),null!==(e=t.memoizedState)&&null!==e.dehydrated){if(null===t.alternate)throw Error(s(340));ps()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 19:return Cr(ao),null;case 4:return ro(),null;case 10:return xs(t.type._context),null;case 22:case 23:return dc(),null;default:return null}}Ma=function(e,t){for(var n=t.child;null!==n;){if(5===n.tag||6===n.tag)e.appendChild(n.stateNode);else if(4!==n.tag&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===t)break;for(;null===n.sibling;){if(null===n.return||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},Na=function(){},Da=function(e,t,n,i){var r=e.memoizedProps;if(r!==i){e=t.stateNode,no(Zs.current);var s,o=null;switch(n){case"input":r=X(e,r),i=X(e,i),o=[];break;case"select":r=F({},r,{value:void 0}),i=F({},i,{value:void 0}),o=[];break;case"textarea":r=ie(e,r),i=ie(e,i),o=[];break;default:"function"!==typeof r.onClick&&"function"===typeof i.onClick&&(e.onclick=Zi)}for(u in ye(n,i),n=null,r)if(!i.hasOwnProperty(u)&&r.hasOwnProperty(u)&&null!=r[u])if("style"===u){var l=r[u];for(s in l)l.hasOwnProperty(s)&&(n||(n={}),n[s]="")}else"dangerouslySetInnerHTML"!==u&&"children"!==u&&"suppressContentEditableWarning"!==u&&"suppressHydrationWarning"!==u&&"autoFocus"!==u&&(a.hasOwnProperty(u)?o||(o=[]):(o=o||[]).push(u,null));for(u in i){var c=i[u];if(l=null!=r?r[u]:void 0,i.hasOwnProperty(u)&&c!==l&&(null!=c||null!=l))if("style"===u)if(l){for(s in l)!l.hasOwnProperty(s)||c&&c.hasOwnProperty(s)||(n||(n={}),n[s]="");for(s in c)c.hasOwnProperty(s)&&l[s]!==c[s]&&(n||(n={}),n[s]=c[s])}else n||(o||(o=[]),o.push(u,n)),n=c;else"dangerouslySetInnerHTML"===u?(c=c?c.__html:void 0,l=l?l.__html:void 0,null!=c&&l!==c&&(o=o||[]).push(u,c)):"children"===u?"string"!==typeof c&&"number"!==typeof c||(o=o||[]).push(u,""+c):"suppressContentEditableWarning"!==u&&"suppressHydrationWarning"!==u&&(a.hasOwnProperty(u)?(null!=c&&"onScroll"===u&&Bi("scroll",e),o||l===c||(o=[])):(o=o||[]).push(u,c))}n&&(o=o||[]).push("style",n);var u=o;(t.updateQueue=u)&&(t.flags|=4)}},Oa=function(e,t,n,i){n!==i&&(t.flags|=4)};var Qa=!1,$a=!1,Ja="function"===typeof WeakSet?WeakSet:Set,Za=null;function el(e,t){var n=e.ref;if(null!==n)if("function"===typeof n)try{n(null)}catch(i){Cc(e,t,i)}else n.current=null}function tl(e,t,n){try{n()}catch(i){Cc(e,t,i)}}var nl=!1;function il(e,t,n){var i=t.updateQueue;if(null!==(i=null!==i?i.lastEffect:null)){var r=i=i.next;do{if((r.tag&e)===e){var s=r.destroy;r.destroy=void 0,void 0!==s&&tl(t,n,s)}r=r.next}while(r!==i)}}function rl(e,t){if(null!==(t=null!==(t=t.updateQueue)?t.lastEffect:null)){var n=t=t.next;do{if((n.tag&e)===e){var i=n.create;n.destroy=i()}n=n.next}while(n!==t)}}function sl(e){var t=e.ref;if(null!==t){var n=e.stateNode;e.tag,e=n,"function"===typeof t?t(e):t.current=e}}function ol(e){var t=e.alternate;null!==t&&(e.alternate=null,ol(t)),e.child=null,e.deletions=null,e.sibling=null,5===e.tag&&(null!==(t=e.stateNode)&&(delete t[dr],delete t[pr],delete t[gr],delete t[mr],delete t[vr])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function al(e){return 5===e.tag||3===e.tag||4===e.tag}function ll(e){e:for(;;){for(;null===e.sibling;){if(null===e.return||al(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;5!==e.tag&&6!==e.tag&&18!==e.tag;){if(2&e.flags)continue e;if(null===e.child||4===e.tag)continue e;e.child.return=e,e=e.child}if(!(2&e.flags))return e.stateNode}}function cl(e,t,n){var i=e.tag;if(5===i||6===i)e=e.stateNode,t?8===n.nodeType?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(8===n.nodeType?(t=n.parentNode).insertBefore(e,n):(t=n).appendChild(e),null!==(n=n._reactRootContainer)&&void 0!==n||null!==t.onclick||(t.onclick=Zi));else if(4!==i&&null!==(e=e.child))for(cl(e,t,n),e=e.sibling;null!==e;)cl(e,t,n),e=e.sibling}function ul(e,t,n){var i=e.tag;if(5===i||6===i)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(4!==i&&null!==(e=e.child))for(ul(e,t,n),e=e.sibling;null!==e;)ul(e,t,n),e=e.sibling}var hl=null,dl=!1;function pl(e,t,n){for(n=n.child;null!==n;)fl(e,t,n),n=n.sibling}function fl(e,t,n){if(st&&"function"===typeof st.onCommitFiberUnmount)try{st.onCommitFiberUnmount(rt,n)}catch(a){}switch(n.tag){case 5:$a||el(n,t);case 6:var i=hl,r=dl;hl=null,pl(e,t,n),dl=r,null!==(hl=i)&&(dl?(e=hl,n=n.stateNode,8===e.nodeType?e.parentNode.removeChild(n):e.removeChild(n)):hl.removeChild(n.stateNode));break;case 18:null!==hl&&(dl?(e=hl,n=n.stateNode,8===e.nodeType?lr(e.parentNode,n):1===e.nodeType&&lr(e,n),zt(e)):lr(hl,n.stateNode));break;case 4:i=hl,r=dl,hl=n.stateNode.containerInfo,dl=!0,pl(e,t,n),hl=i,dl=r;break;case 0:case 11:case 14:case 15:if(!$a&&(null!==(i=n.updateQueue)&&null!==(i=i.lastEffect))){r=i=i.next;do{var s=r,o=s.destroy;s=s.tag,void 0!==o&&(0!==(2&s)||0!==(4&s))&&tl(n,t,o),r=r.next}while(r!==i)}pl(e,t,n);break;case 1:if(!$a&&(el(n,t),"function"===typeof(i=n.stateNode).componentWillUnmount))try{i.props=n.memoizedProps,i.state=n.memoizedState,i.componentWillUnmount()}catch(a){Cc(n,t,a)}pl(e,t,n);break;case 21:pl(e,t,n);break;case 22:1&n.mode?($a=(i=$a)||null!==n.memoizedState,pl(e,t,n),$a=i):pl(e,t,n);break;default:pl(e,t,n)}}function gl(e){var t=e.updateQueue;if(null!==t){e.updateQueue=null;var n=e.stateNode;null===n&&(n=e.stateNode=new Ja),t.forEach(function(t){var i=Pc.bind(null,e,t);n.has(t)||(n.add(t),t.then(i,i))})}}function ml(e,t){var n=t.deletions;if(null!==n)for(var i=0;i<n.length;i++){var r=n[i];try{var o=e,a=t,l=a;e:for(;null!==l;){switch(l.tag){case 5:hl=l.stateNode,dl=!1;break e;case 3:case 4:hl=l.stateNode.containerInfo,dl=!0;break e}l=l.return}if(null===hl)throw Error(s(160));fl(o,a,r),hl=null,dl=!1;var c=r.alternate;null!==c&&(c.return=null),r.return=null}catch(u){Cc(r,t,u)}}if(12854&t.subtreeFlags)for(t=t.child;null!==t;)vl(t,e),t=t.sibling}function vl(e,t){var n=e.alternate,i=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(ml(t,e),yl(e),4&i){try{il(3,e,e.return),rl(3,e)}catch(m){Cc(e,e.return,m)}try{il(5,e,e.return)}catch(m){Cc(e,e.return,m)}}break;case 1:ml(t,e),yl(e),512&i&&null!==n&&el(n,n.return);break;case 5:if(ml(t,e),yl(e),512&i&&null!==n&&el(n,n.return),32&e.flags){var r=e.stateNode;try{de(r,"")}catch(m){Cc(e,e.return,m)}}if(4&i&&null!=(r=e.stateNode)){var o=e.memoizedProps,a=null!==n?n.memoizedProps:o,l=e.type,c=e.updateQueue;if(e.updateQueue=null,null!==c)try{"input"===l&&"radio"===o.type&&null!=o.name&&$(r,o),_e(l,a);var u=_e(l,o);for(a=0;a<c.length;a+=2){var h=c[a],d=c[a+1];"style"===h?me(r,d):"dangerouslySetInnerHTML"===h?he(r,d):"children"===h?de(r,d):_(r,h,d,u)}switch(l){case"input":J(r,o);break;case"textarea":se(r,o);break;case"select":var p=r._wrapperState.wasMultiple;r._wrapperState.wasMultiple=!!o.multiple;var f=o.value;null!=f?ne(r,!!o.multiple,f,!1):p!==!!o.multiple&&(null!=o.defaultValue?ne(r,!!o.multiple,o.defaultValue,!0):ne(r,!!o.multiple,o.multiple?[]:"",!1))}r[pr]=o}catch(m){Cc(e,e.return,m)}}break;case 6:if(ml(t,e),yl(e),4&i){if(null===e.stateNode)throw Error(s(162));r=e.stateNode,o=e.memoizedProps;try{r.nodeValue=o}catch(m){Cc(e,e.return,m)}}break;case 3:if(ml(t,e),yl(e),4&i&&null!==n&&n.memoizedState.isDehydrated)try{zt(t.containerInfo)}catch(m){Cc(e,e.return,m)}break;case 4:default:ml(t,e),yl(e);break;case 13:ml(t,e),yl(e),8192&(r=e.child).flags&&(o=null!==r.memoizedState,r.stateNode.isHidden=o,!o||null!==r.alternate&&null!==r.alternate.memoizedState||(zl=$e())),4&i&&gl(e);break;case 22:if(h=null!==n&&null!==n.memoizedState,1&e.mode?($a=(u=$a)||h,ml(t,e),$a=u):ml(t,e),yl(e),8192&i){if(u=null!==e.memoizedState,(e.stateNode.isHidden=u)&&!h&&0!==(1&e.mode))for(Za=e,h=e.child;null!==h;){for(d=Za=h;null!==Za;){switch(f=(p=Za).child,p.tag){case 0:case 11:case 14:case 15:il(4,p,p.return);break;case 1:el(p,p.return);var g=p.stateNode;if("function"===typeof g.componentWillUnmount){i=p,n=p.return;try{t=i,g.props=t.memoizedProps,g.state=t.memoizedState,g.componentWillUnmount()}catch(m){Cc(i,n,m)}}break;case 5:el(p,p.return);break;case 22:if(null!==p.memoizedState){xl(d);continue}}null!==f?(f.return=p,Za=f):xl(d)}h=h.sibling}e:for(h=null,d=e;;){if(5===d.tag){if(null===h){h=d;try{r=d.stateNode,u?"function"===typeof(o=r.style).setProperty?o.setProperty("display","none","important"):o.display="none":(l=d.stateNode,a=void 0!==(c=d.memoizedProps.style)&&null!==c&&c.hasOwnProperty("display")?c.display:null,l.style.display=ge("display",a))}catch(m){Cc(e,e.return,m)}}}else if(6===d.tag){if(null===h)try{d.stateNode.nodeValue=u?"":d.memoizedProps}catch(m){Cc(e,e.return,m)}}else if((22!==d.tag&&23!==d.tag||null===d.memoizedState||d===e)&&null!==d.child){d.child.return=d,d=d.child;continue}if(d===e)break e;for(;null===d.sibling;){if(null===d.return||d.return===e)break e;h===d&&(h=null),d=d.return}h===d&&(h=null),d.sibling.return=d.return,d=d.sibling}}break;case 19:ml(t,e),yl(e),4&i&&gl(e);case 21:}}function yl(e){var t=e.flags;if(2&t){try{e:{for(var n=e.return;null!==n;){if(al(n)){var i=n;break e}n=n.return}throw Error(s(160))}switch(i.tag){case 5:var r=i.stateNode;32&i.flags&&(de(r,""),i.flags&=-33),ul(e,ll(e),r);break;case 3:case 4:var o=i.stateNode.containerInfo;cl(e,ll(e),o);break;default:throw Error(s(161))}}catch(a){Cc(e,e.return,a)}e.flags&=-3}4096&t&&(e.flags&=-4097)}function _l(e,t,n){Za=e,wl(e,t,n)}function wl(e,t,n){for(var i=0!==(1&e.mode);null!==Za;){var r=Za,s=r.child;if(22===r.tag&&i){var o=null!==r.memoizedState||Qa;if(!o){var a=r.alternate,l=null!==a&&null!==a.memoizedState||$a;a=Qa;var c=$a;if(Qa=o,($a=l)&&!c)for(Za=r;null!==Za;)l=(o=Za).child,22===o.tag&&null!==o.memoizedState?kl(r):null!==l?(l.return=o,Za=l):kl(r);for(;null!==s;)Za=s,wl(s,t,n),s=s.sibling;Za=r,Qa=a,$a=c}bl(e)}else 0!==(8772&r.subtreeFlags)&&null!==s?(s.return=r,Za=s):bl(e)}}function bl(e){for(;null!==Za;){var t=Za;if(0!==(8772&t.flags)){var n=t.alternate;try{if(0!==(8772&t.flags))switch(t.tag){case 0:case 11:case 15:$a||rl(5,t);break;case 1:var i=t.stateNode;if(4&t.flags&&!$a)if(null===n)i.componentDidMount();else{var r=t.elementType===t.type?n.memoizedProps:ms(t.type,n.memoizedProps);i.componentDidUpdate(r,n.memoizedState,i.__reactInternalSnapshotBeforeUpdate)}var o=t.updateQueue;null!==o&&js(t,o,i);break;case 3:var a=t.updateQueue;if(null!==a){if(n=null,null!==t.child)switch(t.child.tag){case 5:case 1:n=t.child.stateNode}js(t,a,n)}break;case 5:var l=t.stateNode;if(null===n&&4&t.flags){n=l;var c=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:case 4:case 12:case 19:case 17:case 21:case 22:case 23:case 25:break;case 13:if(null===t.memoizedState){var u=t.alternate;if(null!==u){var h=u.memoizedState;if(null!==h){var d=h.dehydrated;null!==d&&zt(d)}}}break;default:throw Error(s(163))}$a||512&t.flags&&sl(t)}catch(sf){Cc(t,t.return,sf)}}if(t===e){Za=null;break}if(null!==(n=t.sibling)){n.return=t.return,Za=n;break}Za=t.return}}function xl(e){for(;null!==Za;){var t=Za;if(t===e){Za=null;break}var n=t.sibling;if(null!==n){n.return=t.return,Za=n;break}Za=t.return}}function kl(e){for(;null!==Za;){var t=Za;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{rl(4,t)}catch(l){Cc(t,n,l)}break;case 1:var i=t.stateNode;if("function"===typeof i.componentDidMount){var r=t.return;try{i.componentDidMount()}catch(l){Cc(t,r,l)}}var s=t.return;try{sl(t)}catch(l){Cc(t,s,l)}break;case 5:var o=t.return;try{sl(t)}catch(l){Cc(t,o,l)}}}catch(l){Cc(t,t.return,l)}if(t===e){Za=null;break}var a=t.sibling;if(null!==a){a.return=t.return,Za=a;break}Za=t.return}}var El,Cl=Math.ceil,Sl=w.ReactCurrentDispatcher,Al=w.ReactCurrentOwner,Tl=w.ReactCurrentBatchConfig,Pl=0,Il=null,Rl=null,Ml=0,Nl=0,Dl=Er(0),Ol=0,Ll=null,Fl=0,jl=0,Bl=0,Wl=null,Ul=null,zl=0,Hl=1/0,Vl=null,ql=!1,Gl=null,Kl=null,Yl=!1,Xl=null,Ql=0,$l=0,Jl=null,Zl=-1,ec=0;function tc(){return 0!==(6&Pl)?$e():-1!==Zl?Zl:Zl=$e()}function nc(e){return 0===(1&e.mode)?1:0!==(2&Pl)&&0!==Ml?Ml&-Ml:null!==gs.transition?(0===ec&&(ec=gt()),ec):0!==(e=_t)?e:e=void 0===(e=window.event)?16:Qt(e.type)}function ic(e,t,n,i){if(50<$l)throw $l=0,Jl=null,Error(s(185));vt(e,n,i),0!==(2&Pl)&&e===Il||(e===Il&&(0===(2&Pl)&&(jl|=n),4===Ol&&lc(e,Ml)),rc(e,i),1===n&&0===Pl&&0===(1&t.mode)&&(Hl=$e()+500,Br&&zr()))}function rc(e,t){var n=e.callbackNode;!function(e,t){for(var n=e.suspendedLanes,i=e.pingedLanes,r=e.expirationTimes,s=e.pendingLanes;0<s;){var o=31-ot(s),a=1<<o,l=r[o];-1===l?0!==(a&n)&&0===(a&i)||(r[o]=pt(a,t)):l<=t&&(e.expiredLanes|=a),s&=~a}}(e,t);var i=dt(e,e===Il?Ml:0);if(0===i)null!==n&&Ye(n),e.callbackNode=null,e.callbackPriority=0;else if(t=i&-i,e.callbackPriority!==t){if(null!=n&&Ye(n),1===t)0===e.tag?function(e){Br=!0,Ur(e)}(cc.bind(null,e)):Ur(cc.bind(null,e)),or(function(){0===(6&Pl)&&zr()}),n=null;else{switch(wt(i)){case 1:n=Ze;break;case 4:n=et;break;case 16:default:n=tt;break;case 536870912:n=it}n=Ic(n,sc.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function sc(e,t){if(Zl=-1,ec=0,0!==(6&Pl))throw Error(s(327));var n=e.callbackNode;if(kc()&&e.callbackNode!==n)return null;var i=dt(e,e===Il?Ml:0);if(0===i)return null;if(0!==(30&i)||0!==(i&e.expiredLanes)||t)t=vc(e,i);else{t=i;var r=Pl;Pl|=2;var o=gc();for(Il===e&&Ml===t||(Vl=null,Hl=$e()+500,pc(e,t));;)try{_c();break}catch(l){fc(e,l)}bs(),Sl.current=o,Pl=r,null!==Rl?t=0:(Il=null,Ml=0,t=Ol)}if(0!==t){if(2===t&&(0!==(r=ft(e))&&(i=r,t=oc(e,r))),1===t)throw n=Ll,pc(e,0),lc(e,i),rc(e,$e()),n;if(6===t)lc(e,i);else{if(r=e.current.alternate,0===(30&i)&&!function(e){for(var t=e;;){if(16384&t.flags){var n=t.updateQueue;if(null!==n&&null!==(n=n.stores))for(var i=0;i<n.length;i++){var r=n[i],s=r.getSnapshot;r=r.value;try{if(!ai(s(),r))return!1}catch(a){return!1}}}if(n=t.child,16384&t.subtreeFlags&&null!==n)n.return=t,t=n;else{if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}(r)&&(2===(t=vc(e,i))&&(0!==(o=ft(e))&&(i=o,t=oc(e,o))),1===t))throw n=Ll,pc(e,0),lc(e,i),rc(e,$e()),n;switch(e.finishedWork=r,e.finishedLanes=i,t){case 0:case 1:throw Error(s(345));case 2:case 5:xc(e,Ul,Vl);break;case 3:if(lc(e,i),(130023424&i)===i&&10<(t=zl+500-$e())){if(0!==dt(e,0))break;if(((r=e.suspendedLanes)&i)!==i){tc(),e.pingedLanes|=e.suspendedLanes&r;break}e.timeoutHandle=ir(xc.bind(null,e,Ul,Vl),t);break}xc(e,Ul,Vl);break;case 4:if(lc(e,i),(4194240&i)===i)break;for(t=e.eventTimes,r=-1;0<i;){var a=31-ot(i);o=1<<a,(a=t[a])>r&&(r=a),i&=~o}if(i=r,10<(i=(120>(i=$e()-i)?120:480>i?480:1080>i?1080:1920>i?1920:3e3>i?3e3:4320>i?4320:1960*Cl(i/1960))-i)){e.timeoutHandle=ir(xc.bind(null,e,Ul,Vl),i);break}xc(e,Ul,Vl);break;default:throw Error(s(329))}}}return rc(e,$e()),e.callbackNode===n?sc.bind(null,e):null}function oc(e,t){var n=Wl;return e.current.memoizedState.isDehydrated&&(pc(e,t).flags|=256),2!==(e=vc(e,t))&&(t=Ul,Ul=n,null!==t&&ac(t)),e}function ac(e){null===Ul?Ul=e:Ul.push.apply(Ul,e)}function lc(e,t){for(t&=~Bl,t&=~jl,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-ot(t),i=1<<n;e[n]=-1,t&=~i}}function cc(e){if(0!==(6&Pl))throw Error(s(327));kc();var t=dt(e,0);if(0===(1&t))return rc(e,$e()),null;var n=vc(e,t);if(0!==e.tag&&2===n){var i=ft(e);0!==i&&(t=i,n=oc(e,i))}if(1===n)throw n=Ll,pc(e,0),lc(e,t),rc(e,$e()),n;if(6===n)throw Error(s(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,xc(e,Ul,Vl),rc(e,$e()),null}function uc(e,t){var n=Pl;Pl|=1;try{return e(t)}finally{0===(Pl=n)&&(Hl=$e()+500,Br&&zr())}}function hc(e){null!==Xl&&0===Xl.tag&&0===(6&Pl)&&kc();var t=Pl;Pl|=1;var n=Tl.transition,i=_t;try{if(Tl.transition=null,_t=1,e)return e()}finally{_t=i,Tl.transition=n,0===(6&(Pl=t))&&zr()}}function dc(){Nl=Dl.current,Cr(Dl)}function pc(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(-1!==n&&(e.timeoutHandle=-1,rr(n)),null!==Rl)for(n=Rl.return;null!==n;){var i=n;switch(ts(i),i.tag){case 1:null!==(i=i.type.childContextTypes)&&void 0!==i&&Nr();break;case 3:ro(),Cr(Pr),Cr(Tr),uo();break;case 5:oo(i);break;case 4:ro();break;case 13:case 19:Cr(ao);break;case 10:xs(i.type._context);break;case 22:case 23:dc()}n=n.return}if(Il=e,Rl=e=Dc(e.current,null),Ml=Nl=t,Ol=0,Ll=null,Bl=jl=Fl=0,Ul=Wl=null,null!==Ss){for(t=0;t<Ss.length;t++)if(null!==(i=(n=Ss[t]).interleaved)){n.interleaved=null;var r=i.next,s=n.pending;if(null!==s){var o=s.next;s.next=r,i.next=o}n.pending=i}Ss=null}return e}function fc(e,t){for(;;){var n=Rl;try{if(bs(),ho.current=oa,yo){for(var i=go.memoizedState;null!==i;){var r=i.queue;null!==r&&(r.pending=null),i=i.next}yo=!1}if(fo=0,vo=mo=go=null,_o=!1,wo=0,Al.current=null,null===n||null===n.return){Ol=1,Ll=t,Rl=null;break}e:{var o=e,a=n.return,l=n,c=t;if(t=Ml,l.flags|=32768,null!==c&&"object"===typeof c&&"function"===typeof c.then){var u=c,h=l,d=h.tag;if(0===(1&h.mode)&&(0===d||11===d||15===d)){var p=h.alternate;p?(h.updateQueue=p.updateQueue,h.memoizedState=p.memoizedState,h.lanes=p.lanes):(h.updateQueue=null,h.memoizedState=null)}var f=va(a);if(null!==f){f.flags&=-257,ya(f,a,l,0,t),1&f.mode&&ma(o,u,t),c=u;var g=(t=f).updateQueue;if(null===g){var m=new Set;m.add(c),t.updateQueue=m}else g.add(c);break e}if(0===(1&t)){ma(o,u,t),mc();break e}c=Error(s(426))}else if(rs&&1&l.mode){var v=va(a);if(null!==v){0===(65536&v.flags)&&(v.flags|=256),ya(v,a,l,0,t),fs(ua(c,l));break e}}o=c=ua(c,l),4!==Ol&&(Ol=2),null===Wl?Wl=[o]:Wl.push(o),o=a;do{switch(o.tag){case 3:o.flags|=65536,t&=-t,o.lanes|=t,Ls(o,fa(0,c,t));break e;case 1:l=c;var y=o.type,_=o.stateNode;if(0===(128&o.flags)&&("function"===typeof y.getDerivedStateFromError||null!==_&&"function"===typeof _.componentDidCatch&&(null===Kl||!Kl.has(_)))){o.flags|=65536,t&=-t,o.lanes|=t,Ls(o,ga(o,l,t));break e}}o=o.return}while(null!==o)}bc(n)}catch(w){t=w,Rl===n&&null!==n&&(Rl=n=n.return);continue}break}}function gc(){var e=Sl.current;return Sl.current=oa,null===e?oa:e}function mc(){0!==Ol&&3!==Ol&&2!==Ol||(Ol=4),null===Il||0===(268435455&Fl)&&0===(268435455&jl)||lc(Il,Ml)}function vc(e,t){var n=Pl;Pl|=2;var i=gc();for(Il===e&&Ml===t||(Vl=null,pc(e,t));;)try{yc();break}catch(r){fc(e,r)}if(bs(),Pl=n,Sl.current=i,null!==Rl)throw Error(s(261));return Il=null,Ml=0,Ol}function yc(){for(;null!==Rl;)wc(Rl)}function _c(){for(;null!==Rl&&!Xe();)wc(Rl)}function wc(e){var t=El(e.alternate,e,Nl);e.memoizedProps=e.pendingProps,null===t?bc(e):Rl=t,Al.current=null}function bc(e){var t=e;do{var n=t.alternate;if(e=t.return,0===(32768&t.flags)){if(null!==(n=Ya(n,t,Nl)))return void(Rl=n)}else{if(null!==(n=Xa(n,t)))return n.flags&=32767,void(Rl=n);if(null===e)return Ol=6,void(Rl=null);e.flags|=32768,e.subtreeFlags=0,e.deletions=null}if(null!==(t=t.sibling))return void(Rl=t);Rl=t=e}while(null!==t);0===Ol&&(Ol=5)}function xc(e,t,n){var i=_t,r=Tl.transition;try{Tl.transition=null,_t=1,function(e,t,n,i){do{kc()}while(null!==Xl);if(0!==(6&Pl))throw Error(s(327));n=e.finishedWork;var r=e.finishedLanes;if(null===n)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(s(177));e.callbackNode=null,e.callbackPriority=0;var o=n.lanes|n.childLanes;if(function(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var i=e.eventTimes;for(e=e.expirationTimes;0<n;){var r=31-ot(n),s=1<<r;t[r]=0,i[r]=-1,e[r]=-1,n&=~s}}(e,o),e===Il&&(Rl=Il=null,Ml=0),0===(2064&n.subtreeFlags)&&0===(2064&n.flags)||Yl||(Yl=!0,Ic(tt,function(){return kc(),null})),o=0!==(15990&n.flags),0!==(15990&n.subtreeFlags)||o){o=Tl.transition,Tl.transition=null;var a=_t;_t=1;var l=Pl;Pl|=4,Al.current=null,function(e,t){if(er=Vt,pi(e=di())){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{var i=(n=(n=e.ownerDocument)&&n.defaultView||window).getSelection&&n.getSelection();if(i&&0!==i.rangeCount){n=i.anchorNode;var r=i.anchorOffset,o=i.focusNode;i=i.focusOffset;try{n.nodeType,o.nodeType}catch(b){n=null;break e}var a=0,l=-1,c=-1,u=0,h=0,d=e,p=null;t:for(;;){for(var f;d!==n||0!==r&&3!==d.nodeType||(l=a+r),d!==o||0!==i&&3!==d.nodeType||(c=a+i),3===d.nodeType&&(a+=d.nodeValue.length),null!==(f=d.firstChild);)p=d,d=f;for(;;){if(d===e)break t;if(p===n&&++u===r&&(l=a),p===o&&++h===i&&(c=a),null!==(f=d.nextSibling))break;p=(d=p).parentNode}d=f}n=-1===l||-1===c?null:{start:l,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(tr={focusedElem:e,selectionRange:n},Vt=!1,Za=t;null!==Za;)if(e=(t=Za).child,0!==(1028&t.subtreeFlags)&&null!==e)e.return=t,Za=e;else for(;null!==Za;){t=Za;try{var g=t.alternate;if(0!==(1024&t.flags))switch(t.tag){case 0:case 11:case 15:case 5:case 6:case 4:case 17:break;case 1:if(null!==g){var m=g.memoizedProps,v=g.memoizedState,y=t.stateNode,_=y.getSnapshotBeforeUpdate(t.elementType===t.type?m:ms(t.type,m),v);y.__reactInternalSnapshotBeforeUpdate=_}break;case 3:var w=t.stateNode.containerInfo;1===w.nodeType?w.textContent="":9===w.nodeType&&w.documentElement&&w.removeChild(w.documentElement);break;default:throw Error(s(163))}}catch(b){Cc(t,t.return,b)}if(null!==(e=t.sibling)){e.return=t.return,Za=e;break}Za=t.return}g=nl,nl=!1}(e,n),vl(n,e),fi(tr),Vt=!!er,tr=er=null,e.current=n,_l(n,e,r),Qe(),Pl=l,_t=a,Tl.transition=o}else e.current=n;if(Yl&&(Yl=!1,Xl=e,Ql=r),o=e.pendingLanes,0===o&&(Kl=null),function(e){if(st&&"function"===typeof st.onCommitFiberRoot)try{st.onCommitFiberRoot(rt,e,void 0,128===(128&e.current.flags))}catch(t){}}(n.stateNode),rc(e,$e()),null!==t)for(i=e.onRecoverableError,n=0;n<t.length;n++)r=t[n],i(r.value,{componentStack:r.stack,digest:r.digest});if(ql)throw ql=!1,e=Gl,Gl=null,e;0!==(1&Ql)&&0!==e.tag&&kc(),o=e.pendingLanes,0!==(1&o)?e===Jl?$l++:($l=0,Jl=e):$l=0,zr()}(e,t,n,i)}finally{Tl.transition=r,_t=i}return null}function kc(){if(null!==Xl){var e=wt(Ql),t=Tl.transition,n=_t;try{if(Tl.transition=null,_t=16>e?16:e,null===Xl)var i=!1;else{if(e=Xl,Xl=null,Ql=0,0!==(6&Pl))throw Error(s(331));var r=Pl;for(Pl|=4,Za=e.current;null!==Za;){var o=Za,a=o.child;if(0!==(16&Za.flags)){var l=o.deletions;if(null!==l){for(var c=0;c<l.length;c++){var u=l[c];for(Za=u;null!==Za;){var h=Za;switch(h.tag){case 0:case 11:case 15:il(8,h,o)}var d=h.child;if(null!==d)d.return=h,Za=d;else for(;null!==Za;){var p=(h=Za).sibling,f=h.return;if(ol(h),h===u){Za=null;break}if(null!==p){p.return=f,Za=p;break}Za=f}}}var g=o.alternate;if(null!==g){var m=g.child;if(null!==m){g.child=null;do{var v=m.sibling;m.sibling=null,m=v}while(null!==m)}}Za=o}}if(0!==(2064&o.subtreeFlags)&&null!==a)a.return=o,Za=a;else e:for(;null!==Za;){if(0!==(2048&(o=Za).flags))switch(o.tag){case 0:case 11:case 15:il(9,o,o.return)}var y=o.sibling;if(null!==y){y.return=o.return,Za=y;break e}Za=o.return}}var _=e.current;for(Za=_;null!==Za;){var w=(a=Za).child;if(0!==(2064&a.subtreeFlags)&&null!==w)w.return=a,Za=w;else e:for(a=_;null!==Za;){if(0!==(2048&(l=Za).flags))try{switch(l.tag){case 0:case 11:case 15:rl(9,l)}}catch(x){Cc(l,l.return,x)}if(l===a){Za=null;break e}var b=l.sibling;if(null!==b){b.return=l.return,Za=b;break e}Za=l.return}}if(Pl=r,zr(),st&&"function"===typeof st.onPostCommitFiberRoot)try{st.onPostCommitFiberRoot(rt,e)}catch(x){}i=!0}return i}finally{_t=n,Tl.transition=t}}return!1}function Ec(e,t,n){e=Ds(e,t=fa(0,t=ua(n,t),1),1),t=tc(),null!==e&&(vt(e,1,t),rc(e,t))}function Cc(e,t,n){if(3===e.tag)Ec(e,e,n);else for(;null!==t;){if(3===t.tag){Ec(t,e,n);break}if(1===t.tag){var i=t.stateNode;if("function"===typeof t.type.getDerivedStateFromError||"function"===typeof i.componentDidCatch&&(null===Kl||!Kl.has(i))){t=Ds(t,e=ga(t,e=ua(n,e),1),1),e=tc(),null!==t&&(vt(t,1,e),rc(t,e));break}}t=t.return}}function Sc(e,t,n){var i=e.pingCache;null!==i&&i.delete(t),t=tc(),e.pingedLanes|=e.suspendedLanes&n,Il===e&&(Ml&n)===n&&(4===Ol||3===Ol&&(130023424&Ml)===Ml&&500>$e()-zl?pc(e,0):Bl|=n),rc(e,t)}function Ac(e,t){0===t&&(0===(1&e.mode)?t=1:(t=ut,0===(130023424&(ut<<=1))&&(ut=4194304)));var n=tc();null!==(e=Ps(e,t))&&(vt(e,t,n),rc(e,n))}function Tc(e){var t=e.memoizedState,n=0;null!==t&&(n=t.retryLane),Ac(e,n)}function Pc(e,t){var n=0;switch(e.tag){case 13:var i=e.stateNode,r=e.memoizedState;null!==r&&(n=r.retryLane);break;case 19:i=e.stateNode;break;default:throw Error(s(314))}null!==i&&i.delete(t),Ac(e,n)}function Ic(e,t){return Ke(e,t)}function Rc(e,t,n,i){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=i,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Mc(e,t,n,i){return new Rc(e,t,n,i)}function Nc(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Dc(e,t){var n=e.alternate;return null===n?((n=Mc(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=14680064&e.flags,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Oc(e,t,n,i,r,o){var a=2;if(i=e,"function"===typeof e)Nc(e)&&(a=1);else if("string"===typeof e)a=5;else e:switch(e){case k:return Lc(n.children,r,o,t);case E:a=8,r|=8;break;case C:return(e=Mc(12,n,t,2|r)).elementType=C,e.lanes=o,e;case P:return(e=Mc(13,n,t,r)).elementType=P,e.lanes=o,e;case I:return(e=Mc(19,n,t,r)).elementType=I,e.lanes=o,e;case N:return Fc(n,r,o,t);default:if("object"===typeof e&&null!==e)switch(e.$$typeof){case S:a=10;break e;case A:a=9;break e;case T:a=11;break e;case R:a=14;break e;case M:a=16,i=null;break e}throw Error(s(130,null==e?e:typeof e,""))}return(t=Mc(a,n,t,r)).elementType=e,t.type=i,t.lanes=o,t}function Lc(e,t,n,i){return(e=Mc(7,e,i,t)).lanes=n,e}function Fc(e,t,n,i){return(e=Mc(22,e,i,t)).elementType=N,e.lanes=n,e.stateNode={isHidden:!1},e}function jc(e,t,n){return(e=Mc(6,e,null,t)).lanes=n,e}function Bc(e,t,n){return(t=Mc(4,null!==e.children?e.children:[],e.key,t)).lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Wc(e,t,n,i,r){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=mt(0),this.expirationTimes=mt(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=mt(0),this.identifierPrefix=i,this.onRecoverableError=r,this.mutableSourceEagerHydrationData=null}function Uc(e,t,n,i,r,s,o,a,l){return e=new Wc(e,t,n,a,l),1===t?(t=1,!0===s&&(t|=8)):t=0,s=Mc(3,null,null,t),e.current=s,s.stateNode=e,s.memoizedState={element:i,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Rs(s),e}function zc(e){if(!e)return Ar;e:{if(ze(e=e._reactInternals)!==e||1!==e.tag)throw Error(s(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Mr(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(null!==t);throw Error(s(171))}if(1===e.tag){var n=e.type;if(Mr(n))return Or(e,n,t)}return t}function Hc(e,t,n,i,r,s,o,a,l){return(e=Uc(n,i,!0,e,0,s,0,a,l)).context=zc(null),n=e.current,(s=Ns(i=tc(),r=nc(n))).callback=void 0!==t&&null!==t?t:null,Ds(n,s,r),e.current.lanes=r,vt(e,r,i),rc(e,i),e}function Vc(e,t,n,i){var r=t.current,s=tc(),o=nc(r);return n=zc(n),null===t.context?t.context=n:t.pendingContext=n,(t=Ns(s,o)).payload={element:e},null!==(i=void 0===i?null:i)&&(t.callback=i),null!==(e=Ds(r,t,o))&&(ic(e,r,o,s),Os(e,r,o)),o}function qc(e){return(e=e.current).child?(e.child.tag,e.child.stateNode):null}function Gc(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var n=e.retryLane;e.retryLane=0!==n&&n<t?n:t}}function Kc(e,t){Gc(e,t),(e=e.alternate)&&Gc(e,t)}El=function(e,t,n){if(null!==e)if(e.memoizedProps!==t.pendingProps||Pr.current)wa=!0;else{if(0===(e.lanes&n)&&0===(128&t.flags))return wa=!1,function(e,t,n){switch(t.tag){case 3:Ia(t),ps();break;case 5:so(t);break;case 1:Mr(t.type)&&Lr(t);break;case 4:io(t,t.stateNode.containerInfo);break;case 10:var i=t.type._context,r=t.memoizedProps.value;Sr(vs,i._currentValue),i._currentValue=r;break;case 13:if(null!==(i=t.memoizedState))return null!==i.dehydrated?(Sr(ao,1&ao.current),t.flags|=128,null):0!==(n&t.child.childLanes)?ja(e,t,n):(Sr(ao,1&ao.current),null!==(e=qa(e,t,n))?e.sibling:null);Sr(ao,1&ao.current);break;case 19:if(i=0!==(n&t.childLanes),0!==(128&e.flags)){if(i)return Ha(e,t,n);t.flags|=128}if(null!==(r=t.memoizedState)&&(r.rendering=null,r.tail=null,r.lastEffect=null),Sr(ao,ao.current),i)break;return null;case 22:case 23:return t.lanes=0,Ca(e,t,n)}return qa(e,t,n)}(e,t,n);wa=0!==(131072&e.flags)}else wa=!1,rs&&0!==(1048576&t.flags)&&Zr(t,Gr,t.index);switch(t.lanes=0,t.tag){case 2:var i=t.type;Va(e,t),e=t.pendingProps;var r=Rr(t,Tr.current);Es(t,n),r=Eo(null,t,i,e,r,n);var o=Co();return t.flags|=1,"object"===typeof r&&null!==r&&"function"===typeof r.render&&void 0===r.$$typeof?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Mr(i)?(o=!0,Lr(t)):o=!1,t.memoizedState=null!==r.state&&void 0!==r.state?r.state:null,Rs(t),r.updater=Us,t.stateNode=r,r._reactInternals=t,qs(t,i,e,n),t=Pa(null,t,i,!0,o,n)):(t.tag=0,rs&&o&&es(t),ba(null,t,r,n),t=t.child),t;case 16:i=t.elementType;e:{switch(Va(e,t),e=t.pendingProps,i=(r=i._init)(i._payload),t.type=i,r=t.tag=function(e){if("function"===typeof e)return Nc(e)?1:0;if(void 0!==e&&null!==e){if((e=e.$$typeof)===T)return 11;if(e===R)return 14}return 2}(i),e=ms(i,e),r){case 0:t=Aa(null,t,i,e,n);break e;case 1:t=Ta(null,t,i,e,n);break e;case 11:t=xa(null,t,i,e,n);break e;case 14:t=ka(null,t,i,ms(i.type,e),n);break e}throw Error(s(306,i,""))}return t;case 0:return i=t.type,r=t.pendingProps,Aa(e,t,i,r=t.elementType===i?r:ms(i,r),n);case 1:return i=t.type,r=t.pendingProps,Ta(e,t,i,r=t.elementType===i?r:ms(i,r),n);case 3:e:{if(Ia(t),null===e)throw Error(s(387));i=t.pendingProps,r=(o=t.memoizedState).element,Ms(e,t),Fs(t,i,null,n);var a=t.memoizedState;if(i=a.element,o.isDehydrated){if(o={element:i,isDehydrated:!1,cache:a.cache,pendingSuspenseBoundaries:a.pendingSuspenseBoundaries,transitions:a.transitions},t.updateQueue.baseState=o,t.memoizedState=o,256&t.flags){t=Ra(e,t,i,n,r=ua(Error(s(423)),t));break e}if(i!==r){t=Ra(e,t,i,n,r=ua(Error(s(424)),t));break e}for(is=cr(t.stateNode.containerInfo.firstChild),ns=t,rs=!0,ss=null,n=$s(t,null,i,n),t.child=n;n;)n.flags=-3&n.flags|4096,n=n.sibling}else{if(ps(),i===r){t=qa(e,t,n);break e}ba(e,t,i,n)}t=t.child}return t;case 5:return so(t),null===e&&cs(t),i=t.type,r=t.pendingProps,o=null!==e?e.memoizedProps:null,a=r.children,nr(i,r)?a=null:null!==o&&nr(i,o)&&(t.flags|=32),Sa(e,t),ba(e,t,a,n),t.child;case 6:return null===e&&cs(t),null;case 13:return ja(e,t,n);case 4:return io(t,t.stateNode.containerInfo),i=t.pendingProps,null===e?t.child=Qs(t,null,i,n):ba(e,t,i,n),t.child;case 11:return i=t.type,r=t.pendingProps,xa(e,t,i,r=t.elementType===i?r:ms(i,r),n);case 7:return ba(e,t,t.pendingProps,n),t.child;case 8:case 12:return ba(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(i=t.type._context,r=t.pendingProps,o=t.memoizedProps,a=r.value,Sr(vs,i._currentValue),i._currentValue=a,null!==o)if(ai(o.value,a)){if(o.children===r.children&&!Pr.current){t=qa(e,t,n);break e}}else for(null!==(o=t.child)&&(o.return=t);null!==o;){var l=o.dependencies;if(null!==l){a=o.child;for(var c=l.firstContext;null!==c;){if(c.context===i){if(1===o.tag){(c=Ns(-1,n&-n)).tag=2;var u=o.updateQueue;if(null!==u){var h=(u=u.shared).pending;null===h?c.next=c:(c.next=h.next,h.next=c),u.pending=c}}o.lanes|=n,null!==(c=o.alternate)&&(c.lanes|=n),ks(o.return,n,t),l.lanes|=n;break}c=c.next}}else if(10===o.tag)a=o.type===t.type?null:o.child;else if(18===o.tag){if(null===(a=o.return))throw Error(s(341));a.lanes|=n,null!==(l=a.alternate)&&(l.lanes|=n),ks(a,n,t),a=o.sibling}else a=o.child;if(null!==a)a.return=o;else for(a=o;null!==a;){if(a===t){a=null;break}if(null!==(o=a.sibling)){o.return=a.return,a=o;break}a=a.return}o=a}ba(e,t,r.children,n),t=t.child}return t;case 9:return r=t.type,i=t.pendingProps.children,Es(t,n),i=i(r=Cs(r)),t.flags|=1,ba(e,t,i,n),t.child;case 14:return r=ms(i=t.type,t.pendingProps),ka(e,t,i,r=ms(i.type,r),n);case 15:return Ea(e,t,t.type,t.pendingProps,n);case 17:return i=t.type,r=t.pendingProps,r=t.elementType===i?r:ms(i,r),Va(e,t),t.tag=1,Mr(i)?(e=!0,Lr(t)):e=!1,Es(t,n),Hs(t,i,r),qs(t,i,r,n),Pa(null,t,i,!0,e,n);case 19:return Ha(e,t,n);case 22:return Ca(e,t,n)}throw Error(s(156,t.tag))};var Yc="function"===typeof reportError?reportError:function(e){console.error(e)};function Xc(e){this._internalRoot=e}function Qc(e){this._internalRoot=e}function $c(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType)}function Jc(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function Zc(){}function eu(e,t,n,i,r){var s=n._reactRootContainer;if(s){var o=s;if("function"===typeof r){var a=r;r=function(){var e=qc(o);a.call(e)}}Vc(t,o,e,r)}else o=function(e,t,n,i,r){if(r){if("function"===typeof i){var s=i;i=function(){var e=qc(o);s.call(e)}}var o=Hc(t,i,e,0,null,!1,0,"",Zc);return e._reactRootContainer=o,e[fr]=o.current,zi(8===e.nodeType?e.parentNode:e),hc(),o}for(;r=e.lastChild;)e.removeChild(r);if("function"===typeof i){var a=i;i=function(){var e=qc(l);a.call(e)}}var l=Uc(e,0,!1,null,0,!1,0,"",Zc);return e._reactRootContainer=l,e[fr]=l.current,zi(8===e.nodeType?e.parentNode:e),hc(function(){Vc(t,l,n,i)}),l}(n,t,e,r,i);return qc(o)}Qc.prototype.render=Xc.prototype.render=function(e){var t=this._internalRoot;if(null===t)throw Error(s(409));Vc(e,t,null,null)},Qc.prototype.unmount=Xc.prototype.unmount=function(){var e=this._internalRoot;if(null!==e){this._internalRoot=null;var t=e.containerInfo;hc(function(){Vc(null,e,null,null)}),t[fr]=null}},Qc.prototype.unstable_scheduleHydration=function(e){if(e){var t=Et();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Nt.length&&0!==t&&t<Nt[n].priority;n++);Nt.splice(n,0,e),0===n&&Ft(e)}},bt=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=ht(t.pendingLanes);0!==n&&(yt(t,1|n),rc(t,$e()),0===(6&Pl)&&(Hl=$e()+500,zr()))}break;case 13:hc(function(){var t=Ps(e,1);if(null!==t){var n=tc();ic(t,e,1,n)}}),Kc(e,1)}},xt=function(e){if(13===e.tag){var t=Ps(e,134217728);if(null!==t)ic(t,e,134217728,tc());Kc(e,134217728)}},kt=function(e){if(13===e.tag){var t=nc(e),n=Ps(e,t);if(null!==n)ic(n,e,t,tc());Kc(e,t)}},Et=function(){return _t},Ct=function(e,t){var n=_t;try{return _t=e,t()}finally{_t=n}},xe=function(e,t,n){switch(t){case"input":if(J(e,n),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var i=n[t];if(i!==e&&i.form===e.form){var r=br(i);if(!r)throw Error(s(90));K(i),J(i,r)}}}break;case"textarea":se(e,n);break;case"select":null!=(t=n.value)&&ne(e,!!n.multiple,t,!1)}},Te=uc,Pe=hc;var tu={usingClientEntryPoint:!1,Events:[_r,wr,br,Se,Ae,uc]},nu={findFiberByHostInstance:yr,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},iu={bundleType:nu.bundleType,version:nu.version,rendererPackageName:nu.rendererPackageName,rendererConfig:nu.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:w.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return null===(e=qe(e))?null:e.stateNode},findFiberByHostInstance:nu.findFiberByHostInstance||function(){return null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var ru=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!ru.isDisabled&&ru.supportsFiber)try{rt=ru.inject(iu),st=ru}catch(ue){}}t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=tu,t.createPortal=function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!$c(t))throw Error(s(200));return function(e,t,n){var i=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:x,key:null==i?null:""+i,children:e,containerInfo:t,implementation:n}}(e,t,null,n)},t.createRoot=function(e,t){if(!$c(e))throw Error(s(299));var n=!1,i="",r=Yc;return null!==t&&void 0!==t&&(!0===t.unstable_strictMode&&(n=!0),void 0!==t.identifierPrefix&&(i=t.identifierPrefix),void 0!==t.onRecoverableError&&(r=t.onRecoverableError)),t=Uc(e,1,!1,null,0,n,0,i,r),e[fr]=t.current,zi(8===e.nodeType?e.parentNode:e),new Xc(t)},t.findDOMNode=function(e){if(null==e)return null;if(1===e.nodeType)return e;var t=e._reactInternals;if(void 0===t){if("function"===typeof e.render)throw Error(s(188));throw e=Object.keys(e).join(","),Error(s(268,e))}return e=null===(e=qe(t))?null:e.stateNode},t.flushSync=function(e){return hc(e)},t.hydrate=function(e,t,n){if(!Jc(t))throw Error(s(200));return eu(null,e,t,!0,n)},t.hydrateRoot=function(e,t,n){if(!$c(e))throw Error(s(405));var i=null!=n&&n.hydratedSources||null,r=!1,o="",a=Yc;if(null!==n&&void 0!==n&&(!0===n.unstable_strictMode&&(r=!0),void 0!==n.identifierPrefix&&(o=n.identifierPrefix),void 0!==n.onRecoverableError&&(a=n.onRecoverableError)),t=Hc(t,null,e,1,null!=n?n:null,r,0,o,a),e[fr]=t.current,zi(e),i)for(e=0;e<i.length;e++)r=(r=(n=i[e])._getVersion)(n._source),null==t.mutableSourceEagerHydrationData?t.mutableSourceEagerHydrationData=[n,r]:t.mutableSourceEagerHydrationData.push(n,r);return new Qc(t)},t.render=function(e,t,n){if(!Jc(t))throw Error(s(200));return eu(null,e,t,!1,n)},t.unmountComponentAtNode=function(e){if(!Jc(e))throw Error(s(40));return!!e._reactRootContainer&&(hc(function(){eu(null,null,e,!1,function(){e._reactRootContainer=null,e[fr]=null})}),!0)},t.unstable_batchedUpdates=uc,t.unstable_renderSubtreeIntoContainer=function(e,t,n,i){if(!Jc(n))throw Error(s(200));if(null==e||void 0===e._reactInternals)throw Error(s(38));return eu(e,t,n,!1,i)},t.version="18.2.0-next-9e3b772b8-20220608"},853:(e,t,n)=>{e.exports=n(234)},950:(e,t,n)=>{!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=n(730)}},t={};function n(i){var r=t[i];if(void 0!==r)return r.exports;var s=t[i]={exports:{}};return e[i](s,s.exports,n),s.exports}(()=>{var e,t=Object.getPrototypeOf?e=>Object.getPrototypeOf(e):e=>e.__proto__;n.t=function(i,r){if(1&r&&(i=this(i)),8&r)return i;if("object"===typeof i&&i){if(4&r&&i.__esModule)return i;if(16&r&&"function"===typeof i.then)return i}var s=Object.create(null);n.r(s);var o={};e=e||[null,t({}),t([]),t(t)];for(var a=2&r&&i;("object"==typeof a||"function"==typeof a)&&!~e.indexOf(a);a=t(a))Object.getOwnPropertyNames(a).forEach(e=>o[e]=()=>i[e]);return o.default=()=>i,n.d(s,o),s}})(),n.d=(e,t)=>{for(var i in t)n.o(t,i)&&!n.o(e,i)&&Object.defineProperty(e,i,{enumerable:!0,get:t[i]})},n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}(),n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),n.r=e=>{"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.nc=void 0;var i,r=n(43),s=n.t(r,2),o=n(391),a=n(950),l=n.t(a,2);function c(){return c=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},c.apply(this,arguments)}!function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"}(i||(i={}));const u="popstate";function h(e,t){if(!1===e||null===e||"undefined"===typeof e)throw new Error(t)}function d(e,t){if(!e){"undefined"!==typeof console&&console.warn(t);try{throw new Error(t)}catch(n){}}}function p(e,t){return{usr:e.state,key:e.key,idx:t}}function f(e,t,n,i){return void 0===n&&(n=null),c({pathname:"string"===typeof e?e:e.pathname,search:"",hash:""},"string"===typeof t?m(t):t,{state:n,key:t&&t.key||i||Math.random().toString(36).substr(2,8)})}function g(e){let{pathname:t="/",search:n="",hash:i=""}=e;return n&&"?"!==n&&(t+="?"===n.charAt(0)?n:"?"+n),i&&"#"!==i&&(t+="#"===i.charAt(0)?i:"#"+i),t}function m(e){let t={};if(e){let n=e.indexOf("#");n>=0&&(t.hash=e.substr(n),e=e.substr(0,n));let i=e.indexOf("?");i>=0&&(t.search=e.substr(i),e=e.substr(0,i)),e&&(t.pathname=e)}return t}function v(e,t,n,r){void 0===r&&(r={});let{window:s=document.defaultView,v5Compat:o=!1}=r,a=s.history,l=i.Pop,d=null,m=v();function v(){return(a.state||{idx:null}).idx}function y(){l=i.Pop;let e=v(),t=null==e?null:e-m;m=e,d&&d({action:l,location:w.location,delta:t})}function _(e){let t="null"!==s.location.origin?s.location.origin:s.location.href,n="string"===typeof e?e:g(e);return n=n.replace(/ $/,"%20"),h(t,"No window.location.(origin|href) available to create URL for href: "+n),new URL(n,t)}null==m&&(m=0,a.replaceState(c({},a.state,{idx:m}),""));let w={get action(){return l},get location(){return e(s,a)},listen(e){if(d)throw new Error("A history only accepts one active listener");return s.addEventListener(u,y),d=e,()=>{s.removeEventListener(u,y),d=null}},createHref:e=>t(s,e),createURL:_,encodeLocation(e){let t=_(e);return{pathname:t.pathname,search:t.search,hash:t.hash}},push:function(e,t){l=i.Push;let r=f(w.location,e,t);n&&n(r,e),m=v()+1;let c=p(r,m),u=w.createHref(r);try{a.pushState(c,"",u)}catch(ml){if(ml instanceof DOMException&&"DataCloneError"===ml.name)throw ml;s.location.assign(u)}o&&d&&d({action:l,location:w.location,delta:1})},replace:function(e,t){l=i.Replace;let r=f(w.location,e,t);n&&n(r,e),m=v();let s=p(r,m),c=w.createHref(r);a.replaceState(s,"",c),o&&d&&d({action:l,location:w.location,delta:0})},go:e=>a.go(e)};return w}var y;!function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"}(y||(y={}));new Set(["lazy","caseSensitive","path","id","index","children"]);function _(e,t,n){void 0===n&&(n="/");let i=N(("string"===typeof t?m(t):t).pathname||"/",n);if(null==i)return null;let r=w(e);!function(e){e.sort((e,t)=>e.score!==t.score?t.score-e.score:function(e,t){let n=e.length===t.length&&e.slice(0,-1).every((e,n)=>e===t[n]);return n?e[e.length-1]-t[t.length-1]:0}(e.routesMeta.map(e=>e.childrenIndex),t.routesMeta.map(e=>e.childrenIndex)))}(r);let s=null;for(let o=0;null==s&&o<r.length;++o){let e=M(i);s=I(r[o],e)}return s}function w(e,t,n,i){void 0===t&&(t=[]),void 0===n&&(n=[]),void 0===i&&(i="");let r=(e,r,s)=>{let o={relativePath:void 0===s?e.path||"":s,caseSensitive:!0===e.caseSensitive,childrenIndex:r,route:e};o.relativePath.startsWith("/")&&(h(o.relativePath.startsWith(i),'Absolute route path "'+o.relativePath+'" nested under path "'+i+'" is not valid. An absolute child route path must start with the combined path of all its parent routes.'),o.relativePath=o.relativePath.slice(i.length));let a=j([i,o.relativePath]),l=n.concat(o);e.children&&e.children.length>0&&(h(!0!==e.index,'Index routes must not have child routes. Please remove all child routes from route path "'+a+'".'),w(e.children,t,l,a)),(null!=e.path||e.index)&&t.push({path:a,score:P(a,e.index),routesMeta:l})};return e.forEach((e,t)=>{var n;if(""!==e.path&&null!=(n=e.path)&&n.includes("?"))for(let i of b(e.path))r(e,t,i);else r(e,t)}),t}function b(e){let t=e.split("/");if(0===t.length)return[];let[n,...i]=t,r=n.endsWith("?"),s=n.replace(/\?$/,"");if(0===i.length)return r?[s,""]:[s];let o=b(i.join("/")),a=[];return a.push(...o.map(e=>""===e?s:[s,e].join("/"))),r&&a.push(...o),a.map(t=>e.startsWith("/")&&""===t?"/":t)}const x=/^:[\w-]+$/,k=3,E=2,C=1,S=10,A=-2,T=e=>"*"===e;function P(e,t){let n=e.split("/"),i=n.length;return n.some(T)&&(i+=A),t&&(i+=E),n.filter(e=>!T(e)).reduce((e,t)=>e+(x.test(t)?k:""===t?C:S),i)}function I(e,t){let{routesMeta:n}=e,i={},r="/",s=[];for(let o=0;o<n.length;++o){let e=n[o],a=o===n.length-1,l="/"===r?t:t.slice(r.length)||"/",c=R({path:e.relativePath,caseSensitive:e.caseSensitive,end:a},l);if(!c)return null;Object.assign(i,c.params);let u=e.route;s.push({params:i,pathname:j([r,c.pathname]),pathnameBase:B(j([r,c.pathnameBase])),route:u}),"/"!==c.pathnameBase&&(r=j([r,c.pathnameBase]))}return s}function R(e,t){"string"===typeof e&&(e={path:e,caseSensitive:!1,end:!0});let[n,i]=function(e,t,n){void 0===t&&(t=!1);void 0===n&&(n=!0);d("*"===e||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were "'+e.replace(/\*$/,"/*")+'" because the `*` character must always follow a `/` in the pattern. To get rid of this warning, please change the route path to "'+e.replace(/\*$/,"/*")+'".');let i=[],r="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(e,t,n)=>(i.push({paramName:t,isOptional:null!=n}),n?"/?([^\\/]+)?":"/([^\\/]+)"));e.endsWith("*")?(i.push({paramName:"*"}),r+="*"===e||"/*"===e?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?r+="\\/*$":""!==e&&"/"!==e&&(r+="(?:(?=\\/|$))");let s=new RegExp(r,t?void 0:"i");return[s,i]}(e.path,e.caseSensitive,e.end),r=t.match(n);if(!r)return null;let s=r[0],o=s.replace(/(.)\/+$/,"$1"),a=r.slice(1);return{params:i.reduce((e,t,n)=>{let{paramName:i,isOptional:r}=t;if("*"===i){let e=a[n]||"";o=s.slice(0,s.length-e.length).replace(/(.)\/+$/,"$1")}const l=a[n];return e[i]=r&&!l?void 0:(l||"").replace(/%2F/g,"/"),e},{}),pathname:s,pathnameBase:o,pattern:e}}function M(e){try{return e.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(ml){return d(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent encoding ('+ml+")."),e}}function N(e,t){if("/"===t)return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let n=t.endsWith("/")?t.length-1:t.length,i=e.charAt(n);return i&&"/"!==i?null:e.slice(n)||"/"}function D(e,t,n,i){return"Cannot include a '"+e+"' character in a manually specified `to."+t+"` field ["+JSON.stringify(i)+"].  Please separate it out to the `to."+n+'` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.'}function O(e){return e.filter((e,t)=>0===t||e.route.path&&e.route.path.length>0)}function L(e,t){let n=O(e);return t?n.map((t,n)=>n===e.length-1?t.pathname:t.pathnameBase):n.map(e=>e.pathnameBase)}function F(e,t,n,i){let r;void 0===i&&(i=!1),"string"===typeof e?r=m(e):(r=c({},e),h(!r.pathname||!r.pathname.includes("?"),D("?","pathname","search",r)),h(!r.pathname||!r.pathname.includes("#"),D("#","pathname","hash",r)),h(!r.search||!r.search.includes("#"),D("#","search","hash",r)));let s,o=""===e||""===r.pathname,a=o?"/":r.pathname;if(null==a)s=n;else{let e=t.length-1;if(!i&&a.startsWith("..")){let t=a.split("/");for(;".."===t[0];)t.shift(),e-=1;r.pathname=t.join("/")}s=e>=0?t[e]:"/"}let l=function(e,t){void 0===t&&(t="/");let{pathname:n,search:i="",hash:r=""}="string"===typeof e?m(e):e,s=n?n.startsWith("/")?n:function(e,t){let n=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(e=>{".."===e?n.length>1&&n.pop():"."!==e&&n.push(e)}),n.length>1?n.join("/"):"/"}(n,t):t;return{pathname:s,search:W(i),hash:U(r)}}(r,s),u=a&&"/"!==a&&a.endsWith("/"),d=(o||"."===a)&&n.endsWith("/");return l.pathname.endsWith("/")||!u&&!d||(l.pathname+="/"),l}const j=e=>e.join("/").replace(/\/\/+/g,"/"),B=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),W=e=>e&&"?"!==e?e.startsWith("?")?e:"?"+e:"",U=e=>e&&"#"!==e?e.startsWith("#")?e:"#"+e:"";Error;function z(e){return null!=e&&"number"===typeof e.status&&"string"===typeof e.statusText&&"boolean"===typeof e.internal&&"data"in e}const H=["post","put","patch","delete"],V=(new Set(H),["get",...H]);new Set(V),new Set([301,302,303,307,308]),new Set([307,308]);Symbol("deferred");function q(){return q=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},q.apply(this,arguments)}const G=r.createContext(null);const K=r.createContext(null);const Y=r.createContext(null);const X=r.createContext(null);const Q=r.createContext({outlet:null,matches:[],isDataRoute:!1});const $=r.createContext(null);function J(){return null!=r.useContext(X)}function Z(){return J()||h(!1),r.useContext(X).location}function ee(e){r.useContext(Y).static||r.useLayoutEffect(e)}function te(){let{isDataRoute:e}=r.useContext(Q);return e?function(){let{router:e}=ue(le.UseNavigateStable),t=de(ce.UseNavigateStable),n=r.useRef(!1);ee(()=>{n.current=!0});let i=r.useCallback(function(i,r){void 0===r&&(r={}),n.current&&("number"===typeof i?e.navigate(i):e.navigate(i,q({fromRouteId:t},r)))},[e,t]);return i}():function(){J()||h(!1);let e=r.useContext(G),{basename:t,future:n,navigator:i}=r.useContext(Y),{matches:s}=r.useContext(Q),{pathname:o}=Z(),a=JSON.stringify(L(s,n.v7_relativeSplatPath)),l=r.useRef(!1);ee(()=>{l.current=!0});let c=r.useCallback(function(n,r){if(void 0===r&&(r={}),!l.current)return;if("number"===typeof n)return void i.go(n);let s=F(n,JSON.parse(a),o,"path"===r.relative);null==e&&"/"!==t&&(s.pathname="/"===s.pathname?t:j([t,s.pathname])),(r.replace?i.replace:i.push)(s,r.state,r)},[t,i,a,o,e]);return c}()}function ne(e,t,n,s){J()||h(!1);let{navigator:o}=r.useContext(Y),{matches:a}=r.useContext(Q),l=a[a.length-1],c=l?l.params:{},u=(l&&l.pathname,l?l.pathnameBase:"/");l&&l.route;let d,p=Z();if(t){var f;let e="string"===typeof t?m(t):t;"/"===u||(null==(f=e.pathname)?void 0:f.startsWith(u))||h(!1),d=e}else d=p;let g=d.pathname||"/",v=g;if("/"!==u){let e=u.replace(/^\//,"").split("/");v="/"+g.replace(/^\//,"").split("/").slice(e.length).join("/")}let y=_(e,{pathname:v});let w=ae(y&&y.map(e=>Object.assign({},e,{params:Object.assign({},c,e.params),pathname:j([u,o.encodeLocation?o.encodeLocation(e.pathname).pathname:e.pathname]),pathnameBase:"/"===e.pathnameBase?u:j([u,o.encodeLocation?o.encodeLocation(e.pathnameBase).pathname:e.pathnameBase])})),a,n,s);return t&&w?r.createElement(X.Provider,{value:{location:q({pathname:"/",search:"",hash:"",state:null,key:"default"},d),navigationType:i.Pop}},w):w}function ie(){let e=function(){var e;let t=r.useContext($),n=he(ce.UseRouteError),i=de(ce.UseRouteError);if(void 0!==t)return t;return null==(e=n.errors)?void 0:e[i]}(),t=z(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),n=e instanceof Error?e.stack:null,i="rgba(200,200,200, 0.5)",s={padding:"0.5rem",backgroundColor:i};return r.createElement(r.Fragment,null,r.createElement("h2",null,"Unexpected Application Error!"),r.createElement("h3",{style:{fontStyle:"italic"}},t),n?r.createElement("pre",{style:s},n):null,null)}const re=r.createElement(ie,null);class se extends r.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||"idle"!==t.revalidation&&"idle"===e.revalidation?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:void 0!==e.error?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){console.error("React Router caught the following error during render",e,t)}render(){return void 0!==this.state.error?r.createElement(Q.Provider,{value:this.props.routeContext},r.createElement($.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function oe(e){let{routeContext:t,match:n,children:i}=e,s=r.useContext(G);return s&&s.static&&s.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=n.route.id),r.createElement(Q.Provider,{value:t},i)}function ae(e,t,n,i){var s;if(void 0===t&&(t=[]),void 0===n&&(n=null),void 0===i&&(i=null),null==e){var o;if(null==(o=n)||!o.errors)return null;e=n.matches}let a=e,l=null==(s=n)?void 0:s.errors;if(null!=l){let e=a.findIndex(e=>e.route.id&&(null==l?void 0:l[e.route.id]));e>=0||h(!1),a=a.slice(0,Math.min(a.length,e+1))}let c=!1,u=-1;if(n&&i&&i.v7_partialHydration)for(let r=0;r<a.length;r++){let e=a[r];if((e.route.HydrateFallback||e.route.hydrateFallbackElement)&&(u=r),e.route.id){let{loaderData:t,errors:i}=n,r=e.route.loader&&void 0===t[e.route.id]&&(!i||void 0===i[e.route.id]);if(e.route.lazy||r){c=!0,a=u>=0?a.slice(0,u+1):[a[0]];break}}}return a.reduceRight((e,i,s)=>{let o,h=!1,d=null,p=null;var f;n&&(o=l&&i.route.id?l[i.route.id]:void 0,d=i.route.errorElement||re,c&&(u<0&&0===s?(f="route-fallback",!1||pe[f]||(pe[f]=!0),h=!0,p=null):u===s&&(h=!0,p=i.route.hydrateFallbackElement||null)));let g=t.concat(a.slice(0,s+1)),m=()=>{let t;return t=o?d:h?p:i.route.Component?r.createElement(i.route.Component,null):i.route.element?i.route.element:e,r.createElement(oe,{match:i,routeContext:{outlet:e,matches:g,isDataRoute:null!=n},children:t})};return n&&(i.route.ErrorBoundary||i.route.errorElement||0===s)?r.createElement(se,{location:n.location,revalidation:n.revalidation,component:d,error:o,children:m(),routeContext:{outlet:null,matches:g,isDataRoute:!0}}):m()},null)}var le=function(e){return e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e}(le||{}),ce=function(e){return e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId",e}(ce||{});function ue(e){let t=r.useContext(G);return t||h(!1),t}function he(e){let t=r.useContext(K);return t||h(!1),t}function de(e){let t=function(){let e=r.useContext(Q);return e||h(!1),e}(),n=t.matches[t.matches.length-1];return n.route.id||h(!1),n.route.id}const pe={};s.startTransition;function fe(e){h(!1)}function ge(e){let{basename:t="/",children:n=null,location:s,navigationType:o=i.Pop,navigator:a,static:l=!1,future:c}=e;J()&&h(!1);let u=t.replace(/^\/*/,"/"),d=r.useMemo(()=>({basename:u,navigator:a,static:l,future:q({v7_relativeSplatPath:!1},c)}),[u,c,a,l]);"string"===typeof s&&(s=m(s));let{pathname:p="/",search:f="",hash:g="",state:v=null,key:y="default"}=s,_=r.useMemo(()=>{let e=N(p,u);return null==e?null:{location:{pathname:e,search:f,hash:g,state:v,key:y},navigationType:o}},[u,p,f,g,v,y,o]);return null==_?null:r.createElement(Y.Provider,{value:d},r.createElement(X.Provider,{children:n,value:_}))}function me(e){let{children:t,location:n}=e;return ne(ve(t),n)}new Promise(()=>{});r.Component;function ve(e,t){void 0===t&&(t=[]);let n=[];return r.Children.forEach(e,(e,i)=>{if(!r.isValidElement(e))return;let s=[...t,i];if(e.type===r.Fragment)return void n.push.apply(n,ve(e.props.children,s));e.type!==fe&&h(!1),e.props.index&&e.props.children&&h(!1);let o={id:e.props.id||s.join("-"),caseSensitive:e.props.caseSensitive,element:e.props.element,Component:e.props.Component,index:e.props.index,path:e.props.path,loader:e.props.loader,action:e.props.action,errorElement:e.props.errorElement,ErrorBoundary:e.props.ErrorBoundary,hasErrorBoundary:null!=e.props.ErrorBoundary||null!=e.props.errorElement,shouldRevalidate:e.props.shouldRevalidate,handle:e.props.handle,lazy:e.props.lazy};e.props.children&&(o.children=ve(e.props.children,s)),n.push(o)}),n}new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);try{window.__reactRouterVersion="6"}catch(nz){}new Map;const ye=s.startTransition;l.flushSync,s.useId;function _e(e){let{basename:t,children:n,future:i,window:s}=e,o=r.useRef();null==o.current&&(o.current=function(e){return void 0===e&&(e={}),v(function(e,t){let{pathname:n,search:i,hash:r}=e.location;return f("",{pathname:n,search:i,hash:r},t.state&&t.state.usr||null,t.state&&t.state.key||"default")},function(e,t){return"string"===typeof t?t:g(t)},null,e)}({window:s,v5Compat:!0}));let a=o.current,[l,c]=r.useState({action:a.action,location:a.location}),{v7_startTransition:u}=i||{},h=r.useCallback(e=>{u&&ye?ye(()=>c(e)):c(e)},[c,u]);return r.useLayoutEffect(()=>a.listen(h),[a,h]),r.createElement(ge,{basename:t,children:n,location:l.location,navigationType:l.action,navigator:a,future:i})}"undefined"!==typeof window&&"undefined"!==typeof window.document&&window.document.createElement;var we,be;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmit="useSubmit",e.UseSubmitFetcher="useSubmitFetcher",e.UseFetcher="useFetcher",e.useViewTransitionState="useViewTransitionState"})(we||(we={})),function(e){e.UseFetcher="useFetcher",e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"}(be||(be={}));const xe=!1,ke=!1,Ee="${JSCORE_VERSION}",Ce=function(e,t){if(!e)throw Se(t)},Se=function(e){return new Error("Firebase Database ("+Ee+") INTERNAL ASSERT FAILED: "+e)},Ae=function(e){const t=[];let n=0;for(let i=0;i<e.length;i++){let r=e.charCodeAt(i);r<128?t[n++]=r:r<2048?(t[n++]=r>>6|192,t[n++]=63&r|128):55296===(64512&r)&&i+1<e.length&&56320===(64512&e.charCodeAt(i+1))?(r=65536+((1023&r)<<10)+(1023&e.charCodeAt(++i)),t[n++]=r>>18|240,t[n++]=r>>12&63|128,t[n++]=r>>6&63|128,t[n++]=63&r|128):(t[n++]=r>>12|224,t[n++]=r>>6&63|128,t[n++]=63&r|128)}return t},Te={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"===typeof atob,encodeByteArray(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[];for(let r=0;r<e.length;r+=3){const t=e[r],s=r+1<e.length,o=s?e[r+1]:0,a=r+2<e.length,l=a?e[r+2]:0,c=t>>2,u=(3&t)<<4|o>>4;let h=(15&o)<<2|l>>6,d=63&l;a||(d=64,s||(h=64)),i.push(n[c],n[u],n[h],n[d])}return i.join("")},encodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(Ae(e),t)},decodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):function(e){const t=[];let n=0,i=0;for(;n<e.length;){const r=e[n++];if(r<128)t[i++]=String.fromCharCode(r);else if(r>191&&r<224){const s=e[n++];t[i++]=String.fromCharCode((31&r)<<6|63&s)}else if(r>239&&r<365){const s=((7&r)<<18|(63&e[n++])<<12|(63&e[n++])<<6|63&e[n++])-65536;t[i++]=String.fromCharCode(55296+(s>>10)),t[i++]=String.fromCharCode(56320+(1023&s))}else{const s=e[n++],o=e[n++];t[i++]=String.fromCharCode((15&r)<<12|(63&s)<<6|63&o)}}return t.join("")}(this.decodeStringToByteArray(e,t))},decodeStringToByteArray(e,t){this.init_();const n=t?this.charToByteMapWebSafe_:this.charToByteMap_,i=[];for(let r=0;r<e.length;){const t=n[e.charAt(r++)],s=r<e.length?n[e.charAt(r)]:0;++r;const o=r<e.length?n[e.charAt(r)]:64;++r;const a=r<e.length?n[e.charAt(r)]:64;if(++r,null==t||null==s||null==o||null==a)throw new Pe;const l=t<<2|s>>4;if(i.push(l),64!==o){const e=s<<4&240|o>>2;if(i.push(e),64!==a){const e=o<<6&192|a;i.push(e)}}}return i},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}};class Pe extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const Ie=function(e){const t=Ae(e);return Te.encodeByteArray(t,!0)},Re=function(e){return Ie(e).replace(/\./g,"")},Me=function(e){try{return Te.decodeString(e,!0)}catch(nz){console.error("base64Decode failed: ",nz)}return null};function Ne(e){return De(void 0,e)}function De(e,t){if(!(t instanceof Object))return t;switch(t.constructor){case Date:return new Date(t.getTime());case Object:void 0===e&&(e={});break;case Array:e=[];break;default:return t}for(const n in t)t.hasOwnProperty(n)&&Oe(n)&&(e[n]=De(e[n],t[n]));return e}function Oe(e){return"__proto__"!==e}const Le=()=>function(){if("undefined"!==typeof self)return self;if("undefined"!==typeof window)return window;if("undefined"!==typeof n.g)return n.g;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__,Fe=()=>{try{return Le()||(()=>{if("undefined"===typeof process)return;const e={NODE_ENV:"production",PUBLIC_URL:"/read-pdf-by-page",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_FIREBASE_API_KEY:"AIzaSyBKA2ype48tLbkfy_qV29amJ_RMpONpUwg",REACT_APP_FIREBASE_APP_ID:"1:564116137461:web:e8247258126be9fb612cbc",REACT_APP_FIREBASE_AUTH_DOMAIN:"read-pdf-by-page.firebaseapp.com",REACT_APP_FIREBASE_MESSAGING_SENDER_ID:"564116137461",REACT_APP_FIREBASE_PROJECT_ID:"read-pdf-by-page",REACT_APP_FIREBASE_REALTIME_REFERENCE_URL:"https://read-pdf-by-page-default-rtdb.firebaseio.com",REACT_APP_FIREBASE_STORAGE_BUCKET:"read-pdf-by-page.appspot.com"}.__FIREBASE_DEFAULTS__;return e?JSON.parse(e):void 0})()||(()=>{if("undefined"===typeof document)return;let e;try{e=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch(nz){return}const t=e&&Me(e[1]);return t&&JSON.parse(t)})()}catch(nz){return void console.info("Unable to get __FIREBASE_DEFAULTS__ due to: ".concat(nz))}},je=e=>{var t,n;return null===(n=null===(t=Fe())||void 0===t?void 0:t.emulatorHosts)||void 0===n?void 0:n[e]},Be=e=>{const t=je(e);if(!t)return;const n=t.lastIndexOf(":");if(n<=0||n+1===t.length)throw new Error("Invalid host ".concat(t," with no separate hostname and port!"));const i=parseInt(t.substring(n+1),10);return"["===t[0]?[t.substring(1,n-1),i]:[t.substring(0,n),i]},We=()=>{var e;return null===(e=Fe())||void 0===e?void 0:e.config},Ue=e=>{var t;return null===(t=Fe())||void 0===t?void 0:t["_".concat(e)]};class ze{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,n)=>{t?this.reject(t):this.resolve(n),"function"===typeof e&&(this.promise.catch(()=>{}),1===e.length?e(t):e(t,n))}}}function He(e,t){if(e.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n=t||"demo-project",i=e.iat||0,r=e.sub||e.user_id;if(!r)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const s=Object.assign({iss:"https://securetoken.google.com/".concat(n),aud:n,iat:i,exp:i+3600,auth_time:i,sub:r,user_id:r,firebase:{sign_in_provider:"custom",identities:{}}},e);return[Re(JSON.stringify({alg:"none",type:"JWT"})),Re(JSON.stringify(s)),""].join(".")}function Ve(){return"undefined"!==typeof navigator&&"string"===typeof navigator.userAgent?navigator.userAgent:""}function qe(){return"undefined"!==typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Ve())}function Ge(){return"object"===typeof navigator&&"ReactNative"===navigator.product}function Ke(){return!0===xe||!0===ke}class Ye extends Error{constructor(e,t,n){super(t),this.code=e,this.customData=n,this.name="FirebaseError",Object.setPrototypeOf(this,Ye.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Xe.prototype.create)}}class Xe{constructor(e,t,n){this.service=e,this.serviceName=t,this.errors=n}create(e){const t=(arguments.length<=1?void 0:arguments[1])||{},n="".concat(this.service,"/").concat(e),i=this.errors[e],r=i?function(e,t){return e.replace(Qe,(e,n)=>{const i=t[n];return null!=i?String(i):"<".concat(n,"?>")})}(i,t):"Error",s="".concat(this.serviceName,": ").concat(r," (").concat(n,").");return new Ye(n,s,t)}}const Qe=/\{\$([^}]+)}/g;function $e(e){return JSON.parse(e)}function Je(e){return JSON.stringify(e)}const Ze=function(e){let t={},n={},i={},r="";try{const s=e.split(".");t=$e(Me(s[0])||""),n=$e(Me(s[1])||""),r=s[2],i=n.d||{},delete n.d}catch(nz){}return{header:t,claims:n,data:i,signature:r}};function et(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function tt(e,t){return Object.prototype.hasOwnProperty.call(e,t)?e[t]:void 0}function nt(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}function it(e,t,n){const i={};for(const r in e)Object.prototype.hasOwnProperty.call(e,r)&&(i[r]=t.call(n,e[r],r,e));return i}function rt(e,t){if(e===t)return!0;const n=Object.keys(e),i=Object.keys(t);for(const r of n){if(!i.includes(r))return!1;const n=e[r],s=t[r];if(st(n)&&st(s)){if(!rt(n,s))return!1}else if(n!==s)return!1}for(const r of i)if(!n.includes(r))return!1;return!0}function st(e){return null!==e&&"object"===typeof e}function ot(e){const t=[];for(const[n,i]of Object.entries(e))Array.isArray(i)?i.forEach(e=>{t.push(encodeURIComponent(n)+"="+encodeURIComponent(e))}):t.push(encodeURIComponent(n)+"="+encodeURIComponent(i));return t.length?"&"+t.join("&"):""}function at(e){const t={};return e.replace(/^\?/,"").split("&").forEach(e=>{if(e){const[n,i]=e.split("=");t[decodeURIComponent(n)]=decodeURIComponent(i)}}),t}function lt(e){const t=e.indexOf("?");if(!t)return"";const n=e.indexOf("#",t);return e.substring(t,n>0?n:void 0)}class ct{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(let e=1;e<this.blockSize;++e)this.pad_[e]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(e,t){t||(t=0);const n=this.W_;if("string"===typeof e)for(let u=0;u<16;u++)n[u]=e.charCodeAt(t)<<24|e.charCodeAt(t+1)<<16|e.charCodeAt(t+2)<<8|e.charCodeAt(t+3),t+=4;else for(let u=0;u<16;u++)n[u]=e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3],t+=4;for(let u=16;u<80;u++){const e=n[u-3]^n[u-8]^n[u-14]^n[u-16];n[u]=4294967295&(e<<1|e>>>31)}let i,r,s=this.chain_[0],o=this.chain_[1],a=this.chain_[2],l=this.chain_[3],c=this.chain_[4];for(let u=0;u<80;u++){u<40?u<20?(i=l^o&(a^l),r=1518500249):(i=o^a^l,r=1859775393):u<60?(i=o&a|l&(o|a),r=2400959708):(i=o^a^l,r=3395469782);const e=(s<<5|s>>>27)+i+c+r+n[u]&4294967295;c=l,l=a,a=4294967295&(o<<30|o>>>2),o=s,s=e}this.chain_[0]=this.chain_[0]+s&4294967295,this.chain_[1]=this.chain_[1]+o&4294967295,this.chain_[2]=this.chain_[2]+a&4294967295,this.chain_[3]=this.chain_[3]+l&4294967295,this.chain_[4]=this.chain_[4]+c&4294967295}update(e,t){if(null==e)return;void 0===t&&(t=e.length);const n=t-this.blockSize;let i=0;const r=this.buf_;let s=this.inbuf_;for(;i<t;){if(0===s)for(;i<=n;)this.compress_(e,i),i+=this.blockSize;if("string"===typeof e){for(;i<t;)if(r[s]=e.charCodeAt(i),++s,++i,s===this.blockSize){this.compress_(r),s=0;break}}else for(;i<t;)if(r[s]=e[i],++s,++i,s===this.blockSize){this.compress_(r),s=0;break}}this.inbuf_=s,this.total_+=t}digest(){const e=[];let t=8*this.total_;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(let i=this.blockSize-1;i>=56;i--)this.buf_[i]=255&t,t/=256;this.compress_(this.buf_);let n=0;for(let i=0;i<5;i++)for(let t=24;t>=0;t-=8)e[n]=this.chain_[i]>>t&255,++n;return e}}class ut{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(e=>{this.error(e)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,n){let i;if(void 0===e&&void 0===t&&void 0===n)throw new Error("Missing Observer.");i=function(e,t){if("object"!==typeof e||null===e)return!1;for(const n of t)if(n in e&&"function"===typeof e[n])return!0;return!1}(e,["next","error","complete"])?e:{next:e,error:t,complete:n},void 0===i.next&&(i.next=ht),void 0===i.error&&(i.error=ht),void 0===i.complete&&(i.complete=ht);const r=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch(nz){}}),this.observers.push(i),r}unsubscribeOne(e){void 0!==this.observers&&void 0!==this.observers[e]&&(delete this.observers[e],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[e])try{t(this.observers[e])}catch(nz){"undefined"!==typeof console&&console.error&&console.error(nz)}})}close(e){this.finalized||(this.finalized=!0,void 0!==e&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function ht(){}function dt(e,t){return"".concat(e," failed: ").concat(t," argument ")}const pt=function(e){let t=0;for(let n=0;n<e.length;n++){const i=e.charCodeAt(n);i<128?t++:i<2048?t+=2:i>=55296&&i<=56319?(t+=4,n++):t+=3}return t};function ft(e){return e&&e._delegate?e._delegate:e}class gt{constructor(e,t,n){this.name=e,this.instanceFactory=t,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}const mt="[DEFAULT]";class vt{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const e=new ze;if(this.instancesDeferred.set(t,e),this.isInitialized(t)||this.shouldAutoInitialize())try{const n=this.getOrInitializeService({instanceIdentifier:t});n&&e.resolve(n)}catch(nz){}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;const n=this.normalizeInstanceIdentifier(null===e||void 0===e?void 0:e.identifier),i=null!==(t=null===e||void 0===e?void 0:e.optional)&&void 0!==t&&t;if(!this.isInitialized(n)&&!this.shouldAutoInitialize()){if(i)return null;throw Error("Service ".concat(this.name," is not available"))}try{return this.getOrInitializeService({instanceIdentifier:n})}catch(nz){if(i)return null;throw nz}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error("Mismatching Component ".concat(e.name," for Provider ").concat(this.name,"."));if(this.component)throw Error("Component for ".concat(this.name," has already been provided"));if(this.component=e,this.shouldAutoInitialize()){if(function(e){return"EAGER"===e.instantiationMode}(e))try{this.getOrInitializeService({instanceIdentifier:mt})}catch(nz){}for(const[e,t]of this.instancesDeferred.entries()){const n=this.normalizeInstanceIdentifier(e);try{const e=this.getOrInitializeService({instanceIdentifier:n});t.resolve(e)}catch(nz){}}}}clearInstance(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:mt;this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(e=>"INTERNAL"in e).map(e=>e.INTERNAL.delete()),...e.filter(e=>"_delete"in e).map(e=>e._delete())])}isComponentSet(){return null!=this.component}isInitialized(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:mt;return this.instances.has(e)}getOptions(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:mt;return this.instancesOptions.get(e)||{}}initialize(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{options:t={}}=e,n=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(n))throw Error("".concat(this.name,"(").concat(n,") has already been initialized"));if(!this.isComponentSet())throw Error("Component ".concat(this.name," has not been registered yet"));const i=this.getOrInitializeService({instanceIdentifier:n,options:t});for(const[r,s]of this.instancesDeferred.entries()){n===this.normalizeInstanceIdentifier(r)&&s.resolve(i)}return i}onInit(e,t){var n;const i=this.normalizeInstanceIdentifier(t),r=null!==(n=this.onInitCallbacks.get(i))&&void 0!==n?n:new Set;r.add(e),this.onInitCallbacks.set(i,r);const s=this.instances.get(i);return s&&e(s,i),()=>{r.delete(e)}}invokeOnInitCallbacks(e,t){const n=this.onInitCallbacks.get(t);if(n)for(const r of n)try{r(e,t)}catch(i){}}getOrInitializeService(e){let{instanceIdentifier:t,options:n={}}=e,i=this.instances.get(t);if(!i&&this.component&&(i=this.component.instanceFactory(this.container,{instanceIdentifier:(r=t,r===mt?void 0:r),options:n}),this.instances.set(t,i),this.instancesOptions.set(t,n),this.invokeOnInitCallbacks(i,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,i)}catch(s){}var r;return i||null}normalizeInstanceIdentifier(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:mt;return this.component?this.component.multipleInstances?e:mt:e}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class yt{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error("Component ".concat(e.name," has already been registered with ").concat(this.name));t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new vt(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}const _t=[];var wt;!function(e){e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT"}(wt||(wt={}));const bt={debug:wt.DEBUG,verbose:wt.VERBOSE,info:wt.INFO,warn:wt.WARN,error:wt.ERROR,silent:wt.SILENT},xt=wt.INFO,kt={[wt.DEBUG]:"log",[wt.VERBOSE]:"log",[wt.INFO]:"info",[wt.WARN]:"warn",[wt.ERROR]:"error"},Et=function(e,t){if(t<e.logLevel)return;const n=(new Date).toISOString(),i=kt[t];if(!i)throw new Error("Attempted to log a message with an invalid logType (value: ".concat(t,")"));for(var r=arguments.length,s=new Array(r>2?r-2:0),o=2;o<r;o++)s[o-2]=arguments[o];console[i]("[".concat(n,"]  ").concat(e.name,":"),...s)};class Ct{constructor(e){this.name=e,this._logLevel=xt,this._logHandler=Et,this._userLogHandler=null,_t.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in wt))throw new TypeError('Invalid value "'.concat(e,'" assigned to `logLevel`'));this._logLevel=e}setLogLevel(e){this._logLevel="string"===typeof e?bt[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if("function"!==typeof e)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,wt.DEBUG,...t),this._logHandler(this,wt.DEBUG,...t)}log(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,wt.VERBOSE,...t),this._logHandler(this,wt.VERBOSE,...t)}info(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,wt.INFO,...t),this._logHandler(this,wt.INFO,...t)}warn(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,wt.WARN,...t),this._logHandler(this,wt.WARN,...t)}error(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,wt.ERROR,...t),this._logHandler(this,wt.ERROR,...t)}}function St(e){return St="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},St(e)}function At(e){var t=function(e,t){if("object"!=St(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t||"default");if("object"!=St(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==St(t)?t:t+""}function Tt(e,t,n){return(t=At(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Pt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,i)}return n}function It(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Pt(Object(n),!0).forEach(function(t){Tt(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Pt(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}let Rt,Mt;const Nt=new WeakMap,Dt=new WeakMap,Ot=new WeakMap,Lt=new WeakMap,Ft=new WeakMap;let jt={get(e,t,n){if(e instanceof IDBTransaction){if("done"===t)return Dt.get(e);if("objectStoreNames"===t)return e.objectStoreNames||Ot.get(e);if("store"===t)return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Ut(e[t])},set:(e,t,n)=>(e[t]=n,!0),has:(e,t)=>e instanceof IDBTransaction&&("done"===t||"store"===t)||t in e};function Bt(e){return e!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?(Mt||(Mt=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])).includes(e)?function(){for(var t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];return e.apply(zt(this),n),Ut(Nt.get(this))}:function(){for(var t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];return Ut(e.apply(zt(this),n))}:function(t){for(var n=arguments.length,i=new Array(n>1?n-1:0),r=1;r<n;r++)i[r-1]=arguments[r];const s=e.call(zt(this),t,...i);return Ot.set(s,t.sort?t.sort():[t]),Ut(s)}}function Wt(e){return"function"===typeof e?Bt(e):(e instanceof IDBTransaction&&function(e){if(Dt.has(e))return;const t=new Promise((t,n)=>{const i=()=>{e.removeEventListener("complete",r),e.removeEventListener("error",s),e.removeEventListener("abort",s)},r=()=>{t(),i()},s=()=>{n(e.error||new DOMException("AbortError","AbortError")),i()};e.addEventListener("complete",r),e.addEventListener("error",s),e.addEventListener("abort",s)});Dt.set(e,t)}(e),t=e,(Rt||(Rt=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])).some(e=>t instanceof e)?new Proxy(e,jt):e);var t}function Ut(e){if(e instanceof IDBRequest)return function(e){const t=new Promise((t,n)=>{const i=()=>{e.removeEventListener("success",r),e.removeEventListener("error",s)},r=()=>{t(Ut(e.result)),i()},s=()=>{n(e.error),i()};e.addEventListener("success",r),e.addEventListener("error",s)});return t.then(t=>{t instanceof IDBCursor&&Nt.set(t,e)}).catch(()=>{}),Ft.set(t,e),t}(e);if(Lt.has(e))return Lt.get(e);const t=Wt(e);return t!==e&&(Lt.set(e,t),Ft.set(t,e)),t}const zt=e=>Ft.get(e);const Ht=["get","getKey","getAll","getAllKeys","count"],Vt=["put","add","delete","clear"],qt=new Map;function Gt(e,t){if(!(e instanceof IDBDatabase)||t in e||"string"!==typeof t)return;if(qt.get(t))return qt.get(t);const n=t.replace(/FromIndex$/,""),i=t!==n,r=Vt.includes(n);if(!(n in(i?IDBIndex:IDBObjectStore).prototype)||!r&&!Ht.includes(n))return;const s=async function(e){const t=this.transaction(e,r?"readwrite":"readonly");let s=t.store;for(var o=arguments.length,a=new Array(o>1?o-1:0),l=1;l<o;l++)a[l-1]=arguments[l];return i&&(s=s.index(a.shift())),(await Promise.all([s[n](...a),r&&t.done]))[0]};return qt.set(t,s),s}jt=(e=>It(It({},e),{},{get:(t,n,i)=>Gt(t,n)||e.get(t,n,i),has:(t,n)=>!!Gt(t,n)||e.has(t,n)}))(jt);class Kt{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(e=>{if(function(e){const t=e.getComponent();return"VERSION"===(null===t||void 0===t?void 0:t.type)}(e)){const t=e.getImmediate();return"".concat(t.library,"/").concat(t.version)}return null}).filter(e=>e).join(" ")}}const Yt="@firebase/app",Xt="0.10.13",Qt=new Ct("@firebase/app"),$t="@firebase/app-compat",Jt="@firebase/analytics-compat",Zt="@firebase/analytics",en="@firebase/app-check-compat",tn="@firebase/app-check",nn="@firebase/auth",rn="@firebase/auth-compat",sn="@firebase/database",on="@firebase/data-connect",an="@firebase/database-compat",ln="@firebase/functions",cn="@firebase/functions-compat",un="@firebase/installations",hn="@firebase/installations-compat",dn="@firebase/messaging",pn="@firebase/messaging-compat",fn="@firebase/performance",gn="@firebase/performance-compat",mn="@firebase/remote-config",vn="@firebase/remote-config-compat",yn="@firebase/storage",_n="@firebase/storage-compat",wn="@firebase/firestore",bn="@firebase/vertexai-preview",xn="@firebase/firestore-compat",kn="firebase",En="[DEFAULT]",Cn={[Yt]:"fire-core",[$t]:"fire-core-compat",[Zt]:"fire-analytics",[Jt]:"fire-analytics-compat",[tn]:"fire-app-check",[en]:"fire-app-check-compat",[nn]:"fire-auth",[rn]:"fire-auth-compat",[sn]:"fire-rtdb",[on]:"fire-data-connect",[an]:"fire-rtdb-compat",[ln]:"fire-fn",[cn]:"fire-fn-compat",[un]:"fire-iid",[hn]:"fire-iid-compat",[dn]:"fire-fcm",[pn]:"fire-fcm-compat",[fn]:"fire-perf",[gn]:"fire-perf-compat",[mn]:"fire-rc",[vn]:"fire-rc-compat",[yn]:"fire-gcs",[_n]:"fire-gcs-compat",[wn]:"fire-fst",[xn]:"fire-fst-compat",[bn]:"fire-vertex","fire-js":"fire-js",[kn]:"fire-js-all"},Sn=new Map,An=new Map,Tn=new Map;function Pn(e,t){try{e.container.addComponent(t)}catch(nz){Qt.debug("Component ".concat(t.name," failed to register with FirebaseApp ").concat(e.name),nz)}}function In(e){const t=e.name;if(Tn.has(t))return Qt.debug("There were multiple attempts to register component ".concat(t,".")),!1;Tn.set(t,e);for(const n of Sn.values())Pn(n,e);for(const n of An.values())Pn(n,e);return!0}function Rn(e,t){const n=e.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),e.container.getProvider(t)}function Mn(e){return void 0!==e.settings}const Nn=new Xe("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."});class Dn{constructor(e,t,n){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=n,this.container.addComponent(new gt("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Nn.create("app-deleted",{appName:this._name})}}const On="10.14.1";function Ln(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e;if("object"!==typeof t){t={name:t}}const i=Object.assign({name:En,automaticDataCollectionEnabled:!1},t),r=i.name;if("string"!==typeof r||!r)throw Nn.create("bad-app-name",{appName:String(r)});if(n||(n=We()),!n)throw Nn.create("no-options");const s=Sn.get(r);if(s){if(rt(n,s.options)&&rt(i,s.config))return s;throw Nn.create("duplicate-app",{appName:r})}const o=new yt(r);for(const l of Tn.values())o.addComponent(l);const a=new Dn(n,i,o);return Sn.set(r,a),a}function Fn(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:En;const t=Sn.get(e);if(!t&&e===En&&We())return Ln();if(!t)throw Nn.create("no-app",{appName:e});return t}function jn(e,t,n){var i;let r=null!==(i=Cn[e])&&void 0!==i?i:e;n&&(r+="-".concat(n));const s=r.match(/\s|\//),o=t.match(/\s|\//);if(s||o){const e=['Unable to register library "'.concat(r,'" with version "').concat(t,'":')];return s&&e.push('library name "'.concat(r,'" contains illegal characters (whitespace or "/")')),s&&o&&e.push("and"),o&&e.push('version name "'.concat(t,'" contains illegal characters (whitespace or "/")')),void Qt.warn(e.join(" "))}In(new gt("".concat(r,"-version"),()=>({library:r,version:t}),"VERSION"))}const Bn="firebase-heartbeat-store";let Wn=null;function Un(){return Wn||(Wn=function(e,t){let{blocked:n,upgrade:i,blocking:r,terminated:s}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const o=indexedDB.open(e,t),a=Ut(o);return i&&o.addEventListener("upgradeneeded",e=>{i(Ut(o.result),e.oldVersion,e.newVersion,Ut(o.transaction),e)}),n&&o.addEventListener("blocked",e=>n(e.oldVersion,e.newVersion,e)),a.then(e=>{s&&e.addEventListener("close",()=>s()),r&&e.addEventListener("versionchange",e=>r(e.oldVersion,e.newVersion,e))}).catch(()=>{}),a}("firebase-heartbeat-database",1,{upgrade:(e,t)=>{if(0===t)try{e.createObjectStore(Bn)}catch(nz){console.warn(nz)}}}).catch(e=>{throw Nn.create("idb-open",{originalErrorMessage:e.message})})),Wn}async function zn(e,t){try{const n=(await Un()).transaction(Bn,"readwrite"),i=n.objectStore(Bn);await i.put(t,Hn(e)),await n.done}catch(nz){if(nz instanceof Ye)Qt.warn(nz.message);else{const t=Nn.create("idb-set",{originalErrorMessage:null===nz||void 0===nz?void 0:nz.message});Qt.warn(t.message)}}}function Hn(e){return"".concat(e.name,"!").concat(e.options.appId)}class Vn{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new Gn(t),this._heartbeatsCachePromise=this._storage.read().then(e=>(this._heartbeatsCache=e,e))}async triggerHeartbeat(){var e,t;try{const n=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),i=qn();if(null==(null===(e=this._heartbeatsCache)||void 0===e?void 0:e.heartbeats)&&(this._heartbeatsCache=await this._heartbeatsCachePromise,null==(null===(t=this._heartbeatsCache)||void 0===t?void 0:t.heartbeats)))return;if(this._heartbeatsCache.lastSentHeartbeatDate===i||this._heartbeatsCache.heartbeats.some(e=>e.date===i))return;return this._heartbeatsCache.heartbeats.push({date:i,agent:n}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(e=>{const t=new Date(e.date).valueOf();return Date.now()-t<=2592e6}),this._storage.overwrite(this._heartbeatsCache)}catch(nz){Qt.warn(nz)}}async getHeartbeatsHeader(){var e;try{if(null===this._heartbeatsCache&&await this._heartbeatsCachePromise,null==(null===(e=this._heartbeatsCache)||void 0===e?void 0:e.heartbeats)||0===this._heartbeatsCache.heartbeats.length)return"";const t=qn(),{heartbeatsToSend:n,unsentEntries:i}=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1024;const n=[];let i=e.slice();for(const r of e){const e=n.find(e=>e.agent===r.agent);if(e){if(e.dates.push(r.date),Kn(n)>t){e.dates.pop();break}}else if(n.push({agent:r.agent,dates:[r.date]}),Kn(n)>t){n.pop();break}i=i.slice(1)}return{heartbeatsToSend:n,unsentEntries:i}}(this._heartbeatsCache.heartbeats),r=Re(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=t,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),r}catch(nz){return Qt.warn(nz),""}}}function qn(){return(new Date).toISOString().substring(0,10)}class Gn{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return!!function(){try{return"object"===typeof indexedDB}catch(nz){return!1}}()&&new Promise((e,t)=>{try{let n=!0;const i="validate-browser-context-for-indexeddb-analytics-module",r=self.indexedDB.open(i);r.onsuccess=()=>{r.result.close(),n||self.indexedDB.deleteDatabase(i),e(!0)},r.onupgradeneeded=()=>{n=!1},r.onerror=()=>{var e;t((null===(e=r.error)||void 0===e?void 0:e.message)||"")}}catch(ml){t(ml)}}).then(()=>!0).catch(()=>!1)}async read(){if(await this._canUseIndexedDBPromise){const e=await async function(e){try{const t=(await Un()).transaction(Bn),n=await t.objectStore(Bn).get(Hn(e));return await t.done,n}catch(nz){if(nz instanceof Ye)Qt.warn(nz.message);else{const t=Nn.create("idb-get",{originalErrorMessage:null===nz||void 0===nz?void 0:nz.message});Qt.warn(t.message)}}}(this.app);return(null===e||void 0===e?void 0:e.heartbeats)?e:{heartbeats:[]}}return{heartbeats:[]}}async overwrite(e){var t;if(await this._canUseIndexedDBPromise){const n=await this.read();return zn(this.app,{lastSentHeartbeatDate:null!==(t=e.lastSentHeartbeatDate)&&void 0!==t?t:n.lastSentHeartbeatDate,heartbeats:e.heartbeats})}}async add(e){var t;if(await this._canUseIndexedDBPromise){const n=await this.read();return zn(this.app,{lastSentHeartbeatDate:null!==(t=e.lastSentHeartbeatDate)&&void 0!==t?t:n.lastSentHeartbeatDate,heartbeats:[...n.heartbeats,...e.heartbeats]})}}}function Kn(e){return Re(JSON.stringify({version:2,heartbeats:e})).length}var Yn;Yn="",In(new gt("platform-logger",e=>new Kt(e),"PRIVATE")),In(new gt("heartbeat",e=>new Vn(e),"PRIVATE")),jn(Yt,Xt,Yn),jn(Yt,Xt,"esm2017"),jn("fire-js","");jn("firebase","10.14.1","app");const Xn="firebasestorage.googleapis.com",Qn="storageBucket";class $n extends Ye{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;super(ei(e),"Firebase Storage: ".concat(t," (").concat(ei(e),")")),this.status_=n,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,$n.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return ei(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message="".concat(this._baseMessage,"\n").concat(this.customData.serverResponse):this.message=this._baseMessage}}var Jn,Zn;function ei(e){return"storage/"+e}function ti(){return new $n(Jn.UNKNOWN,"An unknown error occurred, please check the error payload for server response.")}function ni(){return new $n(Jn.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function ii(){return new $n(Jn.CANCELED,"User canceled the upload/download.")}function ri(){return new $n(Jn.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function si(e){return new $n(Jn.INVALID_ARGUMENT,e)}function oi(){return new $n(Jn.APP_DELETED,"The Firebase app was deleted.")}function ai(e,t){return new $n(Jn.INVALID_FORMAT,"String does not match format '"+e+"': "+t)}function li(e){throw new $n(Jn.INTERNAL_ERROR,"Internal error: "+e)}!function(e){e.UNKNOWN="unknown",e.OBJECT_NOT_FOUND="object-not-found",e.BUCKET_NOT_FOUND="bucket-not-found",e.PROJECT_NOT_FOUND="project-not-found",e.QUOTA_EXCEEDED="quota-exceeded",e.UNAUTHENTICATED="unauthenticated",e.UNAUTHORIZED="unauthorized",e.UNAUTHORIZED_APP="unauthorized-app",e.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",e.INVALID_CHECKSUM="invalid-checksum",e.CANCELED="canceled",e.INVALID_EVENT_NAME="invalid-event-name",e.INVALID_URL="invalid-url",e.INVALID_DEFAULT_BUCKET="invalid-default-bucket",e.NO_DEFAULT_BUCKET="no-default-bucket",e.CANNOT_SLICE_BLOB="cannot-slice-blob",e.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",e.NO_DOWNLOAD_URL="no-download-url",e.INVALID_ARGUMENT="invalid-argument",e.INVALID_ARGUMENT_COUNT="invalid-argument-count",e.APP_DELETED="app-deleted",e.INVALID_ROOT_OPERATION="invalid-root-operation",e.INVALID_FORMAT="invalid-format",e.INTERNAL_ERROR="internal-error",e.UNSUPPORTED_ENVIRONMENT="unsupported-environment"}(Jn||(Jn={}));class ci{constructor(e,t){this.bucket=e,this.path_=t}get path(){return this.path_}get isRoot(){return 0===this.path.length}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,t){let n;try{n=ci.makeFromUrl(e,t)}catch(nz){return new ci(e,"")}if(""===n.path)return n;throw i=e,new $n(Jn.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+i+"'.");var i}static makeFromUrl(e,t){let n=null;const i="([A-Za-z0-9.\\-_]+)";const r=new RegExp("^gs://"+i+"(/(.*))?$","i");function s(e){e.path_=decodeURIComponent(e.path)}const o=t.replace(/[.]/g,"\\."),a=[{regex:r,indices:{bucket:1,path:3},postModify:function(e){"/"===e.path.charAt(e.path.length-1)&&(e.path_=e.path_.slice(0,-1))}},{regex:new RegExp("^https?://".concat(o,"/").concat("v[A-Za-z0-9_]+","/b/").concat(i,"/o").concat("(/([^?#]*).*)?$"),"i"),indices:{bucket:1,path:3},postModify:s},{regex:new RegExp("^https?://".concat(t===Xn?"(?:storage.googleapis.com|storage.cloud.google.com)":t,"/").concat(i,"/").concat("([^?#]*)"),"i"),indices:{bucket:1,path:2},postModify:s}];for(let l=0;l<a.length;l++){const t=a[l],i=t.regex.exec(e);if(i){const e=i[t.indices.bucket];let r=i[t.indices.path];r||(r=""),n=new ci(e,r),t.postModify(n);break}}if(null==n)throw function(e){return new $n(Jn.INVALID_URL,"Invalid URL '"+e+"'.")}(e);return n}}class ui{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(){}}function hi(e){return"string"===typeof e||e instanceof String}function di(e){return pi()&&e instanceof Blob}function pi(){return"undefined"!==typeof Blob}function fi(e,t,n,i){if(i<t)throw si("Invalid value for '".concat(e,"'. Expected ").concat(t," or greater."));if(i>n)throw si("Invalid value for '".concat(e,"'. Expected ").concat(n," or less."))}function gi(e,t,n){let i=t;return null==n&&(i="https://".concat(t)),"".concat(n,"://").concat(i,"/v0").concat(e)}function mi(e){const t=encodeURIComponent;let n="?";for(const i in e)if(e.hasOwnProperty(i)){n=n+(t(i)+"="+t(e[i]))+"&"}return n=n.slice(0,-1),n}function vi(e,t){const n=e>=500&&e<600,i=-1!==[408,429].indexOf(e),r=-1!==t.indexOf(e);return n||i||r}!function(e){e[e.NO_ERROR=0]="NO_ERROR",e[e.NETWORK_ERROR=1]="NETWORK_ERROR",e[e.ABORT=2]="ABORT"}(Zn||(Zn={}));class yi{constructor(e,t,n,i,r,s,o,a,l,c,u){let h=!(arguments.length>11&&void 0!==arguments[11])||arguments[11];this.url_=e,this.method_=t,this.headers_=n,this.body_=i,this.successCodes_=r,this.additionalRetryCodes_=s,this.callback_=o,this.errorCallback_=a,this.timeout_=l,this.progressCallback_=c,this.connectionFactory_=u,this.retry=h,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((e,t)=>{this.resolve_=e,this.reject_=t,this.start_()})}start_(){const e=(e,t)=>{if(t)return void e(!1,new _i(!1,null,!0));const n=this.connectionFactory_();this.pendingConnection_=n;const i=e=>{const t=e.loaded,n=e.lengthComputable?e.total:-1;null!==this.progressCallback_&&this.progressCallback_(t,n)};null!==this.progressCallback_&&n.addUploadProgressListener(i),n.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{null!==this.progressCallback_&&n.removeUploadProgressListener(i),this.pendingConnection_=null;const t=n.getErrorCode()===Zn.NO_ERROR,r=n.getStatus();if(!t||vi(r,this.additionalRetryCodes_)&&this.retry){const t=n.getErrorCode()===Zn.ABORT;return void e(!1,new _i(!1,null,t))}const s=-1!==this.successCodes_.indexOf(r);e(!0,new _i(s,n))})},t=(e,t)=>{const n=this.resolve_,i=this.reject_,r=t.connection;if(t.wasSuccessCode)try{const e=this.callback_(r,r.getResponse());void 0!==e?n(e):n()}catch(nz){i(nz)}else if(null!==r){const e=ti();e.serverResponse=r.getErrorText(),this.errorCallback_?i(this.errorCallback_(r,e)):i(e)}else if(t.canceled){i(this.appDelete_?oi():ii())}else{i(ni())}};this.canceled_?t(0,new _i(!1,null,!0)):this.backoffId_=function(e,t,n){let i=1,r=null,s=null,o=!1,a=0;function l(){return 2===a}let c=!1;function u(){if(!c){c=!0;for(var e=arguments.length,n=new Array(e),i=0;i<e;i++)n[i]=arguments[i];t.apply(null,n)}}function h(t){r=setTimeout(()=>{r=null,e(p,l())},t)}function d(){s&&clearTimeout(s)}function p(e){if(c)return void d();for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];if(e)return d(),void u.call(null,e,...n);if(l()||o)return d(),void u.call(null,e,...n);let s;i<64&&(i*=2),1===a?(a=2,s=0):s=1e3*(i+Math.random()),h(s)}let f=!1;function g(e){f||(f=!0,d(),c||(null!==r?(e||(a=2),clearTimeout(r),h(0)):e||(a=1)))}return h(0),s=setTimeout(()=>{o=!0,g(!0)},n),g}(e,t,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,null!==this.backoffId_&&(0,this.backoffId_)(!1),null!==this.pendingConnection_&&this.pendingConnection_.abort()}}class _i{constructor(e,t,n){this.wasSuccessCode=e,this.connection=t,this.canceled=!!n}}function wi(){return"undefined"!==typeof BlobBuilder?BlobBuilder:"undefined"!==typeof WebKitBlobBuilder?WebKitBlobBuilder:void 0}function bi(){const e=wi();for(var t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];if(void 0!==e){const t=new e;for(let e=0;e<n.length;e++)t.append(n[e]);return t.getBlob()}if(pi())return new Blob(n);throw new $n(Jn.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}function xi(e){if("undefined"===typeof atob)throw t="base-64",new $n(Jn.UNSUPPORTED_ENVIRONMENT,"".concat(t," is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information."));var t;return atob(e)}const ki="raw",Ei="base64",Ci="base64url",Si="data_url";class Ai{constructor(e,t){this.data=e,this.contentType=t||null}}function Ti(e,t){switch(e){case ki:return new Ai(Pi(t));case Ei:case Ci:return new Ai(Ii(e,t));case Si:return new Ai(function(e){const t=new Ri(e);return t.base64?Ii(Ei,t.rest):function(e){let t;try{t=decodeURIComponent(e)}catch(nz){throw ai(Si,"Malformed data URL.")}return Pi(t)}(t.rest)}(t),new Ri(t).contentType)}throw ti()}function Pi(e){const t=[];for(let n=0;n<e.length;n++){let i=e.charCodeAt(n);if(i<=127)t.push(i);else if(i<=2047)t.push(192|i>>6,128|63&i);else if(55296===(64512&i)){if(n<e.length-1&&56320===(64512&e.charCodeAt(n+1))){i=65536|(1023&i)<<10|1023&e.charCodeAt(++n),t.push(240|i>>18,128|i>>12&63,128|i>>6&63,128|63&i)}else t.push(239,191,189)}else 56320===(64512&i)?t.push(239,191,189):t.push(224|i>>12,128|i>>6&63,128|63&i)}return new Uint8Array(t)}function Ii(e,t){switch(e){case Ei:{const n=-1!==t.indexOf("-"),i=-1!==t.indexOf("_");if(n||i){throw ai(e,"Invalid character '"+(n?"-":"_")+"' found: is it base64url encoded?")}break}case Ci:{const n=-1!==t.indexOf("+"),i=-1!==t.indexOf("/");if(n||i){throw ai(e,"Invalid character '"+(n?"+":"/")+"' found: is it base64 encoded?")}t=t.replace(/-/g,"+").replace(/_/g,"/");break}}let n;try{n=xi(t)}catch(nz){if(nz.message.includes("polyfill"))throw nz;throw ai(e,"Invalid character found")}const i=new Uint8Array(n.length);for(let r=0;r<n.length;r++)i[r]=n.charCodeAt(r);return i}class Ri{constructor(e){this.base64=!1,this.contentType=null;const t=e.match(/^data:([^,]+)?,/);if(null===t)throw ai(Si,"Must be formatted 'data:[<mediatype>][;base64],<data>");const n=t[1]||null;null!=n&&(this.base64=function(e,t){if(!(e.length>=t.length))return!1;return e.substring(e.length-t.length)===t}(n,";base64"),this.contentType=this.base64?n.substring(0,n.length-7):n),this.rest=e.substring(e.indexOf(",")+1)}}class Mi{constructor(e,t){let n=0,i="";di(e)?(this.data_=e,n=e.size,i=e.type):e instanceof ArrayBuffer?(t?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),n=this.data_.length):e instanceof Uint8Array&&(t?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),n=e.length),this.size_=n,this.type_=i}size(){return this.size_}type(){return this.type_}slice(e,t){if(di(this.data_)){const n=function(e,t,n){return e.webkitSlice?e.webkitSlice(t,n):e.mozSlice?e.mozSlice(t,n):e.slice?e.slice(t,n):null}(this.data_,e,t);return null===n?null:new Mi(n)}{const n=new Uint8Array(this.data_.buffer,e,t-e);return new Mi(n,!0)}}static getBlob(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];if(pi()){const e=t.map(e=>e instanceof Mi?e.data_:e);return new Mi(bi.apply(null,e))}{const e=t.map(e=>hi(e)?Ti(ki,e).data:e.data_);let n=0;e.forEach(e=>{n+=e.byteLength});const i=new Uint8Array(n);let r=0;return e.forEach(e=>{for(let t=0;t<e.length;t++)i[r++]=e[t]}),new Mi(i,!0)}}uploadData(){return this.data_}}function Ni(e){let t;try{t=JSON.parse(e)}catch(nz){return null}return"object"!==typeof(n=t)||Array.isArray(n)?null:t;var n}function Di(e){const t=e.lastIndexOf("/",e.length-2);return-1===t?e:e.slice(t+1)}function Oi(e,t){return t}class Li{constructor(e,t,n,i){this.server=e,this.local=t||e,this.writable=!!n,this.xform=i||Oi}}let Fi=null;function ji(){if(Fi)return Fi;const e=[];e.push(new Li("bucket")),e.push(new Li("generation")),e.push(new Li("metageneration")),e.push(new Li("name","fullPath",!0));const t=new Li("name");t.xform=function(e,t){return function(e){return!hi(e)||e.length<2?e:Di(e)}(t)},e.push(t);const n=new Li("size");return n.xform=function(e,t){return void 0!==t?Number(t):t},e.push(n),e.push(new Li("timeCreated")),e.push(new Li("updated")),e.push(new Li("md5Hash",null,!0)),e.push(new Li("cacheControl",null,!0)),e.push(new Li("contentDisposition",null,!0)),e.push(new Li("contentEncoding",null,!0)),e.push(new Li("contentLanguage",null,!0)),e.push(new Li("contentType",null,!0)),e.push(new Li("metadata","customMetadata",!0)),Fi=e,Fi}function Bi(e,t,n){const i={type:"file"},r=n.length;for(let s=0;s<r;s++){const e=n[s];i[e.local]=e.xform(i,t[e.server])}return function(e,t){Object.defineProperty(e,"ref",{get:function(){const n=e.bucket,i=e.fullPath,r=new ci(n,i);return t._makeStorageReference(r)}})}(i,e),i}function Wi(e,t,n){const i=Ni(t);if(null===i)return null;return Bi(e,i,n)}function Ui(e,t){const n={},i=t.length;for(let r=0;r<i;r++){const i=t[r];i.writable&&(n[i.server]=e[i.local])}return JSON.stringify(n)}class zi{constructor(e,t,n,i){this.url=e,this.method=t,this.handler=n,this.timeout=i,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}function Hi(e){if(!e)throw ti()}function Vi(e,t){return function(n,i){const r=Wi(e,i,t);return Hi(null!==r),r}}function qi(e,t){return function(n,i){const r=Wi(e,i,t);return Hi(null!==r),function(e,t,n,i){const r=Ni(t);if(null===r)return null;if(!hi(r.downloadTokens))return null;const s=r.downloadTokens;if(0===s.length)return null;const o=encodeURIComponent;return s.split(",").map(t=>{const r=e.bucket,s=e.fullPath;return gi("/b/"+o(r)+"/o/"+o(s),n,i)+mi({alt:"media",token:t})})[0]}(r,i,e.host,e._protocol)}}function Gi(e){return function(t,n){let i;var r,s;return 401===t.getStatus()?i=t.getErrorText().includes("Firebase App Check token is invalid")?new $n(Jn.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project."):new $n(Jn.UNAUTHENTICATED,"User is not authenticated, please authenticate using Firebase Authentication and try again."):402===t.getStatus()?(s=e.bucket,i=new $n(Jn.QUOTA_EXCEEDED,"Quota for bucket '"+s+"' exceeded, please view quota on https://firebase.google.com/pricing/.")):403===t.getStatus()?(r=e.path,i=new $n(Jn.UNAUTHORIZED,"User does not have permission to access '"+r+"'.")):i=n,i.status=t.getStatus(),i.serverResponse=n.serverResponse,i}}function Ki(e){const t=Gi(e);return function(n,i){let r=t(n,i);var s;return 404===n.getStatus()&&(s=e.path,r=new $n(Jn.OBJECT_NOT_FOUND,"Object '"+s+"' does not exist.")),r.serverResponse=i.serverResponse,r}}function Yi(e,t,n){const i=gi(t.fullServerUrl(),e.host,e._protocol),r=e.maxOperationRetryTime,s=new zi(i,"GET",Vi(e,n),r);return s.errorHandler=Ki(t),s}function Xi(e,t,n){const i=gi(t.fullServerUrl(),e.host,e._protocol)+"?alt=media",r=e.maxOperationRetryTime,s=new zi(i,"GET",(e,t)=>t,r);return s.errorHandler=Ki(t),void 0!==n&&(s.headers.Range="bytes=0-".concat(n),s.successCodes=[200,206]),s}function Qi(e,t,n){const i=Object.assign({},n);return i.fullPath=e.path,i.size=t.size(),i.contentType||(i.contentType=function(e,t){return e&&e.contentType||t&&t.type()||"application/octet-stream"}(null,t)),i}function $i(e,t,n,i,r){const s=t.bucketOnlyServerUrl(),o={"X-Goog-Upload-Protocol":"multipart"};const a=function(){let e="";for(let t=0;t<2;t++)e+=Math.random().toString().slice(2);return e}();o["Content-Type"]="multipart/related; boundary="+a;const l=Qi(t,i,r),c="--"+a+"\r\nContent-Type: application/json; charset=utf-8\r\n\r\n"+Ui(l,n)+"\r\n--"+a+"\r\nContent-Type: "+l.contentType+"\r\n\r\n",u="\r\n--"+a+"--",h=Mi.getBlob(c,i,u);if(null===h)throw ri();const d={name:l.fullPath},p=gi(s,e.host,e._protocol),f=e.maxUploadRetryTime,g=new zi(p,"POST",Vi(e,n),f);return g.urlParams=d,g.headers=o,g.body=h.uploadData(),g.errorHandler=Gi(t),g}class Ji{constructor(e,t,n,i){this.current=e,this.total=t,this.finalized=!!n,this.metadata=i||null}}function Zi(e,t){let n=null;try{n=e.getResponseHeader("X-Goog-Upload-Status")}catch(nz){Hi(!1)}return Hi(!!n&&-1!==(t||["active"]).indexOf(n)),n}const er=262144;function tr(e,t,n,i,r,s,o,a){const l=new Ji(0,0);if(o?(l.current=o.current,l.total=o.total):(l.current=0,l.total=i.size()),i.size()!==l.total)throw new $n(Jn.SERVER_FILE_WRONG_SIZE,"Server recorded incorrect upload file size, please retry the upload.");const c=l.total-l.current;let u=c;r>0&&(u=Math.min(u,r));const h=l.current,d=h+u;let p="";p=0===u?"finalize":c===u?"upload, finalize":"upload";const f={"X-Goog-Upload-Command":p,"X-Goog-Upload-Offset":"".concat(l.current)},g=i.slice(h,d);if(null===g)throw ri();const m=t.maxUploadRetryTime,v=new zi(n,"POST",function(e,n){const r=Zi(e,["active","final"]),o=l.current+u,a=i.size();let c;return c="final"===r?Vi(t,s)(e,n):null,new Ji(o,a,"final"===r,c)},m);return v.headers=f,v.body=g.uploadData(),v.progressCallback=a||null,v.errorHandler=Gi(e),v}const nr="running",ir="paused",rr="success",sr="canceled",or="error";function ar(e){switch(e){case"running":case"pausing":case"canceling":return nr;case"paused":return ir;case"success":return rr;case"canceled":return sr;default:return or}}class lr{constructor(e,t,n){if("function"===typeof e||null!=t||null!=n)this.next=e,this.error=null!==t&&void 0!==t?t:void 0,this.complete=null!==n&&void 0!==n?n:void 0;else{const t=e;this.next=t.next,this.error=t.error,this.complete=t.complete}}}function cr(e){return function(){for(var t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];Promise.resolve().then(()=>e(...n))}}class ur{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=Zn.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=Zn.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=Zn.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,t,n,i){if(this.sent_)throw li("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(t,e,!0),void 0!==i)for(const r in i)i.hasOwnProperty(r)&&this.xhr_.setRequestHeader(r,i[r].toString());return void 0!==n?this.xhr_.send(n):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw li("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw li("cannot .getStatus() before sending");try{return this.xhr_.status}catch(nz){return-1}}getResponse(){if(!this.sent_)throw li("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw li("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){null!=this.xhr_.upload&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){null!=this.xhr_.upload&&this.xhr_.upload.removeEventListener("progress",e)}}class hr extends ur{initXhr(){this.xhr_.responseType="text"}}function dr(){return new hr}class pr extends ur{initXhr(){this.xhr_.responseType="blob"}}function fr(){return new pr}class gr{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;this._transferred=0,this._needToFetchStatus=!1,this._needToFetchMetadata=!1,this._observers=[],this._error=void 0,this._uploadUrl=void 0,this._request=void 0,this._chunkMultiplier=1,this._resolve=void 0,this._reject=void 0,this._ref=e,this._blob=t,this._metadata=n,this._mappings=ji(),this._resumable=this._shouldDoResumable(this._blob),this._state="running",this._errorHandler=e=>{if(this._request=void 0,this._chunkMultiplier=1,e._codeEquals(Jn.CANCELED))this._needToFetchStatus=!0,this.completeTransitions_();else{const t=this.isExponentialBackoffExpired();if(vi(e.status,[])){if(!t)return this.sleepTime=Math.max(2*this.sleepTime,1e3),this._needToFetchStatus=!0,void this.completeTransitions_();e=ni()}this._error=e,this._transition("error")}},this._metadataErrorHandler=e=>{this._request=void 0,e._codeEquals(Jn.CANCELED)?this.completeTransitions_():(this._error=e,this._transition("error"))},this.sleepTime=0,this.maxSleepTime=this._ref.storage.maxUploadRetryTime,this._promise=new Promise((e,t)=>{this._resolve=e,this._reject=t,this._start()}),this._promise.then(null,()=>{})}isExponentialBackoffExpired(){return this.sleepTime>this.maxSleepTime}_makeProgressCallback(){const e=this._transferred;return t=>this._updateProgress(e+t)}_shouldDoResumable(e){return e.size()>262144}_start(){"running"===this._state&&void 0===this._request&&(this._resumable?void 0===this._uploadUrl?this._createResumable():this._needToFetchStatus?this._fetchStatus():this._needToFetchMetadata?this._fetchMetadata():this.pendingTimeout=setTimeout(()=>{this.pendingTimeout=void 0,this._continueUpload()},this.sleepTime):this._oneShotUpload())}_resolveToken(e){Promise.all([this._ref.storage._getAuthToken(),this._ref.storage._getAppCheckToken()]).then(t=>{let[n,i]=t;switch(this._state){case"running":e(n,i);break;case"canceling":this._transition("canceled");break;case"pausing":this._transition("paused")}})}_createResumable(){this._resolveToken((e,t)=>{const n=function(e,t,n,i,r){const s=t.bucketOnlyServerUrl(),o=Qi(t,i,r),a={name:o.fullPath},l=gi(s,e.host,e._protocol),c={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":"".concat(i.size()),"X-Goog-Upload-Header-Content-Type":o.contentType,"Content-Type":"application/json; charset=utf-8"},u=Ui(o,n),h=e.maxUploadRetryTime,d=new zi(l,"POST",function(e){let t;Zi(e);try{t=e.getResponseHeader("X-Goog-Upload-URL")}catch(nz){Hi(!1)}return Hi(hi(t)),t},h);return d.urlParams=a,d.headers=c,d.body=u,d.errorHandler=Gi(t),d}(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),i=this._ref.storage._makeRequest(n,dr,e,t);this._request=i,i.getPromise().then(e=>{this._request=void 0,this._uploadUrl=e,this._needToFetchStatus=!1,this.completeTransitions_()},this._errorHandler)})}_fetchStatus(){const e=this._uploadUrl;this._resolveToken((t,n)=>{const i=function(e,t,n,i){const r=e.maxUploadRetryTime,s=new zi(n,"POST",function(e){const t=Zi(e,["active","final"]);let n=null;try{n=e.getResponseHeader("X-Goog-Upload-Size-Received")}catch(nz){Hi(!1)}n||Hi(!1);const r=Number(n);return Hi(!isNaN(r)),new Ji(r,i.size(),"final"===t)},r);return s.headers={"X-Goog-Upload-Command":"query"},s.errorHandler=Gi(t),s}(this._ref.storage,this._ref._location,e,this._blob),r=this._ref.storage._makeRequest(i,dr,t,n);this._request=r,r.getPromise().then(e=>{this._request=void 0,this._updateProgress(e.current),this._needToFetchStatus=!1,e.finalized&&(this._needToFetchMetadata=!0),this.completeTransitions_()},this._errorHandler)})}_continueUpload(){const e=er*this._chunkMultiplier,t=new Ji(this._transferred,this._blob.size()),n=this._uploadUrl;this._resolveToken((i,r)=>{let s;try{s=tr(this._ref._location,this._ref.storage,n,this._blob,e,this._mappings,t,this._makeProgressCallback())}catch(nz){return this._error=nz,void this._transition("error")}const o=this._ref.storage._makeRequest(s,dr,i,r,!1);this._request=o,o.getPromise().then(e=>{this._increaseMultiplier(),this._request=void 0,this._updateProgress(e.current),e.finalized?(this._metadata=e.metadata,this._transition("success")):this.completeTransitions_()},this._errorHandler)})}_increaseMultiplier(){2*(er*this._chunkMultiplier)<33554432&&(this._chunkMultiplier*=2)}_fetchMetadata(){this._resolveToken((e,t)=>{const n=Yi(this._ref.storage,this._ref._location,this._mappings),i=this._ref.storage._makeRequest(n,dr,e,t);this._request=i,i.getPromise().then(e=>{this._request=void 0,this._metadata=e,this._transition("success")},this._metadataErrorHandler)})}_oneShotUpload(){this._resolveToken((e,t)=>{const n=$i(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),i=this._ref.storage._makeRequest(n,dr,e,t);this._request=i,i.getPromise().then(e=>{this._request=void 0,this._metadata=e,this._updateProgress(this._blob.size()),this._transition("success")},this._errorHandler)})}_updateProgress(e){const t=this._transferred;this._transferred=e,this._transferred!==t&&this._notifyObservers()}_transition(e){if(this._state!==e)switch(e){case"canceling":case"pausing":this._state=e,void 0!==this._request?this._request.cancel():this.pendingTimeout&&(clearTimeout(this.pendingTimeout),this.pendingTimeout=void 0,this.completeTransitions_());break;case"running":const t="paused"===this._state;this._state=e,t&&(this._notifyObservers(),this._start());break;case"paused":case"error":case"success":this._state=e,this._notifyObservers();break;case"canceled":this._error=ii(),this._state=e,this._notifyObservers()}}completeTransitions_(){switch(this._state){case"pausing":this._transition("paused");break;case"canceling":this._transition("canceled");break;case"running":this._start()}}get snapshot(){const e=ar(this._state);return{bytesTransferred:this._transferred,totalBytes:this._blob.size(),state:e,metadata:this._metadata,task:this,ref:this._ref}}on(e,t,n,i){const r=new lr(t||void 0,n||void 0,i||void 0);return this._addObserver(r),()=>{this._removeObserver(r)}}then(e,t){return this._promise.then(e,t)}catch(e){return this.then(null,e)}_addObserver(e){this._observers.push(e),this._notifyObserver(e)}_removeObserver(e){const t=this._observers.indexOf(e);-1!==t&&this._observers.splice(t,1)}_notifyObservers(){this._finishPromise();this._observers.slice().forEach(e=>{this._notifyObserver(e)})}_finishPromise(){if(void 0!==this._resolve){let e=!0;switch(ar(this._state)){case rr:cr(this._resolve.bind(null,this.snapshot))();break;case sr:case or:cr(this._reject.bind(null,this._error))();break;default:e=!1}e&&(this._resolve=void 0,this._reject=void 0)}}_notifyObserver(e){switch(ar(this._state)){case nr:case ir:e.next&&cr(e.next.bind(e,this.snapshot))();break;case rr:e.complete&&cr(e.complete.bind(e))();break;default:e.error&&cr(e.error.bind(e,this._error))()}}resume(){const e="paused"===this._state||"pausing"===this._state;return e&&this._transition("running"),e}pause(){const e="running"===this._state;return e&&this._transition("pausing"),e}cancel(){const e="running"===this._state||"pausing"===this._state;return e&&this._transition("canceling"),e}}class mr{constructor(e,t){this._service=e,this._location=t instanceof ci?t:ci.makeFromUrl(t,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,t){return new mr(e,t)}get root(){const e=new ci(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return Di(this._location.path)}get storage(){return this._service}get parent(){const e=function(e){if(0===e.length)return null;const t=e.lastIndexOf("/");return-1===t?"":e.slice(0,t)}(this._location.path);if(null===e)return null;const t=new ci(this._location.bucket,e);return new mr(this._service,t)}_throwIfRoot(e){if(""===this._location.path)throw function(e){return new $n(Jn.INVALID_ROOT_OPERATION,"The operation '"+e+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}(e)}}function vr(e){e._throwIfRoot("getDownloadURL");const t=function(e,t,n){const i=gi(t.fullServerUrl(),e.host,e._protocol),r=e.maxOperationRetryTime,s=new zi(i,"GET",qi(e,n),r);return s.errorHandler=Ki(t),s}(e.storage,e._location,ji());return e.storage.makeRequestWithTokens(t,dr).then(e=>{if(null===e)throw new $n(Jn.NO_DOWNLOAD_URL,"The given file does not have any download URLs.");return e})}function yr(e){e._throwIfRoot("deleteObject");const t=function(e,t){const n=gi(t.fullServerUrl(),e.host,e._protocol),i=e.maxOperationRetryTime,r=new zi(n,"DELETE",function(e,t){},i);return r.successCodes=[200,204],r.errorHandler=Ki(t),r}(e.storage,e._location);return e.storage.makeRequestWithTokens(t,dr)}function _r(e,t){const n=function(e,t){const n=t.split("/").filter(e=>e.length>0).join("/");return 0===e.length?n:e+"/"+n}(e._location.path,t),i=new ci(e._location.bucket,n);return new mr(e.storage,i)}function wr(e,t){if(e instanceof kr){const n=e;if(null==n._bucket)throw new $n(Jn.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+Qn+"' property when initializing the app?");const i=new mr(n,n._bucket);return null!=t?wr(i,t):i}return void 0!==t?_r(e,t):e}function br(e,t){if(t&&/^[A-Za-z]+:\/\//.test(t)){if(e instanceof kr)return new mr(e,t);throw si("To use ref(service, url), the first argument must be a Storage instance.")}return wr(e,t)}function xr(e,t){const n=null===t||void 0===t?void 0:t[Qn];return null==n?null:ci.makeFromBucketSpec(n,e)}class kr{constructor(e,t,n,i,r){this.app=e,this._authProvider=t,this._appCheckProvider=n,this._url=i,this._firebaseVersion=r,this._bucket=null,this._host=Xn,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=12e4,this._maxUploadRetryTime=6e5,this._requests=new Set,this._bucket=null!=i?ci.makeFromBucketSpec(i,this._host):xr(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,null!=this._url?this._bucket=ci.makeFromBucketSpec(this._url,e):this._bucket=xr(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){fi("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){fi("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const t=await e.getToken();if(null!==t)return t.accessToken}return null}async _getAppCheckToken(){const e=this._appCheckProvider.getImmediate({optional:!0});if(e){return(await e.getToken()).token}return null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new mr(this,e)}_makeRequest(e,t,n,i){let r=!(arguments.length>4&&void 0!==arguments[4])||arguments[4];if(this._deleted)return new ui(oi());{const s=function(e,t,n,i,r,s){let o=!(arguments.length>6&&void 0!==arguments[6])||arguments[6];const a=mi(e.urlParams),l=e.url+a,c=Object.assign({},e.headers);return function(e,t){t&&(e["X-Firebase-GMPID"]=t)}(c,t),function(e,t){null!==t&&t.length>0&&(e.Authorization="Firebase "+t)}(c,n),function(e,t){e["X-Firebase-Storage-Version"]="webjs/"+(null!==t&&void 0!==t?t:"AppManager")}(c,s),function(e,t){null!==t&&(e["X-Firebase-AppCheck"]=t)}(c,i),new yi(l,e.method,c,e.body,e.successCodes,e.additionalRetryCodes,e.handler,e.errorHandler,e.timeout,e.progressCallback,r,o)}(e,this._appId,n,i,t,this._firebaseVersion,r);return this._requests.add(s),s.getPromise().then(()=>this._requests.delete(s),()=>this._requests.delete(s)),s}}async makeRequestWithTokens(e,t){const[n,i]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,t,n,i).getPromise()}}const Er="@firebase/storage",Cr="0.13.2",Sr="storage";function Ar(e,t,n){return function(e,t,n){return e._throwIfRoot("uploadBytesResumable"),new gr(e,new Mi(t),n)}(e=ft(e),t,n)}function Tr(e,t){return br(e=ft(e),t)}function Pr(e,t){return function(e,t){e._throwIfRoot("getBlob");const n=Xi(e.storage,e._location,t);return e.storage.makeRequestWithTokens(n,fr).then(e=>void 0!==t?e.slice(0,t):e)}(e=ft(e),t)}function Ir(e,t){let{instanceIdentifier:n}=t;const i=e.getProvider("app").getImmediate(),r=e.getProvider("auth-internal"),s=e.getProvider("app-check-internal");return new kr(i,r,s,n,On)}In(new gt(Sr,Ir,"PUBLIC").setMultipleInstances(!0)),jn(Er,Cr,""),jn(Er,Cr,"esm2017");var Rr=function(){return Rr=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e},Rr.apply(this,arguments)};function Mr(e,t){var n={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(n[i]=e[i]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var r=0;for(i=Object.getOwnPropertySymbols(e);r<i.length;r++)t.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(e,i[r])&&(n[i[r]]=e[i[r]])}return n}Object.create;function Nr(e,t,n){if(n||2===arguments.length)for(var i,r=0,s=t.length;r<s;r++)!i&&r in t||(i||(i=Array.prototype.slice.call(t,0,r)),i[r]=t[r]);return e.concat(i||Array.prototype.slice.call(t))}Object.create;"function"===typeof SuppressedError&&SuppressedError;function Dr(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const Or=Dr,Lr=new Xe("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),Fr=new Ct("@firebase/auth");function jr(e){if(Fr.logLevel<=wt.ERROR){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];Fr.error("Auth (".concat(On,"): ").concat(e),...n)}}function Br(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];throw Vr(e,...n)}function Wr(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];return Vr(e,...n)}function Ur(e,t,n){const i=Object.assign(Object.assign({},Or()),{[t]:n});return new Xe("auth","Firebase",i).create(t,{appName:e.name})}function zr(e){return Ur(e,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Hr(e,t,n){if(!(t instanceof n))throw n.name!==t.constructor.name&&Br(e,"argument-error"),Ur(e,"argument-error","Type of ".concat(t.constructor.name," does not match expected instance.")+"Did you pass a reference from a different Auth SDK?")}function Vr(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];if("string"!==typeof e){const t=n[0],i=[...n.slice(1)];return i[0]&&(i[0].appName=e.name),e._errorFactory.create(t,...i)}return Lr.create(e,...n)}function qr(e,t){if(!e){for(var n=arguments.length,i=new Array(n>2?n-2:0),r=2;r<n;r++)i[r-2]=arguments[r];throw Vr(t,...i)}}function Gr(e){const t="INTERNAL ASSERTION FAILED: "+e;throw jr(t),new Error(t)}function Kr(e,t){e||Gr(t)}function Yr(){var e;return"undefined"!==typeof self&&(null===(e=self.location)||void 0===e?void 0:e.href)||""}function Xr(){return"http:"===Qr()||"https:"===Qr()}function Qr(){var e;return"undefined"!==typeof self&&(null===(e=self.location)||void 0===e?void 0:e.protocol)||null}function $r(){return!("undefined"!==typeof navigator&&navigator&&"onLine"in navigator&&"boolean"===typeof navigator.onLine&&(Xr()||function(){const e="object"===typeof chrome?chrome.runtime:"object"===typeof browser?browser.runtime:void 0;return"object"===typeof e&&void 0!==e.id}()||"connection"in navigator))||navigator.onLine}class Jr{constructor(e,t){this.shortDelay=e,this.longDelay=t,Kr(t>e,"Short delay should be less than long delay!"),this.isMobile=qe()||Ge()}get(){return $r()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function Zr(e,t){Kr(e.emulator,"Emulator should always be set here");const{url:n}=e.emulator;return t?"".concat(n).concat(t.startsWith("/")?t.slice(1):t):n}class es{static initialize(e,t,n){this.fetchImpl=e,t&&(this.headersImpl=t),n&&(this.responseImpl=n)}static fetch(){return this.fetchImpl?this.fetchImpl:"undefined"!==typeof self&&"fetch"in self?self.fetch:"undefined"!==typeof globalThis&&globalThis.fetch?globalThis.fetch:"undefined"!==typeof fetch?fetch:void Gr("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:"undefined"!==typeof self&&"Headers"in self?self.Headers:"undefined"!==typeof globalThis&&globalThis.Headers?globalThis.Headers:"undefined"!==typeof Headers?Headers:void Gr("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:"undefined"!==typeof self&&"Response"in self?self.Response:"undefined"!==typeof globalThis&&globalThis.Response?globalThis.Response:"undefined"!==typeof Response?Response:void Gr("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const ts={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"},ns=new Jr(3e4,6e4);function is(e,t){return e.tenantId&&!t.tenantId?Object.assign(Object.assign({},t),{tenantId:e.tenantId}):t}async function rs(e,t,n,i){return ss(e,arguments.length>4&&void 0!==arguments[4]?arguments[4]:{},async()=>{let r={},s={};i&&("GET"===t?s=i:r={body:JSON.stringify(i)});const o=ot(Object.assign({key:e.config.apiKey},s)).slice(1),a=await e._getAdditionalHeaders();a["Content-Type"]="application/json",e.languageCode&&(a["X-Firebase-Locale"]=e.languageCode);const l=Object.assign({method:t,headers:a},r);return"undefined"!==typeof navigator&&"Cloudflare-Workers"===navigator.userAgent||(l.referrerPolicy="no-referrer"),es.fetch()(as(e,e.config.apiHost,n,o),l)})}async function ss(e,t,n){e._canInitEmulator=!1;const i=Object.assign(Object.assign({},ts),t);try{const t=new cs(e),r=await Promise.race([n(),t.promise]);t.clearNetworkTimeout();const s=await r.json();if("needConfirmation"in s)throw us(e,"account-exists-with-different-credential",s);if(r.ok&&!("errorMessage"in s))return s;{const t=r.ok?s.errorMessage:s.error.message,[n,o]=t.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===n)throw us(e,"credential-already-in-use",s);if("EMAIL_EXISTS"===n)throw us(e,"email-already-in-use",s);if("USER_DISABLED"===n)throw us(e,"user-disabled",s);const a=i[n]||n.toLowerCase().replace(/[_\s]+/g,"-");if(o)throw Ur(e,a,o);Br(e,a)}}catch(nz){if(nz instanceof Ye)throw nz;Br(e,"network-request-failed",{message:String(nz)})}}async function os(e,t,n,i){let r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};const s=await rs(e,t,n,i,r);return"mfaPendingCredential"in s&&Br(e,"multi-factor-auth-required",{_serverResponse:s}),s}function as(e,t,n,i){const r="".concat(t).concat(n,"?").concat(i);return e.config.emulator?Zr(e.config,r):"".concat(e.config.apiScheme,"://").concat(r)}function ls(e){switch(e){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class cs{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((e,t)=>{this.timer=setTimeout(()=>t(Wr(this.auth,"network-request-failed")),ns.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function us(e,t,n){const i={appName:e.name};n.email&&(i.email=n.email),n.phoneNumber&&(i.phoneNumber=n.phoneNumber);const r=Wr(e,t,i);return r.customData._tokenResponse=n,r}function hs(e){return void 0!==e&&void 0!==e.enterprise}class ds{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],void 0===e.recaptchaKey)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||0===this.recaptchaEnforcementState.length)return null;for(const t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return ls(t.enforcementState);return null}isProviderEnabled(e){return"ENFORCE"===this.getProviderEnforcementState(e)||"AUDIT"===this.getProviderEnforcementState(e)}}async function ps(e,t){return rs(e,"GET","/v2/recaptchaConfig",is(e,t))}async function fs(e,t){return rs(e,"POST","/v1/accounts:lookup",t)}function gs(e){if(e)try{const t=new Date(Number(e));if(!isNaN(t.getTime()))return t.toUTCString()}catch(nz){}}function ms(e){return 1e3*Number(e)}function vs(e){const[t,n,i]=e.split(".");if(void 0===t||void 0===n||void 0===i)return jr("JWT malformed, contained fewer than 3 sections"),null;try{const e=Me(n);return e?JSON.parse(e):(jr("Failed to decode base64 JWT payload"),null)}catch(nz){return jr("Caught error parsing JWT payload as JSON",null===nz||void 0===nz?void 0:nz.toString()),null}}function ys(e){const t=vs(e);return qr(t,"internal-error"),qr("undefined"!==typeof t.exp,"internal-error"),qr("undefined"!==typeof t.iat,"internal-error"),Number(t.exp)-Number(t.iat)}async function _s(e,t){if(arguments.length>2&&void 0!==arguments[2]&&arguments[2])return t;try{return await t}catch(nz){throw nz instanceof Ye&&function(e){let{code:t}=e;return t==="auth/".concat("user-disabled")||t==="auth/".concat("user-token-expired")}(nz)&&e.auth.currentUser===e&&await e.auth.signOut(),nz}}class ws{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){const e=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),e}{this.errorBackoff=3e4;const e=(null!==(t=this.user.stsTokenManager.expirationTime)&&void 0!==t?t:0)-Date.now()-3e5;return Math.max(0,e)}}schedule(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(nz){return void((null===nz||void 0===nz?void 0:nz.code)==="auth/".concat("network-request-failed")&&this.schedule(!0))}this.schedule()}}class bs{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=gs(this.lastLoginAt),this.creationTime=gs(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}async function xs(e){var t;const n=e.auth,i=await e.getIdToken(),r=await _s(e,fs(n,{idToken:i}));qr(null===r||void 0===r?void 0:r.users.length,n,"internal-error");const s=r.users[0];e._notifyReloadListener(s);const o=(null===(t=s.providerUserInfo)||void 0===t?void 0:t.length)?ks(s.providerUserInfo):[],a=(l=e.providerData,c=o,[...l.filter(e=>!c.some(t=>t.providerId===e.providerId)),...c]);var l,c;const u=e.isAnonymous,h=!(e.email&&s.passwordHash)&&!(null===a||void 0===a?void 0:a.length),d=!!u&&h,p={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:a,metadata:new bs(s.createdAt,s.lastLoginAt),isAnonymous:d};Object.assign(e,p)}function ks(e){return e.map(e=>{var{providerId:t}=e,n=Mr(e,["providerId"]);return{providerId:t,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}})}class Es{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){qr(e.idToken,"internal-error"),qr("undefined"!==typeof e.idToken,"internal-error"),qr("undefined"!==typeof e.refreshToken,"internal-error");const t="expiresIn"in e&&"undefined"!==typeof e.expiresIn?Number(e.expiresIn):ys(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){qr(0!==e.length,"internal-error");const t=ys(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e){return arguments.length>1&&void 0!==arguments[1]&&arguments[1]||!this.accessToken||this.isExpired?(qr(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null):this.accessToken}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:n,refreshToken:i,expiresIn:r}=await async function(e,t){const n=await ss(e,{},async()=>{const n=ot({grant_type:"refresh_token",refresh_token:t}).slice(1),{tokenApiHost:i,apiKey:r}=e.config,s=as(e,i,"/v1/token","key=".concat(r)),o=await e._getAdditionalHeaders();return o["Content-Type"]="application/x-www-form-urlencoded",es.fetch()(s,{method:"POST",headers:o,body:n})});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}(e,t);this.updateTokensAndExpiration(n,i,Number(r))}updateTokensAndExpiration(e,t,n){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+1e3*n}static fromJSON(e,t){const{refreshToken:n,accessToken:i,expirationTime:r}=t,s=new Es;return n&&(qr("string"===typeof n,"internal-error",{appName:e}),s.refreshToken=n),i&&(qr("string"===typeof i,"internal-error",{appName:e}),s.accessToken=i),r&&(qr("number"===typeof r,"internal-error",{appName:e}),s.expirationTime=r),s}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Es,this.toJSON())}_performRefresh(){return Gr("not implemented")}}function Cs(e,t){qr("string"===typeof e||"undefined"===typeof e,"internal-error",{appName:t})}class Ss{constructor(e){var{uid:t,auth:n,stsTokenManager:i}=e,r=Mr(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new ws(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=n,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=r.displayName||null,this.email=r.email||null,this.emailVerified=r.emailVerified||!1,this.phoneNumber=r.phoneNumber||null,this.photoURL=r.photoURL||null,this.isAnonymous=r.isAnonymous||!1,this.tenantId=r.tenantId||null,this.providerData=r.providerData?[...r.providerData]:[],this.metadata=new bs(r.createdAt||void 0,r.lastLoginAt||void 0)}async getIdToken(e){const t=await _s(this,this.stsTokenManager.getToken(this.auth,e));return qr(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return async function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const n=ft(e),i=await n.getIdToken(t),r=vs(i);qr(r&&r.exp&&r.auth_time&&r.iat,n.auth,"internal-error");const s="object"===typeof r.firebase?r.firebase:void 0,o=null===s||void 0===s?void 0:s.sign_in_provider;return{claims:r,token:i,authTime:gs(ms(r.auth_time)),issuedAtTime:gs(ms(r.iat)),expirationTime:gs(ms(r.exp)),signInProvider:o||null,signInSecondFactor:(null===s||void 0===s?void 0:s.sign_in_second_factor)||null}}(this,e)}reload(){return async function(e){const t=ft(e);await xs(t),await t.auth._persistUserIfCurrent(t),t.auth._notifyListenersIfCurrent(t)}(this)}_assign(e){this!==e&&(qr(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(e=>Object.assign({},e)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new Ss(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){qr(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),n=!0),t&&await xs(this),await this.auth._persistUserIfCurrent(this),n&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Mn(this.auth.app))return Promise.reject(zr(this.auth));const e=await this.getIdToken();return await _s(this,async function(e,t){return rs(e,"POST","/v1/accounts:delete",t)}(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var n,i,r,s,o,a,l,c;const u=null!==(n=t.displayName)&&void 0!==n?n:void 0,h=null!==(i=t.email)&&void 0!==i?i:void 0,d=null!==(r=t.phoneNumber)&&void 0!==r?r:void 0,p=null!==(s=t.photoURL)&&void 0!==s?s:void 0,f=null!==(o=t.tenantId)&&void 0!==o?o:void 0,g=null!==(a=t._redirectEventId)&&void 0!==a?a:void 0,m=null!==(l=t.createdAt)&&void 0!==l?l:void 0,v=null!==(c=t.lastLoginAt)&&void 0!==c?c:void 0,{uid:y,emailVerified:_,isAnonymous:w,providerData:b,stsTokenManager:x}=t;qr(y&&x,e,"internal-error");const k=Es.fromJSON(this.name,x);qr("string"===typeof y,e,"internal-error"),Cs(u,e.name),Cs(h,e.name),qr("boolean"===typeof _,e,"internal-error"),qr("boolean"===typeof w,e,"internal-error"),Cs(d,e.name),Cs(p,e.name),Cs(f,e.name),Cs(g,e.name),Cs(m,e.name),Cs(v,e.name);const E=new Ss({uid:y,auth:e,email:h,emailVerified:_,displayName:u,isAnonymous:w,photoURL:p,phoneNumber:d,tenantId:f,stsTokenManager:k,createdAt:m,lastLoginAt:v});return b&&Array.isArray(b)&&(E.providerData=b.map(e=>Object.assign({},e))),g&&(E._redirectEventId=g),E}static async _fromIdTokenResponse(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const i=new Es;i.updateFromServerResponse(t);const r=new Ss({uid:t.localId,auth:e,stsTokenManager:i,isAnonymous:n});return await xs(r),r}static async _fromGetAccountInfoResponse(e,t,n){const i=t.users[0];qr(void 0!==i.localId,"internal-error");const r=void 0!==i.providerUserInfo?ks(i.providerUserInfo):[],s=!(i.email&&i.passwordHash)&&!(null===r||void 0===r?void 0:r.length),o=new Es;o.updateFromIdToken(n);const a=new Ss({uid:i.localId,auth:e,stsTokenManager:o,isAnonymous:s}),l={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:r,metadata:new bs(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!(null===r||void 0===r?void 0:r.length)};return Object.assign(a,l),a}}const As=new Map;function Ts(e){Kr(e instanceof Function,"Expected a class definition");let t=As.get(e);return t?(Kr(t instanceof e,"Instance stored in cache mismatched with class"),t):(t=new e,As.set(e,t),t)}class Ps{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return void 0===t?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}Ps.type="NONE";const Is=Ps;function Rs(e,t,n){return"firebase".concat(":",e,":").concat(t,":").concat(n)}class Ms{constructor(e,t,n){this.persistence=e,this.auth=t,this.userKey=n;const{config:i,name:r}=this.auth;this.fullUserKey=Rs(this.userKey,i.apiKey,r),this.fullPersistenceKey=Rs("persistence",i.apiKey,r),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?Ss._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();return await this.removeCurrentUser(),this.persistence=e,t?this.setCurrentUser(t):void 0}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"authUser";if(!t.length)return new Ms(Ts(Is),e,n);const i=(await Promise.all(t.map(async e=>{if(await e._isAvailable())return e}))).filter(e=>e);let r=i[0]||Ts(Is);const s=Rs(n,e.config.apiKey,e.name);let o=null;for(const c of t)try{const t=await c._get(s);if(t){const n=Ss._fromJSON(e,t);c!==r&&(o=n),r=c;break}}catch(l){}const a=i.filter(e=>e._shouldAllowMigration);return r._shouldAllowMigration&&a.length?(r=a[0],o&&await r._set(s,o.toJSON()),await Promise.all(t.map(async e=>{if(e!==r)try{await e._remove(s)}catch(l){}})),new Ms(r,e,n)):new Ms(r,e,n)}}function Ns(e){const t=e.toLowerCase();if(t.includes("opera/")||t.includes("opr/")||t.includes("opios/"))return"Opera";if(Fs(t))return"IEMobile";if(t.includes("msie")||t.includes("trident/"))return"IE";if(t.includes("edge/"))return"Edge";if(Ds(t))return"Firefox";if(t.includes("silk/"))return"Silk";if(Bs(t))return"Blackberry";if(Ws(t))return"Webos";if(Os(t))return"Safari";if((t.includes("chrome/")||Ls(t))&&!t.includes("edge/"))return"Chrome";if(js(t))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,n=e.match(t);if(2===(null===n||void 0===n?void 0:n.length))return n[1]}return"Other"}function Ds(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ve();return/firefox\//i.test(e)}function Os(){const e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ve()).toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function Ls(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ve();return/crios\//i.test(e)}function Fs(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ve();return/iemobile/i.test(e)}function js(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ve();return/android/i.test(e)}function Bs(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ve();return/blackberry/i.test(e)}function Ws(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ve();return/webos/i.test(e)}function Us(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ve();return/iphone|ipad|ipod/i.test(e)||/macintosh/i.test(e)&&/mobile/i.test(e)}function zs(){return function(){const e=Ve();return e.indexOf("MSIE ")>=0||e.indexOf("Trident/")>=0}()&&10===document.documentMode}function Hs(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ve();return Us(e)||js(e)||Ws(e)||Bs(e)||/windows phone/i.test(e)||Fs(e)}function Vs(e){let t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];switch(e){case"Browser":t=Ns(Ve());break;case"Worker":t="".concat(Ns(Ve()),"-").concat(e);break;default:t=e}const i=n.length?n.join(","):"FirebaseCore-web";return"".concat(t,"/","JsCore","/").concat(On,"/").concat(i)}class qs{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const n=t=>new Promise((n,i)=>{try{n(e(t))}catch(nz){i(nz)}});n.onAbort=t,this.queue.push(n);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const n of this.queue)await n(e),n.onAbort&&t.push(n.onAbort)}catch(nz){t.reverse();for(const i of t)try{i()}catch(n){}throw this.auth._errorFactory.create("login-blocked",{originalMessage:null===nz||void 0===nz?void 0:nz.message})}}}class Gs{constructor(e){var t,n,i,r;const s=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=null!==(t=s.minPasswordLength)&&void 0!==t?t:6,s.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=s.maxPasswordLength),void 0!==s.containsLowercaseCharacter&&(this.customStrengthOptions.containsLowercaseLetter=s.containsLowercaseCharacter),void 0!==s.containsUppercaseCharacter&&(this.customStrengthOptions.containsUppercaseLetter=s.containsUppercaseCharacter),void 0!==s.containsNumericCharacter&&(this.customStrengthOptions.containsNumericCharacter=s.containsNumericCharacter),void 0!==s.containsNonAlphanumericCharacter&&(this.customStrengthOptions.containsNonAlphanumericCharacter=s.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,"ENFORCEMENT_STATE_UNSPECIFIED"===this.enforcementState&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=null!==(i=null===(n=e.allowedNonAlphanumericCharacters)||void 0===n?void 0:n.join(""))&&void 0!==i?i:"",this.forceUpgradeOnSignin=null!==(r=e.forceUpgradeOnSignin)&&void 0!==r&&r,this.schemaVersion=e.schemaVersion}validatePassword(e){var t,n,i,r,s,o;const a={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,a),this.validatePasswordCharacterOptions(e,a),a.isValid&&(a.isValid=null===(t=a.meetsMinPasswordLength)||void 0===t||t),a.isValid&&(a.isValid=null===(n=a.meetsMaxPasswordLength)||void 0===n||n),a.isValid&&(a.isValid=null===(i=a.containsLowercaseLetter)||void 0===i||i),a.isValid&&(a.isValid=null===(r=a.containsUppercaseLetter)||void 0===r||r),a.isValid&&(a.isValid=null===(s=a.containsNumericCharacter)||void 0===s||s),a.isValid&&(a.isValid=null===(o=a.containsNonAlphanumericCharacter)||void 0===o||o),a}validatePasswordLengthOptions(e,t){const n=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;n&&(t.meetsMinPasswordLength=e.length>=n),i&&(t.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,t){let n;this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);for(let i=0;i<e.length;i++)n=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(t,n>="a"&&n<="z",n>="A"&&n<="Z",n>="0"&&n<="9",this.allowedNonAlphanumericCharacters.includes(n))}updatePasswordCharacterOptionsStatuses(e,t,n,i,r){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=n)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=r))}}class Ks{constructor(e,t,n,i){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=n,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Xs(this),this.idTokenSubscription=new Xs(this),this.beforeStateQueue=new qs(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Lr,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=Ts(t)),this._initializationPromise=this.queue(async()=>{var n,i;if(!this._deleted&&(this.persistenceManager=await Ms.create(this,e),!this._deleted)){if(null===(n=this._popupRedirectResolver)||void 0===n?void 0:n._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch(nz){}await this.initializeCurrentUser(t),this.lastNotifiedUid=(null===(i=this.currentUser)||void 0===i?void 0:i.uid)||null,this._deleted||(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();return this.currentUser||e?this.currentUser&&e&&this.currentUser.uid===e.uid?(this._currentUser._assign(e),void await this.currentUser.getIdToken()):void await this._updateCurrentUser(e,!0):void 0}async initializeCurrentUserFromIdToken(e){try{const t=await fs(this,{idToken:e}),n=await Ss._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(n)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var t;if(Mn(this.app)){const e=this.app.settings.authIdToken;return e?new Promise(t=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(e).then(t,t))}):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let i=n,r=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const n=null===(t=this.redirectUser)||void 0===t?void 0:t._redirectEventId,s=null===i||void 0===i?void 0:i._redirectEventId,o=await this.tryRedirectSignIn(e);n&&n!==s||!(null===o||void 0===o?void 0:o.user)||(i=o.user,r=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(r)try{await this.beforeStateQueue.runMiddleware(i)}catch(nz){i=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(nz))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return qr(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch(nz){await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await xs(e)}catch(nz){if((null===nz||void 0===nz?void 0:nz.code)!=="auth/".concat("network-request-failed"))return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=function(){if("undefined"===typeof navigator)return null;const e=navigator;return e.languages&&e.languages[0]||e.language||null}()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Mn(this.app))return Promise.reject(zr(this));const t=e?ft(e):null;return t&&qr(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!this._deleted)return e&&qr(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Mn(this.app)?Promise.reject(zr(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Mn(this.app)?Promise.reject(zr(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Ts(e))})}_getRecaptchaConfig(){return null==this.tenantId?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return null===this.tenantId?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await async function(e){return rs(e,"GET","/v2/passwordPolicy",is(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}))}(this),t=new Gs(e);null===this.tenantId?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new Xe("auth","Firebase",e())}onAuthStateChanged(e,t,n){return this.registerStateListener(this.authStateSubscription,e,t,n)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,n){return this.registerStateListener(this.idTokenSubscription,e,t,n)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const n=this.onAuthStateChanged(()=>{n(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:await this.currentUser.getIdToken()};null!=this.tenantId&&(t.tenantId=this.tenantId),await async function(e,t){return rs(e,"POST","/v2/accounts:revokeToken",is(e,t))}(this,t)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(e=this._currentUser)||void 0===e?void 0:e.toJSON()}}async _setRedirectUser(e,t){const n=await this.getOrInitRedirectPersistenceManager(t);return null===e?n.removeCurrentUser():n.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&Ts(e)||this._popupRedirectResolver;qr(t,this,"argument-error"),this.redirectPersistenceManager=await Ms.create(this,[Ts(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,n;return this._isInitialized&&await this.queue(async()=>{}),(null===(t=this._currentUser)||void 0===t?void 0:t._redirectEventId)===e?this._currentUser:(null===(n=this.redirectUser)||void 0===n?void 0:n._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return"".concat(this.config.authDomain,":").concat(this.config.apiKey,":").concat(this.name)}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const n=null!==(t=null===(e=this.currentUser)||void 0===e?void 0:e.uid)&&void 0!==t?t:null;this.lastNotifiedUid!==n&&(this.lastNotifiedUid=n,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,n,i){if(this._deleted)return()=>{};const r="function"===typeof t?t:t.next.bind(t);let s=!1;const o=this._isInitialized?Promise.resolve():this._initializationPromise;if(qr(o,this,"internal-error"),o.then(()=>{s||r(this.currentUser)}),"function"===typeof t){const r=e.addObserver(t,n,i);return()=>{s=!0,r()}}{const n=e.addObserver(t);return()=>{s=!0,n()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return qr(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){e&&!this.frameworks.includes(e)&&(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=Vs(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);const n=await(null===(e=this.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===e?void 0:e.getHeartbeatsHeader());n&&(t["X-Firebase-Client"]=n);const i=await this._getAppCheckToken();return i&&(t["X-Firebase-AppCheck"]=i),t}async _getAppCheckToken(){var e;const t=await(null===(e=this.appCheckServiceProvider.getImmediate({optional:!0}))||void 0===e?void 0:e.getToken());return(null===t||void 0===t?void 0:t.error)&&function(e){if(Fr.logLevel<=wt.WARN){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];Fr.warn("Auth (".concat(On,"): ").concat(e),...n)}}("Error while retrieving App Check token: ".concat(t.error)),null===t||void 0===t?void 0:t.token}}function Ys(e){return ft(e)}class Xs{constructor(e){this.auth=e,this.observer=null,this.addObserver=function(e,t){const n=new ut(e,t);return n.subscribe.bind(n)}(e=>this.observer=e)}get next(){return qr(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}let Qs={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function $s(e){return Qs.loadJS(e)}function Js(e){return"__".concat(e).concat(Math.floor(1e6*Math.random()))}class Zs{constructor(e){this.type="recaptcha-enterprise",this.auth=Ys(e)}async verify(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"verify",t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];function n(t,n,i){const r=window.grecaptcha;hs(r)?r.enterprise.ready(()=>{r.enterprise.execute(t,{action:e}).then(e=>{n(e)}).catch(()=>{n("NO_RECAPTCHA")})}):i(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((e,i)=>{(async function(e){if(!t){if(null==e.tenantId&&null!=e._agentRecaptchaConfig)return e._agentRecaptchaConfig.siteKey;if(null!=e.tenantId&&void 0!==e._tenantRecaptchaConfigs[e.tenantId])return e._tenantRecaptchaConfigs[e.tenantId].siteKey}return new Promise(async(t,n)=>{ps(e,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(i=>{if(void 0!==i.recaptchaKey){const n=new ds(i);return null==e.tenantId?e._agentRecaptchaConfig=n:e._tenantRecaptchaConfigs[e.tenantId]=n,t(n.siteKey)}n(new Error("recaptcha Enterprise site key undefined"))}).catch(e=>{n(e)})})})(this.auth).then(r=>{if(!t&&hs(window.grecaptcha))n(r,e,i);else{if("undefined"===typeof window)return void i(new Error("RecaptchaVerifier is only supported in browser"));let t=Qs.recaptchaEnterpriseScript;0!==t.length&&(t+=r),$s(t).then(()=>{n(r,e,i)}).catch(e=>{i(e)})}}).catch(e=>{i(e)})})}}async function eo(e,t,n){let i=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const r=new Zs(e);let s;try{s=await r.verify(n)}catch(ml){s=await r.verify(n,!0)}const o=Object.assign({},t);return i?Object.assign(o,{captchaResp:s}):Object.assign(o,{captchaResponse:s}),Object.assign(o,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(o,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),o}async function to(e,t,n,i){var r;if(null===(r=e._getRecaptchaConfig())||void 0===r?void 0:r.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const r=await eo(e,t,n,"getOobCode"===n);return i(e,r)}return i(e,t).catch(async r=>{if(r.code==="auth/".concat("missing-recaptcha-token")){console.log("".concat(n," is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow."));const r=await eo(e,t,n,"getOobCode"===n);return i(e,r)}return Promise.reject(r)})}function no(e,t,n){const i=Ys(e);qr(i._canInitEmulator,i,"emulator-config-failed"),qr(/^https?:\/\//.test(t),i,"invalid-emulator-scheme");const r=!!(null===n||void 0===n?void 0:n.disableWarnings),s=io(t),{host:o,port:a}=function(e){const t=io(e),n=/(\/\/)?([^?#/]+)/.exec(e.substr(t.length));if(!n)return{host:"",port:null};const i=n[2].split("@").pop()||"",r=/^(\[[^\]]+\])(:|$)/.exec(i);if(r){const e=r[1];return{host:e,port:ro(i.substr(e.length+1))}}{const[e,t]=i.split(":");return{host:e,port:ro(t)}}}(t),l=null===a?"":":".concat(a);i.config.emulator={url:"".concat(s,"//").concat(o).concat(l,"/")},i.settings.appVerificationDisabledForTesting=!0,i.emulatorConfig=Object.freeze({host:o,port:a,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:r})}),r||function(){function e(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}"undefined"!==typeof console&&"function"===typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials.");"undefined"!==typeof window&&"undefined"!==typeof document&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",e):e())}()}function io(e){const t=e.indexOf(":");return t<0?"":e.substr(0,t+1)}function ro(e){if(!e)return null;const t=Number(e);return isNaN(t)?null:t}class so{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return Gr("not implemented")}_getIdTokenResponse(e){return Gr("not implemented")}_linkToIdToken(e,t){return Gr("not implemented")}_getReauthenticationResolver(e){return Gr("not implemented")}}async function oo(e,t){return rs(e,"POST","/v1/accounts:signUp",t)}async function ao(e,t){return os(e,"POST","/v1/accounts:signInWithPassword",is(e,t))}class lo extends so{constructor(e,t,n){let i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;super("password",n),this._email=e,this._password=t,this._tenantId=i}static _fromEmailAndPassword(e,t){return new lo(e,t,"password")}static _fromEmailAndCode(e,t){return new lo(e,t,"emailLink",arguments.length>2&&void 0!==arguments[2]?arguments[2]:null)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t="string"===typeof e?JSON.parse(e):e;if((null===t||void 0===t?void 0:t.email)&&(null===t||void 0===t?void 0:t.password)){if("password"===t.signInMethod)return this._fromEmailAndPassword(t.email,t.password);if("emailLink"===t.signInMethod)return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":return to(e,{returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"},"signInWithPassword",ao);case"emailLink":return async function(e,t){return os(e,"POST","/v1/accounts:signInWithEmailLink",is(e,t))}(e,{email:this._email,oobCode:this._password});default:Br(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":return to(e,{idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",oo);case"emailLink":return async function(e,t){return os(e,"POST","/v1/accounts:signInWithEmailLink",is(e,t))}(e,{idToken:t,email:this._email,oobCode:this._password});default:Br(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}async function co(e,t){return os(e,"POST","/v1/accounts:signInWithIdp",is(e,t))}class uo extends so{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new uo(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):Br("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t="string"===typeof e?JSON.parse(e):e,{providerId:n,signInMethod:i}=t,r=Mr(t,["providerId","signInMethod"]);if(!n||!i)return null;const s=new uo(n,i);return s.idToken=r.idToken||void 0,s.accessToken=r.accessToken||void 0,s.secret=r.secret,s.nonce=r.nonce,s.pendingToken=r.pendingToken||null,s}_getIdTokenResponse(e){return co(e,this.buildRequest())}_linkToIdToken(e,t){const n=this.buildRequest();return n.idToken=t,co(e,n)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,co(e,t)}buildRequest(){const e={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=ot(t)}return e}}const ho={USER_NOT_FOUND:"user-not-found"};class po extends so{constructor(e){super("phone","phone"),this.params=e}static _fromVerification(e,t){return new po({verificationId:e,verificationCode:t})}static _fromTokenResponse(e,t){return new po({phoneNumber:e,temporaryProof:t})}_getIdTokenResponse(e){return async function(e,t){return os(e,"POST","/v1/accounts:signInWithPhoneNumber",is(e,t))}(e,this._makeVerificationRequest())}_linkToIdToken(e,t){return async function(e,t){const n=await os(e,"POST","/v1/accounts:signInWithPhoneNumber",is(e,t));if(n.temporaryProof)throw us(e,"account-exists-with-different-credential",n);return n}(e,Object.assign({idToken:t},this._makeVerificationRequest()))}_getReauthenticationResolver(e){return async function(e,t){return os(e,"POST","/v1/accounts:signInWithPhoneNumber",is(e,Object.assign(Object.assign({},t),{operation:"REAUTH"})),ho)}(e,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:e,phoneNumber:t,verificationId:n,verificationCode:i}=this.params;return e&&t?{temporaryProof:e,phoneNumber:t}:{sessionInfo:n,code:i}}toJSON(){const e={providerId:this.providerId};return this.params.phoneNumber&&(e.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(e.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(e.verificationCode=this.params.verificationCode),this.params.verificationId&&(e.verificationId=this.params.verificationId),e}static fromJSON(e){"string"===typeof e&&(e=JSON.parse(e));const{verificationId:t,verificationCode:n,phoneNumber:i,temporaryProof:r}=e;return n||t||i||r?new po({verificationId:t,verificationCode:n,phoneNumber:i,temporaryProof:r}):null}}class fo{constructor(e){var t,n,i,r,s,o;const a=at(lt(e)),l=null!==(t=a.apiKey)&&void 0!==t?t:null,c=null!==(n=a.oobCode)&&void 0!==n?n:null,u=function(e){switch(e){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(i=a.mode)&&void 0!==i?i:null);qr(l&&c&&u,"argument-error"),this.apiKey=l,this.operation=u,this.code=c,this.continueUrl=null!==(r=a.continueUrl)&&void 0!==r?r:null,this.languageCode=null!==(s=a.languageCode)&&void 0!==s?s:null,this.tenantId=null!==(o=a.tenantId)&&void 0!==o?o:null}static parseLink(e){const t=function(e){const t=at(lt(e)).link,n=t?at(lt(t)).deep_link_id:null,i=at(lt(e)).deep_link_id;return(i?at(lt(i)).link:null)||i||n||t||e}(e);try{return new fo(t)}catch(n){return null}}}class go{constructor(){this.providerId=go.PROVIDER_ID}static credential(e,t){return lo._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const n=fo.parseLink(t);return qr(n,"argument-error"),lo._fromEmailAndCode(e,n.code,n.tenantId)}}go.PROVIDER_ID="password",go.EMAIL_PASSWORD_SIGN_IN_METHOD="password",go.EMAIL_LINK_SIGN_IN_METHOD="emailLink";class mo{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}class vo extends mo{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class yo extends vo{constructor(){super("facebook.com")}static credential(e){return uo._fromParams({providerId:yo.PROVIDER_ID,signInMethod:yo.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return yo.credentialFromTaggedObject(e)}static credentialFromError(e){return yo.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t||!("oauthAccessToken"in t))return null;if(!t.oauthAccessToken)return null;try{return yo.credential(t.oauthAccessToken)}catch(n){return null}}}yo.FACEBOOK_SIGN_IN_METHOD="facebook.com",yo.PROVIDER_ID="facebook.com";class _o extends vo{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return uo._fromParams({providerId:_o.PROVIDER_ID,signInMethod:_o.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return _o.credentialFromTaggedObject(e)}static credentialFromError(e){return _o.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t)return null;const{oauthIdToken:n,oauthAccessToken:i}=t;if(!n&&!i)return null;try{return _o.credential(n,i)}catch(r){return null}}}_o.GOOGLE_SIGN_IN_METHOD="google.com",_o.PROVIDER_ID="google.com";class wo extends vo{constructor(){super("github.com")}static credential(e){return uo._fromParams({providerId:wo.PROVIDER_ID,signInMethod:wo.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return wo.credentialFromTaggedObject(e)}static credentialFromError(e){return wo.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t||!("oauthAccessToken"in t))return null;if(!t.oauthAccessToken)return null;try{return wo.credential(t.oauthAccessToken)}catch(n){return null}}}wo.GITHUB_SIGN_IN_METHOD="github.com",wo.PROVIDER_ID="github.com";class bo extends vo{constructor(){super("twitter.com")}static credential(e,t){return uo._fromParams({providerId:bo.PROVIDER_ID,signInMethod:bo.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return bo.credentialFromTaggedObject(e)}static credentialFromError(e){return bo.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t)return null;const{oauthAccessToken:n,oauthTokenSecret:i}=t;if(!n||!i)return null;try{return bo.credential(n,i)}catch(r){return null}}}bo.TWITTER_SIGN_IN_METHOD="twitter.com",bo.PROVIDER_ID="twitter.com";class xo{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,n){let i=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const r=await Ss._fromIdTokenResponse(e,n,i),s=ko(n);return new xo({user:r,providerId:s,_tokenResponse:n,operationType:t})}static async _forOperation(e,t,n){await e._updateTokensIfNecessary(n,!0);const i=ko(n);return new xo({user:e,providerId:i,_tokenResponse:n,operationType:t})}}function ko(e){return e.providerId?e.providerId:"phoneNumber"in e?"phone":null}class Eo extends Ye{constructor(e,t,n,i){var r;super(t.code,t.message),this.operationType=n,this.user=i,Object.setPrototypeOf(this,Eo.prototype),this.customData={appName:e.name,tenantId:null!==(r=e.tenantId)&&void 0!==r?r:void 0,_serverResponse:t.customData._serverResponse,operationType:n}}static _fromErrorAndOperation(e,t,n,i){return new Eo(e,t,n,i)}}function Co(e,t,n,i){return("reauthenticate"===t?n._getReauthenticationResolver(e):n._getIdTokenResponse(e)).catch(n=>{if(n.code==="auth/".concat("multi-factor-auth-required"))throw Eo._fromErrorAndOperation(e,n,t,i);throw n})}async function So(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const i=await _s(e,t._linkToIdToken(e.auth,await e.getIdToken()),n);return xo._forOperation(e,"link",i)}async function Ao(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const{auth:i}=e;if(Mn(i.app))return Promise.reject(zr(i));const r="reauthenticate";try{const s=await _s(e,Co(i,r,t,e),n);qr(s.idToken,i,"internal-error");const o=vs(s.idToken);qr(o,i,"internal-error");const{sub:a}=o;return qr(e.uid===a,i,"user-mismatch"),xo._forOperation(e,r,s)}catch(nz){throw(null===nz||void 0===nz?void 0:nz.code)==="auth/".concat("user-not-found")&&Br(i,"user-mismatch"),nz}}async function To(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(Mn(e.app))return Promise.reject(zr(e));const i="signIn",r=await Co(e,i,t),s=await xo._fromIdTokenResponse(e,i,r);return n||await e._updateCurrentUser(s.user),s}class Po{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};this.isNewUser=e,this.providerId=t,this.profile=n}}class Io extends Po{constructor(e,t,n,i){super(e,t,n),this.username=i}}class Ro extends Po{constructor(e,t){super(e,"facebook.com",t)}}class Mo extends Io{constructor(e,t){super(e,"github.com",t,"string"===typeof(null===t||void 0===t?void 0:t.login)?null===t||void 0===t?void 0:t.login:null)}}class No extends Po{constructor(e,t){super(e,"google.com",t)}}class Do extends Io{constructor(e,t,n){super(e,"twitter.com",t,n)}}function Oo(e){const{user:t,_tokenResponse:n}=e;return t.isAnonymous&&!n?{providerId:null,isNewUser:!1,profile:null}:function(e){var t,n;if(!e)return null;const{providerId:i}=e,r=e.rawUserInfo?JSON.parse(e.rawUserInfo):{},s=e.isNewUser||"identitytoolkit#SignupNewUserResponse"===e.kind;if(!i&&(null===e||void 0===e?void 0:e.idToken)){const i=null===(n=null===(t=vs(e.idToken))||void 0===t?void 0:t.firebase)||void 0===n?void 0:n.sign_in_provider;if(i)return new Po(s,"anonymous"!==i&&"custom"!==i?i:null)}if(!i)return null;switch(i){case"facebook.com":return new Ro(s,r);case"github.com":return new Mo(s,r);case"google.com":return new No(s,r);case"twitter.com":return new Do(s,r,e.screenName||null);case"custom":case"anonymous":return new Po(s,null);default:return new Po(s,i,r)}}(n)}new WeakMap;const Lo="__sak";class Fo{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(Lo,"1"),this.storage.removeItem(Lo),Promise.resolve(!0)):Promise.resolve(!1)}catch(e){return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}class jo extends Fo{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=Hs(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const n=this.storage.getItem(t),i=this.localCache[t];n!==i&&e(t,i,n)}}onStorageEvent(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!e.key)return void this.forAllChangedKeys((e,t,n)=>{this.notifyListeners(e,n)});const n=e.key;t?this.detachListener():this.stopPolling();const i=()=>{const e=this.storage.getItem(n);(t||this.localCache[n]!==e)&&this.notifyListeners(n,e)},r=this.storage.getItem(n);zs()&&r!==e.newValue&&e.newValue!==e.oldValue?setTimeout(i,10):i()}notifyListeners(e,t){this.localCache[e]=t;const n=this.listeners[e];if(n)for(const i of Array.from(n))i(t?JSON.parse(t):t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,n)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:n}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}jo.type="LOCAL";const Bo=jo;class Wo extends Fo{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}Wo.type="SESSION";const Uo=Wo;class zo{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(t=>t.isListeningto(e));if(t)return t;const n=new zo(e);return this.receivers.push(n),n}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:n,eventType:i,data:r}=t.data,s=this.handlersMap[i];if(!(null===s||void 0===s?void 0:s.size))return;t.ports[0].postMessage({status:"ack",eventId:n,eventType:i});const o=Array.from(s).map(async e=>e(t.origin,r)),a=await function(e){return Promise.all(e.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}(o);t.ports[0].postMessage({status:"done",eventId:n,eventType:i,response:a})}_subscribe(e,t){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),t&&0!==this.handlersMap[e].size||delete this.handlersMap[e],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}function Ho(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,n="";for(let i=0;i<t;i++)n+=Math.floor(10*Math.random());return e+n}zo.receivers=[];class Vo{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:50;const i="undefined"!==typeof MessageChannel?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let r,s;return new Promise((o,a)=>{const l=Ho("",20);i.port1.start();const c=setTimeout(()=>{a(new Error("unsupported_event"))},n);s={messageChannel:i,onMessage(e){const t=e;if(t.data.eventId===l)switch(t.data.status){case"ack":clearTimeout(c),r=setTimeout(()=>{a(new Error("timeout"))},3e3);break;case"done":clearTimeout(r),o(t.data.response);break;default:clearTimeout(c),clearTimeout(r),a(new Error("invalid_response"))}}},this.handlers.add(s),i.port1.addEventListener("message",s.onMessage),this.target.postMessage({eventType:e,eventId:l,data:t},[i.port2])}).finally(()=>{s&&this.removeMessageHandler(s)})}}function qo(){return window}function Go(){return"undefined"!==typeof qo().WorkerGlobalScope&&"function"===typeof qo().importScripts}const Ko="firebaseLocalStorageDb",Yo="firebaseLocalStorage",Xo="fbase_key";class Qo{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function $o(e,t){return e.transaction([Yo],t?"readwrite":"readonly").objectStore(Yo)}function Jo(){const e=indexedDB.open(Ko,1);return new Promise((t,n)=>{e.addEventListener("error",()=>{n(e.error)}),e.addEventListener("upgradeneeded",()=>{const t=e.result;try{t.createObjectStore(Yo,{keyPath:Xo})}catch(nz){n(nz)}}),e.addEventListener("success",async()=>{const n=e.result;n.objectStoreNames.contains(Yo)?t(n):(n.close(),await function(){const e=indexedDB.deleteDatabase(Ko);return new Qo(e).toPromise()}(),t(await Jo()))})})}async function Zo(e,t,n){const i=$o(e,!0).put({[Xo]:t,value:n});return new Qo(i).toPromise()}function ea(e,t){const n=$o(e,!0).delete(t);return new Qo(n).toPromise()}class ta{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db||(this.db=await Jo()),this.db}async _withRetries(e){let t=0;for(;;)try{const t=await this._openDb();return await e(t)}catch(nz){if(t++>3)throw nz;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return Go()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=zo._getInstance(Go()?self:null),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){var e,t;if(this.activeServiceWorker=await async function(){if(!(null===navigator||void 0===navigator?void 0:navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch(e){return null}}(),!this.activeServiceWorker)return;this.sender=new Vo(this.activeServiceWorker);const n=await this.sender._send("ping",{},800);n&&(null===(e=n[0])||void 0===e?void 0:e.fulfilled)&&(null===(t=n[0])||void 0===t?void 0:t.value.includes("keyChanged"))&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(this.sender&&this.activeServiceWorker&&function(){var e;return(null===(e=null===navigator||void 0===navigator?void 0:navigator.serviceWorker)||void 0===e?void 0:e.controller)||null}()===this.activeServiceWorker)try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch(t){}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Jo();return await Zo(e,Lo,"1"),await ea(e,Lo),!0}catch(e){}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(n=>Zo(n,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(t=>async function(e,t){const n=$o(e,!1).get(t),i=await new Qo(n).toPromise();return void 0===i?null:i.value}(t,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>ea(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(e=>{const t=$o(e,!1).getAll();return new Qo(t).toPromise()});if(!e)return[];if(0!==this.pendingWrites)return[];const t=[],n=new Set;if(0!==e.length)for(const{fbase_key:i,value:r}of e)n.add(i),JSON.stringify(this.localCache[i])!==JSON.stringify(r)&&(this.notifyListeners(i,r),t.push(i));for(const i of Object.keys(this.localCache))this.localCache[i]&&!n.has(i)&&(this.notifyListeners(i,null),t.push(i));return t}notifyListeners(e,t){this.localCache[e]=t;const n=this.listeners[e];if(n)for(const i of Array.from(n))i(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&this.stopPolling()}}ta.type="LOCAL";const na=ta;Js("rcb"),new Jr(3e4,6e4);const ia="recaptcha";async function ra(e,t,n){var i;const r=await n.verify();try{let s;if(qr("string"===typeof r,e,"argument-error"),qr(n.type===ia,e,"argument-error"),s="string"===typeof t?{phoneNumber:t}:t,"session"in s){const t=s.session;if("phoneNumber"in s){qr("enroll"===t.type,e,"internal-error");const n=await function(e,t){return rs(e,"POST","/v2/accounts/mfaEnrollment:start",is(e,t))}(e,{idToken:t.credential,phoneEnrollmentInfo:{phoneNumber:s.phoneNumber,recaptchaToken:r}});return n.phoneSessionInfo.sessionInfo}{qr("signin"===t.type,e,"internal-error");const n=(null===(i=s.multiFactorHint)||void 0===i?void 0:i.uid)||s.multiFactorUid;qr(n,e,"missing-multi-factor-info");const o=await function(e,t){return rs(e,"POST","/v2/accounts/mfaSignIn:start",is(e,t))}(e,{mfaPendingCredential:t.credential,mfaEnrollmentId:n,phoneSignInInfo:{recaptchaToken:r}});return o.phoneResponseInfo.sessionInfo}}{const{sessionInfo:t}=await async function(e,t){return rs(e,"POST","/v1/accounts:sendVerificationCode",is(e,t))}(e,{phoneNumber:s.phoneNumber,recaptchaToken:r});return t}}finally{n._reset()}}class sa{constructor(e){this.providerId=sa.PROVIDER_ID,this.auth=Ys(e)}verifyPhoneNumber(e,t){return ra(this.auth,e,ft(t))}static credential(e,t){return po._fromVerification(e,t)}static credentialFromResult(e){const t=e;return sa.credentialFromTaggedObject(t)}static credentialFromError(e){return sa.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t)return null;const{phoneNumber:n,temporaryProof:i}=t;return n&&i?po._fromTokenResponse(n,i):null}}function oa(e,t){return t?Ts(t):(qr(e._popupRedirectResolver,e,"argument-error"),e._popupRedirectResolver)}sa.PROVIDER_ID="phone",sa.PHONE_SIGN_IN_METHOD="phone";class aa extends so{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return co(e,this._buildIdpRequest())}_linkToIdToken(e,t){return co(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return co(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function la(e){return To(e.auth,new aa(e),e.bypassAuthState)}function ca(e){const{auth:t,user:n}=e;return qr(n,t,"internal-error"),Ao(n,new aa(e),e.bypassAuthState)}async function ua(e){const{auth:t,user:n}=e;return qr(n,t,"internal-error"),So(n,new aa(e),e.bypassAuthState)}class ha{constructor(e,t,n,i){let r=arguments.length>4&&void 0!==arguments[4]&&arguments[4];this.auth=e,this.resolver=n,this.user=i,this.bypassAuthState=r,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(nz){this.reject(nz)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:n,postBody:i,tenantId:r,error:s,type:o}=e;if(s)return void this.reject(s);const a={auth:this.auth,requestUri:t,sessionId:n,tenantId:r||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(o)(a))}catch(nz){this.reject(nz)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return la;case"linkViaPopup":case"linkViaRedirect":return ua;case"reauthViaPopup":case"reauthViaRedirect":return ca;default:Br(this.auth,"internal-error")}}resolve(e){Kr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Kr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const da=new Jr(2e3,1e4);class pa extends ha{constructor(e,t,n,i,r){super(e,t,i,r),this.provider=n,this.authWindow=null,this.pollId=null,pa.currentPopupAction&&pa.currentPopupAction.cancel(),pa.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return qr(e,this.auth,"internal-error"),e}async onExecution(){Kr(1===this.filter.length,"Popup operations only handle one event");const e=Ho();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(e=>{this.reject(e)}),this.resolver._isIframeWebStorageSupported(this.auth,e=>{e||this.reject(Wr(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return(null===(e=this.authWindow)||void 0===e?void 0:e.associatedEvent)||null}cancel(){this.reject(Wr(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,pa.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t,n;(null===(n=null===(t=this.authWindow)||void 0===t?void 0:t.window)||void 0===n?void 0:n.closed)?this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Wr(this.auth,"popup-closed-by-user"))},8e3):this.pollId=window.setTimeout(e,da.get())};e()}}pa.currentPopupAction=null;const fa=new Map;class ga extends ha{constructor(e,t){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,arguments.length>2&&void 0!==arguments[2]&&arguments[2]),this.eventId=null}async execute(){let e=fa.get(this.auth._key());if(!e){try{const t=await async function(e,t){const n=ya(t),i=va(e);if(!await i._isAvailable())return!1;const r="true"===await i._get(n);return await i._remove(n),r}(this.resolver,this.auth),n=t?await super.execute():null;e=()=>Promise.resolve(n)}catch(nz){e=()=>Promise.reject(nz)}fa.set(this.auth._key(),e)}return this.bypassAuthState||fa.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if("signInViaRedirect"===e.type)return super.onAuthEvent(e);if("unknown"!==e.type){if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}else this.resolve(null)}async onExecution(){}cleanUp(){}}function ma(e,t){fa.set(e._key(),t)}function va(e){return Ts(e._redirectPersistence)}function ya(e){return Rs("pendingRedirect",e.config.apiKey,e.name)}async function _a(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(Mn(e.app))return Promise.reject(zr(e));const i=Ys(e),r=oa(i,t),s=new ga(i,r,n),o=await s.execute();return o&&!n&&(delete o.user._redirectEventId,await i._persistUserIfCurrent(o.user),await i._setRedirectUser(null,t)),o}class wa{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(n=>{this.isEventForConsumer(e,n)&&(t=!0,this.sendToConsumer(e,n),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!function(e){switch(e.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return xa(e);default:return!1}}(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var n;if(e.error&&!xa(e)){const i=(null===(n=e.error.code)||void 0===n?void 0:n.split("auth/")[1])||"internal-error";t.onError(Wr(this.auth,i))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const n=null===t.eventId||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&n}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(ba(e))}saveEventToCache(e){this.cachedEventUids.add(ba(e)),this.lastProcessedEventTime=Date.now()}}function ba(e){return[e.type,e.eventId,e.sessionId,e.tenantId].filter(e=>e).join("-")}function xa(e){let{type:t,error:n}=e;return"unknown"===t&&(null===n||void 0===n?void 0:n.code)==="auth/".concat("no-auth-event")}const ka=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Ea=/^https?/;async function Ca(e){if(e.config.emulator)return;const{authorizedDomains:t}=await async function(e){return rs(e,"GET","/v1/projects",arguments.length>1&&void 0!==arguments[1]?arguments[1]:{})}(e);for(const i of t)try{if(Sa(i))return}catch(n){}Br(e,"unauthorized-domain")}function Sa(e){const t=Yr(),{protocol:n,hostname:i}=new URL(t);if(e.startsWith("chrome-extension://")){const r=new URL(e);return""===r.hostname&&""===i?"chrome-extension:"===n&&e.replace("chrome-extension://","")===t.replace("chrome-extension://",""):"chrome-extension:"===n&&r.hostname===i}if(!Ea.test(n))return!1;if(ka.test(e))return i===e;const r=e.replace(/\./g,"\\.");return new RegExp("^(.+\\."+r+"|"+r+")$","i").test(i)}const Aa=new Jr(3e4,6e4);function Ta(){const e=qo().___jsl;if(null===e||void 0===e?void 0:e.H)for(const t of Object.keys(e.H))if(e.H[t].r=e.H[t].r||[],e.H[t].L=e.H[t].L||[],e.H[t].r=[...e.H[t].L],e.CP)for(let n=0;n<e.CP.length;n++)e.CP[n]=null}function Pa(e){return new Promise((t,n)=>{var i,r,s;function o(){Ta(),gapi.load("gapi.iframes",{callback:()=>{t(gapi.iframes.getContext())},ontimeout:()=>{Ta(),n(Wr(e,"network-request-failed"))},timeout:Aa.get()})}if(null===(r=null===(i=qo().gapi)||void 0===i?void 0:i.iframes)||void 0===r?void 0:r.Iframe)t(gapi.iframes.getContext());else{if(!(null===(s=qo().gapi)||void 0===s?void 0:s.load)){const t=Js("iframefcb");return qo()[t]=()=>{gapi.load?o():n(Wr(e,"network-request-failed"))},$s("".concat(Qs.gapiScript,"?onload=").concat(t)).catch(e=>n(e))}o()}}).catch(e=>{throw Ia=null,e})}let Ia=null;const Ra=new Jr(5e3,15e3),Ma={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},Na=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function Da(e){const t=e.config;qr(t.authDomain,e,"auth-domain-config-required");const n=t.emulator?Zr(t,"emulator/auth/iframe"):"https://".concat(e.config.authDomain,"/").concat("__/auth/iframe"),i={apiKey:t.apiKey,appName:e.name,v:On},r=Na.get(e.config.apiHost);r&&(i.eid=r);const s=e._getFrameworks();return s.length&&(i.fw=s.join(",")),"".concat(n,"?").concat(ot(i).slice(1))}async function Oa(e){const t=await function(e){return Ia=Ia||Pa(e),Ia}(e),n=qo().gapi;return qr(n,e,"internal-error"),t.open({where:document.body,url:Da(e),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Ma,dontclear:!0},t=>new Promise(async(n,i)=>{await t.restyle({setHideOnLeave:!1});const r=Wr(e,"network-request-failed"),s=qo().setTimeout(()=>{i(r)},Ra.get());function o(){qo().clearTimeout(s),n(t)}t.ping(o).then(o,()=>{i(r)})}))}const La={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class Fa{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch(nz){}}}function ja(e,t,n){let i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:500,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:600;const s=Math.max((window.screen.availHeight-r)/2,0).toString(),o=Math.max((window.screen.availWidth-i)/2,0).toString();let a="";const l=Object.assign(Object.assign({},La),{width:i.toString(),height:r.toString(),top:s,left:o}),c=Ve().toLowerCase();n&&(a=Ls(c)?"_blank":n),Ds(c)&&(t=t||"http://localhost",l.scrollbars="yes");const u=Object.entries(l).reduce((e,t)=>{let[n,i]=t;return"".concat(e).concat(n,"=").concat(i,",")},"");if(function(){var e;return Us(arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ve())&&!!(null===(e=window.navigator)||void 0===e?void 0:e.standalone)}(c)&&"_self"!==a)return function(e,t){const n=document.createElement("a");n.href=e,n.target=t;const i=document.createEvent("MouseEvent");i.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(i)}(t||"",a),new Fa(null);const h=window.open(t||"",a,u);qr(h,e,"popup-blocked");try{h.focus()}catch(nz){}return new Fa(h)}const Ba="__/auth/handler",Wa="emulator/auth/handler",Ua=encodeURIComponent("fac");async function za(e,t,n,i,r,s){qr(e.config.authDomain,e,"auth-domain-config-required"),qr(e.config.apiKey,e,"invalid-api-key");const o={apiKey:e.config.apiKey,appName:e.name,authType:n,redirectUrl:i,v:On,eventId:r};if(t instanceof mo){t.setDefaultLanguage(e.languageCode),o.providerId=t.providerId||"",nt(t.getCustomParameters())||(o.customParameters=JSON.stringify(t.getCustomParameters()));for(const[e,t]of Object.entries(s||{}))o[e]=t}if(t instanceof vo){const e=t.getScopes().filter(e=>""!==e);e.length>0&&(o.scopes=e.join(","))}e.tenantId&&(o.tid=e.tenantId);const a=o;for(const u of Object.keys(a))void 0===a[u]&&delete a[u];const l=await e._getAppCheckToken(),c=l?"#".concat(Ua,"=").concat(encodeURIComponent(l)):"";return"".concat(function(e){let{config:t}=e;if(!t.emulator)return"https://".concat(t.authDomain,"/").concat(Ba);return Zr(t,Wa)}(e),"?").concat(ot(a).slice(1)).concat(c)}const Ha="webStorageSupport";const Va=class{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Uo,this._completeRedirectFn=_a,this._overrideRedirectResult=ma}async _openPopup(e,t,n,i){var r;Kr(null===(r=this.eventManagers[e._key()])||void 0===r?void 0:r.manager,"_initialize() not called before _openPopup()");return ja(e,await za(e,t,n,Yr(),i),Ho())}async _openRedirect(e,t,n,i){await this._originValidation(e);return function(e){qo().location.href=e}(await za(e,t,n,Yr(),i)),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:e,promise:n}=this.eventManagers[t];return e?Promise.resolve(e):(Kr(n,"If manager is not set, promise should be"),n)}const n=this.initAndGetManager(e);return this.eventManagers[t]={promise:n},n.catch(()=>{delete this.eventManagers[t]}),n}async initAndGetManager(e){const t=await Oa(e),n=new wa(e);return t.register("authEvent",t=>{qr(null===t||void 0===t?void 0:t.authEvent,e,"invalid-auth-event");return{status:n.onEvent(t.authEvent)?"ACK":"ERROR"}},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:n},this.iframes[e._key()]=t,n}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(Ha,{type:Ha},n=>{var i;const r=null===(i=null===n||void 0===n?void 0:n[0])||void 0===i?void 0:i[Ha];void 0!==r&&t(!!r),Br(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=Ca(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return Hs()||Os()||Us()}};var qa="@firebase/auth",Ga="1.7.9";class Ka{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),(null===(e=this.auth.currentUser)||void 0===e?void 0:e.uid)||null}async getToken(e){if(this.assertAuthConfigured(),await this.auth._initializationPromise,!this.auth.currentUser)return null;return{accessToken:await this.auth.currentUser.getIdToken(e)}}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(t=>{e((null===t||void 0===t?void 0:t.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){qr(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}const Ya=Ue("authIdTokenMaxAge")||300;let Xa=null;var Qa,$a;Qa={loadJS:e=>new Promise((t,n)=>{const i=document.createElement("script");i.setAttribute("src",e),i.onload=t,i.onerror=e=>{const t=Wr("internal-error");t.customData=e,n(t)},i.type="text/javascript",i.charset="UTF-8",function(){var e,t;return null!==(t=null===(e=document.getElementsByTagName("head"))||void 0===e?void 0:e[0])&&void 0!==t?t:document}().appendChild(i)}),gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="},Qs=Qa,$a="Browser",In(new gt("auth",(e,t)=>{let{options:n}=t;const i=e.getProvider("app").getImmediate(),r=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:o,authDomain:a}=i.options;qr(o&&!o.includes(":"),"invalid-api-key",{appName:i.name});const l={apiKey:o,authDomain:a,clientPlatform:$a,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Vs($a)},c=new Ks(i,r,s,l);return function(e,t){const n=(null===t||void 0===t?void 0:t.persistence)||[],i=(Array.isArray(n)?n:[n]).map(Ts);(null===t||void 0===t?void 0:t.errorMap)&&e._updateErrorMap(t.errorMap),e._initializeWithPersistence(i,null===t||void 0===t?void 0:t.popupRedirectResolver)}(c,n),c},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,n)=>{e.getProvider("auth-internal").initialize()})),In(new gt("auth-internal",e=>(e=>new Ka(e))(Ys(e.getProvider("auth").getImmediate())),"PRIVATE").setInstantiationMode("EXPLICIT")),jn(qa,Ga,function(e){switch(e){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}($a)),jn(qa,Ga,"esm2017");const Ja="@firebase/database",Za="1.0.8";let el="";function tl(e){el=e}class nl{constructor(e){this.domStorage_=e,this.prefix_="firebase:"}set(e,t){null==t?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),Je(t))}get(e){const t=this.domStorage_.getItem(this.prefixedName_(e));return null==t?null:$e(t)}remove(e){this.domStorage_.removeItem(this.prefixedName_(e))}prefixedName_(e){return this.prefix_+e}toString(){return this.domStorage_.toString()}}class il{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(e,t){null==t?delete this.cache_[e]:this.cache_[e]=t}get(e){return et(this.cache_,e)?this.cache_[e]:null}remove(e){delete this.cache_[e]}}const rl=function(e){try{if("undefined"!==typeof window&&"undefined"!==typeof window[e]){const t=window[e];return t.setItem("firebase:sentinel","cache"),t.removeItem("firebase:sentinel"),new nl(t)}}catch(nz){}return new il},sl=rl("localStorage"),ol=rl("sessionStorage"),al=new Ct("@firebase/database"),ll=function(){let e=1;return function(){return e++}}(),cl=function(e){const t=function(e){const t=[];let n=0;for(let i=0;i<e.length;i++){let r=e.charCodeAt(i);if(r>=55296&&r<=56319){const t=r-55296;i++,Ce(i<e.length,"Surrogate pair missing trail surrogate."),r=65536+(t<<10)+(e.charCodeAt(i)-56320)}r<128?t[n++]=r:r<2048?(t[n++]=r>>6|192,t[n++]=63&r|128):r<65536?(t[n++]=r>>12|224,t[n++]=r>>6&63|128,t[n++]=63&r|128):(t[n++]=r>>18|240,t[n++]=r>>12&63|128,t[n++]=r>>6&63|128,t[n++]=63&r|128)}return t}(e),n=new ct;n.update(t);const i=n.digest();return Te.encodeByteArray(i)},ul=function(){let e="";for(let t=0;t<arguments.length;t++){const n=t<0||arguments.length<=t?void 0:arguments[t];Array.isArray(n)||n&&"object"===typeof n&&"number"===typeof n.length?e+=ul.apply(null,n):e+="object"===typeof n?Je(n):n,e+=" "}return e};let hl=null,dl=!0;const pl=function(e,t){Ce(!t||!0===e||!1===e,"Can't turn on custom loggers persistently."),!0===e?(al.logLevel=wt.VERBOSE,hl=al.log.bind(al),t&&ol.set("logging_enabled",!0)):"function"===typeof e?hl=e:(hl=null,ol.remove("logging_enabled"))},fl=function(){if(!0===dl&&(dl=!1,null===hl&&!0===ol.get("logging_enabled")&&pl(!0)),hl){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];const i=ul.apply(null,t);hl(i)}},gl=function(e){return function(){for(var t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];fl(e,...n)}},ml=function(){const e="FIREBASE INTERNAL ERROR: "+ul(...arguments);al.error(e)},vl=function(){const e="FIREBASE FATAL ERROR: ".concat(ul(...arguments));throw al.error(e),new Error(e)},yl=function(){const e="FIREBASE WARNING: "+ul(...arguments);al.warn(e)},_l=function(e){return"number"===typeof e&&(e!==e||e===Number.POSITIVE_INFINITY||e===Number.NEGATIVE_INFINITY)},wl="[MIN_NAME]",bl="[MAX_NAME]",xl=function(e,t){if(e===t)return 0;if(e===wl||t===bl)return-1;if(t===wl||e===bl)return 1;{const n=Il(e),i=Il(t);return null!==n?null!==i?n-i===0?e.length-t.length:n-i:-1:null!==i?1:e<t?-1:1}},kl=function(e,t){return e===t?0:e<t?-1:1},El=function(e,t){if(t&&e in t)return t[e];throw new Error("Missing required key ("+e+") in object: "+Je(t))},Cl=function(e){if("object"!==typeof e||null===e)return Je(e);const t=[];for(const i in e)t.push(i);t.sort();let n="{";for(let i=0;i<t.length;i++)0!==i&&(n+=","),n+=Je(t[i]),n+=":",n+=Cl(e[t[i]]);return n+="}",n},Sl=function(e,t){const n=e.length;if(n<=t)return[e];const i=[];for(let r=0;r<n;r+=t)r+t>n?i.push(e.substring(r,n)):i.push(e.substring(r,r+t));return i};function Al(e,t){for(const n in e)e.hasOwnProperty(n)&&t(n,e[n])}const Tl=function(e){Ce(!_l(e),"Invalid JSON number");const t=1023;let n,i,r,s,o;0===e?(i=0,r=0,n=1/e===-1/0?1:0):(n=e<0,(e=Math.abs(e))>=Math.pow(2,-1022)?(s=Math.min(Math.floor(Math.log(e)/Math.LN2),t),i=s+t,r=Math.round(e*Math.pow(2,52-s)-Math.pow(2,52))):(i=0,r=Math.round(e/Math.pow(2,-1074))));const a=[];for(o=52;o;o-=1)a.push(r%2?1:0),r=Math.floor(r/2);for(o=11;o;o-=1)a.push(i%2?1:0),i=Math.floor(i/2);a.push(n?1:0),a.reverse();const l=a.join("");let c="";for(o=0;o<64;o+=8){let e=parseInt(l.substr(o,8),2).toString(16);1===e.length&&(e="0"+e),c+=e}return c.toLowerCase()};const Pl=new RegExp("^-?(0*)\\d{1,10}$"),Il=function(e){if(Pl.test(e)){const t=Number(e);if(t>=-2147483648&&t<=2147483647)return t}return null},Rl=function(e){try{e()}catch(nz){setTimeout(()=>{const t=nz.stack||"";throw yl("Exception was thrown by user callback.",t),nz},Math.floor(0))}},Ml=function(e,t){const n=setTimeout(e,t);return"number"===typeof n&&"undefined"!==typeof Deno&&Deno.unrefTimer?Deno.unrefTimer(n):"object"===typeof n&&n.unref&&n.unref(),n};class Nl{constructor(e,t){this.appName_=e,this.appCheckProvider=t,this.appCheck=null===t||void 0===t?void 0:t.getImmediate({optional:!0}),this.appCheck||null===t||void 0===t||t.get().then(e=>this.appCheck=e)}getToken(e){return this.appCheck?this.appCheck.getToken(e):new Promise((t,n)=>{setTimeout(()=>{this.appCheck?this.getToken(e).then(t,n):t(null)},0)})}addTokenChangeListener(e){var t;null===(t=this.appCheckProvider)||void 0===t||t.get().then(t=>t.addTokenListener(e))}notifyForInvalidToken(){yl('Provided AppCheck credentials for the app named "'.concat(this.appName_,'" ')+"are invalid. This usually indicates your app was not initialized correctly.")}}class Dl{constructor(e,t,n){this.appName_=e,this.firebaseOptions_=t,this.authProvider_=n,this.auth_=null,this.auth_=n.getImmediate({optional:!0}),this.auth_||n.onInit(e=>this.auth_=e)}getToken(e){return this.auth_?this.auth_.getToken(e).catch(e=>e&&"auth/token-not-initialized"===e.code?(fl("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(e)):new Promise((t,n)=>{setTimeout(()=>{this.auth_?this.getToken(e).then(t,n):t(null)},0)})}addTokenChangeListener(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then(t=>t.addAuthTokenListener(e))}removeTokenChangeListener(e){this.authProvider_.get().then(t=>t.removeAuthTokenListener(e))}notifyForInvalidToken(){let e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';"credential"in this.firebaseOptions_?e+='Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?e+='Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':e+='Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',yl(e)}}class Ol{constructor(e){this.accessToken=e}getToken(e){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(e){e(this.accessToken)}removeTokenChangeListener(e){}notifyForInvalidToken(){}}Ol.OWNER="owner";const Ll="5",Fl=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,jl="ac",Bl="websocket",Wl="long_polling";class Ul{constructor(e,t,n,i){let r=arguments.length>4&&void 0!==arguments[4]&&arguments[4],s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"",o=arguments.length>6&&void 0!==arguments[6]&&arguments[6],a=arguments.length>7&&void 0!==arguments[7]&&arguments[7];this.secure=t,this.namespace=n,this.webSocketOnly=i,this.nodeAdmin=r,this.persistenceKey=s,this.includeNamespaceInQueryParams=o,this.isUsingEmulator=a,this._host=e.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=sl.get("host:"+e)||this._host}isCacheableHost(){return"s-"===this.internalHost.substr(0,2)}isCustomHost(){return"firebaseio.com"!==this._domain&&"firebaseio-demo.com"!==this._domain}get host(){return this._host}set host(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&sl.set("host:"+this._host,this.internalHost))}toString(){let e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e}toURLString(){const e=this.secure?"https://":"http://",t=this.includeNamespaceInQueryParams?"?ns=".concat(this.namespace):"";return"".concat(e).concat(this.host,"/").concat(t)}}function zl(e,t,n){let i;if(Ce("string"===typeof t,"typeof type must == string"),Ce("object"===typeof n,"typeof params must == object"),t===Bl)i=(e.secure?"wss://":"ws://")+e.internalHost+"/.ws?";else{if(t!==Wl)throw new Error("Unknown connection type: "+t);i=(e.secure?"https://":"http://")+e.internalHost+"/.lp?"}(function(e){return e.host!==e.internalHost||e.isCustomHost()||e.includeNamespaceInQueryParams})(e)&&(n.ns=e.namespace);const r=[];return Al(n,(e,t)=>{r.push(e+"="+t)}),i+r.join("&")}class Hl{constructor(){this.counters_={}}incrementCounter(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;et(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=t}get(){return Ne(this.counters_)}}const Vl={},ql={};function Gl(e){const t=e.toString();return Vl[t]||(Vl[t]=new Hl),Vl[t]}class Kl{constructor(e){this.onMessage_=e,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(e,t){this.closeAfterResponse=e,this.onClose=t,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(e,t){for(this.pendingResponses[e]=t;this.pendingResponses[this.currentResponseNum];){const e=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let t=0;t<e.length;++t)e[t]&&Rl(()=>{this.onMessage_(e[t])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}const Yl="start";class Xl{constructor(e,t,n,i,r,s,o){this.connId=e,this.repoInfo=t,this.applicationId=n,this.appCheckToken=i,this.authToken=r,this.transportSessionId=s,this.lastSessionId=o,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=gl(e),this.stats_=Gl(t),this.urlFn=e=>(this.appCheckToken&&(e[jl]=this.appCheckToken),zl(t,Wl,e))}open(e,t){var n=this;this.curSegmentNum=0,this.onDisconnect_=t,this.myPacketOrderer=new Kl(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(3e4)),function(e){if(Ke()||"complete"===document.readyState)e();else{let t=!1;const n=function(){document.body?t||(t=!0,e()):setTimeout(n,Math.floor(10))};document.addEventListener?(document.addEventListener("DOMContentLoaded",n,!1),window.addEventListener("load",n,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{"complete"===document.readyState&&n()}),window.attachEvent("onload",n))}}(()=>{if(this.isClosed_)return;this.scriptTagHolder=new Ql(function(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];const[r,s,o,a,l]=t;if(n.incrementIncomingBytes_(t),n.scriptTagHolder)if(n.connectTimeoutTimer_&&(clearTimeout(n.connectTimeoutTimer_),n.connectTimeoutTimer_=null),n.everConnected_=!0,r===Yl)n.id=s,n.password=o;else{if("close"!==r)throw new Error("Unrecognized command received: "+r);s?(n.scriptTagHolder.sendNewPolls=!1,n.myPacketOrderer.closeAfter(s,()=>{n.onClosed_()})):n.onClosed_()}},function(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];const[r,s]=t;n.incrementIncomingBytes_(t),n.myPacketOrderer.handleResponse(r,s)},()=>{this.onClosed_()},this.urlFn);const e={};e[Yl]="t",e.ser=Math.floor(1e8*Math.random()),this.scriptTagHolder.uniqueCallbackIdentifier&&(e.cb=this.scriptTagHolder.uniqueCallbackIdentifier),e.v=Ll,this.transportSessionId&&(e.s=this.transportSessionId),this.lastSessionId&&(e.ls=this.lastSessionId),this.applicationId&&(e.p=this.applicationId),this.appCheckToken&&(e[jl]=this.appCheckToken),"undefined"!==typeof location&&location.hostname&&Fl.test(location.hostname)&&(e.r="f");const t=this.urlFn(e);this.log_("Connecting via long-poll to "+t),this.scriptTagHolder.addTag(t,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){Xl.forceAllow_=!0}static forceDisallow(){Xl.forceDisallow_=!0}static isAvailable(){return!Ke()&&(!!Xl.forceAllow_||!Xl.forceDisallow_&&"undefined"!==typeof document&&null!=document.createElement&&!("object"===typeof window&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href))&&!("object"===typeof Windows&&"object"===typeof Windows.UI))}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(e){const t=Je(e);this.bytesSent+=t.length,this.stats_.incrementCounter("bytes_sent",t.length);const n=Ie(t),i=Sl(n,1840);for(let r=0;r<i.length;r++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,i.length,i[r]),this.curSegmentNum++}addDisconnectPingFrame(e,t){if(Ke())return;this.myDisconnFrame=document.createElement("iframe");const n={dframe:"t"};n.id=e,n.pw=t,this.myDisconnFrame.src=this.urlFn(n),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(e){const t=Je(e).length;this.bytesReceived+=t,this.stats_.incrementCounter("bytes_received",t)}}class Ql{constructor(e,t,n,i){if(this.onDisconnect=n,this.urlFn=i,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(1e8*Math.random()),this.sendNewPolls=!0,Ke())this.commandCB=e,this.onMessageCB=t;else{this.uniqueCallbackIdentifier=ll(),window["pLPCommand"+this.uniqueCallbackIdentifier]=e,window["pRTLPCB"+this.uniqueCallbackIdentifier]=t,this.myIFrame=Ql.createIFrame_();let n="";if(this.myIFrame.src&&"javascript:"===this.myIFrame.src.substr(0,11)){n='<script>document.domain="'+document.domain+'";<\/script>'}const i="<html><body>"+n+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(i),this.myIFrame.doc.close()}catch(nz){fl("frame writing exception"),nz.stack&&fl(nz.stack),fl(nz)}}}static createIFrame_(){const e=document.createElement("iframe");if(e.style.display="none",!document.body)throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";document.body.appendChild(e);try{e.contentWindow.document||fl("No IE domain setting required")}catch(nz){const n=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+n+"';document.close();})())"}return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.textContent="",setTimeout(()=>{null!==this.myIFrame&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));const e=this.onDisconnect;e&&(this.onDisconnect=null,e())}startLongPoll(e,t){for(this.myID=e,this.myPW=t,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const e={};e.id=this.myID,e.pw=this.myPW,e.ser=this.currentSerial;let t=this.urlFn(e),n="",i=0;for(;this.pendingSegs.length>0;){if(!(this.pendingSegs[0].d.length+30+n.length<=1870))break;{const e=this.pendingSegs.shift();n=n+"&seg"+i+"="+e.seg+"&ts"+i+"="+e.ts+"&d"+i+"="+e.d,i++}}return t+=n,this.addLongPollTag_(t,this.currentSerial),!0}return!1}enqueueSegment(e,t,n){this.pendingSegs.push({seg:e,ts:t,d:n}),this.alive&&this.newRequest_()}addLongPollTag_(e,t){this.outstandingRequests.add(t);const n=()=>{this.outstandingRequests.delete(t),this.newRequest_()},i=setTimeout(n,Math.floor(25e3));this.addTag(e,()=>{clearTimeout(i),n()})}addTag(e,t){Ke()?this.doNodeLongPoll(e,t):setTimeout(()=>{try{if(!this.sendNewPolls)return;const n=this.myIFrame.doc.createElement("script");n.type="text/javascript",n.async=!0,n.src=e,n.onload=n.onreadystatechange=function(){const e=n.readyState;e&&"loaded"!==e&&"complete"!==e||(n.onload=n.onreadystatechange=null,n.parentNode&&n.parentNode.removeChild(n),t())},n.onerror=()=>{fl("Long-poll script failed to load: "+e),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(n)}catch(nz){}},Math.floor(1))}}let $l=null;"undefined"!==typeof MozWebSocket?$l=MozWebSocket:"undefined"!==typeof WebSocket&&($l=WebSocket);class Jl{constructor(e,t,n,i,r,s,o){this.connId=e,this.applicationId=n,this.appCheckToken=i,this.authToken=r,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=gl(this.connId),this.stats_=Gl(t),this.connURL=Jl.connectionURL_(t,s,o,i,n),this.nodeAdmin=t.nodeAdmin}static connectionURL_(e,t,n,i,r){const s={};return s.v=Ll,!Ke()&&"undefined"!==typeof location&&location.hostname&&Fl.test(location.hostname)&&(s.r="f"),t&&(s.s=t),n&&(s.ls=n),i&&(s[jl]=i),r&&(s.p=r),zl(e,Bl,s)}open(e,t){this.onDisconnect=t,this.onMessage=e,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,sl.set("previous_websocket_failure",!0);try{let e;if(Ke()){const t=this.nodeAdmin?"AdminNode":"Node";e={headers:{"User-Agent":"Firebase/".concat(Ll,"/").concat(el,"/").concat(process.platform,"/").concat(t),"X-Firebase-GMPID":this.applicationId||""}},this.authToken&&(e.headers.Authorization="Bearer ".concat(this.authToken)),this.appCheckToken&&(e.headers["X-Firebase-AppCheck"]=this.appCheckToken);const n={NODE_ENV:"production",PUBLIC_URL:"/read-pdf-by-page",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_FIREBASE_API_KEY:"AIzaSyBKA2ype48tLbkfy_qV29amJ_RMpONpUwg",REACT_APP_FIREBASE_APP_ID:"1:564116137461:web:e8247258126be9fb612cbc",REACT_APP_FIREBASE_AUTH_DOMAIN:"read-pdf-by-page.firebaseapp.com",REACT_APP_FIREBASE_MESSAGING_SENDER_ID:"564116137461",REACT_APP_FIREBASE_PROJECT_ID:"read-pdf-by-page",REACT_APP_FIREBASE_REALTIME_REFERENCE_URL:"https://read-pdf-by-page-default-rtdb.firebaseio.com",REACT_APP_FIREBASE_STORAGE_BUCKET:"read-pdf-by-page.appspot.com"},i=0===this.connURL.indexOf("wss://")?n.HTTPS_PROXY||n.https_proxy:n.HTTP_PROXY||n.http_proxy;i&&(e.proxy={origin:i})}this.mySock=new $l(this.connURL,[],e)}catch(nz){this.log_("Error instantiating WebSocket.");const t=nz.message||nz.data;return t&&this.log_(t),void this.onClosed_()}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=e=>{this.handleIncomingFrame(e)},this.mySock.onerror=e=>{this.log_("WebSocket error.  Closing connection.");const t=e.message||e.data;t&&this.log_(t),this.onClosed_()}}start(){}static forceDisallow(){Jl.forceDisallow_=!0}static isAvailable(){let e=!1;if("undefined"!==typeof navigator&&navigator.userAgent){const t=/Android ([0-9]{0,}\.[0-9]{0,})/,n=navigator.userAgent.match(t);n&&n.length>1&&parseFloat(n[1])<4.4&&(e=!0)}return!e&&null!==$l&&!Jl.forceDisallow_}static previouslyFailed(){return sl.isInMemoryStorage||!0===sl.get("previous_websocket_failure")}markConnectionHealthy(){sl.remove("previous_websocket_failure")}appendFrame_(e){if(this.frames.push(e),this.frames.length===this.totalFrames){const e=this.frames.join("");this.frames=null;const t=$e(e);this.onMessage(t)}}handleNewFrameCount_(e){this.totalFrames=e,this.frames=[]}extractFrameCount_(e){if(Ce(null===this.frames,"We already have a frame buffer"),e.length<=6){const t=Number(e);if(!isNaN(t))return this.handleNewFrameCount_(t),null}return this.handleNewFrameCount_(1),e}handleIncomingFrame(e){if(null===this.mySock)return;const t=e.data;if(this.bytesReceived+=t.length,this.stats_.incrementCounter("bytes_received",t.length),this.resetKeepAlive(),null!==this.frames)this.appendFrame_(t);else{const e=this.extractFrameCount_(t);null!==e&&this.appendFrame_(e)}}send(e){this.resetKeepAlive();const t=Je(e);this.bytesSent+=t.length,this.stats_.incrementCounter("bytes_sent",t.length);const n=Sl(t,16384);n.length>1&&this.sendString_(String(n.length));for(let i=0;i<n.length;i++)this.sendString_(n[i])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(45e3))}sendString_(e){try{this.mySock.send(e)}catch(nz){this.log_("Exception thrown from WebSocket.send():",nz.message||nz.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}Jl.responsesRequiredToBeHealthy=2,Jl.healthyTimeout=3e4;class Zl{constructor(e){this.initTransports_(e)}static get ALL_TRANSPORTS(){return[Xl,Jl]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}initTransports_(e){const t=Jl&&Jl.isAvailable();let n=t&&!Jl.previouslyFailed();if(e.webSocketOnly&&(t||yl("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),n=!0),n)this.transports_=[Jl];else{const e=this.transports_=[];for(const t of Zl.ALL_TRANSPORTS)t&&t.isAvailable()&&e.push(t);Zl.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}Zl.globalTransportInitialized_=!1;class ec{constructor(e,t,n,i,r,s,o,a,l,c){this.id=e,this.repoInfo_=t,this.applicationId_=n,this.appCheckToken_=i,this.authToken_=r,this.onMessage_=s,this.onReady_=o,this.onDisconnect_=a,this.onKill_=l,this.lastSessionId=c,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=gl("c:"+this.id+":"),this.transportManager_=new Zl(t),this.log_("Connection created"),this.start_()}start_(){const e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const t=this.connReceiver_(this.conn_),n=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(t,n)},Math.floor(0));const i=e.healthyTimeout||0;i>0&&(this.healthyTimeout_=Ml(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>102400?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>10240?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(i)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(e){return t=>{e===this.conn_?this.onConnectionLost_(t):e===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(e){return t=>{2!==this.state_&&(e===this.rx_?this.onPrimaryMessageReceived_(t):e===this.secondaryConn_?this.onSecondaryMessageReceived_(t):this.log_("message on old connection"))}}sendRequest(e){const t={t:"d",d:e};this.sendData_(t)}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(e){if("t"in e){const t=e.t;"a"===t?this.upgradeIfSecondaryHealthy_():"r"===t?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),this.tx_!==this.secondaryConn_&&this.rx_!==this.secondaryConn_||this.close()):"o"===t&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(e){const t=El("t",e),n=El("d",e);if("c"===t)this.onSecondaryControl_(n);else{if("d"!==t)throw new Error("Unknown protocol layer: "+t);this.pendingDataMessages.push(n)}}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:"p",d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:"a",d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:"n",d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(e){const t=El("t",e),n=El("d",e);"c"===t?this.onControl_(n):"d"===t&&this.onDataMessage_(n)}onDataMessage_(e){this.onPrimaryResponse_(),this.onMessage_(e)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(e){const t=El("t",e);if("d"in e){const n=e.d;if("h"===t){const e=Object.assign({},n);this.repoInfo_.isUsingEmulator&&(e.h=this.repoInfo_.host),this.onHandshake_(e)}else if("n"===t){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let e=0;e<this.pendingDataMessages.length;++e)this.onDataMessage_(this.pendingDataMessages[e]);this.pendingDataMessages=[],this.tryCleanupConnection()}else"s"===t?this.onConnectionShutdown_(n):"r"===t?this.onReset_(n):"e"===t?ml("Server Error: "+n):"o"===t?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):ml("Unknown control packet command: "+t)}}onHandshake_(e){const t=e.ts,n=e.v,i=e.h;this.sessionId=e.s,this.repoInfo_.host=i,0===this.state_&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,t),Ll!==n&&yl("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}startUpgrade_(e){this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const t=this.connReceiver_(this.secondaryConn_),n=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(t,n),Ml(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(6e4))}onReset_(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,1===this.state_?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(e,t){this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(t,this.sessionId),this.onReady_=null),0===this.primaryResponsesRequired_?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):Ml(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(5e3))}sendPingOnPrimaryIfNecessary_(){this.isHealthy_||1!==this.state_||(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:"p",d:{}}}))}onSecondaryConnectionLost_(){const e=this.secondaryConn_;this.secondaryConn_=null,this.tx_!==e&&this.rx_!==e||this.close()}onConnectionLost_(e){this.conn_=null,e||0!==this.state_?1===this.state_&&this.log_("Realtime connection lost."):(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(sl.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)),this.close()}onConnectionShutdown_(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(e){if(1!==this.state_)throw"Connection is not connected";this.tx_.send(e)}close(){2!==this.state_&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}class tc{put(e,t,n,i){}merge(e,t,n,i){}refreshAuthToken(e){}refreshAppCheckToken(e){}onDisconnectPut(e,t,n){}onDisconnectMerge(e,t,n){}onDisconnectCancel(e,t){}reportStats(e){}}class nc{constructor(e){this.allowedEvents_=e,this.listeners_={},Ce(Array.isArray(e)&&e.length>0,"Requires a non-empty array")}trigger(e){if(Array.isArray(this.listeners_[e])){const r=[...this.listeners_[e]];for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];for(let e=0;e<r.length;e++)r[e].callback.apply(r[e].context,n)}}on(e,t,n){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:t,context:n});const i=this.getInitialEvent(e);i&&t.apply(n,i)}off(e,t,n){this.validateEventType_(e);const i=this.listeners_[e]||[];for(let r=0;r<i.length;r++)if(i[r].callback===t&&(!n||n===i[r].context))return void i.splice(r,1)}validateEventType_(e){Ce(this.allowedEvents_.find(t=>t===e),"Unknown event: "+e)}}class ic extends nc{constructor(){super(["online"]),this.online_=!0,"undefined"===typeof window||"undefined"===typeof window.addEventListener||qe()||(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}static getInstance(){return new ic}getInitialEvent(e){return Ce("online"===e,"Unknown event type: "+e),[this.online_]}currentlyOnline(){return this.online_}}class rc{constructor(e,t){if(void 0===t){this.pieces_=e.split("/");let t=0;for(let e=0;e<this.pieces_.length;e++)this.pieces_[e].length>0&&(this.pieces_[t]=this.pieces_[e],t++);this.pieces_.length=t,this.pieceNum_=0}else this.pieces_=e,this.pieceNum_=t}toString(){let e="";for(let t=this.pieceNum_;t<this.pieces_.length;t++)""!==this.pieces_[t]&&(e+="/"+this.pieces_[t]);return e||"/"}}function sc(){return new rc("")}function oc(e){return e.pieceNum_>=e.pieces_.length?null:e.pieces_[e.pieceNum_]}function ac(e){return e.pieces_.length-e.pieceNum_}function lc(e){let t=e.pieceNum_;return t<e.pieces_.length&&t++,new rc(e.pieces_,t)}function cc(e){return e.pieceNum_<e.pieces_.length?e.pieces_[e.pieces_.length-1]:null}function uc(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return e.pieces_.slice(e.pieceNum_+t)}function hc(e){if(e.pieceNum_>=e.pieces_.length)return null;const t=[];for(let n=e.pieceNum_;n<e.pieces_.length-1;n++)t.push(e.pieces_[n]);return new rc(t,0)}function dc(e,t){const n=[];for(let i=e.pieceNum_;i<e.pieces_.length;i++)n.push(e.pieces_[i]);if(t instanceof rc)for(let i=t.pieceNum_;i<t.pieces_.length;i++)n.push(t.pieces_[i]);else{const e=t.split("/");for(let t=0;t<e.length;t++)e[t].length>0&&n.push(e[t])}return new rc(n,0)}function pc(e){return e.pieceNum_>=e.pieces_.length}function fc(e,t){const n=oc(e),i=oc(t);if(null===n)return t;if(n===i)return fc(lc(e),lc(t));throw new Error("INTERNAL ERROR: innerPath ("+t+") is not within outerPath ("+e+")")}function gc(e,t){if(ac(e)!==ac(t))return!1;for(let n=e.pieceNum_,i=t.pieceNum_;n<=e.pieces_.length;n++,i++)if(e.pieces_[n]!==t.pieces_[i])return!1;return!0}function mc(e,t){let n=e.pieceNum_,i=t.pieceNum_;if(ac(e)>ac(t))return!1;for(;n<e.pieces_.length;){if(e.pieces_[n]!==t.pieces_[i])return!1;++n,++i}return!0}class vc{constructor(e,t){this.errorPrefix_=t,this.parts_=uc(e,0),this.byteLength_=Math.max(1,this.parts_.length);for(let n=0;n<this.parts_.length;n++)this.byteLength_+=pt(this.parts_[n]);yc(this)}}function yc(e){if(e.byteLength_>768)throw new Error(e.errorPrefix_+"has a key path longer than 768 bytes ("+e.byteLength_+").");if(e.parts_.length>32)throw new Error(e.errorPrefix_+"path specified exceeds the maximum depth that can be written (32) or object contains a cycle "+_c(e))}function _c(e){return 0===e.parts_.length?"":"in property '"+e.parts_.join(".")+"'"}class wc extends nc{constructor(){let e,t;super(["visible"]),"undefined"!==typeof document&&"undefined"!==typeof document.addEventListener&&("undefined"!==typeof document.hidden?(t="visibilitychange",e="hidden"):"undefined"!==typeof document.mozHidden?(t="mozvisibilitychange",e="mozHidden"):"undefined"!==typeof document.msHidden?(t="msvisibilitychange",e="msHidden"):"undefined"!==typeof document.webkitHidden&&(t="webkitvisibilitychange",e="webkitHidden")),this.visible_=!0,t&&document.addEventListener(t,()=>{const t=!document[e];t!==this.visible_&&(this.visible_=t,this.trigger("visible",t))},!1)}static getInstance(){return new wc}getInitialEvent(e){return Ce("visible"===e,"Unknown event type: "+e),[this.visible_]}}const bc=1e3;class xc extends tc{constructor(e,t,n,i,r,s,o,a){if(super(),this.repoInfo_=e,this.applicationId_=t,this.onDataUpdate_=n,this.onConnectStatus_=i,this.onServerInfoUpdate_=r,this.authTokenProvider_=s,this.appCheckTokenProvider_=o,this.authOverride_=a,this.id=xc.nextPersistentConnectionId_++,this.log_=gl("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=bc,this.maxReconnectDelay_=3e5,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,a&&!Ke())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");wc.getInstance().on("visible",this.onVisible_,this),-1===e.host.indexOf("fblocal")&&ic.getInstance().on("online",this.onOnline_,this)}sendRequest(e,t,n){const i=++this.requestNumber_,r={r:i,a:e,b:t};this.log_(Je(r)),Ce(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(r),n&&(this.requestCBHash_[i]=n)}get(e){this.initConnection_();const t=new ze,n={action:"g",request:{p:e._path.toString(),q:e._queryObject},onComplete:e=>{const n=e.d;"ok"===e.s?t.resolve(n):t.reject(n)}};this.outstandingGets_.push(n),this.outstandingGetCount_++;const i=this.outstandingGets_.length-1;return this.connected_&&this.sendGet_(i),t.promise}listen(e,t,n,i){this.initConnection_();const r=e._queryIdentifier,s=e._path.toString();this.log_("Listen called for "+s+" "+r),this.listens.has(s)||this.listens.set(s,new Map),Ce(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"listen() called for non-default but complete query"),Ce(!this.listens.get(s).has(r),"listen() called twice for same path/queryId.");const o={onComplete:i,hashFn:t,query:e,tag:n};this.listens.get(s).set(r,o),this.connected_&&this.sendListen_(o)}sendGet_(e){const t=this.outstandingGets_[e];this.sendRequest("g",t.request,n=>{delete this.outstandingGets_[e],this.outstandingGetCount_--,0===this.outstandingGetCount_&&(this.outstandingGets_=[]),t.onComplete&&t.onComplete(n)})}sendListen_(e){const t=e.query,n=t._path.toString(),i=t._queryIdentifier;this.log_("Listen on "+n+" for "+i);const r={p:n};e.tag&&(r.q=t._queryObject,r.t=e.tag),r.h=e.hashFn(),this.sendRequest("q",r,r=>{const s=r.d,o=r.s;xc.warnOnListenWarnings_(s,t);(this.listens.get(n)&&this.listens.get(n).get(i))===e&&(this.log_("listen response",r),"ok"!==o&&this.removeListen_(n,i),e.onComplete&&e.onComplete(o,s))})}static warnOnListenWarnings_(e,t){if(e&&"object"===typeof e&&et(e,"w")){const n=tt(e,"w");if(Array.isArray(n)&&~n.indexOf("no_index")){const e='".indexOn": "'+t._queryParams.getIndex().toString()+'"',n=t._path.toString();yl("Using an unspecified index. Your data will be downloaded and "+"filtered on the client. Consider adding ".concat(e," at ")+"".concat(n," to your security rules for better performance."))}}}refreshAuthToken(e){this.authToken_=e,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(e)}reduceReconnectDelayIfAdminCredential_(e){(e&&40===e.length||function(e){const t=Ze(e).claims;return"object"===typeof t&&!0===t.admin}(e))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=3e4)}refreshAppCheckToken(e){this.appCheckToken_=e,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){const e=this.authToken_,t=function(e){const t=Ze(e).claims;return!!t&&"object"===typeof t&&t.hasOwnProperty("iat")}(e)?"auth":"gauth",n={cred:e};null===this.authOverride_?n.noauth=!0:"object"===typeof this.authOverride_&&(n.authvar=this.authOverride_),this.sendRequest(t,n,t=>{const n=t.s,i=t.d||"error";this.authToken_===e&&("ok"===n?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(n,i))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},e=>{const t=e.s,n=e.d||"error";"ok"===t?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(t,n)})}unlisten(e,t){const n=e._path.toString(),i=e._queryIdentifier;this.log_("Unlisten called for "+n+" "+i),Ce(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"unlisten() called for non-default but complete query");this.removeListen_(n,i)&&this.connected_&&this.sendUnlisten_(n,i,e._queryObject,t)}sendUnlisten_(e,t,n,i){this.log_("Unlisten on "+e+" for "+t);const r={p:e};i&&(r.q=n,r.t=i),this.sendRequest("n",r)}onDisconnectPut(e,t,n){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",e,t,n):this.onDisconnectRequestQueue_.push({pathString:e,action:"o",data:t,onComplete:n})}onDisconnectMerge(e,t,n){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",e,t,n):this.onDisconnectRequestQueue_.push({pathString:e,action:"om",data:t,onComplete:n})}onDisconnectCancel(e,t){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",e,null,t):this.onDisconnectRequestQueue_.push({pathString:e,action:"oc",data:null,onComplete:t})}sendOnDisconnect_(e,t,n,i){const r={p:t,d:n};this.log_("onDisconnect "+e,r),this.sendRequest(e,r,e=>{i&&setTimeout(()=>{i(e.s,e.d)},Math.floor(0))})}put(e,t,n,i){this.putInternal("p",e,t,n,i)}merge(e,t,n,i){this.putInternal("m",e,t,n,i)}putInternal(e,t,n,i,r){this.initConnection_();const s={p:t,d:n};void 0!==r&&(s.h=r),this.outstandingPuts_.push({action:e,request:s,onComplete:i}),this.outstandingPutCount_++;const o=this.outstandingPuts_.length-1;this.connected_?this.sendPut_(o):this.log_("Buffering put: "+t)}sendPut_(e){const t=this.outstandingPuts_[e].action,n=this.outstandingPuts_[e].request,i=this.outstandingPuts_[e].onComplete;this.outstandingPuts_[e].queued=this.connected_,this.sendRequest(t,n,n=>{this.log_(t+" response",n),delete this.outstandingPuts_[e],this.outstandingPutCount_--,0===this.outstandingPutCount_&&(this.outstandingPuts_=[]),i&&i(n.s,n.d)})}reportStats(e){if(this.connected_){const t={c:e};this.log_("reportStats",t),this.sendRequest("s",t,e=>{if("ok"!==e.s){const t=e.d;this.log_("reportStats","Error sending stats: "+t)}})}}onDataMessage_(e){if("r"in e){this.log_("from server: "+Je(e));const t=e.r,n=this.requestCBHash_[t];n&&(delete this.requestCBHash_[t],n(e.b))}else{if("error"in e)throw"A server-side error has occurred: "+e.error;"a"in e&&this.onDataPush_(e.a,e.b)}}onDataPush_(e,t){this.log_("handleServerMessage",e,t),"d"===e?this.onDataUpdate_(t.p,t.d,!1,t.t):"m"===e?this.onDataUpdate_(t.p,t.d,!0,t.t):"c"===e?this.onListenRevoked_(t.p,t.q):"ac"===e?this.onAuthRevoked_(t.s,t.d):"apc"===e?this.onAppCheckRevoked_(t.s,t.d):"sd"===e?this.onSecurityDebugPacket_(t):ml("Unrecognized action received from server: "+Je(e)+"\nAre you using the latest client?")}onReady_(e,t){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=(new Date).getTime(),this.handleTimestamp_(e),this.lastSessionId=t,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(e){Ce(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(e))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(e){e&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=bc,this.realtime_||this.scheduleConnect_(0)),this.visible_=e}onOnline_(e){e?(this.log_("Browser went online."),this.reconnectDelay_=bc,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){if(this.visible_){if(this.lastConnectionEstablishedTime_){(new Date).getTime()-this.lastConnectionEstablishedTime_>3e4&&(this.reconnectDelay_=bc),this.lastConnectionEstablishedTime_=null}}else this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=(new Date).getTime();const e=(new Date).getTime()-this.lastConnectionAttemptTime_;let t=Math.max(0,this.reconnectDelay_-e);t=Math.random()*t,this.log_("Trying to reconnect in "+t+"ms"),this.scheduleConnect_(t),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,1.3*this.reconnectDelay_)}this.onConnectStatus_(!1)}async establishConnection_(){if(this.shouldReconnect_()){this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=(new Date).getTime(),this.lastConnectionEstablishedTime_=null;const e=this.onDataMessage_.bind(this),t=this.onReady_.bind(this),n=this.onRealtimeDisconnect_.bind(this),i=this.id+":"+xc.nextConnectionId_++,r=this.lastSessionId;let s=!1,o=null;const a=function(){o?o.close():(s=!0,n())},l=function(e){Ce(o,"sendRequest call when we're not connected not allowed."),o.sendRequest(e)};this.realtime_={close:a,sendRequest:l};const c=this.forceTokenRefresh_;this.forceTokenRefresh_=!1;try{const[a,l]=await Promise.all([this.authTokenProvider_.getToken(c),this.appCheckTokenProvider_.getToken(c)]);s?fl("getToken() completed but was canceled"):(fl("getToken() completed. Creating connection."),this.authToken_=a&&a.accessToken,this.appCheckToken_=l&&l.token,o=new ec(i,this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,e,t,n,e=>{yl(e+" ("+this.repoInfo_.toString()+")"),this.interrupt("server_kill")},r))}catch(ml){this.log_("Failed to get token: "+ml),s||(this.repoInfo_.nodeAdmin&&yl(ml),a())}}}interrupt(e){fl("Interrupting connection for reason: "+e),this.interruptReasons_[e]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(e){fl("Resuming connection for reason: "+e),delete this.interruptReasons_[e],nt(this.interruptReasons_)&&(this.reconnectDelay_=bc,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(e){const t=e-(new Date).getTime();this.onServerInfoUpdate_({serverTimeOffset:t})}cancelSentTransactions_(){for(let e=0;e<this.outstandingPuts_.length;e++){const t=this.outstandingPuts_[e];t&&"h"in t.request&&t.queued&&(t.onComplete&&t.onComplete("disconnect"),delete this.outstandingPuts_[e],this.outstandingPutCount_--)}0===this.outstandingPutCount_&&(this.outstandingPuts_=[])}onListenRevoked_(e,t){let n;n=t?t.map(e=>Cl(e)).join("$"):"default";const i=this.removeListen_(e,n);i&&i.onComplete&&i.onComplete("permission_denied")}removeListen_(e,t){const n=new rc(e).toString();let i;if(this.listens.has(n)){const e=this.listens.get(n);i=e.get(t),e.delete(t),0===e.size&&this.listens.delete(n)}else i=void 0;return i}onAuthRevoked_(e,t){fl("Auth token revoked: "+e+"/"+t),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),"invalid_token"!==e&&"permission_denied"!==e||(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=3&&(this.reconnectDelay_=3e4,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(e,t){fl("App check token revoked: "+e+"/"+t),this.appCheckToken_=null,this.forceTokenRefresh_=!0,"invalid_token"!==e&&"permission_denied"!==e||(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=3&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(e){this.securityDebugCallback_?this.securityDebugCallback_(e):"msg"in e&&console.log("FIREBASE: "+e.msg.replace("\n","\nFIREBASE: "))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const e of this.listens.values())for(const t of e.values())this.sendListen_(t);for(let e=0;e<this.outstandingPuts_.length;e++)this.outstandingPuts_[e]&&this.sendPut_(e);for(;this.onDisconnectRequestQueue_.length;){const e=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(e.action,e.pathString,e.data,e.onComplete)}for(let e=0;e<this.outstandingGets_.length;e++)this.outstandingGets_[e]&&this.sendGet_(e)}sendConnectStats_(){const e={};let t="js";Ke()&&(t=this.repoInfo_.nodeAdmin?"admin_node":"node"),e["sdk."+t+"."+el.replace(/\./g,"-")]=1,qe()?e["framework.cordova"]=1:Ge()&&(e["framework.reactnative"]=1),this.reportStats(e)}shouldReconnect_(){const e=ic.getInstance().currentlyOnline();return nt(this.interruptReasons_)&&e}}xc.nextPersistentConnectionId_=0,xc.nextConnectionId_=0;class kc{constructor(e,t){this.name=e,this.node=t}static Wrap(e,t){return new kc(e,t)}}class Ec{getCompare(){return this.compare.bind(this)}indexedValueChanged(e,t){const n=new kc(wl,e),i=new kc(wl,t);return 0!==this.compare(n,i)}minPost(){return kc.MIN}}let Cc;class Sc extends Ec{static get __EMPTY_NODE(){return Cc}static set __EMPTY_NODE(e){Cc=e}compare(e,t){return xl(e.name,t.name)}isDefinedOn(e){throw Se("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(e,t){return!1}minPost(){return kc.MIN}maxPost(){return new kc(bl,Cc)}makePost(e,t){return Ce("string"===typeof e,"KeyIndex indexValue must always be a string."),new kc(e,Cc)}toString(){return".key"}}const Ac=new Sc;class Tc{constructor(e,t,n,i){let r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null;this.isReverse_=i,this.resultGenerator_=r,this.nodeStack_=[];let s=1;for(;!e.isEmpty();)if(s=t?n(e.key,t):1,i&&(s*=-1),s<0)e=this.isReverse_?e.left:e.right;else{if(0===s){this.nodeStack_.push(e);break}this.nodeStack_.push(e),e=this.isReverse_?e.right:e.left}}getNext(){if(0===this.nodeStack_.length)return null;let e,t=this.nodeStack_.pop();if(e=this.resultGenerator_?this.resultGenerator_(t.key,t.value):{key:t.key,value:t.value},this.isReverse_)for(t=t.left;!t.isEmpty();)this.nodeStack_.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack_.push(t),t=t.left;return e}hasNext(){return this.nodeStack_.length>0}peek(){if(0===this.nodeStack_.length)return null;const e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}}class Pc{constructor(e,t,n,i,r){this.key=e,this.value=t,this.color=null!=n?n:Pc.RED,this.left=null!=i?i:Ic.EMPTY_NODE,this.right=null!=r?r:Ic.EMPTY_NODE}copy(e,t,n,i,r){return new Pc(null!=e?e:this.key,null!=t?t:this.value,null!=n?n:this.color,null!=i?i:this.left,null!=r?r:this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||!!e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,n){let i=this;const r=n(e,i.key);return i=r<0?i.copy(null,null,null,i.left.insert(e,t,n),null):0===r?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,n)),i.fixUp_()}removeMin_(){if(this.left.isEmpty())return Ic.EMPTY_NODE;let e=this;return e.left.isRed_()||e.left.left.isRed_()||(e=e.moveRedLeft_()),e=e.copy(null,null,null,e.left.removeMin_(),null),e.fixUp_()}remove(e,t){let n,i;if(n=this,t(e,n.key)<0)n.left.isEmpty()||n.left.isRed_()||n.left.left.isRed_()||(n=n.moveRedLeft_()),n=n.copy(null,null,null,n.left.remove(e,t),null);else{if(n.left.isRed_()&&(n=n.rotateRight_()),n.right.isEmpty()||n.right.isRed_()||n.right.left.isRed_()||(n=n.moveRedRight_()),0===t(e,n.key)){if(n.right.isEmpty())return Ic.EMPTY_NODE;i=n.right.min_(),n=n.copy(i.key,i.value,null,null,n.right.removeMin_())}n=n.copy(null,null,null,null,n.right.remove(e,t))}return n.fixUp_()}isRed_(){return this.color}fixUp_(){let e=this;return e.right.isRed_()&&!e.left.isRed_()&&(e=e.rotateLeft_()),e.left.isRed_()&&e.left.left.isRed_()&&(e=e.rotateRight_()),e.left.isRed_()&&e.right.isRed_()&&(e=e.colorFlip_()),e}moveRedLeft_(){let e=this.colorFlip_();return e.right.left.isRed_()&&(e=e.copy(null,null,null,null,e.right.rotateRight_()),e=e.rotateLeft_(),e=e.colorFlip_()),e}moveRedRight_(){let e=this.colorFlip_();return e.left.left.isRed_()&&(e=e.rotateRight_(),e=e.colorFlip_()),e}rotateLeft_(){const e=this.copy(null,null,Pc.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight_(){const e=this.copy(null,null,Pc.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip_(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth_(){const e=this.check_();return Math.pow(2,e)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const e=this.left.check_();if(e!==this.right.check_())throw new Error("Black depths differ");return e+(this.isRed_()?0:1)}}Pc.RED=!0,Pc.BLACK=!1;class Ic{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Ic.EMPTY_NODE;this.comparator_=e,this.root_=t}insert(e,t){return new Ic(this.comparator_,this.root_.insert(e,t,this.comparator_).copy(null,null,Pc.BLACK,null,null))}remove(e){return new Ic(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,Pc.BLACK,null,null))}get(e){let t,n=this.root_;for(;!n.isEmpty();){if(t=this.comparator_(e,n.key),0===t)return n.value;t<0?n=n.left:t>0&&(n=n.right)}return null}getPredecessorKey(e){let t,n=this.root_,i=null;for(;!n.isEmpty();){if(t=this.comparator_(e,n.key),0===t){if(n.left.isEmpty())return i?i.key:null;for(n=n.left;!n.right.isEmpty();)n=n.right;return n.key}t<0?n=n.left:t>0&&(i=n,n=n.right)}throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(e){return this.root_.inorderTraversal(e)}reverseTraversal(e){return this.root_.reverseTraversal(e)}getIterator(e){return new Tc(this.root_,null,this.comparator_,!1,e)}getIteratorFrom(e,t){return new Tc(this.root_,e,this.comparator_,!1,t)}getReverseIteratorFrom(e,t){return new Tc(this.root_,e,this.comparator_,!0,t)}getReverseIterator(e){return new Tc(this.root_,null,this.comparator_,!0,e)}}function Rc(e,t){return xl(e.name,t.name)}function Mc(e,t){return xl(e,t)}let Nc;Ic.EMPTY_NODE=new class{copy(e,t,n,i,r){return this}insert(e,t,n){return new Pc(e,t,null)}remove(e,t){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}};const Dc=function(e){return"number"===typeof e?"number:"+Tl(e):"string:"+e},Oc=function(e){if(e.isLeafNode()){const t=e.val();Ce("string"===typeof t||"number"===typeof t||"object"===typeof t&&et(t,".sv"),"Priority must be a string or number.")}else Ce(e===Nc||e.isEmpty(),"priority of unexpected type.");Ce(e===Nc||e.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};let Lc,Fc,jc;class Bc{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Bc.__childrenNodeConstructor.EMPTY_NODE;this.value_=e,this.priorityNode_=t,this.lazyHash_=null,Ce(void 0!==this.value_&&null!==this.value_,"LeafNode shouldn't be created with null/undefined value."),Oc(this.priorityNode_)}static set __childrenNodeConstructor(e){Lc=e}static get __childrenNodeConstructor(){return Lc}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(e){return new Bc(this.value_,e)}getImmediateChild(e){return".priority"===e?this.priorityNode_:Bc.__childrenNodeConstructor.EMPTY_NODE}getChild(e){return pc(e)?this:".priority"===oc(e)?this.priorityNode_:Bc.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(e,t){return null}updateImmediateChild(e,t){return".priority"===e?this.updatePriority(t):t.isEmpty()&&".priority"!==e?this:Bc.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(e,t).updatePriority(this.priorityNode_)}updateChild(e,t){const n=oc(e);return null===n?t:t.isEmpty()&&".priority"!==n?this:(Ce(".priority"!==n||1===ac(e),".priority must be the last token in a path"),this.updateImmediateChild(n,Bc.__childrenNodeConstructor.EMPTY_NODE.updateChild(lc(e),t)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(e,t){return!1}val(e){return e&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(null===this.lazyHash_){let e="";this.priorityNode_.isEmpty()||(e+="priority:"+Dc(this.priorityNode_.val())+":");const t=typeof this.value_;e+=t+":",e+="number"===t?Tl(this.value_):this.value_,this.lazyHash_=cl(e)}return this.lazyHash_}getValue(){return this.value_}compareTo(e){return e===Bc.__childrenNodeConstructor.EMPTY_NODE?1:e instanceof Bc.__childrenNodeConstructor?-1:(Ce(e.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(e))}compareToLeafNode_(e){const t=typeof e.value_,n=typeof this.value_,i=Bc.VALUE_TYPE_ORDER.indexOf(t),r=Bc.VALUE_TYPE_ORDER.indexOf(n);return Ce(i>=0,"Unknown leaf type: "+t),Ce(r>=0,"Unknown leaf type: "+n),i===r?"object"===n?0:this.value_<e.value_?-1:this.value_===e.value_?0:1:r-i}withIndex(){return this}isIndexed(){return!0}equals(e){if(e===this)return!0;if(e.isLeafNode()){const t=e;return this.value_===t.value_&&this.priorityNode_.equals(t.priorityNode_)}return!1}}Bc.VALUE_TYPE_ORDER=["object","boolean","number","string"];const Wc=new class extends Ec{compare(e,t){const n=e.node.getPriority(),i=t.node.getPriority(),r=n.compareTo(i);return 0===r?xl(e.name,t.name):r}isDefinedOn(e){return!e.getPriority().isEmpty()}indexedValueChanged(e,t){return!e.getPriority().equals(t.getPriority())}minPost(){return kc.MIN}maxPost(){return new kc(bl,new Bc("[PRIORITY-POST]",jc))}makePost(e,t){const n=Fc(e);return new kc(t,new Bc("[PRIORITY-POST]",n))}toString(){return".priority"}},Uc=Math.log(2);class zc{constructor(e){var t;this.count=(t=e+1,parseInt(Math.log(t)/Uc,10)),this.current_=this.count-1;const n=(i=this.count,parseInt(Array(i+1).join("1"),2));var i;this.bits_=e+1&n}nextBitIsOne(){const e=!(this.bits_&1<<this.current_);return this.current_--,e}}const Hc=function(e,t,n,i){e.sort(t);const r=function(t,i){const s=i-t;let o,a;if(0===s)return null;if(1===s)return o=e[t],a=n?n(o):o,new Pc(a,o.node,Pc.BLACK,null,null);{const l=parseInt(s/2,10)+t,c=r(t,l),u=r(l+1,i);return o=e[l],a=n?n(o):o,new Pc(a,o.node,Pc.BLACK,c,u)}},s=function(t){let i=null,s=null,o=e.length;const a=function(t,i){const s=o-t,a=o;o-=t;const c=r(s+1,a),u=e[s],h=n?n(u):u;l(new Pc(h,u.node,i,null,c))},l=function(e){i?(i.left=e,i=e):(s=e,i=e)};for(let e=0;e<t.count;++e){const n=t.nextBitIsOne(),i=Math.pow(2,t.count-(e+1));n?a(i,Pc.BLACK):(a(i,Pc.BLACK),a(i,Pc.RED))}return s}(new zc(e.length));return new Ic(i||t,s)};let Vc;const qc={};class Gc{constructor(e,t){this.indexes_=e,this.indexSet_=t}static get Default(){return Ce(qc&&Wc,"ChildrenNode.ts has not been loaded"),Vc=Vc||new Gc({".priority":qc},{".priority":Wc}),Vc}get(e){const t=tt(this.indexes_,e);if(!t)throw new Error("No index defined for "+e);return t instanceof Ic?t:null}hasIndex(e){return et(this.indexSet_,e.toString())}addIndex(e,t){Ce(e!==Ac,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const n=[];let i=!1;const r=t.getIterator(kc.Wrap);let s,o=r.getNext();for(;o;)i=i||e.isDefinedOn(o.node),n.push(o),o=r.getNext();s=i?Hc(n,e.getCompare()):qc;const a=e.toString(),l=Object.assign({},this.indexSet_);l[a]=e;const c=Object.assign({},this.indexes_);return c[a]=s,new Gc(c,l)}addToIndexes(e,t){const n=it(this.indexes_,(n,i)=>{const r=tt(this.indexSet_,i);if(Ce(r,"Missing index implementation for "+i),n===qc){if(r.isDefinedOn(e.node)){const n=[],i=t.getIterator(kc.Wrap);let s=i.getNext();for(;s;)s.name!==e.name&&n.push(s),s=i.getNext();return n.push(e),Hc(n,r.getCompare())}return qc}{const i=t.get(e.name);let r=n;return i&&(r=r.remove(new kc(e.name,i))),r.insert(e,e.node)}});return new Gc(n,this.indexSet_)}removeFromIndexes(e,t){const n=it(this.indexes_,n=>{if(n===qc)return n;{const i=t.get(e.name);return i?n.remove(new kc(e.name,i)):n}});return new Gc(n,this.indexSet_)}}let Kc;class Yc{constructor(e,t,n){this.children_=e,this.priorityNode_=t,this.indexMap_=n,this.lazyHash_=null,this.priorityNode_&&Oc(this.priorityNode_),this.children_.isEmpty()&&Ce(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}static get EMPTY_NODE(){return Kc||(Kc=new Yc(new Ic(Mc),null,Gc.Default))}isLeafNode(){return!1}getPriority(){return this.priorityNode_||Kc}updatePriority(e){return this.children_.isEmpty()?this:new Yc(this.children_,e,this.indexMap_)}getImmediateChild(e){if(".priority"===e)return this.getPriority();{const t=this.children_.get(e);return null===t?Kc:t}}getChild(e){const t=oc(e);return null===t?this:this.getImmediateChild(t).getChild(lc(e))}hasChild(e){return null!==this.children_.get(e)}updateImmediateChild(e,t){if(Ce(t,"We should always be passing snapshot nodes"),".priority"===e)return this.updatePriority(t);{const n=new kc(e,t);let i,r;t.isEmpty()?(i=this.children_.remove(e),r=this.indexMap_.removeFromIndexes(n,this.children_)):(i=this.children_.insert(e,t),r=this.indexMap_.addToIndexes(n,this.children_));const s=i.isEmpty()?Kc:this.priorityNode_;return new Yc(i,s,r)}}updateChild(e,t){const n=oc(e);if(null===n)return t;{Ce(".priority"!==oc(e)||1===ac(e),".priority must be the last token in a path");const i=this.getImmediateChild(n).updateChild(lc(e),t);return this.updateImmediateChild(n,i)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(e){if(this.isEmpty())return null;const t={};let n=0,i=0,r=!0;if(this.forEachChild(Wc,(s,o)=>{t[s]=o.val(e),n++,r&&Yc.INTEGER_REGEXP_.test(s)?i=Math.max(i,Number(s)):r=!1}),!e&&r&&i<2*n){const e=[];for(const n in t)e[n]=t[n];return e}return e&&!this.getPriority().isEmpty()&&(t[".priority"]=this.getPriority().val()),t}hash(){if(null===this.lazyHash_){let e="";this.getPriority().isEmpty()||(e+="priority:"+Dc(this.getPriority().val())+":"),this.forEachChild(Wc,(t,n)=>{const i=n.hash();""!==i&&(e+=":"+t+":"+i)}),this.lazyHash_=""===e?"":cl(e)}return this.lazyHash_}getPredecessorChildName(e,t,n){const i=this.resolveIndex_(n);if(i){const n=i.getPredecessorKey(new kc(e,t));return n?n.name:null}return this.children_.getPredecessorKey(e)}getFirstChildName(e){const t=this.resolveIndex_(e);if(t){const e=t.minKey();return e&&e.name}return this.children_.minKey()}getFirstChild(e){const t=this.getFirstChildName(e);return t?new kc(t,this.children_.get(t)):null}getLastChildName(e){const t=this.resolveIndex_(e);if(t){const e=t.maxKey();return e&&e.name}return this.children_.maxKey()}getLastChild(e){const t=this.getLastChildName(e);return t?new kc(t,this.children_.get(t)):null}forEachChild(e,t){const n=this.resolveIndex_(e);return n?n.inorderTraversal(e=>t(e.name,e.node)):this.children_.inorderTraversal(t)}getIterator(e){return this.getIteratorFrom(e.minPost(),e)}getIteratorFrom(e,t){const n=this.resolveIndex_(t);if(n)return n.getIteratorFrom(e,e=>e);{const n=this.children_.getIteratorFrom(e.name,kc.Wrap);let i=n.peek();for(;null!=i&&t.compare(i,e)<0;)n.getNext(),i=n.peek();return n}}getReverseIterator(e){return this.getReverseIteratorFrom(e.maxPost(),e)}getReverseIteratorFrom(e,t){const n=this.resolveIndex_(t);if(n)return n.getReverseIteratorFrom(e,e=>e);{const n=this.children_.getReverseIteratorFrom(e.name,kc.Wrap);let i=n.peek();for(;null!=i&&t.compare(i,e)>0;)n.getNext(),i=n.peek();return n}}compareTo(e){return this.isEmpty()?e.isEmpty()?0:-1:e.isLeafNode()||e.isEmpty()?1:e===Xc?-1:0}withIndex(e){if(e===Ac||this.indexMap_.hasIndex(e))return this;{const t=this.indexMap_.addIndex(e,this.children_);return new Yc(this.children_,this.priorityNode_,t)}}isIndexed(e){return e===Ac||this.indexMap_.hasIndex(e)}equals(e){if(e===this)return!0;if(e.isLeafNode())return!1;{const t=e;if(this.getPriority().equals(t.getPriority())){if(this.children_.count()===t.children_.count()){const e=this.getIterator(Wc),n=t.getIterator(Wc);let i=e.getNext(),r=n.getNext();for(;i&&r;){if(i.name!==r.name||!i.node.equals(r.node))return!1;i=e.getNext(),r=n.getNext()}return null===i&&null===r}return!1}return!1}}resolveIndex_(e){return e===Ac?null:this.indexMap_.get(e.toString())}}Yc.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/;const Xc=new class extends Yc{constructor(){super(new Ic(Mc),Yc.EMPTY_NODE,Gc.Default)}compareTo(e){return e===this?0:1}equals(e){return e===this}getPriority(){return this}getImmediateChild(e){return Yc.EMPTY_NODE}isEmpty(){return!1}};Object.defineProperties(kc,{MIN:{value:new kc(wl,Yc.EMPTY_NODE)},MAX:{value:new kc(bl,Xc)}}),Sc.__EMPTY_NODE=Yc.EMPTY_NODE,Bc.__childrenNodeConstructor=Yc,Nc=Xc,function(e){jc=e}(Xc);function Qc(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(null===e)return Yc.EMPTY_NODE;if("object"===typeof e&&".priority"in e&&(t=e[".priority"]),Ce(null===t||"string"===typeof t||"number"===typeof t||"object"===typeof t&&".sv"in t,"Invalid priority type found: "+typeof t),"object"===typeof e&&".value"in e&&null!==e[".value"]&&(e=e[".value"]),"object"!==typeof e||".sv"in e){return new Bc(e,Qc(t))}if(e instanceof Array){let n=Yc.EMPTY_NODE;return Al(e,(t,i)=>{if(et(e,t)&&"."!==t.substring(0,1)){const e=Qc(i);!e.isLeafNode()&&e.isEmpty()||(n=n.updateImmediateChild(t,e))}}),n.updatePriority(Qc(t))}{const n=[];let i=!1;if(Al(e,(e,t)=>{if("."!==e.substring(0,1)){const r=Qc(t);r.isEmpty()||(i=i||!r.getPriority().isEmpty(),n.push(new kc(e,r)))}}),0===n.length)return Yc.EMPTY_NODE;const r=Hc(n,Rc,e=>e.name,Mc);if(i){const e=Hc(n,Wc.getCompare());return new Yc(r,Qc(t),new Gc({".priority":e},{".priority":Wc}))}return new Yc(r,Qc(t),Gc.Default)}}!function(e){Fc=e}(Qc);class $c extends Ec{constructor(e){super(),this.indexPath_=e,Ce(!pc(e)&&".priority"!==oc(e),"Can't create PathIndex with empty path or .priority key")}extractChild(e){return e.getChild(this.indexPath_)}isDefinedOn(e){return!e.getChild(this.indexPath_).isEmpty()}compare(e,t){const n=this.extractChild(e.node),i=this.extractChild(t.node),r=n.compareTo(i);return 0===r?xl(e.name,t.name):r}makePost(e,t){const n=Qc(e),i=Yc.EMPTY_NODE.updateChild(this.indexPath_,n);return new kc(t,i)}maxPost(){const e=Yc.EMPTY_NODE.updateChild(this.indexPath_,Xc);return new kc(bl,e)}toString(){return uc(this.indexPath_,0).join("/")}}const Jc=new class extends Ec{compare(e,t){const n=e.node.compareTo(t.node);return 0===n?xl(e.name,t.name):n}isDefinedOn(e){return!0}indexedValueChanged(e,t){return!e.equals(t)}minPost(){return kc.MIN}maxPost(){return kc.MAX}makePost(e,t){const n=Qc(e);return new kc(t,n)}toString(){return".value"}};function Zc(e){return{type:"value",snapshotNode:e}}function eu(e,t){return{type:"child_added",snapshotNode:t,childName:e}}function tu(e,t){return{type:"child_removed",snapshotNode:t,childName:e}}function nu(e,t,n){return{type:"child_changed",snapshotNode:t,childName:e,oldSnap:n}}class iu{constructor(e){this.index_=e}updateChild(e,t,n,i,r,s){Ce(e.isIndexed(this.index_),"A node must be indexed if only a child is updated");const o=e.getImmediateChild(t);return o.getChild(i).equals(n.getChild(i))&&o.isEmpty()===n.isEmpty()?e:(null!=s&&(n.isEmpty()?e.hasChild(t)?s.trackChildChange(tu(t,o)):Ce(e.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):o.isEmpty()?s.trackChildChange(eu(t,n)):s.trackChildChange(nu(t,n,o))),e.isLeafNode()&&n.isEmpty()?e:e.updateImmediateChild(t,n).withIndex(this.index_))}updateFullNode(e,t,n){return null!=n&&(e.isLeafNode()||e.forEachChild(Wc,(e,i)=>{t.hasChild(e)||n.trackChildChange(tu(e,i))}),t.isLeafNode()||t.forEachChild(Wc,(t,i)=>{if(e.hasChild(t)){const r=e.getImmediateChild(t);r.equals(i)||n.trackChildChange(nu(t,i,r))}else n.trackChildChange(eu(t,i))})),t.withIndex(this.index_)}updatePriority(e,t){return e.isEmpty()?Yc.EMPTY_NODE:e.updatePriority(t)}filtersNodes(){return!1}getIndexedFilter(){return this}getIndex(){return this.index_}}class ru{constructor(e){this.indexedFilter_=new iu(e.getIndex()),this.index_=e.getIndex(),this.startPost_=ru.getStartPost_(e),this.endPost_=ru.getEndPost_(e),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}getStartPost(){return this.startPost_}getEndPost(){return this.endPost_}matches(e){const t=this.startIsInclusive_?this.index_.compare(this.getStartPost(),e)<=0:this.index_.compare(this.getStartPost(),e)<0,n=this.endIsInclusive_?this.index_.compare(e,this.getEndPost())<=0:this.index_.compare(e,this.getEndPost())<0;return t&&n}updateChild(e,t,n,i,r,s){return this.matches(new kc(t,n))||(n=Yc.EMPTY_NODE),this.indexedFilter_.updateChild(e,t,n,i,r,s)}updateFullNode(e,t,n){t.isLeafNode()&&(t=Yc.EMPTY_NODE);let i=t.withIndex(this.index_);i=i.updatePriority(Yc.EMPTY_NODE);const r=this;return t.forEachChild(Wc,(e,t)=>{r.matches(new kc(e,t))||(i=i.updateImmediateChild(e,Yc.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(e,i,n)}updatePriority(e,t){return e}filtersNodes(){return!0}getIndexedFilter(){return this.indexedFilter_}getIndex(){return this.index_}static getStartPost_(e){if(e.hasStart()){const t=e.getIndexStartName();return e.getIndex().makePost(e.getIndexStartValue(),t)}return e.getIndex().minPost()}static getEndPost_(e){if(e.hasEnd()){const t=e.getIndexEndName();return e.getIndex().makePost(e.getIndexEndValue(),t)}return e.getIndex().maxPost()}}class su{constructor(e){this.withinDirectionalStart=e=>this.reverse_?this.withinEndPost(e):this.withinStartPost(e),this.withinDirectionalEnd=e=>this.reverse_?this.withinStartPost(e):this.withinEndPost(e),this.withinStartPost=e=>{const t=this.index_.compare(this.rangedFilter_.getStartPost(),e);return this.startIsInclusive_?t<=0:t<0},this.withinEndPost=e=>{const t=this.index_.compare(e,this.rangedFilter_.getEndPost());return this.endIsInclusive_?t<=0:t<0},this.rangedFilter_=new ru(e),this.index_=e.getIndex(),this.limit_=e.getLimit(),this.reverse_=!e.isViewFromLeft(),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}updateChild(e,t,n,i,r,s){return this.rangedFilter_.matches(new kc(t,n))||(n=Yc.EMPTY_NODE),e.getImmediateChild(t).equals(n)?e:e.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(e,t,n,i,r,s):this.fullLimitUpdateChild_(e,t,n,r,s)}updateFullNode(e,t,n){let i;if(t.isLeafNode()||t.isEmpty())i=Yc.EMPTY_NODE.withIndex(this.index_);else if(2*this.limit_<t.numChildren()&&t.isIndexed(this.index_)){let e;i=Yc.EMPTY_NODE.withIndex(this.index_),e=this.reverse_?t.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):t.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);let n=0;for(;e.hasNext()&&n<this.limit_;){const t=e.getNext();if(this.withinDirectionalStart(t)){if(!this.withinDirectionalEnd(t))break;i=i.updateImmediateChild(t.name,t.node),n++}}}else{let e;i=t.withIndex(this.index_),i=i.updatePriority(Yc.EMPTY_NODE),e=this.reverse_?i.getReverseIterator(this.index_):i.getIterator(this.index_);let n=0;for(;e.hasNext();){const t=e.getNext();n<this.limit_&&this.withinDirectionalStart(t)&&this.withinDirectionalEnd(t)?n++:i=i.updateImmediateChild(t.name,Yc.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(e,i,n)}updatePriority(e,t){return e}filtersNodes(){return!0}getIndexedFilter(){return this.rangedFilter_.getIndexedFilter()}getIndex(){return this.index_}fullLimitUpdateChild_(e,t,n,i,r){let s;if(this.reverse_){const e=this.index_.getCompare();s=(t,n)=>e(n,t)}else s=this.index_.getCompare();const o=e;Ce(o.numChildren()===this.limit_,"");const a=new kc(t,n),l=this.reverse_?o.getFirstChild(this.index_):o.getLastChild(this.index_),c=this.rangedFilter_.matches(a);if(o.hasChild(t)){const e=o.getImmediateChild(t);let u=i.getChildAfterChild(this.index_,l,this.reverse_);for(;null!=u&&(u.name===t||o.hasChild(u.name));)u=i.getChildAfterChild(this.index_,u,this.reverse_);const h=null==u?1:s(u,a);if(c&&!n.isEmpty()&&h>=0)return null!=r&&r.trackChildChange(nu(t,n,e)),o.updateImmediateChild(t,n);{null!=r&&r.trackChildChange(tu(t,e));const n=o.updateImmediateChild(t,Yc.EMPTY_NODE);return null!=u&&this.rangedFilter_.matches(u)?(null!=r&&r.trackChildChange(eu(u.name,u.node)),n.updateImmediateChild(u.name,u.node)):n}}return n.isEmpty()?e:c&&s(l,a)>=0?(null!=r&&(r.trackChildChange(tu(l.name,l.node)),r.trackChildChange(eu(t,n))),o.updateImmediateChild(t,n).updateImmediateChild(l.name,Yc.EMPTY_NODE)):e}}class ou{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=Wc}hasStart(){return this.startSet_}isViewFromLeft(){return""===this.viewFrom_?this.startSet_:"l"===this.viewFrom_}getIndexStartValue(){return Ce(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return Ce(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:wl}hasEnd(){return this.endSet_}getIndexEndValue(){return Ce(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return Ce(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:bl}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&""!==this.viewFrom_}getLimit(){return Ce(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===Wc}copy(){const e=new ou;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.startAfterSet_=this.startAfterSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.endBeforeSet_=this.endBeforeSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e}}function au(e){const t={};if(e.isDefault())return t;let n;if(e.index_===Wc?n="$priority":e.index_===Jc?n="$value":e.index_===Ac?n="$key":(Ce(e.index_ instanceof $c,"Unrecognized index type!"),n=e.index_.toString()),t.orderBy=Je(n),e.startSet_){const n=e.startAfterSet_?"startAfter":"startAt";t[n]=Je(e.indexStartValue_),e.startNameSet_&&(t[n]+=","+Je(e.indexStartName_))}if(e.endSet_){const n=e.endBeforeSet_?"endBefore":"endAt";t[n]=Je(e.indexEndValue_),e.endNameSet_&&(t[n]+=","+Je(e.indexEndName_))}return e.limitSet_&&(e.isViewFromLeft()?t.limitToFirst=e.limit_:t.limitToLast=e.limit_),t}function lu(e){const t={};if(e.startSet_&&(t.sp=e.indexStartValue_,e.startNameSet_&&(t.sn=e.indexStartName_),t.sin=!e.startAfterSet_),e.endSet_&&(t.ep=e.indexEndValue_,e.endNameSet_&&(t.en=e.indexEndName_),t.ein=!e.endBeforeSet_),e.limitSet_){t.l=e.limit_;let n=e.viewFrom_;""===n&&(n=e.isViewFromLeft()?"l":"r"),t.vf=n}return e.index_!==Wc&&(t.i=e.index_.toString()),t}class cu extends tc{constructor(e,t,n,i){super(),this.repoInfo_=e,this.onDataUpdate_=t,this.authTokenProvider_=n,this.appCheckTokenProvider_=i,this.log_=gl("p:rest:"),this.listens_={}}reportStats(e){throw new Error("Method not implemented.")}static getListenId_(e,t){return void 0!==t?"tag$"+t:(Ce(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())}listen(e,t,n,i){const r=e._path.toString();this.log_("Listen called for "+r+" "+e._queryIdentifier);const s=cu.getListenId_(e,n),o={};this.listens_[s]=o;const a=au(e._queryParams);this.restRequest_(r+".json",a,(e,t)=>{let a=t;if(404===e&&(a=null,e=null),null===e&&this.onDataUpdate_(r,a,!1,n),tt(this.listens_,s)===o){let t;t=e?401===e?"permission_denied":"rest_error:"+e:"ok",i(t,null)}})}unlisten(e,t){const n=cu.getListenId_(e,t);delete this.listens_[n]}get(e){const t=au(e._queryParams),n=e._path.toString(),i=new ze;return this.restRequest_(n+".json",t,(e,t)=>{let r=t;404===e&&(r=null,e=null),null===e?(this.onDataUpdate_(n,r,!1,null),i.resolve(r)):i.reject(new Error(r))}),i.promise}refreshAuthToken(e){}restRequest_(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2?arguments[2]:void 0;return t.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(i=>{let[r,s]=i;r&&r.accessToken&&(t.auth=r.accessToken),s&&s.token&&(t.ac=s.token);const o=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+e+"?ns="+this.repoInfo_.namespace+ot(t);this.log_("Sending REST request for "+o);const a=new XMLHttpRequest;a.onreadystatechange=()=>{if(n&&4===a.readyState){this.log_("REST Response for "+o+" received. status:",a.status,"response:",a.responseText);let e=null;if(a.status>=200&&a.status<300){try{e=$e(a.responseText)}catch(nz){yl("Failed to parse JSON response for "+o+": "+a.responseText)}n(null,e)}else 401!==a.status&&404!==a.status&&yl("Got unsuccessful REST response for "+o+" Status: "+a.status),n(a.status);n=null}},a.open("GET",o,!0),a.send()})}}class uu{constructor(){this.rootNode_=Yc.EMPTY_NODE}getNode(e){return this.rootNode_.getChild(e)}updateSnapshot(e,t){this.rootNode_=this.rootNode_.updateChild(e,t)}}function hu(){return{value:null,children:new Map}}function du(e,t,n){if(pc(t))e.value=n,e.children.clear();else if(null!==e.value)e.value=e.value.updateChild(t,n);else{const i=oc(t);e.children.has(i)||e.children.set(i,hu());du(e.children.get(i),t=lc(t),n)}}function pu(e,t,n){null!==e.value?n(t,e.value):function(e,t){e.children.forEach((e,n)=>{t(n,e)})}(e,(e,i)=>{pu(i,new rc(t.toString()+"/"+e),n)})}class fu{constructor(e){this.collection_=e,this.last_=null}get(){const e=this.collection_.get(),t=Object.assign({},e);return this.last_&&Al(this.last_,(e,n)=>{t[e]=t[e]-n}),this.last_=e,t}}class gu{constructor(e,t){this.server_=t,this.statsToReport_={},this.statsListener_=new fu(e);const n=1e4+2e4*Math.random();Ml(this.reportStats_.bind(this),Math.floor(n))}reportStats_(){const e=this.statsListener_.get(),t={};let n=!1;Al(e,(e,i)=>{i>0&&et(this.statsToReport_,e)&&(t[e]=i,n=!0)}),n&&this.server_.reportStats(t),Ml(this.reportStats_.bind(this),Math.floor(2*Math.random()*3e5))}}var mu;function vu(e){return{fromUser:!1,fromServer:!0,queryId:e,tagged:!0}}!function(e){e[e.OVERWRITE=0]="OVERWRITE",e[e.MERGE=1]="MERGE",e[e.ACK_USER_WRITE=2]="ACK_USER_WRITE",e[e.LISTEN_COMPLETE=3]="LISTEN_COMPLETE"}(mu||(mu={}));class yu{constructor(e,t,n){this.path=e,this.affectedTree=t,this.revert=n,this.type=mu.ACK_USER_WRITE,this.source={fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}operationForChild(e){if(pc(this.path)){if(null!=this.affectedTree.value)return Ce(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const t=this.affectedTree.subtree(new rc(e));return new yu(sc(),t,this.revert)}}return Ce(oc(this.path)===e,"operationForChild called for unrelated child."),new yu(lc(this.path),this.affectedTree,this.revert)}}class _u{constructor(e,t){this.source=e,this.path=t,this.type=mu.LISTEN_COMPLETE}operationForChild(e){return pc(this.path)?new _u(this.source,sc()):new _u(this.source,lc(this.path))}}class wu{constructor(e,t,n){this.source=e,this.path=t,this.snap=n,this.type=mu.OVERWRITE}operationForChild(e){return pc(this.path)?new wu(this.source,sc(),this.snap.getImmediateChild(e)):new wu(this.source,lc(this.path),this.snap)}}class bu{constructor(e,t,n){this.source=e,this.path=t,this.children=n,this.type=mu.MERGE}operationForChild(e){if(pc(this.path)){const t=this.children.subtree(new rc(e));return t.isEmpty()?null:t.value?new wu(this.source,sc(),t.value):new bu(this.source,sc(),t)}return Ce(oc(this.path)===e,"Can't get a merge for a child not on the path of the operation"),new bu(this.source,lc(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}class xu{constructor(e,t,n){this.node_=e,this.fullyInitialized_=t,this.filtered_=n}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(e){if(pc(e))return this.isFullyInitialized()&&!this.filtered_;const t=oc(e);return this.isCompleteForChild(t)}isCompleteForChild(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}getNode(){return this.node_}}class ku{constructor(e){this.query_=e,this.index_=this.query_._queryParams.getIndex()}}function Eu(e,t,n,i,r,s){const o=i.filter(e=>e.type===n);o.sort((t,n)=>function(e,t,n){if(null==t.childName||null==n.childName)throw Se("Should only compare child_ events.");const i=new kc(t.childName,t.snapshotNode),r=new kc(n.childName,n.snapshotNode);return e.index_.compare(i,r)}(e,t,n)),o.forEach(n=>{const i=function(e,t,n){return"value"===t.type||"child_removed"===t.type||(t.prevName=n.getPredecessorChildName(t.childName,t.snapshotNode,e.index_)),t}(e,n,s);r.forEach(r=>{r.respondsTo(n.type)&&t.push(r.createEvent(i,e.query_))})})}function Cu(e,t){return{eventCache:e,serverCache:t}}function Su(e,t,n,i){return Cu(new xu(t,n,i),e.serverCache)}function Au(e,t,n,i){return Cu(e.eventCache,new xu(t,n,i))}function Tu(e){return e.eventCache.isFullyInitialized()?e.eventCache.getNode():null}function Pu(e){return e.serverCache.isFullyInitialized()?e.serverCache.getNode():null}let Iu;class Ru{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:(Iu||(Iu=new Ic(kl)),Iu);this.value=e,this.children=t}static fromObject(e){let t=new Ru(null);return Al(e,(e,n)=>{t=t.set(new rc(e),n)}),t}isEmpty(){return null===this.value&&this.children.isEmpty()}findRootMostMatchingPathAndValue(e,t){if(null!=this.value&&t(this.value))return{path:sc(),value:this.value};if(pc(e))return null;{const n=oc(e),i=this.children.get(n);if(null!==i){const r=i.findRootMostMatchingPathAndValue(lc(e),t);if(null!=r){return{path:dc(new rc(n),r.path),value:r.value}}return null}return null}}findRootMostValueAndPath(e){return this.findRootMostMatchingPathAndValue(e,()=>!0)}subtree(e){if(pc(e))return this;{const t=oc(e),n=this.children.get(t);return null!==n?n.subtree(lc(e)):new Ru(null)}}set(e,t){if(pc(e))return new Ru(t,this.children);{const n=oc(e),i=(this.children.get(n)||new Ru(null)).set(lc(e),t),r=this.children.insert(n,i);return new Ru(this.value,r)}}remove(e){if(pc(e))return this.children.isEmpty()?new Ru(null):new Ru(null,this.children);{const t=oc(e),n=this.children.get(t);if(n){const i=n.remove(lc(e));let r;return r=i.isEmpty()?this.children.remove(t):this.children.insert(t,i),null===this.value&&r.isEmpty()?new Ru(null):new Ru(this.value,r)}return this}}get(e){if(pc(e))return this.value;{const t=oc(e),n=this.children.get(t);return n?n.get(lc(e)):null}}setTree(e,t){if(pc(e))return t;{const n=oc(e),i=(this.children.get(n)||new Ru(null)).setTree(lc(e),t);let r;return r=i.isEmpty()?this.children.remove(n):this.children.insert(n,i),new Ru(this.value,r)}}fold(e){return this.fold_(sc(),e)}fold_(e,t){const n={};return this.children.inorderTraversal((i,r)=>{n[i]=r.fold_(dc(e,i),t)}),t(e,this.value,n)}findOnPath(e,t){return this.findOnPath_(e,sc(),t)}findOnPath_(e,t,n){const i=!!this.value&&n(t,this.value);if(i)return i;if(pc(e))return null;{const i=oc(e),r=this.children.get(i);return r?r.findOnPath_(lc(e),dc(t,i),n):null}}foreachOnPath(e,t){return this.foreachOnPath_(e,sc(),t)}foreachOnPath_(e,t,n){if(pc(e))return this;{this.value&&n(t,this.value);const i=oc(e),r=this.children.get(i);return r?r.foreachOnPath_(lc(e),dc(t,i),n):new Ru(null)}}foreach(e){this.foreach_(sc(),e)}foreach_(e,t){this.children.inorderTraversal((n,i)=>{i.foreach_(dc(e,n),t)}),this.value&&t(e,this.value)}foreachChild(e){this.children.inorderTraversal((t,n)=>{n.value&&e(t,n.value)})}}class Mu{constructor(e){this.writeTree_=e}static empty(){return new Mu(new Ru(null))}}function Nu(e,t,n){if(pc(t))return new Mu(new Ru(n));{const i=e.writeTree_.findRootMostValueAndPath(t);if(null!=i){const r=i.path;let s=i.value;const o=fc(r,t);return s=s.updateChild(o,n),new Mu(e.writeTree_.set(r,s))}{const i=new Ru(n),r=e.writeTree_.setTree(t,i);return new Mu(r)}}}function Du(e,t,n){let i=e;return Al(n,(e,n)=>{i=Nu(i,dc(t,e),n)}),i}function Ou(e,t){if(pc(t))return Mu.empty();{const n=e.writeTree_.setTree(t,new Ru(null));return new Mu(n)}}function Lu(e,t){return null!=Fu(e,t)}function Fu(e,t){const n=e.writeTree_.findRootMostValueAndPath(t);return null!=n?e.writeTree_.get(n.path).getChild(fc(n.path,t)):null}function ju(e){const t=[],n=e.writeTree_.value;return null!=n?n.isLeafNode()||n.forEachChild(Wc,(e,n)=>{t.push(new kc(e,n))}):e.writeTree_.children.inorderTraversal((e,n)=>{null!=n.value&&t.push(new kc(e,n.value))}),t}function Bu(e,t){if(pc(t))return e;{const n=Fu(e,t);return new Mu(null!=n?new Ru(n):e.writeTree_.subtree(t))}}function Wu(e){return e.writeTree_.isEmpty()}function Uu(e,t){return zu(sc(),e.writeTree_,t)}function zu(e,t,n){if(null!=t.value)return n.updateChild(e,t.value);{let i=null;return t.children.inorderTraversal((t,r)=>{".priority"===t?(Ce(null!==r.value,"Priority writes must always be leaf nodes"),i=r.value):n=zu(dc(e,t),r,n)}),n.getChild(e).isEmpty()||null===i||(n=n.updateChild(dc(e,".priority"),i)),n}}function Hu(e,t){return nh(t,e)}function Vu(e,t){const n=e.allWrites.findIndex(e=>e.writeId===t);Ce(n>=0,"removeWrite called with nonexistent writeId.");const i=e.allWrites[n];e.allWrites.splice(n,1);let r=i.visible,s=!1,o=e.allWrites.length-1;for(;r&&o>=0;){const t=e.allWrites[o];t.visible&&(o>=n&&qu(t,i.path)?r=!1:mc(i.path,t.path)&&(s=!0)),o--}if(r){if(s)return function(e){e.visibleWrites=Ku(e.allWrites,Gu,sc()),e.allWrites.length>0?e.lastWriteId=e.allWrites[e.allWrites.length-1].writeId:e.lastWriteId=-1}(e),!0;if(i.snap)e.visibleWrites=Ou(e.visibleWrites,i.path);else{Al(i.children,t=>{e.visibleWrites=Ou(e.visibleWrites,dc(i.path,t))})}return!0}return!1}function qu(e,t){if(e.snap)return mc(e.path,t);for(const n in e.children)if(e.children.hasOwnProperty(n)&&mc(dc(e.path,n),t))return!0;return!1}function Gu(e){return e.visible}function Ku(e,t,n){let i=Mu.empty();for(let r=0;r<e.length;++r){const s=e[r];if(t(s)){const e=s.path;let t;if(s.snap)mc(n,e)?(t=fc(n,e),i=Nu(i,t,s.snap)):mc(e,n)&&(t=fc(e,n),i=Nu(i,sc(),s.snap.getChild(t)));else{if(!s.children)throw Se("WriteRecord should have .snap or .children");if(mc(n,e))t=fc(n,e),i=Du(i,t,s.children);else if(mc(e,n))if(t=fc(e,n),pc(t))i=Du(i,sc(),s.children);else{const e=tt(s.children,oc(t));if(e){const n=e.getChild(lc(t));i=Nu(i,sc(),n)}}}}}return i}function Yu(e,t,n,i,r){if(i||r){const s=Bu(e.visibleWrites,t);if(!r&&Wu(s))return n;if(r||null!=n||Lu(s,sc())){const s=function(e){return(e.visible||r)&&(!i||!~i.indexOf(e.writeId))&&(mc(e.path,t)||mc(t,e.path))};return Uu(Ku(e.allWrites,s,t),n||Yc.EMPTY_NODE)}return null}{const i=Fu(e.visibleWrites,t);if(null!=i)return i;{const i=Bu(e.visibleWrites,t);if(Wu(i))return n;if(null!=n||Lu(i,sc())){return Uu(i,n||Yc.EMPTY_NODE)}return null}}}function Xu(e,t,n,i){return Yu(e.writeTree,e.treePath,t,n,i)}function Qu(e,t){return function(e,t,n){let i=Yc.EMPTY_NODE;const r=Fu(e.visibleWrites,t);if(r)return r.isLeafNode()||r.forEachChild(Wc,(e,t)=>{i=i.updateImmediateChild(e,t)}),i;if(n){const r=Bu(e.visibleWrites,t);return n.forEachChild(Wc,(e,t)=>{const n=Uu(Bu(r,new rc(e)),t);i=i.updateImmediateChild(e,n)}),ju(r).forEach(e=>{i=i.updateImmediateChild(e.name,e.node)}),i}return ju(Bu(e.visibleWrites,t)).forEach(e=>{i=i.updateImmediateChild(e.name,e.node)}),i}(e.writeTree,e.treePath,t)}function $u(e,t,n,i){return function(e,t,n,i,r){Ce(i||r,"Either existingEventSnap or existingServerSnap must exist");const s=dc(t,n);if(Lu(e.visibleWrites,s))return null;{const t=Bu(e.visibleWrites,s);return Wu(t)?r.getChild(n):Uu(t,r.getChild(n))}}(e.writeTree,e.treePath,t,n,i)}function Ju(e,t){return function(e,t){return Fu(e.visibleWrites,t)}(e.writeTree,dc(e.treePath,t))}function Zu(e,t,n,i,r,s){return function(e,t,n,i,r,s,o){let a;const l=Bu(e.visibleWrites,t),c=Fu(l,sc());if(null!=c)a=c;else{if(null==n)return[];a=Uu(l,n)}if(a=a.withIndex(o),a.isEmpty()||a.isLeafNode())return[];{const e=[],t=o.getCompare(),n=s?a.getReverseIteratorFrom(i,o):a.getIteratorFrom(i,o);let l=n.getNext();for(;l&&e.length<r;)0!==t(l,i)&&e.push(l),l=n.getNext();return e}}(e.writeTree,e.treePath,t,n,i,r,s)}function eh(e,t,n){return function(e,t,n,i){const r=dc(t,n),s=Fu(e.visibleWrites,r);if(null!=s)return s;if(i.isCompleteForChild(n))return Uu(Bu(e.visibleWrites,r),i.getNode().getImmediateChild(n));return null}(e.writeTree,e.treePath,t,n)}function th(e,t){return nh(dc(e.treePath,t),e.writeTree)}function nh(e,t){return{treePath:e,writeTree:t}}class ih{constructor(){this.changeMap=new Map}trackChildChange(e){const t=e.type,n=e.childName;Ce("child_added"===t||"child_changed"===t||"child_removed"===t,"Only child changes supported for tracking"),Ce(".priority"!==n,"Only non-priority child changes can be tracked.");const i=this.changeMap.get(n);if(i){const r=i.type;if("child_added"===t&&"child_removed"===r)this.changeMap.set(n,nu(n,e.snapshotNode,i.snapshotNode));else if("child_removed"===t&&"child_added"===r)this.changeMap.delete(n);else if("child_removed"===t&&"child_changed"===r)this.changeMap.set(n,tu(n,i.oldSnap));else if("child_changed"===t&&"child_added"===r)this.changeMap.set(n,eu(n,e.snapshotNode));else{if("child_changed"!==t||"child_changed"!==r)throw Se("Illegal combination of changes: "+e+" occurred after "+i);this.changeMap.set(n,nu(n,e.snapshotNode,i.oldSnap))}}else this.changeMap.set(n,e)}getChanges(){return Array.from(this.changeMap.values())}}const rh=new class{getCompleteChild(e){return null}getChildAfterChild(e,t,n){return null}};class sh{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;this.writes_=e,this.viewCache_=t,this.optCompleteServerCache_=n}getCompleteChild(e){const t=this.viewCache_.eventCache;if(t.isCompleteForChild(e))return t.getNode().getImmediateChild(e);{const t=null!=this.optCompleteServerCache_?new xu(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return eh(this.writes_,e,t)}}getChildAfterChild(e,t,n){const i=null!=this.optCompleteServerCache_?this.optCompleteServerCache_:Pu(this.viewCache_),r=Zu(this.writes_,i,t,1,n,e);return 0===r.length?null:r[0]}}function oh(e,t,n,i,r){const s=new ih;let o,a;if(n.type===mu.OVERWRITE){const l=n;l.source.fromUser?o=ch(e,t,l.path,l.snap,i,r,s):(Ce(l.source.fromServer,"Unknown source."),a=l.source.tagged||t.serverCache.isFiltered()&&!pc(l.path),o=lh(e,t,l.path,l.snap,i,r,a,s))}else if(n.type===mu.MERGE){const l=n;l.source.fromUser?o=function(e,t,n,i,r,s,o){let a=t;return i.foreach((i,l)=>{const c=dc(n,i);uh(t,oc(c))&&(a=ch(e,a,c,l,r,s,o))}),i.foreach((i,l)=>{const c=dc(n,i);uh(t,oc(c))||(a=ch(e,a,c,l,r,s,o))}),a}(e,t,l.path,l.children,i,r,s):(Ce(l.source.fromServer,"Unknown source."),a=l.source.tagged||t.serverCache.isFiltered(),o=dh(e,t,l.path,l.children,i,r,a,s))}else if(n.type===mu.ACK_USER_WRITE){const a=n;o=a.revert?function(e,t,n,i,r,s){let o;if(null!=Ju(i,n))return t;{const a=new sh(i,t,r),l=t.eventCache.getNode();let c;if(pc(n)||".priority"===oc(n)){let n;if(t.serverCache.isFullyInitialized())n=Xu(i,Pu(t));else{const e=t.serverCache.getNode();Ce(e instanceof Yc,"serverChildren would be complete if leaf node"),n=Qu(i,e)}c=e.filter.updateFullNode(l,n,s)}else{const r=oc(n);let u=eh(i,r,t.serverCache);null==u&&t.serverCache.isCompleteForChild(r)&&(u=l.getImmediateChild(r)),c=null!=u?e.filter.updateChild(l,r,u,lc(n),a,s):t.eventCache.getNode().hasChild(r)?e.filter.updateChild(l,r,Yc.EMPTY_NODE,lc(n),a,s):l,c.isEmpty()&&t.serverCache.isFullyInitialized()&&(o=Xu(i,Pu(t)),o.isLeafNode()&&(c=e.filter.updateFullNode(c,o,s)))}return o=t.serverCache.isFullyInitialized()||null!=Ju(i,sc()),Su(t,c,o,e.filter.filtersNodes())}}(e,t,a.path,i,r,s):function(e,t,n,i,r,s,o){if(null!=Ju(r,n))return t;const a=t.serverCache.isFiltered(),l=t.serverCache;if(null!=i.value){if(pc(n)&&l.isFullyInitialized()||l.isCompleteForPath(n))return lh(e,t,n,l.getNode().getChild(n),r,s,a,o);if(pc(n)){let i=new Ru(null);return l.getNode().forEachChild(Ac,(e,t)=>{i=i.set(new rc(e),t)}),dh(e,t,n,i,r,s,a,o)}return t}{let c=new Ru(null);return i.foreach((e,t)=>{const i=dc(n,e);l.isCompleteForPath(i)&&(c=c.set(e,l.getNode().getChild(i)))}),dh(e,t,n,c,r,s,a,o)}}(e,t,a.path,a.affectedTree,i,r,s)}else{if(n.type!==mu.LISTEN_COMPLETE)throw Se("Unknown operation type: "+n.type);o=function(e,t,n,i,r){const s=t.serverCache,o=Au(t,s.getNode(),s.isFullyInitialized()||pc(n),s.isFiltered());return ah(e,o,n,i,rh,r)}(e,t,n.path,i,s)}const l=s.getChanges();return function(e,t,n){const i=t.eventCache;if(i.isFullyInitialized()){const r=i.getNode().isLeafNode()||i.getNode().isEmpty(),s=Tu(e);(n.length>0||!e.eventCache.isFullyInitialized()||r&&!i.getNode().equals(s)||!i.getNode().getPriority().equals(s.getPriority()))&&n.push(Zc(Tu(t)))}}(t,o,l),{viewCache:o,changes:l}}function ah(e,t,n,i,r,s){const o=t.eventCache;if(null!=Ju(i,n))return t;{let a,l;if(pc(n))if(Ce(t.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),t.serverCache.isFiltered()){const n=Pu(t),r=Qu(i,n instanceof Yc?n:Yc.EMPTY_NODE);a=e.filter.updateFullNode(t.eventCache.getNode(),r,s)}else{const n=Xu(i,Pu(t));a=e.filter.updateFullNode(t.eventCache.getNode(),n,s)}else{const c=oc(n);if(".priority"===c){Ce(1===ac(n),"Can't have a priority with additional path components");const r=o.getNode();l=t.serverCache.getNode();const s=$u(i,n,r,l);a=null!=s?e.filter.updatePriority(r,s):o.getNode()}else{const u=lc(n);let h;if(o.isCompleteForChild(c)){l=t.serverCache.getNode();const e=$u(i,n,o.getNode(),l);h=null!=e?o.getNode().getImmediateChild(c).updateChild(u,e):o.getNode().getImmediateChild(c)}else h=eh(i,c,t.serverCache);a=null!=h?e.filter.updateChild(o.getNode(),c,h,u,r,s):o.getNode()}}return Su(t,a,o.isFullyInitialized()||pc(n),e.filter.filtersNodes())}}function lh(e,t,n,i,r,s,o,a){const l=t.serverCache;let c;const u=o?e.filter:e.filter.getIndexedFilter();if(pc(n))c=u.updateFullNode(l.getNode(),i,null);else if(u.filtersNodes()&&!l.isFiltered()){const e=l.getNode().updateChild(n,i);c=u.updateFullNode(l.getNode(),e,null)}else{const e=oc(n);if(!l.isCompleteForPath(n)&&ac(n)>1)return t;const r=lc(n),s=l.getNode().getImmediateChild(e).updateChild(r,i);c=".priority"===e?u.updatePriority(l.getNode(),s):u.updateChild(l.getNode(),e,s,r,rh,null)}const h=Au(t,c,l.isFullyInitialized()||pc(n),u.filtersNodes());return ah(e,h,n,r,new sh(r,h,s),a)}function ch(e,t,n,i,r,s,o){const a=t.eventCache;let l,c;const u=new sh(r,t,s);if(pc(n))c=e.filter.updateFullNode(t.eventCache.getNode(),i,o),l=Su(t,c,!0,e.filter.filtersNodes());else{const r=oc(n);if(".priority"===r)c=e.filter.updatePriority(t.eventCache.getNode(),i),l=Su(t,c,a.isFullyInitialized(),a.isFiltered());else{const s=lc(n),c=a.getNode().getImmediateChild(r);let h;if(pc(s))h=i;else{const e=u.getCompleteChild(r);h=null!=e?".priority"===cc(s)&&e.getChild(hc(s)).isEmpty()?e:e.updateChild(s,i):Yc.EMPTY_NODE}if(c.equals(h))l=t;else{l=Su(t,e.filter.updateChild(a.getNode(),r,h,s,u,o),a.isFullyInitialized(),e.filter.filtersNodes())}}}return l}function uh(e,t){return e.eventCache.isCompleteForChild(t)}function hh(e,t,n){return n.foreach((e,n)=>{t=t.updateChild(e,n)}),t}function dh(e,t,n,i,r,s,o,a){if(t.serverCache.getNode().isEmpty()&&!t.serverCache.isFullyInitialized())return t;let l,c=t;l=pc(n)?i:new Ru(null).setTree(n,i);const u=t.serverCache.getNode();return l.children.inorderTraversal((n,i)=>{if(u.hasChild(n)){const l=hh(0,t.serverCache.getNode().getImmediateChild(n),i);c=lh(e,c,new rc(n),l,r,s,o,a)}}),l.children.inorderTraversal((n,i)=>{const l=!t.serverCache.isCompleteForChild(n)&&null===i.value;if(!u.hasChild(n)&&!l){const l=hh(0,t.serverCache.getNode().getImmediateChild(n),i);c=lh(e,c,new rc(n),l,r,s,o,a)}}),c}class ph{constructor(e,t){this.query_=e,this.eventRegistrations_=[];const n=this.query_._queryParams,i=new iu(n.getIndex()),r=(s=n).loadsAllData()?new iu(s.getIndex()):s.hasLimit()?new su(s):new ru(s);var s;this.processor_=function(e){return{filter:e}}(r);const o=t.serverCache,a=t.eventCache,l=i.updateFullNode(Yc.EMPTY_NODE,o.getNode(),null),c=r.updateFullNode(Yc.EMPTY_NODE,a.getNode(),null),u=new xu(l,o.isFullyInitialized(),i.filtersNodes()),h=new xu(c,a.isFullyInitialized(),r.filtersNodes());this.viewCache_=Cu(h,u),this.eventGenerator_=new ku(this.query_)}get query(){return this.query_}}function fh(e,t){const n=Pu(e.viewCache_);return n&&(e.query._queryParams.loadsAllData()||!pc(t)&&!n.getImmediateChild(oc(t)).isEmpty())?n.getChild(t):null}function gh(e){return 0===e.eventRegistrations_.length}function mh(e,t,n){const i=[];if(n){Ce(null==t,"A cancel should cancel all event registrations.");const r=e.query._path;e.eventRegistrations_.forEach(e=>{const t=e.createCancelEvent(n,r);t&&i.push(t)})}if(t){let n=[];for(let i=0;i<e.eventRegistrations_.length;++i){const r=e.eventRegistrations_[i];if(r.matches(t)){if(t.hasAnyCallback()){n=n.concat(e.eventRegistrations_.slice(i+1));break}}else n.push(r)}e.eventRegistrations_=n}else e.eventRegistrations_=[];return i}function vh(e,t,n,i){t.type===mu.MERGE&&null!==t.source.queryId&&(Ce(Pu(e.viewCache_),"We should always have a full cache before handling merges"),Ce(Tu(e.viewCache_),"Missing event cache, even though we have a server cache"));const r=e.viewCache_,s=oh(e.processor_,r,t,n,i);var o,a;return o=e.processor_,a=s.viewCache,Ce(a.eventCache.getNode().isIndexed(o.filter.getIndex()),"Event snap not indexed"),Ce(a.serverCache.getNode().isIndexed(o.filter.getIndex()),"Server snap not indexed"),Ce(s.viewCache.serverCache.isFullyInitialized()||!r.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),e.viewCache_=s.viewCache,yh(e,s.changes,s.viewCache.eventCache.getNode(),null)}function yh(e,t,n,i){const r=i?[i]:e.eventRegistrations_;return function(e,t,n,i){const r=[],s=[];return t.forEach(t=>{var n;"child_changed"===t.type&&e.index_.indexedValueChanged(t.oldSnap,t.snapshotNode)&&s.push((n=t.childName,{type:"child_moved",snapshotNode:t.snapshotNode,childName:n}))}),Eu(e,r,"child_removed",t,i,n),Eu(e,r,"child_added",t,i,n),Eu(e,r,"child_moved",s,i,n),Eu(e,r,"child_changed",t,i,n),Eu(e,r,"value",t,i,n),r}(e.eventGenerator_,t,n,r)}let _h,wh;class bh{constructor(){this.views=new Map}}function xh(e,t,n,i){const r=t.source.queryId;if(null!==r){const s=e.views.get(r);return Ce(null!=s,"SyncTree gave us an op for an invalid query."),vh(s,t,n,i)}{let r=[];for(const s of e.views.values())r=r.concat(vh(s,t,n,i));return r}}function kh(e,t,n,i,r){const s=t._queryIdentifier,o=e.views.get(s);if(!o){let e=Xu(n,r?i:null),s=!1;e?s=!0:i instanceof Yc?(e=Qu(n,i),s=!1):(e=Yc.EMPTY_NODE,s=!1);const o=Cu(new xu(e,s,!1),new xu(i,r,!1));return new ph(t,o)}return o}function Eh(e,t,n,i,r,s){const o=kh(e,t,i,r,s);return e.views.has(t._queryIdentifier)||e.views.set(t._queryIdentifier,o),function(e,t){e.eventRegistrations_.push(t)}(o,n),function(e,t){const n=e.viewCache_.eventCache,i=[];n.getNode().isLeafNode()||n.getNode().forEachChild(Wc,(e,t)=>{i.push(eu(e,t))});return n.isFullyInitialized()&&i.push(Zc(n.getNode())),yh(e,i,n.getNode(),t)}(o,n)}function Ch(e,t,n,i){const r=t._queryIdentifier,s=[];let o=[];const a=Ih(e);if("default"===r)for(const[l,c]of e.views.entries())o=o.concat(mh(c,n,i)),gh(c)&&(e.views.delete(l),c.query._queryParams.loadsAllData()||s.push(c.query));else{const t=e.views.get(r);t&&(o=o.concat(mh(t,n,i)),gh(t)&&(e.views.delete(r),t.query._queryParams.loadsAllData()||s.push(t.query)))}return a&&!Ih(e)&&s.push(new(Ce(_h,"Reference.ts has not been loaded"),_h)(t._repo,t._path)),{removed:s,events:o}}function Sh(e){const t=[];for(const n of e.views.values())n.query._queryParams.loadsAllData()||t.push(n);return t}function Ah(e,t){let n=null;for(const i of e.views.values())n=n||fh(i,t);return n}function Th(e,t){if(t._queryParams.loadsAllData())return Rh(e);{const n=t._queryIdentifier;return e.views.get(n)}}function Ph(e,t){return null!=Th(e,t)}function Ih(e){return null!=Rh(e)}function Rh(e){for(const t of e.views.values())if(t.query._queryParams.loadsAllData())return t;return null}let Mh=1;class Nh{constructor(e){this.listenProvider_=e,this.syncPointTree_=new Ru(null),this.pendingWriteTree_={visibleWrites:Mu.empty(),allWrites:[],lastWriteId:-1},this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function Dh(e,t,n,i,r){return function(e,t,n,i,r){Ce(i>e.lastWriteId,"Stacking an older write on top of newer ones"),void 0===r&&(r=!0),e.allWrites.push({path:t,snap:n,writeId:i,visible:r}),r&&(e.visibleWrites=Nu(e.visibleWrites,t,n)),e.lastWriteId=i}(e.pendingWriteTree_,t,n,i,r),r?Uh(e,new wu({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},t,n)):[]}function Oh(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const i=function(e,t){for(let n=0;n<e.allWrites.length;n++){const i=e.allWrites[n];if(i.writeId===t)return i}return null}(e.pendingWriteTree_,t);if(Vu(e.pendingWriteTree_,t)){let t=new Ru(null);return null!=i.snap?t=t.set(sc(),!0):Al(i.children,e=>{t=t.set(new rc(e),!0)}),Uh(e,new yu(i.path,t,n))}return[]}function Lh(e,t,n){return Uh(e,new wu({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},t,n))}function Fh(e,t,n,i){let r=arguments.length>4&&void 0!==arguments[4]&&arguments[4];const s=t._path,o=e.syncPointTree_.get(s);let a=[];if(o&&("default"===t._queryIdentifier||Ph(o,t))){const l=Ch(o,t,n,i);0===o.views.size&&(e.syncPointTree_=e.syncPointTree_.remove(s));const c=l.removed;if(a=l.events,!r){const n=-1!==c.findIndex(e=>e._queryParams.loadsAllData()),r=e.syncPointTree_.findOnPath(s,(e,t)=>Ih(t));if(n&&!r){const t=e.syncPointTree_.subtree(s);if(!t.isEmpty()){const n=function(e){return e.fold((e,t,n)=>{if(t&&Ih(t)){return[Rh(t)]}{let e=[];return t&&(e=Sh(t)),Al(n,(t,n)=>{e=e.concat(n)}),e}})}(t);for(let t=0;t<n.length;++t){const i=n[t],r=i.query,s=Vh(e,i);e.listenProvider_.startListening(Qh(r),qh(e,r),s.hashFn,s.onComplete)}}}if(!r&&c.length>0&&!i)if(n){const n=null;e.listenProvider_.stopListening(Qh(t),n)}else c.forEach(t=>{const n=e.queryToTagMap.get(Gh(t));e.listenProvider_.stopListening(Qh(t),n)})}!function(e,t){for(let n=0;n<t.length;++n){const i=t[n];if(!i._queryParams.loadsAllData()){const t=Gh(i),n=e.queryToTagMap.get(t);e.queryToTagMap.delete(t),e.tagToQueryMap.delete(n)}}}(e,c)}return a}function jh(e,t,n,i){const r=Kh(e,i);if(null!=r){const i=Yh(r),s=i.path,o=i.queryId,a=fc(s,t);return Xh(e,s,new wu(vu(o),a,n))}return[]}function Bh(e,t,n){let i=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const r=t._path;let s=null,o=!1;e.syncPointTree_.foreachOnPath(r,(e,t)=>{const n=fc(e,r);s=s||Ah(t,n),o=o||Ih(t)});let a,l=e.syncPointTree_.get(r);if(l?(o=o||Ih(l),s=s||Ah(l,sc())):(l=new bh,e.syncPointTree_=e.syncPointTree_.set(r,l)),null!=s)a=!0;else{a=!1,s=Yc.EMPTY_NODE;e.syncPointTree_.subtree(r).foreachChild((e,t)=>{const n=Ah(t,sc());n&&(s=s.updateImmediateChild(e,n))})}const c=Ph(l,t);if(!c&&!t._queryParams.loadsAllData()){const n=Gh(t);Ce(!e.queryToTagMap.has(n),"View does not exist, but we have a tag");const i=Mh++;e.queryToTagMap.set(n,i),e.tagToQueryMap.set(i,n)}let u=Eh(l,t,n,Hu(e.pendingWriteTree_,r),s,a);if(!c&&!o&&!i){const n=Th(l,t);u=u.concat(function(e,t,n){const i=t._path,r=qh(e,t),s=Vh(e,n),o=e.listenProvider_.startListening(Qh(t),r,s.hashFn,s.onComplete),a=e.syncPointTree_.subtree(i);if(r)Ce(!Ih(a.value),"If we're adding a query, it shouldn't be shadowed");else{const t=a.fold((e,t,n)=>{if(!pc(e)&&t&&Ih(t))return[Rh(t).query];{let e=[];return t&&(e=e.concat(Sh(t).map(e=>e.query))),Al(n,(t,n)=>{e=e.concat(n)}),e}});for(let n=0;n<t.length;++n){const i=t[n];e.listenProvider_.stopListening(Qh(i),qh(e,i))}}return o}(e,t,n))}return u}function Wh(e,t,n){const i=e.pendingWriteTree_,r=e.syncPointTree_.findOnPath(t,(e,n)=>{const i=Ah(n,fc(e,t));if(i)return i});return Yu(i,t,r,n,!0)}function Uh(e,t){return zh(t,e.syncPointTree_,null,Hu(e.pendingWriteTree_,sc()))}function zh(e,t,n,i){if(pc(e.path))return Hh(e,t,n,i);{const r=t.get(sc());null==n&&null!=r&&(n=Ah(r,sc()));let s=[];const o=oc(e.path),a=e.operationForChild(o),l=t.children.get(o);if(l&&a){const e=n?n.getImmediateChild(o):null,t=th(i,o);s=s.concat(zh(a,l,e,t))}return r&&(s=s.concat(xh(r,e,i,n))),s}}function Hh(e,t,n,i){const r=t.get(sc());null==n&&null!=r&&(n=Ah(r,sc()));let s=[];return t.children.inorderTraversal((t,r)=>{const o=n?n.getImmediateChild(t):null,a=th(i,t),l=e.operationForChild(t);l&&(s=s.concat(Hh(l,r,o,a)))}),r&&(s=s.concat(xh(r,e,i,n))),s}function Vh(e,t){const n=t.query,i=qh(e,n);return{hashFn:()=>{const e=function(e){return e.viewCache_.serverCache.getNode()}(t)||Yc.EMPTY_NODE;return e.hash()},onComplete:t=>{if("ok"===t)return i?function(e,t,n){const i=Kh(e,n);if(i){const n=Yh(i),r=n.path,s=n.queryId,o=fc(r,t);return Xh(e,r,new _u(vu(s),o))}return[]}(e,n._path,i):function(e,t){return Uh(e,new _u({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},t))}(e,n._path);{const i=function(e,t){let n="Unknown Error";"too_big"===e?n="The data requested exceeds the maximum size that can be accessed with a single request.":"permission_denied"===e?n="Client doesn't have permission to access the desired data.":"unavailable"===e&&(n="The service is unavailable");const i=new Error(e+" at "+t._path.toString()+": "+n);return i.code=e.toUpperCase(),i}(t,n);return Fh(e,n,null,i)}}}}function qh(e,t){const n=Gh(t);return e.queryToTagMap.get(n)}function Gh(e){return e._path.toString()+"$"+e._queryIdentifier}function Kh(e,t){return e.tagToQueryMap.get(t)}function Yh(e){const t=e.indexOf("$");return Ce(-1!==t&&t<e.length-1,"Bad queryKey."),{queryId:e.substr(t+1),path:new rc(e.substr(0,t))}}function Xh(e,t,n){const i=e.syncPointTree_.get(t);Ce(i,"Missing sync point for query tag that we're tracking");return xh(i,n,Hu(e.pendingWriteTree_,t),null)}function Qh(e){return e._queryParams.loadsAllData()&&!e._queryParams.isDefault()?new(Ce(wh,"Reference.ts has not been loaded"),wh)(e._repo,e._path):e}class $h{constructor(e){this.node_=e}getImmediateChild(e){const t=this.node_.getImmediateChild(e);return new $h(t)}node(){return this.node_}}class Jh{constructor(e,t){this.syncTree_=e,this.path_=t}getImmediateChild(e){const t=dc(this.path_,e);return new Jh(this.syncTree_,t)}node(){return Wh(this.syncTree_,this.path_)}}const Zh=function(e,t,n){return e&&"object"===typeof e?(Ce(".sv"in e,"Unexpected leaf node or priority contents"),"string"===typeof e[".sv"]?ed(e[".sv"],t,n):"object"===typeof e[".sv"]?td(e[".sv"],t):void Ce(!1,"Unexpected server value: "+JSON.stringify(e,null,2))):e},ed=function(e,t,n){if("timestamp"===e)return n.timestamp;Ce(!1,"Unexpected server value: "+e)},td=function(e,t,n){e.hasOwnProperty("increment")||Ce(!1,"Unexpected server value: "+JSON.stringify(e,null,2));const i=e.increment;"number"!==typeof i&&Ce(!1,"Unexpected increment value: "+i);const r=t.node();if(Ce(null!==r&&"undefined"!==typeof r,"Expected ChildrenNode.EMPTY_NODE for nulls"),!r.isLeafNode())return i;const s=r.getValue();return"number"!==typeof s?i:s+i},nd=function(e,t,n,i){return rd(t,new Jh(n,e),i)},id=function(e,t,n){return rd(e,new $h(t),n)};function rd(e,t,n){const i=e.getPriority().val(),r=Zh(i,t.getImmediateChild(".priority"),n);let s;if(e.isLeafNode()){const i=e,s=Zh(i.getValue(),t,n);return s!==i.getValue()||r!==i.getPriority().val()?new Bc(s,Qc(r)):e}{const i=e;return s=i,r!==i.getPriority().val()&&(s=s.updatePriority(new Bc(r))),i.forEachChild(Wc,(e,i)=>{const r=rd(i,t.getImmediateChild(e),n);r!==i&&(s=s.updateImmediateChild(e,r))}),s}}class sd{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{children:{},childCount:0};this.name=e,this.parent=t,this.node=n}}function od(e,t){let n=t instanceof rc?t:new rc(t),i=e,r=oc(n);for(;null!==r;){const e=tt(i.node.children,r)||{children:{},childCount:0};i=new sd(r,i,e),n=lc(n),r=oc(n)}return i}function ad(e){return e.node.value}function ld(e,t){e.node.value=t,pd(e)}function cd(e){return e.node.childCount>0}function ud(e,t){Al(e.node.children,(n,i)=>{t(new sd(n,e,i))})}function hd(e,t,n,i){n&&!i&&t(e),ud(e,e=>{hd(e,t,!0,i)}),n&&i&&t(e)}function dd(e){return new rc(null===e.parent?e.name:dd(e.parent)+"/"+e.name)}function pd(e){null!==e.parent&&function(e,t,n){const i=function(e){return void 0===ad(e)&&!cd(e)}(n),r=et(e.node.children,t);i&&r?(delete e.node.children[t],e.node.childCount--,pd(e)):i||r||(e.node.children[t]=n.node,e.node.childCount++,pd(e))}(e.parent,e.name,e)}const fd=/[\[\].#$\/\u0000-\u001F\u007F]/,gd=/[\[\].#$\u0000-\u001F\u007F]/,md=10485760,vd=function(e){return"string"===typeof e&&0!==e.length&&!fd.test(e)},yd=function(e){return"string"===typeof e&&0!==e.length&&!gd.test(e)},_d=function(e,t,n,i){i&&void 0===t||wd(dt(e,"value"),t,n)},wd=function(e,t,n){const i=n instanceof rc?new vc(n,e):n;if(void 0===t)throw new Error(e+"contains undefined "+_c(i));if("function"===typeof t)throw new Error(e+"contains a function "+_c(i)+" with contents = "+t.toString());if(_l(t))throw new Error(e+"contains "+t.toString()+" "+_c(i));if("string"===typeof t&&t.length>md/3&&pt(t)>md)throw new Error(e+"contains a string greater than "+md+" utf8 bytes "+_c(i)+" ('"+t.substring(0,50)+"...')");if(t&&"object"===typeof t){let n=!1,r=!1;if(Al(t,(t,s)=>{if(".value"===t)n=!0;else if(".priority"!==t&&".sv"!==t&&(r=!0,!vd(t)))throw new Error(e+" contains an invalid key ("+t+") "+_c(i)+'.  Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');!function(e,t){e.parts_.length>0&&(e.byteLength_+=1),e.parts_.push(t),e.byteLength_+=pt(t),yc(e)}(i,t),wd(e,s,i),function(e){const t=e.parts_.pop();e.byteLength_-=pt(t),e.parts_.length>0&&(e.byteLength_-=1)}(i)}),n&&r)throw new Error(e+' contains ".value" child '+_c(i)+" in addition to actual children.")}},bd=function(e,t,n,i){if((!i||void 0!==n)&&!yd(n))throw new Error(dt(e,t)+'was an invalid path = "'+n+'". Paths must be non-empty strings and can\'t contain ".", "#", "$", "[", or "]"')},xd=function(e,t){if(".info"===oc(t))throw new Error(e+" failed = Can't modify data under /.info/")},kd=function(e,t){const n=t.path.toString();if("string"!==typeof t.repoInfo.host||0===t.repoInfo.host.length||!vd(t.repoInfo.namespace)&&"localhost"!==t.repoInfo.host.split(":")[0]||0!==n.length&&!function(e){return e&&(e=e.replace(/^\/*\.info(\/|$)/,"/")),yd(e)}(n))throw new Error(dt(e,"url")+'must be a valid firebase URL and the path can\'t contain ".", "#", "$", "[", or "]".')};class Ed{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function Cd(e,t){let n=null;for(let i=0;i<t.length;i++){const r=t[i],s=r.getPath();null===n||gc(s,n.path)||(e.eventLists_.push(n),n=null),null===n&&(n={events:[],path:s}),n.events.push(r)}n&&e.eventLists_.push(n)}function Sd(e,t,n){Cd(e,n),Td(e,e=>gc(e,t))}function Ad(e,t,n){Cd(e,n),Td(e,e=>mc(e,t)||mc(t,e))}function Td(e,t){e.recursionDepth_++;let n=!0;for(let i=0;i<e.eventLists_.length;i++){const r=e.eventLists_[i];if(r){t(r.path)?(Pd(e.eventLists_[i]),e.eventLists_[i]=null):n=!1}}n&&(e.eventLists_=[]),e.recursionDepth_--}function Pd(e){for(let t=0;t<e.events.length;t++){const n=e.events[t];if(null!==n){e.events[t]=null;const i=n.getEventRunner();hl&&fl("event: "+n.toString()),Rl(i)}}}const Id="repo_interrupt";class Rd{constructor(e,t,n,i){this.repoInfo_=e,this.forceRestClient_=t,this.authTokenProvider_=n,this.appCheckProvider_=i,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new Ed,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=hu(),this.transactionQueueTree_=new sd,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function Md(e,t,n){if(e.stats_=Gl(e.repoInfo_),e.forceRestClient_||("object"===typeof window&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0)e.server_=new cu(e.repoInfo_,(t,n,i,r)=>{Od(e,t,n,i,r)},e.authTokenProvider_,e.appCheckProvider_),setTimeout(()=>Ld(e,!0),0);else{if("undefined"!==typeof n&&null!==n){if("object"!==typeof n)throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{Je(n)}catch(nz){throw new Error("Invalid authOverride provided: "+nz)}}e.persistentConnection_=new xc(e.repoInfo_,t,(t,n,i,r)=>{Od(e,t,n,i,r)},t=>{Ld(e,t)},t=>{!function(e,t){Al(t,(t,n)=>{Fd(e,t,n)})}(e,t)},e.authTokenProvider_,e.appCheckProvider_,n),e.server_=e.persistentConnection_}e.authTokenProvider_.addTokenChangeListener(t=>{e.server_.refreshAuthToken(t)}),e.appCheckProvider_.addTokenChangeListener(t=>{e.server_.refreshAppCheckToken(t.token)}),e.statsReporter_=function(e,t){const n=e.toString();return ql[n]||(ql[n]=t()),ql[n]}(e.repoInfo_,()=>new gu(e.stats_,e.server_)),e.infoData_=new uu,e.infoSyncTree_=new Nh({startListening:(t,n,i,r)=>{let s=[];const o=e.infoData_.getNode(t._path);return o.isEmpty()||(s=Lh(e.infoSyncTree_,t._path,o),setTimeout(()=>{r("ok")},0)),s},stopListening:()=>{}}),Fd(e,"connected",!1),e.serverSyncTree_=new Nh({startListening:(t,n,i,r)=>(e.server_.listen(t,i,n,(n,i)=>{const s=r(n,i);Ad(e.eventQueue_,t._path,s)}),[]),stopListening:(t,n)=>{e.server_.unlisten(t,n)}})}function Nd(e){const t=e.infoData_.getNode(new rc(".info/serverTimeOffset")).val()||0;return(new Date).getTime()+t}function Dd(e){return(t=(t={timestamp:Nd(e)})||{}).timestamp=t.timestamp||(new Date).getTime(),t;var t}function Od(e,t,n,i,r){e.dataUpdateCount++;const s=new rc(t);n=e.interceptServerDataCallback_?e.interceptServerDataCallback_(t,n):n;let o=[];if(r)if(i){const t=it(n,e=>Qc(e));o=function(e,t,n,i){const r=Kh(e,i);if(r){const i=Yh(r),s=i.path,o=i.queryId,a=fc(s,t),l=Ru.fromObject(n);return Xh(e,s,new bu(vu(o),a,l))}return[]}(e.serverSyncTree_,s,t,r)}else{const t=Qc(n);o=jh(e.serverSyncTree_,s,t,r)}else if(i){const t=it(n,e=>Qc(e));o=function(e,t,n){const i=Ru.fromObject(n);return Uh(e,new bu({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},t,i))}(e.serverSyncTree_,s,t)}else{const t=Qc(n);o=Lh(e.serverSyncTree_,s,t)}let a=s;o.length>0&&(a=Gd(e,s)),Ad(e.eventQueue_,a,o)}function Ld(e,t){Fd(e,"connected",t),!1===t&&function(e){zd(e,"onDisconnectEvents");const t=Dd(e),n=hu();pu(e.onDisconnect_,sc(),(i,r)=>{const s=nd(i,r,e.serverSyncTree_,t);du(n,i,s)});let i=[];pu(n,sc(),(t,n)=>{i=i.concat(Lh(e.serverSyncTree_,t,n));const r=$d(e,t);Gd(e,r)}),e.onDisconnect_=hu(),Ad(e.eventQueue_,sc(),i)}(e)}function Fd(e,t,n){const i=new rc("/.info/"+t),r=Qc(n);e.infoData_.updateSnapshot(i,r);const s=Lh(e.infoSyncTree_,i,r);Ad(e.eventQueue_,i,s)}function jd(e){return e.nextWriteId_++}function Bd(e,t,n,i,r){zd(e,"set",{path:t.toString(),value:n,priority:i});const s=Dd(e),o=Qc(n,i),a=Wh(e.serverSyncTree_,t),l=id(o,a,s),c=jd(e),u=Dh(e.serverSyncTree_,t,l,c,!0);Cd(e.eventQueue_,u),e.server_.put(t.toString(),o.val(!0),(n,i)=>{const s="ok"===n;s||yl("set at "+t+" failed: "+n);const o=Oh(e.serverSyncTree_,c,!s);Ad(e.eventQueue_,t,o),Hd(e,r,n,i)});const h=$d(e,t);Gd(e,h),Ad(e.eventQueue_,h,[])}function Wd(e,t,n){let i;i=".info"===oc(t._path)?Fh(e.infoSyncTree_,t,n):Fh(e.serverSyncTree_,t,n),Sd(e.eventQueue_,t._path,i)}function Ud(e){e.persistentConnection_&&e.persistentConnection_.interrupt(Id)}function zd(e){let t="";e.persistentConnection_&&(t=e.persistentConnection_.id+":");for(var n=arguments.length,i=new Array(n>1?n-1:0),r=1;r<n;r++)i[r-1]=arguments[r];fl(t,...i)}function Hd(e,t,n,i){t&&Rl(()=>{if("ok"===n)t(null);else{const e=(n||"error").toUpperCase();let r=e;i&&(r+=": "+i);const s=new Error(r);s.code=e,t(s)}})}function Vd(e,t,n){return Wh(e.serverSyncTree_,t,n)||Yc.EMPTY_NODE}function qd(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.transactionQueueTree_;if(t||Qd(e,t),ad(t)){const n=Yd(e,t);Ce(n.length>0,"Sending zero length transaction queue");n.every(e=>0===e.status)&&function(e,t,n){const i=n.map(e=>e.currentWriteId),r=Vd(e,t,i);let s=r;const o=r.hash();for(let c=0;c<n.length;c++){const e=n[c];Ce(0===e.status,"tryToSendTransactionQueue_: items in queue should all be run."),e.status=1,e.retryCount++;const i=fc(t,e.path);s=s.updateChild(i,e.currentOutputSnapshotRaw)}const a=s.val(!0),l=t;e.server_.put(l.toString(),a,i=>{zd(e,"transaction put response",{path:l.toString(),status:i});let r=[];if("ok"===i){const i=[];for(let t=0;t<n.length;t++)n[t].status=2,r=r.concat(Oh(e.serverSyncTree_,n[t].currentWriteId)),n[t].onComplete&&i.push(()=>n[t].onComplete(null,!0,n[t].currentOutputSnapshotResolved)),n[t].unwatcher();Qd(e,od(e.transactionQueueTree_,t)),qd(e,e.transactionQueueTree_),Ad(e.eventQueue_,t,r);for(let e=0;e<i.length;e++)Rl(i[e])}else{if("datastale"===i)for(let e=0;e<n.length;e++)3===n[e].status?n[e].status=4:n[e].status=0;else{yl("transaction at "+l.toString()+" failed: "+i);for(let e=0;e<n.length;e++)n[e].status=4,n[e].abortReason=i}Gd(e,t)}},o)}(e,dd(t),n)}else cd(t)&&ud(t,t=>{qd(e,t)})}function Gd(e,t){const n=Kd(e,t),i=dd(n);return function(e,t,n){if(0===t.length)return;const i=[];let r=[];const s=t.filter(e=>0===e.status),o=s.map(e=>e.currentWriteId);for(let a=0;a<t.length;a++){const s=t[a],l=fc(n,s.path);let c,u=!1;if(Ce(null!==l,"rerunTransactionsUnderNode_: relativePath should not be null."),4===s.status)u=!0,c=s.abortReason,r=r.concat(Oh(e.serverSyncTree_,s.currentWriteId,!0));else if(0===s.status)if(s.retryCount>=25)u=!0,c="maxretry",r=r.concat(Oh(e.serverSyncTree_,s.currentWriteId,!0));else{const n=Vd(e,s.path,o);s.currentInputSnapshot=n;const i=t[a].update(n.val());if(void 0!==i){wd("transaction failed: Data returned ",i,s.path);let t=Qc(i);"object"===typeof i&&null!=i&&et(i,".priority")||(t=t.updatePriority(n.getPriority()));const a=s.currentWriteId,l=Dd(e),c=id(t,n,l);s.currentOutputSnapshotRaw=t,s.currentOutputSnapshotResolved=c,s.currentWriteId=jd(e),o.splice(o.indexOf(a),1),r=r.concat(Dh(e.serverSyncTree_,s.path,c,s.currentWriteId,s.applyLocally)),r=r.concat(Oh(e.serverSyncTree_,a,!0))}else u=!0,c="nodata",r=r.concat(Oh(e.serverSyncTree_,s.currentWriteId,!0))}Ad(e.eventQueue_,n,r),r=[],u&&(t[a].status=2,function(e){setTimeout(e,Math.floor(0))}(t[a].unwatcher),t[a].onComplete&&("nodata"===c?i.push(()=>t[a].onComplete(null,!1,t[a].currentInputSnapshot)):i.push(()=>t[a].onComplete(new Error(c),!1,null))))}Qd(e,e.transactionQueueTree_);for(let a=0;a<i.length;a++)Rl(i[a]);qd(e,e.transactionQueueTree_)}(e,Yd(e,n),i),i}function Kd(e,t){let n,i=e.transactionQueueTree_;for(n=oc(t);null!==n&&void 0===ad(i);)i=od(i,n),n=oc(t=lc(t));return i}function Yd(e,t){const n=[];return Xd(e,t,n),n.sort((e,t)=>e.order-t.order),n}function Xd(e,t,n){const i=ad(t);if(i)for(let r=0;r<i.length;r++)n.push(i[r]);ud(t,t=>{Xd(e,t,n)})}function Qd(e,t){const n=ad(t);if(n){let e=0;for(let t=0;t<n.length;t++)2!==n[t].status&&(n[e]=n[t],e++);n.length=e,ld(t,n.length>0?n:void 0)}ud(t,t=>{Qd(e,t)})}function $d(e,t){const n=dd(Kd(e,t)),i=od(e.transactionQueueTree_,t);return function(e,t,n){let i=n?e:e.parent;for(;null!==i;){if(t(i))return!0;i=i.parent}}(i,t=>{Jd(e,t)}),Jd(e,i),hd(i,t=>{Jd(e,t)}),n}function Jd(e,t){const n=ad(t);if(n){const i=[];let r=[],s=-1;for(let t=0;t<n.length;t++)3===n[t].status||(1===n[t].status?(Ce(s===t-1,"All SENT items should be at beginning of queue."),s=t,n[t].status=3,n[t].abortReason="set"):(Ce(0===n[t].status,"Unexpected transaction status in abort"),n[t].unwatcher(),r=r.concat(Oh(e.serverSyncTree_,n[t].currentWriteId,!0)),n[t].onComplete&&i.push(n[t].onComplete.bind(null,new Error("set"),!1,null))));-1===s?ld(t,void 0):n.length=s+1,Ad(e.eventQueue_,dd(t),r);for(let e=0;e<i.length;e++)Rl(i[e])}}const Zd=function(e,t){const n=ep(e),i=n.namespace;"firebase.com"===n.domain&&vl(n.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),i&&"undefined"!==i||"localhost"===n.domain||vl("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),n.secure||"undefined"!==typeof window&&window.location&&window.location.protocol&&-1!==window.location.protocol.indexOf("https:")&&yl("Insecure Firebase access from a secure page. Please use https in calls to new Firebase().");const r="ws"===n.scheme||"wss"===n.scheme;return{repoInfo:new Ul(n.host,n.secure,i,r,t,"",i!==n.subdomain),path:new rc(n.pathString)}},ep=function(e){let t="",n="",i="",r="",s="",o=!0,a="https",l=443;if("string"===typeof e){let c=e.indexOf("//");c>=0&&(a=e.substring(0,c-1),e=e.substring(c+2));let u=e.indexOf("/");-1===u&&(u=e.length);let h=e.indexOf("?");-1===h&&(h=e.length),t=e.substring(0,Math.min(u,h)),u<h&&(r=function(e){let t="";const n=e.split("/");for(let i=0;i<n.length;i++)if(n[i].length>0){let e=n[i];try{e=decodeURIComponent(e.replace(/\+/g," "))}catch(nz){}t+="/"+e}return t}(e.substring(u,h)));const d=function(e){const t={};"?"===e.charAt(0)&&(e=e.substring(1));for(const n of e.split("&")){if(0===n.length)continue;const i=n.split("=");2===i.length?t[decodeURIComponent(i[0])]=decodeURIComponent(i[1]):yl("Invalid query segment '".concat(n,"' in query '").concat(e,"'"))}return t}(e.substring(Math.min(e.length,h)));c=t.indexOf(":"),c>=0?(o="https"===a||"wss"===a,l=parseInt(t.substring(c+1),10)):c=t.length;const p=t.slice(0,c);if("localhost"===p.toLowerCase())n="localhost";else if(p.split(".").length<=2)n=p;else{const e=t.indexOf(".");i=t.substring(0,e).toLowerCase(),n=t.substring(e+1),s=i}"ns"in d&&(s=d.ns)}return{host:t,port:l,domain:n,subdomain:i,secure:o,scheme:a,pathString:r,namespace:s}},tp="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz";!function(){let e=0;const t=[]}();class np{constructor(e,t,n,i){this.eventType=e,this.eventRegistration=t,this.snapshot=n,this.prevName=i}getPath(){const e=this.snapshot.ref;return"value"===this.eventType?e._path:e.parent._path}getEventType(){return this.eventType}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.getPath().toString()+":"+this.eventType+":"+Je(this.snapshot.exportVal())}}class ip{constructor(e,t,n){this.eventRegistration=e,this.error=t,this.path=n}getPath(){return this.path}getEventType(){return"cancel"}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.path.toString()+":cancel"}}class rp{constructor(e,t){this.snapshotCallback=e,this.cancelCallback=t}onValue(e,t){this.snapshotCallback.call(null,e,t)}onCancel(e){return Ce(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,e)}get hasCancelCallback(){return!!this.cancelCallback}matches(e){return this.snapshotCallback===e.snapshotCallback||void 0!==this.snapshotCallback.userCallback&&this.snapshotCallback.userCallback===e.snapshotCallback.userCallback&&this.snapshotCallback.context===e.snapshotCallback.context}}class sp{constructor(e,t,n,i){this._repo=e,this._path=t,this._queryParams=n,this._orderByCalled=i}get key(){return pc(this._path)?null:cc(this._path)}get ref(){return new op(this._repo,this._path)}get _queryIdentifier(){const e=lu(this._queryParams),t=Cl(e);return"{}"===t?"default":t}get _queryObject(){return lu(this._queryParams)}isEqual(e){if(!((e=ft(e))instanceof sp))return!1;const t=this._repo===e._repo,n=gc(this._path,e._path),i=this._queryIdentifier===e._queryIdentifier;return t&&n&&i}toJSON(){return this.toString()}toString(){return this._repo.toString()+function(e){let t="";for(let n=e.pieceNum_;n<e.pieces_.length;n++)""!==e.pieces_[n]&&(t+="/"+encodeURIComponent(String(e.pieces_[n])));return t||"/"}(this._path)}}class op extends sp{constructor(e,t){super(e,t,new ou,!1)}get parent(){const e=hc(this._path);return null===e?null:new op(this._repo,e)}get root(){let e=this;for(;null!==e.parent;)e=e.parent;return e}}class ap{constructor(e,t,n){this._node=e,this.ref=t,this._index=n}get priority(){return this._node.getPriority().val()}get key(){return this.ref.key}get size(){return this._node.numChildren()}child(e){const t=new rc(e),n=cp(this.ref,e);return new ap(this._node.getChild(t),n,Wc)}exists(){return!this._node.isEmpty()}exportVal(){return this._node.val(!0)}forEach(e){if(this._node.isLeafNode())return!1;return!!this._node.forEachChild(this._index,(t,n)=>e(new ap(n,cp(this.ref,t),Wc)))}hasChild(e){const t=new rc(e);return!this._node.getChild(t).isEmpty()}hasChildren(){return!this._node.isLeafNode()&&!this._node.isEmpty()}toJSON(){return this.exportVal()}val(){return this._node.val()}}function lp(e,t){return(e=ft(e))._checkNotDeleted("ref"),void 0!==t?cp(e._root,t):e._root}function cp(e,t){var n,i,r,s;return null===oc((e=ft(e))._path)?(n="child",i="path",s=!1,(r=t)&&(r=r.replace(/^\/*\.info(\/|$)/,"/")),bd(n,i,r,s)):bd("child","path",t,!1),new op(e._repo,dc(e._path,t))}function up(e,t){e=ft(e),xd("set",e._path),_d("set",t,e._path,!1);const n=new ze;return Bd(e._repo,e._path,t,null,n.wrapCallback(()=>{})),n.promise}class hp{constructor(e){this.callbackContext=e}respondsTo(e){return"value"===e}createEvent(e,t){const n=t._queryParams.getIndex();return new np("value",this,new ap(e.snapshotNode,new op(t._repo,t._path),n))}getEventRunner(e){return"cancel"===e.getEventType()?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,null)}createCancelEvent(e,t){return this.callbackContext.hasCancelCallback?new ip(this,e,t):null}matches(e){return e instanceof hp&&(!e.callbackContext||!this.callbackContext||e.callbackContext.matches(this.callbackContext))}hasAnyCallback(){return null!==this.callbackContext}}class dp{constructor(e,t){this.eventType=e,this.callbackContext=t}respondsTo(e){let t="children_added"===e?"child_added":e;return t="children_removed"===t?"child_removed":t,this.eventType===t}createCancelEvent(e,t){return this.callbackContext.hasCancelCallback?new ip(this,e,t):null}createEvent(e,t){Ce(null!=e.childName,"Child events should have a childName.");const n=cp(new op(t._repo,t._path),e.childName),i=t._queryParams.getIndex();return new np(e.type,this,new ap(e.snapshotNode,n,i),e.prevName)}getEventRunner(e){return"cancel"===e.getEventType()?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,e.prevName)}matches(e){return e instanceof dp&&(this.eventType===e.eventType&&(!this.callbackContext||!e.callbackContext||this.callbackContext.matches(e.callbackContext)))}hasAnyCallback(){return!!this.callbackContext}}function pp(e,t,n,i,r){let s;if("object"===typeof i&&(s=void 0,r=i),"function"===typeof i&&(s=i),r&&r.onlyOnce){const t=n,i=(n,i)=>{Wd(e._repo,e,a),t(n,i)};i.userCallback=n.userCallback,i.context=n.context,n=i}const o=new rp(n,s||void 0),a="value"===t?new hp(o):new dp(t,o);return function(e,t,n){let i;i=".info"===oc(t._path)?Bh(e.infoSyncTree_,t,n):Bh(e.serverSyncTree_,t,n),Sd(e.eventQueue_,t._path,i)}(e._repo,e,a),()=>Wd(e._repo,e,a)}function fp(e,t,n,i){return pp(e,"value",t,n,i)}function gp(e,t,n){let i=null;const r=n?new rp(n):null;"value"===t?i=new hp(r):t&&(i=new dp(t,r)),Wd(e._repo,e,i)}!function(e){Ce(!_h,"__referenceConstructor has already been defined"),_h=e}(op),function(e){Ce(!wh,"__referenceConstructor has already been defined"),wh=e}(op);const mp={};let vp=!1;function yp(e,t,n,i,r){let s=i||e.options.databaseURL;void 0===s&&(e.options.projectId||vl("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),fl("Using default host for project ",e.options.projectId),s="".concat(e.options.projectId,"-default-rtdb.firebaseio.com"));let o,a,l=Zd(s,r),c=l.repoInfo;"undefined"!==typeof process&&(a={NODE_ENV:"production",PUBLIC_URL:"/read-pdf-by-page",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_FIREBASE_API_KEY:"AIzaSyBKA2ype48tLbkfy_qV29amJ_RMpONpUwg",REACT_APP_FIREBASE_APP_ID:"1:564116137461:web:e8247258126be9fb612cbc",REACT_APP_FIREBASE_AUTH_DOMAIN:"read-pdf-by-page.firebaseapp.com",REACT_APP_FIREBASE_MESSAGING_SENDER_ID:"564116137461",REACT_APP_FIREBASE_PROJECT_ID:"read-pdf-by-page",REACT_APP_FIREBASE_REALTIME_REFERENCE_URL:"https://read-pdf-by-page-default-rtdb.firebaseio.com",REACT_APP_FIREBASE_STORAGE_BUCKET:"read-pdf-by-page.appspot.com"}.FIREBASE_DATABASE_EMULATOR_HOST),a?(o=!0,s="http://".concat(a,"?ns=").concat(c.namespace),l=Zd(s,r),c=l.repoInfo):o=!l.repoInfo.secure;const u=r&&o?new Ol(Ol.OWNER):new Dl(e.name,e.options,t);kd("Invalid Firebase Database URL",l),pc(l.path)||vl("Database URL must point to the root of a Firebase Database (not including a child path).");const h=function(e,t,n,i){let r=mp[t.name];r||(r={},mp[t.name]=r);let s=r[e.toURLString()];s&&vl("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call.");return s=new Rd(e,vp,n,i),r[e.toURLString()]=s,s}(c,e,u,new Nl(e.name,n));return new _p(h,e)}class _p{constructor(e,t){this._repoInternal=e,this.app=t,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(Md(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new op(this._repo,sc())),this._rootInternal}_delete(){return null!==this._rootInternal&&(!function(e,t){const n=mp[t];n&&n[e.key]===e||vl("Database ".concat(t,"(").concat(e.repoInfo_,") has already been deleted.")),Ud(e),delete n[e.key]}(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(e){null===this._rootInternal&&vl("Cannot call "+e+" on a deleted database.")}}const wp={".sv":"timestamp"};xc.prototype.simpleListen=function(e,t){this.sendRequest("q",{p:e},t)},xc.prototype.echo=function(e,t){this.sendRequest("echo",{d:e},t)};!function(e){tl(On),In(new gt("database",(e,t)=>{let{instanceIdentifier:n}=t;return yp(e.getProvider("app").getImmediate(),e.getProvider("auth-internal"),e.getProvider("app-check-internal"),n)},"PUBLIC").setMultipleInstances(!0)),jn(Ja,Za,e),jn(Ja,Za,"esm2017")}();const bp=Ln({apiKey:"AIzaSyBKA2ype48tLbkfy_qV29amJ_RMpONpUwg",authDomain:"read-pdf-by-page.firebaseapp.com",projectId:"read-pdf-by-page",storageBucket:"read-pdf-by-page.appspot.com",messagingSenderId:"564116137461",appId:"1:564116137461:web:e8247258126be9fb612cbc"}),xp=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Fn();const t=Rn(e,"auth");if(t.isInitialized())return t.getImmediate();const n=function(e,t){const n=Rn(e,"auth");if(n.isInitialized()){const e=n.getImmediate();if(rt(n.getOptions(),null!==t&&void 0!==t?t:{}))return e;Br(e,"already-initialized")}return n.initialize({options:t})}(e,{popupRedirectResolver:Va,persistence:[na,Bo,Uo]}),i=Ue("authTokenSyncURL");if(i&&"boolean"===typeof isSecureContext&&isSecureContext){const e=new URL(i,location.origin);if(location.origin===e.origin){const t=(r=e.toString(),async e=>{const t=e&&await e.getIdTokenResult(),n=t&&((new Date).getTime()-Date.parse(t.issuedAtTime))/1e3;if(n&&n>Ya)return;const i=null===t||void 0===t?void 0:t.token;Xa!==i&&(Xa=i,await fetch(r,{method:i?"POST":"DELETE",headers:i?{Authorization:"Bearer ".concat(i)}:{}}))});!function(e,t,n){ft(e).beforeAuthStateChanged(t,n)}(n,t,()=>t(n.currentUser)),function(e,t,n,i){ft(e).onIdTokenChanged(t,n,i)}(n,e=>t(e))}}var r;const s=je("auth");return s&&no(n,"http://".concat(s)),n}(bp),kp=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Fn(),t=arguments.length>1?arguments[1]:void 0;const n=Rn(e,"database").getImmediate({identifier:t});if(!n._instanceStarted){const e=Be("database");e&&function(e,t,n){let i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};e=ft(e),e._checkNotDeleted("useEmulator"),e._instanceStarted&&vl("Cannot call useEmulator() after instance has already been initialized.");const r=e._repoInternal;let s;if(r.repoInfo_.nodeAdmin)i.mockUserToken&&vl('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),s=new Ol(Ol.OWNER);else if(i.mockUserToken){const t="string"===typeof i.mockUserToken?i.mockUserToken:He(i.mockUserToken,e.app.options.projectId);s=new Ol(t)}!function(e,t,n,i){e.repoInfo_=new Ul("".concat(t,":").concat(n),!1,e.repoInfo_.namespace,e.repoInfo_.webSocketOnly,e.repoInfo_.nodeAdmin,e.repoInfo_.persistenceKey,e.repoInfo_.includeNamespaceInQueryParams,!0),i&&(e.authTokenProvider_=i)}(r,t,n,s)}(n,...e)}return n}(bp),Ep=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Fn(),t=arguments.length>1?arguments[1]:void 0;e=ft(e);const n=Rn(e,Sr).getImmediate({identifier:t}),i=Be("storage");return i&&function(e,t,n){let i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};!function(e,t,n){let i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};e.host="".concat(t,":").concat(n),e._protocol="http";const{mockUserToken:r}=i;r&&(e._overrideAuthToken="string"===typeof r?r:He(r,e.app.options.projectId))}(e,t,n,i)}(n,...i),n}(bp),Cp=(e,t,n,i)=>{(0,r.useEffect)(()=>{let r;const s=function(e,t,n,i){return ft(e).onAuthStateChanged(t,n,i)}(e,async e=>{e?(r=lp(t,"users/".concat(e.uid)),fp(r,r=>{const s=r.val();if(s&&s.savedPdfs)n(It({},s));else{const i=It(It({},s),{},{uid:e.uid,email:e.email,savedPdfs:[]});up(lp(t,"users/".concat(e.uid)),i),n(i)}i(!1)})):(r&&gp(r),n(null),i(!1))});return()=>{s(),r&&gp(r)}},[])},Sp=async(e,t,n,i)=>{if(!n||!i)throw new Error("Profile or storage is null");const r=n.savedPdfs.findIndex(t=>t.title===e.title);if(r<0)return alert("Pdf is not existing in database."),n;const s=[...n.savedPdfs];s.splice(r,1);const o=It(It({},n),{},{savedPdfs:s});up(lp(t,"users/".concat(n.uid)),o);const a="files/".concat(n.uid,"/").concat(e.title);try{return await function(e){return yr(e=ft(e))}(Tr(i,a)),o}catch(ml){return console.error("Error deleting pdf from storage:",ml),n}},Ap=async(e,t,n,i,r)=>{if(null===e)throw new Error("userId is null");if(null===t)throw new Error("file is null");if(null===r||""===r)throw new Error("fileName is null");const s=Ar(Tr(n,"files/".concat(e,"/").concat(r)),new Blob([JSON.stringify(t)],{type:"application/json"}));await Tp(s,i);const o=await function(e){return vr(e=ft(e))}(s.snapshot.ref);return o},Tp=(e,t)=>new Promise((n,i)=>{e.on("state_changed",e=>{const n=e.bytesTransferred/e.totalBytes*100;t(.8*n)},i,n)});let Pp=0;const Ip=new Map,Rp=e=>{if(Ip.has(e))return;const t=setTimeout(()=>{Ip.delete(e),Op({type:"REMOVE_TOAST",toastId:e})},1e6);Ip.set(e,t)},Mp=(e,t)=>{switch(t.type){case"ADD_TOAST":return It(It({},e),{},{toasts:[t.toast,...e.toasts].slice(0,1)});case"UPDATE_TOAST":return It(It({},e),{},{toasts:e.toasts.map(e=>e.id===t.toast.id?It(It({},e),t.toast):e)});case"DISMISS_TOAST":{const{toastId:n}=t;return n?Rp(n):e.toasts.forEach(e=>{Rp(e.id)}),It(It({},e),{},{toasts:e.toasts.map(e=>e.id===n||void 0===n?It(It({},e),{},{open:!1}):e)})}case"REMOVE_TOAST":return void 0===t.toastId?It(It({},e),{},{toasts:[]}):It(It({},e),{},{toasts:e.toasts.filter(e=>e.id!==t.toastId)})}},Np=[];let Dp={toasts:[]};function Op(e){Dp=Mp(Dp,e),Np.forEach(e=>{e(Dp)})}function Lp(e){let t=Object.assign({},(function(e){if(null==e)throw new TypeError("Cannot destructure "+e)}(e),e));const n=(Pp=(Pp+1)%Number.MAX_SAFE_INTEGER,Pp.toString()),i=()=>Op({type:"DISMISS_TOAST",toastId:n});return Op({type:"ADD_TOAST",toast:It(It({},t),{},{id:n,open:!0,onOpenChange:e=>{e||i()}})}),{id:n,dismiss:i,update:e=>Op({type:"UPDATE_TOAST",toast:It(It({},e),{},{id:n})})}}function Fp(){const[e,t]=r.useState(Dp);return r.useEffect(()=>(Np.push(t),()=>{const e=Np.indexOf(t);e>-1&&Np.splice(e,1)}),[e]),It(It({},e),{},{toast:Lp,dismiss:e=>Op({type:"DISMISS_TOAST",toastId:e})})}var jp=n(579);const Bp=(0,r.createContext)({profile:null,isLoading:!0,handleAddSavedPdf:()=>{},updatePageOfPdf:()=>{},deletePdf:()=>{}}),Wp=e=>{let{children:t}=e;const[n,i]=(0,r.useState)(null),[s,o]=(0,r.useState)(!0),{toast:a}=Fp();Cp(xp,kp,i,o);const l=(0,r.useCallback)(async(e,t,r)=>{if(n){const{profile:s,success:o,message:l}=await(async(e,t,n,i,r,s)=>{if(!t||!i)throw new Error("Profile or file is null");if(t.savedPdfs.length>=5)return{profile:t,success:!1,message:"You can only upload up to ".concat(5," files.")};if(n.size>20971520)return{profile:t,success:!1,message:"File size exceeds the limit of ".concat(20,"MB.")};if(t.savedPdfs.reduce((e,t)=>e+(t.size||0),0)+n.size>104857600)return{profile:t,success:!1,message:"Total storage limit of ".concat(100,"MB exceeded.")};if(-1===t.savedPdfs.findIndex(e=>e.title===n.title)){s(85);const{uid:o}=t,a=await Ap(o,i,r,s,n.title),l=[...t.savedPdfs,It(It({},n),{},{downloadURL:a})],c=It(It({},t),{},{savedPdfs:l});return await up(lp(e,"users/".concat(o)),c),s(99),{profile:c,success:!0}}return{profile:t,success:!1,message:"PDF already exists."}})(kp,n,e,t,Ep,r);a(o?{title:"Success",description:"Pdf uploaded successfully.",duration:3e3}:{title:"Error",description:l||"Pdf already exists or failed to upload.",variant:"destructive",duration:3e3}),i(s)}},[n,a]),c=(0,r.useCallback)((e,t)=>{if(n){const{profile:r,success:s}=((e,t,n,i)=>{const r=i.savedPdfs.findIndex(t=>t.title===e);if(-1===r)return{profile:i,success:!1};const s=[...i.savedPdfs],o=s[r];o.savedPage=t,o.updateDate=(new Date).toISOString();const a=It(It({},i),{},{savedPdfs:s});try{return up(lp(n,"users/".concat(i.uid)),a),{profile:a,success:!0}}catch(ml){return console.error("Error updating saved pdf page:",ml),{profile:i,success:!1}}})(e,t,kp,n);a(s?{title:"Success",description:"Page saved successfully.",duration:3e3}:{title:"Error",description:"Please make sure you uploaded the Pdf first.",variant:"destructive",duration:3e3}),i(r)}},[n,a]),u=(0,r.useCallback)(async e=>{if(n){const t=await Sp(e,kp,n,Ep);i(t)}},[n]),h=(0,r.useMemo)(()=>({profile:n,isLoading:s,handleAddSavedPdf:l,updatePageOfPdf:c,deletePdf:u}),[n,s,l,c,u]);return(0,jp.jsx)(Bp.Provider,{value:h,children:t})},Up=e=>{let{children:t}=e;const{profile:n,isLoading:i}=(0,r.useContext)(Bp),s=te();return(0,r.useEffect)(()=>{!i&&n&&s("/read-pdf-by-page")},[i,n,s]),(0,jp.jsx)(jp.Fragment,{children:i?(0,jp.jsxs)("p",{className:"mt-4 text-center animate-bounce",children:["Loading... ",(0,jp.jsx)("div",{className:"animate-spin",children:"|"})]}):t})};function zp(e,t){if(null==e)return{};var n,i,r=function(e,t){if(null==e)return{};var n={};for(var i in e)if({}.hasOwnProperty.call(e,i)){if(-1!==t.indexOf(i))continue;n[i]=e[i]}return n}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(i=0;i<s.length;i++)n=s[i],-1===t.indexOf(n)&&{}.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}const Hp=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.filter((e,t,n)=>Boolean(e)&&n.indexOf(e)===t).join(" ")};var Vp={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const qp=["color","size","strokeWidth","absoluteStrokeWidth","className","children","iconNode"],Gp=(0,r.forwardRef)((e,t)=>{let{color:n="currentColor",size:i=24,strokeWidth:s=2,absoluteStrokeWidth:o,className:a="",children:l,iconNode:c}=e,u=zp(e,qp);return(0,r.createElement)("svg",It(It({ref:t},Vp),{},{width:i,height:i,stroke:n,strokeWidth:o?24*Number(s)/Number(i):s,className:Hp("lucide",a)},u),[...c.map(e=>{let[t,n]=e;return(0,r.createElement)(t,n)}),...Array.isArray(l)?l:[l]])}),Kp=["className"],Yp=(e,t)=>{const n=(0,r.forwardRef)((n,i)=>{let{className:s}=n,o=zp(n,Kp);return(0,r.createElement)(Gp,It({ref:i,iconNode:t,className:Hp("lucide-".concat((a=e,a.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase())),s)},o));var a});return n.displayName="".concat(e),n},Xp=Yp("LogIn",[["path",{d:"M15 3h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-4",key:"u53s6r"}],["polyline",{points:"10 17 15 12 10 7",key:"1ail0h"}],["line",{x1:"15",x2:"3",y1:"12",y2:"12",key:"v6grx8"}]]);function Qp(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return e=>t.forEach(t=>function(e,t){"function"===typeof e?e(t):null!==e&&void 0!==e&&(e.current=t)}(t,e))}function $p(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return r.useCallback(Qp(...t),t)}const Jp=["children"],Zp=["children"];var ef=r.forwardRef((e,t)=>{const{children:n}=e,i=zp(e,Jp),s=r.Children.toArray(n),o=s.find(rf);if(o){const e=o.props.children,n=s.map(t=>t===o?r.Children.count(e)>1?r.Children.only(null):r.isValidElement(e)?e.props.children:null:t);return(0,jp.jsx)(tf,It(It({},i),{},{ref:t,children:r.isValidElement(e)?r.cloneElement(e,void 0,n):null}))}return(0,jp.jsx)(tf,It(It({},i),{},{ref:t,children:n}))});ef.displayName="Slot";var tf=r.forwardRef((e,t)=>{const{children:n}=e,i=zp(e,Zp);if(r.isValidElement(n)){const e=function(e){var t,n;let i=null===(t=Object.getOwnPropertyDescriptor(e.props,"ref"))||void 0===t?void 0:t.get,r=i&&"isReactWarning"in i&&i.isReactWarning;if(r)return e.ref;if(i=null===(n=Object.getOwnPropertyDescriptor(e,"ref"))||void 0===n?void 0:n.get,r=i&&"isReactWarning"in i&&i.isReactWarning,r)return e.props.ref;return e.props.ref||e.ref}(n);return r.cloneElement(n,It(It({},function(e,t){const n=It({},t);for(const i in t){const r=e[i],s=t[i];/^on[A-Z]/.test(i)?r&&s?n[i]=function(){s(...arguments),r(...arguments)}:r&&(n[i]=r):"style"===i?n[i]=It(It({},r),s):"className"===i&&(n[i]=[r,s].filter(Boolean).join(" "))}return It(It({},e),n)}(i,n.props)),{},{ref:t?Qp(t,e):e}))}return r.Children.count(n)>1?r.Children.only(null):null});tf.displayName="SlotClone";var nf=e=>{let{children:t}=e;return(0,jp.jsx)(jp.Fragment,{children:t})};function rf(e){return r.isValidElement(e)&&e.type===nf}function sf(e){var t,n,i="";if("string"==typeof e||"number"==typeof e)i+=e;else if("object"==typeof e)if(Array.isArray(e))for(t=0;t<e.length;t++)e[t]&&(n=sf(e[t]))&&(i&&(i+=" "),i+=n);else for(t in e)e[t]&&(i&&(i+=" "),i+=t);return i}function of(){for(var e,t,n=0,i="";n<arguments.length;)(e=arguments[n++])&&(t=sf(e))&&(i&&(i+=" "),i+=t);return i}const af=["class","className"],lf=e=>"boolean"===typeof e?"".concat(e):0===e?"0":e,cf=of,uf=(e,t)=>n=>{var i;if(null==(null===t||void 0===t?void 0:t.variants))return cf(e,null===n||void 0===n?void 0:n.class,null===n||void 0===n?void 0:n.className);const{variants:r,defaultVariants:s}=t,o=Object.keys(r).map(e=>{const t=null===n||void 0===n?void 0:n[e],i=null===s||void 0===s?void 0:s[e];if(null===t)return null;const o=lf(t)||lf(i);return r[e][o]}),a=n&&Object.entries(n).reduce((e,t)=>{let[n,i]=t;return void 0===i||(e[n]=i),e},{}),l=null===t||void 0===t||null===(i=t.compoundVariants)||void 0===i?void 0:i.reduce((e,t)=>{let{class:n,className:i}=t,r=zp(t,af);return Object.entries(r).every(e=>{let[t,n]=e;return Array.isArray(n)?n.includes(It(It({},s),a)[t]):It(It({},s),a)[t]===n})?[...e,n,i]:e},[]);return cf(e,o,l,null===n||void 0===n?void 0:n.class,null===n||void 0===n?void 0:n.className)};function hf(e){var t,n,i="";if("string"==typeof e||"number"==typeof e)i+=e;else if("object"==typeof e)if(Array.isArray(e)){var r=e.length;for(t=0;t<r;t++)e[t]&&(n=hf(e[t]))&&(i&&(i+=" "),i+=n)}else for(n in e)e[n]&&(i&&(i+=" "),i+=n);return i}function df(){for(var e,t,n=0,i="",r=arguments.length;n<r;n++)(e=arguments[n])&&(t=hf(e))&&(i&&(i+=" "),i+=t);return i}function pf(e){const t=function(e){const{theme:t,prefix:n}=e,i={nextPart:new Map,validators:[]},r=function(e,t){if(!t)return e;return e.map(e=>{let[n,i]=e;return[n,i.map(e=>"string"===typeof e?t+e:"object"===typeof e?Object.fromEntries(Object.entries(e).map(e=>{let[n,i]=e;return[t+n,i]})):e)]})}(Object.entries(e.classGroups),n);return r.forEach(e=>{let[n,r]=e;mf(r,i,n,t)}),i}(e),{conflictingClassGroups:n,conflictingClassGroupModifiers:i}=e;return{getClassGroupId:function(e){const n=e.split("-");return""===n[0]&&1!==n.length&&n.shift(),ff(n,t)||function(e){if(gf.test(e)){const t=gf.exec(e)[1],n=null===t||void 0===t?void 0:t.substring(0,t.indexOf(":"));if(n)return"arbitrary.."+n}}(e)},getConflictingClassGroupIds:function(e,t){const r=n[e]||[];return t&&i[e]?[...r,...i[e]]:r}}}function ff(e,t){var n;if(0===e.length)return t.classGroupId;const i=e[0],r=t.nextPart.get(i),s=r?ff(e.slice(1),r):void 0;if(s)return s;if(0===t.validators.length)return;const o=e.join("-");return null===(n=t.validators.find(e=>{let{validator:t}=e;return t(o)}))||void 0===n?void 0:n.classGroupId}const gf=/^\[(.+)\]$/;function mf(e,t,n,i){e.forEach(e=>{if("string"===typeof e){return void((""===e?t:vf(t,e)).classGroupId=n)}if("function"===typeof e)return e.isThemeGetter?void mf(e(i),t,n,i):void t.validators.push({validator:e,classGroupId:n});Object.entries(e).forEach(e=>{let[r,s]=e;mf(s,vf(t,r),n,i)})})}function vf(e,t){let n=e;return t.split("-").forEach(e=>{n.nextPart.has(e)||n.nextPart.set(e,{nextPart:new Map,validators:[]}),n=n.nextPart.get(e)}),n}function yf(e){if(e<1)return{get:()=>{},set:()=>{}};let t=0,n=new Map,i=new Map;function r(r,s){n.set(r,s),t++,t>e&&(t=0,i=n,n=new Map)}return{get(e){let t=n.get(e);return void 0!==t?t:void 0!==(t=i.get(e))?(r(e,t),t):void 0},set(e,t){n.has(e)?n.set(e,t):r(e,t)}}}function _f(e){const{separator:t,experimentalParseClassName:n}=e,i=1===t.length,r=t[0],s=t.length;function o(e){const n=[];let o,a=0,l=0;for(let h=0;h<e.length;h++){let c=e[h];if(0===a){if(c===r&&(i||e.slice(h,h+s)===t)){n.push(e.slice(l,h)),l=h+s;continue}if("/"===c){o=h;continue}}"["===c?a++:"]"===c&&a--}const c=0===n.length?e:e.substring(l),u=c.startsWith("!");return{modifiers:n,hasImportantModifier:u,baseClassName:u?c.substring(1):c,maybePostfixModifierPosition:o&&o>l?o-l:void 0}}return n?function(e){return n({className:e,parseClassName:o})}:o}const wf=/\s+/;function bf(){let e,t,n=0,i="";for(;n<arguments.length;)(e=arguments[n++])&&(t=xf(e))&&(i&&(i+=" "),i+=t);return i}function xf(e){if("string"===typeof e)return e;let t,n="";for(let i=0;i<e.length;i++)e[i]&&(t=xf(e[i]))&&(n&&(n+=" "),n+=t);return n}function kf(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];let r,s,o,a=function(t){const i=n.reduce((e,t)=>t(e),e());return r=function(e){return It({cache:yf(e.cacheSize),parseClassName:_f(e)},pf(e))}(i),s=r.cache.get,o=r.cache.set,a=l,l(t)};function l(e){const t=s(e);if(t)return t;const n=function(e,t){const{parseClassName:n,getClassGroupId:i,getConflictingClassGroupIds:r}=t,s=new Set;return e.trim().split(wf).map(e=>{const{modifiers:t,hasImportantModifier:r,baseClassName:s,maybePostfixModifierPosition:o}=n(e);let a=Boolean(o),l=i(a?s.substring(0,o):s);if(!l){if(!a)return{isTailwindClass:!1,originalClassName:e};if(l=i(s),!l)return{isTailwindClass:!1,originalClassName:e};a=!1}const c=function(e){if(e.length<=1)return e;const t=[];let n=[];return e.forEach(e=>{"["===e[0]?(t.push(...n.sort(),e),n=[]):n.push(e)}),t.push(...n.sort()),t}(t).join(":");return{isTailwindClass:!0,modifierId:r?c+"!":c,classGroupId:l,originalClassName:e,hasPostfixModifier:a}}).reverse().filter(e=>{if(!e.isTailwindClass)return!0;const{modifierId:t,classGroupId:n,hasPostfixModifier:i}=e,o=t+n;return!s.has(o)&&(s.add(o),r(n,i).forEach(e=>s.add(t+e)),!0)}).reverse().map(e=>e.originalClassName).join(" ")}(e,r);return o(e,n),n}return function(){return a(bf.apply(null,arguments))}}function Ef(e){const t=t=>t[e]||[];return t.isThemeGetter=!0,t}const Cf=/^\[(?:([a-z-]+):)?(.+)\]$/i,Sf=/^\d+\/\d+$/,Af=new Set(["px","full","screen"]),Tf=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,Pf=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,If=/^(rgba?|hsla?|hwb|(ok)?(lab|lch))\(.+\)$/,Rf=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,Mf=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/;function Nf(e){return Of(e)||Af.has(e)||Sf.test(e)}function Df(e){return Yf(e,"length",Xf)}function Of(e){return Boolean(e)&&!Number.isNaN(Number(e))}function Lf(e){return Yf(e,"number",Of)}function Ff(e){return Boolean(e)&&Number.isInteger(Number(e))}function jf(e){return e.endsWith("%")&&Of(e.slice(0,-1))}function Bf(e){return Cf.test(e)}function Wf(e){return Tf.test(e)}const Uf=new Set(["length","size","percentage"]);function zf(e){return Yf(e,Uf,Qf)}function Hf(e){return Yf(e,"position",Qf)}const Vf=new Set(["image","url"]);function qf(e){return Yf(e,Vf,Jf)}function Gf(e){return Yf(e,"",$f)}function Kf(){return!0}function Yf(e,t,n){const i=Cf.exec(e);return!!i&&(i[1]?"string"===typeof t?i[1]===t:t.has(i[1]):n(i[2]))}function Xf(e){return Pf.test(e)&&!If.test(e)}function Qf(){return!1}function $f(e){return Rf.test(e)}function Jf(e){return Mf.test(e)}Symbol.toStringTag;function Zf(){const e=Ef("colors"),t=Ef("spacing"),n=Ef("blur"),i=Ef("brightness"),r=Ef("borderColor"),s=Ef("borderRadius"),o=Ef("borderSpacing"),a=Ef("borderWidth"),l=Ef("contrast"),c=Ef("grayscale"),u=Ef("hueRotate"),h=Ef("invert"),d=Ef("gap"),p=Ef("gradientColorStops"),f=Ef("gradientColorStopPositions"),g=Ef("inset"),m=Ef("margin"),v=Ef("opacity"),y=Ef("padding"),_=Ef("saturate"),w=Ef("scale"),b=Ef("sepia"),x=Ef("skew"),k=Ef("space"),E=Ef("translate"),C=()=>["auto",Bf,t],S=()=>[Bf,t],A=()=>["",Nf,Df],T=()=>["auto",Of,Bf],P=()=>["","0",Bf],I=()=>[Of,Lf],R=()=>[Of,Bf];return{cacheSize:500,separator:":",theme:{colors:[Kf],spacing:[Nf,Df],blur:["none","",Wf,Bf],brightness:I(),borderColor:[e],borderRadius:["none","","full",Wf,Bf],borderSpacing:S(),borderWidth:A(),contrast:I(),grayscale:P(),hueRotate:R(),invert:P(),gap:S(),gradientColorStops:[e],gradientColorStopPositions:[jf,Df],inset:C(),margin:C(),opacity:I(),padding:S(),saturate:I(),scale:I(),sepia:P(),skew:R(),space:S(),translate:S()},classGroups:{aspect:[{aspect:["auto","square","video",Bf]}],container:["container"],columns:[{columns:[Wf]}],"break-after":[{"break-after":["auto","avoid","all","avoid-page","page","left","right","column"]}],"break-before":[{"break-before":["auto","avoid","all","avoid-page","page","left","right","column"]}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top",Bf]}],overflow:[{overflow:["auto","hidden","clip","visible","scroll"]}],"overflow-x":[{"overflow-x":["auto","hidden","clip","visible","scroll"]}],"overflow-y":[{"overflow-y":["auto","hidden","clip","visible","scroll"]}],overscroll:[{overscroll:["auto","contain","none"]}],"overscroll-x":[{"overscroll-x":["auto","contain","none"]}],"overscroll-y":[{"overscroll-y":["auto","contain","none"]}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:[g]}],"inset-x":[{"inset-x":[g]}],"inset-y":[{"inset-y":[g]}],start:[{start:[g]}],end:[{end:[g]}],top:[{top:[g]}],right:[{right:[g]}],bottom:[{bottom:[g]}],left:[{left:[g]}],visibility:["visible","invisible","collapse"],z:[{z:["auto",Ff,Bf]}],basis:[{basis:C()}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["wrap","wrap-reverse","nowrap"]}],flex:[{flex:["1","auto","initial","none",Bf]}],grow:[{grow:P()}],shrink:[{shrink:P()}],order:[{order:["first","last","none",Ff,Bf]}],"grid-cols":[{"grid-cols":[Kf]}],"col-start-end":[{col:["auto",{span:["full",Ff,Bf]},Bf]}],"col-start":[{"col-start":T()}],"col-end":[{"col-end":T()}],"grid-rows":[{"grid-rows":[Kf]}],"row-start-end":[{row:["auto",{span:[Ff,Bf]},Bf]}],"row-start":[{"row-start":T()}],"row-end":[{"row-end":T()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":["auto","min","max","fr",Bf]}],"auto-rows":[{"auto-rows":["auto","min","max","fr",Bf]}],gap:[{gap:[d]}],"gap-x":[{"gap-x":[d]}],"gap-y":[{"gap-y":[d]}],"justify-content":[{justify:["normal","start","end","center","between","around","evenly","stretch"]}],"justify-items":[{"justify-items":["start","end","center","stretch"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch"]}],"align-content":[{content:["normal","start","end","center","between","around","evenly","stretch","baseline"]}],"align-items":[{items:["start","end","center","baseline","stretch"]}],"align-self":[{self:["auto","start","end","center","stretch","baseline"]}],"place-content":[{"place-content":["start","end","center","between","around","evenly","stretch","baseline"]}],"place-items":[{"place-items":["start","end","center","baseline","stretch"]}],"place-self":[{"place-self":["auto","start","end","center","stretch"]}],p:[{p:[y]}],px:[{px:[y]}],py:[{py:[y]}],ps:[{ps:[y]}],pe:[{pe:[y]}],pt:[{pt:[y]}],pr:[{pr:[y]}],pb:[{pb:[y]}],pl:[{pl:[y]}],m:[{m:[m]}],mx:[{mx:[m]}],my:[{my:[m]}],ms:[{ms:[m]}],me:[{me:[m]}],mt:[{mt:[m]}],mr:[{mr:[m]}],mb:[{mb:[m]}],ml:[{ml:[m]}],"space-x":[{"space-x":[k]}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":[k]}],"space-y-reverse":["space-y-reverse"],w:[{w:["auto","min","max","fit","svw","lvw","dvw",Bf,t]}],"min-w":[{"min-w":[Bf,t,"min","max","fit"]}],"max-w":[{"max-w":[Bf,t,"none","full","min","max","fit","prose",{screen:[Wf]},Wf]}],h:[{h:[Bf,t,"auto","min","max","fit","svh","lvh","dvh"]}],"min-h":[{"min-h":[Bf,t,"min","max","fit","svh","lvh","dvh"]}],"max-h":[{"max-h":[Bf,t,"min","max","fit","svh","lvh","dvh"]}],size:[{size:[Bf,t,"auto","min","max","fit"]}],"font-size":[{text:["base",Wf,Df]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:["thin","extralight","light","normal","medium","semibold","bold","extrabold","black",Lf]}],"font-family":[{font:[Kf]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractons"],tracking:[{tracking:["tighter","tight","normal","wide","wider","widest",Bf]}],"line-clamp":[{"line-clamp":["none",Of,Lf]}],leading:[{leading:["none","tight","snug","normal","relaxed","loose",Nf,Bf]}],"list-image":[{"list-image":["none",Bf]}],"list-style-type":[{list:["none","disc","decimal",Bf]}],"list-style-position":[{list:["inside","outside"]}],"placeholder-color":[{placeholder:[e]}],"placeholder-opacity":[{"placeholder-opacity":[v]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"text-color":[{text:[e]}],"text-opacity":[{"text-opacity":[v]}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:["solid","dashed","dotted","double","none","wavy"]}],"text-decoration-thickness":[{decoration:["auto","from-font",Nf,Df]}],"underline-offset":[{"underline-offset":["auto",Nf,Bf]}],"text-decoration-color":[{decoration:[e]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:S()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",Bf]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",Bf]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-opacity":[{"bg-opacity":[v]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top",Hf]}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","round","space"]}]}],"bg-size":[{bg:["auto","cover","contain",zf]}],"bg-image":[{bg:["none",{"gradient-to":["t","tr","r","br","b","bl","l","tl"]},qf]}],"bg-color":[{bg:[e]}],"gradient-from-pos":[{from:[f]}],"gradient-via-pos":[{via:[f]}],"gradient-to-pos":[{to:[f]}],"gradient-from":[{from:[p]}],"gradient-via":[{via:[p]}],"gradient-to":[{to:[p]}],rounded:[{rounded:[s]}],"rounded-s":[{"rounded-s":[s]}],"rounded-e":[{"rounded-e":[s]}],"rounded-t":[{"rounded-t":[s]}],"rounded-r":[{"rounded-r":[s]}],"rounded-b":[{"rounded-b":[s]}],"rounded-l":[{"rounded-l":[s]}],"rounded-ss":[{"rounded-ss":[s]}],"rounded-se":[{"rounded-se":[s]}],"rounded-ee":[{"rounded-ee":[s]}],"rounded-es":[{"rounded-es":[s]}],"rounded-tl":[{"rounded-tl":[s]}],"rounded-tr":[{"rounded-tr":[s]}],"rounded-br":[{"rounded-br":[s]}],"rounded-bl":[{"rounded-bl":[s]}],"border-w":[{border:[a]}],"border-w-x":[{"border-x":[a]}],"border-w-y":[{"border-y":[a]}],"border-w-s":[{"border-s":[a]}],"border-w-e":[{"border-e":[a]}],"border-w-t":[{"border-t":[a]}],"border-w-r":[{"border-r":[a]}],"border-w-b":[{"border-b":[a]}],"border-w-l":[{"border-l":[a]}],"border-opacity":[{"border-opacity":[v]}],"border-style":[{border:["solid","dashed","dotted","double","none","hidden"]}],"divide-x":[{"divide-x":[a]}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":[a]}],"divide-y-reverse":["divide-y-reverse"],"divide-opacity":[{"divide-opacity":[v]}],"divide-style":[{divide:["solid","dashed","dotted","double","none"]}],"border-color":[{border:[r]}],"border-color-x":[{"border-x":[r]}],"border-color-y":[{"border-y":[r]}],"border-color-t":[{"border-t":[r]}],"border-color-r":[{"border-r":[r]}],"border-color-b":[{"border-b":[r]}],"border-color-l":[{"border-l":[r]}],"divide-color":[{divide:[r]}],"outline-style":[{outline:["","solid","dashed","dotted","double","none"]}],"outline-offset":[{"outline-offset":[Nf,Bf]}],"outline-w":[{outline:[Nf,Df]}],"outline-color":[{outline:[e]}],"ring-w":[{ring:A()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:[e]}],"ring-opacity":[{"ring-opacity":[v]}],"ring-offset-w":[{"ring-offset":[Nf,Df]}],"ring-offset-color":[{"ring-offset":[e]}],shadow:[{shadow:["","inner","none",Wf,Gf]}],"shadow-color":[{shadow:[Kf]}],opacity:[{opacity:[v]}],"mix-blend":[{"mix-blend":["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity","plus-lighter","plus-darker"]}],"bg-blend":[{"bg-blend":["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"]}],filter:[{filter:["","none"]}],blur:[{blur:[n]}],brightness:[{brightness:[i]}],contrast:[{contrast:[l]}],"drop-shadow":[{"drop-shadow":["","none",Wf,Bf]}],grayscale:[{grayscale:[c]}],"hue-rotate":[{"hue-rotate":[u]}],invert:[{invert:[h]}],saturate:[{saturate:[_]}],sepia:[{sepia:[b]}],"backdrop-filter":[{"backdrop-filter":["","none"]}],"backdrop-blur":[{"backdrop-blur":[n]}],"backdrop-brightness":[{"backdrop-brightness":[i]}],"backdrop-contrast":[{"backdrop-contrast":[l]}],"backdrop-grayscale":[{"backdrop-grayscale":[c]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[u]}],"backdrop-invert":[{"backdrop-invert":[h]}],"backdrop-opacity":[{"backdrop-opacity":[v]}],"backdrop-saturate":[{"backdrop-saturate":[_]}],"backdrop-sepia":[{"backdrop-sepia":[b]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":[o]}],"border-spacing-x":[{"border-spacing-x":[o]}],"border-spacing-y":[{"border-spacing-y":[o]}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["none","all","","colors","opacity","shadow","transform",Bf]}],duration:[{duration:R()}],ease:[{ease:["linear","in","out","in-out",Bf]}],delay:[{delay:R()}],animate:[{animate:["none","spin","ping","pulse","bounce",Bf]}],transform:[{transform:["","gpu","none"]}],scale:[{scale:[w]}],"scale-x":[{"scale-x":[w]}],"scale-y":[{"scale-y":[w]}],rotate:[{rotate:[Ff,Bf]}],"translate-x":[{"translate-x":[E]}],"translate-y":[{"translate-y":[E]}],"skew-x":[{"skew-x":[x]}],"skew-y":[{"skew-y":[x]}],"transform-origin":[{origin:["center","top","top-right","right","bottom-right","bottom","bottom-left","left","top-left",Bf]}],accent:[{accent:["auto",e]}],appearance:[{appearance:["none","auto"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",Bf]}],"caret-color":[{caret:[e]}],"pointer-events":[{"pointer-events":["none","auto"]}],resize:[{resize:["none","y","x",""]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":S()}],"scroll-mx":[{"scroll-mx":S()}],"scroll-my":[{"scroll-my":S()}],"scroll-ms":[{"scroll-ms":S()}],"scroll-me":[{"scroll-me":S()}],"scroll-mt":[{"scroll-mt":S()}],"scroll-mr":[{"scroll-mr":S()}],"scroll-mb":[{"scroll-mb":S()}],"scroll-ml":[{"scroll-ml":S()}],"scroll-p":[{"scroll-p":S()}],"scroll-px":[{"scroll-px":S()}],"scroll-py":[{"scroll-py":S()}],"scroll-ps":[{"scroll-ps":S()}],"scroll-pe":[{"scroll-pe":S()}],"scroll-pt":[{"scroll-pt":S()}],"scroll-pr":[{"scroll-pr":S()}],"scroll-pb":[{"scroll-pb":S()}],"scroll-pl":[{"scroll-pl":S()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",Bf]}],fill:[{fill:[e,"none"]}],"stroke-w":[{stroke:[Nf,Df,Lf]}],stroke:[{stroke:[e,"none"]}],sr:["sr-only","not-sr-only"],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]}}}const eg=kf(Zf);function tg(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return eg(df(t))}const ng=["className","variant","size","asChild"],ig=uf("inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),rg=r.forwardRef((e,t)=>{let{className:n,variant:i,size:r,asChild:s=!1}=e,o=zp(e,ng);const a=s?ef:"button";return(0,jp.jsx)(a,It({className:tg(ig({variant:i,size:r,className:n})),ref:t},o))});rg.displayName="Button";const sg=async e=>{try{const t=await async function(e,t,n){if(Mn(e.app))return Promise.reject(Wr(e,"operation-not-supported-in-this-environment"));const i=Ys(e);Hr(e,t,mo);const r=oa(i,n);return new pa(i,"signInViaPopup",t,r).executeNotNull()}(xp,e),n=Oo(t);null!==n&&void 0!==n&&n.isNewUser&&up(lp(kp,"users/".concat(t.user.uid)),{name:t.user.displayName,createdAt:wp,avatar:t.user.photoURL}),alert("You have successfully logged in.")}catch(ml){console.log(ml),alert("Something went wrong")}},og=async()=>{await sg(new _o)},ag=()=>(0,jp.jsxs)(rg,{type:"button",className:"flex w-full",onClick:og,size:"lg",variant:"outline",children:[(0,jp.jsx)(Xp,{className:"w-4 h-4 mr-2"}),"Sign In With Google"]}),lg=e=>{let{children:t}=e;const{profile:n,isLoading:i}=(0,r.useContext)(Bp),s=te();return(0,r.useEffect)(()=>{i||n||s("/read-pdf-by-page/login")},[i,n,s]),(0,jp.jsx)(jp.Fragment,{children:i?(0,jp.jsxs)("p",{className:"text-center animate-bounce mt-4",children:["Loading... ",(0,jp.jsx)("div",{className:"animate-spin",children:"|"})]}):t})};function cg(e,t,n){t||(t=[]);var i=t.length++;return Object.defineProperty({},"_",{set:function(r){t[i]=r,e.apply(n,t)}})}function ug(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}function hg(e,t){ug(e,t),t.add(e)}function dg(e,t,n){ug(e,t),t.set(e,n)}function pg(e,t,n){if("function"==typeof e?e===t:e.has(t))return arguments.length<3?t:n;throw new TypeError("Private element is not present on this object")}function fg(e,t,n){return n(pg(e,t))}function gg(e,t){return e.get(pg(e,t))}function mg(e,t,n){return e.set(pg(e,t),n),n}function vg(e){function t(e){if(Object(e)!==e)return Promise.reject(new TypeError(e+" is not an object."));var t=e.done;return Promise.resolve(e.value).then(function(e){return{value:e,done:t}})}return vg=function(e){this.s=e,this.n=e.next},vg.prototype={s:null,n:null,next:function(){return t(this.n.apply(this.s,arguments))},return:function(e){var n=this.s.return;return void 0===n?Promise.resolve({value:e,done:!0}):t(n.apply(this.s,arguments))},throw:function(e){var n=this.s.return;return void 0===n?Promise.reject(e):t(n.apply(this.s,arguments))}},new vg(e)}var yg,_g,wg,bg,xg,kg,Eg,Cg,Sg,Ag,Tg,Pg,Ig,Rg,Mg,Ng,Dg,Og;const Lg="object"===typeof process&&process+""==="[object process]"&&!process.versions.nw&&!(process.versions.electron&&process.type&&"browser"!==process.type),Fg=[.001,0,0,.001,0,0],jg=1.35,Bg=1,Wg=2,Ug=4,zg=16,Hg=32,Vg=64,qg=128,Gg=256,Kg={DISABLE:0,ENABLE:1,ENABLE_FORMS:2,ENABLE_STORAGE:3},Yg="pdfjs_internal_editor_",Xg={DISABLE:-1,NONE:0,FREETEXT:3,HIGHLIGHT:9,STAMP:13,INK:15,POPUP:16,SIGNATURE:101,COMMENT:102},Qg={RESIZE:1,CREATE:2,FREETEXT_SIZE:11,FREETEXT_COLOR:12,FREETEXT_OPACITY:13,INK_COLOR:21,INK_THICKNESS:22,INK_OPACITY:23,HIGHLIGHT_COLOR:31,HIGHLIGHT_THICKNESS:32,HIGHLIGHT_FREE:33,HIGHLIGHT_SHOW_ALL:34,DRAW_STEP:41},$g=0,Jg=1,Zg=2,em=3,tm=3,nm=4,im={GRAYSCALE_1BPP:1,RGB_24BPP:2,RGBA_32BPP:3},rm={TEXT:1,LINK:2,FREETEXT:3,LINE:4,SQUARE:5,CIRCLE:6,POLYGON:7,POLYLINE:8,HIGHLIGHT:9,UNDERLINE:10,SQUIGGLY:11,STRIKEOUT:12,STAMP:13,CARET:14,INK:15,POPUP:16,FILEATTACHMENT:17,SOUND:18,MOVIE:19,WIDGET:20,SCREEN:21,PRINTERMARK:22,TRAPNET:23,WATERMARK:24,THREED:25,REDACT:26},sm=1,om=2,am=3,lm=4,cm=5,um={ERRORS:0,WARNINGS:1,INFOS:5},hm={dependency:1,setLineWidth:2,setLineCap:3,setLineJoin:4,setMiterLimit:5,setDash:6,setRenderingIntent:7,setFlatness:8,setGState:9,save:10,restore:11,transform:12,moveTo:13,lineTo:14,curveTo:15,curveTo2:16,curveTo3:17,closePath:18,rectangle:19,stroke:20,closeStroke:21,fill:22,eoFill:23,fillStroke:24,eoFillStroke:25,closeFillStroke:26,closeEOFillStroke:27,endPath:28,clip:29,eoClip:30,beginText:31,endText:32,setCharSpacing:33,setWordSpacing:34,setHScale:35,setLeading:36,setFont:37,setTextRenderingMode:38,setTextRise:39,moveText:40,setLeadingMoveText:41,setTextMatrix:42,nextLine:43,showText:44,showSpacedText:45,nextLineShowText:46,nextLineSetSpacingShowText:47,setCharWidth:48,setCharWidthAndBounds:49,setStrokeColorSpace:50,setFillColorSpace:51,setStrokeColor:52,setStrokeColorN:53,setFillColor:54,setFillColorN:55,setStrokeGray:56,setFillGray:57,setStrokeRGBColor:58,setFillRGBColor:59,setStrokeCMYKColor:60,setFillCMYKColor:61,shadingFill:62,beginInlineImage:63,beginImageData:64,endInlineImage:65,paintXObject:66,markPoint:67,markPointProps:68,beginMarkedContent:69,beginMarkedContentProps:70,endMarkedContent:71,beginCompat:72,endCompat:73,paintFormXObjectBegin:74,paintFormXObjectEnd:75,beginGroup:76,endGroup:77,beginAnnotation:80,endAnnotation:81,paintImageMaskXObject:83,paintImageMaskXObjectGroup:84,paintImageXObject:85,paintInlineImageXObject:86,paintInlineImageXObjectGroup:87,paintImageXObjectRepeat:88,paintImageMaskXObjectRepeat:89,paintSolidColorImageMask:90,constructPath:91,setStrokeTransparent:92,setFillTransparent:93,rawFillPath:94},dm=0,pm=1,fm=2,gm=3;let mm=um.WARNINGS;function vm(e){Number.isInteger(e)&&(mm=e)}function ym(){return mm}function _m(e){mm>=um.INFOS&&console.info("Info: ".concat(e))}function wm(e){mm>=um.WARNINGS&&console.warn("Warning: ".concat(e))}function bm(e){throw new Error(e)}function xm(e,t){e||bm(t)}function km(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;if(!e)return null;if(n&&"string"===typeof e){if(n.addDefaultProtocol&&e.startsWith("www.")){const t=e.match(/\./g);(null===t||void 0===t?void 0:t.length)>=2&&(e="http://".concat(e))}if(n.tryConvertEncoding)try{e=decodeURIComponent(escape(e))}catch(r){}}const i=t?URL.parse(e,t):URL.parse(e);return function(e){switch(null===e||void 0===e?void 0:e.protocol){case"http:":case"https:":case"ftp:":case"mailto:":case"tel:":return!0;default:return!1}}(i)?i:null}function Em(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const i=URL.parse(e);return i?(i.hash=t,i.href):n&&km(e,"http://example.com")?e.split("#",1)[0]+"".concat(t?"#".concat(t):""):""}function Cm(e,t,n){let i=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return Object.defineProperty(e,t,{value:n,enumerable:!i,configurable:!0,writable:!1}),n}const Sm=function(){function e(e,t){this.message=e,this.name=t}return e.prototype=new Error,e.constructor=e,e}();class Am extends Sm{constructor(e,t){super(e,"PasswordException"),this.code=t}}class Tm extends Sm{constructor(e,t){super(e,"UnknownErrorException"),this.details=t}}class Pm extends Sm{constructor(e){super(e,"InvalidPDFException")}}class Im extends Sm{constructor(e,t,n){super(e,"ResponseException"),this.status=t,this.missing=n}}class Rm extends Sm{constructor(e){super(e,"FormatError")}}class Mm extends Sm{constructor(e){super(e,"AbortException")}}function Nm(e){"object"===typeof e&&void 0!==(null===e||void 0===e?void 0:e.length)||bm("Invalid argument for bytesToString");const t=e.length,n=8192;if(t<n)return String.fromCharCode.apply(null,e);const i=[];for(let r=0;r<t;r+=n){const s=Math.min(r+n,t),o=e.subarray(r,s);i.push(String.fromCharCode.apply(null,o))}return i.join("")}function Dm(e){"string"!==typeof e&&bm("Invalid argument for stringToBytes");const t=e.length,n=new Uint8Array(t);for(let i=0;i<t;++i)n[i]=255&e.charCodeAt(i);return n}class Om{static get isLittleEndian(){return Cm(this,"isLittleEndian",function(){const e=new Uint8Array(4);return e[0]=1,1===new Uint32Array(e.buffer,0,1)[0]}())}static get isEvalSupported(){return Cm(this,"isEvalSupported",function(){try{return new Function(""),!0}catch(e){return!1}}())}static get isOffscreenCanvasSupported(){return Cm(this,"isOffscreenCanvasSupported","undefined"!==typeof OffscreenCanvas)}static get isImageDecoderSupported(){return Cm(this,"isImageDecoderSupported","undefined"!==typeof ImageDecoder)}static get platform(){const{platform:e,userAgent:t}=navigator;return Cm(this,"platform",{isAndroid:t.includes("Android"),isLinux:e.includes("Linux"),isMac:e.includes("Mac"),isWindows:e.includes("Win"),isFirefox:t.includes("Firefox")})}static get isCSSRoundSupported(){var e,t;return Cm(this,"isCSSRoundSupported",null===(e=globalThis.CSS)||void 0===e||null===(t=e.supports)||void 0===t?void 0:t.call(e,"width: round(1.5px, 1px)"))}}const Lm=Array.from(Array(256).keys(),e=>e.toString(16).padStart(2,"0"));class Fm{static makeHexColor(e,t,n){return"#".concat(Lm[e]).concat(Lm[t]).concat(Lm[n])}static domMatrixToTransform(e){return[e.a,e.b,e.c,e.d,e.e,e.f]}static scaleMinMax(e,t){let n;e[0]?(e[0]<0&&(n=t[0],t[0]=t[2],t[2]=n),t[0]*=e[0],t[2]*=e[0],e[3]<0&&(n=t[1],t[1]=t[3],t[3]=n),t[1]*=e[3],t[3]*=e[3]):(n=t[0],t[0]=t[1],t[1]=n,n=t[2],t[2]=t[3],t[3]=n,e[1]<0&&(n=t[1],t[1]=t[3],t[3]=n),t[1]*=e[1],t[3]*=e[1],e[2]<0&&(n=t[0],t[0]=t[2],t[2]=n),t[0]*=e[2],t[2]*=e[2]),t[0]+=e[4],t[1]+=e[5],t[2]+=e[4],t[3]+=e[5]}static transform(e,t){return[e[0]*t[0]+e[2]*t[1],e[1]*t[0]+e[3]*t[1],e[0]*t[2]+e[2]*t[3],e[1]*t[2]+e[3]*t[3],e[0]*t[4]+e[2]*t[5]+e[4],e[1]*t[4]+e[3]*t[5]+e[5]]}static multiplyByDOMMatrix(e,t){return[e[0]*t.a+e[2]*t.b,e[1]*t.a+e[3]*t.b,e[0]*t.c+e[2]*t.d,e[1]*t.c+e[3]*t.d,e[0]*t.e+e[2]*t.f+e[4],e[1]*t.e+e[3]*t.f+e[5]]}static applyTransform(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;const i=e[n],r=e[n+1];e[n]=i*t[0]+r*t[2]+t[4],e[n+1]=i*t[1]+r*t[3]+t[5]}static applyTransformToBezier(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;const i=t[0],r=t[1],s=t[2],o=t[3],a=t[4],l=t[5];for(let c=0;c<6;c+=2){const t=e[n+c],u=e[n+c+1];e[n+c]=t*i+u*s+a,e[n+c+1]=t*r+u*o+l}}static applyInverseTransform(e,t){const n=e[0],i=e[1],r=t[0]*t[3]-t[1]*t[2];e[0]=(n*t[3]-i*t[2]+t[2]*t[5]-t[4]*t[3])/r,e[1]=(-n*t[1]+i*t[0]+t[4]*t[1]-t[5]*t[0])/r}static axialAlignedBoundingBox(e,t,n){const i=t[0],r=t[1],s=t[2],o=t[3],a=t[4],l=t[5],c=e[0],u=e[1],h=e[2],d=e[3];let p=i*c+a,f=p,g=i*h+a,m=g,v=o*u+l,y=v,_=o*d+l,w=_;if(0!==r||0!==s){const e=r*c,t=r*h,n=s*u,i=s*d;p+=n,m+=n,g+=i,f+=i,v+=e,w+=e,_+=t,y+=t}n[0]=Math.min(n[0],p,g,f,m),n[1]=Math.min(n[1],v,_,y,w),n[2]=Math.max(n[2],p,g,f,m),n[3]=Math.max(n[3],v,_,y,w)}static inverseTransform(e){const t=e[0]*e[3]-e[1]*e[2];return[e[3]/t,-e[1]/t,-e[2]/t,e[0]/t,(e[2]*e[5]-e[4]*e[3])/t,(e[4]*e[1]-e[5]*e[0])/t]}static singularValueDecompose2dScale(e,t){const n=e[0],i=e[1],r=e[2],s=e[3],o=n**2+i**2,a=n*r+i*s,l=r**2+s**2,c=(o+l)/2,u=Math.sqrt(c**2-(o*l-a**2));t[0]=Math.sqrt(c+u||1),t[1]=Math.sqrt(c-u||1)}static normalizeRect(e){const t=e.slice(0);return e[0]>e[2]&&(t[0]=e[2],t[2]=e[0]),e[1]>e[3]&&(t[1]=e[3],t[3]=e[1]),t}static intersect(e,t){const n=Math.max(Math.min(e[0],e[2]),Math.min(t[0],t[2])),i=Math.min(Math.max(e[0],e[2]),Math.max(t[0],t[2]));if(n>i)return null;const r=Math.max(Math.min(e[1],e[3]),Math.min(t[1],t[3])),s=Math.min(Math.max(e[1],e[3]),Math.max(t[1],t[3]));return r>s?null:[n,r,i,s]}static pointBoundingBox(e,t,n){n[0]=Math.min(n[0],e),n[1]=Math.min(n[1],t),n[2]=Math.max(n[2],e),n[3]=Math.max(n[3],t)}static rectBoundingBox(e,t,n,i,r){r[0]=Math.min(r[0],e,n),r[1]=Math.min(r[1],t,i),r[2]=Math.max(r[2],e,n),r[3]=Math.max(r[3],t,i)}static bezierBoundingBox(e,t,n,i,r,s,o,a,l){l[0]=Math.min(l[0],e,o),l[1]=Math.min(l[1],t,a),l[2]=Math.max(l[2],e,o),l[3]=Math.max(l[3],t,a),pg(Fm,this,Bm).call(this,e,n,r,o,t,i,s,a,3*(3*(n-r)-e+o),6*(e-2*n+r),3*(n-e),l),pg(Fm,this,Bm).call(this,e,n,r,o,t,i,s,a,3*(3*(i-s)-t+a),6*(t-2*i+s),3*(i-t),l)}}function jm(e,t,n,i,r,s,o,a,l,c){if(l<=0||l>=1)return;const u=1-l,h=l*l,d=h*l,p=u*(u*(u*e+3*l*t)+3*h*n)+d*i,f=u*(u*(u*r+3*l*s)+3*h*o)+d*a;c[0]=Math.min(c[0],p),c[1]=Math.min(c[1],f),c[2]=Math.max(c[2],p),c[3]=Math.max(c[3],f)}function Bm(e,t,n,i,r,s,o,a,l,c,u,h){if(Math.abs(l)<1e-12)return void(Math.abs(c)>=1e-12&&pg(yg,this,jm).call(this,e,t,n,i,r,s,o,a,-u/c,h));const d=c**2-4*u*l;if(d<0)return;const p=Math.sqrt(d),f=2*l;pg(yg,this,jm).call(this,e,t,n,i,r,s,o,a,(-c+p)/f,h),pg(yg,this,jm).call(this,e,t,n,i,r,s,o,a,(-c-p)/f,h)}yg=Fm;let Wm=null,Um=null;function zm(){if("function"===typeof crypto.randomUUID)return crypto.randomUUID();const e=new Uint8Array(32);return crypto.getRandomValues(e),Nm(e)}const Hm="pdfjs_internal_id_";function Vm(e,t,n){return Math.min(Math.max(e,t),n)}function qm(e){return Uint8Array.prototype.toBase64?e.toBase64():btoa(Nm(e))}"function"!==typeof Promise.try&&(Promise.try=function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];return new Promise(t=>{t(e(...n))})}),"function"!==typeof Math.sumPrecise&&(Math.sumPrecise=function(e){return e.reduce((e,t)=>e+t,0)});class Gm{static textContent(e){const t=[],n={items:t,styles:Object.create(null)};return function e(n){var i;if(!n)return;let r=null;const s=n.name;if("#text"===s)r=n.value;else{if(!Gm.shouldBuildText(s))return;null!==n&&void 0!==n&&null!==(i=n.attributes)&&void 0!==i&&i.textContent?r=n.attributes.textContent:n.value&&(r=n.value)}if(null!==r&&t.push({str:r}),n.children)for(const t of n.children)e(t)}(e),n}static shouldBuildText(e){return!("textarea"===e||"input"===e||"option"===e||"select"===e)}}class Km{static setupStorage(e,t,n,i,r){const s=i.getValue(t,{value:null});switch(n.name){case"textarea":if(null!==s.value&&(e.textContent=s.value),"print"===r)break;e.addEventListener("input",e=>{i.setValue(t,{value:e.target.value})});break;case"input":if("radio"===n.attributes.type||"checkbox"===n.attributes.type){if(s.value===n.attributes.xfaOn?e.setAttribute("checked",!0):s.value===n.attributes.xfaOff&&e.removeAttribute("checked"),"print"===r)break;e.addEventListener("change",e=>{i.setValue(t,{value:e.target.checked?e.target.getAttribute("xfaOn"):e.target.getAttribute("xfaOff")})})}else{if(null!==s.value&&e.setAttribute("value",s.value),"print"===r)break;e.addEventListener("input",e=>{i.setValue(t,{value:e.target.value})})}break;case"select":if(null!==s.value){e.setAttribute("value",s.value);for(const e of n.children)e.attributes.value===s.value?e.attributes.selected=!0:e.attributes.hasOwnProperty("selected")&&delete e.attributes.selected}e.addEventListener("input",e=>{const n=e.target.options,r=-1===n.selectedIndex?"":n[n.selectedIndex].value;i.setValue(t,{value:r})})}}static setAttributes(e){let{html:t,element:n,storage:i=null,intent:r,linkService:s}=e;const{attributes:o}=n,a=t instanceof HTMLAnchorElement;"radio"===o.type&&(o.name="".concat(o.name,"-").concat(r));for(const[l,c]of Object.entries(o))if(null!==c&&void 0!==c)switch(l){case"class":c.length&&t.setAttribute(l,c.join(" "));break;case"dataId":break;case"id":t.setAttribute("data-element-id",c);break;case"style":Object.assign(t.style,c);break;case"textContent":t.textContent=c;break;default:(!a||"href"!==l&&"newWindow"!==l)&&t.setAttribute(l,c)}a&&s.addLinkAttributes(t,o.href,o.newWindow),i&&o.dataId&&this.setupStorage(t,o.dataId,n,i)}static render(e){const t=e.annotationStorage,n=e.linkService,i=e.xfaHtml,r=e.intent||"display",s=document.createElement(i.name);i.attributes&&this.setAttributes({html:s,element:i,intent:r,linkService:n});const o="richText"!==r,a=e.div;if(a.append(s),e.viewport){const t="matrix(".concat(e.viewport.transform.join(","),")");a.style.transform=t}o&&a.setAttribute("class","xfaLayer xfaFont");const l=[];if(0===i.children.length){if(i.value){const e=document.createTextNode(i.value);s.append(e),o&&Gm.shouldBuildText(i.name)&&l.push(e)}return{textDivs:l}}const c=[[i,-1,s]];for(;c.length>0;){var u,h;const[e,i,s]=c.at(-1);if(i+1===e.children.length){c.pop();continue}const a=e.children[++c.at(-1)[1]];if(null===a)continue;const{name:d}=a;if("#text"===d){const e=document.createTextNode(a.value);l.push(e),s.append(e);continue}const p=null!==a&&void 0!==a&&null!==(u=a.attributes)&&void 0!==u&&u.xmlns?document.createElementNS(a.attributes.xmlns,d):document.createElement(d);if(s.append(p),a.attributes&&this.setAttributes({html:p,element:a,storage:t,intent:r,linkService:n}),(null===(h=a.children)||void 0===h?void 0:h.length)>0)c.push([a,-1,p]);else if(a.value){const e=document.createTextNode(a.value);o&&Gm.shouldBuildText(d)&&l.push(e),p.append(e)}}for(const d of a.querySelectorAll(".xfaNonInteractive input, .xfaNonInteractive textarea"))d.setAttribute("readOnly",!0);return{textDivs:l}}static update(e){const t="matrix(".concat(e.viewport.transform.join(","),")");e.div.style.transform=t,e.div.hidden=!1}}const Ym="http://www.w3.org/2000/svg";class Xm{}async function Qm(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"text";if(nv(e,document.baseURI)){const n=await fetch(e);if(!n.ok)throw new Error(n.statusText);switch(t){case"arraybuffer":return n.arrayBuffer();case"blob":return n.blob();case"json":return n.json()}return n.text()}return new Promise((n,i)=>{const r=new XMLHttpRequest;r.open("GET",e,!0),r.responseType=t,r.onreadystatechange=()=>{if(r.readyState===XMLHttpRequest.DONE)if(200!==r.status&&0!==r.status)i(new Error(r.statusText));else{switch(t){case"arraybuffer":case"blob":case"json":return void n(r.response)}n(r.responseText)}},r.send(null)})}_g=Xm,Tt(Xm,"CSS",96),Tt(Xm,"PDF",72),Tt(Xm,"PDF_TO_CSS_UNITS",_g.CSS/_g.PDF);class $m{constructor(e){let{viewBox:t,userUnit:n,scale:i,rotation:r,offsetX:s=0,offsetY:o=0,dontFlip:a=!1}=e;this.viewBox=t,this.userUnit=n,this.scale=i,this.rotation=r,this.offsetX=s,this.offsetY=o,i*=n;const l=(t[2]+t[0])/2,c=(t[3]+t[1])/2;let u,h,d,p,f,g,m,v;switch(r%=360,r<0&&(r+=360),r){case 180:u=-1,h=0,d=0,p=1;break;case 90:u=0,h=1,d=1,p=0;break;case 270:u=0,h=-1,d=-1,p=0;break;case 0:u=1,h=0,d=0,p=-1;break;default:throw new Error("PageViewport: Invalid rotation, must be a multiple of 90 degrees.")}a&&(d=-d,p=-p),0===u?(f=Math.abs(c-t[1])*i+s,g=Math.abs(l-t[0])*i+o,m=(t[3]-t[1])*i,v=(t[2]-t[0])*i):(f=Math.abs(l-t[0])*i+s,g=Math.abs(c-t[1])*i+o,m=(t[2]-t[0])*i,v=(t[3]-t[1])*i),this.transform=[u*i,h*i,d*i,p*i,f-u*i*l-d*i*c,g-h*i*l-p*i*c],this.width=m,this.height=v}get rawDims(){const e=this.viewBox;return Cm(this,"rawDims",{pageWidth:e[2]-e[0],pageHeight:e[3]-e[1],pageX:e[0],pageY:e[1]})}clone(){let{scale:e=this.scale,rotation:t=this.rotation,offsetX:n=this.offsetX,offsetY:i=this.offsetY,dontFlip:r=!1}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return new $m({viewBox:this.viewBox.slice(),userUnit:this.userUnit,scale:e,rotation:t,offsetX:n,offsetY:i,dontFlip:r})}convertToViewportPoint(e,t){const n=[e,t];return Fm.applyTransform(n,this.transform),n}convertToViewportRectangle(e){const t=[e[0],e[1]];Fm.applyTransform(t,this.transform);const n=[e[2],e[3]];return Fm.applyTransform(n,this.transform),[t[0],t[1],n[0],n[1]]}convertToPdfPoint(e,t){const n=[e,t];return Fm.applyInverseTransform(n,this.transform),n}}class Jm extends Sm{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;super(e,"RenderingCancelledException"),this.extraDelay=t}}function Zm(e){const t=e.length;let n=0;for(;n<t&&""===e[n].trim();)n++;return"data:"===e.substring(n,n+5).toLowerCase()}function ev(e){return"string"===typeof e&&/\.pdf$/i.test(e)}class tv{constructor(){Tt(this,"started",Object.create(null)),Tt(this,"times",[])}time(e){e in this.started&&wm("Timer is already running for ".concat(e)),this.started[e]=Date.now()}timeEnd(e){e in this.started||wm("Timer has not been started for ".concat(e)),this.times.push({name:e,start:this.started[e],end:Date.now()}),delete this.started[e]}toString(){const e=[];let t=0;for(const{name:n}of this.times)t=Math.max(n.length,t);for(const{name:n,start:i,end:r}of this.times)e.push("".concat(n.padEnd(t)," ").concat(r-i,"ms\n"));return e.join("")}}function nv(e,t){const n=t?URL.parse(e,t):URL.parse(e);return"http:"===(null===n||void 0===n?void 0:n.protocol)||"https:"===(null===n||void 0===n?void 0:n.protocol)}function iv(e){e.preventDefault()}function rv(e){e.preventDefault(),e.stopPropagation()}class sv{static toDateObject(e){if(e instanceof Date)return e;if(!e||"string"!==typeof e)return null;pg(sv,this,ov)._||(ov._=pg(sv,this,new RegExp("^D:(\\d{4})(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?([Z|+|-])?(\\d{2})?'?(\\d{2})?'?")));const t=pg(sv,this,ov)._.exec(e);if(!t)return null;const n=parseInt(t[1],10);let i=parseInt(t[2],10);i=i>=1&&i<=12?i-1:0;let r=parseInt(t[3],10);r=r>=1&&r<=31?r:1;let s=parseInt(t[4],10);s=s>=0&&s<=23?s:0;let o=parseInt(t[5],10);o=o>=0&&o<=59?o:0;let a=parseInt(t[6],10);a=a>=0&&a<=59?a:0;const l=t[7]||"Z";let c=parseInt(t[8],10);c=c>=0&&c<=23?c:0;let u=parseInt(t[9],10)||0;return u=u>=0&&u<=59?u:0,"-"===l?(s+=c,o+=u):"+"===l&&(s-=c,o-=u),new Date(Date.UTC(n,i,r,s,o,a))}}var ov={_:void 0};function av(e){if(e.startsWith("#")){const t=parseInt(e.slice(1),16);return[(16711680&t)>>16,(65280&t)>>8,255&t]}return e.startsWith("rgb(")?e.slice(4,-1).split(",").map(e=>parseInt(e)):e.startsWith("rgba(")?e.slice(5,-1).split(",").map(e=>parseInt(e)).slice(0,3):(wm('Not a valid color format: "'.concat(e,'"')),[0,0,0])}function lv(e){const{a:t,b:n,c:i,d:r,e:s,f:o}=e.getTransform();return[t,n,i,r,s,o]}function cv(e){const{a:t,b:n,c:i,d:r,e:s,f:o}=e.getTransform().invertSelf();return[t,n,i,r,s,o]}function uv(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];if(t instanceof $m){const{pageWidth:i,pageHeight:r}=t.rawDims,{style:s}=e,o=Om.isCSSRoundSupported,a="var(--total-scale-factor) * ".concat(i,"px"),l="var(--total-scale-factor) * ".concat(r,"px"),c=o?"round(down, ".concat(a,", var(--scale-round-x))"):"calc(".concat(a,")"),u=o?"round(down, ".concat(l,", var(--scale-round-y))"):"calc(".concat(l,")");n&&t.rotation%180!==0?(s.width=u,s.height=c):(s.width=c,s.height=u)}i&&e.setAttribute("data-main-rotation",t.rotation)}class hv{constructor(){const{pixelRatio:e}=hv;this.sx=e,this.sy=e}get scaled(){return 1!==this.sx||1!==this.sy}get symmetric(){return this.sx===this.sy}limitCanvas(e,t,n,i){let r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:-1,s=1/0,o=1/0,a=1/0;(n=hv.capPixels(n,r))>0&&(s=Math.sqrt(n/(e*t))),-1!==i&&(o=i/e,a=i/t);const l=Math.min(s,o,a);return(this.sx>l||this.sy>l)&&(this.sx=l,this.sy=l,!0)}static get pixelRatio(){return globalThis.devicePixelRatio||1}static capPixels(e,t){if(t>=0){const n=Math.ceil(window.screen.availWidth*window.screen.availHeight*this.pixelRatio**2*(1+t/100));return e>0?Math.min(e,n):n}return e}}const dv=["image/apng","image/avif","image/bmp","image/gif","image/jpeg","image/png","image/svg+xml","image/webp","image/x-icon"];class pv{static get isDarkMode(){var e,t;return Cm(this,"isDarkMode",!(null===(e=window)||void 0===e||null===(t=e.matchMedia)||void 0===t||!t.call(e,"(prefers-color-scheme: dark)").matches))}}function fv(e,t){const n=e[0]/255,i=e[1]/255,r=e[2]/255,s=Math.max(n,i,r),o=Math.min(n,i,r),a=(s+o)/2;if(s===o)t[0]=t[1]=0;else{const e=s-o;switch(t[1]=a<.5?e/(s+o):e/(2-s-o),s){case n:t[0]=60*((i-r)/e+(i<r?6:0));break;case i:t[0]=60*((r-n)/e+2);break;case r:t[0]=60*((n-i)/e+4)}}t[2]=a}function gv(e,t){const n=e[0],i=e[1],r=e[2],s=(1-Math.abs(2*r-1))*i,o=s*(1-Math.abs(n/60%2-1)),a=r-s/2;switch(Math.floor(n/60)){case 0:t[0]=s+a,t[1]=o+a,t[2]=a;break;case 1:t[0]=o+a,t[1]=s+a,t[2]=a;break;case 2:t[0]=a,t[1]=s+a,t[2]=o+a;break;case 3:t[0]=a,t[1]=o+a,t[2]=s+a;break;case 4:t[0]=o+a,t[1]=a,t[2]=s+a;break;case 5:case 6:t[0]=s+a,t[1]=a,t[2]=o+a}}function mv(e){return e<=.03928?e/12.92:((e+.055)/1.055)**2.4}function vv(e,t,n){gv(e,n),n.map(mv);const i=.2126*n[0]+.7152*n[1]+.0722*n[2];gv(t,n),n.map(mv);const r=.2126*n[0]+.7152*n[1]+.0722*n[2];return i>r?(i+.05)/(r+.05):(r+.05)/(i+.05)}const yv=new Map;function _v(e,t){let{html:n,dir:i,className:r}=e;const s=document.createDocumentFragment();if("string"===typeof n){const e=document.createElement("p");e.dir=i||"auto";const t=n.split(/(?:\r\n?|\n)/);for(let n=0,i=t.length;n<i;++n){const r=t[n];e.append(document.createTextNode(r)),n<i-1&&e.append(document.createElement("br"))}s.append(e)}else Km.render({xfaHtml:n,div:s,intent:"richText"});s.firstChild.classList.add("richText",r),t.append(s)}var wv=new WeakMap,bv=new WeakMap,xv=new WeakMap,kv=new WeakMap,Ev=new WeakMap,Cv=new WeakMap,Sv=new WeakMap,Av=new WeakMap,Tv=new WeakSet;class Pv{constructor(e){hg(this,Tv),dg(this,wv,null),dg(this,bv,null),dg(this,xv,void 0),dg(this,kv,null),dg(this,Ev,null),dg(this,Cv,null),dg(this,Sv,null),dg(this,Av,null),mg(xv,this,e),Ov._||(Ov._=Object.freeze({freetext:"pdfjs-editor-remove-freetext-button",highlight:"pdfjs-editor-remove-highlight-button",ink:"pdfjs-editor-remove-ink-button",stamp:"pdfjs-editor-remove-stamp-button",signature:"pdfjs-editor-remove-signature-button"}))}render(){const e=mg(wv,this,document.createElement("div"));e.classList.add("editToolbar","hidden"),e.setAttribute("role","toolbar");const t=gg(xv,this)._uiManager._signal;t instanceof AbortSignal&&!t.aborted&&(e.addEventListener("contextmenu",iv,{signal:t}),e.addEventListener("pointerdown",Iv,{signal:t}));const n=mg(kv,this,document.createElement("div"));n.className="buttons",e.append(n);const i=gg(xv,this).toolbarPosition;if(i){const{style:t}=e,n="ltr"===gg(xv,this)._uiManager.direction?1-i[0]:i[0];t.insetInlineEnd="".concat(100*n,"%"),t.top="calc(".concat(100*i[1],"% + var(--editor-toolbar-vert-offset))")}return e}get div(){return gg(wv,this)}hide(){var e;gg(wv,this).classList.add("hidden"),null===(e=gg(bv,this))||void 0===e||e.hideDropdown()}show(){var e,t;gg(wv,this).classList.remove("hidden"),null===(e=gg(Ev,this))||void 0===e||e.shown(),null===(t=gg(Cv,this))||void 0===t||t.shown()}addDeleteButton(){const{editorType:e,_uiManager:t}=gg(xv,this),n=document.createElement("button");n.classList.add("basic","deleteButton"),n.tabIndex=0,n.setAttribute("data-l10n-id",Ov._[e]),pg(Tv,this,Nv).call(this,n)&&n.addEventListener("click",e=>{t.delete()},{signal:t._signal}),gg(kv,this).append(n)}async addAltText(e){const t=await e.render();pg(Tv,this,Nv).call(this,t),gg(kv,this).append(t,fg(Tv,this,Dv)),mg(Ev,this,e)}addComment(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(gg(Cv,this))return;const n=e.renderForToolbar();if(!n)return;pg(Tv,this,Nv).call(this,n);const i=mg(Sv,this,fg(Tv,this,Dv));t?(gg(kv,this).insertBefore(n,t),gg(kv,this).insertBefore(i,t)):gg(kv,this).append(n,i),mg(Cv,this,e),e.toolbar=this}addColorPicker(e){if(gg(bv,this))return;mg(bv,this,e);const t=e.renderButton();pg(Tv,this,Nv).call(this,t),gg(kv,this).append(t,fg(Tv,this,Dv))}async addEditSignatureButton(e){const t=mg(Av,this,await e.renderEditButton(gg(xv,this)));pg(Tv,this,Nv).call(this,t),gg(kv,this).append(t,fg(Tv,this,Dv))}removeButton(e){var t,n;if("comment"===e)null===(t=gg(Cv,this))||void 0===t||t.removeToolbarCommentButton(),mg(Cv,this,null),null===(n=gg(Sv,this))||void 0===n||n.remove(),mg(Sv,this,null)}async addButton(e,t){switch(e){case"colorPicker":this.addColorPicker(t);break;case"altText":await this.addAltText(t);break;case"editSignature":await this.addEditSignatureButton(t);break;case"delete":this.addDeleteButton();break;case"comment":this.addComment(t)}}async addButtonBefore(e,t,n){const i=gg(kv,this).querySelector(n);i&&"comment"===e&&this.addComment(t,i)}updateEditSignatureButton(e){gg(Av,this)&&(gg(Av,this).title=e)}remove(){var e;gg(wv,this).remove(),null===(e=gg(bv,this))||void 0===e||e.destroy(),mg(bv,this,null)}}function Iv(e){e.stopPropagation()}function Rv(e){gg(xv,this)._focusEventsAllowed=!1,rv(e)}function Mv(e){gg(xv,this)._focusEventsAllowed=!0,rv(e)}function Nv(e){const t=gg(xv,this)._uiManager._signal;return t instanceof AbortSignal&&!t.aborted&&(e.addEventListener("focusin",pg(Tv,this,Rv).bind(this),{capture:!0,signal:t}),e.addEventListener("focusout",pg(Tv,this,Mv).bind(this),{capture:!0,signal:t}),e.addEventListener("contextmenu",iv,{signal:t}),!0)}function Dv(e){const t=document.createElement("div");return t.className="divider",t}var Ov={_:null},Lv=new WeakMap,Fv=new WeakMap,jv=new WeakMap,Bv=new WeakSet;class Wv{constructor(e){hg(this,Bv),dg(this,Lv,null),dg(this,Fv,null),dg(this,jv,void 0),mg(jv,this,e)}show(e,t,n){const[i,r]=pg(Bv,this,zv).call(this,t,n),{style:s}=gg(Fv,this)||mg(Fv,this,pg(Bv,this,Uv).call(this));e.append(gg(Fv,this)),s.insetInlineEnd="".concat(100*i,"%"),s.top="calc(".concat(100*r,"% + var(--editor-toolbar-vert-offset))")}hide(){gg(Fv,this).remove()}}function Uv(){const e=mg(Fv,this,document.createElement("div"));e.className="editToolbar",e.setAttribute("role","toolbar");const t=gg(jv,this)._signal;t instanceof AbortSignal&&!t.aborted&&e.addEventListener("contextmenu",iv,{signal:t});const n=mg(Lv,this,document.createElement("div"));return n.className="buttons",e.append(n),gg(jv,this).hasCommentManager()&&pg(Bv,this,Hv).call(this,"commentButton","pdfjs-comment-floating-button","pdfjs-comment-floating-button-label",()=>{gg(jv,this).commentSelection("floating_button")}),pg(Bv,this,Hv).call(this,"highlightButton","pdfjs-highlight-floating-button1","pdfjs-highlight-floating-button-label",()=>{gg(jv,this).highlightSelection("floating_button")}),e}function zv(e,t){let n=0,i=0;for(const r of e){const e=r.y+r.height;if(e<n)continue;const s=r.x+(t?r.width:0);e>n?(i=s,n=e):t?s>i&&(i=s):s<i&&(i=s)}return[t?1-i:i,n]}function Hv(e,t,n,i){const r=document.createElement("button");r.classList.add("basic",e),r.tabIndex=0,r.setAttribute("data-l10n-id",t);const s=document.createElement("span");r.append(s),s.className="visuallyHidden",s.setAttribute("data-l10n-id",n);const o=gg(jv,this)._signal;o instanceof AbortSignal&&!o.aborted&&(r.addEventListener("contextmenu",iv,{signal:o}),r.addEventListener("click",i,{signal:o})),gg(Lv,this).append(r)}function Vv(e,t,n){for(const i of n)t.addEventListener(i,e[i].bind(e))}var qv=new WeakMap;class Gv{constructor(){dg(this,qv,0)}get id(){var e,t;return"".concat(Yg).concat((mg(qv,this,(e=gg(qv,this),t=e++,e)),t))}}var Kv=new WeakMap,Yv=new WeakMap,Xv=new WeakMap,Qv=new WeakSet;class $v{constructor(){hg(this,Qv),dg(this,Kv,zm()),dg(this,Yv,0),dg(this,Xv,null)}static get _isSVGFittingCanvas(){const e=new OffscreenCanvas(1,3).getContext("2d",{willReadFrequently:!0}),t=new Image;t.src='data:image/svg+xml;charset=UTF-8,<svg viewBox="0 0 1 1" width="1" height="1" xmlns="http://www.w3.org/2000/svg"><rect width="1" height="1" style="fill:red;"/></svg>';return Cm(this,"_isSVGFittingCanvas",t.decode().then(()=>(e.drawImage(t,0,0,1,1,0,0,1,3),0===new Uint32Array(e.getImageData(0,0,1,1).data.buffer)[0])))}async getFromFile(e){const{lastModified:t,name:n,size:i,type:r}=e;return pg(Qv,this,Jv).call(this,"".concat(t,"_").concat(n,"_").concat(i,"_").concat(r),e)}async getFromUrl(e){return pg(Qv,this,Jv).call(this,e,e)}async getFromBlob(e,t){const n=await t;return pg(Qv,this,Jv).call(this,e,n)}async getFromId(e){gg(Xv,this)||mg(Xv,this,new Map);const t=gg(Xv,this).get(e);if(!t)return null;if(t.bitmap)return t.refCounter+=1,t;if(t.file)return this.getFromFile(t.file);if(t.blobPromise){const{blobPromise:e}=t;return delete t.blobPromise,this.getFromBlob(t.id,e)}return this.getFromUrl(t.url)}getFromCanvas(e,t){var n,i,r;gg(Xv,this)||mg(Xv,this,new Map);let s=gg(Xv,this).get(e);if(null!==(r=s)&&void 0!==r&&r.bitmap)return s.refCounter+=1,s;const o=new OffscreenCanvas(t.width,t.height);return o.getContext("2d").drawImage(t,0,0),s={bitmap:o.transferToImageBitmap(),id:"image_".concat(gg(Kv,this),"_").concat((mg(Yv,this,(n=gg(Yv,this),i=n++,n)),i)),refCounter:1,isSvg:!1},gg(Xv,this).set(e,s),gg(Xv,this).set(s.id,s),s}getSvgUrl(e){const t=gg(Xv,this).get(e);return null!==t&&void 0!==t&&t.isSvg?t.svgUrl:null}deleteId(e){var t;gg(Xv,this)||mg(Xv,this,new Map);const n=gg(Xv,this).get(e);if(!n)return;if(n.refCounter-=1,0!==n.refCounter)return;const{bitmap:i}=n;if(!n.url&&!n.file){const e=new OffscreenCanvas(i.width,i.height);e.getContext("bitmaprenderer").transferFromImageBitmap(i),n.blobPromise=e.convertToBlob()}null===(t=i.close)||void 0===t||t.call(i),n.bitmap=null}isValidId(e){return e.startsWith("image_".concat(gg(Kv,this),"_"))}}async function Jv(e,t){var n;gg(Xv,this)||mg(Xv,this,new Map);let i=gg(Xv,this).get(e);if(null===i)return null;if(null!==(n=i)&&void 0!==n&&n.bitmap)return i.refCounter+=1,i;try{var r,s;let e;if(i||(i={bitmap:null,id:"image_".concat(gg(Kv,this),"_").concat((mg(Yv,this,(r=gg(Yv,this),s=r++,r)),s)),refCounter:0,isSvg:!1}),"string"===typeof t?(i.url=t,e=await Qm(t,"blob")):t instanceof File?e=i.file=t:t instanceof Blob&&(e=t),"image/svg+xml"===e.type){const t=wg._isSVGFittingCanvas,n=new FileReader,r=new Image,s=new Promise((e,s)=>{r.onload=()=>{i.bitmap=r,i.isSvg=!0,e()},n.onload=async()=>{const e=i.svgUrl=n.result;r.src=await t?"".concat(e,"#svgView(preserveAspectRatio(none))"):e},r.onerror=n.onerror=s});n.readAsDataURL(e),await s}else i.bitmap=await createImageBitmap(e);i.refCounter=1}catch(nz){wm(nz),i=null}return gg(Xv,this).set(e,i),i&&gg(Xv,this).set(i.id,i),i}wg=$v;var Zv=new WeakMap,ey=new WeakMap,ty=new WeakMap,ny=new WeakMap;class iy{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:128;dg(this,Zv,[]),dg(this,ey,!1),dg(this,ty,void 0),dg(this,ny,-1),mg(ty,this,e)}add(e){let{cmd:t,undo:n,post:i,mustExec:r,type:s=NaN,overwriteIfSameType:o=!1,keepUndo:a=!1}=e;if(r&&t(),gg(ey,this))return;const l={cmd:t,undo:n,post:i,type:s};if(-1===gg(ny,this))return gg(Zv,this).length>0&&(gg(Zv,this).length=0),mg(ny,this,0),void gg(Zv,this).push(l);if(o&&gg(Zv,this)[gg(ny,this)].type===s)return a&&(l.undo=gg(Zv,this)[gg(ny,this)].undo),void(gg(Zv,this)[gg(ny,this)]=l);const c=gg(ny,this)+1;c===gg(ty,this)?gg(Zv,this).splice(0,1):(mg(ny,this,c),c<gg(Zv,this).length&&gg(Zv,this).splice(c)),gg(Zv,this).push(l)}undo(){if(-1===gg(ny,this))return;mg(ey,this,!0);const{undo:e,post:t}=gg(Zv,this)[gg(ny,this)];e(),null===t||void 0===t||t(),mg(ey,this,!1),mg(ny,this,gg(ny,this)-1)}redo(){if(gg(ny,this)<gg(Zv,this).length-1){mg(ny,this,gg(ny,this)+1),mg(ey,this,!0);const{cmd:e,post:t}=gg(Zv,this)[gg(ny,this)];e(),null===t||void 0===t||t(),mg(ey,this,!1)}}hasSomethingToUndo(){return-1!==gg(ny,this)}hasSomethingToRedo(){return gg(ny,this)<gg(Zv,this).length-1}cleanType(e){if(-1!==gg(ny,this)){for(let t=gg(ny,this);t>=0;t--)if(gg(Zv,this)[t].type!==e)return gg(Zv,this).splice(t+1,gg(ny,this)-t),void mg(ny,this,t);gg(Zv,this).length=0,mg(ny,this,-1)}}destroy(){mg(Zv,this,null)}}var ry=new WeakSet;class sy{constructor(e){hg(this,ry),this.buffer=[],this.callbacks=new Map,this.allKeys=new Set;const{isMac:t}=Om.platform;for(const[n,i,r={}]of e)for(const e of n){const n=e.startsWith("mac+");t&&n?(this.callbacks.set(e.slice(4),{callback:i,options:r}),this.allKeys.add(e.split("+").at(-1))):t||n||(this.callbacks.set(e,{callback:i,options:r}),this.allKeys.add(e.split("+").at(-1)))}}exec(e,t){if(!this.allKeys.has(t.key))return;const n=this.callbacks.get(pg(ry,this,oy).call(this,t));if(!n)return;const{callback:i,options:{bubbles:r=!1,args:s=[],checker:o=null}}=n;o&&!o(e,t)||(i.bind(e,...s,t)(),r||rv(t))}}function oy(e){e.altKey&&this.buffer.push("alt"),e.ctrlKey&&this.buffer.push("ctrl"),e.metaKey&&this.buffer.push("meta"),e.shiftKey&&this.buffer.push("shift"),this.buffer.push(e.key);const t=this.buffer.join("+");return this.buffer.length=0,t}class ay{get _colors(){const e=new Map([["CanvasText",null],["Canvas",null]]);return function(e){const t=document.createElement("span");t.style.visibility="hidden",t.style.colorScheme="only light",document.body.append(t);for(const n of e.keys()){t.style.color=n;const i=window.getComputedStyle(t).color;e.set(n,av(i))}t.remove()}(e),Cm(this,"_colors",e)}convert(e){const t=av(e);if(!window.matchMedia("(forced-colors: active)").matches)return t;for(const[n,i]of this._colors)if(i.every((e,n)=>e===t[n]))return ay._colorsMapping.get(n);return t}getHexCode(e){const t=this._colors.get(e);return t?Fm.makeHexColor(...t):e}}Tt(ay,"_colorsMapping",new Map([["CanvasText",[0,0,0]],["Canvas",[255,255,255]]]));var ly=new WeakMap,cy=new WeakMap,uy=new WeakMap,hy=new WeakMap,dy=new WeakMap,py=new WeakMap,fy=new WeakMap,gy=new WeakMap,my=new WeakMap,vy=new WeakMap,yy=new WeakMap,_y=new WeakMap,wy=new WeakMap,by=new WeakMap,xy=new WeakMap,ky=new WeakMap,Ey=new WeakMap,Cy=new WeakMap,Sy=new WeakMap,Ay=new WeakMap,Ty=new WeakMap,Py=new WeakMap,Iy=new WeakMap,Ry=new WeakMap,My=new WeakMap,Ny=new WeakMap,Dy=new WeakMap,Oy=new WeakMap,Ly=new WeakMap,Fy=new WeakMap,jy=new WeakMap,By=new WeakMap,Wy=new WeakMap,Uy=new WeakMap,zy=new WeakMap,Hy=new WeakMap,Vy=new WeakMap,qy=new WeakMap,Gy=new WeakMap,Ky=new WeakMap,Yy=new WeakMap,Xy=new WeakMap,Qy=new WeakMap,$y=new WeakMap,Jy=new WeakMap,Zy=new WeakMap,e_=new WeakMap,t_=new WeakMap,n_=new WeakMap,i_=new WeakSet;class r_{static get _keyboardManager(){const e=r_.prototype,t=e=>gg(Zy,e).contains(document.activeElement)&&"BUTTON"!==document.activeElement.tagName&&e.hasSomethingToControl(),n=(e,t)=>{let{target:n}=t;if(n instanceof HTMLInputElement){const{type:e}=n;return"text"!==e&&"number"!==e}return!0},i=this.TRANSLATE_SMALL,r=this.TRANSLATE_BIG;return Cm(this,"_keyboardManager",new sy([[["ctrl+a","mac+meta+a"],e.selectAll,{checker:n}],[["ctrl+z","mac+meta+z"],e.undo,{checker:n}],[["ctrl+y","ctrl+shift+z","mac+meta+shift+z","ctrl+shift+Z","mac+meta+shift+Z"],e.redo,{checker:n}],[["Backspace","alt+Backspace","ctrl+Backspace","shift+Backspace","mac+Backspace","mac+alt+Backspace","mac+ctrl+Backspace","Delete","ctrl+Delete","shift+Delete","mac+Delete"],e.delete,{checker:n}],[["Enter","mac+Enter"],e.addNewEditorFromKeyboard,{checker:(e,t)=>{let{target:n}=t;return!(n instanceof HTMLButtonElement)&&gg(Zy,e).contains(n)&&!e.isEnterHandled}}],[[" ","mac+ "],e.addNewEditorFromKeyboard,{checker:(e,t)=>{let{target:n}=t;return!(n instanceof HTMLButtonElement)&&gg(Zy,e).contains(document.activeElement)}}],[["Escape","mac+Escape"],e.unselectAll],[["ArrowLeft","mac+ArrowLeft"],e.translateSelectedEditors,{args:[-i,0],checker:t}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],e.translateSelectedEditors,{args:[-r,0],checker:t}],[["ArrowRight","mac+ArrowRight"],e.translateSelectedEditors,{args:[i,0],checker:t}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],e.translateSelectedEditors,{args:[r,0],checker:t}],[["ArrowUp","mac+ArrowUp"],e.translateSelectedEditors,{args:[0,-i],checker:t}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],e.translateSelectedEditors,{args:[0,-r],checker:t}],[["ArrowDown","mac+ArrowDown"],e.translateSelectedEditors,{args:[0,i],checker:t}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],e.translateSelectedEditors,{args:[0,r],checker:t}]]))}constructor(e,t,n,i,r,s,o,a,l,c,u,h,d,p,f,g){hg(this,i_),dg(this,ly,new AbortController),dg(this,cy,null),dg(this,uy,null),dg(this,hy,new Map),dg(this,dy,new Map),dg(this,py,null),dg(this,fy,null),dg(this,gy,null),dg(this,my,new iy),dg(this,vy,null),dg(this,yy,null),dg(this,_y,null),dg(this,wy,0),dg(this,by,new Set),dg(this,xy,null),dg(this,ky,null),dg(this,Ey,new Set),Tt(this,"_editorUndoBar",null),dg(this,Cy,!1),dg(this,Sy,!1),dg(this,Ay,!1),dg(this,Ty,null),dg(this,Py,null),dg(this,Iy,null),dg(this,Ry,null),dg(this,My,!1),dg(this,Ny,null),dg(this,Dy,new Gv),dg(this,Oy,!1),dg(this,Ly,!1),dg(this,Fy,!1),dg(this,jy,null),dg(this,By,null),dg(this,Wy,null),dg(this,Uy,null),dg(this,zy,null),dg(this,Hy,Xg.NONE),dg(this,Vy,new Set),dg(this,qy,null),dg(this,Gy,null),dg(this,Ky,null),dg(this,Yy,null),dg(this,Xy,null),dg(this,Qy,{isEditing:!1,isEmpty:!0,hasSomethingToUndo:!1,hasSomethingToRedo:!1,hasSelectedEditor:!1,hasSelectedText:!1}),dg(this,$y,[0,0]),dg(this,Jy,null),dg(this,Zy,null),dg(this,e_,null),dg(this,t_,null),dg(this,n_,null);const m=this._signal=gg(ly,this).signal;mg(Zy,this,e),mg(e_,this,t),mg(t_,this,n),mg(py,this,i),mg(vy,this,r),mg(Gy,this,s),mg(Xy,this,a),this._eventBus=o,o._on("editingaction",this.onEditingAction.bind(this),{signal:m}),o._on("pagechanging",this.onPageChanging.bind(this),{signal:m}),o._on("scalechanging",this.onScaleChanging.bind(this),{signal:m}),o._on("rotationchanging",this.onRotationChanging.bind(this),{signal:m}),o._on("setpreference",this.onSetPreference.bind(this),{signal:m}),o._on("switchannotationeditorparams",e=>this.updateParams(e.type,e.value),{signal:m}),window.addEventListener("pointerdown",()=>{mg(Ly,this,!0)},{capture:!0,signal:m}),window.addEventListener("pointerup",()=>{mg(Ly,this,!1)},{capture:!0,signal:m}),pg(i_,this,u_).call(this),pg(i_,this,v_).call(this),pg(i_,this,p_).call(this),mg(fy,this,a.annotationStorage),mg(Ty,this,a.filterFactory),mg(Ky,this,l),mg(Ry,this,c||null),mg(Cy,this,u),mg(Sy,this,h),mg(Ay,this,d),mg(zy,this,p||null),this.viewParameters={realScale:Xm.PDF_TO_CSS_UNITS,rotation:0},this.isShiftKeyDown=!1,this._editorUndoBar=f||null,this._supportsPinchToZoom=!1!==g,null===r||void 0===r||r.setSidebarUiManager(this)}destroy(){var e,t,n,i,r,s,o,a,l;null===(e=gg(n_,this))||void 0===e||e.resolve(),mg(n_,this,null),null===(t=gg(ly,this))||void 0===t||t.abort(),mg(ly,this,null),this._signal=null;for(const c of gg(dy,this).values())c.destroy();gg(dy,this).clear(),gg(hy,this).clear(),gg(Ey,this).clear(),null===(n=gg(Uy,this))||void 0===n||n.clear(),mg(cy,this,null),gg(Vy,this).clear(),gg(my,this).destroy(),null===(i=gg(py,this))||void 0===i||i.destroy(),null===(r=gg(vy,this))||void 0===r||r.destroy(),null===(s=gg(Gy,this))||void 0===s||s.destroy(),null===(o=gg(Ny,this))||void 0===o||o.hide(),mg(Ny,this,null),null===(a=gg(Wy,this))||void 0===a||a.destroy(),mg(Wy,this,null),mg(uy,this,null),gg(Py,this)&&(clearTimeout(gg(Py,this)),mg(Py,this,null)),gg(Jy,this)&&(clearTimeout(gg(Jy,this)),mg(Jy,this,null)),null===(l=this._editorUndoBar)||void 0===l||l.destroy(),mg(Xy,this,null)}combinedSignal(e){return AbortSignal.any([this._signal,e.signal])}get mlManager(){return gg(zy,this)}get useNewAltTextFlow(){return gg(Sy,this)}get useNewAltTextWhenAddingImage(){return gg(Ay,this)}get hcmFilter(){return Cm(this,"hcmFilter",gg(Ky,this)?gg(Ty,this).addHCMFilter(gg(Ky,this).foreground,gg(Ky,this).background):"none")}get direction(){return Cm(this,"direction",getComputedStyle(gg(Zy,this)).direction)}get _highlightColors(){return Cm(this,"_highlightColors",gg(Ry,this)?new Map(gg(Ry,this).split(",").map(e=>((e=e.split("=").map(e=>e.trim()))[1]=e[1].toUpperCase(),e))):null)}get highlightColors(){const{_highlightColors:e}=this;if(!e)return Cm(this,"highlightColors",null);const t=new Map,n=!!gg(Ky,this);for(const[i,r]of e){const e=i.endsWith("_HCM");n&&e?t.set(i.replace("_HCM",""),r):n||e||t.set(i,r)}return Cm(this,"highlightColors",t)}get highlightColorNames(){return Cm(this,"highlightColorNames",this.highlightColors?new Map(Array.from(this.highlightColors,e=>e.reverse())):null)}getNonHCMColor(e){if(!this._highlightColors)return e;const t=this.highlightColorNames.get(e);return this._highlightColors.get(t)||e}getNonHCMColorName(e){return this.highlightColorNames.get(e)||e}setCurrentDrawingSession(e){e?(this.unselectAll(),this.disableUserSelect(!0)):this.disableUserSelect(!1),mg(_y,this,e)}setMainHighlightColorPicker(e){mg(Wy,this,e)}editAltText(e){var t;let n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];null===(t=gg(py,this))||void 0===t||t.editAltText(this,e,n)}hasCommentManager(){return!!gg(vy,this)}editComment(e,t,n,i){var r;null===(r=gg(vy,this))||void 0===r||r.showDialog(this,e,t,n,i)}selectComment(e,t){const n=gg(dy,this).get(e),i=null===n||void 0===n?void 0:n.getEditorByUID(t);null===i||void 0===i||i.toggleComment(!0,!0)}updateComment(e){var t;null===(t=gg(vy,this))||void 0===t||t.updateComment(e.getData())}updatePopupColor(e){var t;null===(t=gg(vy,this))||void 0===t||t.updatePopupColor(e)}removeComment(e){var t;null===(t=gg(vy,this))||void 0===t||t.removeComments([e.uid])}toggleComment(e,t){var n;let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0;null===(n=gg(vy,this))||void 0===n||n.toggleCommentPopup(e,t,i)}makeCommentColor(e,t){var n;return e&&(null===(n=gg(vy,this))||void 0===n?void 0:n.makeCommentColor(e,t))||null}getCommentDialogElement(){var e;return(null===(e=gg(vy,this))||void 0===e?void 0:e.dialogElement)||null}async waitForEditorsRendered(e){if(gg(dy,this).has(e-1))return;const{resolve:t,promise:n}=Promise.withResolvers(),i=n=>{n.pageNumber===e&&(this._eventBus._off("editorsrendered",i),t())};this._eventBus.on("editorsrendered",i),await n}getSignature(e){var t;null===(t=gg(Gy,this))||void 0===t||t.getSignature({uiManager:this,editor:e})}get signatureManager(){return gg(Gy,this)}switchToMode(e,t){this._eventBus.on("annotationeditormodechanged",t,{once:!0,signal:this._signal}),this._eventBus.dispatch("showannotationeditorui",{source:this,mode:e})}setPreference(e,t){this._eventBus.dispatch("setpreference",{source:this,name:e,value:t})}onSetPreference(e){let{name:t,value:n}=e;if("enableNewAltTextWhenAddingImage"===t)mg(Ay,this,n)}onPageChanging(e){let{pageNumber:t}=e;mg(wy,this,t-1)}focusMainContainer(){gg(Zy,this).focus()}findParent(e,t){for(const n of gg(dy,this).values()){const{x:i,y:r,width:s,height:o}=n.div.getBoundingClientRect();if(e>=i&&e<=i+s&&t>=r&&t<=r+o)return n}return null}disableUserSelect(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];gg(e_,this).classList.toggle("noUserSelect",e)}addShouldRescale(e){gg(Ey,this).add(e)}removeShouldRescale(e){gg(Ey,this).delete(e)}onScaleChanging(e){var t;let{scale:n}=e;this.commitOrRemove(),this.viewParameters.realScale=n*Xm.PDF_TO_CSS_UNITS;for(const i of gg(Ey,this))i.onScaleChanging();null===(t=gg(_y,this))||void 0===t||t.onScaleChanging()}onRotationChanging(e){let{pagesRotation:t}=e;this.commitOrRemove(),this.viewParameters.rotation=t}highlightSelection(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const n=document.getSelection();if(!n||n.isCollapsed)return;const{anchorNode:i,anchorOffset:r,focusNode:s,focusOffset:o}=n,a=n.toString(),l=pg(i_,this,s_).call(this,n).closest(".textLayer"),c=this.getSelectionBoxes(l);if(!c)return;n.empty();const u=pg(i_,this,o_).call(this,l),h=gg(Hy,this)===Xg.NONE,d=()=>{const n=null===u||void 0===u?void 0:u.createAndAddNewEditor({x:0,y:0},!1,{methodOfCreation:e,boxes:c,anchorNode:i,anchorOffset:r,focusNode:s,focusOffset:o,text:a});h&&this.showAllEditors("highlight",!0,!0),t&&(null===n||void 0===n||n.editComment())};h?this.switchToMode(Xg.HIGHLIGHT,d):d()}commentSelection(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";this.highlightSelection(e,!0)}getAndRemoveDataFromAnnotationStorage(e){if(!gg(fy,this))return null;const t="".concat(Yg).concat(e),n=gg(fy,this).getRawValue(t);return n&&gg(fy,this).remove(t),n}addToAnnotationStorage(e){e.isEmpty()||!gg(fy,this)||gg(fy,this).has(e.id)||gg(fy,this).setValue(e.id,e)}a11yAlert(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;const n=gg(t_,this);n&&(n.setAttribute("data-l10n-id",e),t?n.setAttribute("data-l10n-args",JSON.stringify(t)):n.removeAttribute("data-l10n-args"))}blur(){if(this.isShiftKeyDown=!1,gg(My,this)&&(mg(My,this,!1),pg(i_,this,c_).call(this,"main_toolbar")),!this.hasSelection)return;const{activeElement:e}=document;for(const t of gg(Vy,this))if(t.div.contains(e)){mg(By,this,[t,e]),t._focusEventsAllowed=!1;break}}focus(){if(!gg(By,this))return;const[e,t]=gg(By,this);mg(By,this,null),t.addEventListener("focusin",()=>{e._focusEventsAllowed=!0},{once:!0,signal:this._signal}),t.focus()}addEditListeners(){pg(i_,this,p_).call(this),pg(i_,this,g_).call(this)}removeEditListeners(){pg(i_,this,f_).call(this),pg(i_,this,m_).call(this)}dragOver(e){for(const{type:t}of e.dataTransfer.items)for(const n of gg(ky,this))if(n.isHandlingMimeForPasting(t))return e.dataTransfer.dropEffect="copy",void e.preventDefault()}drop(e){for(const t of e.dataTransfer.items)for(const n of gg(ky,this))if(n.isHandlingMimeForPasting(t.type))return n.paste(t,this.currentLayer),void e.preventDefault()}copy(e){var t;if(e.preventDefault(),null===(t=gg(cy,this))||void 0===t||t.commitOrRemove(),!this.hasSelection)return;const n=[];for(const i of gg(Vy,this)){const e=i.serialize(!0);e&&n.push(e)}0!==n.length&&e.clipboardData.setData("application/pdfjs",JSON.stringify(n))}cut(e){this.copy(e),this.delete()}async paste(e){e.preventDefault();const{clipboardData:t}=e;for(const s of t.items)for(const e of gg(ky,this))if(e.isHandlingMimeForPasting(s.type))return void e.paste(s,this.currentLayer);let n=t.getData("application/pdfjs");if(!n)return;try{n=JSON.parse(n)}catch(r){return void wm('paste: "'.concat(r.message,'".'))}if(!Array.isArray(n))return;this.unselectAll();const i=this.currentLayer;try{const e=[];for(const s of n){const t=await i.deserialize(s);if(!t)return;e.push(t)}const t=()=>{for(const t of e)pg(i_,this,x_).call(this,t);pg(i_,this,C_).call(this,e)},r=()=>{for(const t of e)t.remove()};this.addCommands({cmd:t,undo:r,mustExec:!0})}catch(r){wm('paste: "'.concat(r.message,'".'))}}keydown(e){this.isShiftKeyDown||"Shift"!==e.key||(this.isShiftKeyDown=!0),gg(Hy,this)===Xg.NONE||this.isEditorHandlingKeyboard||r_._keyboardManager.exec(this,e)}keyup(e){this.isShiftKeyDown&&"Shift"===e.key&&(this.isShiftKeyDown=!1,gg(My,this)&&(mg(My,this,!1),pg(i_,this,c_).call(this,"main_toolbar")))}onEditingAction(e){let{name:t}=e;switch(t){case"undo":case"redo":case"delete":case"selectAll":this[t]();break;case"highlightSelection":this.highlightSelection("context_menu");break;case"commentSelection":this.commentSelection("context_menu")}}setEditingState(e){e?(pg(i_,this,h_).call(this),pg(i_,this,g_).call(this),pg(i_,this,y_).call(this,{isEditing:gg(Hy,this)!==Xg.NONE,isEmpty:pg(i_,this,E_).call(this),hasSomethingToUndo:gg(my,this).hasSomethingToUndo(),hasSomethingToRedo:gg(my,this).hasSomethingToRedo(),hasSelectedEditor:!1})):(pg(i_,this,d_).call(this),pg(i_,this,m_).call(this),pg(i_,this,y_).call(this,{isEditing:!1}),this.disableUserSelect(!1))}registerEditorTypes(e){if(!gg(ky,this)){mg(ky,this,e);for(const e of gg(ky,this))pg(i_,this,__).call(this,e.defaultPropertiesToUpdate)}}getId(){return gg(Dy,this).id}get currentLayer(){return gg(dy,this).get(gg(wy,this))}getLayer(e){return gg(dy,this).get(e)}get currentPageIndex(){return gg(wy,this)}addLayer(e){gg(dy,this).set(e.pageIndex,e),gg(Oy,this)?e.enable():e.disable()}removeLayer(e){gg(dy,this).delete(e.pageIndex)}async updateMode(e){var t,n;let i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=arguments.length>2&&void 0!==arguments[2]&&arguments[2],s=arguments.length>3&&void 0!==arguments[3]&&arguments[3],o=arguments.length>4&&void 0!==arguments[4]&&arguments[4];if(gg(Hy,this)!==e&&(!gg(n_,this)||(await gg(n_,this).promise,gg(n_,this)))){var a,l;if(mg(n_,this,Promise.withResolvers()),null===(t=gg(_y,this))||void 0===t||t.commitOrRemove(),gg(Hy,this)===Xg.POPUP)null===(a=gg(vy,this))||void 0===a||a.hideSidebar();if(null===(n=gg(vy,this))||void 0===n||n.destroyPopup(),mg(Hy,this,e),e===Xg.NONE){var c;this.setEditingState(!1),pg(i_,this,b_).call(this);for(const e of gg(hy,this).values())e.hideStandaloneCommentButton();return null===(c=this._editorUndoBar)||void 0===c||c.hide(),this.toggleComment(null),void gg(n_,this).resolve()}for(const e of gg(hy,this).values())e.addStandaloneCommentButton();if(e===Xg.SIGNATURE)await(null===(l=gg(Gy,this))||void 0===l?void 0:l.loadSignatures());this.setEditingState(!0),await pg(i_,this,w_).call(this),this.unselectAll();for(const t of gg(dy,this).values())t.updateMode(e);if(e===Xg.POPUP){var u;gg(uy,this)||mg(uy,this,await gg(Xy,this).getAnnotationsByType(new Set(gg(ky,this).map(e=>e._editorType))));const e=new Set,t=[];for(const n of gg(hy,this).values()){const{annotationElementId:i,hasComment:r,deleted:s}=n;i&&e.add(i),r&&!s&&t.push(n.getData())}for(const n of gg(uy,this)){const{id:i,popupRef:r,contentsObj:s}=n;r&&null!==s&&void 0!==s&&s.str&&!e.has(i)&&!gg(by,this).has(i)&&t.push(n)}null===(u=gg(vy,this))||void 0===u||u.showSidebar(t)}if(!i)return r&&this.addNewEditorFromKeyboard(),void gg(n_,this).resolve();for(const e of gg(hy,this).values())e.uid===i?(this.setSelected(e),o?e.editComment():s?e.enterInEditMode():e.focus()):e.unselect();gg(n_,this).resolve()}}addNewEditorFromKeyboard(){this.currentLayer.canCreateNewEmptyEditor()&&this.currentLayer.addNewEditor()}updateToolbar(e){e.mode!==gg(Hy,this)&&this._eventBus.dispatch("switchannotationeditormode",It({source:this},e))}updateParams(e,t){if(gg(ky,this)){switch(e){case Qg.CREATE:return void this.currentLayer.addNewEditor(t);case Qg.HIGHLIGHT_SHOW_ALL:this._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",data:{type:"highlight",action:"toggle_visibility"}}}),(gg(Yy,this)||mg(Yy,this,new Map)).set(e,t),this.showAllEditors("highlight",t)}if(this.hasSelection)for(const n of gg(Vy,this))n.updateParams(e,t);else for(const n of gg(ky,this))n.updateDefaultParams(e,t)}}showAllEditors(e,t){var n,i;for(const r of gg(hy,this).values())r.editorType===e&&r.show(t);(null===(n=null===(i=gg(Yy,this))||void 0===i?void 0:i.get(Qg.HIGHLIGHT_SHOW_ALL))||void 0===n||n)!==t&&pg(i_,this,__).call(this,[[Qg.HIGHLIGHT_SHOW_ALL,t]])}enableWaiting(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(gg(Fy,this)!==e){mg(Fy,this,e);for(const t of gg(dy,this).values())e?t.disableClick():t.enableClick(),t.div.classList.toggle("waiting",e)}}*getEditors(e){for(const t of gg(hy,this).values())t.pageIndex===e&&(yield t)}getEditor(e){return gg(hy,this).get(e)}addEditor(e){gg(hy,this).set(e.id,e)}removeEditor(e){var t,n;(e.div.contains(document.activeElement)&&(gg(Py,this)&&clearTimeout(gg(Py,this)),mg(Py,this,setTimeout(()=>{this.focusMainContainer(),mg(Py,this,null)},0))),gg(hy,this).delete(e.id),e.annotationElementId)&&(null===(t=gg(Uy,this))||void 0===t||t.delete(e.annotationElementId));(this.unselect(e),e.annotationElementId&&gg(by,this).has(e.annotationElementId))||(null===(n=gg(fy,this))||void 0===n||n.remove(e.id))}addDeletedAnnotationElement(e){gg(by,this).add(e.annotationElementId),this.addChangedExistingAnnotation(e),e.deleted=!0}isDeletedAnnotationElement(e){return gg(by,this).has(e)}removeDeletedAnnotationElement(e){gg(by,this).delete(e.annotationElementId),this.removeChangedExistingAnnotation(e),e.deleted=!1}setActiveEditor(e){gg(cy,this)!==e&&(mg(cy,this,e),e&&pg(i_,this,__).call(this,e.propertiesToUpdate))}updateUI(e){fg(i_,this,k_)===e&&pg(i_,this,__).call(this,e.propertiesToUpdate)}updateUIForDefaultProperties(e){pg(i_,this,__).call(this,e.defaultPropertiesToUpdate)}toggleSelected(e){if(gg(Vy,this).has(e))return gg(Vy,this).delete(e),e.unselect(),void pg(i_,this,y_).call(this,{hasSelectedEditor:this.hasSelection});gg(Vy,this).add(e),e.select(),pg(i_,this,__).call(this,e.propertiesToUpdate),pg(i_,this,y_).call(this,{hasSelectedEditor:!0})}setSelected(e){var t;this.updateToolbar({mode:e.mode,editId:e.id}),null===(t=gg(_y,this))||void 0===t||t.commitOrRemove();for(const n of gg(Vy,this))n!==e&&n.unselect();gg(Vy,this).clear(),gg(Vy,this).add(e),e.select(),pg(i_,this,__).call(this,e.propertiesToUpdate),pg(i_,this,y_).call(this,{hasSelectedEditor:!0})}isSelected(e){return gg(Vy,this).has(e)}get firstSelectedEditor(){return gg(Vy,this).values().next().value}unselect(e){e.unselect(),gg(Vy,this).delete(e),pg(i_,this,y_).call(this,{hasSelectedEditor:this.hasSelection})}get hasSelection(){return 0!==gg(Vy,this).size}get isEnterHandled(){return 1===gg(Vy,this).size&&this.firstSelectedEditor.isEnterHandled}undo(){var e;gg(my,this).undo(),pg(i_,this,y_).call(this,{hasSomethingToUndo:gg(my,this).hasSomethingToUndo(),hasSomethingToRedo:!0,isEmpty:pg(i_,this,E_).call(this)}),null===(e=this._editorUndoBar)||void 0===e||e.hide()}redo(){gg(my,this).redo(),pg(i_,this,y_).call(this,{hasSomethingToUndo:!0,hasSomethingToRedo:gg(my,this).hasSomethingToRedo(),isEmpty:pg(i_,this,E_).call(this)})}addCommands(e){gg(my,this).add(e),pg(i_,this,y_).call(this,{hasSomethingToUndo:!0,hasSomethingToRedo:!1,isEmpty:pg(i_,this,E_).call(this)})}cleanUndoStack(e){gg(my,this).cleanType(e)}delete(){var e;this.commitOrRemove();const t=null===(e=this.currentLayer)||void 0===e?void 0:e.endDrawingSession(!0);if(!this.hasSelection&&!t)return;const n=t?[t]:[...gg(Vy,this)],i=()=>{for(const e of n)pg(i_,this,x_).call(this,e)};this.addCommands({cmd:()=>{var e;null===(e=this._editorUndoBar)||void 0===e||e.show(i,1===n.length?n[0].editorType:n.length);for(const t of n)t.remove()},undo:i,mustExec:!0})}commitOrRemove(){var e;null===(e=gg(cy,this))||void 0===e||e.commitOrRemove()}hasSomethingToControl(){return gg(cy,this)||this.hasSelection}selectAll(){for(const e of gg(Vy,this))e.commit();pg(i_,this,C_).call(this,gg(hy,this).values())}unselectAll(){var e;if((!gg(cy,this)||(gg(cy,this).commitOrRemove(),gg(Hy,this)===Xg.NONE))&&(null===(e=gg(_y,this))||void 0===e||!e.commitOrRemove())&&this.hasSelection){for(const e of gg(Vy,this))e.unselect();gg(Vy,this).clear(),pg(i_,this,y_).call(this,{hasSelectedEditor:!1})}}translateSelectedEditors(e,t){if(arguments.length>2&&void 0!==arguments[2]&&arguments[2]||this.commitOrRemove(),!this.hasSelection)return;gg($y,this)[0]+=e,gg($y,this)[1]+=t;const[n,i]=gg($y,this),r=[...gg(Vy,this)];gg(Jy,this)&&clearTimeout(gg(Jy,this)),mg(Jy,this,setTimeout(()=>{mg(Jy,this,null),gg($y,this)[0]=gg($y,this)[1]=0,this.addCommands({cmd:()=>{for(const e of r)gg(hy,this).has(e.id)&&(e.translateInPage(n,i),e.translationDone())},undo:()=>{for(const e of r)gg(hy,this).has(e.id)&&(e.translateInPage(-n,-i),e.translationDone())},mustExec:!1})},1e3));for(const s of r)s.translateInPage(e,t),s.translationDone()}setUpDragSession(){if(this.hasSelection){this.disableUserSelect(!0),mg(xy,this,new Map);for(const e of gg(Vy,this))gg(xy,this).set(e,{savedX:e.x,savedY:e.y,savedPageIndex:e.pageIndex,newX:0,newY:0,newPageIndex:-1})}}endDragSession(){if(!gg(xy,this))return!1;this.disableUserSelect(!1);const e=gg(xy,this);mg(xy,this,null);let t=!1;for(const[{x:i,y:r,pageIndex:s},o]of e)o.newX=i,o.newY=r,o.newPageIndex=s,t||(t=i!==o.savedX||r!==o.savedY||s!==o.savedPageIndex);if(!t)return!1;const n=(e,t,n,i)=>{if(gg(hy,this).has(e.id)){const r=gg(dy,this).get(i);r?e._setParentAndPosition(r,t,n):(e.pageIndex=i,e.x=t,e.y=n)}};return this.addCommands({cmd:()=>{for(const[t,{newX:i,newY:r,newPageIndex:s}]of e)n(t,i,r,s)},undo:()=>{for(const[t,{savedX:i,savedY:r,savedPageIndex:s}]of e)n(t,i,r,s)},mustExec:!0}),!0}dragSelectedEditors(e,t){if(gg(xy,this))for(const n of gg(xy,this).keys())n.drag(e,t)}rebuild(e){if(null===e.parent){const t=this.getLayer(e.pageIndex);t?(t.changeParent(e),t.addOrRebuild(e)):(this.addEditor(e),this.addToAnnotationStorage(e),e.rebuild())}else e.parent.addOrRebuild(e)}get isEditorHandlingKeyboard(){var e;return(null===(e=this.getActive())||void 0===e?void 0:e.shouldGetKeyboardEvents())||1===gg(Vy,this).size&&this.firstSelectedEditor.shouldGetKeyboardEvents()}isActive(e){return gg(cy,this)===e}getActive(){return gg(cy,this)}getMode(){return gg(Hy,this)}isEditingMode(){return gg(Hy,this)!==Xg.NONE}get imageManager(){return Cm(this,"imageManager",new $v)}getSelectionBoxes(e){if(!e)return null;const t=document.getSelection();for(let l=0,c=t.rangeCount;l<c;l++)if(!e.contains(t.getRangeAt(l).commonAncestorContainer))return null;const{x:n,y:i,width:r,height:s}=e.getBoundingClientRect();let o;switch(e.getAttribute("data-main-rotation")){case"90":o=(e,t,o,a)=>({x:(t-i)/s,y:1-(e+o-n)/r,width:a/s,height:o/r});break;case"180":o=(e,t,o,a)=>({x:1-(e+o-n)/r,y:1-(t+a-i)/s,width:o/r,height:a/s});break;case"270":o=(e,t,o,a)=>({x:1-(t+a-i)/s,y:(e-n)/r,width:a/s,height:o/r});break;default:o=(e,t,o,a)=>({x:(e-n)/r,y:(t-i)/s,width:o/r,height:a/s})}const a=[];for(let l=0,c=t.rangeCount;l<c;l++){const e=t.getRangeAt(l);if(!e.collapsed)for(const{x:t,y:n,width:i,height:r}of e.getClientRects())0!==i&&0!==r&&a.push(o(t,n,i,r))}return 0===a.length?null:a}addChangedExistingAnnotation(e){let{annotationElementId:t,id:n}=e;(gg(gy,this)||mg(gy,this,new Map)).set(t,n)}removeChangedExistingAnnotation(e){var t;let{annotationElementId:n}=e;null===(t=gg(gy,this))||void 0===t||t.delete(n)}renderAnnotationElement(e){var t;const n=null===(t=gg(gy,this))||void 0===t?void 0:t.get(e.data.id);if(!n)return;const i=gg(fy,this).getRawValue(n);i&&(gg(Hy,this)!==Xg.NONE||i.hasBeenModified)&&i.renderAnnotationElement(e)}setMissingCanvas(e,t,n){var i;const r=null===(i=gg(Uy,this))||void 0===i?void 0:i.get(e);r&&(r.setCanvas(t,n),gg(Uy,this).delete(e))}addMissingCanvas(e,t){(gg(Uy,this)||mg(Uy,this,new Map)).set(e,t)}}function s_(e){let{anchorNode:t}=e;return t.nodeType===Node.TEXT_NODE?t.parentElement:t}function o_(e){const{currentLayer:t}=this;if(t.hasTextLayer(e))return t;for(const n of gg(dy,this).values())if(n.hasTextLayer(e))return n;return null}function a_(){const e=document.getSelection();if(!e||e.isCollapsed)return;const t=pg(i_,this,s_).call(this,e).closest(".textLayer"),n=this.getSelectionBoxes(t);n&&(gg(Ny,this)||mg(Ny,this,new Wv(this)),gg(Ny,this).show(t,n,"ltr"===this.direction))}function l_(){var e;const t=document.getSelection();if(!t||t.isCollapsed){var n;if(gg(qy,this))null===(n=gg(Ny,this))||void 0===n||n.hide(),mg(qy,this,null),pg(i_,this,y_).call(this,{hasSelectedText:!1});return}const{anchorNode:i}=t;if(i===gg(qy,this))return;const r=pg(i_,this,s_).call(this,t).closest(".textLayer");var s;if(r){if(null===(e=gg(Ny,this))||void 0===e||e.hide(),mg(qy,this,i),pg(i_,this,y_).call(this,{hasSelectedText:!0}),(gg(Hy,this)===Xg.HIGHLIGHT||gg(Hy,this)===Xg.NONE)&&(gg(Hy,this)===Xg.HIGHLIGHT&&this.showAllEditors("highlight",!0,!0),mg(My,this,this.isShiftKeyDown),!this.isShiftKeyDown)){const e=gg(Hy,this)===Xg.HIGHLIGHT?pg(i_,this,o_).call(this,r):null;if(null===e||void 0===e||e.toggleDrawing(),gg(Ly,this)){const t=new AbortController,n=this.combinedSignal(t),i=n=>{"pointerup"===n.type&&0!==n.button||(t.abort(),null===e||void 0===e||e.toggleDrawing(!0),"pointerup"===n.type&&pg(i_,this,c_).call(this,"main_toolbar"))};window.addEventListener("pointerup",i,{signal:n}),window.addEventListener("blur",i,{signal:n})}else null===e||void 0===e||e.toggleDrawing(!0),pg(i_,this,c_).call(this,"main_toolbar")}}else gg(qy,this)&&(null===(s=gg(Ny,this))||void 0===s||s.hide(),mg(qy,this,null),pg(i_,this,y_).call(this,{hasSelectedText:!1}))}function c_(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";gg(Hy,this)===Xg.HIGHLIGHT?this.highlightSelection(e):gg(Cy,this)&&pg(i_,this,a_).call(this)}function u_(){document.addEventListener("selectionchange",pg(i_,this,l_).bind(this),{signal:this._signal})}function h_(){if(gg(Iy,this))return;mg(Iy,this,new AbortController);const e=this.combinedSignal(gg(Iy,this));window.addEventListener("focus",this.focus.bind(this),{signal:e}),window.addEventListener("blur",this.blur.bind(this),{signal:e})}function d_(){var e;null===(e=gg(Iy,this))||void 0===e||e.abort(),mg(Iy,this,null)}function p_(){if(gg(jy,this))return;mg(jy,this,new AbortController);const e=this.combinedSignal(gg(jy,this));window.addEventListener("keydown",this.keydown.bind(this),{signal:e}),window.addEventListener("keyup",this.keyup.bind(this),{signal:e})}function f_(){var e;null===(e=gg(jy,this))||void 0===e||e.abort(),mg(jy,this,null)}function g_(){if(gg(yy,this))return;mg(yy,this,new AbortController);const e=this.combinedSignal(gg(yy,this));document.addEventListener("copy",this.copy.bind(this),{signal:e}),document.addEventListener("cut",this.cut.bind(this),{signal:e}),document.addEventListener("paste",this.paste.bind(this),{signal:e})}function m_(){var e;null===(e=gg(yy,this))||void 0===e||e.abort(),mg(yy,this,null)}function v_(){const e=this._signal;document.addEventListener("dragover",this.dragOver.bind(this),{signal:e}),document.addEventListener("drop",this.drop.bind(this),{signal:e})}function y_(e){Object.entries(e).some(e=>{let[t,n]=e;return gg(Qy,this)[t]!==n})&&(this._eventBus.dispatch("annotationeditorstateschanged",{source:this,details:Object.assign(gg(Qy,this),e)}),gg(Hy,this)===Xg.HIGHLIGHT&&!1===e.hasSelectedEditor&&pg(i_,this,__).call(this,[[Qg.HIGHLIGHT_FREE,!0]]))}function __(e){this._eventBus.dispatch("annotationeditorparamschanged",{source:this,details:e})}async function w_(){if(!gg(Oy,this)){mg(Oy,this,!0);const e=[];for(const t of gg(dy,this).values())e.push(t.enable());await Promise.all(e);for(const t of gg(hy,this).values())t.enable()}}function b_(){if(this.unselectAll(),gg(Oy,this)){mg(Oy,this,!1);for(const e of gg(dy,this).values())e.disable();for(const e of gg(hy,this).values())e.disable()}}function x_(e){const t=gg(dy,this).get(e.pageIndex);t?t.addOrRebuild(e):(this.addEditor(e),this.addToAnnotationStorage(e))}function k_(e){let t=null;for(t of gg(Vy,e));return t}function E_(){if(0===gg(hy,this).size)return!0;if(1===gg(hy,this).size)for(const e of gg(hy,this).values())return e.isEmpty();return!1}function C_(e){for(const t of gg(Vy,this))t.unselect();gg(Vy,this).clear();for(const t of e)t.isEmpty()||(gg(Vy,this).add(t),t.select());pg(i_,this,y_).call(this,{hasSelectedEditor:this.hasSelection})}Tt(r_,"TRANSLATE_SMALL",1),Tt(r_,"TRANSLATE_BIG",10);var S_=new WeakMap,A_=new WeakMap,T_=new WeakMap,P_=new WeakMap,I_=new WeakMap,R_=new WeakMap,M_=new WeakMap,N_=new WeakMap,D_=new WeakMap,O_=new WeakMap,L_=new WeakMap,F_=new WeakMap,j_=new WeakSet;class B_{constructor(e){hg(this,j_),dg(this,S_,null),dg(this,A_,!1),dg(this,T_,null),dg(this,P_,null),dg(this,I_,null),dg(this,R_,null),dg(this,M_,!1),dg(this,N_,null),dg(this,D_,null),dg(this,O_,null),dg(this,L_,null),dg(this,F_,!1),mg(D_,this,e),mg(F_,this,e._uiManager.useNewAltTextFlow),z_._||(z_._=Object.freeze({added:"pdfjs-editor-new-alt-text-added-button","added-label":"pdfjs-editor-new-alt-text-added-button-label",missing:"pdfjs-editor-new-alt-text-missing-button","missing-label":"pdfjs-editor-new-alt-text-missing-button-label",review:"pdfjs-editor-new-alt-text-to-review-button","review-label":"pdfjs-editor-new-alt-text-to-review-button-label"}))}static initialize(e){var t;null!==(t=B_._l10n)&&void 0!==t||(B_._l10n=e)}async render(){const e=mg(T_,this,document.createElement("button"));e.className="altText",e.tabIndex="0";const t=mg(P_,this,document.createElement("span"));e.append(t),gg(F_,this)?(e.classList.add("new"),e.setAttribute("data-l10n-id",z_._.missing),t.setAttribute("data-l10n-id",z_._["missing-label"])):(e.setAttribute("data-l10n-id","pdfjs-editor-alt-text-button"),t.setAttribute("data-l10n-id","pdfjs-editor-alt-text-button-label"));const n=gg(D_,this)._uiManager._signal;e.addEventListener("contextmenu",iv,{signal:n}),e.addEventListener("pointerdown",e=>e.stopPropagation(),{signal:n});const i=e=>{e.preventDefault(),gg(D_,this)._uiManager.editAltText(gg(D_,this)),gg(F_,this)&&gg(D_,this)._reportTelemetry({action:"pdfjs.image.alt_text.image_status_label_clicked",data:{label:fg(j_,this,W_)}})};return e.addEventListener("click",i,{capture:!0,signal:n}),e.addEventListener("keydown",t=>{t.target===e&&"Enter"===t.key&&(mg(M_,this,!0),i(t))},{signal:n}),await pg(j_,this,U_).call(this),e}finish(){gg(T_,this)&&(gg(T_,this).focus({focusVisible:gg(M_,this)}),mg(M_,this,!1))}isEmpty(){return gg(F_,this)?null===gg(S_,this):!gg(S_,this)&&!gg(A_,this)}hasData(){return gg(F_,this)?null!==gg(S_,this)||!!gg(O_,this):this.isEmpty()}get guessedText(){return gg(O_,this)}async setGuessedText(e){null===gg(S_,this)&&(mg(O_,this,e),mg(L_,this,await B_._l10n.get("pdfjs-editor-new-alt-text-generated-alt-text-with-disclaimer",{generatedAltText:e})),pg(j_,this,U_).call(this))}toggleAltTextBadge(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];var t;if(!gg(F_,this)||gg(S_,this))return null===(t=gg(N_,this))||void 0===t||t.remove(),void mg(N_,this,null);if(!gg(N_,this)){const e=mg(N_,this,document.createElement("div"));e.className="noAltTextBadge",gg(D_,this).div.append(e)}gg(N_,this).classList.toggle("hidden",!e)}serialize(e){let t=gg(S_,this);return e||gg(O_,this)!==t||(t=gg(L_,this)),{altText:t,decorative:gg(A_,this),guessedText:gg(O_,this),textWithDisclaimer:gg(L_,this)}}get data(){return{altText:gg(S_,this),decorative:gg(A_,this)}}set data(e){let{altText:t,decorative:n,guessedText:i,textWithDisclaimer:r,cancel:s=!1}=e;i&&(mg(O_,this,i),mg(L_,this,r)),gg(S_,this)===t&&gg(A_,this)===n||(s||(mg(S_,this,t),mg(A_,this,n)),pg(j_,this,U_).call(this))}toggle(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];gg(T_,this)&&(!e&&gg(R_,this)&&(clearTimeout(gg(R_,this)),mg(R_,this,null)),gg(T_,this).disabled=!e)}shown(){gg(D_,this)._reportTelemetry({action:"pdfjs.image.alt_text.image_status_label_displayed",data:{label:fg(j_,this,W_)}})}destroy(){var e,t;null===(e=gg(T_,this))||void 0===e||e.remove(),mg(T_,this,null),mg(P_,this,null),mg(I_,this,null),null===(t=gg(N_,this))||void 0===t||t.remove(),mg(N_,this,null)}}function W_(e){return(gg(S_,e)?"added":null===gg(S_,e)&&e.guessedText&&"review")||"missing"}async function U_(){const e=gg(T_,this);if(!e)return;if(gg(F_,this)){var t,n;if(e.classList.toggle("done",!!gg(S_,this)),e.setAttribute("data-l10n-id",z_._[fg(j_,this,W_)]),null===(t=gg(P_,this))||void 0===t||t.setAttribute("data-l10n-id",z_._["".concat(fg(j_,this,W_),"-label")]),!gg(S_,this))return void(null===(n=gg(I_,this))||void 0===n||n.remove())}else{var i;if(!gg(S_,this)&&!gg(A_,this))return e.classList.remove("done"),void(null===(i=gg(I_,this))||void 0===i||i.remove());e.classList.add("done"),e.setAttribute("data-l10n-id","pdfjs-editor-alt-text-edit-button")}let r=gg(I_,this);if(!r){mg(I_,this,r=document.createElement("span")),r.className="tooltip",r.setAttribute("role","tooltip"),r.id="alt-text-tooltip-".concat(gg(D_,this).id);const t=100,n=gg(D_,this)._uiManager._signal;n.addEventListener("abort",()=>{clearTimeout(gg(R_,this)),mg(R_,this,null)},{once:!0}),e.addEventListener("mouseenter",()=>{mg(R_,this,setTimeout(()=>{mg(R_,this,null),gg(I_,this).classList.add("show"),gg(D_,this)._reportTelemetry({action:"alt_text_tooltip"})},t))},{signal:n}),e.addEventListener("mouseleave",()=>{var e;gg(R_,this)&&(clearTimeout(gg(R_,this)),mg(R_,this,null)),null===(e=gg(I_,this))||void 0===e||e.classList.remove("show")},{signal:n})}gg(A_,this)?r.setAttribute("data-l10n-id","pdfjs-editor-alt-text-decorative-tooltip"):(r.removeAttribute("data-l10n-id"),r.textContent=gg(S_,this)),r.parentNode||e.append(r);const s=gg(D_,this).getElementForAltText();null===s||void 0===s||s.setAttribute("aria-describedby",r.id)}var z_={_:null};Tt(B_,"_l10n",null);var H_=new WeakMap,V_=new WeakMap,q_=new WeakMap,G_=new WeakMap,K_=new WeakMap,Y_=new WeakMap,X_=new WeakMap,Q_=new WeakMap,$_=new WeakMap,J_=new WeakMap,Z_=new WeakSet;class ew{constructor(e){hg(this,Z_),dg(this,H_,null),dg(this,V_,null),dg(this,q_,!1),dg(this,G_,null),dg(this,K_,null),dg(this,Y_,null),dg(this,X_,null),dg(this,Q_,null),dg(this,$_,!1),dg(this,J_,null),mg(G_,this,e)}renderForToolbar(){const e=mg(V_,this,document.createElement("button"));return e.className="comment",pg(Z_,this,tw).call(this,e,!1)}renderForStandalone(){const e=mg(H_,this,document.createElement("button"));e.className="annotationCommentButton";const t=gg(G_,this).commentButtonPosition;if(t){const{style:n}=e;n.insetInlineEnd="calc(".concat(100*("ltr"===gg(G_,this)._uiManager.direction?1-t[0]:t[0]),"% - var(--comment-button-dim))"),n.top="calc(".concat(100*t[1],"% - var(--comment-button-dim))");const i=gg(G_,this).commentButtonColor;i&&(n.backgroundColor=i)}return pg(Z_,this,tw).call(this,e,!0)}focusButton(){setTimeout(()=>{var e,t;null===(e=null!==(t=gg(H_,this))&&void 0!==t?t:gg(V_,this))||void 0===e||e.focus()},0)}onUpdatedColor(){if(!gg(H_,this))return;const e=gg(G_,this).commentButtonColor;e&&(gg(H_,this).style.backgroundColor=e),gg(G_,this)._uiManager.updatePopupColor(gg(G_,this))}get commentButtonWidth(){var e,t;return(null!==(e=null===(t=gg(H_,this))||void 0===t?void 0:t.getBoundingClientRect().width)&&void 0!==e?e:0)/gg(G_,this).parent.boundingClientRect.width}get commentPopupPositionInLayer(){if(gg(J_,this))return gg(J_,this);if(!gg(H_,this))return null;const{x:e,y:t,height:n}=gg(H_,this).getBoundingClientRect(),{x:i,y:r,width:s,height:o}=gg(G_,this).parent.boundingClientRect;return[(e-i)/s,(t+n-r)/o]}set commentPopupPositionInLayer(e){mg(J_,this,e)}hasDefaultPopupPosition(){return null===gg(J_,this)}removeStandaloneCommentButton(){var e;null===(e=gg(H_,this))||void 0===e||e.remove(),mg(H_,this,null)}removeToolbarCommentButton(){var e;null===(e=gg(V_,this))||void 0===e||e.remove(),mg(V_,this,null)}setCommentButtonStates(e){let{selected:t,hasPopup:n}=e;gg(H_,this)&&(gg(H_,this).classList.toggle("selected",t),gg(H_,this).ariaExpanded=n)}edit(e){const t=this.commentPopupPositionInLayer;let n,i;if(t)[n,i]=t;else{[n,i]=gg(G_,this).commentButtonPosition;const{width:e,height:t,x:r,y:s}=gg(G_,this);n=r+n*e,i=s+i*t}const r=gg(G_,this).parent.boundingClientRect,{x:s,y:o,width:a,height:l}=r;gg(G_,this)._uiManager.editComment(gg(G_,this),s+n*a,o+i*l,It(It({},e),{},{parentDimensions:r}))}finish(){gg(V_,this)&&(gg(V_,this).focus({focusVisible:gg(q_,this)}),mg(q_,this,!1))}isDeleted(){return gg($_,this)||""===gg(X_,this)}isEmpty(){return null===gg(X_,this)}hasBeenEdited(){return this.isDeleted()||gg(X_,this)!==gg(K_,this)}serialize(){return this.data}get data(){return{text:gg(X_,this),richText:gg(Y_,this),date:gg(Q_,this),deleted:this.isDeleted()}}set data(e){if(e!==gg(X_,this)&&mg(Y_,this,null),null===e)return mg(X_,this,""),void mg($_,this,!0);mg(X_,this,e),mg(Q_,this,new Date),mg($_,this,!1)}setInitialText(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;mg(K_,this,e),this.data=e,mg(Q_,this,null),mg(Y_,this,t)}shown(){}destroy(){var e,t;null===(e=gg(V_,this))||void 0===e||e.remove(),mg(V_,this,null),null===(t=gg(H_,this))||void 0===t||t.remove(),mg(H_,this,null),mg(X_,this,""),mg(Y_,this,null),mg(Q_,this,null),mg(G_,this,null),mg(q_,this,!1),mg($_,this,!1)}}function tw(e,t){if(!gg(G_,this)._uiManager.hasCommentManager())return null;e.tabIndex="0",e.ariaHasPopup="dialog",t?(e.ariaControls="commentPopup",e.setAttribute("data-l10n-id","pdfjs-show-comment-button")):(e.ariaControlsElements=[gg(G_,this)._uiManager.getCommentDialogElement()],e.setAttribute("data-l10n-id","pdfjs-editor-edit-comment-button"));const n=gg(G_,this)._uiManager._signal;if(!(n instanceof AbortSignal)||n.aborted)return e;e.addEventListener("contextmenu",iv,{signal:n}),t&&(e.addEventListener("focusin",e=>{gg(G_,this)._focusEventsAllowed=!1,rv(e)},{capture:!0,signal:n}),e.addEventListener("focusout",e=>{gg(G_,this)._focusEventsAllowed=!0,rv(e)},{capture:!0,signal:n})),e.addEventListener("pointerdown",e=>e.stopPropagation(),{signal:n});const i=t=>{t.preventDefault(),e===gg(V_,this)?this.edit():gg(G_,this).toggleComment(!0)};return e.addEventListener("click",i,{capture:!0,signal:n}),e.addEventListener("keydown",t=>{t.target===e&&"Enter"===t.key&&(mg(q_,this,!0),i(t))},{signal:n}),e.addEventListener("pointerenter",()=>{gg(G_,this).toggleComment(!1,!0)},{signal:n}),e.addEventListener("pointerleave",()=>{gg(G_,this).toggleComment(!1,!1)},{signal:n}),e}var nw=new WeakMap,iw=new WeakMap,rw=new WeakMap,sw=new WeakMap,ow=new WeakMap,aw=new WeakMap,lw=new WeakMap,cw=new WeakMap,uw=new WeakMap,hw=new WeakMap,dw=new WeakMap,pw=new WeakMap,fw=new WeakSet;class gw{constructor(e){let{container:t,isPinchingDisabled:n=null,isPinchingStopped:i=null,onPinchStart:r=null,onPinching:s=null,onPinchEnd:o=null,signal:a}=e;hg(this,fw),dg(this,nw,void 0),dg(this,iw,!1),dg(this,rw,null),dg(this,sw,void 0),dg(this,ow,void 0),dg(this,aw,void 0),dg(this,lw,void 0),dg(this,cw,null),dg(this,uw,void 0),dg(this,hw,null),dg(this,dw,void 0),dg(this,pw,null),mg(nw,this,t),mg(rw,this,i),mg(sw,this,n),mg(ow,this,r),mg(aw,this,s),mg(lw,this,o),mg(dw,this,new AbortController),mg(uw,this,AbortSignal.any([a,gg(dw,this).signal])),t.addEventListener("touchstart",pg(fw,this,mw).bind(this),{passive:!1,signal:gg(uw,this)})}get MIN_TOUCH_DISTANCE_TO_PINCH(){return 35/hv.pixelRatio}destroy(){var e,t;null===(e=gg(dw,this))||void 0===e||e.abort(),mg(dw,this,null),null===(t=gg(cw,this))||void 0===t||t.abort(),mg(cw,this,null)}}function mw(e){var t,n;if(null!==(t=gg(sw,this))&&void 0!==t&&t.call(this))return;if(1===e.touches.length){if(gg(cw,this))return;const e=mg(cw,this,new AbortController),t=AbortSignal.any([gg(uw,this),e.signal]),n=gg(nw,this),i={capture:!0,signal:t,passive:!1},r=e=>{var t;"touch"===e.pointerType&&(null===(t=gg(cw,this))||void 0===t||t.abort(),mg(cw,this,null))};return n.addEventListener("pointerdown",e=>{"touch"===e.pointerType&&(rv(e),r(e))},i),n.addEventListener("pointerup",r,i),void n.addEventListener("pointercancel",r,i)}if(!gg(pw,this)){var i;mg(pw,this,new AbortController);const e=AbortSignal.any([gg(uw,this),gg(pw,this).signal]),t=gg(nw,this),n={signal:e,capture:!1,passive:!1};t.addEventListener("touchmove",pg(fw,this,vw).bind(this),n);const r=pg(fw,this,yw).bind(this);t.addEventListener("touchend",r,n),t.addEventListener("touchcancel",r,n),n.capture=!0,t.addEventListener("pointerdown",rv,n),t.addEventListener("pointermove",rv,n),t.addEventListener("pointercancel",rv,n),t.addEventListener("pointerup",rv,n),null===(i=gg(ow,this))||void 0===i||i.call(this)}if(rv(e),2!==e.touches.length||null!==(n=gg(rw,this))&&void 0!==n&&n.call(this))return void mg(hw,this,null);let[r,s]=e.touches;r.identifier>s.identifier&&([r,s]=[s,r]),mg(hw,this,{touch0X:r.screenX,touch0Y:r.screenY,touch1X:s.screenX,touch1Y:s.screenY})}function vw(e){var t;if(!gg(hw,this)||2!==e.touches.length)return;rv(e);let[n,i]=e.touches;n.identifier>i.identifier&&([n,i]=[i,n]);const{screenX:r,screenY:s}=n,{screenX:o,screenY:a}=i,l=gg(hw,this),{touch0X:c,touch0Y:u,touch1X:h,touch1Y:d}=l,p=h-c,f=d-u,g=o-r,m=a-s,v=Math.hypot(g,m)||1,y=Math.hypot(p,f)||1;if(!gg(iw,this)&&Math.abs(y-v)<=bg.MIN_TOUCH_DISTANCE_TO_PINCH)return;if(l.touch0X=r,l.touch0Y=s,l.touch1X=o,l.touch1Y=a,!gg(iw,this))return void mg(iw,this,!0);const _=[(r+o)/2,(s+a)/2];null===(t=gg(aw,this))||void 0===t||t.call(this,_,y,v)}function yw(e){if(!(e.touches.length>=2)){var t;if(gg(pw,this))gg(pw,this).abort(),mg(pw,this,null),null===(t=gg(lw,this))||void 0===t||t.call(this);gg(hw,this)&&(rv(e),mg(hw,this,null),mg(iw,this,!1))}}bg=gw;var _w=new WeakMap,ww=new WeakMap,bw=new WeakMap,xw=new WeakMap,kw=new WeakMap,Ew=new WeakMap,Cw=new WeakMap,Sw=new WeakMap,Aw=new WeakMap,Tw=new WeakMap,Pw=new WeakMap,Iw=new WeakMap,Rw=new WeakMap,Mw=new WeakMap,Nw=new WeakMap,Dw=new WeakMap,Ow=new WeakMap,Lw=new WeakMap,Fw=new WeakMap,jw=new WeakMap,Bw=new WeakMap,Ww=new WeakMap,Uw=new WeakMap,zw=new WeakMap,Hw=new WeakMap,Vw=new WeakMap,qw=new WeakSet;class Gw{static get _resizerKeyboardManager(){const e=Gw.prototype._resizeWithKeyboard,t=r_.TRANSLATE_SMALL,n=r_.TRANSLATE_BIG;return Cm(this,"_resizerKeyboardManager",new sy([[["ArrowLeft","mac+ArrowLeft"],e,{args:[-t,0]}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],e,{args:[-n,0]}],[["ArrowRight","mac+ArrowRight"],e,{args:[t,0]}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],e,{args:[n,0]}],[["ArrowUp","mac+ArrowUp"],e,{args:[0,-t]}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],e,{args:[0,-n]}],[["ArrowDown","mac+ArrowDown"],e,{args:[0,t]}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],e,{args:[0,n]}],[["Escape","mac+Escape"],Gw.prototype._stopResizingWithKeyboard]]))}constructor(e){hg(this,qw),dg(this,_w,null),dg(this,ww,null),dg(this,bw,null),dg(this,xw,null),dg(this,kw,null),dg(this,Ew,!1),dg(this,Cw,null),dg(this,Sw,""),dg(this,Aw,null),dg(this,Tw,null),dg(this,Pw,null),dg(this,Iw,null),dg(this,Rw,null),dg(this,Mw,""),dg(this,Nw,!1),dg(this,Dw,null),dg(this,Ow,!1),dg(this,Lw,!1),dg(this,Fw,!1),dg(this,jw,null),dg(this,Bw,0),dg(this,Ww,0),dg(this,Uw,null),dg(this,zw,null),Tt(this,"isSelected",!1),Tt(this,"_isCopy",!1),Tt(this,"_editToolbar",null),Tt(this,"_initialOptions",Object.create(null)),Tt(this,"_initialData",null),Tt(this,"_isVisible",!0),Tt(this,"_uiManager",null),Tt(this,"_focusEventsAllowed",!0),dg(this,Hw,!1),dg(this,Vw,Gw._zIndex++),this.parent=e.parent,this.id=e.id,this.width=this.height=null,this.pageIndex=e.parent.pageIndex,this.name=e.name,this.div=null,this._uiManager=e.uiManager,this.annotationElementId=null,this._willKeepAspectRatio=!1,this._initialOptions.isCentered=e.isCentered,this._structTreeParentId=null,this.annotationElementId=e.annotationElementId||null,this.creationDate=e.creationDate||new Date,this.modificationDate=e.modificationDate||null;const{rotation:t,rawDims:{pageWidth:n,pageHeight:i,pageX:r,pageY:s}}=this.parent.viewport;this.rotation=t,this.pageRotation=(360+t-this._uiManager.viewParameters.rotation)%360,this.pageDimensions=[n,i],this.pageTranslation=[r,s];const[o,a]=this.parentDimensions;this.x=e.x/o,this.y=e.y/a,this.isAttachedToDOM=!1,this.deleted=!1}get editorType(){return Object.getPrototypeOf(this).constructor._type}get mode(){return Object.getPrototypeOf(this).constructor._editorType}static get isDrawer(){return!1}static get _defaultLineColor(){return Cm(this,"_defaultLineColor",this._colorManager.getHexCode("CanvasText"))}static deleteAnnotationElement(e){const t=new db({id:e.parent.getNextId(),parent:e.parent,uiManager:e._uiManager});t.annotationElementId=e.annotationElementId,t.deleted=!0,t._uiManager.addToAnnotationStorage(t)}static initialize(e,t){var n;if(null!==(n=Gw._l10n)&&void 0!==n||(Gw._l10n=e),Gw._l10nResizer||(Gw._l10nResizer=Object.freeze({topLeft:"pdfjs-editor-resizer-top-left",topMiddle:"pdfjs-editor-resizer-top-middle",topRight:"pdfjs-editor-resizer-top-right",middleRight:"pdfjs-editor-resizer-middle-right",bottomRight:"pdfjs-editor-resizer-bottom-right",bottomMiddle:"pdfjs-editor-resizer-bottom-middle",bottomLeft:"pdfjs-editor-resizer-bottom-left",middleLeft:"pdfjs-editor-resizer-middle-left"})),-1!==Gw._borderLineWidth)return;const i=getComputedStyle(document.documentElement);Gw._borderLineWidth=parseFloat(i.getPropertyValue("--outline-width"))||0}static updateDefaultParams(e,t){}static get defaultPropertiesToUpdate(){return[]}static isHandlingMimeForPasting(e){return!1}static paste(e,t){bm("Not implemented")}get propertiesToUpdate(){return[]}get _isDraggable(){return gg(Hw,this)}set _isDraggable(e){var t;mg(Hw,this,e),null===(t=this.div)||void 0===t||t.classList.toggle("draggable",e)}get uid(){return this.annotationElementId||this.id}get isEnterHandled(){return!0}center(){const[e,t]=this.pageDimensions;switch(this.parentRotation){case 90:this.x-=this.height*t/(2*e),this.y+=this.width*e/(2*t);break;case 180:this.x+=this.width/2,this.y+=this.height/2;break;case 270:this.x+=this.height*t/(2*e),this.y-=this.width*e/(2*t);break;default:this.x-=this.width/2,this.y-=this.height/2}this.fixAndSetPosition()}addCommands(e){this._uiManager.addCommands(e)}get currentLayer(){return this._uiManager.currentLayer}setInBackground(){this.div.style.zIndex=0}setInForeground(){this.div.style.zIndex=gg(Vw,this)}setParent(e){var t;null!==e?(this.pageIndex=e.pageIndex,this.pageDimensions=e.pageDimensions):(pg(qw,this,hb).call(this),null===(t=gg(Iw,this))||void 0===t||t.remove(),mg(Iw,this,null));this.parent=e}focusin(e){this._focusEventsAllowed&&(gg(Nw,this)?mg(Nw,this,!1):this.parent.setSelected(this))}focusout(e){var t;if(!this._focusEventsAllowed)return;if(!this.isAttachedToDOM)return;const n=e.relatedTarget;null!==n&&void 0!==n&&n.closest("#".concat(this.id))||(e.preventDefault(),null!==(t=this.parent)&&void 0!==t&&t.isMultipleSelection||this.commitOrRemove())}commitOrRemove(){this.isEmpty()?this.remove():this.commit()}commit(){this.isInEditMode()&&this.addToAnnotationStorage()}addToAnnotationStorage(){this._uiManager.addToAnnotationStorage(this)}setAt(e,t,n,i){const[r,s]=this.parentDimensions;[n,i]=this.screenToPageTranslation(n,i),this.x=(e+n)/r,this.y=(t+i)/s,this.fixAndSetPosition()}_moveAfterPaste(e,t){const[n,i]=this.parentDimensions;this.setAt(e*n,t*i,this.width*n,this.height*i),this._onTranslated()}translate(e,t){pg(qw,this,Kw).call(this,this.parentDimensions,e,t)}translateInPage(e,t){gg(Dw,this)||mg(Dw,this,[this.x,this.y,this.width,this.height]),pg(qw,this,Kw).call(this,this.pageDimensions,e,t),this.div.scrollIntoView({block:"nearest"})}translationDone(){this._onTranslated(this.x,this.y)}drag(e,t){gg(Dw,this)||mg(Dw,this,[this.x,this.y,this.width,this.height]);const{div:n,parentDimensions:[i,r]}=this;if(this.x+=e/i,this.y+=t/r,this.parent&&(this.x<0||this.x>1||this.y<0||this.y>1)){const{x:e,y:t}=this.div.getBoundingClientRect();this.parent.findNewParent(this,e,t)&&(this.x-=Math.floor(this.x),this.y-=Math.floor(this.y))}let{x:s,y:o}=this;const[a,l]=this.getBaseTranslation();s+=a,o+=l;const{style:c}=n;c.left="".concat((100*s).toFixed(2),"%"),c.top="".concat((100*o).toFixed(2),"%"),this._onTranslating(s,o),n.scrollIntoView({block:"nearest"})}_onTranslating(e,t){}_onTranslated(e,t){}get _hasBeenMoved(){return!!gg(Dw,this)&&(gg(Dw,this)[0]!==this.x||gg(Dw,this)[1]!==this.y)}get _hasBeenResized(){return!!gg(Dw,this)&&(gg(Dw,this)[2]!==this.width||gg(Dw,this)[3]!==this.height)}getBaseTranslation(){const[e,t]=this.parentDimensions,{_borderLineWidth:n}=Gw,i=n/e,r=n/t;switch(this.rotation){case 90:return[-i,r];case 180:return[i,r];case 270:return[i,-r];default:return[-i,-r]}}get _mustFixPosition(){return!0}fixAndSetPosition(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.rotation;const{div:{style:t},pageDimensions:[n,i]}=this;let{x:r,y:s,width:o,height:a}=this;if(o*=n,a*=i,r*=n,s*=i,this._mustFixPosition)switch(e){case 0:r=Vm(r,0,n-o),s=Vm(s,0,i-a);break;case 90:r=Vm(r,0,n-a),s=Vm(s,o,i);break;case 180:r=Vm(r,o,n),s=Vm(s,a,i);break;case 270:r=Vm(r,a,n),s=Vm(s,0,i-o)}this.x=r/=n,this.y=s/=i;const[l,c]=this.getBaseTranslation();r+=l,s+=c,t.left="".concat((100*r).toFixed(2),"%"),t.top="".concat((100*s).toFixed(2),"%"),this.moveInDOM()}screenToPageTranslation(e,t){return Yw.call(Gw,e,t,this.parentRotation)}pageTranslationToScreen(e,t){return Yw.call(Gw,e,t,360-this.parentRotation)}get parentScale(){return this._uiManager.viewParameters.realScale}get parentRotation(){return(this._uiManager.viewParameters.rotation+this.pageRotation)%360}get parentDimensions(){const{parentScale:e,pageDimensions:[t,n]}=this;return[t*e,n*e]}setDims(){const{div:{style:e},width:t,height:n}=this;e.width="".concat((100*t).toFixed(2),"%"),e.height="".concat((100*n).toFixed(2),"%")}getInitialTranslation(){return[0,0]}_onResized(){}static _round(e){return Math.round(1e4*e)/1e4}_onResizing(){}altTextFinish(){var e;null===(e=gg(bw,this))||void 0===e||e.finish()}get toolbarButtons(){return null}async addEditToolbar(){if(this._editToolbar||gg(Lw,this))return this._editToolbar;this._editToolbar=new Pv(this),this.div.append(this._editToolbar.render());const{toolbarButtons:e}=this;if(e)for(const[t,n]of e)await this._editToolbar.addButton(t,n);return this.hasComment||this._editToolbar.addButton("comment",this.addCommentButton()),this._editToolbar.addButton("delete"),this._editToolbar}addCommentButtonInToolbar(){var e;null===(e=this._editToolbar)||void 0===e||e.addButtonBefore("comment",this.addCommentButton(),".deleteButton")}removeCommentButtonFromToolbar(){var e;null===(e=this._editToolbar)||void 0===e||e.removeButton("comment")}removeEditToolbar(){var e,t;null===(e=this._editToolbar)||void 0===e||e.remove(),this._editToolbar=null,null===(t=gg(bw,this))||void 0===t||t.destroy()}addContainer(e){var t;const n=null===(t=this._editToolbar)||void 0===t?void 0:t.div;n?n.before(e):this.div.append(e)}getClientDimensions(){return this.div.getBoundingClientRect()}createAltText(){return gg(bw,this)||(B_.initialize(Gw._l10n),mg(bw,this,new B_(this)),gg(_w,this)&&(gg(bw,this).data=gg(_w,this),mg(_w,this,null))),gg(bw,this)}get altTextData(){var e;return null===(e=gg(bw,this))||void 0===e?void 0:e.data}set altTextData(e){gg(bw,this)&&(gg(bw,this).data=e)}get guessedAltText(){var e;return null===(e=gg(bw,this))||void 0===e?void 0:e.guessedText}async setGuessedAltText(e){var t;await(null===(t=gg(bw,this))||void 0===t?void 0:t.setGuessedText(e))}serializeAltText(e){var t;return null===(t=gg(bw,this))||void 0===t?void 0:t.serialize(e)}hasAltText(){return!!gg(bw,this)&&!gg(bw,this).isEmpty()}hasAltTextData(){var e,t;return null!==(e=null===(t=gg(bw,this))||void 0===t?void 0:t.hasData())&&void 0!==e&&e}focusCommentButton(){var e;null===(e=gg(xw,this))||void 0===e||e.focusButton()}addCommentButton(){return gg(xw,this)||mg(xw,this,new ew(this))}addStandaloneCommentButton(){gg(kw,this)?this._uiManager.isEditingMode()&&gg(kw,this).classList.remove("hidden"):this.hasComment&&(mg(kw,this,gg(xw,this).renderForStandalone()),this.div.append(gg(kw,this)))}removeStandaloneCommentButton(){gg(xw,this).removeStandaloneCommentButton(),mg(kw,this,null)}hideStandaloneCommentButton(){var e;null===(e=gg(kw,this))||void 0===e||e.classList.add("hidden")}get comment(){var e;const{data:{richText:t,text:n,date:i,deleted:r}}=gg(xw,this);return{text:n,richText:t,date:i,deleted:r,color:this.getNonHCMColor(),opacity:null!==(e=this.opacity)&&void 0!==e?e:1}}set comment(e){gg(xw,this)||mg(xw,this,new ew(this)),gg(xw,this).data=e,this.hasComment?(this.removeCommentButtonFromToolbar(),this.addStandaloneCommentButton(),this._uiManager.updateComment(this)):(this.addCommentButtonInToolbar(),this.removeStandaloneCommentButton(),this._uiManager.removeComment(this))}setCommentData(e){let{comment:t,popupRef:n,richText:i}=e;if(!n)return;if(gg(xw,this)||mg(xw,this,new ew(this)),gg(xw,this).setInitialText(t,i),!this.annotationElementId)return;const r=this._uiManager.getAndRemoveDataFromAnnotationStorage(this.annotationElementId);r&&this.updateFromAnnotationLayer(r)}get hasEditedComment(){var e;return null===(e=gg(xw,this))||void 0===e?void 0:e.hasBeenEdited()}get hasDeletedComment(){var e;return null===(e=gg(xw,this))||void 0===e?void 0:e.isDeleted()}get hasComment(){return!!gg(xw,this)&&!gg(xw,this).isEmpty()&&!gg(xw,this).isDeleted()}async editComment(e){gg(xw,this)||mg(xw,this,new ew(this)),gg(xw,this).edit(e)}toggleComment(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0;this.hasComment&&this._uiManager.toggleComment(this,e,t)}setSelectedCommentButton(e){gg(xw,this).setSelectedButton(e)}addComment(e){if(this.hasEditedComment){const t=180,n=100,[,,,i]=e.rect,[r]=this.pageDimensions,[s]=this.pageTranslation,o=s+r+1,a=i-n,l=o+t;e.popup={contents:this.comment.text,deleted:this.comment.deleted,rect:[o,a,l,i]}}}updateFromAnnotationLayer(e){let{popup:{contents:t,deleted:n}}=e;gg(xw,this).data=n?null:t}get parentBoundingClientRect(){return this.parent.boundingClientRect}render(){var e;const t=this.div=document.createElement("div");t.setAttribute("data-editor-rotation",(360-this.rotation)%360),t.className=this.name,t.setAttribute("id",this.id),t.tabIndex=gg(Ew,this)?-1:0,t.setAttribute("role","application"),this.defaultL10nId&&t.setAttribute("data-l10n-id",this.defaultL10nId),this._isVisible||t.classList.add("hidden"),this.setInForeground(),pg(qw,this,ob).call(this);const[n,i]=this.parentDimensions;this.parentRotation%180!==0&&(t.style.maxWidth="".concat((100*i/n).toFixed(2),"%"),t.style.maxHeight="".concat((100*n/i).toFixed(2),"%"));const[r,s]=this.getInitialTranslation();return this.translate(r,s),Vv(this,t,["keydown","pointerdown","dblclick"]),this.isResizable&&this._uiManager._supportsPinchToZoom&&(gg(zw,this)||mg(zw,this,new gw({container:t,isPinchingDisabled:()=>!this.isSelected,onPinchStart:pg(qw,this,tb).bind(this),onPinching:pg(qw,this,nb).bind(this),onPinchEnd:pg(qw,this,ib).bind(this),signal:this._uiManager._signal}))),this.addStandaloneCommentButton(),null===(e=this._uiManager._editorUndoBar)||void 0===e||e.hide(),t}pointerdown(e){const{isMac:t}=Om.platform;0!==e.button||e.ctrlKey&&t?e.preventDefault():(mg(Nw,this,!0),this._isDraggable?pg(qw,this,sb).call(this,e):pg(qw,this,rb).call(this,e))}_onStartDragging(){}_onStopDragging(){}moveInDOM(){gg(jw,this)&&clearTimeout(gg(jw,this)),mg(jw,this,setTimeout(()=>{var e;mg(jw,this,null),null===(e=this.parent)||void 0===e||e.moveEditorInDOM(this)},0))}_setParentAndPosition(e,t,n){e.changeParent(this),this.x=t,this.y=n,this.fixAndSetPosition(),this._onTranslated()}getRect(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.rotation;const i=this.parentScale,[r,s]=this.pageDimensions,[o,a]=this.pageTranslation,l=e/i,c=t/i,u=this.x*r,h=this.y*s,d=this.width*r,p=this.height*s;switch(n){case 0:return[u+l+o,s-h-c-p+a,u+l+d+o,s-h-c+a];case 90:return[u+c+o,s-h+l+a,u+c+p+o,s-h+l+d+a];case 180:return[u-l-d+o,s-h+c+a,u-l+o,s-h+c+p+a];case 270:return[u-c-p+o,s-h-l-d+a,u-c+o,s-h-l+a];default:throw new Error("Invalid rotation")}}getRectInCurrentCoords(e,t){const[n,i,r,s]=e,o=r-n,a=s-i;switch(this.rotation){case 0:return[n,t-s,o,a];case 90:return[n,t-i,a,o];case 180:return[r,t-i,o,a];case 270:return[r,t-s,a,o];default:throw new Error("Invalid rotation")}}getPDFRect(){return this.getRect(0,0)}getNonHCMColor(){return this.color&&Gw._colorManager.convert(this._uiManager.getNonHCMColor(this.color))}onUpdatedColor(){var e;null===(e=gg(xw,this))||void 0===e||e.onUpdatedColor()}getData(){const{comment:{text:e,color:t,date:n,opacity:i,deleted:r,richText:s},uid:o,pageIndex:a,creationDate:l,modificationDate:c}=this;return{id:o,pageIndex:a,rect:this.getPDFRect(),richText:s,contentsObj:{str:e},creationDate:l,modificationDate:n||c,popupRef:!r,color:t,opacity:i}}onceAdded(e){}isEmpty(){return!1}enableEditMode(){return!this.isInEditMode()&&(this.parent.setEditingState(!1),mg(Lw,this,!0),!0)}disableEditMode(){return!!this.isInEditMode()&&(this.parent.setEditingState(!0),mg(Lw,this,!1),!0)}isInEditMode(){return gg(Lw,this)}shouldGetKeyboardEvents(){return gg(Fw,this)}needsToBeRebuilt(){return this.div&&!this.isAttachedToDOM}get isOnScreen(){const{top:e,left:t,bottom:n,right:i}=this.getClientDimensions(),{innerHeight:r,innerWidth:s}=window;return t<s&&i>0&&e<r&&n>0}rebuild(){pg(qw,this,ob).call(this)}rotate(e){}resize(){}serializeDeleted(){var e;return{id:this.annotationElementId,deleted:!0,pageIndex:this.pageIndex,popupRef:(null===(e=this._initialData)||void 0===e?void 0:e.popupRef)||""}}serialize(){var e;return{annotationType:this.mode,pageIndex:this.pageIndex,rect:this.getPDFRect(),rotation:this.rotation,structTreeParentId:this._structTreeParentId,popupRef:(null===(e=this._initialData)||void 0===e?void 0:e.popupRef)||""}}static async deserialize(e,t,n){const i=new this.prototype.constructor({parent:t,id:t.getNextId(),uiManager:n,annotationElementId:e.annotationElementId,creationDate:e.creationDate,modificationDate:e.modificationDate});i.rotation=e.rotation,mg(_w,i,e.accessibilityData),i._isCopy=e.isCopy||!1;const[r,s]=i.pageDimensions,[o,a,l,c]=i.getRectInCurrentCoords(e.rect,s);return i.x=o/r,i.y=a/s,i.width=l/r,i.height=c/s,i}get hasBeenModified(){return!!this.annotationElementId&&(this.deleted||null!==this.serialize())}remove(){var e,t;if(null===(e=gg(Rw,this))||void 0===e||e.abort(),mg(Rw,this,null),this.isEmpty()||this.commit(),this.parent?this.parent.remove(this):this._uiManager.removeEditor(this),gg(jw,this)&&(clearTimeout(gg(jw,this)),mg(jw,this,null)),pg(qw,this,hb).call(this),this.removeEditToolbar(),gg(Uw,this)){for(const e of gg(Uw,this).values())clearTimeout(e);mg(Uw,this,null)}this.parent=null,null===(t=gg(zw,this))||void 0===t||t.destroy(),mg(zw,this,null)}get isResizable(){return!1}makeResizable(){this.isResizable&&(pg(qw,this,Qw).call(this),gg(Aw,this).classList.remove("hidden"))}get toolbarPosition(){return null}get commentButtonPosition(){return"ltr"===this._uiManager.direction?[1,0]:[0,0]}get commentButtonPositionInPage(){const{commentButtonPosition:[e,t]}=this,[n,i,r,s]=this.getPDFRect();return[Gw._round(n+(r-n)*e),Gw._round(i+(s-i)*(1-t))]}get commentButtonColor(){return this._uiManager.makeCommentColor(this.getNonHCMColor(),this.opacity)}get commentPopupPosition(){return gg(xw,this).commentPopupPositionInLayer}set commentPopupPosition(e){gg(xw,this).commentPopupPositionInLayer=e}hasDefaultPopupPosition(){return gg(xw,this).hasDefaultPopupPosition()}get commentButtonWidth(){return gg(xw,this).commentButtonWidth}get elementBeforePopup(){return this.div}setCommentButtonStates(e){gg(xw,this).setCommentButtonStates(e)}keydown(e){if(!this.isResizable||e.target!==this.div||"Enter"!==e.key)return;this._uiManager.setSelected(this),mg(Pw,this,{savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height});const t=gg(Aw,this).children;if(!gg(ww,this)){mg(ww,this,Array.from(t));const e=pg(qw,this,ab).bind(this),n=pg(qw,this,lb).bind(this),i=this._uiManager._signal;for(const t of gg(ww,this)){const r=t.getAttribute("data-resizer-name");t.setAttribute("role","spinbutton"),t.addEventListener("keydown",e,{signal:i}),t.addEventListener("blur",n,{signal:i}),t.addEventListener("focus",pg(qw,this,cb).bind(this,r),{signal:i}),t.setAttribute("data-l10n-id",Gw._l10nResizer[r])}}const n=gg(ww,this)[0];let i=0;for(const s of t){if(s===n)break;i++}const r=(360-this.rotation+this.parentRotation)%360/90*(gg(ww,this).length/4);if(r!==i){if(r<i)for(let t=0;t<i-r;t++)gg(Aw,this).append(gg(Aw,this).firstChild);else if(r>i)for(let t=0;t<r-i;t++)gg(Aw,this).firstChild.before(gg(Aw,this).lastChild);let e=0;for(const n of t){const t=gg(ww,this)[e++].getAttribute("data-resizer-name");n.setAttribute("data-l10n-id",Gw._l10nResizer[t])}}pg(qw,this,ub).call(this,0),mg(Fw,this,!0),gg(Aw,this).firstChild.focus({focusVisible:!0}),e.preventDefault(),e.stopImmediatePropagation()}_resizeWithKeyboard(e,t){gg(Fw,this)&&pg(qw,this,eb).call(this,gg(Mw,this),{deltaX:e,deltaY:t,fromKeyboard:!0})}_stopResizingWithKeyboard(){pg(qw,this,hb).call(this),this.div.focus()}select(){var e,t,n;this.isSelected&&this._editToolbar?this._editToolbar.show():(this.isSelected=!0,this.makeResizable(),null===(e=this.div)||void 0===e||e.classList.add("selectedEditor"),this._editToolbar?(null===(t=this._editToolbar)||void 0===t||t.show(),null===(n=gg(bw,this))||void 0===n||n.toggleAltTextBadge(!1)):this.addEditToolbar().then(()=>{var e,t;null!==(e=this.div)&&void 0!==e&&e.classList.contains("selectedEditor")&&(null===(t=this._editToolbar)||void 0===t||t.show())}))}focus(){this.div&&!this.div.contains(document.activeElement)&&setTimeout(()=>{var e;return null===(e=this.div)||void 0===e?void 0:e.focus({preventScroll:!0})},0)}unselect(){var e,t,n,i,r;this.isSelected&&(this.isSelected=!1,null===(e=gg(Aw,this))||void 0===e||e.classList.add("hidden"),null===(t=this.div)||void 0===t||t.classList.remove("selectedEditor"),null!==(n=this.div)&&void 0!==n&&n.contains(document.activeElement)&&this._uiManager.currentLayer.div.focus({preventScroll:!0}),null===(i=this._editToolbar)||void 0===i||i.hide(),null===(r=gg(bw,this))||void 0===r||r.toggleAltTextBadge(!0),this.hasComment&&this._uiManager.toggleComment(this,!1,!1))}updateParams(e,t){}disableEditing(){}enableEditing(){}get canChangeContent(){return!1}enterInEditMode(){this.canChangeContent&&(this.enableEditMode(),this.div.focus())}dblclick(e){"BUTTON"!==e.target.nodeName&&(this.enterInEditMode(),this.parent.updateToolbar({mode:this.constructor._editorType,editId:this.id}))}getElementForAltText(){return this.div}get contentDiv(){return this.div}get isEditing(){return gg(Ow,this)}set isEditing(e){mg(Ow,this,e),this.parent&&(e?(this.parent.setSelected(this),this.parent.setActiveEditor(this)):this.parent.setActiveEditor(null))}static get MIN_SIZE(){return 16}static canCreateNewEmptyEditor(){return!0}get telemetryInitialData(){return{action:"added"}}get telemetryFinalData(){return null}_reportTelemetry(e){if(arguments.length>1&&void 0!==arguments[1]&&arguments[1]){gg(Uw,this)||mg(Uw,this,new Map);const{action:t}=e;let n=gg(Uw,this).get(t);return n&&clearTimeout(n),n=setTimeout(()=>{this._reportTelemetry(e),gg(Uw,this).delete(t),0===gg(Uw,this).size&&mg(Uw,this,null)},Gw._telemetryTimeout),void gg(Uw,this).set(t,n)}e.type||(e.type=this.editorType),this._uiManager._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",data:e}})}show(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this._isVisible;this.div.classList.toggle("hidden",!e),this._isVisible=e}enable(){this.div&&(this.div.tabIndex=0),mg(Ew,this,!1)}disable(){this.div&&(this.div.tabIndex=-1),mg(Ew,this,!0)}updateFakeAnnotationElement(e){if(gg(Iw,this)||this.deleted)return this.deleted?(gg(Iw,this).remove(),void mg(Iw,this,null)):void((this.hasEditedComment||this._hasBeenMoved||this._hasBeenResized)&&gg(Iw,this).updateEdited({rect:this.getPDFRect(),popup:this.comment}));mg(Iw,this,e.addFakeAnnotation(this))}renderAnnotationElement(e){if(this.deleted)return e.hide(),null;let t=e.container.querySelector(".annotationContent");if(t){if("CANVAS"===t.nodeName){const e=t;t=document.createElement("div"),t.classList.add("annotationContent",this.editorType),e.before(t)}}else t=document.createElement("div"),t.classList.add("annotationContent",this.editorType),e.container.prepend(t);return t}resetAnnotationElement(e){const{firstChild:t}=e.container;"DIV"===(null===t||void 0===t?void 0:t.nodeName)&&t.classList.contains("annotationContent")&&t.remove()}}function Kw(e,t,n){let[i,r]=e;[t,n]=this.screenToPageTranslation(t,n),this.x+=t/i,this.y+=n/r,this._onTranslating(this.x,this.y),this.fixAndSetPosition()}function Yw(e,t,n){switch(n){case 90:return[t,-e];case 180:return[-e,-t];case 270:return[-t,e];default:return[e,t]}}function Xw(e){switch(e){case 90:{const[e,t]=this.pageDimensions;return[0,-e/t,t/e,0]}case 180:return[-1,0,0,-1];case 270:{const[e,t]=this.pageDimensions;return[0,e/t,-t/e,0]}default:return[1,0,0,1]}}function Qw(){if(gg(Aw,this))return;mg(Aw,this,document.createElement("div")),gg(Aw,this).classList.add("resizers");const e=this._willKeepAspectRatio?["topLeft","topRight","bottomRight","bottomLeft"]:["topLeft","topMiddle","topRight","middleRight","bottomRight","bottomMiddle","bottomLeft","middleLeft"],t=this._uiManager._signal;for(const n of e){const e=document.createElement("div");gg(Aw,this).append(e),e.classList.add("resizer",n),e.setAttribute("data-resizer-name",n),e.addEventListener("pointerdown",pg(qw,this,$w).bind(this,n),{signal:t}),e.addEventListener("contextmenu",iv,{signal:t}),e.tabIndex=-1}this.div.prepend(gg(Aw,this))}function $w(e,t){var n;t.preventDefault();const{isMac:i}=Om.platform;if(0!==t.button||t.ctrlKey&&i)return;null===(n=gg(bw,this))||void 0===n||n.toggle(!1);const r=this._isDraggable;this._isDraggable=!1,mg(Tw,this,[t.screenX,t.screenY]);const s=new AbortController,o=this._uiManager.combinedSignal(s);this.parent.togglePointerEvents(!1),window.addEventListener("pointermove",pg(qw,this,eb).bind(this,e),{passive:!0,capture:!0,signal:o}),window.addEventListener("touchmove",rv,{passive:!1,signal:o}),window.addEventListener("contextmenu",iv,{signal:o}),mg(Pw,this,{savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height});const a=this.parent.div.style.cursor,l=this.div.style.cursor;this.div.style.cursor=this.parent.div.style.cursor=window.getComputedStyle(t.target).cursor;const c=()=>{var e;s.abort(),this.parent.togglePointerEvents(!0),null===(e=gg(bw,this))||void 0===e||e.toggle(!0),this._isDraggable=r,this.parent.div.style.cursor=a,this.div.style.cursor=l,pg(qw,this,Zw).call(this)};window.addEventListener("pointerup",c,{signal:o}),window.addEventListener("blur",c,{signal:o})}function Jw(e,t,n,i){this.width=n,this.height=i,this.x=e,this.y=t,this.setDims(),this.fixAndSetPosition(),this._onResized()}function Zw(){if(!gg(Pw,this))return;const{savedX:e,savedY:t,savedWidth:n,savedHeight:i}=gg(Pw,this);mg(Pw,this,null);const r=this.x,s=this.y,o=this.width,a=this.height;r===e&&s===t&&o===n&&a===i||this.addCommands({cmd:pg(qw,this,Jw).bind(this,r,s,o,a),undo:pg(qw,this,Jw).bind(this,e,t,n,i),mustExec:!0})}function eb(e,t){const[n,i]=this.parentDimensions,r=this.x,s=this.y,o=this.width,a=this.height,l=xg.MIN_SIZE/n,c=xg.MIN_SIZE/i,u=pg(qw,this,Xw).call(this,this.rotation),h=(e,t)=>[u[0]*e+u[2]*t,u[1]*e+u[3]*t],d=pg(qw,this,Xw).call(this,360-this.rotation);let p,f,g=!1,m=!1;switch(e){case"topLeft":g=!0,p=(e,t)=>[0,0],f=(e,t)=>[e,t];break;case"topMiddle":p=(e,t)=>[e/2,0],f=(e,t)=>[e/2,t];break;case"topRight":g=!0,p=(e,t)=>[e,0],f=(e,t)=>[0,t];break;case"middleRight":m=!0,p=(e,t)=>[e,t/2],f=(e,t)=>[0,t/2];break;case"bottomRight":g=!0,p=(e,t)=>[e,t],f=(e,t)=>[0,0];break;case"bottomMiddle":p=(e,t)=>[e/2,t],f=(e,t)=>[e/2,0];break;case"bottomLeft":g=!0,p=(e,t)=>[0,t],f=(e,t)=>[e,0];break;case"middleLeft":m=!0,p=(e,t)=>[0,t/2],f=(e,t)=>[e,t/2]}const v=p(o,a),y=f(o,a);let _=h(...y);const w=xg._round(r+_[0]),b=xg._round(s+_[1]);let x,k,E=1,C=1;if(t.fromKeyboard)({deltaX:x,deltaY:k}=t);else{const{screenX:e,screenY:n}=t,[i,r]=gg(Tw,this);[x,k]=this.screenToPageTranslation(e-i,n-r),gg(Tw,this)[0]=e,gg(Tw,this)[1]=n}var S,A;if([x,k]=(S=x/n,A=k/i,[d[0]*S+d[2]*A,d[1]*S+d[3]*A]),g){const e=Math.hypot(o,a);E=C=Math.max(Math.min(Math.hypot(y[0]-v[0]-x,y[1]-v[1]-k)/e,1/o,1/a),l/o,c/a)}else m?E=Vm(Math.abs(y[0]-v[0]-x),l,1)/o:C=Vm(Math.abs(y[1]-v[1]-k),c,1)/a;const T=xg._round(o*E),P=xg._round(a*C);_=h(...f(T,P));const I=w-_[0],R=b-_[1];gg(Dw,this)||mg(Dw,this,[this.x,this.y,this.width,this.height]),this.width=T,this.height=P,this.x=I,this.y=R,this.setDims(),this.fixAndSetPosition(),this._onResizing()}function tb(){var e;mg(Pw,this,{savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height}),null===(e=gg(bw,this))||void 0===e||e.toggle(!1),this.parent.togglePointerEvents(!1)}function nb(e,t,n){let i=n/t*.7+1-.7;if(1===i)return;const r=pg(qw,this,Xw).call(this,this.rotation),s=(e,t)=>[r[0]*e+r[2]*t,r[1]*e+r[3]*t],[o,a]=this.parentDimensions,l=this.x,c=this.y,u=this.width,h=this.height,d=xg.MIN_SIZE/o,p=xg.MIN_SIZE/a;i=Math.max(Math.min(i,1/u,1/h),d/u,p/h);const f=xg._round(u*i),g=xg._round(h*i);if(f===u&&g===h)return;gg(Dw,this)||mg(Dw,this,[l,c,u,h]);const m=s(u/2,h/2),v=xg._round(l+m[0]),y=xg._round(c+m[1]),_=s(f/2,g/2);this.x=v-_[0],this.y=y-_[1],this.width=f,this.height=g,this.setDims(),this.fixAndSetPosition(),this._onResizing()}function ib(){var e;null===(e=gg(bw,this))||void 0===e||e.toggle(!0),this.parent.togglePointerEvents(!0),pg(qw,this,Zw).call(this)}function rb(e){const{isMac:t}=Om.platform;e.ctrlKey&&!t||e.shiftKey||e.metaKey&&t?this.parent.toggleSelected(this):this.parent.setSelected(this)}function sb(e){const{isSelected:t}=this;this._uiManager.setUpDragSession();let n=!1;const i=new AbortController,r=this._uiManager.combinedSignal(i),s={capture:!0,passive:!1,signal:r},o=e=>{i.abort(),mg(Cw,this,null),mg(Nw,this,!1),this._uiManager.endDragSession()||pg(qw,this,rb).call(this,e),n&&this._onStopDragging()};t&&(mg(Bw,this,e.clientX),mg(Ww,this,e.clientY),mg(Cw,this,e.pointerId),mg(Sw,this,e.pointerType),window.addEventListener("pointermove",e=>{n||(n=!0,this._uiManager.toggleComment(this,!0,!1),this._onStartDragging());const{clientX:t,clientY:i,pointerId:r}=e;if(r!==gg(Cw,this))return void rv(e);const[s,o]=this.screenToPageTranslation(t-gg(Bw,this),i-gg(Ww,this));mg(Bw,this,t),mg(Ww,this,i),this._uiManager.dragSelectedEditors(s,o)},s),window.addEventListener("touchmove",rv,s),window.addEventListener("pointerdown",e=>{e.pointerType===gg(Sw,this)&&(gg(zw,this)||e.isPrimary)&&o(e),rv(e)},s));const a=e=>{gg(Cw,this)&&gg(Cw,this)!==e.pointerId?rv(e):o(e)};window.addEventListener("pointerup",a,{signal:r}),window.addEventListener("blur",a,{signal:r})}function ob(){if(gg(Rw,this)||!this.div)return;mg(Rw,this,new AbortController);const e=this._uiManager.combinedSignal(gg(Rw,this));this.div.addEventListener("focusin",this.focusin.bind(this),{signal:e}),this.div.addEventListener("focusout",this.focusout.bind(this),{signal:e})}function ab(e){xg._resizerKeyboardManager.exec(this,e)}function lb(e){var t;gg(Fw,this)&&(null===(t=e.relatedTarget)||void 0===t?void 0:t.parentNode)!==gg(Aw,this)&&pg(qw,this,hb).call(this)}function cb(e){mg(Mw,this,gg(Fw,this)?e:"")}function ub(e){if(gg(ww,this))for(const t of gg(ww,this))t.tabIndex=e}function hb(){mg(Fw,this,!1),pg(qw,this,ub).call(this,-1),pg(qw,this,Zw).call(this)}xg=Gw,Tt(Gw,"_l10n",null),Tt(Gw,"_l10nResizer",null),Tt(Gw,"_borderLineWidth",-1),Tt(Gw,"_colorManager",new ay),Tt(Gw,"_zIndex",1),Tt(Gw,"_telemetryTimeout",1e3);class db extends Gw{constructor(e){super(e),this.annotationElementId=e.annotationElementId,this.deleted=!0}serialize(){return this.serializeDeleted()}}const pb=3285377520,fb=4294901760,gb=65535;class mb{constructor(e){this.h1=e?4294967295&e:pb,this.h2=e?4294967295&e:pb}update(e){let t,n;if("string"===typeof e){t=new Uint8Array(2*e.length),n=0;for(let i=0,r=e.length;i<r;i++){const r=e.charCodeAt(i);r<=255?t[n++]=r:(t[n++]=r>>>8,t[n++]=255&r)}}else{if(!ArrayBuffer.isView(e))throw new Error("Invalid data format, must be a string or TypedArray.");t=e.slice(),n=t.byteLength}const i=n>>2,r=n-4*i,s=new Uint32Array(t.buffer,0,i);let o=0,a=0,l=this.h1,c=this.h2;const u=3432918353,h=461845907,d=11601,p=13715;for(let f=0;f<i;f++)1&f?(o=s[f],o=o*u&fb|o*d&gb,o=o<<15|o>>>17,o=o*h&fb|o*p&gb,l^=o,l=l<<13|l>>>19,l=5*l+3864292196):(a=s[f],a=a*u&fb|a*d&gb,a=a<<15|a>>>17,a=a*h&fb|a*p&gb,c^=a,c=c<<13|c>>>19,c=5*c+3864292196);switch(o=0,r){case 3:o^=t[4*i+2]<<16;case 2:o^=t[4*i+1]<<8;case 1:o^=t[4*i],o=o*u&fb|o*d&gb,o=o<<15|o>>>17,o=o*h&fb|o*p&gb,1&i?l^=o:c^=o}this.h1=l,this.h2=c}hexdigest(){let e=this.h1,t=this.h2;return e^=t>>>1,e=3981806797*e&fb|36045*e&gb,t=4283543511*t&fb|(2950163797*(t<<16|e>>>16)&fb)>>>16,e^=t>>>1,e=444984403*e&fb|60499*e&gb,t=3301882366*t&fb|(3120437893*(t<<16|e>>>16)&fb)>>>16,e^=t>>>1,(e>>>0).toString(16).padStart(8,"0")+(t>>>0).toString(16).padStart(8,"0")}}const vb=Object.freeze({map:null,hash:"",transfer:void 0});var yb=new WeakMap,_b=new WeakMap,wb=new WeakMap,bb=new WeakMap,xb=new WeakSet;class kb{constructor(){hg(this,xb),dg(this,yb,!1),dg(this,_b,null),dg(this,wb,null),dg(this,bb,new Map),this.onSetModified=null,this.onResetModified=null,this.onAnnotationEditor=null}getValue(e,t){const n=gg(bb,this).get(e);return void 0===n?t:Object.assign(t,n)}getRawValue(e){return gg(bb,this).get(e)}remove(e){const t=gg(bb,this).get(e);if(void 0!==t&&(t instanceof Gw&&gg(wb,this).delete(t.annotationElementId),gg(bb,this).delete(e),0===gg(bb,this).size&&this.resetModified(),"function"===typeof this.onAnnotationEditor)){for(const e of gg(bb,this).values())if(e instanceof Gw)return;this.onAnnotationEditor(null)}}setValue(e,t){const n=gg(bb,this).get(e);let i=!1;if(void 0!==n)for(const[r,s]of Object.entries(t))n[r]!==s&&(i=!0,n[r]=s);else i=!0,gg(bb,this).set(e,t);i&&pg(xb,this,Eb).call(this),t instanceof Gw&&((gg(wb,this)||mg(wb,this,new Map)).set(t.annotationElementId,t),"function"===typeof this.onAnnotationEditor&&this.onAnnotationEditor(t.constructor._type))}has(e){return gg(bb,this).has(e)}get size(){return gg(bb,this).size}resetModified(){gg(yb,this)&&(mg(yb,this,!1),"function"===typeof this.onResetModified&&this.onResetModified())}get print(){return new Sb(this)}get serializable(){if(0===gg(bb,this).size)return vb;const e=new Map,t=new mb,n=[],i=Object.create(null);let r=!1;for(const[s,o]of gg(bb,this)){const n=o instanceof Gw?o.serialize(!1,i):o;n&&(e.set(s,n),t.update("".concat(s,":").concat(JSON.stringify(n))),r||(r=!!n.bitmap))}if(r)for(const s of e.values())s.bitmap&&n.push(s.bitmap);return e.size>0?{map:e,hash:t.hexdigest(),transfer:n}:vb}get editorStats(){let e=null;const t=new Map;let n=0,i=0;for(const o of gg(bb,this).values()){var r;if(!(o instanceof Gw)){o.popup&&(o.popup.deleted?i+=1:n+=1);continue}o.isCommentDeleted?i+=1:o.hasEditedComment&&(n+=1);const a=o.telemetryFinalData;if(!a)continue;const{type:l}=a;t.has(l)||t.set(l,Object.getPrototypeOf(o).constructor),e||(e=Object.create(null));const c=(r=e)[l]||(r[l]=new Map);for(const[e,t]of Object.entries(a)){var s;if("type"===e)continue;let n=c.get(e);n||(n=new Map,c.set(e,n));const i=null!==(s=n.get(t))&&void 0!==s?s:0;n.set(t,i+1)}}if((i>0||n>0)&&(e||(e=Object.create(null)),e.comments={deleted:i,edited:n}),!e)return null;for(const[o,a]of t)e[o]=a.computeTelemetryFinalData(e[o]);return e}resetModifiedIds(){mg(_b,this,null)}updateEditor(e,t){var n;const i=null===(n=gg(wb,this))||void 0===n?void 0:n.get(e);return!!i&&(i.updateFromAnnotationLayer(t),!0)}getEditor(e){var t;return(null===(t=gg(wb,this))||void 0===t?void 0:t.get(e))||null}get modifiedIds(){if(gg(_b,this))return gg(_b,this);const e=[];if(gg(wb,this))for(const t of gg(wb,this).values())t.serialize()&&e.push(t.annotationElementId);return mg(_b,this,{ids:new Set(e),hash:e.join(",")})}[Symbol.iterator](){return gg(bb,this).entries()}}function Eb(){gg(yb,this)||(mg(yb,this,!0),"function"===typeof this.onSetModified&&this.onSetModified())}var Cb=new WeakMap;class Sb extends kb{constructor(e){super(),dg(this,Cb,void 0);const{map:t,hash:n,transfer:i}=e.serializable,r=structuredClone(t,i?{transfer:i}:null);mg(Cb,this,{map:r,hash:n,transfer:i})}get print(){bm("Should not call PrintAnnotationStorage.print")}get serializable(){return gg(Cb,this)}get modifiedIds(){return Cm(this,"modifiedIds",{ids:new Set,hash:""})}}var Ab=new WeakMap;class Tb{constructor(e){let{ownerDocument:t=globalThis.document,styleElement:n=null}=e;dg(this,Ab,new Set),this._document=t,this.nativeFontFaces=new Set,this.styleElement=null,this.loadingRequests=[],this.loadTestFontId=0}addNativeFontFace(e){this.nativeFontFaces.add(e),this._document.fonts.add(e)}removeNativeFontFace(e){this.nativeFontFaces.delete(e),this._document.fonts.delete(e)}insertRule(e){this.styleElement||(this.styleElement=this._document.createElement("style"),this._document.documentElement.getElementsByTagName("head")[0].append(this.styleElement));const t=this.styleElement.sheet;t.insertRule(e,t.cssRules.length)}clear(){for(const e of this.nativeFontFaces)this._document.fonts.delete(e);this.nativeFontFaces.clear(),gg(Ab,this).clear(),this.styleElement&&(this.styleElement.remove(),this.styleElement=null)}async loadSystemFont(e){let{systemFontInfo:t,disableFontFace:n,_inspectFont:i}=e;if(t&&!gg(Ab,this).has(t.loadedName)){if(xm(!n,"loadSystemFont shouldn't be called when `disableFontFace` is set."),this.isFontLoadingAPISupported){const{loadedName:e,src:n,style:s}=t,o=new FontFace(e,n,s);this.addNativeFontFace(o);try{await o.load(),gg(Ab,this).add(e),null===i||void 0===i||i(t)}catch(r){wm("Cannot load system font: ".concat(t.baseFontName,", installing it could help to improve PDF rendering.")),this.removeNativeFontFace(o)}return}bm("Not implemented: loadSystemFont without the Font Loading API.")}}async bind(e){if(e.attached||e.missingFile&&!e.systemFontInfo)return;if(e.attached=!0,e.systemFontInfo)return void await this.loadSystemFont(e);if(this.isFontLoadingAPISupported){const t=e.createNativeFontFace();if(t){this.addNativeFontFace(t);try{await t.loaded}catch(n){throw wm("Failed to load font '".concat(t.family,"': '").concat(n,"'.")),e.disableFontFace=!0,n}}return}const t=e.createFontFaceRule();if(t){if(this.insertRule(t),this.isSyncFontLoadingSupported)return;await new Promise(t=>{const n=this._queueLoadingCallback(t);this._prepareFontLoadEvent(e,n)})}}get isFontLoadingAPISupported(){var e;return Cm(this,"isFontLoadingAPISupported",!(null===(e=this._document)||void 0===e||!e.fonts))}get isSyncFontLoadingSupported(){return Cm(this,"isSyncFontLoadingSupported",Lg||Om.platform.isFirefox)}_queueLoadingCallback(e){const{loadingRequests:t}=this,n={done:!1,complete:function(){for(xm(!n.done,"completeRequest() cannot be called twice."),n.done=!0;t.length>0&&t[0].done;){const e=t.shift();setTimeout(e.callback,0)}},callback:e};return t.push(n),n}get _loadTestFont(){return Cm(this,"_loadTestFont",atob("T1RUTwALAIAAAwAwQ0ZGIDHtZg4AAAOYAAAAgUZGVE1lkzZwAAAEHAAAABxHREVGABQAFQAABDgAAAAeT1MvMlYNYwkAAAEgAAAAYGNtYXABDQLUAAACNAAAAUJoZWFk/xVFDQAAALwAAAA2aGhlYQdkA+oAAAD0AAAAJGhtdHgD6AAAAAAEWAAAAAZtYXhwAAJQAAAAARgAAAAGbmFtZVjmdH4AAAGAAAAAsXBvc3T/hgAzAAADeAAAACAAAQAAAAEAALZRFsRfDzz1AAsD6AAAAADOBOTLAAAAAM4KHDwAAAAAA+gDIQAAAAgAAgAAAAAAAAABAAADIQAAAFoD6AAAAAAD6AABAAAAAAAAAAAAAAAAAAAAAQAAUAAAAgAAAAQD6AH0AAUAAAKKArwAAACMAooCvAAAAeAAMQECAAACAAYJAAAAAAAAAAAAAQAAAAAAAAAAAAAAAFBmRWQAwAAuAC4DIP84AFoDIQAAAAAAAQAAAAAAAAAAACAAIAABAAAADgCuAAEAAAAAAAAAAQAAAAEAAAAAAAEAAQAAAAEAAAAAAAIAAQAAAAEAAAAAAAMAAQAAAAEAAAAAAAQAAQAAAAEAAAAAAAUAAQAAAAEAAAAAAAYAAQAAAAMAAQQJAAAAAgABAAMAAQQJAAEAAgABAAMAAQQJAAIAAgABAAMAAQQJAAMAAgABAAMAAQQJAAQAAgABAAMAAQQJAAUAAgABAAMAAQQJAAYAAgABWABYAAAAAAAAAwAAAAMAAAAcAAEAAAAAADwAAwABAAAAHAAEACAAAAAEAAQAAQAAAC7//wAAAC7////TAAEAAAAAAAABBgAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAD/gwAyAAAAAQAAAAAAAAAAAAAAAAAAAAABAAQEAAEBAQJYAAEBASH4DwD4GwHEAvgcA/gXBIwMAYuL+nz5tQXkD5j3CBLnEQACAQEBIVhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYAAABAQAADwACAQEEE/t3Dov6fAH6fAT+fPp8+nwHDosMCvm1Cvm1DAz6fBQAAAAAAAABAAAAAMmJbzEAAAAAzgTjFQAAAADOBOQpAAEAAAAAAAAADAAUAAQAAAABAAAAAgABAAAAAAAAAAAD6AAAAAAAAA=="))}_prepareFontLoadEvent(e,t){function n(e,t){return e.charCodeAt(t)<<24|e.charCodeAt(t+1)<<16|e.charCodeAt(t+2)<<8|255&e.charCodeAt(t+3)}function i(e,t,n,i){return e.substring(0,t)+i+e.substring(t+n)}let r,s;const o=this._document.createElement("canvas");o.width=1,o.height=1;const a=o.getContext("2d");let l=0;const c="lt".concat(Date.now()).concat(this.loadTestFontId++);let u=this._loadTestFont;u=i(u,976,c.length,c);const h=1482184792;let d=n(u,16);for(r=0,s=c.length-3;r<s;r+=4)d=d-h+n(c,r)|0;var p;r<c.length&&(d=d-h+n(c+"XXX",r)|0),u=i(u,16,4,(p=d,String.fromCharCode(p>>24&255,p>>16&255,p>>8&255,255&p)));const f="url(data:font/opentype;base64,".concat(btoa(u),");"),g='@font-face {font-family:"'.concat(c,'";src:').concat(f,"}");this.insertRule(g);const m=this._document.createElement("div");m.style.visibility="hidden",m.style.width=m.style.height="10px",m.style.position="absolute",m.style.top=m.style.left="0px";for(const v of[e.loadedName,c]){const e=this._document.createElement("span");e.textContent="Hi",e.style.fontFamily=v,m.append(e)}this._document.body.append(m),function e(t,n){if(++l>30)return wm("Load test font never loaded."),void n();a.font="30px "+t,a.fillText(".",0,20),a.getImageData(0,0,1,1).data[3]>0?n():setTimeout(e.bind(null,t,n))}(c,()=>{m.remove(),t.complete()})}}var Pb=new WeakMap;class Ib{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2?arguments[2]:void 0,i=arguments.length>3?arguments[3]:void 0;dg(this,Pb,void 0),this.compiledGlyphs=Object.create(null),mg(Pb,this,e),this._inspectFont=t,n&&Object.assign(this,n),i&&(this.charProcOperatorList=i)}createNativeFontFace(){var e;if(!this.data||this.disableFontFace)return null;let t;if(this.cssFontInfo){const e={weight:this.cssFontInfo.fontWeight};this.cssFontInfo.italicAngle&&(e.style="oblique ".concat(this.cssFontInfo.italicAngle,"deg")),t=new FontFace(this.cssFontInfo.fontFamily,this.data,e)}else t=new FontFace(this.loadedName,this.data,{});return null===(e=this._inspectFont)||void 0===e||e.call(this,this),t}createFontFaceRule(){var e;if(!this.data||this.disableFontFace)return null;const t="url(data:".concat(this.mimetype,";base64,").concat(qm(this.data),");");let n;if(this.cssFontInfo){let e="font-weight: ".concat(this.cssFontInfo.fontWeight,";");this.cssFontInfo.italicAngle&&(e+="font-style: oblique ".concat(this.cssFontInfo.italicAngle,"deg;")),n='@font-face {font-family:"'.concat(this.cssFontInfo.fontFamily,'";').concat(e,"src:").concat(t,"}")}else n='@font-face {font-family:"'.concat(this.loadedName,'";src:').concat(t,"}");return null===(e=this._inspectFont)||void 0===e||e.call(this,this,t),n}getPathGenerator(e,t){if(void 0!==this.compiledGlyphs[t])return this.compiledGlyphs[t];const n=this.loadedName+"_path_"+t;let i;try{i=e.get(n)}catch(s){wm('getPathGenerator - ignoring character: "'.concat(s,'".'))}const r=new Path2D(i||"");return this.fontExtraProperties||e.delete(n),this.compiledGlyphs[t]=r}get black(){return gg(Pb,this).black}get bold(){return gg(Pb,this).bold}get disableFontFace(){var e;return null!==(e=gg(Pb,this).disableFontFace)&&void 0!==e&&e}get fontExtraProperties(){var e;return null!==(e=gg(Pb,this).fontExtraProperties)&&void 0!==e&&e}get isInvalidPDFjsFont(){return gg(Pb,this).isInvalidPDFjsFont}get isType3Font(){return gg(Pb,this).isType3Font}get italic(){return gg(Pb,this).italic}get missingFile(){return gg(Pb,this).missingFile}get remeasure(){return gg(Pb,this).remeasure}get vertical(){return gg(Pb,this).vertical}get ascent(){return gg(Pb,this).ascent}get defaultWidth(){return gg(Pb,this).defaultWidth}get descent(){return gg(Pb,this).descent}get bbox(){return gg(Pb,this).bbox}get fontMatrix(){return gg(Pb,this).fontMatrix}get fallbackName(){return gg(Pb,this).fallbackName}get loadedName(){return gg(Pb,this).loadedName}get mimetype(){return gg(Pb,this).mimetype}get name(){return gg(Pb,this).name}get data(){return gg(Pb,this).data}clearData(){gg(Pb,this).clearData()}get cssFontInfo(){return gg(Pb,this).cssFontInfo}get systemFontInfo(){return gg(Pb,this).systemFontInfo}get defaultVMetrics(){return gg(Pb,this).defaultVMetrics}}function Rb(e){if("string"!==typeof e)return null;if(e.endsWith("/"))return e;throw new Error('Invalid factory url: "'.concat(e,'" must include trailing slash.'))}const Mb=e=>"object"===typeof e&&Number.isInteger(null===e||void 0===e?void 0:e.num)&&e.num>=0&&Number.isInteger(null===e||void 0===e?void 0:e.gen)&&e.gen>=0,Nb=function(e,t,n){if(!Array.isArray(n)||n.length<2)return!1;const[i,r,...s]=n;if(!e(i)&&!Number.isInteger(i))return!1;if(!t(r))return!1;const o=s.length;let a=!0;switch(r.name){case"XYZ":if(o<2||o>3)return!1;break;case"Fit":case"FitB":return 0===o;case"FitH":case"FitBH":case"FitV":case"FitBV":if(o>1)return!1;break;case"FitR":if(4!==o)return!1;a=!1;break;default:return!1}for(const l of s)if(!("number"===typeof l||a&&null===l))return!1;return!0}.bind(null,Mb,e=>"object"===typeof e&&"string"===typeof(null===e||void 0===e?void 0:e.name));var Db=new WeakMap,Ob=new WeakMap;class Lb{constructor(){dg(this,Db,new Map),dg(this,Ob,Promise.resolve())}postMessage(e,t){const n={data:structuredClone(e,t?{transfer:t}:null)};gg(Ob,this).then(()=>{for(const[e]of gg(Db,this))e.call(this,n)})}addEventListener(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,i=null;if((null===n||void 0===n?void 0:n.signal)instanceof AbortSignal){const{signal:r}=n;if(r.aborted)return void wm("LoopbackPort - cannot use an `aborted` signal.");const s=()=>this.removeEventListener(e,t);i=()=>r.removeEventListener("abort",s),r.addEventListener("abort",s)}gg(Db,this).set(t,i)}removeEventListener(e,t){const n=gg(Db,this).get(t);null===n||void 0===n||n(),gg(Db,this).delete(t)}terminate(){for(const[,e]of gg(Db,this))null===e||void 0===e||e();gg(Db,this).clear()}}const Fb=1,jb=2,Bb=1,Wb=2,Ub=3,zb=4,Hb=5,Vb=6,qb=7,Gb=8;function Kb(){}function Yb(e){if(e instanceof Mm||e instanceof Pm||e instanceof Am||e instanceof Im||e instanceof Tm)return e;switch(e instanceof Error||"object"===typeof e&&null!==e||bm('wrapReason: Expected "reason" to be a (possibly cloned) Error.'),e.name){case"AbortException":return new Mm(e.message);case"InvalidPDFException":return new Pm(e.message);case"PasswordException":return new Am(e.message,e.code);case"ResponseException":return new Im(e.message,e.status,e.missing);case"UnknownErrorException":return new Tm(e.message,e.details)}return new Tm(e.message,e.toString())}var Xb=new WeakMap,Qb=new WeakSet;class $b{constructor(e,t,n){hg(this,Qb),dg(this,Xb,new AbortController),this.sourceName=e,this.targetName=t,this.comObj=n,this.callbackId=1,this.streamId=1,this.streamSinks=Object.create(null),this.streamControllers=Object.create(null),this.callbackCapabilities=Object.create(null),this.actionHandler=Object.create(null),n.addEventListener("message",pg(Qb,this,Jb).bind(this),{signal:gg(Xb,this).signal})}on(e,t){const n=this.actionHandler;if(n[e])throw new Error('There is already an actionName called "'.concat(e,'"'));n[e]=t}send(e,t,n){this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:e,data:t},n)}sendWithPromise(e,t,n){const i=this.callbackId++,r=Promise.withResolvers();this.callbackCapabilities[i]=r;try{this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:e,callbackId:i,data:t},n)}catch(s){r.reject(s)}return r.promise}sendWithStream(e,t,n,i){const r=this.streamId++,s=this.sourceName,o=this.targetName,a=this.comObj;return new ReadableStream({start:n=>{const l=Promise.withResolvers();return this.streamControllers[r]={controller:n,startCall:l,pullCall:null,cancelCall:null,isClosed:!1},a.postMessage({sourceName:s,targetName:o,action:e,streamId:r,data:t,desiredSize:n.desiredSize},i),l.promise},pull:e=>{const t=Promise.withResolvers();return this.streamControllers[r].pullCall=t,a.postMessage({sourceName:s,targetName:o,stream:Vb,streamId:r,desiredSize:e.desiredSize}),t.promise},cancel:e=>{xm(e instanceof Error,"cancel must have a valid reason");const t=Promise.withResolvers();return this.streamControllers[r].cancelCall=t,this.streamControllers[r].isClosed=!0,a.postMessage({sourceName:s,targetName:o,stream:Bb,streamId:r,reason:Yb(e)}),t.promise}},n)}destroy(){var e;null===(e=gg(Xb,this))||void 0===e||e.abort(),mg(Xb,this,null)}}function Jb(e){let{data:t}=e;if(t.targetName!==this.sourceName)return;if(t.stream)return void pg(Qb,this,ex).call(this,t);if(t.callback){const e=t.callbackId,n=this.callbackCapabilities[e];if(!n)throw new Error("Cannot resolve callback ".concat(e));if(delete this.callbackCapabilities[e],t.callback===Fb)n.resolve(t.data);else{if(t.callback!==jb)throw new Error("Unexpected callback case");n.reject(Yb(t.reason))}return}const n=this.actionHandler[t.action];if(!n)throw new Error("Unknown action from worker: ".concat(t.action));if(t.callbackId){const e=this.sourceName,i=t.sourceName,r=this.comObj;return void Promise.try(n,t.data).then(function(n){r.postMessage({sourceName:e,targetName:i,callback:Fb,callbackId:t.callbackId,data:n})},function(n){r.postMessage({sourceName:e,targetName:i,callback:jb,callbackId:t.callbackId,reason:Yb(n)})})}t.streamId?pg(Qb,this,Zb).call(this,t):n(t.data)}function Zb(e){const t=e.streamId,n=this.sourceName,i=e.sourceName,r=this.comObj,s=this,o=this.actionHandler[e.action],a={enqueue(e){let s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,o=arguments.length>2?arguments[2]:void 0;if(this.isCancelled)return;const a=this.desiredSize;this.desiredSize-=s,a>0&&this.desiredSize<=0&&(this.sinkCapability=Promise.withResolvers(),this.ready=this.sinkCapability.promise),r.postMessage({sourceName:n,targetName:i,stream:zb,streamId:t,chunk:e},o)},close(){this.isCancelled||(this.isCancelled=!0,r.postMessage({sourceName:n,targetName:i,stream:Ub,streamId:t}),delete s.streamSinks[t])},error(e){xm(e instanceof Error,"error must have a valid reason"),this.isCancelled||(this.isCancelled=!0,r.postMessage({sourceName:n,targetName:i,stream:Hb,streamId:t,reason:Yb(e)}))},sinkCapability:Promise.withResolvers(),onPull:null,onCancel:null,isCancelled:!1,desiredSize:e.desiredSize,ready:null};a.sinkCapability.resolve(),a.ready=a.sinkCapability.promise,this.streamSinks[t]=a,Promise.try(o,e.data,a).then(function(){r.postMessage({sourceName:n,targetName:i,stream:Gb,streamId:t,success:!0})},function(e){r.postMessage({sourceName:n,targetName:i,stream:Gb,streamId:t,reason:Yb(e)})})}function ex(e){const t=e.streamId,n=this.sourceName,i=e.sourceName,r=this.comObj,s=this.streamControllers[t],o=this.streamSinks[t];switch(e.stream){case Gb:e.success?s.startCall.resolve():s.startCall.reject(Yb(e.reason));break;case qb:e.success?s.pullCall.resolve():s.pullCall.reject(Yb(e.reason));break;case Vb:if(!o){r.postMessage({sourceName:n,targetName:i,stream:qb,streamId:t,success:!0});break}o.desiredSize<=0&&e.desiredSize>0&&o.sinkCapability.resolve(),o.desiredSize=e.desiredSize,Promise.try(o.onPull||Kb).then(function(){r.postMessage({sourceName:n,targetName:i,stream:qb,streamId:t,success:!0})},function(e){r.postMessage({sourceName:n,targetName:i,stream:qb,streamId:t,reason:Yb(e)})});break;case zb:if(xm(s,"enqueue should have stream controller"),s.isClosed)break;s.controller.enqueue(e.chunk);break;case Ub:if(xm(s,"close should have stream controller"),s.isClosed)break;s.isClosed=!0,s.controller.close(),pg(Qb,this,tx).call(this,s,t);break;case Hb:xm(s,"error should have stream controller"),s.controller.error(Yb(e.reason)),pg(Qb,this,tx).call(this,s,t);break;case Wb:e.success?s.cancelCall.resolve():s.cancelCall.reject(Yb(e.reason)),pg(Qb,this,tx).call(this,s,t);break;case Bb:if(!o)break;const a=Yb(e.reason);Promise.try(o.onCancel||Kb,a).then(function(){r.postMessage({sourceName:n,targetName:i,stream:Wb,streamId:t,success:!0})},function(e){r.postMessage({sourceName:n,targetName:i,stream:Wb,streamId:t,reason:Yb(e)})}),o.sinkCapability.reject(a),o.isCancelled=!0,delete this.streamSinks[t];break;default:throw new Error("Unexpected stream case")}}async function tx(e,t){var n,i,r;await Promise.allSettled([null===(n=e.startCall)||void 0===n?void 0:n.promise,null===(i=e.pullCall)||void 0===i?void 0:i.promise,null===(r=e.cancelCall)||void 0===r?void 0:r.promise]),delete this.streamControllers[t]}var nx=new WeakMap;class ix{constructor(e){let{enableHWA:t=!1}=e;dg(this,nx,!1),mg(nx,this,t)}create(e,t){if(e<=0||t<=0)throw new Error("Invalid canvas size");const n=this._createCanvas(e,t);return{canvas:n,context:n.getContext("2d",{willReadFrequently:!gg(nx,this)})}}reset(e,t,n){if(!e.canvas)throw new Error("Canvas is not specified");if(t<=0||n<=0)throw new Error("Invalid canvas size");e.canvas.width=t,e.canvas.height=n}destroy(e){if(!e.canvas)throw new Error("Canvas is not specified");e.canvas.width=0,e.canvas.height=0,e.canvas=null,e.context=null}_createCanvas(e,t){bm("Abstract method `_createCanvas` called.")}}class rx extends ix{constructor(e){let{ownerDocument:t=globalThis.document,enableHWA:n=!1}=e;super({enableHWA:n}),this._document=t}_createCanvas(e,t){const n=this._document.createElement("canvas");return n.width=e,n.height=t,n}}class sx{constructor(e){let{baseUrl:t=null,isCompressed:n=!0}=e;this.baseUrl=t,this.isCompressed=n}async fetch(e){let{name:t}=e;if(!this.baseUrl)throw new Error("Ensure that the `cMapUrl` and `cMapPacked` API parameters are provided.");if(!t)throw new Error("CMap name must be specified.");const n=this.baseUrl+t+(this.isCompressed?".bcmap":"");return this._fetch(n).then(e=>({cMapData:e,isCompressed:this.isCompressed})).catch(e=>{throw new Error("Unable to load ".concat(this.isCompressed?"binary ":"","CMap at: ").concat(n))})}async _fetch(e){bm("Abstract method `_fetch` called.")}}class ox extends sx{async _fetch(e){const t=await Qm(e,this.isCompressed?"arraybuffer":"text");return t instanceof ArrayBuffer?new Uint8Array(t):Dm(t)}}class ax{addFilter(e){return"none"}addHCMFilter(e,t){return"none"}addAlphaFilter(e){return"none"}addLuminosityFilter(e){return"none"}addHighlightHCMFilter(e,t,n,i,r){return"none"}destroy(){}}var lx=new WeakMap,cx=new WeakMap,ux=new WeakMap,hx=new WeakMap,dx=new WeakMap,px=new WeakMap,fx=new WeakMap,gx=new WeakSet;class mx extends ax{constructor(e){let{docId:t,ownerDocument:n=globalThis.document}=e;super(),hg(this,gx),dg(this,lx,void 0),dg(this,cx,void 0),dg(this,ux,void 0),dg(this,hx,void 0),dg(this,dx,void 0),dg(this,px,void 0),dg(this,fx,0),mg(hx,this,t),mg(dx,this,n)}addFilter(e){var t,n;if(!e)return"none";let i=fg(gx,this,vx).get(e);if(i)return i;const[r,s,o]=pg(gx,this,wx).call(this,e),a=1===e.length?r:"".concat(r).concat(s).concat(o);if(i=fg(gx,this,vx).get(a),i)return fg(gx,this,vx).set(e,i),i;const l="g_".concat(gg(hx,this),"_transfer_map_").concat((mg(fx,this,(t=gg(fx,this),n=t++,t)),n)),c=pg(gx,this,bx).call(this,l);fg(gx,this,vx).set(e,c),fg(gx,this,vx).set(a,c);const u=pg(gx,this,Ex).call(this,l);return pg(gx,this,Sx).call(this,r,s,o,u),c}addHCMFilter(e,t){var n;const i="".concat(e,"-").concat(t),r="base";let s=fg(gx,this,yx).get(r);if((null===(n=s)||void 0===n?void 0:n.key)===i)return s.url;var o;s?(null===(o=s.filter)||void 0===o||o.remove(),s.key=i,s.url="none",s.filter=null):(s={key:i,url:"none",filter:null},fg(gx,this,yx).set(r,s));if(!e||!t)return s.url;const a=pg(gx,this,Tx).call(this,e);e=Fm.makeHexColor(...a);const l=pg(gx,this,Tx).call(this,t);if(t=Fm.makeHexColor(...l),fg(gx,this,_x).style.color="","#000000"===e&&"#ffffff"===t||e===t)return s.url;const c=new Array(256);for(let f=0;f<=255;f++){const e=f/255;c[f]=e<=.03928?e/12.92:((e+.055)/1.055)**2.4}const u=c.join(","),h="g_".concat(gg(hx,this),"_hcm_filter"),d=s.filter=pg(gx,this,Ex).call(this,h);pg(gx,this,Sx).call(this,u,u,u,d),pg(gx,this,kx).call(this,d);const p=(e,t)=>{const n=a[e]/255,i=l[e]/255,r=new Array(t+1);for(let s=0;s<=t;s++)r[s]=n+s/t*(i-n);return r.join(",")};return pg(gx,this,Sx).call(this,p(0,5),p(1,5),p(2,5),d),s.url=pg(gx,this,bx).call(this,h),s.url}addAlphaFilter(e){var t,n;let i=fg(gx,this,vx).get(e);if(i)return i;const[r]=pg(gx,this,wx).call(this,[e]),s="alpha_".concat(r);if(i=fg(gx,this,vx).get(s),i)return fg(gx,this,vx).set(e,i),i;const o="g_".concat(gg(hx,this),"_alpha_map_").concat((mg(fx,this,(t=gg(fx,this),n=t++,t)),n)),a=pg(gx,this,bx).call(this,o);fg(gx,this,vx).set(e,a),fg(gx,this,vx).set(s,a);const l=pg(gx,this,Ex).call(this,o);return pg(gx,this,Ax).call(this,r,l),a}addLuminosityFilter(e){var t,n;let i,r,s=fg(gx,this,vx).get(e||"luminosity");if(s)return s;if(e?([i]=pg(gx,this,wx).call(this,[e]),r="luminosity_".concat(i)):r="luminosity",s=fg(gx,this,vx).get(r),s)return fg(gx,this,vx).set(e,s),s;const o="g_".concat(gg(hx,this),"_luminosity_map_").concat((mg(fx,this,(t=gg(fx,this),n=t++,t)),n)),a=pg(gx,this,bx).call(this,o);fg(gx,this,vx).set(e,a),fg(gx,this,vx).set(r,a);const l=pg(gx,this,Ex).call(this,o);return pg(gx,this,xx).call(this,l),e&&pg(gx,this,Ax).call(this,i,l),a}addHighlightHCMFilter(e,t,n,i,r){var s;const o="".concat(t,"-").concat(n,"-").concat(i,"-").concat(r);let a=fg(gx,this,yx).get(e);if((null===(s=a)||void 0===s?void 0:s.key)===o)return a.url;var l;a?(null===(l=a.filter)||void 0===l||l.remove(),a.key=o,a.url="none",a.filter=null):(a={key:o,url:"none",filter:null},fg(gx,this,yx).set(e,a));if(!t||!n)return a.url;const[c,u]=[t,n].map(pg(gx,this,Tx).bind(this));let h=Math.round(.2126*c[0]+.7152*c[1]+.0722*c[2]),d=Math.round(.2126*u[0]+.7152*u[1]+.0722*u[2]),[p,f]=[i,r].map(pg(gx,this,Tx).bind(this));d<h&&([h,d,p,f]=[d,h,f,p]),fg(gx,this,_x).style.color="";const g=(e,t,n)=>{const i=new Array(256),r=(d-h)/n,s=e/255,o=(t-e)/(255*n);let a=0;for(let l=0;l<=n;l++){const e=Math.round(h+l*r),t=s+l*o;for(let n=a;n<=e;n++)i[n]=t;a=e+1}for(let l=a;l<256;l++)i[l]=i[a-1];return i.join(",")},m="g_".concat(gg(hx,this),"_hcm_").concat(e,"_filter"),v=a.filter=pg(gx,this,Ex).call(this,m);return pg(gx,this,kx).call(this,v),pg(gx,this,Sx).call(this,g(p[0],f[0],5),g(p[1],f[1],5),g(p[2],f[2],5),v),a.url=pg(gx,this,bx).call(this,m),a.url}destroy(){var e,t,n,i;arguments.length>0&&void 0!==arguments[0]&&arguments[0]&&null!==(e=gg(px,this))&&void 0!==e&&e.size||(null===(t=gg(ux,this))||void 0===t||t.parentNode.parentNode.remove(),mg(ux,this,null),null===(n=gg(cx,this))||void 0===n||n.clear(),mg(cx,this,null),null===(i=gg(px,this))||void 0===i||i.clear(),mg(px,this,null),mg(fx,this,0))}}function vx(e){return gg(cx,e)||mg(cx,e,new Map)}function yx(e){return gg(px,e)||mg(px,e,new Map)}function _x(e){if(!gg(ux,e)){const t=gg(dx,e).createElement("div"),{style:n}=t;n.visibility="hidden",n.contain="strict",n.width=n.height=0,n.position="absolute",n.top=n.left=0,n.zIndex=-1;const i=gg(dx,e).createElementNS(Ym,"svg");i.setAttribute("width",0),i.setAttribute("height",0),mg(ux,e,gg(dx,e).createElementNS(Ym,"defs")),t.append(i),i.append(gg(ux,e)),gg(dx,e).body.append(t)}return gg(ux,e)}function wx(e){if(1===e.length){const t=e[0],n=new Array(256);for(let e=0;e<256;e++)n[e]=t[e]/255;const i=n.join(",");return[i,i,i]}const[t,n,i]=e,r=new Array(256),s=new Array(256),o=new Array(256);for(let a=0;a<256;a++)r[a]=t[a]/255,s[a]=n[a]/255,o[a]=i[a]/255;return[r.join(","),s.join(","),o.join(",")]}function bx(e){if(void 0===gg(lx,this)){mg(lx,this,"");const e=gg(dx,this).URL;e!==gg(dx,this).baseURI&&(Zm(e)?wm('#createUrl: ignore "data:"-URL for performance reasons.'):mg(lx,this,Em(e,"")))}return"url(".concat(gg(lx,this),"#").concat(e,")")}function xx(e){const t=gg(dx,this).createElementNS(Ym,"feColorMatrix");t.setAttribute("type","matrix"),t.setAttribute("values","0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.3 0.59 0.11 0 0"),e.append(t)}function kx(e){const t=gg(dx,this).createElementNS(Ym,"feColorMatrix");t.setAttribute("type","matrix"),t.setAttribute("values","0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0 0 0 1 0"),e.append(t)}function Ex(e){const t=gg(dx,this).createElementNS(Ym,"filter");return t.setAttribute("color-interpolation-filters","sRGB"),t.setAttribute("id",e),fg(gx,this,_x).append(t),t}function Cx(e,t,n){const i=gg(dx,this).createElementNS(Ym,t);i.setAttribute("type","discrete"),i.setAttribute("tableValues",n),e.append(i)}function Sx(e,t,n,i){const r=gg(dx,this).createElementNS(Ym,"feComponentTransfer");i.append(r),pg(gx,this,Cx).call(this,r,"feFuncR",e),pg(gx,this,Cx).call(this,r,"feFuncG",t),pg(gx,this,Cx).call(this,r,"feFuncB",n)}function Ax(e,t){const n=gg(dx,this).createElementNS(Ym,"feComponentTransfer");t.append(n),pg(gx,this,Cx).call(this,n,"feFuncA",e)}function Tx(e){return fg(gx,this,_x).style.color=e,av(getComputedStyle(fg(gx,this,_x)).getPropertyValue("color"))}class Px{constructor(e){let{baseUrl:t=null}=e;this.baseUrl=t}async fetch(e){let{filename:t}=e;if(!this.baseUrl)throw new Error("Ensure that the `standardFontDataUrl` API parameter is provided.");if(!t)throw new Error("Font filename must be specified.");const n="".concat(this.baseUrl).concat(t);return this._fetch(n).catch(e=>{throw new Error("Unable to load font data at: ".concat(n))})}async _fetch(e){bm("Abstract method `_fetch` called.")}}class Ix extends Px{async _fetch(e){const t=await Qm(e,"arraybuffer");return new Uint8Array(t)}}class Rx{constructor(e){let{baseUrl:t=null}=e;this.baseUrl=t}async fetch(e){let{filename:t}=e;if(!this.baseUrl)throw new Error("Ensure that the `wasmUrl` API parameter is provided.");if(!t)throw new Error("Wasm filename must be specified.");const n="".concat(this.baseUrl).concat(t);return this._fetch(n).catch(e=>{throw new Error("Unable to load wasm data at: ".concat(n))})}async _fetch(e){bm("Abstract method `_fetch` called.")}}class Mx extends Rx{async _fetch(e){const t=await Qm(e,"arraybuffer");return new Uint8Array(t)}}async function Nx(e){const t=process.getBuiltinModule("fs"),n=await t.promises.readFile(e);return new Uint8Array(n)}Lg&&wm("Please use the `legacy` build in Node.js environments.");class Dx extends ax{}class Ox extends ix{_createCanvas(e,t){return process.getBuiltinModule("module").createRequire("file:///C:/Users/berkay%20sonel/Desktop/project/rpbp/node_modules/pdfjs-dist/build/pdf.mjs")("@napi-rs/canvas").createCanvas(e,t)}}class Lx extends sx{async _fetch(e){return Nx(e)}}class Fx extends Px{async _fetch(e){return Nx(e)}}class jx extends Rx{async _fetch(e){return Nx(e)}}const Bx="__forcedDependency",{floor:Wx,ceil:Ux}=Math;function zx(e,t,n,i,r,s){e[4*t+0]=Math.min(e[4*t+0],n),e[4*t+1]=Math.min(e[4*t+1],i),e[4*t+2]=Math.max(e[4*t+2],r),e[4*t+3]=Math.max(e[4*t+3],s)}const Hx=new Uint32Array(new Uint8Array([255,255,0,0]).buffer)[0];var Vx=new WeakMap,qx=new WeakMap;class Gx{constructor(e,t){dg(this,Vx,void 0),dg(this,qx,void 0),mg(Vx,this,e),mg(qx,this,t)}get length(){return gg(Vx,this).length}isEmpty(e){return gg(Vx,this)[e]===Hx}minX(e){return gg(qx,this)[4*e+0]/256}minY(e){return gg(qx,this)[4*e+1]/256}maxX(e){return(gg(qx,this)[4*e+2]+1)/256}maxY(e){return(gg(qx,this)[4*e+3]+1)/256}}const Kx=(e,t)=>{if(!e)return;let n=e.get(t);return n||(n={dependencies:new Set,isRenderingOperation:!1},e.set(t,n)),n};var Yx=new WeakMap,Xx=new WeakMap,Qx=new WeakMap,$x=new WeakMap,Jx=new WeakMap,Zx=new WeakMap,ek=new WeakMap,tk=new WeakMap,nk=new WeakMap,ik=new WeakMap,rk=new WeakMap,sk=new WeakMap,ok=new WeakMap,ak=new WeakMap,lk=new WeakMap,ck=new WeakMap,uk=new WeakMap,hk=new WeakSet;class dk{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];hg(this,hk),dg(this,Yx,{__proto__:null}),dg(this,Xx,{__proto__:null,transform:[],moveText:[],sameLineText:[],[Bx]:[]}),dg(this,Qx,new Map),dg(this,$x,[]),dg(this,Jx,[]),dg(this,Zx,[[1,0,0,1,0,0]]),dg(this,ek,[-1/0,-1/0,1/0,1/0]),dg(this,tk,new Float64Array([1/0,1/0,-1/0,-1/0])),dg(this,nk,-1),dg(this,ik,new Set),dg(this,rk,new Map),dg(this,sk,new Map),dg(this,ok,void 0),dg(this,ak,void 0),dg(this,lk,void 0),dg(this,ck,void 0),dg(this,uk,void 0),mg(ok,this,e.width),mg(ak,this,e.height),pg(hk,this,pk).call(this,t),n&&mg(uk,this,new Map)}growOperationsCount(e){e>=gg(ck,this).length&&pg(hk,this,pk).call(this,e,gg(ck,this))}save(e){return mg(Yx,this,{__proto__:gg(Yx,this)}),mg(Xx,this,{__proto__:gg(Xx,this),transform:{__proto__:gg(Xx,this).transform},moveText:{__proto__:gg(Xx,this).moveText},sameLineText:{__proto__:gg(Xx,this).sameLineText},[Bx]:{__proto__:gg(Xx,this)[Bx]}}),mg(ek,this,{__proto__:gg(ek,this)}),gg($x,this).push(e),this}restore(e){const t=Object.getPrototypeOf(gg(Yx,this));if(null===t)return this;mg(Yx,this,t),mg(Xx,this,Object.getPrototypeOf(gg(Xx,this))),mg(ek,this,Object.getPrototypeOf(gg(ek,this)));const n=gg($x,this).pop();var i;void 0!==n&&(null===(i=Kx(gg(uk,this),e))||void 0===i||i.dependencies.add(n),gg(ck,this)[e]=gg(ck,this)[n]);return this}recordOpenMarker(e){return gg($x,this).push(e),this}getOpenMarker(){return 0===gg($x,this).length?null:gg($x,this).at(-1)}recordCloseMarker(e){const t=gg($x,this).pop();var n;void 0!==t&&(null===(n=Kx(gg(uk,this),e))||void 0===n||n.dependencies.add(t),gg(ck,this)[e]=gg(ck,this)[t]);return this}beginMarkedContent(e){return gg(Jx,this).push(e),this}endMarkedContent(e){const t=gg(Jx,this).pop();var n;void 0!==t&&(null===(n=Kx(gg(uk,this),e))||void 0===n||n.dependencies.add(t),gg(ck,this)[e]=gg(ck,this)[t]);return this}pushBaseTransform(e){return gg(Zx,this).push(Fm.multiplyByDOMMatrix(gg(Zx,this).at(-1),e.getTransform())),this}popBaseTransform(){return gg(Zx,this).length>1&&gg(Zx,this).pop(),this}recordSimpleData(e,t){return gg(Yx,this)[e]=t,this}recordIncrementalData(e,t){return gg(Xx,this)[e].push(t),this}resetIncrementalData(e,t){return gg(Xx,this)[e].length=0,this}recordNamedData(e,t){return gg(Qx,this).set(e,t),this}recordSimpleDataFromNamed(e,t,n){var i;gg(Yx,this)[e]=null!==(i=gg(Qx,this).get(t))&&void 0!==i?i:n}recordFutureForcedDependency(e,t){return this.recordIncrementalData(Bx,t),this}inheritSimpleDataAsFutureForcedDependencies(e){for(const t of e)t in gg(Yx,this)&&this.recordFutureForcedDependency(t,gg(Yx,this)[t]);return this}inheritPendingDependenciesAsFutureForcedDependencies(){for(const e of gg(ik,this))this.recordFutureForcedDependency(Bx,e);return this}resetBBox(e){return gg(nk,this)!==e&&(mg(nk,this,e),gg(tk,this)[0]=1/0,gg(tk,this)[1]=1/0,gg(tk,this)[2]=-1/0,gg(tk,this)[3]=-1/0),this}recordClipBox(e,t,n,i,r,s){const o=Fm.multiplyByDOMMatrix(gg(Zx,this).at(-1),t.getTransform()),a=[1/0,1/0,-1/0,-1/0];Fm.axialAlignedBoundingBox([n,r,i,s],o,a);const l=Fm.intersect(gg(ek,this),a);return l?(gg(ek,this)[0]=l[0],gg(ek,this)[1]=l[1],gg(ek,this)[2]=l[2],gg(ek,this)[3]=l[3]):(gg(ek,this)[0]=gg(ek,this)[1]=1/0,gg(ek,this)[2]=gg(ek,this)[3]=-1/0),this}recordBBox(e,t,n,i,r,s){const o=gg(ek,this);if(o[0]===1/0)return this;const a=Fm.multiplyByDOMMatrix(gg(Zx,this).at(-1),t.getTransform());if(o[0]===-1/0)return Fm.axialAlignedBoundingBox([n,r,i,s],a,gg(tk,this)),this;const l=[1/0,1/0,-1/0,-1/0];return Fm.axialAlignedBoundingBox([n,r,i,s],a,l),gg(tk,this)[0]=Math.min(gg(tk,this)[0],Math.max(l[0],o[0])),gg(tk,this)[1]=Math.min(gg(tk,this)[1],Math.max(l[1],o[1])),gg(tk,this)[2]=Math.max(gg(tk,this)[2],Math.min(l[2],o[2])),gg(tk,this)[3]=Math.max(gg(tk,this)[3],Math.min(l[3],o[3])),this}recordCharacterBBox(e,t,n){let i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,o=arguments.length>6?arguments[6]:void 0;const a=n.bbox;let l,c;if(a&&(l=a[2]!==a[0]&&a[3]!==a[1]&&gg(sk,this).get(n),!1!==l&&(c=[0,0,0,0],Fm.axialAlignedBoundingBox(a,n.fontMatrix,c),1===i&&0===r&&0===s||Fm.scaleMinMax([i,0,0,-i,r,s],c),l)))return this.recordBBox(e,t,c[0],c[2],c[1],c[3]);if(!o)return this.recordFullPageBBox(e);const u=o();return a&&c&&void 0===l&&(l=c[0]<=r-u.actualBoundingBoxLeft&&c[2]>=r+u.actualBoundingBoxRight&&c[1]<=s-u.actualBoundingBoxAscent&&c[3]>=s+u.actualBoundingBoxDescent,gg(sk,this).set(n,l),l)?this.recordBBox(e,t,c[0],c[2],c[1],c[3]):this.recordBBox(e,t,r-u.actualBoundingBoxLeft,r+u.actualBoundingBoxRight,s-u.actualBoundingBoxAscent,s+u.actualBoundingBoxDescent)}recordFullPageBBox(e){return gg(tk,this)[0]=Math.max(0,gg(ek,this)[0]),gg(tk,this)[1]=Math.max(0,gg(ek,this)[1]),gg(tk,this)[2]=Math.min(gg(ok,this),gg(ek,this)[2]),gg(tk,this)[3]=Math.min(gg(ak,this),gg(ek,this)[3]),this}getSimpleIndex(e){return gg(Yx,this)[e]}recordDependencies(e,t){const n=gg(ik,this),i=gg(Yx,this),r=gg(Xx,this);for(const s of t)s in gg(Yx,this)?n.add(i[s]):s in r&&r[s].forEach(n.add,n);return this}recordNamedDependency(e,t){return gg(Qx,this).has(t)&&gg(ik,this).add(gg(Qx,this).get(t)),this}recordOperation(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(this.recordDependencies(e,[Bx]),gg(uk,this)){const t=Kx(gg(uk,this),e),{dependencies:n}=t;gg(ik,this).forEach(n.add,n),gg($x,this).forEach(n.add,n),gg(Jx,this).forEach(n.add,n),n.delete(e),t.isRenderingOperation=!0}if(gg(nk,this)===e){const n=Wx(256*gg(tk,this)[0]/gg(ok,this)),i=Wx(256*gg(tk,this)[1]/gg(ak,this)),r=Ux(256*gg(tk,this)[2]/gg(ok,this)),s=Ux(256*gg(tk,this)[3]/gg(ak,this));zx(gg(lk,this),e,n,i,r,s);for(const t of gg(ik,this))t!==e&&zx(gg(lk,this),t,n,i,r,s);for(const t of gg($x,this))t!==e&&zx(gg(lk,this),t,n,i,r,s);for(const t of gg(Jx,this))t!==e&&zx(gg(lk,this),t,n,i,r,s);t||(gg(ik,this).clear(),mg(nk,this,-1))}return this}recordShowTextOperation(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const n=Array.from(gg(ik,this));this.recordOperation(e,t),this.recordIncrementalData("sameLineText",e);for(const i of n)this.recordIncrementalData("sameLineText",i);return this}bboxToClipBoxDropOperation(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return gg(nk,this)===e&&(mg(nk,this,-1),gg(ek,this)[0]=Math.max(gg(ek,this)[0],gg(tk,this)[0]),gg(ek,this)[1]=Math.max(gg(ek,this)[1],gg(tk,this)[1]),gg(ek,this)[2]=Math.min(gg(ek,this)[2],gg(tk,this)[2]),gg(ek,this)[3]=Math.min(gg(ek,this)[3],gg(tk,this)[3]),t||gg(ik,this).clear()),this}_takePendingDependencies(){const e=gg(ik,this);return mg(ik,this,new Set),e}_extractOperation(e){const t=gg(rk,this).get(e);return gg(rk,this).delete(e),t}_pushPendingDependencies(e){for(const t of e)gg(ik,this).add(t)}take(){return gg(sk,this).clear(),new Gx(gg(ck,this),gg(lk,this))}takeDebugMetadata(){return gg(uk,this)}}function pk(e,t){const n=new ArrayBuffer(4*e);mg(lk,this,new Uint8ClampedArray(n)),mg(ck,this,new Uint32Array(n)),t&&t.length>0?(gg(ck,this).set(t),gg(ck,this).fill(Hx,t.length)):gg(ck,this).fill(Hx)}var fk=new WeakMap,gk=new WeakMap,mk=new WeakMap,vk=new WeakMap,yk=new WeakMap;class _k{constructor(e,t,n){if(dg(this,fk,void 0),dg(this,gk,void 0),dg(this,mk,void 0),dg(this,vk,0),dg(this,yk,0),e instanceof _k&&gg(mk,e)===!!n)return e;mg(fk,this,e),mg(gk,this,t),mg(mk,this,!!n)}growOperationsCount(){throw new Error("Unreachable")}save(e){var t;return mg(yk,this,(t=gg(yk,this),t++,t)),gg(fk,this).save(gg(gk,this)),this}restore(e){var t;gg(yk,this)>0&&(gg(fk,this).restore(gg(gk,this)),mg(yk,this,(t=gg(yk,this),t--,t)));return this}recordOpenMarker(e){var t;return mg(vk,this,(t=gg(vk,this),t++,t)),this}getOpenMarker(){return gg(vk,this)>0?gg(gk,this):gg(fk,this).getOpenMarker()}recordCloseMarker(e){var t;return mg(vk,this,(t=gg(vk,this),t--,t)),this}beginMarkedContent(e){return this}endMarkedContent(e){return this}pushBaseTransform(e){return gg(fk,this).pushBaseTransform(e),this}popBaseTransform(){return gg(fk,this).popBaseTransform(),this}recordSimpleData(e,t){return gg(fk,this).recordSimpleData(e,gg(gk,this)),this}recordIncrementalData(e,t){return gg(fk,this).recordIncrementalData(e,gg(gk,this)),this}resetIncrementalData(e,t){return gg(fk,this).resetIncrementalData(e,gg(gk,this)),this}recordNamedData(e,t){return this}recordSimpleDataFromNamed(e,t,n){return gg(fk,this).recordSimpleDataFromNamed(e,t,gg(gk,this)),this}recordFutureForcedDependency(e,t){return gg(fk,this).recordFutureForcedDependency(e,gg(gk,this)),this}inheritSimpleDataAsFutureForcedDependencies(e){return gg(fk,this).inheritSimpleDataAsFutureForcedDependencies(e),this}inheritPendingDependenciesAsFutureForcedDependencies(){return gg(fk,this).inheritPendingDependenciesAsFutureForcedDependencies(),this}resetBBox(e){return gg(mk,this)||gg(fk,this).resetBBox(gg(gk,this)),this}recordClipBox(e,t,n,i,r,s){return gg(mk,this)||gg(fk,this).recordClipBox(gg(gk,this),t,n,i,r,s),this}recordBBox(e,t,n,i,r,s){return gg(mk,this)||gg(fk,this).recordBBox(gg(gk,this),t,n,i,r,s),this}recordCharacterBBox(e,t,n,i,r,s,o){return gg(mk,this)||gg(fk,this).recordCharacterBBox(gg(gk,this),t,n,i,r,s,o),this}recordFullPageBBox(e){return gg(mk,this)||gg(fk,this).recordFullPageBBox(gg(gk,this)),this}getSimpleIndex(e){return gg(fk,this).getSimpleIndex(e)}recordDependencies(e,t){return gg(fk,this).recordDependencies(gg(gk,this),t),this}recordNamedDependency(e,t){return gg(fk,this).recordNamedDependency(gg(gk,this),t),this}recordOperation(e){return gg(fk,this).recordOperation(gg(gk,this),!0),this}recordShowTextOperation(e){return gg(fk,this).recordShowTextOperation(gg(gk,this),!0),this}bboxToClipBoxDropOperation(e){return gg(mk,this)||gg(fk,this).bboxToClipBoxDropOperation(gg(gk,this),!0),this}take(){throw new Error("Unreachable")}takeDebugMetadata(){throw new Error("Unreachable")}}const wk=["path","transform","filter","strokeColor","strokeAlpha","lineWidth","lineCap","lineJoin","miterLimit","dash"],bk=["path","transform","filter","fillColor","fillAlpha","globalCompositeOperation","SMask"],xk=["transform","SMask","filter","fillAlpha","strokeAlpha","globalCompositeOperation"],kk=["filter","fillColor","fillAlpha"],Ek=["transform","leading","charSpacing","wordSpacing","hScale","textRise","moveText","textMatrix","font","fontObj","filter","fillColor","textRenderingMode","SMask","fillAlpha","strokeAlpha","globalCompositeOperation","sameLineText"],Ck=["transform"],Sk=["transform","fillColor"],Ak="Fill",Tk="Stroke",Pk="Shading";function Ik(e,t){if(!t)return;const n=t[2]-t[0],i=t[3]-t[1],r=new Path2D;r.rect(t[0],t[1],n,i),e.clip(r)}class Rk{isModifyingCurrentTransform(){return!1}getPattern(){bm("Abstract method `getPattern` called.")}}class Mk extends Rk{constructor(e){super(),this._type=e[1],this._bbox=e[2],this._colorStops=e[3],this._p0=e[4],this._p1=e[5],this._r0=e[6],this._r1=e[7],this.matrix=null}_createGradient(e){let t;"axial"===this._type?t=e.createLinearGradient(this._p0[0],this._p0[1],this._p1[0],this._p1[1]):"radial"===this._type&&(t=e.createRadialGradient(this._p0[0],this._p0[1],this._r0,this._p1[0],this._p1[1],this._r1));for(const n of this._colorStops)t.addColorStop(n[0],n[1]);return t}getPattern(e,t,n,i){let r;if(i===Tk||i===Ak){const s=t.current.getClippedPathBoundingBox(i,lv(e))||[0,0,0,0],o=Math.ceil(s[2]-s[0])||1,a=Math.ceil(s[3]-s[1])||1,l=t.cachedCanvases.getCanvas("pattern",o,a),c=l.context;c.clearRect(0,0,c.canvas.width,c.canvas.height),c.beginPath(),c.rect(0,0,c.canvas.width,c.canvas.height),c.translate(-s[0],-s[1]),n=Fm.transform(n,[1,0,0,1,s[0],s[1]]),c.transform(...t.baseTransform),this.matrix&&c.transform(...this.matrix),Ik(c,this._bbox),c.fillStyle=this._createGradient(c),c.fill(),r=e.createPattern(l.canvas,"no-repeat");const u=new DOMMatrix(n);r.setTransform(u)}else Ik(e,this._bbox),r=this._createGradient(e);return r}}function Nk(e,t,n,i,r,s,o,a){const l=t.coords,c=t.colors,u=e.data,h=4*e.width;let d;l[n+1]>l[i+1]&&(d=n,n=i,i=d,d=s,s=o,o=d),l[i+1]>l[r+1]&&(d=i,i=r,r=d,d=o,o=a,a=d),l[n+1]>l[i+1]&&(d=n,n=i,i=d,d=s,s=o,o=d);const p=(l[n]+t.offsetX)*t.scaleX,f=(l[n+1]+t.offsetY)*t.scaleY,g=(l[i]+t.offsetX)*t.scaleX,m=(l[i+1]+t.offsetY)*t.scaleY,v=(l[r]+t.offsetX)*t.scaleX,y=(l[r+1]+t.offsetY)*t.scaleY;if(f>=y)return;const _=c[s],w=c[s+1],b=c[s+2],x=c[o],k=c[o+1],E=c[o+2],C=c[a],S=c[a+1],A=c[a+2],T=Math.round(f),P=Math.round(y);let I,R,M,N,D,O,L,F;for(let j=T;j<=P;j++){if(j<m){const e=j<f?0:(f-j)/(f-m);I=p-(p-g)*e,R=_-(_-x)*e,M=w-(w-k)*e,N=b-(b-E)*e}else{let e;e=j>y?1:m===y?0:(m-j)/(m-y),I=g-(g-v)*e,R=x-(x-C)*e,M=k-(k-S)*e,N=E-(E-A)*e}let e;e=j<f?0:j>y?1:(f-j)/(f-y),D=p-(p-v)*e,O=_-(_-C)*e,L=w-(w-S)*e,F=b-(b-A)*e;const t=Math.round(Math.min(I,D)),n=Math.round(Math.max(I,D));let i=h*j+4*t;for(let r=t;r<=n;r++)e=(I-r)/(I-D),e<0?e=0:e>1&&(e=1),u[i++]=R-(R-O)*e|0,u[i++]=M-(M-L)*e|0,u[i++]=N-(N-F)*e|0,u[i++]=255}}function Dk(e,t,n){const i=t.coords,r=t.colors;let s,o;switch(t.type){case"lattice":const a=t.verticesPerRow,l=Math.floor(i.length/a)-1,c=a-1;for(s=0;s<l;s++){let t=s*a;for(let s=0;s<c;s++,t++)Nk(e,n,i[t],i[t+1],i[t+a],r[t],r[t+1],r[t+a]),Nk(e,n,i[t+a+1],i[t+1],i[t+a],r[t+a+1],r[t+1],r[t+a])}break;case"triangles":for(s=0,o=i.length;s<o;s+=3)Nk(e,n,i[s],i[s+1],i[s+2],r[s],r[s+1],r[s+2]);break;default:throw new Error("illegal figure")}}class Ok extends Rk{constructor(e){super(),this._coords=e[2],this._colors=e[3],this._figures=e[4],this._bounds=e[5],this._bbox=e[6],this._background=e[7],this.matrix=null}_createMeshCanvas(e,t,n){const i=Math.floor(this._bounds[0]),r=Math.floor(this._bounds[1]),s=Math.ceil(this._bounds[2])-i,o=Math.ceil(this._bounds[3])-r,a=Math.min(Math.ceil(Math.abs(s*e[0]*1.1)),3e3),l=Math.min(Math.ceil(Math.abs(o*e[1]*1.1)),3e3),c=s/a,u=o/l,h={coords:this._coords,colors:this._colors,offsetX:-i,offsetY:-r,scaleX:1/c,scaleY:1/u},d=a+4,p=l+4,f=n.getCanvas("mesh",d,p),g=f.context,m=g.createImageData(a,l);if(t){const e=m.data;for(let n=0,i=e.length;n<i;n+=4)e[n]=t[0],e[n+1]=t[1],e[n+2]=t[2],e[n+3]=255}for(const v of this._figures)Dk(m,v,h);g.putImageData(m,2,2);return{canvas:f.canvas,offsetX:i-2*c,offsetY:r-2*u,scaleX:c,scaleY:u}}isModifyingCurrentTransform(){return!0}getPattern(e,t,n,i){Ik(e,this._bbox);const r=new Float32Array(2);if(i===Pk)Fm.singularValueDecompose2dScale(lv(e),r);else if(this.matrix){Fm.singularValueDecompose2dScale(this.matrix,r);const[e,n]=r;Fm.singularValueDecompose2dScale(t.baseTransform,r),r[0]*=e,r[1]*=n}else Fm.singularValueDecompose2dScale(t.baseTransform,r);const s=this._createMeshCanvas(r,i===Pk?null:this._background,t.cachedCanvases);return i!==Pk&&(e.setTransform(...t.baseTransform),this.matrix&&e.transform(...this.matrix)),e.translate(s.offsetX,s.offsetY),e.scale(s.scaleX,s.scaleY),e.createPattern(s.canvas,"no-repeat")}}class Lk extends Rk{getPattern(){return"hotpink"}}const Fk=1,jk=2;class Bk{constructor(e,t,n,i){this.color=e[1],this.operatorList=e[2],this.matrix=e[3],this.bbox=e[4],this.xstep=e[5],this.ystep=e[6],this.paintType=e[7],this.tilingType=e[8],this.ctx=t,this.canvasGraphicsFactory=n,this.baseTransform=i}createPatternCanvas(e,t){var n,i;const{bbox:r,operatorList:s,paintType:o,tilingType:a,color:l,canvasGraphicsFactory:c}=this;let{xstep:u,ystep:h}=this;u=Math.abs(u),h=Math.abs(h),_m("TilingType: "+a);const d=r[0],p=r[1],f=r[2],g=r[3],m=f-d,v=g-p,y=new Float32Array(2);Fm.singularValueDecompose2dScale(this.matrix,y);const[_,w]=y;Fm.singularValueDecompose2dScale(this.baseTransform,y);const b=_*y[0],x=w*y[1];let k=m,E=v,C=!1,S=!1;const A=Math.ceil(u*b),T=Math.ceil(h*x);A>=Math.ceil(m*b)?k=u:C=!0,T>=Math.ceil(v*x)?E=h:S=!0;const P=this.getSizeAndScale(k,this.ctx.canvas.width,b),I=this.getSizeAndScale(E,this.ctx.canvas.height,x),R=e.cachedCanvases.getCanvas("pattern",P.size,I.size),M=R.context,N=c.createCanvasGraphics(M,t);if(N.groupLevel=e.groupLevel,this.setFillAndStrokeStyleToContext(N,o,l),M.translate(-P.scale*d,-I.scale*p),N.transform(0,P.scale,0,0,I.scale,0,0),M.save(),null===(n=N.dependencyTracker)||void 0===n||n.save(),this.clipBbox(N,d,p,f,g),N.baseTransform=lv(N.ctx),N.executeOperatorList(s),N.endDrawing(),null===(i=N.dependencyTracker)||void 0===i||i.restore(),M.restore(),C||S){const t=R.canvas;C&&(k=u),S&&(E=h);const n=this.getSizeAndScale(k,this.ctx.canvas.width,b),i=this.getSizeAndScale(E,this.ctx.canvas.height,x),r=n.size,s=i.size,o=e.cachedCanvases.getCanvas("pattern-workaround",r,s),a=o.context,l=C?Math.floor(m/u):0,c=S?Math.floor(v/h):0;for(let e=0;e<=l;e++)for(let n=0;n<=c;n++)a.drawImage(t,r*e,s*n,r,s,0,0,r,s);return{canvas:o.canvas,scaleX:n.scale,scaleY:i.scale,offsetX:d,offsetY:p}}return{canvas:R.canvas,scaleX:P.scale,scaleY:I.scale,offsetX:d,offsetY:p}}getSizeAndScale(e,t,n){const i=Math.max(Bk.MAX_PATTERN_SIZE,t);let r=Math.ceil(e*n);return r>=i?r=i:n=r/e,{scale:n,size:r}}clipBbox(e,t,n,i,r){const s=i-t,o=r-n;e.ctx.rect(t,n,s,o),Fm.axialAlignedBoundingBox([t,n,i,r],lv(e.ctx),e.current.minMax),e.clip(),e.endPath()}setFillAndStrokeStyleToContext(e,t,n){const i=e.ctx,r=e.current;switch(t){case Fk:const{fillStyle:e,strokeStyle:s}=this.ctx;i.fillStyle=r.fillColor=e,i.strokeStyle=r.strokeColor=s;break;case jk:i.fillStyle=i.strokeStyle=n,r.fillColor=r.strokeColor=n;break;default:throw new Rm("Unsupported paint type: ".concat(t))}}isModifyingCurrentTransform(){return!1}getPattern(e,t,n,i,r){let s=n;i!==Pk&&(s=Fm.transform(s,t.baseTransform),this.matrix&&(s=Fm.transform(s,this.matrix)));const o=this.createPatternCanvas(t,r);let a=new DOMMatrix(s);a=a.translate(o.offsetX,o.offsetY),a=a.scale(1/o.scaleX,1/o.scaleY);const l=e.createPattern(o.canvas,"repeat");return l.setTransform(a),l}}function Wk(e){let{src:t,srcPos:n=0,dest:i,width:r,height:s,nonBlackColor:o=4294967295,inverseDecode:a=!1}=e;const l=Om.isLittleEndian?4278190080:255,[c,u]=a?[o,l]:[l,o],h=r>>3,d=7&r,p=t.length;i=new Uint32Array(i.buffer);let f=0;for(let g=0;g<s;g++){for(const r=n+h;n<r;n++){const e=n<p?t[n]:255;i[f++]=128&e?u:c,i[f++]=64&e?u:c,i[f++]=32&e?u:c,i[f++]=16&e?u:c,i[f++]=8&e?u:c,i[f++]=4&e?u:c,i[f++]=2&e?u:c,i[f++]=1&e?u:c}if(0===d)continue;const e=n<p?t[n++]:255;for(let t=0;t<d;t++)i[f++]=e&1<<7-t?u:c}return{srcPos:n,destPos:f}}Tt(Bk,"MAX_PATTERN_SIZE",3e3);const Uk=16,zk=new DOMMatrix,Hk=new Float32Array(2),Vk=new Float32Array([1/0,1/0,-1/0,-1/0]);class qk{constructor(e){this.canvasFactory=e,this.cache=Object.create(null)}getCanvas(e,t,n){let i;return void 0!==this.cache[e]?(i=this.cache[e],this.canvasFactory.reset(i,t,n)):(i=this.canvasFactory.create(t,n),this.cache[e]=i),i}delete(e){delete this.cache[e]}clear(){for(const e in this.cache){const t=this.cache[e];this.canvasFactory.destroy(t),delete this.cache[e]}}}function Gk(e,t,n,i,r,s,o,a,l,c){const[u,h,d,p,f,g]=lv(e);if(0===h&&0===d){const m=o*u+f,v=Math.round(m),y=a*p+g,_=Math.round(y),w=(o+l)*u+f,b=Math.abs(Math.round(w)-v)||1,x=(a+c)*p+g,k=Math.abs(Math.round(x)-_)||1;return e.setTransform(Math.sign(u),0,0,Math.sign(p),v,_),e.drawImage(t,n,i,r,s,0,0,b,k),e.setTransform(u,h,d,p,f,g),[b,k]}if(0===u&&0===p){const m=a*d+f,v=Math.round(m),y=o*h+g,_=Math.round(y),w=(a+c)*d+f,b=Math.abs(Math.round(w)-v)||1,x=(o+l)*h+g,k=Math.abs(Math.round(x)-_)||1;return e.setTransform(0,Math.sign(h),Math.sign(d),0,v,_),e.drawImage(t,n,i,r,s,0,0,k,b),e.setTransform(u,h,d,p,f,g),[k,b]}e.drawImage(t,n,i,r,s,o,a,l,c);return[Math.hypot(u,h)*l,Math.hypot(d,p)*c]}class Kk{constructor(e,t,n){Tt(this,"alphaIsShape",!1),Tt(this,"fontSize",0),Tt(this,"fontSizeScale",1),Tt(this,"textMatrix",null),Tt(this,"textMatrixScale",1),Tt(this,"fontMatrix",Fg),Tt(this,"leading",0),Tt(this,"x",0),Tt(this,"y",0),Tt(this,"lineX",0),Tt(this,"lineY",0),Tt(this,"charSpacing",0),Tt(this,"wordSpacing",0),Tt(this,"textHScale",1),Tt(this,"textRenderingMode",$g),Tt(this,"textRise",0),Tt(this,"fillColor","#000000"),Tt(this,"strokeColor","#000000"),Tt(this,"patternFill",!1),Tt(this,"patternStroke",!1),Tt(this,"fillAlpha",1),Tt(this,"strokeAlpha",1),Tt(this,"lineWidth",1),Tt(this,"activeSMask",null),Tt(this,"transferMaps","none"),null===n||void 0===n||n(this),this.clipBox=new Float32Array([0,0,e,t]),this.minMax=Vk.slice()}clone(){const e=Object.create(this);return e.clipBox=this.clipBox.slice(),e.minMax=this.minMax.slice(),e}getPathBoundingBox(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ak,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;const n=this.minMax.slice();if(e===Tk){t||bm("Stroke bounding box must include transform."),Fm.singularValueDecompose2dScale(t,Hk);const e=Hk[0]*this.lineWidth/2,i=Hk[1]*this.lineWidth/2;n[0]-=e,n[1]-=i,n[2]+=e,n[3]+=i}return n}updateClipFromPath(){const e=Fm.intersect(this.clipBox,this.getPathBoundingBox());this.startNewPathAndClipBox(e||[0,0,0,0])}isEmptyClip(){return this.minMax[0]===1/0}startNewPathAndClipBox(e){this.clipBox.set(e,0),this.minMax.set(Vk,0)}getClippedPathBoundingBox(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ak,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return Fm.intersect(this.clipBox,this.getPathBoundingBox(e,t))}}function Yk(e,t){if(t instanceof ImageData)return void e.putImageData(t,0,0);const n=t.height,i=t.width,r=n%Uk,s=(n-r)/Uk,o=0===r?s:s+1,a=e.createImageData(i,Uk);let l,c=0;const u=t.data,h=a.data;let d,p,f,g;if(t.kind===im.GRAYSCALE_1BPP){const t=u.byteLength,n=new Uint32Array(h.buffer,0,h.byteLength>>2),g=n.length,m=i+7>>3,v=4294967295,y=Om.isLittleEndian?4278190080:255;for(d=0;d<o;d++){for(f=d<s?Uk:r,l=0,p=0;p<f;p++){const e=t-c;let r=0;const s=e>m?i:8*e-7,o=-8&s;let a=0,h=0;for(;r<o;r+=8)h=u[c++],n[l++]=128&h?v:y,n[l++]=64&h?v:y,n[l++]=32&h?v:y,n[l++]=16&h?v:y,n[l++]=8&h?v:y,n[l++]=4&h?v:y,n[l++]=2&h?v:y,n[l++]=1&h?v:y;for(;r<s;r++)0===a&&(h=u[c++],a=128),n[l++]=h&a?v:y,a>>=1}for(;l<g;)n[l++]=0;e.putImageData(a,0,d*Uk)}}else if(t.kind===im.RGBA_32BPP){for(p=0,g=i*Uk*4,d=0;d<s;d++)h.set(u.subarray(c,c+g)),c+=g,e.putImageData(a,0,p),p+=Uk;d<o&&(g=i*r*4,h.set(u.subarray(c,c+g)),e.putImageData(a,0,p))}else{if(t.kind!==im.RGB_24BPP)throw new Error("bad image kind: ".concat(t.kind));for(f=Uk,g=i*f,d=0;d<o;d++){for(d>=s&&(f=r,g=i*f),l=0,p=g;p--;)h[l++]=u[c++],h[l++]=u[c++],h[l++]=u[c++],h[l++]=255;e.putImageData(a,0,d*Uk)}}}function Xk(e,t){if(t.bitmap)return void e.drawImage(t.bitmap,0,0);const n=t.height,i=t.width,r=n%Uk,s=(n-r)/Uk,o=0===r?s:s+1,a=e.createImageData(i,Uk);let l=0;const c=t.data,u=a.data;for(let h=0;h<o;h++){const t=h<s?Uk:r;({srcPos:l}=Wk({src:c,srcPos:l,dest:u,width:i,height:t,nonBlackColor:0})),e.putImageData(a,0,h*Uk)}}function Qk(e,t){const n=["strokeStyle","fillStyle","fillRule","globalAlpha","lineWidth","lineCap","lineJoin","miterLimit","globalCompositeOperation","font","filter"];for(const i of n)void 0!==e[i]&&(t[i]=e[i]);void 0!==e.setLineDash&&(t.setLineDash(e.getLineDash()),t.lineDashOffset=e.lineDashOffset)}function $k(e){e.strokeStyle=e.fillStyle="#000000",e.fillRule="nonzero",e.globalAlpha=1,e.lineWidth=1,e.lineCap="butt",e.lineJoin="miter",e.miterLimit=10,e.globalCompositeOperation="source-over",e.font="10px sans-serif",void 0!==e.setLineDash&&(e.setLineDash([]),e.lineDashOffset=0);const{filter:t}=e;"none"!==t&&""!==t&&(e.filter="none")}function Jk(e,t){if(t)return!0;Fm.singularValueDecompose2dScale(e,Hk);const n=Math.fround(hv.pixelRatio*Xm.PDF_TO_CSS_UNITS);return Hk[0]<=n&&Hk[1]<=n}const Zk=["butt","round","square"],eE=["miter","round","bevel"],tE={},nE={};var iE=new WeakSet;class rE{constructor(e,t,n,i,r,s,o,a,l){let{optionalContentConfig:c,markedContentStack:u=null}=s;hg(this,iE),this.ctx=e,this.current=new Kk(this.ctx.canvas.width,this.ctx.canvas.height),this.stateStack=[],this.pendingClip=null,this.pendingEOFill=!1,this.res=null,this.xobjs=null,this.commonObjs=t,this.objs=n,this.canvasFactory=i,this.filterFactory=r,this.groupStack=[],this.baseTransform=null,this.baseTransformStack=[],this.groupLevel=0,this.smaskStack=[],this.smaskCounter=0,this.tempSMask=null,this.suspendedCtx=null,this.contentVisible=!0,this.markedContentStack=u||[],this.optionalContentConfig=c,this.cachedCanvases=new qk(this.canvasFactory),this.cachedPatterns=new Map,this.annotationCanvasMap=o,this.viewportScale=1,this.outputScaleX=1,this.outputScaleY=1,this.pageColors=a,this._cachedScaleForStroking=[-1,0],this._cachedGetSinglePixelWidth=null,this._cachedBitmapsMap=new Map,this.dependencyTracker=null!==l&&void 0!==l?l:null}getObject(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;var i;return"string"===typeof t?(null===(i=this.dependencyTracker)||void 0===i||i.recordNamedDependency(e,t),t.startsWith("g_")?this.commonObjs.get(t):this.objs.get(t)):n}beginDrawing(e){let{transform:t,viewport:n,transparency:i=!1,background:r=null}=e;const s=this.ctx.canvas.width,o=this.ctx.canvas.height,a=this.ctx.fillStyle;if(this.ctx.fillStyle=r||"#ffffff",this.ctx.fillRect(0,0,s,o),this.ctx.fillStyle=a,i){const e=this.cachedCanvases.getCanvas("transparent",s,o);this.compositeCtx=this.ctx,this.transparentCanvas=e.canvas,this.ctx=e.context,this.ctx.save(),this.ctx.transform(...lv(this.compositeCtx))}this.ctx.save(),$k(this.ctx),t&&(this.ctx.transform(...t),this.outputScaleX=t[0],this.outputScaleY=t[0]),this.ctx.transform(...n.transform),this.viewportScale=n.scale,this.baseTransform=lv(this.ctx)}executeOperatorList(e,t,n,i,r){const s=e.argsArray,o=e.fnArray;let a=t||0;const l=s.length;if(l===a)return a;const c=l-a>10&&"function"===typeof n,u=c?Date.now()+15:0;let h=0;const d=this.commonObjs,p=this.objs;let f,g;for(;;){if(void 0!==i&&a===i.nextBreakPoint)return i.breakIt(a,n),a;var m;if(!r||r(a))if(f=o[a],g=null!==(m=s[a])&&void 0!==m?m:null,f!==hm.dependency)null===g?this[f](a):this[f](a,...g);else for(const e of g){var v;null===(v=this.dependencyTracker)||void 0===v||v.recordNamedData(e,a);const t=e.startsWith("g_")?d:p;if(!t.has(e))return t.get(e,n),a}if(a++,a===l)return a;if(c&&++h>10){if(Date.now()>u)return n(),a;h=0}}}endDrawing(){pg(iE,this,sE).call(this),this.cachedCanvases.clear(),this.cachedPatterns.clear();for(const e of this._cachedBitmapsMap.values()){for(const t of e.values())"undefined"!==typeof HTMLCanvasElement&&t instanceof HTMLCanvasElement&&(t.width=t.height=0);e.clear()}this._cachedBitmapsMap.clear(),pg(iE,this,oE).call(this)}_scaleImage(e,t){var n,i;const r=null!==(n=e.width)&&void 0!==n?n:e.displayWidth,s=null!==(i=e.height)&&void 0!==i?i:e.displayHeight;let o,a,l=Math.max(Math.hypot(t[0],t[1]),1),c=Math.max(Math.hypot(t[2],t[3]),1),u=r,h=s,d="prescale1";for(;l>2&&u>1||c>2&&h>1;){let t=u,n=h;l>2&&u>1&&(t=u>=16384?Math.floor(u/2)-1||1:Math.ceil(u/2),l/=u/t),c>2&&h>1&&(n=h>=16384?Math.floor(h/2)-1||1:Math.ceil(h)/2,c/=h/n),o=this.cachedCanvases.getCanvas(d,t,n),a=o.context,a.clearRect(0,0,t,n),a.drawImage(e,0,0,u,h,0,0,t,n),e=o.canvas,u=t,h=n,d="prescale1"===d?"prescale2":"prescale1"}return{img:e,paintWidth:u,paintHeight:h}}_createMaskCanvas(e,t){var n;const i=this.ctx,{width:r,height:s}=t,o=this.current.fillColor,a=this.current.patternFill,l=lv(i);let c,u,h,d;if((t.bitmap||t.data)&&t.count>1){const n=t.bitmap||t.data.buffer;u=JSON.stringify(a?l:[l.slice(0,4),o]),c=this._cachedBitmapsMap.get(n),c||(c=new Map,this._cachedBitmapsMap.set(n,c));const i=c.get(u);if(i&&!a){var p;const t=Math.round(Math.min(l[0],l[2])+l[4]),n=Math.round(Math.min(l[1],l[3])+l[5]);return null===(p=this.dependencyTracker)||void 0===p||p.recordDependencies(e,Sk),{canvas:i,offsetX:t,offsetY:n}}h=i}h||(d=this.cachedCanvases.getCanvas("maskCanvas",r,s),Xk(d.context,t));let f=Fm.transform(l,[1/r,0,0,-1/s,0,0]);f=Fm.transform(f,[1,0,0,1,0,-s]);const g=Vk.slice();Fm.axialAlignedBoundingBox([0,0,r,s],f,g);const[m,v,y,_]=g,w=Math.round(y-m)||1,b=Math.round(_-v)||1,x=this.cachedCanvases.getCanvas("fillCanvas",w,b),k=x.context,E=m,C=v;k.translate(-E,-C),k.transform(...f),h||(h=this._scaleImage(d.canvas,cv(k)),h=h.img,c&&a&&c.set(u,h)),k.imageSmoothingEnabled=Jk(lv(k),t.interpolate),Gk(k,h,0,0,h.width,h.height,0,0,r,s),k.globalCompositeOperation="source-in";const S=Fm.transform(cv(k),[1,0,0,1,-E,-C]);return k.fillStyle=a?o.getPattern(i,this,S,Ak,e):o,k.fillRect(0,0,r,s),c&&!a&&(this.cachedCanvases.delete("fillCanvas"),c.set(u,x.canvas)),null===(n=this.dependencyTracker)||void 0===n||n.recordDependencies(e,Sk),{canvas:x.canvas,offsetX:Math.round(E),offsetY:Math.round(C)}}setLineWidth(e,t){var n;null===(n=this.dependencyTracker)||void 0===n||n.recordSimpleData("lineWidth",e),t!==this.current.lineWidth&&(this._cachedScaleForStroking[0]=-1),this.current.lineWidth=t,this.ctx.lineWidth=t}setLineCap(e,t){var n;null===(n=this.dependencyTracker)||void 0===n||n.recordSimpleData("lineCap",e),this.ctx.lineCap=Zk[t]}setLineJoin(e,t){var n;null===(n=this.dependencyTracker)||void 0===n||n.recordSimpleData("lineJoin",e),this.ctx.lineJoin=eE[t]}setMiterLimit(e,t){var n;null===(n=this.dependencyTracker)||void 0===n||n.recordSimpleData("miterLimit",e),this.ctx.miterLimit=t}setDash(e,t,n){var i;null===(i=this.dependencyTracker)||void 0===i||i.recordSimpleData("dash",e);const r=this.ctx;void 0!==r.setLineDash&&(r.setLineDash(t),r.lineDashOffset=n)}setRenderingIntent(e,t){}setFlatness(e,t){}setGState(e,t){var n,i,r,s,o;for(const[a,l]of t)switch(a){case"LW":this.setLineWidth(e,l);break;case"LC":this.setLineCap(e,l);break;case"LJ":this.setLineJoin(e,l);break;case"ML":this.setMiterLimit(e,l);break;case"D":this.setDash(e,l[0],l[1]);break;case"RI":this.setRenderingIntent(e,l);break;case"FL":this.setFlatness(e,l);break;case"Font":this.setFont(e,l[0],l[1]);break;case"CA":null===(n=this.dependencyTracker)||void 0===n||n.recordSimpleData("strokeAlpha",e),this.current.strokeAlpha=l;break;case"ca":null===(i=this.dependencyTracker)||void 0===i||i.recordSimpleData("fillAlpha",e),this.ctx.globalAlpha=this.current.fillAlpha=l;break;case"BM":null===(r=this.dependencyTracker)||void 0===r||r.recordSimpleData("globalCompositeOperation",e),this.ctx.globalCompositeOperation=l;break;case"SMask":null===(s=this.dependencyTracker)||void 0===s||s.recordSimpleData("SMask",e),this.current.activeSMask=l?this.tempSMask:null,this.tempSMask=null,this.checkSMaskState();break;case"TR":null===(o=this.dependencyTracker)||void 0===o||o.recordSimpleData("filter",e),this.ctx.filter=this.current.transferMaps=this.filterFactory.addFilter(l)}}get inSMaskMode(){return!!this.suspendedCtx}checkSMaskState(){const e=this.inSMaskMode;this.current.activeSMask&&!e?this.beginSMaskMode():!this.current.activeSMask&&e&&this.endSMaskMode()}beginSMaskMode(e){if(this.inSMaskMode)throw new Error("beginSMaskMode called while already in smask mode");const t=this.ctx.canvas.width,n=this.ctx.canvas.height,i="smaskGroupAt"+this.groupLevel,r=this.cachedCanvases.getCanvas(i,t,n);this.suspendedCtx=this.ctx;const s=this.ctx=r.context;s.setTransform(this.suspendedCtx.getTransform()),Qk(this.suspendedCtx,s),function(e,t){if(e._removeMirroring)throw new Error("Context is already forwarding operations.");e.__originalSave=e.save,e.__originalRestore=e.restore,e.__originalRotate=e.rotate,e.__originalScale=e.scale,e.__originalTranslate=e.translate,e.__originalTransform=e.transform,e.__originalSetTransform=e.setTransform,e.__originalResetTransform=e.resetTransform,e.__originalClip=e.clip,e.__originalMoveTo=e.moveTo,e.__originalLineTo=e.lineTo,e.__originalBezierCurveTo=e.bezierCurveTo,e.__originalRect=e.rect,e.__originalClosePath=e.closePath,e.__originalBeginPath=e.beginPath,e._removeMirroring=()=>{e.save=e.__originalSave,e.restore=e.__originalRestore,e.rotate=e.__originalRotate,e.scale=e.__originalScale,e.translate=e.__originalTranslate,e.transform=e.__originalTransform,e.setTransform=e.__originalSetTransform,e.resetTransform=e.__originalResetTransform,e.clip=e.__originalClip,e.moveTo=e.__originalMoveTo,e.lineTo=e.__originalLineTo,e.bezierCurveTo=e.__originalBezierCurveTo,e.rect=e.__originalRect,e.closePath=e.__originalClosePath,e.beginPath=e.__originalBeginPath,delete e._removeMirroring},e.save=function(){t.save(),this.__originalSave()},e.restore=function(){t.restore(),this.__originalRestore()},e.translate=function(e,n){t.translate(e,n),this.__originalTranslate(e,n)},e.scale=function(e,n){t.scale(e,n),this.__originalScale(e,n)},e.transform=function(e,n,i,r,s,o){t.transform(e,n,i,r,s,o),this.__originalTransform(e,n,i,r,s,o)},e.setTransform=function(e,n,i,r,s,o){t.setTransform(e,n,i,r,s,o),this.__originalSetTransform(e,n,i,r,s,o)},e.resetTransform=function(){t.resetTransform(),this.__originalResetTransform()},e.rotate=function(e){t.rotate(e),this.__originalRotate(e)},e.clip=function(e){t.clip(e),this.__originalClip(e)},e.moveTo=function(e,n){t.moveTo(e,n),this.__originalMoveTo(e,n)},e.lineTo=function(e,n){t.lineTo(e,n),this.__originalLineTo(e,n)},e.bezierCurveTo=function(e,n,i,r,s,o){t.bezierCurveTo(e,n,i,r,s,o),this.__originalBezierCurveTo(e,n,i,r,s,o)},e.rect=function(e,n,i,r){t.rect(e,n,i,r),this.__originalRect(e,n,i,r)},e.closePath=function(){t.closePath(),this.__originalClosePath()},e.beginPath=function(){t.beginPath(),this.__originalBeginPath()}}(s,this.suspendedCtx),this.setGState(e,[["BM","source-over"]])}endSMaskMode(){if(!this.inSMaskMode)throw new Error("endSMaskMode called while not in smask mode");this.ctx._removeMirroring(),Qk(this.ctx,this.suspendedCtx),this.ctx=this.suspendedCtx,this.suspendedCtx=null}compose(e){if(!this.current.activeSMask)return;e?(e[0]=Math.floor(e[0]),e[1]=Math.floor(e[1]),e[2]=Math.ceil(e[2]),e[3]=Math.ceil(e[3])):e=[0,0,this.ctx.canvas.width,this.ctx.canvas.height];const t=this.current.activeSMask,n=this.suspendedCtx;this.composeSMask(n,t,this.ctx,e),this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.clearRect(0,0,this.ctx.canvas.width,this.ctx.canvas.height),this.ctx.restore()}composeSMask(e,t,n,i){const r=i[0],s=i[1],o=i[2]-r,a=i[3]-s;0!==o&&0!==a&&(this.genericComposeSMask(t.context,n,o,a,t.subtype,t.backdrop,t.transferMap,r,s,t.offsetX,t.offsetY),e.save(),e.globalAlpha=1,e.globalCompositeOperation="source-over",e.setTransform(1,0,0,1,0,0),e.drawImage(n.canvas,0,0),e.restore())}genericComposeSMask(e,t,n,i,r,s,o,a,l,c,u){let h=e.canvas,d=a-c,p=l-u;if(s)if(d<0||p<0||d+n>h.width||p+i>h.height){const e=this.cachedCanvases.getCanvas("maskExtension",n,i),t=e.context;t.drawImage(h,-d,-p),t.globalCompositeOperation="destination-atop",t.fillStyle=s,t.fillRect(0,0,n,i),t.globalCompositeOperation="source-over",h=e.canvas,d=p=0}else{e.save(),e.globalAlpha=1,e.setTransform(1,0,0,1,0,0);const t=new Path2D;t.rect(d,p,n,i),e.clip(t),e.globalCompositeOperation="destination-atop",e.fillStyle=s,e.fillRect(d,p,n,i),e.restore()}t.save(),t.globalAlpha=1,t.setTransform(1,0,0,1,0,0),"Alpha"===r&&o?t.filter=this.filterFactory.addAlphaFilter(o):"Luminosity"===r&&(t.filter=this.filterFactory.addLuminosityFilter(o));const f=new Path2D;f.rect(a,l,n,i),t.clip(f),t.globalCompositeOperation="destination-in",t.drawImage(h,d,p,n,i,a,l,n,i),t.restore()}save(e){var t;this.inSMaskMode&&Qk(this.ctx,this.suspendedCtx),this.ctx.save();const n=this.current;this.stateStack.push(n),this.current=n.clone(),null===(t=this.dependencyTracker)||void 0===t||t.save(e)}restore(e){var t;null===(t=this.dependencyTracker)||void 0===t||t.restore(e),0!==this.stateStack.length?(this.current=this.stateStack.pop(),this.ctx.restore(),this.inSMaskMode&&Qk(this.suspendedCtx,this.ctx),this.checkSMaskState(),this.pendingClip=null,this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null):this.inSMaskMode&&this.endSMaskMode()}transform(e,t,n,i,r,s,o){var a;null===(a=this.dependencyTracker)||void 0===a||a.recordIncrementalData("transform",e),this.ctx.transform(t,n,i,r,s,o),this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null}constructPath(e,t,n,i){let[r]=n;if(!i)return r||(r=n[0]=new Path2D),void this[t](e,r);if(null!==this.dependencyTracker){const n=t===hm.stroke?this.current.lineWidth/2:0;this.dependencyTracker.resetBBox(e).recordBBox(e,this.ctx,i[0]-n,i[2]+n,i[1]-n,i[3]+n).recordDependencies(e,["transform"])}if(!(r instanceof Path2D)){const e=n[0]=new Path2D;for(let t=0,n=r.length;t<n;)switch(r[t++]){case dm:e.moveTo(r[t++],r[t++]);break;case pm:e.lineTo(r[t++],r[t++]);break;case fm:e.bezierCurveTo(r[t++],r[t++],r[t++],r[t++],r[t++],r[t++]);break;case gm:e.closePath();break;default:wm("Unrecognized drawing path operator: ".concat(r[t-1]))}r=e}Fm.axialAlignedBoundingBox(i,lv(this.ctx),this.current.minMax),this[t](e,r),this._pathStartIdx=e}closePath(e){this.ctx.closePath()}stroke(e,t){var n;let i=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];const r=this.ctx,s=this.current.strokeColor;if(r.globalAlpha=this.current.strokeAlpha,this.contentVisible)if("object"===typeof s&&null!==s&&void 0!==s&&s.getPattern){const n=s.isModifyingCurrentTransform()?r.getTransform():null;if(r.save(),r.strokeStyle=s.getPattern(r,this,cv(r),Tk,e),n){const e=new Path2D;e.addPath(t,r.getTransform().invertSelf().multiplySelf(n)),t=e}this.rescaleAndStroke(t,!1),r.restore()}else this.rescaleAndStroke(t,!0);null===(n=this.dependencyTracker)||void 0===n||n.recordDependencies(e,wk),i&&this.consumePath(e,t,this.current.getClippedPathBoundingBox(Tk,lv(this.ctx))),r.globalAlpha=this.current.fillAlpha}closeStroke(e,t){this.stroke(e,t)}fill(e,t){var n;let i=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];const r=this.ctx,s=this.current.fillColor;let o=!1;if(this.current.patternFill){var a;const n=s.isModifyingCurrentTransform()?r.getTransform():null;if(null===(a=this.dependencyTracker)||void 0===a||a.save(e),r.save(),r.fillStyle=s.getPattern(r,this,cv(r),Ak,e),n){const e=new Path2D;e.addPath(t,r.getTransform().invertSelf().multiplySelf(n)),t=e}o=!0}const l=this.current.getClippedPathBoundingBox();var c;(this.contentVisible&&null!==l&&(this.pendingEOFill?(r.fill(t,"evenodd"),this.pendingEOFill=!1):r.fill(t)),null===(n=this.dependencyTracker)||void 0===n||n.recordDependencies(e,bk),o)&&(r.restore(),null===(c=this.dependencyTracker)||void 0===c||c.restore(e));i&&this.consumePath(e,t,l)}eoFill(e,t){this.pendingEOFill=!0,this.fill(e,t)}fillStroke(e,t){this.fill(e,t,!1),this.stroke(e,t,!1),this.consumePath(e,t)}eoFillStroke(e,t){this.pendingEOFill=!0,this.fillStroke(e,t)}closeFillStroke(e,t){this.fillStroke(e,t)}closeEOFillStroke(e,t){this.pendingEOFill=!0,this.fillStroke(e,t)}endPath(e,t){this.consumePath(e,t)}rawFillPath(e,t){var n;this.ctx.fill(t),null===(n=this.dependencyTracker)||void 0===n||n.recordDependencies(e,kk).recordOperation(e)}clip(e){var t;null===(t=this.dependencyTracker)||void 0===t||t.recordFutureForcedDependency("clipMode",e),this.pendingClip=tE}eoClip(e){var t;null===(t=this.dependencyTracker)||void 0===t||t.recordFutureForcedDependency("clipMode",e),this.pendingClip=nE}beginText(e){var t;this.current.textMatrix=null,this.current.textMatrixScale=1,this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0,null===(t=this.dependencyTracker)||void 0===t||t.recordOpenMarker(e).resetIncrementalData("sameLineText").resetIncrementalData("moveText",e)}endText(e){const t=this.pendingTextPaths,n=this.ctx;if(this.dependencyTracker){const{dependencyTracker:n}=this;void 0!==t&&n.recordFutureForcedDependency("textClip",n.getOpenMarker()).recordFutureForcedDependency("textClip",e),n.recordCloseMarker(e)}if(void 0!==t){const e=new Path2D,i=n.getTransform().invertSelf();for(const{transform:n,x:r,y:s,fontSize:o,path:a}of t)a&&e.addPath(a,new DOMMatrix(n).preMultiplySelf(i).translate(r,s).scale(o,-o));n.clip(e)}delete this.pendingTextPaths}setCharSpacing(e,t){var n;null===(n=this.dependencyTracker)||void 0===n||n.recordSimpleData("charSpacing",e),this.current.charSpacing=t}setWordSpacing(e,t){var n;null===(n=this.dependencyTracker)||void 0===n||n.recordSimpleData("wordSpacing",e),this.current.wordSpacing=t}setHScale(e,t){var n;null===(n=this.dependencyTracker)||void 0===n||n.recordSimpleData("hScale",e),this.current.textHScale=t/100}setLeading(e,t){var n;null===(n=this.dependencyTracker)||void 0===n||n.recordSimpleData("leading",e),this.current.leading=-t}setFont(e,t,n){var i,r;null===(i=this.dependencyTracker)||void 0===i||i.recordSimpleData("font",e).recordSimpleDataFromNamed("fontObj",t,e);const s=this.commonObjs.get(t),o=this.current;if(!s)throw new Error("Can't find font for ".concat(t));if(o.fontMatrix=s.fontMatrix||Fg,0!==o.fontMatrix[0]&&0!==o.fontMatrix[3]||wm("Invalid font matrix for font "+t),n<0?(n=-n,o.fontDirection=-1):o.fontDirection=1,this.current.font=s,this.current.fontSize=n,s.isType3Font)return;const a=s.loadedName||"sans-serif",l=(null===(r=s.systemFontInfo)||void 0===r?void 0:r.css)||'"'.concat(a,'", ').concat(s.fallbackName);let c="normal";s.black?c="900":s.bold&&(c="bold");const u=s.italic?"italic":"normal";let h=n;n<16?h=16:n>100&&(h=100),this.current.fontSizeScale=n/h,this.ctx.font="".concat(u," ").concat(c," ").concat(h,"px ").concat(l)}setTextRenderingMode(e,t){var n;null===(n=this.dependencyTracker)||void 0===n||n.recordSimpleData("textRenderingMode",e),this.current.textRenderingMode=t}setTextRise(e,t){var n;null===(n=this.dependencyTracker)||void 0===n||n.recordSimpleData("textRise",e),this.current.textRise=t}moveText(e,t,n){var i;null===(i=this.dependencyTracker)||void 0===i||i.resetIncrementalData("sameLineText").recordIncrementalData("moveText",e),this.current.x=this.current.lineX+=t,this.current.y=this.current.lineY+=n}setLeadingMoveText(e,t,n){this.setLeading(e,-n),this.moveText(e,t,n)}setTextMatrix(e,t){var n;null===(n=this.dependencyTracker)||void 0===n||n.recordSimpleData("textMatrix",e);const{current:i}=this;i.textMatrix=t,i.textMatrixScale=Math.hypot(t[0],t[1]),i.x=i.lineX=0,i.y=i.lineY=0}nextLine(e){var t,n;this.moveText(e,0,this.current.leading),null===(t=this.dependencyTracker)||void 0===t||t.recordIncrementalData("moveText",null!==(n=this.dependencyTracker.getSimpleIndex("leading"))&&void 0!==n?n:e)}paintChar(e,t,n,i,r,s){const o=this.ctx,a=this.current,l=a.font,c=a.textRenderingMode,u=a.fontSize/a.fontSizeScale,h=c&tm,d=!!(c&nm),p=a.patternFill&&!l.missingFile,f=a.patternStroke&&!l.missingFile;let g;if((l.disableFontFace||d||p||f)&&!l.missingFile&&(g=l.getPathGenerator(this.commonObjs,t)),g&&(l.disableFontFace||p||f)){var m;let t;if(o.save(),o.translate(n,i),o.scale(u,-u),null===(m=this.dependencyTracker)||void 0===m||m.recordCharacterBBox(e,o,l),h===$g||h===Zg)if(r){t=o.getTransform(),o.setTransform(...r);const e=pg(iE,this,aE).call(this,g,t,r);o.fill(e)}else o.fill(g);if(h===Jg||h===Zg)if(s){t||(t=o.getTransform()),o.setTransform(...s);const{a:e,b:n,c:i,d:r}=t,a=Fm.inverseTransform(s),l=Fm.transform([e,n,i,r,0,0],a);Fm.singularValueDecompose2dScale(l,Hk),o.lineWidth*=Math.max(Hk[0],Hk[1])/u,o.stroke(pg(iE,this,aE).call(this,g,t,s))}else o.lineWidth/=u,o.stroke(g);o.restore()}else{var v;if(h===$g||h===Zg)o.fillText(t,n,i),null===(v=this.dependencyTracker)||void 0===v||v.recordCharacterBBox(e,o,l,u,n,i,()=>o.measureText(t));if(h===Jg||h===Zg){var y;if(this.dependencyTracker)null===(y=this.dependencyTracker)||void 0===y||y.recordCharacterBBox(e,o,l,u,n,i,()=>o.measureText(t)).recordDependencies(e,wk);o.strokeText(t,n,i)}}if(d){var _;(this.pendingTextPaths||(this.pendingTextPaths=[])).push({transform:lv(o),x:n,y:i,fontSize:u,path:g}),null===(_=this.dependencyTracker)||void 0===_||_.recordCharacterBBox(e,o,l,u,n,i)}}get isFontSubpixelAAEnabled(){const{context:e}=this.cachedCanvases.getCanvas("isFontSubpixelAAEnabled",10,10);e.scale(1.5,1),e.fillText("I",0,10);const t=e.getImageData(0,0,10,10).data;let n=!1;for(let i=3;i<t.length;i+=4)if(t[i]>0&&t[i]<255){n=!0;break}return Cm(this,"isFontSubpixelAAEnabled",n)}showText(e,t){var n;this.dependencyTracker&&(this.dependencyTracker.recordDependencies(e,Ek).resetBBox(e),this.current.textRenderingMode&nm&&this.dependencyTracker.recordFutureForcedDependency("textClip",e).inheritPendingDependenciesAsFutureForcedDependencies());const i=this.current,r=i.font;var s;if(r.isType3Font)return this.showType3Text(e,t),void(null===(s=this.dependencyTracker)||void 0===s||s.recordShowTextOperation(e));const o=i.fontSize;var a;if(0===o)return void(null===(a=this.dependencyTracker)||void 0===a||a.recordOperation(e));const l=this.ctx,c=i.fontSizeScale,u=i.charSpacing,h=i.wordSpacing,d=i.fontDirection,p=i.textHScale*d,f=t.length,g=r.vertical,m=g?1:-1,v=r.defaultVMetrics,y=o*i.fontMatrix[0],_=i.textRenderingMode===$g&&!r.disableFontFace&&!i.patternFill;let w,b;if(l.save(),i.textMatrix&&l.transform(...i.textMatrix),l.translate(i.x,i.y+i.textRise),d>0?l.scale(p,-1):l.scale(p,1),i.patternFill){l.save();const t=i.fillColor.getPattern(l,this,cv(l),Ak,e);w=lv(l),l.restore(),l.fillStyle=t}if(i.patternStroke){l.save();const t=i.strokeColor.getPattern(l,this,cv(l),Tk,e);b=lv(l),l.restore(),l.strokeStyle=t}let x=i.lineWidth;const k=i.textMatrixScale;if(0===k||0===x){const e=i.textRenderingMode&tm;e!==Jg&&e!==Zg||(x=this.getSinglePixelWidth())}else x/=k;if(1!==c&&(l.scale(c,c),x/=c),l.lineWidth=x,r.isInvalidPDFjsFont){const n=[];let r=0;for(const e of t)n.push(e.unicode),r+=e.width;const s=n.join("");if(l.fillText(s,0,0),null!==this.dependencyTracker){const t=l.measureText(s);this.dependencyTracker.recordBBox(e,this.ctx,-t.actualBoundingBoxLeft,t.actualBoundingBoxRight,-t.actualBoundingBoxAscent,t.actualBoundingBoxDescent).recordShowTextOperation(e)}return i.x+=r*y*p,l.restore(),void this.compose()}let E,C=0;for(E=0;E<f;++E){const n=t[E];if("number"===typeof n){C+=m*n*o/1e3;continue}let i=!1;const s=(n.isSpace?h:0)+u,a=n.fontChar,p=n.accent;let f,x,k,A=n.width;if(g){const e=n.vmetric||v,t=-(n.vmetric?e[1]:.5*A)*y,i=e[2]*y;A=e?-e[0]:A,f=t/c,x=(C+i)/c}else f=C/c,x=0;if(r.remeasure&&A>0){k=l.measureText(a);const e=1e3*k.width/o*c;if(A<e&&this.isFontSubpixelAAEnabled){const t=A/e;i=!0,l.save(),l.scale(t,1),f/=t}else A!==e&&(f+=(A-e)/2e3*o/c)}var S;if(this.contentVisible&&(n.isInFont||r.missingFile))if(_&&!p)l.fillText(a,f,x),null===(S=this.dependencyTracker)||void 0===S||S.recordCharacterBBox(e,l,k?{bbox:null}:r,o/c,f,x,()=>null!==k&&void 0!==k?k:l.measureText(a));else if(this.paintChar(e,a,f,x,w,b),p){const t=f+o*p.offset.x/c,n=x-o*p.offset.y/c;this.paintChar(e,p.fontChar,t,n,w,b)}C+=g?A*y-s*d:A*y+s*d,i&&l.restore()}g?i.y-=C:i.x+=C*p,l.restore(),this.compose(),null===(n=this.dependencyTracker)||void 0===n||n.recordShowTextOperation(e)}showType3Text(e,t){const n=this.ctx,i=this.current,r=i.font,s=i.fontSize,o=i.fontDirection,a=r.vertical?1:-1,l=i.charSpacing,c=i.wordSpacing,u=i.textHScale*o,h=i.fontMatrix||Fg,d=t.length;let p,f,g,m;if(i.textRenderingMode===em||0===s)return;this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null,n.save(),i.textMatrix&&n.transform(...i.textMatrix),n.translate(i.x,i.y+i.textRise),n.scale(u,o);const v=this.dependencyTracker;for(this.dependencyTracker=v?new _k(v,e):null,p=0;p<d;++p){if(f=t[p],"number"===typeof f){m=a*f*s/1e3,this.ctx.translate(m,0),i.x+=m*u;continue}const e=(f.isSpace?c:0)+l,o=r.charProcOperatorList[f.operatorListId];o?this.contentVisible&&(this.save(),n.scale(s,s),n.transform(...h),this.executeOperatorList(o),this.restore()):wm('Type3 character "'.concat(f.operatorListId,'" is not available.'));const d=[f.width,0];Fm.applyTransform(d,h),g=d[0]*s+e,n.translate(g,0),i.x+=g*u}n.restore(),v&&(this.dependencyTracker=v)}setCharWidth(e,t,n){}setCharWidthAndBounds(e,t,n,i,r,s,o){var a;const l=new Path2D;l.rect(i,r,s-i,o-r),this.ctx.clip(l),null===(a=this.dependencyTracker)||void 0===a||a.recordBBox(e,this.ctx,i,s,r,o).recordClipBox(e,this.ctx,i,s,r,o),this.endPath(e)}getColorN_Pattern(e,t){let n;if("TilingPattern"===t[0]){const e=this.baseTransform||lv(this.ctx),i={createCanvasGraphics:(e,t)=>new rE(e,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:this.optionalContentConfig,markedContentStack:this.markedContentStack},void 0,void 0,this.dependencyTracker?new _k(this.dependencyTracker,t,!0):null)};n=new Bk(t,this.ctx,i,e)}else n=this._getPattern(e,t[1],t[2]);return n}setStrokeColorN(e){var t;null===(t=this.dependencyTracker)||void 0===t||t.recordSimpleData("strokeColor",e);for(var n=arguments.length,i=new Array(n>1?n-1:0),r=1;r<n;r++)i[r-1]=arguments[r];this.current.strokeColor=this.getColorN_Pattern(e,i),this.current.patternStroke=!0}setFillColorN(e){var t;null===(t=this.dependencyTracker)||void 0===t||t.recordSimpleData("fillColor",e);for(var n=arguments.length,i=new Array(n>1?n-1:0),r=1;r<n;r++)i[r-1]=arguments[r];this.current.fillColor=this.getColorN_Pattern(e,i),this.current.patternFill=!0}setStrokeRGBColor(e,t){var n;null===(n=this.dependencyTracker)||void 0===n||n.recordSimpleData("strokeColor",e),this.ctx.strokeStyle=this.current.strokeColor=t,this.current.patternStroke=!1}setStrokeTransparent(e){var t;null===(t=this.dependencyTracker)||void 0===t||t.recordSimpleData("strokeColor",e),this.ctx.strokeStyle=this.current.strokeColor="transparent",this.current.patternStroke=!1}setFillRGBColor(e,t){var n;null===(n=this.dependencyTracker)||void 0===n||n.recordSimpleData("fillColor",e),this.ctx.fillStyle=this.current.fillColor=t,this.current.patternFill=!1}setFillTransparent(e){var t;null===(t=this.dependencyTracker)||void 0===t||t.recordSimpleData("fillColor",e),this.ctx.fillStyle=this.current.fillColor="transparent",this.current.patternFill=!1}_getPattern(e,t){let n,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return this.cachedPatterns.has(t)?n=this.cachedPatterns.get(t):(n=function(e){switch(e[0]){case"RadialAxial":return new Mk(e);case"Mesh":return new Ok(e);case"Dummy":return new Lk}throw new Error("Unknown IR type: ".concat(e[0]))}(this.getObject(e,t)),this.cachedPatterns.set(t,n)),i&&(n.matrix=i),n}shadingFill(e,t){var n;if(!this.contentVisible)return;const i=this.ctx;this.save(e);const r=this._getPattern(e,t);i.fillStyle=r.getPattern(i,this,cv(i),Pk,e);const s=cv(i);if(s){const{width:e,height:t}=i.canvas,n=Vk.slice();Fm.axialAlignedBoundingBox([0,0,e,t],s,n);const[r,o,a,l]=n;this.ctx.fillRect(r,o,a-r,l-o)}else this.ctx.fillRect(-1e10,-1e10,2e10,2e10);null===(n=this.dependencyTracker)||void 0===n||n.resetBBox(e).recordFullPageBBox(e).recordDependencies(e,Ck).recordDependencies(e,bk).recordOperation(e),this.compose(this.current.getClippedPathBoundingBox()),this.restore(e)}beginInlineImage(){bm("Should not call beginInlineImage")}beginImageData(){bm("Should not call beginImageData")}paintFormXObjectBegin(e,t,n){if(this.contentVisible&&(this.save(e),this.baseTransformStack.push(this.baseTransform),t&&this.transform(e,...t),this.baseTransform=lv(this.ctx),n)){var i;Fm.axialAlignedBoundingBox(n,this.baseTransform,this.current.minMax);const[t,r,s,o]=n,a=new Path2D;a.rect(t,r,s-t,o-r),this.ctx.clip(a),null===(i=this.dependencyTracker)||void 0===i||i.recordClipBox(e,this.ctx,t,s,r,o),this.endPath(e)}}paintFormXObjectEnd(e){this.contentVisible&&(this.restore(e),this.baseTransform=this.baseTransformStack.pop())}beginGroup(e,t){var n;if(!this.contentVisible)return;this.save(e),this.inSMaskMode&&(this.endSMaskMode(),this.current.activeSMask=null);const i=this.ctx;t.isolated||_m("TODO: Support non-isolated groups."),t.knockout&&wm("Knockout groups not supported.");const r=lv(i);if(t.matrix&&i.transform(...t.matrix),!t.bbox)throw new Error("Bounding box is required.");let s=Vk.slice();Fm.axialAlignedBoundingBox(t.bbox,lv(i),s);const o=[0,0,i.canvas.width,i.canvas.height];s=Fm.intersect(s,o)||[0,0,0,0];const a=Math.floor(s[0]),l=Math.floor(s[1]),c=Math.max(Math.ceil(s[2])-a,1),u=Math.max(Math.ceil(s[3])-l,1);this.current.startNewPathAndClipBox([0,0,c,u]);let h="groupAt"+this.groupLevel;t.smask&&(h+="_smask_"+this.smaskCounter++%2);const d=this.cachedCanvases.getCanvas(h,c,u),p=d.context;p.translate(-a,-l),p.transform(...r);let f=new Path2D;const[g,m,v,y]=t.bbox;if(f.rect(g,m,v-g,y-m),t.matrix){const e=new Path2D;e.addPath(f,new DOMMatrix(t.matrix)),f=e}p.clip(f),t.smask&&this.smaskStack.push({canvas:d.canvas,context:p,offsetX:a,offsetY:l,subtype:t.smask.subtype,backdrop:t.smask.backdrop,transferMap:t.smask.transferMap||null,startTransformInverse:null}),t.smask&&!this.dependencyTracker||(i.setTransform(1,0,0,1,0,0),i.translate(a,l),i.save()),Qk(i,p),this.ctx=p,null===(n=this.dependencyTracker)||void 0===n||n.inheritSimpleDataAsFutureForcedDependencies(["fillAlpha","strokeAlpha","globalCompositeOperation"]).pushBaseTransform(i),this.setGState(e,[["BM","source-over"],["ca",1],["CA",1]]),this.groupStack.push(i),this.groupLevel++}endGroup(e,t){var n;if(!this.contentVisible)return;this.groupLevel--;const i=this.ctx,r=this.groupStack.pop();if(this.ctx=r,this.ctx.imageSmoothingEnabled=!1,null===(n=this.dependencyTracker)||void 0===n||n.popBaseTransform(),t.smask)this.tempSMask=this.smaskStack.pop(),this.restore(e),this.dependencyTracker&&this.ctx.restore();else{this.ctx.restore();const t=lv(this.ctx);this.restore(e),this.ctx.save(),this.ctx.setTransform(...t);const n=Vk.slice();Fm.axialAlignedBoundingBox([0,0,i.canvas.width,i.canvas.height],t,n),this.ctx.drawImage(i.canvas,0,0),this.ctx.restore(),this.compose(n)}}beginAnnotation(e,t,n,i,r,s){if(pg(iE,this,sE).call(this),$k(this.ctx),this.ctx.save(),this.save(e),this.baseTransform&&this.ctx.setTransform(...this.baseTransform),n){const r=n[2]-n[0],o=n[3]-n[1];if(s&&this.annotationCanvasMap){(i=i.slice())[4]-=n[0],i[5]-=n[1],(n=n.slice())[0]=n[1]=0,n[2]=r,n[3]=o,Fm.singularValueDecompose2dScale(lv(this.ctx),Hk);const{viewportScale:e}=this,s=Math.ceil(r*this.outputScaleX*e),a=Math.ceil(o*this.outputScaleY*e);this.annotationCanvas=this.canvasFactory.create(s,a);const{canvas:l,context:c}=this.annotationCanvas;this.annotationCanvasMap.set(t,l),this.annotationCanvas.savedCtx=this.ctx,this.ctx=c,this.ctx.save(),this.ctx.setTransform(Hk[0],0,0,-Hk[1],0,o*Hk[1]),$k(this.ctx)}else{$k(this.ctx),this.endPath(e);const t=new Path2D;t.rect(n[0],n[1],r,o),this.ctx.clip(t)}}this.current=new Kk(this.ctx.canvas.width,this.ctx.canvas.height),this.transform(e,...i),this.transform(e,...r)}endAnnotation(e){this.annotationCanvas&&(this.ctx.restore(),pg(iE,this,oE).call(this),this.ctx=this.annotationCanvas.savedCtx,delete this.annotationCanvas.savedCtx,delete this.annotationCanvas)}paintImageMaskXObject(e,t){var n;if(!this.contentVisible)return;const i=t.count;(t=this.getObject(e,t.data,t)).count=i;const r=this.ctx,s=this._createMaskCanvas(e,t),o=s.canvas;r.save(),r.setTransform(1,0,0,1,0,0),r.drawImage(o,s.offsetX,s.offsetY),null===(n=this.dependencyTracker)||void 0===n||n.resetBBox(e).recordBBox(e,this.ctx,s.offsetX,s.offsetX+o.width,s.offsetY,s.offsetY+o.height).recordOperation(e),r.restore(),this.compose()}paintImageMaskXObjectRepeat(e,t,n){var i,r;let s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,a=arguments.length>5?arguments[5]:void 0,l=arguments.length>6?arguments[6]:void 0;if(!this.contentVisible)return;t=this.getObject(e,t.data,t);const c=this.ctx;c.save();const u=lv(c);c.transform(n,s,o,a,0,0);const h=this._createMaskCanvas(e,t);c.setTransform(1,0,0,1,h.offsetX-u[4],h.offsetY-u[5]),null===(i=this.dependencyTracker)||void 0===i||i.resetBBox(e);for(let p=0,f=l.length;p<f;p+=2){var d;const t=Fm.transform(u,[n,s,o,a,l[p],l[p+1]]);c.drawImage(h.canvas,t[4],t[5]),null===(d=this.dependencyTracker)||void 0===d||d.recordBBox(e,this.ctx,t[4],t[4]+h.canvas.width,t[5],t[5]+h.canvas.height)}c.restore(),this.compose(),null===(r=this.dependencyTracker)||void 0===r||r.recordOperation(e)}paintImageMaskXObjectGroup(e,t){var n,i;if(!this.contentVisible)return;const r=this.ctx,s=this.current.fillColor,o=this.current.patternFill;null===(n=this.dependencyTracker)||void 0===n||n.resetBBox(e).recordDependencies(e,Sk);for(const l of t){var a;const{data:t,width:n,height:i,transform:c}=l,u=this.cachedCanvases.getCanvas("maskCanvas",n,i),h=u.context;h.save();Xk(h,this.getObject(e,t,l)),h.globalCompositeOperation="source-in",h.fillStyle=o?s.getPattern(h,this,cv(r),Ak,e):s,h.fillRect(0,0,n,i),h.restore(),r.save(),r.transform(...c),r.scale(1,-1),Gk(r,u.canvas,0,0,n,i,0,-1,1,1),null===(a=this.dependencyTracker)||void 0===a||a.recordBBox(e,r,0,n,0,i),r.restore()}this.compose(),null===(i=this.dependencyTracker)||void 0===i||i.recordOperation(e)}paintImageXObject(e,t){if(!this.contentVisible)return;const n=this.getObject(e,t);n?this.paintInlineImageXObject(e,n):wm("Dependent image isn't ready yet")}paintImageXObjectRepeat(e,t,n,i,r){if(!this.contentVisible)return;const s=this.getObject(e,t);if(!s)return void wm("Dependent image isn't ready yet");const o=s.width,a=s.height,l=[];for(let c=0,u=r.length;c<u;c+=2)l.push({transform:[n,0,0,i,r[c],r[c+1]],x:0,y:0,w:o,h:a});this.paintInlineImageXObjectGroup(e,s,l)}applyTransferMapsToCanvas(e){return"none"!==this.current.transferMaps&&(e.filter=this.current.transferMaps,e.drawImage(e.canvas,0,0),e.filter="none"),e.canvas}applyTransferMapsToBitmap(e){if("none"===this.current.transferMaps)return e.bitmap;const{bitmap:t,width:n,height:i}=e,r=this.cachedCanvases.getCanvas("inlineImage",n,i),s=r.context;return s.filter=this.current.transferMaps,s.drawImage(t,0,0),s.filter="none",r.canvas}paintInlineImageXObject(e,t){var n;if(!this.contentVisible)return;const i=t.width,r=t.height,s=this.ctx;this.save(e);const{filter:o}=s;let a;if("none"!==o&&""!==o&&(s.filter="none"),s.scale(1/i,-1/r),t.bitmap)a=this.applyTransferMapsToBitmap(t);else if("function"===typeof HTMLElement&&t instanceof HTMLElement||!t.data)a=t;else{const e=this.cachedCanvases.getCanvas("inlineImage",i,r).context;Yk(e,t),a=this.applyTransferMapsToCanvas(e)}const l=this._scaleImage(a,cv(s));s.imageSmoothingEnabled=Jk(lv(s),t.interpolate),null===(n=this.dependencyTracker)||void 0===n||n.resetBBox(e).recordBBox(e,s,0,i,-r,0).recordDependencies(e,xk).recordOperation(e),Gk(s,l.img,0,0,l.paintWidth,l.paintHeight,0,-r,i,r),this.compose(),this.restore(e)}paintInlineImageXObjectGroup(e,t,n){var i,r;if(!this.contentVisible)return;const s=this.ctx;let o;if(t.bitmap)o=t.bitmap;else{const e=t.width,n=t.height,i=this.cachedCanvases.getCanvas("inlineImage",e,n).context;Yk(i,t),o=this.applyTransferMapsToCanvas(i)}null===(i=this.dependencyTracker)||void 0===i||i.resetBBox(e);for(const l of n){var a;s.save(),s.transform(...l.transform),s.scale(1,-1),Gk(s,o,l.x,l.y,l.w,l.h,0,-1,1,1),null===(a=this.dependencyTracker)||void 0===a||a.recordBBox(e,s,0,1,-1,0),s.restore()}null===(r=this.dependencyTracker)||void 0===r||r.recordOperation(e),this.compose()}paintSolidColorImageMask(e){var t;this.contentVisible&&(null===(t=this.dependencyTracker)||void 0===t||t.resetBBox(e).recordBBox(e,this.ctx,0,1,0,1).recordDependencies(e,bk).recordOperation(e),this.ctx.fillRect(0,0,1,1),this.compose())}markPoint(e,t){}markPointProps(e,t,n){}beginMarkedContent(e,t){var n;null===(n=this.dependencyTracker)||void 0===n||n.beginMarkedContent(e),this.markedContentStack.push({visible:!0})}beginMarkedContentProps(e,t,n){var i;null===(i=this.dependencyTracker)||void 0===i||i.beginMarkedContent(e),"OC"===t?this.markedContentStack.push({visible:this.optionalContentConfig.isVisible(n)}):this.markedContentStack.push({visible:!0}),this.contentVisible=this.isContentVisible()}endMarkedContent(e){var t;null===(t=this.dependencyTracker)||void 0===t||t.endMarkedContent(e),this.markedContentStack.pop(),this.contentVisible=this.isContentVisible()}beginCompat(e){}endCompat(e){}consumePath(e,t,n){const i=this.current.isEmptyClip();this.pendingClip&&this.current.updateClipFromPath(),this.pendingClip||this.compose(n);const r=this.ctx;var s,o;this.pendingClip?(i||(this.pendingClip===nE?r.clip(t,"evenodd"):r.clip(t)),this.pendingClip=null,null===(s=this.dependencyTracker)||void 0===s||s.bboxToClipBoxDropOperation(e).recordFutureForcedDependency("clipPath",e)):null===(o=this.dependencyTracker)||void 0===o||o.recordOperation(e);this.current.startNewPathAndClipBox(this.current.clipBox)}getSinglePixelWidth(){if(!this._cachedGetSinglePixelWidth){const e=lv(this.ctx);if(0===e[1]&&0===e[2])this._cachedGetSinglePixelWidth=1/Math.min(Math.abs(e[0]),Math.abs(e[3]));else{const t=Math.abs(e[0]*e[3]-e[2]*e[1]),n=Math.hypot(e[0],e[2]),i=Math.hypot(e[1],e[3]);this._cachedGetSinglePixelWidth=Math.max(n,i)/t}}return this._cachedGetSinglePixelWidth}getScaleForStroking(){if(-1===this._cachedScaleForStroking[0]){const{lineWidth:e}=this.current,{a:t,b:n,c:i,d:r}=this.ctx.getTransform();let s,o;if(0===n&&0===i){const n=Math.abs(t),i=Math.abs(r);if(n===i)if(0===e)s=o=1/n;else{const t=n*e;s=o=t<1?1/t:1}else if(0===e)s=1/n,o=1/i;else{const t=n*e,r=i*e;s=t<1?1/t:1,o=r<1?1/r:1}}else{const a=Math.abs(t*r-n*i),l=Math.hypot(t,n),c=Math.hypot(i,r);if(0===e)s=c/a,o=l/a;else{const t=e*a;s=c>t?c/t:1,o=l>t?l/t:1}}this._cachedScaleForStroking[0]=s,this._cachedScaleForStroking[1]=o}return this._cachedScaleForStroking}rescaleAndStroke(e,t){const{ctx:n,current:{lineWidth:i}}=this,[r,s]=this.getScaleForStroking();if(r===s)return n.lineWidth=(i||1)*r,void n.stroke(e);const o=n.getLineDash();t&&n.save(),n.scale(r,s),zk.a=1/r,zk.d=1/s;const a=new Path2D;if(a.addPath(e,zk),o.length>0){const e=Math.max(r,s);n.setLineDash(o.map(t=>t/e)),n.lineDashOffset/=e}n.lineWidth=i||1,n.stroke(a),t&&n.restore()}isContentVisible(){for(let e=this.markedContentStack.length-1;e>=0;e--)if(!this.markedContentStack[e].visible)return!1;return!0}}function sE(){for(;this.stateStack.length||this.inSMaskMode;)this.restore();this.current.activeSMask=null,this.ctx.restore(),this.transparentCanvas&&(this.ctx=this.compositeCtx,this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.drawImage(this.transparentCanvas,0,0),this.ctx.restore(),this.transparentCanvas=null)}function oE(){if(this.pageColors){const e=this.filterFactory.addHCMFilter(this.pageColors.foreground,this.pageColors.background);if("none"!==e){const t=this.ctx.filter;this.ctx.filter=e,this.ctx.drawImage(this.ctx.canvas,0,0),this.ctx.filter=t}}}function aE(e,t,n){const i=new Path2D;return i.addPath(e,new DOMMatrix(n).invertSelf().multiplySelf(t)),i}for(const rz in hm)void 0!==rE.prototype[rz]&&(rE.prototype[hm[rz]]=rE.prototype[rz]);var lE=new WeakMap,cE=new WeakMap,uE=new WeakMap,hE=new WeakSet;class dE{static write(e){const t=new TextEncoder,n={};let i=0;for(const l of dE.strings){const r=t.encode(e[l]);n[l]=r,i+=4+r.length}const r=new ArrayBuffer(i),s=new Uint8Array(r),o=new DataView(r);let a=0;for(const l of dE.strings){const e=n[l],t=e.length;o.setUint32(a,t),s.set(e,a+4),a+=4+t}return xm(a===r.byteLength,"CssFontInfo.write: Buffer overflow"),r}constructor(e){hg(this,hE),dg(this,lE,void 0),dg(this,cE,void 0),dg(this,uE,void 0),mg(lE,this,e),mg(cE,this,new DataView(gg(lE,this))),mg(uE,this,new TextDecoder)}get fontFamily(){return pg(hE,this,pE).call(this,0)}get fontWeight(){return pg(hE,this,pE).call(this,1)}get italicAngle(){return pg(hE,this,pE).call(this,2)}}function pE(e){xm(e<kg.strings.length,"Invalid string index");let t=0;for(let i=0;i<e;i++)t+=gg(cE,this).getUint32(t)+4;const n=gg(cE,this).getUint32(t);return gg(uE,this).decode(new Uint8Array(gg(lE,this),t+4,n))}kg=dE,Tt(dE,"strings",["fontFamily","fontWeight","italicAngle"]);var fE=new WeakMap,gE=new WeakMap,mE=new WeakMap,vE=new WeakSet;class yE{static write(e){const t=new TextEncoder,n={};let i=0;for(const h of yE.strings){const r=t.encode(e[h]);n[h]=r,i+=4+r.length}i+=4;let r,s,o=1+i;e.style&&(r=t.encode(e.style.style),s=t.encode(e.style.weight),o+=4+r.length+4+s.length);const a=new ArrayBuffer(o),l=new Uint8Array(a),c=new DataView(a);let u=0;c.setUint8(u++,e.guessFallback?1:0),c.setUint32(u,0),u+=4,i=0;for(const h of yE.strings){const e=n[h],t=e.length;i+=4+t,c.setUint32(u,t),l.set(e,u+4),u+=4+t}return c.setUint32(u-i-4,i),e.style&&(c.setUint32(u,r.length),l.set(r,u+4),u+=4+r.length,c.setUint32(u,s.length),l.set(s,u+4),u+=4+s.length),xm(u<=a.byteLength,"SubstitionInfo.write: Buffer overflow"),a.transferToFixedLength(u)}constructor(e){hg(this,vE),dg(this,fE,void 0),dg(this,gE,void 0),dg(this,mE,void 0),mg(fE,this,e),mg(gE,this,new DataView(gg(fE,this))),mg(mE,this,new TextDecoder)}get guessFallback(){return 0!==gg(gE,this).getUint8(0)}get css(){return pg(vE,this,_E).call(this,0)}get loadedName(){return pg(vE,this,_E).call(this,1)}get baseFontName(){return pg(vE,this,_E).call(this,2)}get src(){return pg(vE,this,_E).call(this,3)}get style(){let e=1;e+=4+gg(gE,this).getUint32(e);const t=gg(gE,this).getUint32(e),n=gg(mE,this).decode(new Uint8Array(gg(fE,this),e+4,t));e+=4+t;const i=gg(gE,this).getUint32(e);return{style:n,weight:gg(mE,this).decode(new Uint8Array(gg(fE,this),e+4,i))}}}function _E(e){xm(e<Eg.strings.length,"Invalid string index");let t=5;for(let i=0;i<e;i++)t+=gg(gE,this).getUint32(t)+4;const n=gg(gE,this).getUint32(t);return gg(mE,this).decode(new Uint8Array(gg(fE,this),t+4,n))}Eg=yE,Tt(yE,"strings",["css","loadedName","baseFontName","src"]);var wE=new WeakMap,bE=new WeakMap,xE=new WeakMap,kE=new WeakSet;class EE{constructor(e){let{data:t,extra:n}=e;hg(this,kE),dg(this,wE,void 0),dg(this,bE,void 0),dg(this,xE,void 0),mg(wE,this,t),mg(bE,this,new TextDecoder),mg(xE,this,new DataView(gg(wE,this))),n&&Object.assign(this,n)}get black(){return pg(kE,this,CE).call(this,0)}get bold(){return pg(kE,this,CE).call(this,1)}get disableFontFace(){return pg(kE,this,CE).call(this,2)}get fontExtraProperties(){return pg(kE,this,CE).call(this,3)}get isInvalidPDFjsFont(){return pg(kE,this,CE).call(this,4)}get isType3Font(){return pg(kE,this,CE).call(this,5)}get italic(){return pg(kE,this,CE).call(this,6)}get missingFile(){return pg(kE,this,CE).call(this,7)}get remeasure(){return pg(kE,this,CE).call(this,8)}get vertical(){return pg(kE,this,CE).call(this,9)}get ascent(){return pg(kE,this,SE).call(this,0)}get defaultWidth(){return pg(kE,this,SE).call(this,1)}get descent(){return pg(kE,this,SE).call(this,2)}get bbox(){let e=PE._;if(0===gg(xE,this).getUint8(e))return;e+=1;const t=[];for(let n=0;n<4;n++)t.push(gg(xE,this).getInt16(e,!0)),e+=2;return t}get fontMatrix(){let e=IE._;if(0===gg(xE,this).getUint8(e))return;e+=1;const t=[];for(let n=0;n<6;n++)t.push(gg(xE,this).getFloat64(e,!0)),e+=8;return t}get defaultVMetrics(){let e=RE._;if(0===gg(xE,this).getUint8(e))return;e+=1;const t=[];for(let n=0;n<3;n++)t.push(gg(xE,this).getInt16(e,!0)),e+=2;return t}get fallbackName(){return pg(kE,this,AE).call(this,0)}get loadedName(){return pg(kE,this,AE).call(this,1)}get mimetype(){return pg(kE,this,AE).call(this,2)}get name(){return pg(kE,this,AE).call(this,3)}get data(){let e=ME._;e+=4+gg(xE,this).getUint32(e);e+=4+gg(xE,this).getUint32(e);e+=4+gg(xE,this).getUint32(e);const t=gg(xE,this).getUint32(e);if(0!==t)return new Uint8Array(gg(wE,this),e+4,t)}clearData(){let e=ME._;e+=4+gg(xE,this).getUint32(e);e+=4+gg(xE,this).getUint32(e);e+=4+gg(xE,this).getUint32(e);const t=gg(xE,this).getUint32(e);new Uint8Array(gg(wE,this),e+4,t).fill(0),gg(xE,this).setUint32(e,0)}get cssFontInfo(){let e=ME._;e+=4+gg(xE,this).getUint32(e);e+=4+gg(xE,this).getUint32(e);const t=gg(xE,this).getUint32(e);if(0===t)return null;const n=new Uint8Array(t);return n.set(new Uint8Array(gg(wE,this),e+4,t)),new dE(n.buffer)}get systemFontInfo(){let e=ME._;e+=4+gg(xE,this).getUint32(e);const t=gg(xE,this).getUint32(e);if(0===t)return null;const n=new Uint8Array(t);return n.set(new Uint8Array(gg(wE,this),e+4,t)),new yE(n.buffer)}static write(e){const t=e.systemFontInfo?yE.write(e.systemFontInfo):null,n=e.cssFontInfo?dE.write(e.cssFontInfo):null,i=new TextEncoder,r={};let s=0;for(const f of EE.strings)r[f]=i.encode(e[f]),s+=4+r[f].length;const o=ME._+4+s+4+(t?t.byteLength:0)+4+(n?n.byteLength:0)+4+(e.data?e.data.length:0),a=new ArrayBuffer(o),l=new Uint8Array(a),c=new DataView(a);let u=0;const h=EE.bools.length;let d=0,p=0;for(let f=0;f<h;f++){const t=e[EE.bools[f]];d|=(void 0===t?0:t?2:1)<<p,p+=2,8!==p&&f!==h-1||(c.setUint8(u++,d),d=0,p=0)}xm(u===TE._,"FontInfo.write: Boolean properties offset mismatch");for(const f of EE.numbers)c.setFloat64(u,e[f]),u+=8;if(xm(u===PE._,"FontInfo.write: Number properties offset mismatch"),e.bbox){c.setUint8(u++,4);for(const t of e.bbox)c.setInt16(u,t,!0),u+=2}else c.setUint8(u++,0),u+=8;if(xm(u===IE._,"FontInfo.write: BBox properties offset mismatch"),e.fontMatrix){c.setUint8(u++,6);for(const t of e.fontMatrix)c.setFloat64(u,t,!0),u+=8}else c.setUint8(u++,0),u+=48;if(xm(u===RE._,"FontInfo.write: FontMatrix properties offset mismatch"),e.defaultVMetrics){c.setUint8(u++,1);for(const t of e.defaultVMetrics)c.setInt16(u,t,!0),u+=2}else c.setUint8(u++,0),u+=6;xm(u===ME._,"FontInfo.write: DefaultVMetrics properties offset mismatch"),c.setUint32(ME._,0),u+=4;for(const f of EE.strings){const e=r[f],t=e.length;c.setUint32(u,t),l.set(e,u+4),u+=4+t}if(c.setUint32(ME._,u-ME._-4),t){const e=t.byteLength;c.setUint32(u,e),xm(u+4+e<=a.byteLength,"FontInfo.write: Buffer overflow at systemFontInfo"),l.set(new Uint8Array(t),u+4),u+=4+e}else c.setUint32(u,0),u+=4;if(n){const e=n.byteLength;c.setUint32(u,e),xm(u+4+e<=a.byteLength,"FontInfo.write: Buffer overflow at cssFontInfo"),l.set(new Uint8Array(n),u+4),u+=4+e}else c.setUint32(u,0),u+=4;return void 0===e.data?(c.setUint32(u,0),u+=4):(c.setUint32(u,e.data.length),l.set(e.data,u+4),u+=4+e.data.length),xm(u<=a.byteLength,"FontInfo.write: Buffer overflow"),a.transferToFixedLength(u)}}function CE(e){xm(e<Cg.bools.length,"Invalid boolean index");const t=Math.floor(e/4),n=2*e%8,i=gg(xE,this).getUint8(t)>>n&3;return 0===i?void 0:2===i}function SE(e){return xm(e<Cg.numbers.length,"Invalid number index"),gg(xE,this).getFloat64(TE._+8*e)}function AE(e){xm(e<Cg.strings.length,"Invalid string index");let t=ME._+4;for(let r=0;r<e;r++)t+=gg(xE,this).getUint32(t)+4;const n=gg(xE,this).getUint32(t),i=new Uint8Array(n);return i.set(new Uint8Array(gg(wE,this),t+4,n)),gg(bE,this).decode(i)}Cg=EE,Tt(EE,"bools",["black","bold","disableFontFace","fontExtraProperties","isInvalidPDFjsFont","isType3Font","italic","missingFile","remeasure","vertical"]),Tt(EE,"numbers",["ascent","defaultWidth","descent"]),Tt(EE,"strings",["fallbackName","loadedName","mimetype","name"]);var TE={_:Math.ceil(2*Cg.bools.length/8)},PE={_:pg(Cg,Cg,TE)._+8*Cg.numbers.length},IE={_:pg(Cg,Cg,PE)._+1+8},RE={_:pg(Cg,Cg,IE)._+1+48},ME={_:pg(Cg,Cg,RE)._+1+6};class NE{static get workerPort(){return pg(NE,this,DE)._}static set workerPort(e){if(!("undefined"!==typeof Worker&&e instanceof Worker)&&null!==e)throw new Error("Invalid `workerPort` type.");DE._=pg(NE,this,e)}static get workerSrc(){return pg(NE,this,OE)._}static set workerSrc(e){if("string"!==typeof e)throw new Error("Invalid `workerSrc` type.");OE._=pg(NE,this,e)}}var DE={_:null},OE={_:""},LE=new WeakMap,FE=new WeakMap;class jE{constructor(e){let{parsedData:t,rawData:n}=e;dg(this,LE,void 0),dg(this,FE,void 0),mg(LE,this,t),mg(FE,this,n)}getRaw(){return gg(FE,this)}get(e){var t;return null!==(t=gg(LE,this).get(e))&&void 0!==t?t:null}[Symbol.iterator](){return gg(LE,this).entries()}}const BE=Symbol("INTERNAL");var WE=new WeakMap,UE=new WeakMap,zE=new WeakMap,HE=new WeakMap;class VE{constructor(e,t){let{name:n,intent:i,usage:r,rbGroups:s}=t;dg(this,WE,!1),dg(this,UE,!1),dg(this,zE,!1),dg(this,HE,!0),mg(WE,this,!!(e&Wg)),mg(UE,this,!!(e&Ug)),this.name=n,this.intent=i,this.usage=r,this.rbGroups=s}get visible(){if(gg(zE,this))return gg(HE,this);if(!gg(HE,this))return!1;const{print:e,view:t}=this.usage;return gg(WE,this)?"OFF"!==(null===t||void 0===t?void 0:t.viewState):!gg(UE,this)||"OFF"!==(null===e||void 0===e?void 0:e.printState)}_setVisible(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];e!==BE&&bm("Internal method `_setVisible` called."),mg(zE,this,n),mg(HE,this,t)}}var qE=new WeakMap,GE=new WeakMap,KE=new WeakMap,YE=new WeakMap,XE=new WeakSet;class QE{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Wg;if(hg(this,XE),dg(this,qE,null),dg(this,GE,new Map),dg(this,KE,null),dg(this,YE,null),this.renderingIntent=t,this.name=null,this.creator=null,null!==e){this.name=e.name,this.creator=e.creator,mg(YE,this,e.order);for(const n of e.groups)gg(GE,this).set(n.id,new VE(t,n));if("OFF"===e.baseState)for(const e of gg(GE,this).values())e._setVisible(BE,!1);for(const t of e.on)gg(GE,this).get(t)._setVisible(BE,!0);for(const t of e.off)gg(GE,this).get(t)._setVisible(BE,!1);mg(KE,this,this.getHash())}}isVisible(e){if(0===gg(GE,this).size)return!0;if(!e)return _m("Optional content group not defined."),!0;if("OCG"===e.type)return gg(GE,this).has(e.id)?gg(GE,this).get(e.id).visible:(wm("Optional content group not found: ".concat(e.id)),!0);if("OCMD"===e.type){if(e.expression)return pg(XE,this,$E).call(this,e.expression);if(!e.policy||"AnyOn"===e.policy){for(const t of e.ids){if(!gg(GE,this).has(t))return wm("Optional content group not found: ".concat(t)),!0;if(gg(GE,this).get(t).visible)return!0}return!1}if("AllOn"===e.policy){for(const t of e.ids){if(!gg(GE,this).has(t))return wm("Optional content group not found: ".concat(t)),!0;if(!gg(GE,this).get(t).visible)return!1}return!0}if("AnyOff"===e.policy){for(const t of e.ids){if(!gg(GE,this).has(t))return wm("Optional content group not found: ".concat(t)),!0;if(!gg(GE,this).get(t).visible)return!0}return!1}if("AllOff"===e.policy){for(const t of e.ids){if(!gg(GE,this).has(t))return wm("Optional content group not found: ".concat(t)),!0;if(gg(GE,this).get(t).visible)return!1}return!0}return wm("Unknown optional content policy ".concat(e.policy,".")),!0}return wm("Unknown group type ".concat(e.type,".")),!0}setVisibility(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];const i=gg(GE,this).get(e);if(i){if(n&&t&&i.rbGroups.length)for(const t of i.rbGroups)for(const n of t){var r;if(n!==e)null===(r=gg(GE,this).get(n))||void 0===r||r._setVisible(BE,!1,!0)}i._setVisible(BE,!!t,!0),mg(qE,this,null)}else wm("Optional content group not found: ".concat(e))}setOCGState(e){let t,{state:n,preserveRB:i}=e;for(const r of n){switch(r){case"ON":case"OFF":case"Toggle":t=r;continue}const e=gg(GE,this).get(r);if(e)switch(t){case"ON":this.setVisibility(r,!0,i);break;case"OFF":this.setVisibility(r,!1,i);break;case"Toggle":this.setVisibility(r,!e.visible,i)}}mg(qE,this,null)}get hasInitialVisibility(){return null===gg(KE,this)||this.getHash()===gg(KE,this)}getOrder(){return gg(GE,this).size?gg(YE,this)?gg(YE,this).slice():[...gg(GE,this).keys()]:null}getGroup(e){return gg(GE,this).get(e)||null}getHash(){if(null!==gg(qE,this))return gg(qE,this);const e=new mb;for(const[t,n]of gg(GE,this))e.update("".concat(t,":").concat(n.visible));return mg(qE,this,e.hexdigest())}[Symbol.iterator](){return gg(GE,this).entries()}}function $E(e){const t=e.length;if(t<2)return!0;const n=e[0];for(let i=1;i<t;i++){const t=e[i];let r;if(Array.isArray(t))r=pg(XE,this,$E).call(this,t);else{if(!gg(GE,this).has(t))return wm("Optional content group not found: ".concat(t)),!0;r=gg(GE,this).get(t).visible}switch(n){case"And":if(!r)return!1;break;case"Or":if(r)return!0;break;case"Not":return!r;default:return!0}}return"And"===n}class JE{constructor(e,t){let{disableRange:n=!1,disableStream:i=!1}=t;xm(e,'PDFDataTransportStream - missing required "pdfDataRangeTransport" argument.');const{length:r,initialData:s,progressiveDone:o,contentDispositionFilename:a}=e;if(this._queuedChunks=[],this._progressiveDone=o,this._contentDispositionFilename=a,(null===s||void 0===s?void 0:s.length)>0){const e=s instanceof Uint8Array&&s.byteLength===s.buffer.byteLength?s.buffer:new Uint8Array(s).buffer;this._queuedChunks.push(e)}this._pdfDataRangeTransport=e,this._isStreamingSupported=!i,this._isRangeSupported=!n,this._contentLength=r,this._fullRequestReader=null,this._rangeReaders=[],e.addRangeListener((e,t)=>{this._onReceiveData({begin:e,chunk:t})}),e.addProgressListener((e,t)=>{this._onProgress({loaded:e,total:t})}),e.addProgressiveReadListener(e=>{this._onReceiveData({chunk:e})}),e.addProgressiveDoneListener(()=>{this._onProgressiveDone()}),e.transportReady()}_onReceiveData(e){let{begin:t,chunk:n}=e;const i=n instanceof Uint8Array&&n.byteLength===n.buffer.byteLength?n.buffer:new Uint8Array(n).buffer;if(void 0===t)this._fullRequestReader?this._fullRequestReader._enqueue(i):this._queuedChunks.push(i);else{xm(this._rangeReaders.some(function(e){return e._begin===t&&(e._enqueue(i),!0)}),"_onReceiveData - no `PDFDataTransportStreamRangeReader` instance found.")}}get _progressiveDataLength(){var e,t;return null!==(e=null===(t=this._fullRequestReader)||void 0===t?void 0:t._loaded)&&void 0!==e?e:0}_onProgress(e){var t,n,i,r;void 0===e.total?null===(t=this._rangeReaders[0])||void 0===t||null===(n=t.onProgress)||void 0===n||n.call(t,{loaded:e.loaded}):null===(i=this._fullRequestReader)||void 0===i||null===(r=i.onProgress)||void 0===r||r.call(i,{loaded:e.loaded,total:e.total})}_onProgressiveDone(){var e;null===(e=this._fullRequestReader)||void 0===e||e.progressiveDone(),this._progressiveDone=!0}_removeRangeReader(e){const t=this._rangeReaders.indexOf(e);t>=0&&this._rangeReaders.splice(t,1)}getFullReader(){xm(!this._fullRequestReader,"PDFDataTransportStream.getFullReader can only be called once.");const e=this._queuedChunks;return this._queuedChunks=null,new ZE(this,e,this._progressiveDone,this._contentDispositionFilename)}getRangeReader(e,t){if(t<=this._progressiveDataLength)return null;const n=new eC(this,e,t);return this._pdfDataRangeTransport.requestDataRange(e,t),this._rangeReaders.push(n),n}cancelAllRequests(e){var t;null===(t=this._fullRequestReader)||void 0===t||t.cancel(e);for(const n of this._rangeReaders.slice(0))n.cancel(e);this._pdfDataRangeTransport.abort()}}class ZE{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;this._stream=e,this._done=n||!1,this._filename=ev(i)?i:null,this._queuedChunks=t||[],this._loaded=0;for(const r of this._queuedChunks)this._loaded+=r.byteLength;this._requests=[],this._headersReady=Promise.resolve(),e._fullRequestReader=this,this.onProgress=null}_enqueue(e){if(!this._done){if(this._requests.length>0){this._requests.shift().resolve({value:e,done:!1})}else this._queuedChunks.push(e);this._loaded+=e.byteLength}}get headersReady(){return this._headersReady}get filename(){return this._filename}get isRangeSupported(){return this._stream._isRangeSupported}get isStreamingSupported(){return this._stream._isStreamingSupported}get contentLength(){return this._stream._contentLength}async read(){if(this._queuedChunks.length>0){return{value:this._queuedChunks.shift(),done:!1}}if(this._done)return{value:void 0,done:!0};const e=Promise.withResolvers();return this._requests.push(e),e.promise}cancel(e){this._done=!0;for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0}progressiveDone(){this._done||(this._done=!0)}}class eC{constructor(e,t,n){this._stream=e,this._begin=t,this._end=n,this._queuedChunk=null,this._requests=[],this._done=!1,this.onProgress=null}_enqueue(e){if(!this._done){if(0===this._requests.length)this._queuedChunk=e;else{this._requests.shift().resolve({value:e,done:!1});for(const e of this._requests)e.resolve({value:void 0,done:!0});this._requests.length=0}this._done=!0,this._stream._removeRangeReader(this)}}get isStreamingSupported(){return!1}async read(){if(this._queuedChunk){const e=this._queuedChunk;return this._queuedChunk=null,{value:e,done:!1}}if(this._done)return{value:void 0,done:!0};const e=Promise.withResolvers();return this._requests.push(e),e.promise}cancel(e){this._done=!0;for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0,this._stream._removeRangeReader(this)}}function tC(e,t){const n=new Headers;if(!e||!t||"object"!==typeof t)return n;for(const i in t){const e=t[i];void 0!==e&&n.append(i,e)}return n}function nC(e){var t,n;return null!==(t=null===(n=URL.parse(e))||void 0===n?void 0:n.origin)&&void 0!==t?t:null}function iC(e){let{responseHeaders:t,isHttp:n,rangeChunkSize:i,disableRange:r}=e;const s={allowRangeRequests:!1,suggestedLength:void 0},o=parseInt(t.get("Content-Length"),10);if(!Number.isInteger(o))return s;if(s.suggestedLength=o,o<=2*i)return s;if(r||!n)return s;if("bytes"!==t.get("Accept-Ranges"))return s;return"identity"!==(t.get("Content-Encoding")||"identity")||(s.allowRangeRequests=!0),s}function rC(e){const t=e.get("Content-Disposition");if(t){let e=function(e){let t=!0,n=i("filename\\*","i").exec(e);if(n){n=n[1];let e=o(n);return e=unescape(e),e=a(e),e=l(e),s(e)}if(n=function(e){const t=[];let n;const r=i("filename\\*((?!0\\d)\\d+)(\\*?)","ig");for(;null!==(n=r.exec(e));){let[,e,i,r]=n;if(e=parseInt(e,10),e in t){if(0===e)break}else t[e]=[i,r]}const s=[];for(let i=0;i<t.length&&i in t;++i){let[e,n]=t[i];n=o(n),e&&(n=unescape(n),0===i&&(n=a(n))),s.push(n)}return s.join("")}(e),n)return s(l(n));if(n=i("filename","i").exec(e),n){n=n[1];let e=o(n);return e=l(e),s(e)}function i(e,t){return new RegExp("(?:^|;)\\s*"+e+'\\s*=\\s*([^";\\s][^;\\s]*|"(?:[^"\\\\]|\\\\"?)+"?)',t)}function r(e,n){if(e){if(!/^[\x00-\xFF]+$/.test(n))return n;try{const i=new TextDecoder(e,{fatal:!0}),r=Dm(n);n=i.decode(r),t=!1}catch(i){}}return n}function s(e){return t&&/[\x80-\xff]/.test(e)&&(e=r("utf-8",e),t&&(e=r("iso-8859-1",e))),e}function o(e){if(e.startsWith('"')){const t=e.slice(1).split('\\"');for(let e=0;e<t.length;++e){const n=t[e].indexOf('"');-1!==n&&(t[e]=t[e].slice(0,n),t.length=e+1),t[e]=t[e].replaceAll(/\\(.)/g,"$1")}e=t.join('"')}return e}function a(e){const t=e.indexOf("'");return-1===t?e:r(e.slice(0,t),e.slice(t+1).replace(/^[^']*'/,""))}function l(e){return!e.startsWith("=?")||/[\x00-\x19\x80-\xff]/.test(e)?e:e.replaceAll(/=\?([\w-]*)\?([QqBb])\?((?:[^?]|\?(?!=))*)\?=/g,function(e,t,n,i){if("q"===n||"Q"===n)return r(t,i=(i=i.replaceAll("_"," ")).replaceAll(/=([0-9a-fA-F]{2})/g,function(e,t){return String.fromCharCode(parseInt(t,16))}));try{i=atob(i)}catch(s){}return r(t,i)})}return""}(t);if(e.includes("%"))try{e=decodeURIComponent(e)}catch(n){}if(ev(e))return e}return null}function sC(e,t){return new Im("Unexpected server response (".concat(e,') while retrieving PDF "').concat(t,'".'),e,404===e||0===e&&t.startsWith("file:"))}function oC(e){return 200===e||206===e}function aC(e,t,n){return{method:"GET",headers:e,signal:n.signal,mode:"cors",credentials:t?"include":"same-origin",redirect:"follow"}}function lC(e){return e instanceof Uint8Array?e.buffer:e instanceof ArrayBuffer?e:(wm("getArrayBuffer - unexpected data format: ".concat(e)),new Uint8Array(e).buffer)}class cC{constructor(e){Tt(this,"_responseOrigin",null),this.source=e,this.isHttp=/^https?:/i.test(e.url),this.headers=tC(this.isHttp,e.httpHeaders),this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){var e,t;return null!==(e=null===(t=this._fullRequestReader)||void 0===t?void 0:t._loaded)&&void 0!==e?e:0}getFullReader(){return xm(!this._fullRequestReader,"PDFFetchStream.getFullReader can only be called once."),this._fullRequestReader=new uC(this),this._fullRequestReader}getRangeReader(e,t){if(t<=this._progressiveDataLength)return null;const n=new hC(this,e,t);return this._rangeRequestReaders.push(n),n}cancelAllRequests(e){var t;null===(t=this._fullRequestReader)||void 0===t||t.cancel(e);for(const n of this._rangeRequestReaders.slice(0))n.cancel(e)}}class uC{constructor(e){this._stream=e,this._reader=null,this._loaded=0,this._filename=null;const t=e.source;this._withCredentials=t.withCredentials||!1,this._contentLength=t.length,this._headersCapability=Promise.withResolvers(),this._disableRange=t.disableRange||!1,this._rangeChunkSize=t.rangeChunkSize,this._rangeChunkSize||this._disableRange||(this._disableRange=!0),this._abortController=new AbortController,this._isStreamingSupported=!t.disableStream,this._isRangeSupported=!t.disableRange;const n=new Headers(e.headers),i=t.url;fetch(i,aC(n,this._withCredentials,this._abortController)).then(t=>{if(e._responseOrigin=nC(t.url),!oC(t.status))throw sC(t.status,i);this._reader=t.body.getReader(),this._headersCapability.resolve();const n=t.headers,{allowRangeRequests:r,suggestedLength:s}=iC({responseHeaders:n,isHttp:e.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=r,this._contentLength=s||this._contentLength,this._filename=rC(n),!this._isStreamingSupported&&this._isRangeSupported&&this.cancel(new Mm("Streaming is disabled."))}).catch(this._headersCapability.reject),this.onProgress=null}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){var e;await this._headersCapability.promise;const{value:t,done:n}=await this._reader.read();return n?{value:t,done:n}:(this._loaded+=t.byteLength,null===(e=this.onProgress)||void 0===e||e.call(this,{loaded:this._loaded,total:this._contentLength}),{value:lC(t),done:!1})}cancel(e){var t;null===(t=this._reader)||void 0===t||t.cancel(e),this._abortController.abort()}}class hC{constructor(e,t,n){this._stream=e,this._reader=null,this._loaded=0;const i=e.source;this._withCredentials=i.withCredentials||!1,this._readCapability=Promise.withResolvers(),this._isStreamingSupported=!i.disableStream,this._abortController=new AbortController;const r=new Headers(e.headers);r.append("Range","bytes=".concat(t,"-").concat(n-1));const s=i.url;fetch(s,aC(r,this._withCredentials,this._abortController)).then(t=>{const n=nC(t.url);if(n!==e._responseOrigin)throw new Error('Expected range response-origin "'.concat(n,'" to match "').concat(e._responseOrigin,'".'));if(!oC(t.status))throw sC(t.status,s);this._readCapability.resolve(),this._reader=t.body.getReader()}).catch(this._readCapability.reject),this.onProgress=null}get isStreamingSupported(){return this._isStreamingSupported}async read(){var e;await this._readCapability.promise;const{value:t,done:n}=await this._reader.read();return n?{value:t,done:n}:(this._loaded+=t.byteLength,null===(e=this.onProgress)||void 0===e||e.call(this,{loaded:this._loaded}),{value:lC(t),done:!1})}cancel(e){var t;null===(t=this._reader)||void 0===t||t.cancel(e),this._abortController.abort()}}class dC{constructor(e){let{url:t,httpHeaders:n,withCredentials:i}=e;Tt(this,"_responseOrigin",null),this.url=t,this.isHttp=/^https?:/i.test(t),this.headers=tC(this.isHttp,n),this.withCredentials=i||!1,this.currXhrId=0,this.pendingRequests=Object.create(null)}request(e){const t=new XMLHttpRequest,n=this.currXhrId++,i=this.pendingRequests[n]={xhr:t};t.open("GET",this.url),t.withCredentials=this.withCredentials;for(const[r,s]of this.headers)t.setRequestHeader(r,s);return this.isHttp&&"begin"in e&&"end"in e?(t.setRequestHeader("Range","bytes=".concat(e.begin,"-").concat(e.end-1)),i.expectedStatus=206):i.expectedStatus=200,t.responseType="arraybuffer",xm(e.onError,"Expected `onError` callback to be provided."),t.onerror=()=>{e.onError(t.status)},t.onreadystatechange=this.onStateChange.bind(this,n),t.onprogress=this.onProgress.bind(this,n),i.onHeadersReceived=e.onHeadersReceived,i.onDone=e.onDone,i.onError=e.onError,i.onProgress=e.onProgress,t.send(null),n}onProgress(e,t){var n;const i=this.pendingRequests[e];i&&(null===(n=i.onProgress)||void 0===n||n.call(i,t))}onStateChange(e,t){const n=this.pendingRequests[e];if(!n)return;const i=n.xhr;if(i.readyState>=2&&n.onHeadersReceived&&(n.onHeadersReceived(),delete n.onHeadersReceived),4!==i.readyState)return;if(!(e in this.pendingRequests))return;if(delete this.pendingRequests[e],0===i.status&&this.isHttp)return void n.onError(i.status);const r=i.status||200;if(!(200===r&&206===n.expectedStatus)&&r!==n.expectedStatus)return void n.onError(i.status);const s=function(e){const t=e.response;return"string"!==typeof t?t:Dm(t).buffer}(i);if(206===r){const e=i.getResponseHeader("Content-Range"),t=/bytes (\d+)-(\d+)\/(\d+)/.exec(e);t?n.onDone({begin:parseInt(t[1],10),chunk:s}):(wm('Missing or invalid "Content-Range" header.'),n.onError(0))}else s?n.onDone({begin:0,chunk:s}):n.onError(i.status)}getRequestXhr(e){return this.pendingRequests[e].xhr}isPendingRequest(e){return e in this.pendingRequests}abortRequest(e){const t=this.pendingRequests[e].xhr;delete this.pendingRequests[e],t.abort()}}class pC{constructor(e){this._source=e,this._manager=new dC(e),this._rangeChunkSize=e.rangeChunkSize,this._fullRequestReader=null,this._rangeRequestReaders=[]}_onRangeRequestReaderClosed(e){const t=this._rangeRequestReaders.indexOf(e);t>=0&&this._rangeRequestReaders.splice(t,1)}getFullReader(){return xm(!this._fullRequestReader,"PDFNetworkStream.getFullReader can only be called once."),this._fullRequestReader=new fC(this._manager,this._source),this._fullRequestReader}getRangeReader(e,t){const n=new gC(this._manager,e,t);return n.onClosed=this._onRangeRequestReaderClosed.bind(this),this._rangeRequestReaders.push(n),n}cancelAllRequests(e){var t;null===(t=this._fullRequestReader)||void 0===t||t.cancel(e);for(const n of this._rangeRequestReaders.slice(0))n.cancel(e)}}class fC{constructor(e,t){this._manager=e,this._url=t.url,this._fullRequestId=e.request({onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)}),this._headersCapability=Promise.withResolvers(),this._disableRange=t.disableRange||!1,this._contentLength=t.length,this._rangeChunkSize=t.rangeChunkSize,this._rangeChunkSize||this._disableRange||(this._disableRange=!0),this._isStreamingSupported=!1,this._isRangeSupported=!1,this._cachedChunks=[],this._requests=[],this._done=!1,this._storedError=void 0,this._filename=null,this.onProgress=null}_onHeadersReceived(){const e=this._fullRequestId,t=this._manager.getRequestXhr(e);this._manager._responseOrigin=nC(t.responseURL);const n=t.getAllResponseHeaders(),i=new Headers(n?n.trimStart().replace(/[^\S ]+$/,"").split(/[\r\n]+/).map(e=>{const[t,...n]=e.split(": ");return[t,n.join(": ")]}):[]),{allowRangeRequests:r,suggestedLength:s}=iC({responseHeaders:i,isHttp:this._manager.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});r&&(this._isRangeSupported=!0),this._contentLength=s||this._contentLength,this._filename=rC(i),this._isRangeSupported&&this._manager.abortRequest(e),this._headersCapability.resolve()}_onDone(e){if(e)if(this._requests.length>0){this._requests.shift().resolve({value:e.chunk,done:!1})}else this._cachedChunks.push(e.chunk);if(this._done=!0,!(this._cachedChunks.length>0)){for(const e of this._requests)e.resolve({value:void 0,done:!0});this._requests.length=0}}_onError(e){this._storedError=sC(e,this._url),this._headersCapability.reject(this._storedError);for(const t of this._requests)t.reject(this._storedError);this._requests.length=0,this._cachedChunks.length=0}_onProgress(e){var t;null===(t=this.onProgress)||void 0===t||t.call(this,{loaded:e.loaded,total:e.lengthComputable?e.total:this._contentLength})}get filename(){return this._filename}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}get contentLength(){return this._contentLength}get headersReady(){return this._headersCapability.promise}async read(){if(await this._headersCapability.promise,this._storedError)throw this._storedError;if(this._cachedChunks.length>0){return{value:this._cachedChunks.shift(),done:!1}}if(this._done)return{value:void 0,done:!0};const e=Promise.withResolvers();return this._requests.push(e),e.promise}cancel(e){this._done=!0,this._headersCapability.reject(e);for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._fullRequestId)&&this._manager.abortRequest(this._fullRequestId),this._fullRequestReader=null}}class gC{constructor(e,t,n){this._manager=e,this._url=e.url,this._requestId=e.request({begin:t,end:n,onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)}),this._requests=[],this._queuedChunk=null,this._done=!1,this._storedError=void 0,this.onProgress=null,this.onClosed=null}_onHeadersReceived(){var e;const t=nC(null===(e=this._manager.getRequestXhr(this._requestId))||void 0===e?void 0:e.responseURL);t!==this._manager._responseOrigin&&(this._storedError=new Error('Expected range response-origin "'.concat(t,'" to match "').concat(this._manager._responseOrigin,'".')),this._onError(0))}_close(){var e;null===(e=this.onClosed)||void 0===e||e.call(this,this)}_onDone(e){const t=e.chunk;if(this._requests.length>0){this._requests.shift().resolve({value:t,done:!1})}else this._queuedChunk=t;this._done=!0;for(const n of this._requests)n.resolve({value:void 0,done:!0});this._requests.length=0,this._close()}_onError(e){var t;null!==(t=this._storedError)&&void 0!==t||(this._storedError=sC(e,this._url));for(const n of this._requests)n.reject(this._storedError);this._requests.length=0,this._queuedChunk=null}_onProgress(e){var t;this.isStreamingSupported||(null===(t=this.onProgress)||void 0===t||t.call(this,{loaded:e.loaded}))}get isStreamingSupported(){return!1}async read(){if(this._storedError)throw this._storedError;if(null!==this._queuedChunk){const e=this._queuedChunk;return this._queuedChunk=null,{value:e,done:!1}}if(this._done)return{value:void 0,done:!0};const e=Promise.withResolvers();return this._requests.push(e),e.promise}cancel(e){this._done=!0;for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._requestId)&&this._manager.abortRequest(this._requestId),this._close()}}const mC=/^[a-z][a-z0-9\-+.]+:/i;class vC{constructor(e){this.source=e,this.url=function(e){if(mC.test(e))return new URL(e);const t=process.getBuiltinModule("url");return new URL(t.pathToFileURL(e))}(e.url),xm("file:"===this.url.protocol,"PDFNodeStream only supports file:// URLs."),this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){var e,t;return null!==(e=null===(t=this._fullRequestReader)||void 0===t?void 0:t._loaded)&&void 0!==e?e:0}getFullReader(){return xm(!this._fullRequestReader,"PDFNodeStream.getFullReader can only be called once."),this._fullRequestReader=new yC(this),this._fullRequestReader}getRangeReader(e,t){if(t<=this._progressiveDataLength)return null;const n=new _C(this,e,t);return this._rangeRequestReaders.push(n),n}cancelAllRequests(e){var t;null===(t=this._fullRequestReader)||void 0===t||t.cancel(e);for(const n of this._rangeRequestReaders.slice(0))n.cancel(e)}}class yC{constructor(e){this._url=e.url,this._done=!1,this._storedError=null,this.onProgress=null;const t=e.source;this._contentLength=t.length,this._loaded=0,this._filename=null,this._disableRange=t.disableRange||!1,this._rangeChunkSize=t.rangeChunkSize,this._rangeChunkSize||this._disableRange||(this._disableRange=!0),this._isStreamingSupported=!t.disableStream,this._isRangeSupported=!t.disableRange,this._readableStream=null,this._readCapability=Promise.withResolvers(),this._headersCapability=Promise.withResolvers();const n=process.getBuiltinModule("fs");n.promises.lstat(this._url).then(e=>{this._contentLength=e.size,this._setReadableStream(n.createReadStream(this._url)),this._headersCapability.resolve()},e=>{"ENOENT"===e.code&&(e=sC(0,this._url.href)),this._storedError=e,this._headersCapability.reject(e)})}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){var e;if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const t=this._readableStream.read();if(null===t)return this._readCapability=Promise.withResolvers(),this.read();this._loaded+=t.length,null===(e=this.onProgress)||void 0===e||e.call(this,{loaded:this._loaded,total:this._contentLength});return{value:new Uint8Array(t).buffer,done:!1}}cancel(e){this._readableStream?this._readableStream.destroy(e):this._error(e)}_error(e){this._storedError=e,this._readCapability.resolve()}_setReadableStream(e){this._readableStream=e,e.on("readable",()=>{this._readCapability.resolve()}),e.on("end",()=>{e.destroy(),this._done=!0,this._readCapability.resolve()}),e.on("error",e=>{this._error(e)}),!this._isStreamingSupported&&this._isRangeSupported&&this._error(new Mm("streaming is disabled")),this._storedError&&this._readableStream.destroy(this._storedError)}}class _C{constructor(e,t,n){this._url=e.url,this._done=!1,this._storedError=null,this.onProgress=null,this._loaded=0,this._readableStream=null,this._readCapability=Promise.withResolvers();const i=e.source;this._isStreamingSupported=!i.disableStream;const r=process.getBuiltinModule("fs");this._setReadableStream(r.createReadStream(this._url,{start:t,end:n-1}))}get isStreamingSupported(){return this._isStreamingSupported}async read(){var e;if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const t=this._readableStream.read();if(null===t)return this._readCapability=Promise.withResolvers(),this.read();this._loaded+=t.length,null===(e=this.onProgress)||void 0===e||e.call(this,{loaded:this._loaded});return{value:new Uint8Array(t).buffer,done:!1}}cancel(e){this._readableStream?this._readableStream.destroy(e):this._error(e)}_error(e){this._storedError=e,this._readCapability.resolve()}_setReadableStream(e){this._readableStream=e,e.on("readable",()=>{this._readCapability.resolve()}),e.on("end",()=>{e.destroy(),this._done=!0,this._readCapability.resolve()}),e.on("error",e=>{this._error(e)}),this._storedError&&this._readableStream.destroy(this._storedError)}}const wC=Symbol("INITIAL_DATA");var bC=new WeakMap,xC=new WeakSet;class kC{constructor(){hg(this,xC),dg(this,bC,Object.create(null))}get(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(t){const n=pg(xC,this,EC).call(this,e);return n.promise.then(()=>t(n.data)),null}const n=gg(bC,this)[e];if(!n||n.data===wC)throw new Error("Requesting object that isn't resolved yet ".concat(e,"."));return n.data}has(e){const t=gg(bC,this)[e];return!!t&&t.data!==wC}delete(e){const t=gg(bC,this)[e];return!(!t||t.data===wC)&&(delete gg(bC,this)[e],!0)}resolve(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;const n=pg(xC,this,EC).call(this,e);n.data=t,n.resolve()}clear(){for(const t in gg(bC,this)){var e;const{data:n}=gg(bC,this)[t];null===n||void 0===n||null===(e=n.bitmap)||void 0===e||e.close()}mg(bC,this,Object.create(null))}*[Symbol.iterator](){for(const e in gg(bC,this)){const{data:t}=gg(bC,this)[e];t!==wC&&(yield[e,t])}}}function EC(e){var t;return(t=gg(bC,this))[e]||(t[e]=It(It({},Promise.withResolvers()),{},{data:wC}))}var CC=new WeakMap,SC=new WeakMap,AC=new WeakMap,TC=new WeakMap,PC=new WeakMap,IC=new WeakMap,RC=new WeakMap,MC=new WeakMap,NC=new WeakMap,DC=new WeakMap,OC=new WeakMap,LC=new WeakMap,FC=new WeakMap,jC=new WeakMap,BC=new WeakMap,WC=new WeakMap,UC=new WeakMap,zC=new WeakMap,HC=new WeakSet;class VC{constructor(e){var t;let{textContentSource:n,container:i,viewport:r}=e;if(hg(this,HC),dg(this,CC,Promise.withResolvers()),dg(this,SC,null),dg(this,AC,!1),dg(this,TC,!(null===(t=globalThis.FontInspector)||void 0===t||!t.enabled)),dg(this,PC,null),dg(this,IC,null),dg(this,RC,0),dg(this,MC,0),dg(this,NC,null),dg(this,DC,null),dg(this,OC,0),dg(this,LC,0),dg(this,FC,Object.create(null)),dg(this,jC,[]),dg(this,BC,null),dg(this,WC,[]),dg(this,UC,new WeakMap),dg(this,zC,null),n instanceof ReadableStream)mg(BC,this,n);else{if("object"!==typeof n)throw new Error('No "textContentSource" parameter specified.');mg(BC,this,new ReadableStream({start(e){e.enqueue(n),e.close()}}))}mg(SC,this,mg(DC,this,i)),mg(LC,this,r.scale*hv.pixelRatio),mg(OC,this,r.rotation),mg(IC,this,{div:null,properties:null,ctx:null});const{pageWidth:s,pageHeight:o,pageX:a,pageY:l}=r.rawDims;mg(zC,this,[1,0,0,-1,-a,l+o]),mg(MC,this,s),mg(RC,this,o),QC.call(VC),uv(i,r),gg(CC,this).promise.finally(()=>{nS._.delete(this),mg(IC,this,null),mg(FC,this,null)}).catch(()=>{})}static get fontFamilyMap(){const{isWindows:e,isFirefox:t}=Om.platform;return Cm(this,"fontFamilyMap",new Map([["sans-serif","".concat(e&&t?"Calibri, ":"","sans-serif")],["monospace","".concat(e&&t?"Lucida Console, ":"","monospace")]]))}render(){const e=()=>{gg(NC,this).read().then(t=>{var n;let{value:i,done:r}=t;r?gg(CC,this).resolve():(null!==(n=gg(PC,this))&&void 0!==n||mg(PC,this,i.lang),Object.assign(gg(FC,this),i.styles),pg(HC,this,qC).call(this,i.items),e())},gg(CC,this).reject)};return mg(NC,this,gg(BC,this).getReader()),nS._.add(this),e(),gg(CC,this).promise}update(e){let{viewport:t,onBefore:n=null}=e;const i=t.scale*hv.pixelRatio,r=t.rotation;if(r!==gg(OC,this)&&(null===n||void 0===n||n(),mg(OC,this,r),uv(gg(DC,this),{rotation:r})),i!==gg(LC,this)){null===n||void 0===n||n(),mg(LC,this,i);const e={div:null,properties:null,ctx:YC.call(VC,gg(PC,this))};for(const t of gg(WC,this))e.properties=gg(UC,this).get(t),e.div=t,pg(HC,this,KC).call(this,e)}}cancel(){var e;const t=new Mm("TextLayer task cancelled.");null===(e=gg(NC,this))||void 0===e||e.cancel(t).catch(()=>{}),mg(NC,this,null),gg(CC,this).reject(t)}get textDivs(){return gg(WC,this)}get textContentItemsStr(){return gg(jC,this)}static cleanup(){if(!(pg(VC,this,nS)._.size>0)){pg(VC,this,JC)._.clear();for(const{canvas:e}of pg(VC,this,ZC)._.values())e.remove();pg(VC,this,ZC)._.clear()}}}function qC(e){var t,n;if(gg(AC,this))return;null!==(n=(t=gg(IC,this)).ctx)&&void 0!==n||(t.ctx=YC.call(Sg,gg(PC,this)));const i=gg(WC,this),r=gg(jC,this);for(const s of e){if(i.length>1e5)return wm("Ignoring additional textDivs for performance reasons."),void mg(AC,this,!0);if(void 0!==s.str)r.push(s.str),pg(HC,this,GC).call(this,s);else if("beginMarkedContentProps"===s.type||"beginMarkedContent"===s.type){const e=gg(SC,this);mg(SC,this,document.createElement("span")),gg(SC,this).classList.add("markedContent"),s.id&&gg(SC,this).setAttribute("id","".concat(s.id)),e.append(gg(SC,this))}else"endMarkedContent"===s.type&&mg(SC,this,gg(SC,this).parentNode)}}function GC(e){const t=document.createElement("span"),n={angle:0,canvasWidth:0,hasText:""!==e.str,hasEOL:e.hasEOL,fontSize:0};gg(WC,this).push(t);const i=Fm.transform(gg(zC,this),e.transform);let r=Math.atan2(i[1],i[0]);const s=gg(FC,this)[e.fontName];s.vertical&&(r+=Math.PI/2);let o=gg(TC,this)&&s.fontSubstitution||s.fontFamily;o=Sg.fontFamilyMap.get(o)||o;const a=Math.hypot(i[2],i[3]),l=a*$C.call(Sg,o,s,gg(PC,this));let c,u;0===r?(c=i[4],u=i[5]-l):(c=i[4]+l*Math.sin(r),u=i[5]-l*Math.cos(r));const h="calc(var(--total-scale-factor) *",d=t.style;gg(SC,this)===gg(DC,this)?(d.left="".concat((100*c/gg(MC,this)).toFixed(2),"%"),d.top="".concat((100*u/gg(RC,this)).toFixed(2),"%")):(d.left="".concat(h).concat(c.toFixed(2),"px)"),d.top="".concat(h).concat(u.toFixed(2),"px)")),d.fontSize="".concat(h).concat((tS._*a).toFixed(2),"px)"),d.fontFamily=o,n.fontSize=a,t.setAttribute("role","presentation"),t.textContent=e.str,t.dir=e.dir,gg(TC,this)&&(t.dataset.fontName=s.fontSubstitutionLoadedName||e.fontName),0!==r&&(n.angle=r*(180/Math.PI));let p=!1;if(e.str.length>1)p=!0;else if(" "!==e.str&&e.transform[0]!==e.transform[3]){const t=Math.abs(e.transform[0]),n=Math.abs(e.transform[3]);t!==n&&Math.max(t,n)/Math.min(t,n)>1.5&&(p=!0)}if(p&&(n.canvasWidth=s.vertical?e.height:e.width),gg(UC,this).set(t,n),gg(IC,this).div=t,gg(IC,this).properties=n,pg(HC,this,KC).call(this,gg(IC,this)),n.hasText&&gg(SC,this).append(t),n.hasEOL){const e=document.createElement("br");e.setAttribute("role","presentation"),gg(SC,this).append(e)}}function KC(e){const{div:t,properties:n,ctx:i}=e,{style:r}=t;let s="";if(tS._>1&&(s="scale(".concat(1/tS._,")")),0!==n.canvasWidth&&n.hasText){const{fontFamily:e}=r,{canvasWidth:o,fontSize:a}=n;XC.call(Sg,i,a*gg(LC,this),e);const{width:l}=i.measureText(t.textContent);l>0&&(s="scaleX(".concat(o*gg(LC,this)/l,") ").concat(s))}0!==n.angle&&(s="rotate(".concat(n.angle,"deg) ").concat(s)),s.length>0&&(r.transform=s)}function YC(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=pg(Sg,this,ZC)._.get(e||(e=""));if(!t){const n=document.createElement("canvas");n.className="hiddenCanvasElement",n.lang=e,document.body.append(n),t=n.getContext("2d",{alpha:!1,willReadFrequently:!0}),pg(Sg,this,ZC)._.set(e,t),pg(Sg,this,eS)._.set(t,{size:0,family:""})}return t}function XC(e,t,n){const i=pg(Sg,this,eS)._.get(e);t===i.size&&n===i.family||(e.font="".concat(t,"px ").concat(n),i.size=t,i.family=n)}function QC(){if(null!==pg(Sg,this,tS)._)return;const e=document.createElement("div");e.style.opacity=0,e.style.lineHeight=1,e.style.fontSize="1px",e.style.position="absolute",e.textContent="X",document.body.append(e),tS._=pg(Sg,this,e.getBoundingClientRect().height),e.remove()}function $C(e,t,n){const i=pg(Sg,this,JC)._.get(e);if(i)return i;const r=pg(Sg,this,YC).call(this,n);r.canvas.width=r.canvas.height=30,pg(Sg,this,XC).call(this,r,30,e);const s=r.measureText(""),o=s.fontBoundingBoxAscent,a=Math.abs(s.fontBoundingBoxDescent);r.canvas.width=r.canvas.height=0;let l=.8;return o?l=o/(o+a):(Om.platform.isFirefox&&wm("Enable the `dom.textMetrics.fontBoundingBox.enabled` preference in `about:config` to improve TextLayer rendering."),t.ascent?l=t.ascent:t.descent&&(l=1+t.descent)),pg(Sg,this,JC)._.set(e,l),l}Sg=VC;var JC={_:new Map},ZC={_:new Map},eS={_:new WeakMap},tS={_:null},nS={_:new Set};function iS(){var e,t;let n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};"string"===typeof n||n instanceof URL?n={url:n}:(n instanceof ArrayBuffer||ArrayBuffer.isView(n))&&(n={data:n});const i=new rS,{docId:r}=i,s=n.url?function(e){if(e instanceof URL)return e.href;if("string"===typeof e){if(Lg)return e;const t=URL.parse(e,window.location);if(t)return t.href}throw new Error("Invalid PDF url data: either string or URL-object is expected in the url property.")}(n.url):null,o=n.data?function(e){if(Lg&&"undefined"!==typeof Buffer&&e instanceof Buffer)throw new Error("Please provide binary data as `Uint8Array`, rather than `Buffer`.");if(e instanceof Uint8Array&&e.byteLength===e.buffer.byteLength)return e;if("string"===typeof e)return Dm(e);if(e instanceof ArrayBuffer||ArrayBuffer.isView(e)||"object"===typeof e&&!isNaN(null===e||void 0===e?void 0:e.length))return new Uint8Array(e);throw new Error("Invalid PDF binary data: either TypedArray, string, or array-like object is expected in the data property.")}(n.data):null,a=n.httpHeaders||null,l=!0===n.withCredentials,c=null!==(e=n.password)&&void 0!==e?e:null,u=n.range instanceof hS?n.range:null,h=Number.isInteger(n.rangeChunkSize)&&n.rangeChunkSize>0?n.rangeChunkSize:65536;let d=n.worker instanceof xS?n.worker:null;const p=n.verbosity,f="string"!==typeof n.docBaseUrl||Zm(n.docBaseUrl)?null:n.docBaseUrl,g=Rb(n.cMapUrl),m=!1!==n.cMapPacked,v=n.CMapReaderFactory||(Lg?Lx:ox),y=Rb(n.iccUrl),_=Rb(n.standardFontDataUrl),w=n.StandardFontDataFactory||(Lg?Fx:Ix),b=Rb(n.wasmUrl),x=n.WasmFactory||(Lg?jx:Mx),k=!0!==n.stopAtErrors,E=Number.isInteger(n.maxImageSize)&&n.maxImageSize>-1?n.maxImageSize:-1,C=!1!==n.isEvalSupported,S="boolean"===typeof n.isOffscreenCanvasSupported?n.isOffscreenCanvasSupported:!Lg,A="boolean"===typeof n.isImageDecoderSupported?n.isImageDecoderSupported:!Lg&&(Om.platform.isFirefox||!globalThis.chrome),T=Number.isInteger(n.canvasMaxAreaInBytes)?n.canvasMaxAreaInBytes:-1,P="boolean"===typeof n.disableFontFace?n.disableFontFace:Lg,I=!0===n.fontExtraProperties,R=!0===n.enableXfa,M=n.ownerDocument||globalThis.document,N=!0===n.disableRange,D=!0===n.disableStream,O=!0===n.disableAutoFetch,L=!0===n.pdfBug,F=n.CanvasFactory||(Lg?Ox:rx),j=n.FilterFactory||(Lg?Dx:mx),B=!0===n.enableHWA,W=!1!==n.useWasm,U=u?u.length:null!==(t=n.length)&&void 0!==t?t:NaN,z="boolean"===typeof n.useSystemFonts?n.useSystemFonts:!Lg&&!P,H="boolean"===typeof n.useWorkerFetch?n.useWorkerFetch:!!(v===ox&&w===Ix&&x===Mx&&g&&_&&b&&nv(g,document.baseURI)&&nv(_,document.baseURI)&&nv(b,document.baseURI));vm(p);const V={canvasFactory:new F({ownerDocument:M,enableHWA:B}),filterFactory:new j({docId:r,ownerDocument:M}),cMapReaderFactory:H?null:new v({baseUrl:g,isCompressed:m}),standardFontDataFactory:H?null:new w({baseUrl:_}),wasmFactory:H?null:new x({baseUrl:b})};d||(d=xS.create({verbosity:p,port:NE.workerPort}),i._worker=d);const q={docId:r,apiVersion:"5.4.296",data:o,password:c,disableAutoFetch:O,rangeChunkSize:h,length:U,docBaseUrl:f,enableXfa:R,evaluatorOptions:{maxImageSize:E,disableFontFace:P,ignoreErrors:k,isEvalSupported:C,isOffscreenCanvasSupported:S,isImageDecoderSupported:A,canvasMaxAreaInBytes:T,fontExtraProperties:I,useSystemFonts:z,useWasm:W,useWorkerFetch:H,cMapUrl:g,iccUrl:y,standardFontDataUrl:_,wasmUrl:b}},G={ownerDocument:M,pdfBug:L,styleElement:null,loadingParams:{disableAutoFetch:O,enableXfa:R}};return d.promise.then(function(){if(i.destroyed)throw new Error("Loading aborted");if(d.destroyed)throw new Error("Worker was destroyed");const e=d.messageHandler.sendWithPromise("GetDocRequest",q,o?[o.buffer]:null);let t;if(u)t=new JE(u,{disableRange:N,disableStream:D});else if(!o){if(!s)throw new Error("getDocument - no `url` parameter provided.");const e=nv(s)?cC:Lg?vC:pC;t=new e({url:s,length:U,httpHeaders:a,withCredentials:l,rangeChunkSize:h,disableRange:N,disableStream:D})}return e.then(e=>{if(i.destroyed)throw new Error("Loading aborted");if(d.destroyed)throw new Error("Worker was destroyed");const n=new $b(r,e,d.port),s=new FS(n,i,t,G,V,B);i._transport=s,n.send("Ready",null)})}).catch(i._capability.reject),i}class rS{constructor(){Tt(this,"_capability",Promise.withResolvers()),Tt(this,"_transport",null),Tt(this,"_worker",null),Tt(this,"docId","d".concat((sS._=(Ag=sS._,Tg=Ag++,Ag),Tg))),Tt(this,"destroyed",!1),Tt(this,"onPassword",null),Tt(this,"onProgress",null)}get promise(){return this._capability.promise}async destroy(){var e;this.destroyed=!0;try{var t,n;null!==(t=this._worker)&&void 0!==t&&t.port&&(this._worker._pendingDestroy=!0),await(null===(n=this._transport)||void 0===n?void 0:n.destroy())}catch(r){var i;throw null!==(i=this._worker)&&void 0!==i&&i.port&&delete this._worker._pendingDestroy,r}this._transport=null,null===(e=this._worker)||void 0===e||e.destroy(),this._worker=null}async getData(){return this._transport.getData()}}var sS={_:0},oS=new WeakMap,aS=new WeakMap,lS=new WeakMap,cS=new WeakMap,uS=new WeakMap;class hS{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;dg(this,oS,Promise.withResolvers()),dg(this,aS,[]),dg(this,lS,[]),dg(this,cS,[]),dg(this,uS,[]),this.length=e,this.initialData=t,this.progressiveDone=n,this.contentDispositionFilename=i}addRangeListener(e){gg(uS,this).push(e)}addProgressListener(e){gg(cS,this).push(e)}addProgressiveReadListener(e){gg(lS,this).push(e)}addProgressiveDoneListener(e){gg(aS,this).push(e)}onDataRange(e,t){for(const n of gg(uS,this))n(e,t)}onDataProgress(e,t){gg(oS,this).promise.then(()=>{for(const n of gg(cS,this))n(e,t)})}onDataProgressiveRead(e){gg(oS,this).promise.then(()=>{for(const t of gg(lS,this))t(e)})}onDataProgressiveDone(){gg(oS,this).promise.then(()=>{for(const e of gg(aS,this))e()})}transportReady(){gg(oS,this).resolve()}requestDataRange(e,t){bm("Abstract method PDFDataRangeTransport.requestDataRange")}abort(){}}class dS{constructor(e,t){this._pdfInfo=e,this._transport=t}get annotationStorage(){return this._transport.annotationStorage}get canvasFactory(){return this._transport.canvasFactory}get filterFactory(){return this._transport.filterFactory}get numPages(){return this._pdfInfo.numPages}get fingerprints(){return this._pdfInfo.fingerprints}get isPureXfa(){return Cm(this,"isPureXfa",!!this._transport._htmlForXfa)}get allXfaHtml(){return this._transport._htmlForXfa}getPage(e){return this._transport.getPage(e)}getPageIndex(e){return this._transport.getPageIndex(e)}getDestinations(){return this._transport.getDestinations()}getDestination(e){return this._transport.getDestination(e)}getPageLabels(){return this._transport.getPageLabels()}getPageLayout(){return this._transport.getPageLayout()}getPageMode(){return this._transport.getPageMode()}getViewerPreferences(){return this._transport.getViewerPreferences()}getOpenAction(){return this._transport.getOpenAction()}getAttachments(){return this._transport.getAttachments()}getAnnotationsByType(e,t){return this._transport.getAnnotationsByType(e,t)}getJSActions(){return this._transport.getDocJSActions()}getOutline(){return this._transport.getOutline()}getOptionalContentConfig(){let{intent:e="display"}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{renderingIntent:t}=this._transport.getRenderingIntent(e);return this._transport.getOptionalContentConfig(t)}getPermissions(){return this._transport.getPermissions()}getMetadata(){return this._transport.getMetadata()}getMarkInfo(){return this._transport.getMarkInfo()}getData(){return this._transport.getData()}saveDocument(){return this._transport.saveDocument()}getDownloadInfo(){return this._transport.downloadInfoCapability.promise}cleanup(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return this._transport.startCleanup(e||this.isPureXfa)}destroy(){return this.loadingTask.destroy()}cachedPageNumber(e){return this._transport.cachedPageNumber(e)}get loadingParams(){return this._transport.loadingParams}get loadingTask(){return this._transport.loadingTask}getFieldObjects(){return this._transport.getFieldObjects()}hasJSActions(){return this._transport.hasJSActions()}getCalculationOrderIds(){return this._transport.getCalculationOrderIds()}}var pS=new WeakMap,fS=new WeakSet;class gS{constructor(e,t,n){let i=arguments.length>3&&void 0!==arguments[3]&&arguments[3];hg(this,fS),dg(this,pS,!1),this._pageIndex=e,this._pageInfo=t,this._transport=n,this._stats=i?new tv:null,this._pdfBug=i,this.commonObjs=n.commonObjs,this.objs=new kC,this._intentStates=new Map,this.destroyed=!1,this.recordedBBoxes=null}get pageNumber(){return this._pageIndex+1}get rotate(){return this._pageInfo.rotate}get ref(){return this._pageInfo.ref}get userUnit(){return this._pageInfo.userUnit}get view(){return this._pageInfo.view}getViewport(){let{scale:e,rotation:t=this.rotate,offsetX:n=0,offsetY:i=0,dontFlip:r=!1}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return new $m({viewBox:this.view,userUnit:this.userUnit,scale:e,rotation:t,offsetX:n,offsetY:i,dontFlip:r})}getAnnotations(){let{intent:e="display"}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{renderingIntent:t}=this._transport.getRenderingIntent(e);return this._transport.getAnnotations(this._pageIndex,t)}getJSActions(){return this._transport.getPageJSActions(this._pageIndex)}get filterFactory(){return this._transport.filterFactory}get isPureXfa(){return Cm(this,"isPureXfa",!!this._transport._htmlForXfa)}async getXfa(){var e;return(null===(e=this._transport._htmlForXfa)||void 0===e?void 0:e.children[this._pageIndex])||null}render(e){var t,n,i;let{canvasContext:r,canvas:s=r.canvas,viewport:o,intent:a="display",annotationMode:l=Kg.ENABLE,transform:c=null,background:u=null,optionalContentConfigPromise:h=null,annotationCanvasMap:d=null,pageColors:p=null,printAnnotationStorage:f=null,isEditing:g=!1,recordOperations:m=!1,operationsFilter:v=null}=e;null===(t=this._stats)||void 0===t||t.time("Overall");const y=this._transport.getRenderingIntent(a,l,f,g),{renderingIntent:_,cacheKey:w}=y;mg(pS,this,!1),h||(h=this._transport.getOptionalContentConfig(_));let b=this._intentStates.get(w);b||(b=Object.create(null),this._intentStates.set(w,b)),b.streamReaderCancelTimeout&&(clearTimeout(b.streamReaderCancelTimeout),b.streamReaderCancelTimeout=null);const x=!!(_&Ug);var k;b.displayReadyCapability||(b.displayReadyCapability=Promise.withResolvers(),b.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},null===(k=this._stats)||void 0===k||k.time("Page Request"),this._pumpOperatorList(y));const E=Boolean(this._pdfBug&&(null===(n=globalThis.StepperManager)||void 0===n?void 0:n.enabled)),C=!this.recordedBBoxes&&(m||E),S=e=>{if(b.renderTasks.delete(A),C){var t;const e=null===(t=A.gfx)||void 0===t?void 0:t.dependencyTracker.take();e&&(A.stepper&&A.stepper.setOperatorBBoxes(e,A.gfx.dependencyTracker.takeDebugMetadata()),m&&(this.recordedBBoxes=e))}var n;(x&&mg(pS,this,!0),pg(fS,this,mS).call(this),e?(A.capability.reject(e),this._abortOperatorList({intentState:b,reason:e instanceof Error?e:new Error(e)})):A.capability.resolve(),this._stats)&&(this._stats.timeEnd("Rendering"),this._stats.timeEnd("Overall"),null!==(n=globalThis.Stats)&&void 0!==n&&n.enabled&&globalThis.Stats.add(this.pageNumber,this._stats))},A=new zS({callback:S,params:{canvas:s,canvasContext:r,dependencyTracker:C?new dk(s,b.operatorList.length,E):null,viewport:o,transform:c,background:u},objs:this.objs,commonObjs:this.commonObjs,annotationCanvasMap:d,operatorList:b.operatorList,pageIndex:this._pageIndex,canvasFactory:this._transport.canvasFactory,filterFactory:this._transport.filterFactory,useRequestAnimationFrame:!x,pdfBug:this._pdfBug,pageColors:p,enableHWA:this._transport.enableHWA,operationsFilter:v});((i=b).renderTasks||(i.renderTasks=new Set)).add(A);const T=A.task;return Promise.all([b.displayReadyCapability.promise,h]).then(e=>{var t;let[n,i]=e;if(this.destroyed)S();else{if(null===(t=this._stats)||void 0===t||t.time("Rendering"),!(i.renderingIntent&_))throw new Error("Must use the same `intent`-argument when calling the `PDFPageProxy.render` and `PDFDocumentProxy.getOptionalContentConfig` methods.");A.initializeGraphics({transparency:n,optionalContentConfig:i}),A.operatorListChanged()}}).catch(S),T}getOperatorList(){let{intent:e="display",annotationMode:t=Kg.ENABLE,printAnnotationStorage:n=null,isEditing:i=!1}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const r=this._transport.getRenderingIntent(e,t,n,i,!0);let s,o=this._intentStates.get(r.cacheKey);var a,l;(o||(o=Object.create(null),this._intentStates.set(r.cacheKey,o)),o.opListReadCapability)||(s=Object.create(null),s.operatorListChanged=function(){o.operatorList.lastChunk&&(o.opListReadCapability.resolve(o.operatorList),o.renderTasks.delete(s))},o.opListReadCapability=Promise.withResolvers(),((a=o).renderTasks||(a.renderTasks=new Set)).add(s),o.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},null===(l=this._stats)||void 0===l||l.time("Page Request"),this._pumpOperatorList(r));return o.opListReadCapability.promise}streamTextContent(){let{includeMarkedContent:e=!1,disableNormalization:t=!1}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this._transport.messageHandler.sendWithStream("GetTextContent",{pageIndex:this._pageIndex,includeMarkedContent:!0===e,disableNormalization:!0===t},{highWaterMark:100,size:e=>e.items.length})}getTextContent(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(this._transport._htmlForXfa)return this.getXfa().then(e=>Gm.textContent(e));const t=this.streamTextContent(e);return new Promise(function(e,n){const i=t.getReader(),r={items:[],styles:Object.create(null),lang:null};!function t(){i.read().then(function(n){var i;let{value:s,done:o}=n;o?e(r):(null!==(i=r.lang)&&void 0!==i||(r.lang=s.lang),Object.assign(r.styles,s.styles),r.items.push(...s.items),t())},n)}()})}getStructTree(){return this._transport.getStructTree(this._pageIndex)}_destroy(){this.destroyed=!0;const e=[];for(const t of this._intentStates.values())if(this._abortOperatorList({intentState:t,reason:new Error("Page was destroyed."),force:!0}),!t.opListReadCapability)for(const n of t.renderTasks)e.push(n.completed),n.cancel();return this.objs.clear(),mg(pS,this,!1),Promise.all(e)}cleanup(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];mg(pS,this,!0);const t=pg(fS,this,mS).call(this);return e&&t&&this._stats&&(this._stats=new tv),t}_startRenderPage(e,t){var n,i;const r=this._intentStates.get(t);r&&(null===(n=this._stats)||void 0===n||n.timeEnd("Page Request"),null===(i=r.displayReadyCapability)||void 0===i||i.resolve(e))}_renderPageChunk(e,t){for(let n=0,i=e.length;n<i;n++)t.operatorList.fnArray.push(e.fnArray[n]),t.operatorList.argsArray.push(e.argsArray[n]);t.operatorList.lastChunk=e.lastChunk,t.operatorList.separateAnnots=e.separateAnnots;for(const n of t.renderTasks)n.operatorListChanged();e.lastChunk&&pg(fS,this,mS).call(this)}_pumpOperatorList(e){let{renderingIntent:t,cacheKey:n,annotationStorageSerializable:i,modifiedIds:r}=e;const{map:s,transfer:o}=i,a=this._transport.messageHandler.sendWithStream("GetOperatorList",{pageIndex:this._pageIndex,intent:t,cacheKey:n,annotationStorage:s,modifiedIds:r},o).getReader(),l=this._intentStates.get(n);l.streamReader=a;const c=()=>{a.read().then(e=>{let{value:t,done:n}=e;n?l.streamReader=null:this._transport.destroyed||(this._renderPageChunk(t,l),c())},e=>{if(l.streamReader=null,!this._transport.destroyed){if(l.operatorList){l.operatorList.lastChunk=!0;for(const e of l.renderTasks)e.operatorListChanged();pg(fS,this,mS).call(this)}if(l.displayReadyCapability)l.displayReadyCapability.reject(e);else{if(!l.opListReadCapability)throw e;l.opListReadCapability.reject(e)}}})};c()}_abortOperatorList(e){let{intentState:t,reason:n,force:i=!1}=e;if(t.streamReader){if(t.streamReaderCancelTimeout&&(clearTimeout(t.streamReaderCancelTimeout),t.streamReaderCancelTimeout=null),!i){if(t.renderTasks.size>0)return;if(n instanceof Jm){let e=100;return n.extraDelay>0&&n.extraDelay<1e3&&(e+=n.extraDelay),void(t.streamReaderCancelTimeout=setTimeout(()=>{t.streamReaderCancelTimeout=null,this._abortOperatorList({intentState:t,reason:n,force:!0})},e))}}if(t.streamReader.cancel(new Mm(n.message)).catch(()=>{}),t.streamReader=null,!this._transport.destroyed){for(const[e,n]of this._intentStates)if(n===t){this._intentStates.delete(e);break}this.cleanup()}}}get stats(){return this._stats}}function mS(){if(!gg(pS,this)||this.destroyed)return!1;for(const{renderTasks:e,operatorList:t}of this._intentStates.values())if(e.size>0||!t.lastChunk)return!1;return this._intentStates.clear(),this.objs.clear(),mg(pS,this,!1),!0}var vS=new WeakMap,yS=new WeakMap,_S=new WeakMap,wS=new WeakMap,bS=new WeakSet;class xS{constructor(){let{name:e=null,port:t=null,verbosity:n=ym()}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(hg(this,bS),dg(this,vS,Promise.withResolvers()),dg(this,yS,null),dg(this,_S,null),dg(this,wS,null),this.name=e,this.destroyed=!1,this.verbosity=n,t){if(IS._.has(t))throw new Error("Cannot use more than one PDFWorker per port.");IS._.set(t,this),pg(bS,this,ES).call(this,t)}else pg(bS,this,CS).call(this)}get promise(){return gg(vS,this).promise}get port(){return gg(_S,this)}get messageHandler(){return gg(yS,this)}destroy(){var e,t;this.destroyed=!0,null===(e=gg(wS,this))||void 0===e||e.terminate(),mg(wS,this,null),IS._.delete(gg(_S,this)),mg(_S,this,null),null===(t=gg(yS,this))||void 0===t||t.destroy(),mg(yS,this,null)}static create(e){const t=pg(xS,this,IS)._.get(null===e||void 0===e?void 0:e.port);if(t){if(t._pendingDestroy)throw new Error("PDFWorker.create - the worker is being destroyed.\nPlease remember to await `PDFDocumentLoadingTask.destroy()`-calls.");return t}return new xS(e)}static get workerSrc(){if(NE.workerSrc)return NE.workerSrc;throw new Error('No "GlobalWorkerOptions.workerSrc" specified.')}static get _setupFakeWorkerGlobal(){return Cm(this,"_setupFakeWorkerGlobal",(async()=>{if(fg(xS,this,AS))return fg(xS,this,AS);return(await import(this.workerSrc)).WorkerMessageHandler})())}}function kS(){gg(vS,this).resolve(),gg(yS,this).send("configure",{verbosity:this.verbosity})}function ES(e){mg(_S,this,e),mg(yS,this,new $b("main","worker",e)),gg(yS,this).on("ready",()=>{}),pg(bS,this,kS).call(this)}function CS(){if(PS._||AS(Pg))return void pg(bS,this,SS).call(this);let{workerSrc:e}=Pg;try{Pg._isSameOrigin(window.location,e)||(e=Pg._createCDNWrapper(new URL(e,window.location).href));const t=new Worker(e,{type:"module"}),n=new $b("main","worker",t),i=()=>{r.abort(),n.destroy(),t.terminate(),this.destroyed?gg(vS,this).reject(new Error("Worker was destroyed")):pg(bS,this,SS).call(this)},r=new AbortController;t.addEventListener("error",()=>{gg(wS,this)||i()},{signal:r.signal}),n.on("test",e=>{r.abort(),!this.destroyed&&e?(mg(yS,this,n),mg(_S,this,t),mg(wS,this,t),pg(bS,this,kS).call(this)):i()}),n.on("ready",e=>{if(r.abort(),this.destroyed)i();else try{s()}catch(t){pg(bS,this,SS).call(this)}});const s=()=>{const e=new Uint8Array;n.send("test",e,[e.buffer])};return void s()}catch(t){_m("The worker has been disabled.")}pg(bS,this,SS).call(this)}function SS(){PS._||(wm("Setting up fake worker."),PS._=!0),Pg._setupFakeWorkerGlobal.then(e=>{var t,n;if(this.destroyed)return void gg(vS,this).reject(new Error("Worker was destroyed"));const i=new Lb;mg(_S,this,i);const r="fake".concat((TS._=(t=TS._,n=t++,t),n)),s=new $b(r+"_worker",r,i);e.setup(s,i),mg(yS,this,new $b(r,r+"_worker",i)),pg(bS,this,kS).call(this)}).catch(e=>{gg(vS,this).reject(new Error('Setting up fake worker failed: "'.concat(e.message,'".')))})}function AS(e){try{var t;return(null===(t=globalThis.pdfjsWorker)||void 0===t?void 0:t.WorkerMessageHandler)||null}catch(n){return null}}Pg=xS;var TS={_:0},PS={_:!1},IS={_:new WeakMap};Lg&&(PS._=pg(Pg,Pg,!0),NE.workerSrc||(NE.workerSrc="./pdf.worker.mjs")),Pg._isSameOrigin=(e,t)=>{const n=URL.parse(e);if(null===n||void 0===n||!n.origin||"null"===n.origin)return!1;const i=new URL(t,n);return n.origin===i.origin},Pg._createCDNWrapper=e=>{const t='await import("'.concat(e,'");');return URL.createObjectURL(new Blob([t],{type:"text/javascript"}))},Pg.fromPort=e=>{var t;if(t="`PDFWorker.fromPort` - please use `PDFWorker.create` instead.",console.log("Deprecated API usage: "+t),null===e||void 0===e||!e.port)throw new Error("PDFWorker.fromPort - invalid method signature.");return Pg.create(e)};var RS=new WeakMap,MS=new WeakMap,NS=new WeakMap,DS=new WeakMap,OS=new WeakMap,LS=new WeakSet;class FS{constructor(e,t,n,i,r,s){hg(this,LS),dg(this,RS,new Map),dg(this,MS,new Map),dg(this,NS,new Map),dg(this,DS,new Map),dg(this,OS,null),this.messageHandler=e,this.loadingTask=t,this.commonObjs=new kC,this.fontLoader=new Tb({ownerDocument:i.ownerDocument,styleElement:i.styleElement}),this.loadingParams=i.loadingParams,this._params=i,this.canvasFactory=r.canvasFactory,this.filterFactory=r.filterFactory,this.cMapReaderFactory=r.cMapReaderFactory,this.standardFontDataFactory=r.standardFontDataFactory,this.wasmFactory=r.wasmFactory,this.destroyed=!1,this.destroyCapability=null,this._networkStream=n,this._fullReader=null,this._lastProgress=null,this.downloadInfoCapability=Promise.withResolvers(),this.enableHWA=s,this.setupMessageHandler()}get annotationStorage(){return Cm(this,"annotationStorage",new kb)}getRenderingIntent(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Kg.ENABLE,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,i=arguments.length>3&&void 0!==arguments[3]&&arguments[3],r=arguments.length>4&&void 0!==arguments[4]&&arguments[4],s=Wg,o=vb;switch(e){case"any":s=Bg;break;case"display":break;case"print":s=Ug;break;default:wm("getRenderingIntent - invalid intent: ".concat(e))}const a=s&Ug&&n instanceof Sb?n:this.annotationStorage;switch(t){case Kg.DISABLE:s+=Vg;break;case Kg.ENABLE:break;case Kg.ENABLE_FORMS:s+=zg;break;case Kg.ENABLE_STORAGE:s+=Hg,o=a.serializable;break;default:wm("getRenderingIntent - invalid annotationMode: ".concat(t))}i&&(s+=qg),r&&(s+=Gg);const{ids:l,hash:c}=a.modifiedIds;return{renderingIntent:s,cacheKey:[s,o.hash,c].join("_"),annotationStorageSerializable:o,modifiedIds:l}}destroy(){var e;if(this.destroyCapability)return this.destroyCapability.promise;this.destroyed=!0,this.destroyCapability=Promise.withResolvers(),null===(e=gg(OS,this))||void 0===e||e.reject(new Error("Worker was destroyed during onPassword callback"));const t=[];for(const i of gg(MS,this).values())t.push(i._destroy());gg(MS,this).clear(),gg(NS,this).clear(),gg(DS,this).clear(),this.hasOwnProperty("annotationStorage")&&this.annotationStorage.resetModified();const n=this.messageHandler.sendWithPromise("Terminate",null);return t.push(n),Promise.all(t).then(()=>{var e,t;this.commonObjs.clear(),this.fontLoader.clear(),gg(RS,this).clear(),this.filterFactory.destroy(),VC.cleanup(),null===(e=this._networkStream)||void 0===e||e.cancelAllRequests(new Mm("Worker was terminated.")),null===(t=this.messageHandler)||void 0===t||t.destroy(),this.messageHandler=null,this.destroyCapability.resolve()},this.destroyCapability.reject),this.destroyCapability.promise}setupMessageHandler(){const{messageHandler:e,loadingTask:t}=this;e.on("GetReader",(e,t)=>{xm(this._networkStream,"GetReader - no `IPDFStream` instance available."),this._fullReader=this._networkStream.getFullReader(),this._fullReader.onProgress=e=>{this._lastProgress={loaded:e.loaded,total:e.total}},t.onPull=()=>{this._fullReader.read().then(function(e){let{value:n,done:i}=e;i?t.close():(xm(n instanceof ArrayBuffer,"GetReader - expected an ArrayBuffer."),t.enqueue(new Uint8Array(n),1,[n]))}).catch(e=>{t.error(e)})},t.onCancel=e=>{this._fullReader.cancel(e),t.ready.catch(e=>{if(!this.destroyed)throw e})}}),e.on("ReaderHeadersReady",async e=>{await this._fullReader.headersReady;const{isStreamingSupported:n,isRangeSupported:i,contentLength:r}=this._fullReader;if(!n||!i){var s;if(this._lastProgress)null===(s=t.onProgress)||void 0===s||s.call(t,this._lastProgress);this._fullReader.onProgress=e=>{var n;null===(n=t.onProgress)||void 0===n||n.call(t,{loaded:e.loaded,total:e.total})}}return{isStreamingSupported:n,isRangeSupported:i,contentLength:r}}),e.on("GetRangeReader",(e,t)=>{xm(this._networkStream,"GetRangeReader - no `IPDFStream` instance available.");const n=this._networkStream.getRangeReader(e.begin,e.end);n?(t.onPull=()=>{n.read().then(function(e){let{value:n,done:i}=e;i?t.close():(xm(n instanceof ArrayBuffer,"GetRangeReader - expected an ArrayBuffer."),t.enqueue(new Uint8Array(n),1,[n]))}).catch(e=>{t.error(e)})},t.onCancel=e=>{n.cancel(e),t.ready.catch(e=>{if(!this.destroyed)throw e})}):t.close()}),e.on("GetDoc",e=>{let{pdfInfo:n}=e;this._numPages=n.numPages,this._htmlForXfa=n.htmlForXfa,delete n.htmlForXfa,t._capability.resolve(new dS(n,this))}),e.on("DocException",e=>{t._capability.reject(Yb(e))}),e.on("PasswordRequest",e=>{mg(OS,this,Promise.withResolvers());try{if(!t.onPassword)throw Yb(e);const n=e=>{e instanceof Error?gg(OS,this).reject(e):gg(OS,this).resolve({password:e})};t.onPassword(n,e.code)}catch(n){gg(OS,this).reject(n)}return gg(OS,this).promise}),e.on("DataLoaded",e=>{var n;null===(n=t.onProgress)||void 0===n||n.call(t,{loaded:e.length,total:e.length}),this.downloadInfoCapability.resolve(e)}),e.on("StartRenderPage",e=>{if(this.destroyed)return;gg(MS,this).get(e.pageIndex)._startRenderPage(e.transparency,e.cacheKey)}),e.on("commonobj",t=>{var n;let[i,r,s]=t;if(this.destroyed)return null;if(this.commonObjs.has(i))return null;switch(r){case"Font":if("error"in s){const e=s.error;wm("Error during font loading: ".concat(e)),this.commonObjs.resolve(i,e);break}const t=new EE(s),o=this._params.pdfBug&&null!==(n=globalThis.FontInspector)&&void 0!==n&&n.enabled?(e,t)=>globalThis.FontInspector.fontAdded(e,t):null,a=new Ib(t,o,s.extra,s.charProcOperatorList);this.fontLoader.bind(a).catch(()=>e.sendWithPromise("FontFallback",{id:i})).finally(()=>{!a.fontExtraProperties&&a.data&&a.clearData(),this.commonObjs.resolve(i,a)});break;case"CopyLocalImage":const{imageRef:l}=s;xm(l,"The imageRef must be defined.");for(const e of gg(MS,this).values())for(const[,t]of e.objs)if((null===t||void 0===t?void 0:t.ref)===l)return t.dataLen?(this.commonObjs.resolve(i,structuredClone(t)),t.dataLen):null;break;case"FontPath":case"Image":case"Pattern":this.commonObjs.resolve(i,s);break;default:throw new Error("Got unknown common object type ".concat(r))}return null}),e.on("obj",e=>{let[t,n,i,r]=e;if(this.destroyed)return;const s=gg(MS,this).get(n);var o;if(!s.objs.has(t))if(0!==s._intentStates.size)switch(i){case"Image":case"Pattern":s.objs.resolve(t,r);break;default:throw new Error("Got unknown object type ".concat(i))}else null===r||void 0===r||null===(o=r.bitmap)||void 0===o||o.close()}),e.on("DocProgress",e=>{var n;this.destroyed||null===(n=t.onProgress)||void 0===n||n.call(t,{loaded:e.loaded,total:e.total})}),e.on("FetchBinaryData",async e=>{if(this.destroyed)throw new Error("Worker was destroyed.");const t=this[e.type];if(!t)throw new Error("".concat(e.type," not initialized, see the `useWorkerFetch` parameter."));return t.fetch(e)})}getData(){return this.messageHandler.sendWithPromise("GetData",null)}saveDocument(){var e,t;this.annotationStorage.size<=0&&wm("saveDocument called while `annotationStorage` is empty, please use the getData-method instead.");const{map:n,transfer:i}=this.annotationStorage.serializable;return this.messageHandler.sendWithPromise("SaveDocument",{isPureXfa:!!this._htmlForXfa,numPages:this._numPages,annotationStorage:n,filename:null!==(e=null===(t=this._fullReader)||void 0===t?void 0:t.filename)&&void 0!==e?e:null},i).finally(()=>{this.annotationStorage.resetModified()})}getPage(e){if(!Number.isInteger(e)||e<=0||e>this._numPages)return Promise.reject(new Error("Invalid page request."));const t=e-1,n=gg(NS,this).get(t);if(n)return n;const i=this.messageHandler.sendWithPromise("GetPage",{pageIndex:t}).then(n=>{if(this.destroyed)throw new Error("Transport destroyed");n.refStr&&gg(DS,this).set(n.refStr,e);const i=new gS(t,n,this,this._params.pdfBug);return gg(MS,this).set(t,i),i});return gg(NS,this).set(t,i),i}getPageIndex(e){return Mb(e)?this.messageHandler.sendWithPromise("GetPageIndex",{num:e.num,gen:e.gen}):Promise.reject(new Error("Invalid pageIndex request."))}getAnnotations(e,t){return this.messageHandler.sendWithPromise("GetAnnotations",{pageIndex:e,intent:t})}getFieldObjects(){return pg(LS,this,jS).call(this,"GetFieldObjects")}hasJSActions(){return pg(LS,this,jS).call(this,"HasJSActions")}getCalculationOrderIds(){return this.messageHandler.sendWithPromise("GetCalculationOrderIds",null)}getDestinations(){return this.messageHandler.sendWithPromise("GetDestinations",null)}getDestination(e){return"string"!==typeof e?Promise.reject(new Error("Invalid destination request.")):this.messageHandler.sendWithPromise("GetDestination",{id:e})}getPageLabels(){return this.messageHandler.sendWithPromise("GetPageLabels",null)}getPageLayout(){return this.messageHandler.sendWithPromise("GetPageLayout",null)}getPageMode(){return this.messageHandler.sendWithPromise("GetPageMode",null)}getViewerPreferences(){return this.messageHandler.sendWithPromise("GetViewerPreferences",null)}getOpenAction(){return this.messageHandler.sendWithPromise("GetOpenAction",null)}getAttachments(){return this.messageHandler.sendWithPromise("GetAttachments",null)}getAnnotationsByType(e,t){return this.messageHandler.sendWithPromise("GetAnnotationsByType",{types:e,pageIndexesToSkip:t})}getDocJSActions(){return pg(LS,this,jS).call(this,"GetDocJSActions")}getPageJSActions(e){return this.messageHandler.sendWithPromise("GetPageJSActions",{pageIndex:e})}getStructTree(e){return this.messageHandler.sendWithPromise("GetStructTree",{pageIndex:e})}getOutline(){return this.messageHandler.sendWithPromise("GetOutline",null)}getOptionalContentConfig(e){return pg(LS,this,jS).call(this,"GetOptionalContentConfig").then(t=>new QE(t,e))}getPermissions(){return this.messageHandler.sendWithPromise("GetPermissions",null)}getMetadata(){const e="GetMetadata",t=gg(RS,this).get(e);if(t)return t;const n=this.messageHandler.sendWithPromise(e,null).then(e=>{var t,n,i,r;return{info:e[0],metadata:e[1]?new jE(e[1]):null,contentDispositionFilename:null!==(t=null===(n=this._fullReader)||void 0===n?void 0:n.filename)&&void 0!==t?t:null,contentLength:null!==(i=null===(r=this._fullReader)||void 0===r?void 0:r.contentLength)&&void 0!==i?i:null}});return gg(RS,this).set(e,n),n}getMarkInfo(){return this.messageHandler.sendWithPromise("GetMarkInfo",null)}async startCleanup(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(!this.destroyed){await this.messageHandler.sendWithPromise("Cleanup",null);for(const e of gg(MS,this).values()){if(!e.cleanup())throw new Error("startCleanup: Page ".concat(e.pageNumber," is currently rendering."))}this.commonObjs.clear(),e||this.fontLoader.clear(),gg(RS,this).clear(),this.filterFactory.destroy(!0),VC.cleanup()}}cachedPageNumber(e){var t;if(!Mb(e))return null;const n=0===e.gen?"".concat(e.num,"R"):"".concat(e.num,"R").concat(e.gen);return null!==(t=gg(DS,this).get(n))&&void 0!==t?t:null}}function jS(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;const n=gg(RS,this).get(e);if(n)return n;const i=this.messageHandler.sendWithPromise(e,t);return gg(RS,this).set(e,i),i}var BS=new WeakMap;class WS{constructor(e){dg(this,BS,null),Tt(this,"onContinue",null),Tt(this,"onError",null),mg(BS,this,e)}get promise(){return gg(BS,this).capability.promise}cancel(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;gg(BS,this).cancel(null,e)}get separateAnnots(){const{separateAnnots:e}=gg(BS,this).operatorList;if(!e)return!1;const{annotationCanvasMap:t}=gg(BS,this);return e.form||e.canvas&&(null===t||void 0===t?void 0:t.size)>0}}var US=new WeakMap;class zS{constructor(e){let{callback:t,params:n,objs:i,commonObjs:r,annotationCanvasMap:s,operatorList:o,pageIndex:a,canvasFactory:l,filterFactory:c,useRequestAnimationFrame:u=!1,pdfBug:h=!1,pageColors:d=null,enableHWA:p=!1,operationsFilter:f=null}=e;dg(this,US,null),this.callback=t,this.params=n,this.objs=i,this.commonObjs=r,this.annotationCanvasMap=s,this.operatorListIdx=null,this.operatorList=o,this._pageIndex=a,this.canvasFactory=l,this.filterFactory=c,this._pdfBug=h,this.pageColors=d,this.running=!1,this.graphicsReadyCallback=null,this.graphicsReady=!1,this._useRequestAnimationFrame=!0===u&&"undefined"!==typeof window,this.cancelled=!1,this.capability=Promise.withResolvers(),this.task=new WS(this),this._cancelBound=this.cancel.bind(this),this._continueBound=this._continue.bind(this),this._scheduleNextBound=this._scheduleNext.bind(this),this._nextBound=this._next.bind(this),this._canvas=n.canvas,this._canvasContext=n.canvas?null:n.canvasContext,this._enableHWA=p,this._dependencyTracker=n.dependencyTracker,this._operationsFilter=f}get completed(){return this.capability.promise.catch(function(){})}initializeGraphics(e){var t,n;let{transparency:i=!1,optionalContentConfig:r}=e;if(this.cancelled)return;if(this._canvas){if(HS._.has(this._canvas))throw new Error("Cannot use the same canvas during multiple render() operations. Use different canvas or ensure previous operations were cancelled or completed.");HS._.add(this._canvas)}this._pdfBug&&null!==(t=globalThis.StepperManager)&&void 0!==t&&t.enabled&&(this.stepper=globalThis.StepperManager.create(this._pageIndex),this.stepper.init(this.operatorList),this.stepper.nextBreakPoint=this.stepper.getNextBreakPoint());const{viewport:s,transform:o,background:a,dependencyTracker:l}=this.params,c=this._canvasContext||this._canvas.getContext("2d",{alpha:!1,willReadFrequently:!this._enableHWA});this.gfx=new rE(c,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:r},this.annotationCanvasMap,this.pageColors,l),this.gfx.beginDrawing({transform:o,viewport:s,transparency:i,background:a}),this.operatorListIdx=0,this.graphicsReady=!0,null===(n=this.graphicsReadyCallback)||void 0===n||n.call(this)}cancel(){var e,t,n;let i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;this.running=!1,this.cancelled=!0,null===(e=this.gfx)||void 0===e||e.endDrawing(),gg(US,this)&&(window.cancelAnimationFrame(gg(US,this)),mg(US,this,null)),HS._.delete(this._canvas),i||(i=new Jm("Rendering cancelled, page ".concat(this._pageIndex+1),r)),this.callback(i),null===(t=(n=this.task).onError)||void 0===t||t.call(n,i)}operatorListChanged(){var e,t;this.graphicsReady?(null===(e=this.gfx.dependencyTracker)||void 0===e||e.growOperationsCount(this.operatorList.fnArray.length),null===(t=this.stepper)||void 0===t||t.updateOperatorList(this.operatorList),this.running||this._continue()):this.graphicsReadyCallback||(this.graphicsReadyCallback=this._continueBound)}_continue(){this.running=!0,this.cancelled||(this.task.onContinue?this.task.onContinue(this._scheduleNextBound):this._scheduleNext())}_scheduleNext(){this._useRequestAnimationFrame?mg(US,this,window.requestAnimationFrame(()=>{mg(US,this,null),this._nextBound().catch(this._cancelBound)})):Promise.resolve().then(this._nextBound).catch(this._cancelBound)}async _next(){this.cancelled||(this.operatorListIdx=this.gfx.executeOperatorList(this.operatorList,this.operatorListIdx,this._continueBound,this.stepper,this._operationsFilter),this.operatorListIdx===this.operatorList.argsArray.length&&(this.running=!1,this.operatorList.lastChunk&&(this.gfx.endDrawing(),HS._.delete(this._canvas),this.callback())))}}var HS={_:new WeakSet};const VS="5.4.296";var qS=new WeakMap,GS=new WeakMap,KS=new WeakMap,YS=new WeakMap,XS=new WeakMap,QS=new WeakMap,$S=new WeakMap,JS=new WeakMap,ZS=new WeakMap,eA=new WeakMap,tA=new WeakSet;class nA{static get _keyboardManager(){return Cm(this,"_keyboardManager",new sy([[["Escape","mac+Escape"],nA.prototype._hideDropdownFromKeyboard],[[" ","mac+ "],nA.prototype._colorSelectFromKeyboard],[["ArrowDown","ArrowRight","mac+ArrowDown","mac+ArrowRight"],nA.prototype._moveToNext],[["ArrowUp","ArrowLeft","mac+ArrowUp","mac+ArrowLeft"],nA.prototype._moveToPrevious],[["Home","mac+Home"],nA.prototype._moveToBeginning],[["End","mac+End"],nA.prototype._moveToEnd]]))}constructor(e){var t,n;let{editor:i=null,uiManager:r=null}=e;hg(this,tA),dg(this,qS,null),dg(this,GS,null),dg(this,KS,void 0),dg(this,YS,null),dg(this,XS,!1),dg(this,QS,!1),dg(this,$S,null),dg(this,JS,void 0),dg(this,ZS,null),dg(this,eA,null),i?(mg(QS,this,!1),mg($S,this,i)):mg(QS,this,!0),mg(eA,this,(null===i||void 0===i?void 0:i._uiManager)||r),mg(JS,this,gg(eA,this)._eventBus),mg(KS,this,(null===i||void 0===i||null===(t=i.color)||void 0===t?void 0:t.toUpperCase())||(null===(n=gg(eA,this))||void 0===n?void 0:n.highlightColors.values().next().value)||"#FFFF98"),cA._||(cA._=Object.freeze({blue:"pdfjs-editor-colorpicker-blue",green:"pdfjs-editor-colorpicker-green",pink:"pdfjs-editor-colorpicker-pink",red:"pdfjs-editor-colorpicker-red",yellow:"pdfjs-editor-colorpicker-yellow"}))}renderButton(){const e=mg(qS,this,document.createElement("button"));e.className="colorPicker",e.tabIndex="0",e.setAttribute("data-l10n-id","pdfjs-editor-colorpicker-button"),e.ariaHasPopup="true",gg($S,this)&&(e.ariaControls="".concat(gg($S,this).id,"_colorpicker_dropdown"));const t=gg(eA,this)._signal;e.addEventListener("click",pg(tA,this,oA).bind(this),{signal:t}),e.addEventListener("keydown",pg(tA,this,sA).bind(this),{signal:t});const n=mg(GS,this,document.createElement("span"));return n.className="swatch",n.ariaHidden="true",n.style.backgroundColor=gg(KS,this),e.append(n),e}renderMainDropdown(){const e=mg(YS,this,pg(tA,this,iA).call(this));return e.ariaOrientation="horizontal",e.ariaLabelledBy="highlightColorPickerLabel",e}_colorSelectFromKeyboard(e){if(e.target===gg(qS,this))return void pg(tA,this,oA).call(this,e);const t=e.target.getAttribute("data-color");t&&pg(tA,this,rA).call(this,t,e)}_moveToNext(e){var t,n;fg(tA,this,lA)?e.target!==gg(qS,this)?null===(t=e.target.nextSibling)||void 0===t||t.focus():null===(n=gg(YS,this).firstChild)||void 0===n||n.focus():pg(tA,this,oA).call(this,e)}_moveToPrevious(e){var t,n;e.target!==(null===(t=gg(YS,this))||void 0===t?void 0:t.firstChild)&&e.target!==gg(qS,this)?(fg(tA,this,lA)||pg(tA,this,oA).call(this,e),null===(n=e.target.previousSibling)||void 0===n||n.focus()):fg(tA,this,lA)&&this._hideDropdownFromKeyboard()}_moveToBeginning(e){var t;fg(tA,this,lA)?null===(t=gg(YS,this).firstChild)||void 0===t||t.focus():pg(tA,this,oA).call(this,e)}_moveToEnd(e){var t;fg(tA,this,lA)?null===(t=gg(YS,this).lastChild)||void 0===t||t.focus():pg(tA,this,oA).call(this,e)}hideDropdown(){var e,t;null===(e=gg(YS,this))||void 0===e||e.classList.add("hidden"),gg(qS,this).ariaExpanded="false",null===(t=gg(ZS,this))||void 0===t||t.abort(),mg(ZS,this,null)}_hideDropdownFromKeyboard(){var e;gg(QS,this)||(fg(tA,this,lA)?(this.hideDropdown(),gg(qS,this).focus({preventScroll:!0,focusVisible:gg(XS,this)})):null===(e=gg($S,this))||void 0===e||e.unselect())}updateColor(e){if(gg(GS,this)&&(gg(GS,this).style.backgroundColor=e),!gg(YS,this))return;const t=gg(eA,this).highlightColors.values();for(const n of gg(YS,this).children)n.ariaSelected=t.next().value===e.toUpperCase()}destroy(){var e,t;null===(e=gg(qS,this))||void 0===e||e.remove(),mg(qS,this,null),mg(GS,this,null),null===(t=gg(YS,this))||void 0===t||t.remove(),mg(YS,this,null)}}function iA(){const e=document.createElement("div"),t=gg(eA,this)._signal;e.addEventListener("contextmenu",iv,{signal:t}),e.className="dropdown",e.role="listbox",e.ariaMultiSelectable="false",e.ariaOrientation="vertical",e.setAttribute("data-l10n-id","pdfjs-editor-colorpicker-dropdown"),gg($S,this)&&(e.id="".concat(gg($S,this).id,"_colorpicker_dropdown"));for(const[n,i]of gg(eA,this).highlightColors){const r=document.createElement("button");r.tabIndex="0",r.role="option",r.setAttribute("data-color",i),r.title=n,r.setAttribute("data-l10n-id",cA._[n]);const s=document.createElement("span");r.append(s),s.className="swatch",s.style.backgroundColor=i,r.ariaSelected=i===gg(KS,this),r.addEventListener("click",pg(tA,this,rA).bind(this,i),{signal:t}),e.append(r)}return e.addEventListener("keydown",pg(tA,this,sA).bind(this),{signal:t}),e}function rA(e,t){t.stopPropagation(),gg(JS,this).dispatch("switchannotationeditorparams",{source:this,type:Qg.HIGHLIGHT_COLOR,value:e}),this.updateColor(e)}function sA(e){Ig._keyboardManager.exec(this,e)}function oA(e){if(fg(tA,this,lA))return void this.hideDropdown();if(mg(XS,this,0===e.detail),gg(ZS,this)||(mg(ZS,this,new AbortController),window.addEventListener("pointerdown",pg(tA,this,aA).bind(this),{signal:gg(eA,this).combinedSignal(gg(ZS,this))})),gg(qS,this).ariaExpanded="true",gg(YS,this))return void gg(YS,this).classList.remove("hidden");const t=mg(YS,this,pg(tA,this,iA).call(this));gg(qS,this).append(t)}function aA(e){var t;null!==(t=gg(YS,this))&&void 0!==t&&t.contains(e.target)||this.hideDropdown()}function lA(e){return gg(YS,e)&&!gg(YS,e).classList.contains("hidden")}Ig=nA;var cA={_:null},uA=new WeakMap,hA=new WeakMap,dA=new WeakMap;class pA{constructor(e){dg(this,uA,null),dg(this,hA,null),dg(this,dA,null),mg(hA,this,e),mg(dA,this,e._uiManager),fA._||(fA._=Object.freeze({freetext:"pdfjs-editor-color-picker-free-text-input",ink:"pdfjs-editor-color-picker-ink-input"}))}renderButton(){if(gg(uA,this))return gg(uA,this);const{editorType:e,colorType:t,colorValue:n}=gg(hA,this),i=mg(uA,this,document.createElement("input"));return i.type="color",i.value=n||"#000000",i.className="basicColorPicker",i.tabIndex=0,i.setAttribute("data-l10n-id",fA._[e]),i.addEventListener("input",()=>{gg(dA,this).updateParams(t,i.value)},{signal:gg(dA,this)._signal}),i}update(e){gg(uA,this)&&(gg(uA,this).value=e)}destroy(){var e;null===(e=gg(uA,this))||void 0===e||e.remove(),mg(uA,this,null)}hideDropdown(){}}var fA={_:null};function gA(e){return Math.floor(255*Math.max(0,Math.min(1,e))).toString(16).padStart(2,"0")}function mA(e){return Math.max(0,Math.min(255,255*e))}class vA{static CMYK_G(e){let[t,n,i,r]=e;return["G",1-Math.min(1,.3*t+.59*i+.11*n+r)]}static G_CMYK(e){let[t]=e;return["CMYK",0,0,0,1-t]}static G_RGB(e){let[t]=e;return["RGB",t,t,t]}static G_rgb(e){let[t]=e;return t=mA(t),[t,t,t]}static G_HTML(e){let[t]=e;const n=gA(t);return"#".concat(n).concat(n).concat(n)}static RGB_G(e){let[t,n,i]=e;return["G",.3*t+.59*n+.11*i]}static RGB_rgb(e){return e.map(mA)}static RGB_HTML(e){return"#".concat(e.map(gA).join(""))}static T_HTML(){return"#00000000"}static T_rgb(){return[null]}static CMYK_RGB(e){let[t,n,i,r]=e;return["RGB",1-Math.min(1,t+r),1-Math.min(1,i+r),1-Math.min(1,n+r)]}static CMYK_rgb(e){let[t,n,i,r]=e;return[mA(1-Math.min(1,t+r)),mA(1-Math.min(1,i+r)),mA(1-Math.min(1,n+r))]}static CMYK_HTML(e){const t=this.CMYK_RGB(e).slice(1);return this.RGB_HTML(t)}static RGB_CMYK(e){let[t,n,i]=e;const r=1-t,s=1-n,o=1-i;return["CMYK",r,s,o,Math.min(r,s,o)]}}class yA{create(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(e<=0||t<=0)throw new Error("Invalid SVG dimensions");const i=this._createSVG("svg:svg");return i.setAttribute("version","1.1"),n||(i.setAttribute("width","".concat(e,"px")),i.setAttribute("height","".concat(t,"px"))),i.setAttribute("preserveAspectRatio","none"),i.setAttribute("viewBox","0 0 ".concat(e," ").concat(t)),i}createElement(e){if("string"!==typeof e)throw new Error("Invalid SVG element type");return this._createSVG(e)}_createSVG(e){bm("Abstract method `_createSVG` called.")}}class _A extends yA{_createSVG(e){return document.createElementNS(Ym,e)}}const wA=new WeakSet,bA=60*(new Date).getTimezoneOffset()*1e3;class xA{static create(e){switch(e.data.annotationType){case rm.LINK:return new RA(e);case rm.TEXT:return new OA(e);case rm.WIDGET:switch(e.data.fieldType){case"Tx":return new FA(e);case"Btn":return e.data.radioButton?new WA(e):e.data.checkBox?new BA(e):new UA(e);case"Ch":return new zA(e);case"Sig":return new jA(e)}return new LA(e);case rm.POPUP:return new VA(e);case rm.FREETEXT:return new NT(e);case rm.LINE:return new OT(e);case rm.SQUARE:return new FT(e);case rm.CIRCLE:return new BT(e);case rm.POLYLINE:return new UT(e);case rm.CARET:return new HT(e);case rm.INK:return new KT(e);case rm.POLYGON:return new zT(e);case rm.HIGHLIGHT:return new XT(e);case rm.UNDERLINE:return new QT(e);case rm.SQUIGGLY:return new $T(e);case rm.STRIKEOUT:return new JT(e);case rm.STAMP:return new ZT(e);case rm.FILEATTACHMENT:return new nP(e);default:return new AA(e)}}}var kA=new WeakMap,EA=new WeakMap,CA=new WeakMap,SA=new WeakSet;class AA{constructor(e){let{isRenderable:t=!1,ignoreBorder:n=!1,createQuadrilaterals:i=!1}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};hg(this,SA),dg(this,kA,null),dg(this,EA,!1),dg(this,CA,null),this.isRenderable=t,this.data=e.data,this.layer=e.layer,this.linkService=e.linkService,this.downloadManager=e.downloadManager,this.imageResourcesPath=e.imageResourcesPath,this.renderForms=e.renderForms,this.svgFactory=e.svgFactory,this.annotationStorage=e.annotationStorage,this.enableComment=e.enableComment,this.enableScripting=e.enableScripting,this.hasJSActions=e.hasJSActions,this._fieldObjects=e.fieldObjects,this.parent=e.parent,t&&(this.container=this._createContainer(n)),i&&this._createQuadrilaterals()}static _hasPopupData(e){let{contentsObj:t,richText:n}=e;return!!(null!==t&&void 0!==t&&t.str||null!==n&&void 0!==n&&n.str)}get _isEditable(){return this.data.isEditable}get hasPopupData(){return AA._hasPopupData(this.data)||this.enableComment&&!!this.commentText}get commentData(){var e;const{data:t}=this,n=null===(e=this.annotationStorage)||void 0===e?void 0:e.getEditor(t.id);return n?n.getData():t}get hasCommentButton(){return this.enableComment&&this.hasPopupElement}get commentButtonPosition(){var e;const t=null===(e=this.annotationStorage)||void 0===e?void 0:e.getEditor(this.data.id);if(t)return t.commentButtonPositionInPage;const{quadPoints:n,inkLists:i,rect:r}=this.data;let s=-1/0,o=-1/0;if((null===n||void 0===n?void 0:n.length)>=8){for(let e=0;e<n.length;e+=8)n[e+1]>o?(o=n[e+1],s=n[e+2]):n[e+1]===o&&(s=Math.max(s,n[e+2]));return[s,o]}if((null===i||void 0===i?void 0:i.length)>=1){for(const e of i)for(let t=0,n=e.length;t<n;t+=2)e[t+1]>o?(o=e[t+1],s=e[t]):e[t+1]===o&&(s=Math.max(s,e[t]));if(s!==1/0)return[s,o]}return r?[r[2],r[3]]:null}_normalizePoint(e){const{page:{view:t},viewport:{rawDims:{pageWidth:n,pageHeight:i,pageX:r,pageY:s}}}=this.parent;return e[1]=t[3]-e[1]+t[1],e[0]=100*(e[0]-r)/n,e[1]=100*(e[1]-s)/i,e}get commentText(){var e,t;const{data:n}=this;return(null===(e=this.annotationStorage.getRawValue("".concat(Yg).concat(n.id)))||void 0===e||null===(e=e.popup)||void 0===e?void 0:e.contents)||(null===(t=n.contentsObj)||void 0===t?void 0:t.str)||""}set commentText(e){const{data:t}=this,n={deleted:!e,contents:e||""};this.annotationStorage.updateEditor(t.id,{popup:n})||this.annotationStorage.setValue("".concat(Yg).concat(t.id),{id:t.id,annotationType:t.annotationType,pageIndex:this.parent.page._pageIndex,popup:n,popupRef:t.popupRef,modificationDate:new Date}),e||this.removePopup()}removePopup(){var e,t;null===(e=(null===(t=gg(CA,this))||void 0===t?void 0:t.popup)||this.popup)||void 0===e||e.remove(),mg(CA,this,this.popup=null)}updateEdited(e){var t;if(!this.container)return;e.rect&&(gg(kA,this)||mg(kA,this,{rect:this.data.rect.slice(0)}));const{rect:n,popup:i}=e;n&&pg(SA,this,TA).call(this,n);let r=(null===(t=gg(CA,this))||void 0===t?void 0:t.popup)||this.popup;!r&&null!==i&&void 0!==i&&i.text&&(this._createPopup(i),r=gg(CA,this).popup),r&&(r.updateEdited(e),null!==i&&void 0!==i&&i.deleted&&(r.remove(),mg(CA,this,null),this.popup=null))}resetEdited(){var e;gg(kA,this)&&(pg(SA,this,TA).call(this,gg(kA,this).rect),null===(e=gg(CA,this))||void 0===e||e.popup.resetEdited(),mg(kA,this,null))}_createContainer(e){const{data:t,parent:{page:n,viewport:i}}=this,r=document.createElement("section");r.setAttribute("data-annotation-id",t.id),this instanceof LA||this instanceof RA||(r.tabIndex=0);const{style:s}=r;if(s.zIndex=this.parent.zIndex,this.parent.zIndex+=2,t.alternativeText&&(r.title=t.alternativeText),t.noRotate&&r.classList.add("norotate"),!t.rect||this instanceof VA){const{rotation:e}=t;return t.hasOwnCanvas||0===e||this.setRotation(e,r),r}const{width:o,height:a}=this;if(!e&&t.borderStyle.width>0){s.borderWidth="".concat(t.borderStyle.width,"px");const e=t.borderStyle.horizontalCornerRadius,n=t.borderStyle.verticalCornerRadius;if(e>0||n>0){const t="calc(".concat(e,"px * var(--total-scale-factor)) / calc(").concat(n,"px * var(--total-scale-factor))");s.borderRadius=t}else if(this instanceof WA){const e="calc(".concat(o,"px * var(--total-scale-factor)) / calc(").concat(a,"px * var(--total-scale-factor))");s.borderRadius=e}switch(t.borderStyle.style){case sm:s.borderStyle="solid";break;case om:s.borderStyle="dashed";break;case am:wm("Unimplemented border style: beveled");break;case lm:wm("Unimplemented border style: inset");break;case cm:s.borderBottomStyle="solid"}const i=t.borderColor||null;i?(mg(EA,this,!0),s.borderColor=Fm.makeHexColor(0|i[0],0|i[1],0|i[2])):s.borderWidth=0}const l=Fm.normalizeRect([t.rect[0],n.view[3]-t.rect[1]+n.view[1],t.rect[2],n.view[3]-t.rect[3]+n.view[1]]),{pageWidth:c,pageHeight:u,pageX:h,pageY:d}=i.rawDims;s.left="".concat(100*(l[0]-h)/c,"%"),s.top="".concat(100*(l[1]-d)/u,"%");const{rotation:p}=t;return t.hasOwnCanvas||0===p?(s.width="".concat(100*o/c,"%"),s.height="".concat(100*a/u,"%")):this.setRotation(p,r),r}setRotation(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.container;if(!this.data.rect)return;const{pageWidth:n,pageHeight:i}=this.parent.viewport.rawDims;let{width:r,height:s}=this;e%180!==0&&([r,s]=[s,r]),t.style.width="".concat(100*r/n,"%"),t.style.height="".concat(100*s/i,"%"),t.setAttribute("data-main-rotation",(360-e)%360)}get _commonActions(){const e=(e,t,n)=>{const i=n.detail[e],r=i[0],s=i.slice(1);n.target.style[t]=vA["".concat(r,"_HTML")](s),this.annotationStorage.setValue(this.data.id,{[t]:vA["".concat(r,"_rgb")](s)})};return Cm(this,"_commonActions",{display:e=>{const{display:t}=e.detail,n=t%2===1;this.container.style.visibility=n?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noView:n,noPrint:1===t||2===t})},print:e=>{this.annotationStorage.setValue(this.data.id,{noPrint:!e.detail.print})},hidden:e=>{const{hidden:t}=e.detail;this.container.style.visibility=t?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noPrint:t,noView:t})},focus:e=>{setTimeout(()=>e.target.focus({preventScroll:!1}),0)},userName:e=>{e.target.title=e.detail.userName},readonly:e=>{e.target.disabled=e.detail.readonly},required:e=>{this._setRequired(e.target,e.detail.required)},bgColor:t=>{e("bgColor","backgroundColor",t)},fillColor:t=>{e("fillColor","backgroundColor",t)},fgColor:t=>{e("fgColor","color",t)},textColor:t=>{e("textColor","color",t)},borderColor:t=>{e("borderColor","borderColor",t)},strokeColor:t=>{e("strokeColor","borderColor",t)},rotation:e=>{const t=e.detail.rotation;this.setRotation(t),this.annotationStorage.setValue(this.data.id,{rotation:t})}})}_dispatchEventFromSandbox(e,t){const n=this._commonActions;for(const i of Object.keys(t.detail)){const r=e[i]||n[i];null===r||void 0===r||r(t)}}_setDefaultPropertiesFromJS(e){if(!this.enableScripting)return;const t=this.annotationStorage.getRawValue(this.data.id);if(!t)return;const n=this._commonActions;for(const[i,r]of Object.entries(t)){const s=n[i];if(s){s({detail:{[i]:r},target:e}),delete t[i]}}}_createQuadrilaterals(){if(!this.container)return;const{quadPoints:e}=this.data;if(!e)return;const[t,n,i,r]=this.data.rect.map(e=>Math.fround(e));if(8===e.length){const[s,o,a,l]=e.subarray(2,6);if(i===s&&r===o&&t===a&&n===l)return}const{style:s}=this.container;let o;if(gg(EA,this)){const{borderColor:e,borderWidth:t}=s;s.borderWidth=0,o=["url('data:image/svg+xml;utf8,",'<svg xmlns="http://www.w3.org/2000/svg"',' preserveAspectRatio="none" viewBox="0 0 1 1">','<g fill="transparent" stroke="'.concat(e,'" stroke-width="').concat(t,'">')],this.container.classList.add("hasBorder")}const a=i-t,l=r-n,{svgFactory:c}=this,u=c.createElement("svg");u.classList.add("quadrilateralsContainer"),u.setAttribute("width",0),u.setAttribute("height",0),u.role="none";const h=c.createElement("defs");u.append(h);const d=c.createElement("clipPath"),p="clippath_".concat(this.data.id);d.setAttribute("id",p),d.setAttribute("clipPathUnits","objectBoundingBox"),h.append(d);for(let g=2,m=e.length;g<m;g+=8){var f;const n=e[g],i=e[g+1],s=e[g+2],u=e[g+3],h=c.createElement("rect"),p=(s-t)/a,m=(r-i)/l,v=(n-s)/a,y=(i-u)/l;h.setAttribute("x",p),h.setAttribute("y",m),h.setAttribute("width",v),h.setAttribute("height",y),d.append(h),null===(f=o)||void 0===f||f.push('<rect vector-effect="non-scaling-stroke" x="'.concat(p,'" y="').concat(m,'" width="').concat(v,'" height="').concat(y,'"/>'))}gg(EA,this)&&(o.push("</g></svg>')"),s.backgroundImage=o.join("")),this.container.append(u),this.container.style.clipPath="url(#".concat(p,")")}_createPopup(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;const{data:t}=this;let n,i;e?(n={str:e.text},i=e.date):(n=t.contentsObj,i=t.modificationDate);const r=mg(CA,this,new VA({data:{color:t.color,titleObj:t.titleObj,modificationDate:i,contentsObj:n,richText:t.richText,parentRect:t.rect,borderStyle:0,id:"popup_".concat(t.id),rotation:t.rotation,noRotate:!0},linkService:this.linkService,parent:this.parent,elements:[this]}));this.parent._commentManager||this.parent.div.append(r.render())}get hasPopupElement(){return!!(gg(CA,this)||this.popup||this.data.popupRef)}get extraPopupElement(){return gg(CA,this)}render(){bm("Abstract method `AnnotationElement.render` called")}_getElementsByName(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;const n=[];if(this._fieldObjects){const i=this._fieldObjects[e];if(i)for(const{page:e,id:r,exportValues:s}of i){if(-1===e)continue;if(r===t)continue;const i="string"===typeof s?s:null,o=document.querySelector('[data-element-id="'.concat(r,'"]'));!o||wA.has(o)?n.push({id:r,exportValue:i,domElement:o}):wm("_getElementsByName - element not allowed: ".concat(r))}return n}for(const i of document.getElementsByName(e)){const{exportValue:e}=i,r=i.getAttribute("data-element-id");r!==t&&(wA.has(i)&&n.push({id:r,exportValue:e,domElement:i}))}return n}show(){var e;this.container&&(this.container.hidden=!1),null===(e=this.popup)||void 0===e||e.maybeShow()}hide(){var e;this.container&&(this.container.hidden=!0),null===(e=this.popup)||void 0===e||e.forceHide()}getElementsToTriggerPopup(){return this.container}addHighlightArea(){const e=this.getElementsToTriggerPopup();if(Array.isArray(e))for(const t of e)t.classList.add("highlightArea");else e.classList.add("highlightArea")}_editOnDoubleClick(){if(!this._isEditable)return;const{annotationEditorType:e,data:{id:t}}=this;this.container.addEventListener("dblclick",()=>{var n;null===(n=this.linkService.eventBus)||void 0===n||n.dispatch("switchannotationeditormode",{source:this,mode:e,editId:t,mustEnterInEditMode:!0})})}get width(){return this.data.rect[2]-this.data.rect[0]}get height(){return this.data.rect[3]-this.data.rect[1]}}function TA(e){const{container:{style:t},data:{rect:n,rotation:i},parent:{viewport:{rawDims:{pageWidth:r,pageHeight:s,pageX:o,pageY:a}}}}=this;null===n||void 0===n||n.splice(0,4,...e),t.left="".concat(100*(e[0]-o)/r,"%"),t.top="".concat(100*(s-e[3]+a)/s,"%"),0===i?(t.width="".concat(100*(e[2]-e[0])/r,"%"),t.height="".concat(100*(e[3]-e[1])/s,"%")):this.setRotation(i)}class PA extends AA{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0}),this.editor=e.editor}render(){return this.container.className="editorAnnotation",this.container}createOrUpdatePopup(){const{editor:e}=this;e.hasComment&&(this._createPopup(e.comment),this.extraPopupElement.popup.renderCommentButton())}get hasCommentButton(){return this.enableComment&&this.editor.hasComment}get commentButtonPosition(){return this.editor.commentButtonPositionInPage}get commentText(){return this.editor.comment.text}set commentText(e){this.editor.comment=e,e||this.removePopup()}get commentData(){return this.editor.getData()}remove(){this.container.remove(),this.container=null,this.removePopup()}}var IA=new WeakSet;class RA extends AA{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;super(e,{isRenderable:!0,ignoreBorder:!(null===t||void 0===t||!t.ignoreBorder),createQuadrilaterals:!0}),hg(this,IA),this.isTooltipOnly=e.data.isTooltipOnly}render(){const{data:e,linkService:t}=this,n=document.createElement("a");n.setAttribute("data-element-id",e.id);let i=!1;return e.url?(t.addLinkAttributes(n,e.url,e.newWindow),i=!0):e.action?(this._bindNamedAction(n,e.action,e.overlaidText),i=!0):e.attachment?(pg(IA,this,NA).call(this,n,e.attachment,e.overlaidText,e.attachmentDest),i=!0):e.setOCGState?(pg(IA,this,DA).call(this,n,e.setOCGState,e.overlaidText),i=!0):e.dest?(this._bindLink(n,e.dest,e.overlaidText),i=!0):(e.actions&&(e.actions.Action||e.actions["Mouse Up"]||e.actions["Mouse Down"])&&this.enableScripting&&this.hasJSActions&&(this._bindJSAction(n,e),i=!0),e.resetForm?(this._bindResetFormAction(n,e.resetForm),i=!0):this.isTooltipOnly&&!i&&(this._bindLink(n,""),i=!0)),this.container.classList.add("linkAnnotation"),i&&this.container.append(n),this.container}_bindLink(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";e.href=this.linkService.getDestinationHash(t),e.onclick=()=>(t&&this.linkService.goToDestination(t),!1),(t||""===t)&&pg(IA,this,MA).call(this),n&&(e.title=n)}_bindNamedAction(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";e.href=this.linkService.getAnchorUrl(""),e.onclick=()=>(this.linkService.executeNamedAction(t),!1),n&&(e.title=n),pg(IA,this,MA).call(this)}_bindJSAction(e,t){e.href=this.linkService.getAnchorUrl("");const n=new Map([["Action","onclick"],["Mouse Up","onmouseup"],["Mouse Down","onmousedown"]]);for(const i of Object.keys(t.actions)){const r=n.get(i);r&&(e[r]=()=>{var e;return null===(e=this.linkService.eventBus)||void 0===e||e.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t.id,name:i}}),!1})}t.overlaidText&&(e.title=t.overlaidText),e.onclick||(e.onclick=()=>!1),pg(IA,this,MA).call(this)}_bindResetFormAction(e,t){const n=e.onclick;if(n||(e.href=this.linkService.getAnchorUrl("")),pg(IA,this,MA).call(this),!this._fieldObjects)return wm('_bindResetFormAction - "resetForm" action not supported, ensure that the `fieldObjects` parameter is provided.'),void(n||(e.onclick=()=>!1));e.onclick=()=>{null===n||void 0===n||n();const{fields:e,refs:i,include:r}=t,s=[];if(0!==e.length||0!==i.length){const t=new Set(i);for(const n of e){const e=this._fieldObjects[n]||[];for(const{id:n}of e)t.add(n)}for(const e of Object.values(this._fieldObjects))for(const n of e)t.has(n.id)===r&&s.push(n)}else for(const t of Object.values(this._fieldObjects))s.push(...t);const o=this.annotationStorage,a=[];for(const t of s){const{id:e}=t;switch(a.push(e),t.type){case"text":{const n=t.defaultValue||"";o.setValue(e,{value:n});break}case"checkbox":case"radiobutton":{const n=t.defaultValue===t.exportValues;o.setValue(e,{value:n});break}case"combobox":case"listbox":{const n=t.defaultValue||"";o.setValue(e,{value:n});break}default:continue}const n=document.querySelector('[data-element-id="'.concat(e,'"]'));n&&(wA.has(n)?n.dispatchEvent(new Event("resetform")):wm("_bindResetFormAction - element not allowed: ".concat(e)))}var l;this.enableScripting&&(null===(l=this.linkService.eventBus)||void 0===l||l.dispatch("dispatcheventinsandbox",{source:this,detail:{id:"app",ids:a,name:"ResetForm"}}));return!1}}}function MA(){this.container.setAttribute("data-internal-link","")}function NA(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;e.href=this.linkService.getAnchorUrl(""),t.description?e.title=t.description:n&&(e.title=n),e.onclick=()=>{var e;return null===(e=this.downloadManager)||void 0===e||e.openOrDownloadData(t.content,t.filename,i),!1},pg(IA,this,MA).call(this)}function DA(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";e.href=this.linkService.getAnchorUrl(""),e.onclick=()=>(this.linkService.executeSetOCGState(t),!1),n&&(e.title=n),pg(IA,this,MA).call(this)}class OA extends AA{constructor(e){super(e,{isRenderable:!0})}render(){this.container.classList.add("textAnnotation");const e=document.createElement("img");return e.src=this.imageResourcesPath+"annotation-"+this.data.name.toLowerCase()+".svg",e.setAttribute("data-l10n-id","pdfjs-text-annotation-type"),e.setAttribute("data-l10n-args",JSON.stringify({type:this.data.name})),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.append(e),this.container}}class LA extends AA{render(){return this.container}showElementAndHideCanvas(e){var t;this.data.hasOwnCanvas&&("CANVAS"===(null===(t=e.previousSibling)||void 0===t?void 0:t.nodeName)&&(e.previousSibling.hidden=!0),e.hidden=!1)}_getKeyModifier(e){return Om.platform.isMac?e.metaKey:e.ctrlKey}_setEventListener(e,t,n,i,r){n.includes("mouse")?e.addEventListener(n,e=>{var t;null===(t=this.linkService.eventBus)||void 0===t||t.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:i,value:r(e),shift:e.shiftKey,modifier:this._getKeyModifier(e)}})}):e.addEventListener(n,e=>{var s;if("blur"===n){if(!t.focused||!e.relatedTarget)return;t.focused=!1}else if("focus"===n){if(t.focused)return;t.focused=!0}r&&(null===(s=this.linkService.eventBus)||void 0===s||s.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:i,value:r(e)}}))})}_setEventListeners(e,t,n,i){for(const[a,l]of n){var r,s,o;if("Action"===l||null!==(r=this.data.actions)&&void 0!==r&&r[l])"Focus"!==l&&"Blur"!==l||t||(t={focused:!1}),this._setEventListener(e,t,a,l,i),"Focus"!==l||null!==(s=this.data.actions)&&void 0!==s&&s.Blur?"Blur"!==l||null!==(o=this.data.actions)&&void 0!==o&&o.Focus||this._setEventListener(e,t,"focus","Focus",null):this._setEventListener(e,t,"blur","Blur",null)}}_setBackgroundColor(e){const t=this.data.backgroundColor||null;e.style.backgroundColor=null===t?"transparent":Fm.makeHexColor(t[0],t[1],t[2])}_setTextStyle(e){const t=["left","center","right"],{fontColor:n}=this.data.defaultAppearanceData,i=this.data.defaultAppearanceData.fontSize||9,r=e.style;let s;const o=e=>Math.round(10*e)/10;if(this.data.multiLine){const e=Math.abs(this.data.rect[3]-this.data.rect[1]-2),t=e/(Math.round(e/(jg*i))||1);s=Math.min(i,o(t/jg))}else{const e=Math.abs(this.data.rect[3]-this.data.rect[1]-2);s=Math.min(i,o(e/jg))}r.fontSize="calc(".concat(s,"px * var(--total-scale-factor))"),r.color=Fm.makeHexColor(n[0],n[1],n[2]),null!==this.data.textAlignment&&(r.textAlign=t[this.data.textAlignment])}_setRequired(e,t){t?e.setAttribute("required",!0):e.removeAttribute("required"),e.setAttribute("aria-required",t)}}class FA extends LA{constructor(e){super(e,{isRenderable:e.renderForms||e.data.hasOwnCanvas||!e.data.hasAppearance&&!!e.data.fieldValue})}setPropertyOnSiblings(e,t,n,i){const r=this.annotationStorage;for(const s of this._getElementsByName(e.name,e.id))s.domElement&&(s.domElement[t]=n),r.setValue(s.id,{[i]:n})}render(){const e=this.annotationStorage,t=this.data.id;this.container.classList.add("textWidgetAnnotation");let n=null;if(this.renderForms){var i;const s=e.getValue(t,{value:this.data.fieldValue});let o=s.value||"";const a=e.getValue(t,{charLimit:this.data.maxLen}).charLimit;a&&o.length>a&&(o=o.slice(0,a));let l=s.formattedValue||(null===(i=this.data.textContent)||void 0===i?void 0:i.join("\n"))||null;l&&this.data.comb&&(l=l.replaceAll(/\s+/g,""));const c={userValue:o,formattedValue:l,lastCommittedValue:null,commitKey:1,focused:!1};this.data.multiLine?(n=document.createElement("textarea"),n.textContent=null!==l&&void 0!==l?l:o,this.data.doNotScroll&&(n.style.overflowY="hidden")):(n=document.createElement("input"),n.type=this.data.password?"password":"text",n.setAttribute("value",null!==l&&void 0!==l?l:o),this.data.doNotScroll&&(n.style.overflowX="hidden")),this.data.hasOwnCanvas&&(n.hidden=!0),wA.add(n),n.setAttribute("data-element-id",t),n.disabled=this.data.readOnly,n.name=this.data.fieldName,n.tabIndex=0;const{datetimeFormat:u,datetimeType:h,timeStep:d}=this.data,p=!!h&&this.enableScripting;u&&(n.title=u),this._setRequired(n,this.data.required),a&&(n.maxLength=a),n.addEventListener("input",i=>{e.setValue(t,{value:i.target.value}),this.setPropertyOnSiblings(n,"value",i.target.value,"value"),c.formattedValue=null}),n.addEventListener("resetform",e=>{var t;const i=null!==(t=this.data.defaultFieldValue)&&void 0!==t?t:"";n.value=c.userValue=i,c.formattedValue=null});let f=e=>{const{formattedValue:t}=c;null!==t&&void 0!==t&&(e.target.value=t),e.target.scrollLeft=0};if(this.enableScripting&&this.hasJSActions){var r;n.addEventListener("focus",e=>{var t;if(c.focused)return;const{target:n}=e;if(p&&(n.type=h,d&&(n.step=d)),c.userValue){const e=c.userValue;if(p)if("time"===h){const t=new Date(e),i=[t.getHours(),t.getMinutes(),t.getSeconds()];n.value=i.map(e=>e.toString().padStart(2,"0")).join(":")}else n.value=new Date(e-bA).toISOString().split("date"===h?"T":".",1)[0];else n.value=e}c.lastCommittedValue=n.value,c.commitKey=1,null!==(t=this.data.actions)&&void 0!==t&&t.Focus||(c.focused=!0)}),n.addEventListener("updatefromsandbox",n=>{this.showElementAndHideCanvas(n.target);const i={value(n){var i;c.userValue=null!==(i=n.detail.value)&&void 0!==i?i:"",p||e.setValue(t,{value:c.userValue.toString()}),n.target.value=c.userValue},formattedValue(n){const{formattedValue:i}=n.detail;c.formattedValue=i,null!==i&&void 0!==i&&n.target!==document.activeElement&&(n.target.value=i);const r={formattedValue:i};p&&(r.value=i),e.setValue(t,r)},selRange(e){e.target.setSelectionRange(...e.detail.selRange)},charLimit:n=>{var i;const{charLimit:r}=n.detail,{target:s}=n;if(0===r)return void s.removeAttribute("maxLength");s.setAttribute("maxLength",r);let o=c.userValue;!o||o.length<=r||(o=o.slice(0,r),s.value=c.userValue=o,e.setValue(t,{value:o}),null===(i=this.linkService.eventBus)||void 0===i||i.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:o,willCommit:!0,commitKey:1,selStart:s.selectionStart,selEnd:s.selectionEnd}}))}};this._dispatchEventFromSandbox(i,n)}),n.addEventListener("keydown",e=>{var n;c.commitKey=1;let i=-1;if("Escape"===e.key?i=0:"Enter"!==e.key||this.data.multiLine?"Tab"===e.key&&(c.commitKey=3):i=2,-1===i)return;const{value:r}=e.target;c.lastCommittedValue!==r&&(c.lastCommittedValue=r,c.userValue=r,null===(n=this.linkService.eventBus)||void 0===n||n.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:r,willCommit:!0,commitKey:i,selStart:e.target.selectionStart,selEnd:e.target.selectionEnd}}))});const i=f;f=null,n.addEventListener("blur",e=>{var n;if(!c.focused||!e.relatedTarget)return;null!==(n=this.data.actions)&&void 0!==n&&n.Blur||(c.focused=!1);const{target:r}=e;let{value:s}=r;if(p){if(s&&"time"===h){const e=s.split(":").map(e=>parseInt(e,10));s=new Date(2e3,0,1,e[0],e[1],e[2]||0).valueOf(),r.step=""}else s.includes("T")||(s="".concat(s,"T00:00")),s=new Date(s).valueOf();r.type="text"}var o;(c.userValue=s,c.lastCommittedValue!==s)&&(null===(o=this.linkService.eventBus)||void 0===o||o.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:s,willCommit:!0,commitKey:c.commitKey,selStart:e.target.selectionStart,selEnd:e.target.selectionEnd}}));i(e)}),null!==(r=this.data.actions)&&void 0!==r&&r.Keystroke&&n.addEventListener("beforeinput",e=>{var n;c.lastCommittedValue=null;const{data:i,target:r}=e,{value:s,selectionStart:o,selectionEnd:a}=r;let l=o,u=a;switch(e.inputType){case"deleteWordBackward":{const e=s.substring(0,o).match(/\w*[^\w]*$/);e&&(l-=e[0].length);break}case"deleteWordForward":{const e=s.substring(o).match(/^[^\w]*\w*/);e&&(u+=e[0].length);break}case"deleteContentBackward":o===a&&(l-=1);break;case"deleteContentForward":o===a&&(u+=1)}e.preventDefault(),null===(n=this.linkService.eventBus)||void 0===n||n.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:s,change:i||"",willCommit:!1,selStart:l,selEnd:u}})}),this._setEventListeners(n,c,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],e=>e.target.value)}if(f&&n.addEventListener("blur",f),this.data.comb){const e=(this.data.rect[2]-this.data.rect[0])/a;n.classList.add("comb"),n.style.letterSpacing="calc(".concat(e,"px * var(--total-scale-factor) - 1ch)")}}else n=document.createElement("div"),n.textContent=this.data.fieldValue,n.style.verticalAlign="middle",n.style.display="table-cell",this.data.hasOwnCanvas&&(n.hidden=!0);return this._setTextStyle(n),this._setBackgroundColor(n),this._setDefaultPropertiesFromJS(n),this.container.append(n),this.container}}class jA extends LA{constructor(e){super(e,{isRenderable:!!e.data.hasOwnCanvas})}}class BA extends LA{constructor(e){super(e,{isRenderable:e.renderForms})}render(){const e=this.annotationStorage,t=this.data,n=t.id;let i=e.getValue(n,{value:t.exportValue===t.fieldValue}).value;"string"===typeof i&&(i="Off"!==i,e.setValue(n,{value:i})),this.container.classList.add("buttonWidgetAnnotation","checkBox");const r=document.createElement("input");return wA.add(r),r.setAttribute("data-element-id",n),r.disabled=t.readOnly,this._setRequired(r,this.data.required),r.type="checkbox",r.name=t.fieldName,i&&r.setAttribute("checked",!0),r.setAttribute("exportValue",t.exportValue),r.tabIndex=0,r.addEventListener("change",i=>{const{name:r,checked:s}=i.target;for(const o of this._getElementsByName(r,n)){const n=s&&o.exportValue===t.exportValue;o.domElement&&(o.domElement.checked=n),e.setValue(o.id,{value:n})}e.setValue(n,{value:s})}),r.addEventListener("resetform",e=>{const n=t.defaultFieldValue||"Off";e.target.checked=n===t.exportValue}),this.enableScripting&&this.hasJSActions&&(r.addEventListener("updatefromsandbox",t=>{const i={value(t){t.target.checked="Off"!==t.detail.value,e.setValue(n,{value:t.target.checked})}};this._dispatchEventFromSandbox(i,t)}),this._setEventListeners(r,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],e=>e.target.checked)),this._setBackgroundColor(r),this._setDefaultPropertiesFromJS(r),this.container.append(r),this.container}}class WA extends LA{constructor(e){super(e,{isRenderable:e.renderForms})}render(){this.container.classList.add("buttonWidgetAnnotation","radioButton");const e=this.annotationStorage,t=this.data,n=t.id;let i=e.getValue(n,{value:t.fieldValue===t.buttonValue}).value;if("string"===typeof i&&(i=i!==t.buttonValue,e.setValue(n,{value:i})),i)for(const s of this._getElementsByName(t.fieldName,n))e.setValue(s.id,{value:!1});const r=document.createElement("input");if(wA.add(r),r.setAttribute("data-element-id",n),r.disabled=t.readOnly,this._setRequired(r,this.data.required),r.type="radio",r.name=t.fieldName,i&&r.setAttribute("checked",!0),r.tabIndex=0,r.addEventListener("change",t=>{const{name:i,checked:r}=t.target;for(const s of this._getElementsByName(i,n))e.setValue(s.id,{value:!1});e.setValue(n,{value:r})}),r.addEventListener("resetform",e=>{const n=t.defaultFieldValue;e.target.checked=null!==n&&void 0!==n&&n===t.buttonValue}),this.enableScripting&&this.hasJSActions){const i=t.buttonValue;r.addEventListener("updatefromsandbox",t=>{const r={value:t=>{const r=i===t.detail.value;for(const i of this._getElementsByName(t.target.name)){const t=r&&i.id===n;i.domElement&&(i.domElement.checked=t),e.setValue(i.id,{value:t})}}};this._dispatchEventFromSandbox(r,t)}),this._setEventListeners(r,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],e=>e.target.checked)}return this._setBackgroundColor(r),this._setDefaultPropertiesFromJS(r),this.container.append(r),this.container}}class UA extends RA{constructor(e){super(e,{ignoreBorder:e.data.hasAppearance})}render(){const e=super.render();e.classList.add("buttonWidgetAnnotation","pushButton");const t=e.lastChild;return this.enableScripting&&this.hasJSActions&&t&&(this._setDefaultPropertiesFromJS(t),t.addEventListener("updatefromsandbox",e=>{this._dispatchEventFromSandbox({},e)})),e}}class zA extends LA{constructor(e){super(e,{isRenderable:e.renderForms})}render(){this.container.classList.add("choiceWidgetAnnotation");const e=this.annotationStorage,t=this.data.id,n=e.getValue(t,{value:this.data.fieldValue}),i=document.createElement("select");wA.add(i),i.setAttribute("data-element-id",t),i.disabled=this.data.readOnly,this._setRequired(i,this.data.required),i.name=this.data.fieldName,i.tabIndex=0;let r=this.data.combo&&this.data.options.length>0;this.data.combo||(i.size=this.data.options.length,this.data.multiSelect&&(i.multiple=!0)),i.addEventListener("resetform",e=>{const t=this.data.defaultFieldValue;for(const n of i.options)n.selected=n.value===t});for(const c of this.data.options){const e=document.createElement("option");e.textContent=c.displayValue,e.value=c.exportValue,n.value.includes(c.exportValue)&&(e.setAttribute("selected",!0),r=!1),i.append(e)}let s=null;if(r){const e=document.createElement("option");e.value=" ",e.setAttribute("hidden",!0),e.setAttribute("selected",!0),i.prepend(e),s=()=>{e.remove(),i.removeEventListener("input",s),s=null},i.addEventListener("input",s)}const o=e=>{const t=e?"value":"textContent",{options:n,multiple:r}=i;return r?Array.prototype.filter.call(n,e=>e.selected).map(e=>e[t]):-1===n.selectedIndex?null:n[n.selectedIndex][t]};let a=o(!1);const l=e=>{const t=e.target.options;return Array.prototype.map.call(t,e=>({displayValue:e.textContent,exportValue:e.value}))};return this.enableScripting&&this.hasJSActions?(i.addEventListener("updatefromsandbox",n=>{const r={value(n){var r;null===(r=s)||void 0===r||r();const l=n.detail.value,c=new Set(Array.isArray(l)?l:[l]);for(const e of i.options)e.selected=c.has(e.value);e.setValue(t,{value:o(!0)}),a=o(!1)},multipleSelection(e){i.multiple=!0},remove(n){const r=i.options,s=n.detail.remove;if(r[s].selected=!1,i.remove(s),r.length>0){-1===Array.prototype.findIndex.call(r,e=>e.selected)&&(r[0].selected=!0)}e.setValue(t,{value:o(!0),items:l(n)}),a=o(!1)},clear(n){for(;0!==i.length;)i.remove(0);e.setValue(t,{value:null,items:[]}),a=o(!1)},insert(n){const{index:r,displayValue:s,exportValue:c}=n.detail.insert,u=i.children[r],h=document.createElement("option");h.textContent=s,h.value=c,u?u.before(h):i.append(h),e.setValue(t,{value:o(!0),items:l(n)}),a=o(!1)},items(n){const{items:r}=n.detail;for(;0!==i.length;)i.remove(0);for(const e of r){const{displayValue:t,exportValue:n}=e,r=document.createElement("option");r.textContent=t,r.value=n,i.append(r)}i.options.length>0&&(i.options[0].selected=!0),e.setValue(t,{value:o(!0),items:l(n)}),a=o(!1)},indices(n){const i=new Set(n.detail.indices);for(const e of n.target.options)e.selected=i.has(e.index);e.setValue(t,{value:o(!0)}),a=o(!1)},editable(e){e.target.disabled=!e.detail.editable}};this._dispatchEventFromSandbox(r,n)}),i.addEventListener("input",n=>{var i;const r=o(!0),s=o(!1);e.setValue(t,{value:r}),n.preventDefault(),null===(i=this.linkService.eventBus)||void 0===i||i.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:a,change:s,changeEx:r,willCommit:!1,commitKey:1,keyDown:!1}})}),this._setEventListeners(i,null,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"],["input","Action"],["input","Validate"]],e=>e.target.value)):i.addEventListener("input",function(n){e.setValue(t,{value:o(!0)})}),this.data.combo&&this._setTextStyle(i),this._setBackgroundColor(i),this._setDefaultPropertiesFromJS(i),this.container.append(i),this.container}}var HA=new WeakSet;class VA extends AA{constructor(e){const{data:t,elements:n,parent:i}=e,r=!!i._commentManager;if(super(e,{isRenderable:!r&&AA._hasPopupData(t)}),hg(this,HA),this.elements=n,r&&AA._hasPopupData(t)){const e=this.popup=pg(HA,this,qA).call(this);for(const t of n)t.popup=e}else this.popup=null}render(){const{container:e}=this;e.classList.add("popupAnnotation"),e.role="comment";const t=this.popup=pg(HA,this,qA).call(this),n=[];for(const i of this.elements)i.popup=t,i.container.ariaHasPopup="dialog",n.push(i.data.id),i.addHighlightArea();return this.container.setAttribute("aria-controls",n.map(e=>"".concat(Hm).concat(e)).join(",")),this.container}}function qA(){return new _T({container:this.container,color:this.data.color,titleObj:this.data.titleObj,modificationDate:this.data.modificationDate||this.data.creationDate,contentsObj:this.data.contentsObj,richText:this.data.richText,rect:this.data.rect,parentRect:this.data.parentRect||null,parent:this.parent,elements:this.elements,open:this.data.open,commentManager:this.parent._commentManager})}var GA=new WeakMap,KA=new WeakMap,YA=new WeakMap,XA=new WeakMap,QA=new WeakMap,$A=new WeakMap,JA=new WeakMap,ZA=new WeakMap,eT=new WeakMap,tT=new WeakMap,nT=new WeakMap,iT=new WeakMap,rT=new WeakMap,sT=new WeakMap,oT=new WeakMap,aT=new WeakMap,lT=new WeakMap,cT=new WeakMap,uT=new WeakMap,hT=new WeakMap,dT=new WeakMap,pT=new WeakMap,fT=new WeakMap,gT=new WeakMap,mT=new WeakMap,vT=new WeakMap,yT=new WeakSet;class _T{constructor(e){let{container:t,color:n,elements:i,titleObj:r,modificationDate:s,contentsObj:o,richText:a,parent:l,rect:c,parentRect:u,open:h,commentManager:d=null}=e;hg(this,yT),dg(this,GA,null),dg(this,KA,pg(yT,this,TT).bind(this)),dg(this,YA,pg(yT,this,MT).bind(this)),dg(this,XA,pg(yT,this,RT).bind(this)),dg(this,QA,pg(yT,this,IT).bind(this)),dg(this,$A,null),dg(this,JA,null),dg(this,ZA,null),dg(this,eT,null),dg(this,tT,null),dg(this,nT,null),dg(this,iT,null),dg(this,rT,!1),dg(this,sT,null),dg(this,oT,null),dg(this,aT,null),dg(this,lT,null),dg(this,cT,null),dg(this,uT,null),dg(this,hT,null),dg(this,dT,null),dg(this,pT,null),dg(this,fT,null),dg(this,gT,!1),dg(this,mT,null),dg(this,vT,null),mg(JA,this,t),mg(pT,this,r),mg(ZA,this,o),mg(dT,this,a),mg(nT,this,l),mg($A,this,n),mg(hT,this,c),mg(iT,this,u),mg(tT,this,i),mg(GA,this,d),mg(mT,this,i[0]),mg(eT,this,sv.toDateObject(s)),this.trigger=i.flatMap(e=>e.getElementsToTriggerPopup()),d?this.renderCommentButton():(pg(yT,this,wT).call(this),gg(JA,this).hidden=!0,h&&pg(yT,this,IT).call(this))}renderCommentButton(){if(gg(lT,this))return;if(gg(cT,this)||pg(yT,this,bT).call(this),!gg(cT,this))return;const{signal:e}=mg(oT,this,new AbortController),t=!!gg(mT,this).extraPopupElement,n=()=>{gg(GA,this).toggleCommentPopup(this,!0,void 0,!t)},i=()=>{gg(GA,this).toggleCommentPopup(this,!1,!0,!t)},r=()=>{gg(GA,this).toggleCommentPopup(this,!1,!1)};if(t){mg(lT,this,gg(mT,this).container);for(const t of this.trigger)t.ariaHasPopup="dialog",t.ariaControls="commentPopup",t.addEventListener("keydown",gg(KA,this),{signal:e}),t.addEventListener("click",n,{signal:e}),t.addEventListener("pointerenter",i,{signal:e}),t.addEventListener("pointerleave",r,{signal:e}),t.classList.add("popupTriggerArea")}else{const t=mg(lT,this,document.createElement("button"));t.className="annotationCommentButton";const s=gg(mT,this).container;t.style.zIndex=s.style.zIndex+1,t.tabIndex=0,t.ariaHasPopup="dialog",t.ariaControls="commentPopup",t.setAttribute("data-l10n-id","pdfjs-show-comment-button"),pg(yT,this,kT).call(this),pg(yT,this,xT).call(this),t.addEventListener("keydown",gg(KA,this),{signal:e}),t.addEventListener("click",n,{signal:e}),t.addEventListener("pointerenter",i,{signal:e}),t.addEventListener("pointerleave",r,{signal:e}),s.after(t)}}get commentButtonColor(){const{color:e,opacity:t}=gg(mT,this).commentData;return e?gg(nT,this)._commentManager.makeCommentColor(e,t):null}focusCommentButton(){setTimeout(()=>{var e;null===(e=gg(lT,this))||void 0===e||e.focus()},0)}getData(){const{richText:e,color:t,opacity:n,creationDate:i,modificationDate:r}=gg(mT,this).commentData;return{contentsObj:{str:this.comment},richText:e,color:t,opacity:n,creationDate:i,modificationDate:r}}get elementBeforePopup(){return gg(lT,this)}get comment(){return gg(vT,this)||mg(vT,this,gg(mT,this).commentText),gg(vT,this)}set comment(e){e!==this.comment&&(gg(mT,this).commentText=mg(vT,this,e))}get parentBoundingClientRect(){return gg(mT,this).layer.getBoundingClientRect()}setCommentButtonStates(e){let{selected:t,hasPopup:n}=e;gg(lT,this)&&(gg(lT,this).classList.toggle("selected",t),gg(lT,this).ariaExpanded=n)}setSelectedCommentButton(e){gg(lT,this).classList.toggle("selected",e)}get commentPopupPosition(){if(gg(uT,this))return gg(uT,this);const{x:e,y:t,height:n}=gg(lT,this).getBoundingClientRect(),{x:i,y:r,width:s,height:o}=gg(mT,this).layer.getBoundingClientRect();return[(e-i)/s,(t+n-r)/o]}set commentPopupPosition(e){mg(uT,this,e)}hasDefaultPopupPosition(){return null===gg(uT,this)}get commentButtonPosition(){return gg(cT,this)}get commentButtonWidth(){return gg(lT,this).getBoundingClientRect().width/this.parentBoundingClientRect.width}editComment(e){const[t,n]=gg(uT,this)||this.commentButtonPosition.map(e=>e/100),i=this.parentBoundingClientRect,{x:r,y:s,width:o,height:a}=i;gg(GA,this).showDialog(null,this,r+t*o,s+n*a,It(It({},e),{},{parentDimensions:i}))}render(){var e,t;if(gg(sT,this))return;const n=mg(sT,this,document.createElement("div"));if(n.className="popup",gg($A,this)){const e=n.style.outlineColor=Fm.makeHexColor(...gg($A,this));n.style.backgroundColor="color-mix(in srgb, ".concat(e," 30%, white)")}const i=document.createElement("span");if(i.className="header",null!==(e=gg(pT,this))&&void 0!==e&&e.str){const e=document.createElement("span");e.className="title",i.append(e),({dir:e.dir,str:e.textContent}=gg(pT,this))}if(n.append(i),gg(eT,this)){const e=document.createElement("time");e.className="popupDate",e.setAttribute("data-l10n-id","pdfjs-annotation-date-time-string"),e.setAttribute("data-l10n-args",JSON.stringify({dateObj:gg(eT,this).valueOf()})),e.dateTime=gg(eT,this).toISOString(),i.append(e)}_v({html:fg(yT,this,ET)||gg(ZA,this).str,dir:null===(t=gg(ZA,this))||void 0===t?void 0:t.dir,className:"popupContent"},n),gg(JA,this).append(n)}updateEdited(e){var t;let{rect:n,popup:i,deleted:r}=e;if(gg(GA,this))return r?(this.remove(),mg(vT,this,null)):i&&(i.deleted?this.remove():(pg(yT,this,kT).call(this),mg(vT,this,i.text))),void(n&&(mg(cT,this,null),pg(yT,this,bT).call(this),pg(yT,this,xT).call(this)));r||null!==i&&void 0!==i&&i.deleted?this.remove():(pg(yT,this,wT).call(this),gg(fT,this)||mg(fT,this,{contentsObj:gg(ZA,this),richText:gg(dT,this)}),n&&mg(aT,this,null),i&&i.text&&(mg(dT,this,pg(yT,this,AT).call(this,i.text)),mg(eT,this,sv.toDateObject(i.date)),mg(ZA,this,null)),null===(t=gg(sT,this))||void 0===t||t.remove(),mg(sT,this,null))}resetEdited(){var e;gg(fT,this)&&(({contentsObj:cg(mg,[ZA,this])._,richText:cg(mg,[dT,this])._}=gg(fT,this)),mg(fT,this,null),null===(e=gg(sT,this))||void 0===e||e.remove(),mg(sT,this,null),mg(aT,this,null))}remove(){var e,t,n;if(null===(e=gg(oT,this))||void 0===e||e.abort(),mg(oT,this,null),null===(t=gg(sT,this))||void 0===t||t.remove(),mg(sT,this,null),mg(gT,this,!1),mg(rT,this,!1),null===(n=gg(lT,this))||void 0===n||n.remove(),mg(lT,this,null),this.trigger)for(const i of this.trigger)i.classList.remove("popupTriggerArea")}forceHide(){mg(gT,this,this.isVisible),gg(gT,this)&&(gg(JA,this).hidden=!0)}maybeShow(){gg(GA,this)||(pg(yT,this,wT).call(this),gg(gT,this)&&(gg(sT,this)||pg(yT,this,RT).call(this),mg(gT,this,!1),gg(JA,this).hidden=!1))}get isVisible(){return!gg(GA,this)&&!1===gg(JA,this).hidden}}function wT(){if(gg(oT,this))return;mg(oT,this,new AbortController);const{signal:e}=gg(oT,this);for(const n of this.trigger)n.addEventListener("click",gg(QA,this),{signal:e}),n.addEventListener("pointerenter",gg(XA,this),{signal:e}),n.addEventListener("pointerleave",gg(YA,this),{signal:e}),n.classList.add("popupTriggerArea");for(const n of gg(tT,this)){var t;null===(t=n.container)||void 0===t||t.addEventListener("keydown",gg(KA,this),{signal:e})}}function bT(){const e=gg(tT,this).find(e=>e.hasCommentButton);e&&mg(cT,this,e._normalizePoint(e.commentButtonPosition))}function xT(){if(gg(mT,this).extraPopupElement&&!gg(mT,this).editor)return;this.renderCommentButton();const[e,t]=gg(cT,this),{style:n}=gg(lT,this);n.left="calc(".concat(e,"%)"),n.top="calc(".concat(t,"% - var(--comment-button-dim))")}function kT(){gg(mT,this).extraPopupElement||(this.renderCommentButton(),gg(lT,this).style.backgroundColor=this.commentButtonColor||"")}function ET(e){const t=gg(dT,e),n=gg(ZA,e);return null===t||void 0===t||!t.str||null!==n&&void 0!==n&&n.str&&n.str!==t.str?null:gg(dT,e).html||null}function CT(e){var t;return(null===(t=fg(yT,e,ET))||void 0===t||null===(t=t.attributes)||void 0===t||null===(t=t.style)||void 0===t?void 0:t.fontSize)||0}function ST(e){var t;return(null===(t=fg(yT,e,ET))||void 0===t||null===(t=t.attributes)||void 0===t||null===(t=t.style)||void 0===t?void 0:t.color)||null}function AT(e){const t=[],n={str:e,html:{name:"div",attributes:{dir:"auto"},children:[{name:"p",children:t}]}},i={style:{color:fg(yT,this,ST),fontSize:fg(yT,this,CT)?"calc(".concat(fg(yT,this,CT),"px * var(--total-scale-factor))"):""}};for(const r of e.split("\n"))t.push({name:"span",value:r,attributes:i});return n}function TT(e){e.altKey||e.shiftKey||e.ctrlKey||e.metaKey||("Enter"===e.key||"Escape"===e.key&&gg(rT,this))&&pg(yT,this,IT).call(this)}function PT(){if(null!==gg(aT,this))return;const{page:{view:e},viewport:{rawDims:{pageWidth:t,pageHeight:n,pageX:i,pageY:r}}}=gg(nT,this);let s=!!gg(iT,this),o=gg(s?iT:hT,this);for(const d of gg(tT,this))if(!o||null!==Fm.intersect(d.data.rect,o)){o=d.data.rect,s=!0;break}const a=Fm.normalizeRect([o[0],e[3]-o[1]+e[1],o[2],e[3]-o[3]+e[1]]),l=s?o[2]-o[0]+5:0,c=a[0]+l,u=a[1];mg(aT,this,[100*(c-i)/t,100*(u-r)/n]);const{style:h}=gg(JA,this);h.left="".concat(gg(aT,this)[0],"%"),h.top="".concat(gg(aT,this)[1],"%")}function IT(){gg(GA,this)?gg(GA,this).toggleCommentPopup(this,!1):(mg(rT,this,!gg(rT,this)),gg(rT,this)?(pg(yT,this,RT).call(this),gg(JA,this).addEventListener("click",gg(QA,this)),gg(JA,this).addEventListener("keydown",gg(KA,this))):(pg(yT,this,MT).call(this),gg(JA,this).removeEventListener("click",gg(QA,this)),gg(JA,this).removeEventListener("keydown",gg(KA,this))))}function RT(){gg(sT,this)||this.render(),this.isVisible?gg(rT,this)&&gg(JA,this).classList.add("focused"):(pg(yT,this,PT).call(this),gg(JA,this).hidden=!1,gg(JA,this).style.zIndex=parseInt(gg(JA,this).style.zIndex)+1e3)}function MT(){gg(JA,this).classList.remove("focused"),!gg(rT,this)&&this.isVisible&&(gg(JA,this).hidden=!0,gg(JA,this).style.zIndex=parseInt(gg(JA,this).style.zIndex)-1e3)}class NT extends AA{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0}),this.textContent=e.data.textContent,this.textPosition=e.data.textPosition,this.annotationEditorType=Xg.FREETEXT}render(){if(this.container.classList.add("freeTextAnnotation"),this.textContent){const e=document.createElement("div");e.classList.add("annotationTextContent"),e.setAttribute("role","comment");for(const t of this.textContent){const n=document.createElement("span");n.textContent=t,e.append(n)}this.container.append(e)}return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this._editOnDoubleClick(),this.container}}var DT=new WeakMap;class OT extends AA{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0}),dg(this,DT,null)}render(){this.container.classList.add("lineAnnotation");const{data:e,width:t,height:n}=this,i=this.svgFactory.create(t,n,!0),r=mg(DT,this,this.svgFactory.createElement("svg:line"));return r.setAttribute("x1",e.rect[2]-e.lineCoordinates[0]),r.setAttribute("y1",e.rect[3]-e.lineCoordinates[1]),r.setAttribute("x2",e.rect[2]-e.lineCoordinates[2]),r.setAttribute("y2",e.rect[3]-e.lineCoordinates[3]),r.setAttribute("stroke-width",e.borderStyle.width||1),r.setAttribute("stroke","transparent"),r.setAttribute("fill","transparent"),i.append(r),this.container.append(i),!e.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return gg(DT,this)}addHighlightArea(){this.container.classList.add("highlightArea")}}var LT=new WeakMap;class FT extends AA{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0}),dg(this,LT,null)}render(){this.container.classList.add("squareAnnotation");const{data:e,width:t,height:n}=this,i=this.svgFactory.create(t,n,!0),r=e.borderStyle.width,s=mg(LT,this,this.svgFactory.createElement("svg:rect"));return s.setAttribute("x",r/2),s.setAttribute("y",r/2),s.setAttribute("width",t-r),s.setAttribute("height",n-r),s.setAttribute("stroke-width",r||1),s.setAttribute("stroke","transparent"),s.setAttribute("fill","transparent"),i.append(s),this.container.append(i),!e.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return gg(LT,this)}addHighlightArea(){this.container.classList.add("highlightArea")}}var jT=new WeakMap;class BT extends AA{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0}),dg(this,jT,null)}render(){this.container.classList.add("circleAnnotation");const{data:e,width:t,height:n}=this,i=this.svgFactory.create(t,n,!0),r=e.borderStyle.width,s=mg(jT,this,this.svgFactory.createElement("svg:ellipse"));return s.setAttribute("cx",t/2),s.setAttribute("cy",n/2),s.setAttribute("rx",t/2-r/2),s.setAttribute("ry",n/2-r/2),s.setAttribute("stroke-width",r||1),s.setAttribute("stroke","transparent"),s.setAttribute("fill","transparent"),i.append(s),this.container.append(i),!e.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return gg(jT,this)}addHighlightArea(){this.container.classList.add("highlightArea")}}var WT=new WeakMap;class UT extends AA{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0}),dg(this,WT,null),this.containerClassName="polylineAnnotation",this.svgElementName="svg:polyline"}render(){this.container.classList.add(this.containerClassName);const{data:{rect:e,vertices:t,borderStyle:n,popupRef:i},width:r,height:s}=this;if(!t)return this.container;const o=this.svgFactory.create(r,s,!0);let a=[];for(let c=0,u=t.length;c<u;c+=2){const n=t[c]-e[0],i=e[3]-t[c+1];a.push("".concat(n,",").concat(i))}a=a.join(" ");const l=mg(WT,this,this.svgFactory.createElement(this.svgElementName));return l.setAttribute("points",a),l.setAttribute("stroke-width",n.width||1),l.setAttribute("stroke","transparent"),l.setAttribute("fill","transparent"),o.append(l),this.container.append(o),!i&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return gg(WT,this)}addHighlightArea(){this.container.classList.add("highlightArea")}}class zT extends UT{constructor(e){super(e),this.containerClassName="polygonAnnotation",this.svgElementName="svg:polygon"}}class HT extends AA{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0})}render(){return this.container.classList.add("caretAnnotation"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container}}var VT=new WeakMap,qT=new WeakMap,GT=new WeakSet;class KT extends AA{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0}),hg(this,GT),dg(this,VT,null),dg(this,qT,[]),this.containerClassName="inkAnnotation",this.svgElementName="svg:polyline",this.annotationEditorType="InkHighlight"===this.data.it?Xg.HIGHLIGHT:Xg.INK}render(){this.container.classList.add(this.containerClassName);const{data:{rect:e,rotation:t,inkLists:n,borderStyle:i,popupRef:r}}=this,{transform:s,width:o,height:a}=pg(GT,this,YT).call(this,t,e),l=this.svgFactory.create(o,a,!0),c=mg(VT,this,this.svgFactory.createElement("svg:g"));l.append(c),c.setAttribute("stroke-width",i.width||1),c.setAttribute("stroke-linecap","round"),c.setAttribute("stroke-linejoin","round"),c.setAttribute("stroke-miterlimit",10),c.setAttribute("stroke","transparent"),c.setAttribute("fill","transparent"),c.setAttribute("transform",s);for(let u=0,h=n.length;u<h;u++){const e=this.svgFactory.createElement(this.svgElementName);gg(qT,this).push(e),e.setAttribute("points",n[u].join(",")),c.append(e)}return!r&&this.hasPopupData&&this._createPopup(),this.container.append(l),this._editOnDoubleClick(),this.container}updateEdited(e){super.updateEdited(e);const{thickness:t,points:n,rect:i}=e,r=gg(VT,this);if(t>=0&&r.setAttribute("stroke-width",t||1),n)for(let s=0,o=gg(qT,this).length;s<o;s++)gg(qT,this)[s].setAttribute("points",n[s].join(","));if(i){const{transform:e,width:t,height:n}=pg(GT,this,YT).call(this,this.data.rotation,i);r.parentElement.setAttribute("viewBox","0 0 ".concat(t," ").concat(n)),r.setAttribute("transform",e)}}getElementsToTriggerPopup(){return gg(qT,this)}addHighlightArea(){this.container.classList.add("highlightArea")}}function YT(e,t){switch(e){case 90:return{transform:"rotate(90) translate(".concat(-t[0],",").concat(t[1],") scale(1,-1)"),width:t[3]-t[1],height:t[2]-t[0]};case 180:return{transform:"rotate(180) translate(".concat(-t[2],",").concat(t[1],") scale(1,-1)"),width:t[2]-t[0],height:t[3]-t[1]};case 270:return{transform:"rotate(270) translate(".concat(-t[2],",").concat(t[3],") scale(1,-1)"),width:t[3]-t[1],height:t[2]-t[0]};default:return{transform:"translate(".concat(-t[0],",").concat(t[3],") scale(1,-1)"),width:t[2]-t[0],height:t[3]-t[1]}}}class XT extends AA{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0}),this.annotationEditorType=Xg.HIGHLIGHT}render(){const{data:{overlaidText:e,popupRef:t}}=this;if(!t&&this.hasPopupData&&this._createPopup(),this.container.classList.add("highlightAnnotation"),this._editOnDoubleClick(),e){const t=document.createElement("mark");t.classList.add("overlaidText"),t.textContent=e,this.container.append(t)}return this.container}}class QT extends AA{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){const{data:{overlaidText:e,popupRef:t}}=this;if(!t&&this.hasPopupData&&this._createPopup(),this.container.classList.add("underlineAnnotation"),e){const t=document.createElement("u");t.classList.add("overlaidText"),t.textContent=e,this.container.append(t)}return this.container}}class $T extends AA{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){const{data:{overlaidText:e,popupRef:t}}=this;if(!t&&this.hasPopupData&&this._createPopup(),this.container.classList.add("squigglyAnnotation"),e){const t=document.createElement("u");t.classList.add("overlaidText"),t.textContent=e,this.container.append(t)}return this.container}}class JT extends AA{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){const{data:{overlaidText:e,popupRef:t}}=this;if(!t&&this.hasPopupData&&this._createPopup(),this.container.classList.add("strikeoutAnnotation"),e){const t=document.createElement("s");t.classList.add("overlaidText"),t.textContent=e,this.container.append(t)}return this.container}}class ZT extends AA{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0}),this.annotationEditorType=Xg.STAMP}render(){return this.container.classList.add("stampAnnotation"),this.container.setAttribute("role","img"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this._editOnDoubleClick(),this.container}}var eP=new WeakMap,tP=new WeakSet;class nP extends AA{constructor(e){var t;super(e,{isRenderable:!0}),hg(this,tP),dg(this,eP,null);const{file:n}=this.data;this.filename=n.filename,this.content=n.content,null===(t=this.linkService.eventBus)||void 0===t||t.dispatch("fileattachmentannotation",It({source:this},n))}render(){this.container.classList.add("fileAttachmentAnnotation");const{container:e,data:t}=this;let n;t.hasAppearance||0===t.fillAlpha?n=document.createElement("div"):(n=document.createElement("img"),n.src="".concat(this.imageResourcesPath,"annotation-").concat(/paperclip/i.test(t.name)?"paperclip":"pushpin",".svg"),t.fillAlpha&&t.fillAlpha<1&&(n.style="filter: opacity(".concat(Math.round(100*t.fillAlpha),"%);"))),n.addEventListener("dblclick",pg(tP,this,iP).bind(this)),mg(eP,this,n);const{isMac:i}=Om.platform;return e.addEventListener("keydown",e=>{"Enter"===e.key&&(i?e.metaKey:e.ctrlKey)&&pg(tP,this,iP).call(this)}),!t.popupRef&&this.hasPopupData?this._createPopup():n.classList.add("popupTriggerArea"),e.append(n),e}getElementsToTriggerPopup(){return gg(eP,this)}addHighlightArea(){this.container.classList.add("highlightArea")}}function iP(){var e;null===(e=this.downloadManager)||void 0===e||e.openOrDownloadData(this.content,this.filename)}var rP=new WeakMap,sP=new WeakMap,oP=new WeakMap,aP=new WeakMap,lP=new WeakMap,cP=new WeakMap,uP=new WeakSet;class hP{constructor(e){let{div:t,accessibilityManager:n,annotationCanvasMap:i,annotationEditorUIManager:r,page:s,viewport:o,structTreeLayer:a,commentManager:l,linkService:c,annotationStorage:u}=e;hg(this,uP),dg(this,rP,null),dg(this,sP,null),dg(this,oP,null),dg(this,aP,new Map),dg(this,lP,null),dg(this,cP,null),this.div=t,mg(rP,this,n),mg(sP,this,i),mg(lP,this,a||null),mg(cP,this,c||null),mg(oP,this,u||new kb),this.page=s,this.viewport=o,this.zIndex=0,this._annotationEditorUIManager=r,this._commentManager=l||null}hasEditableAnnotations(){return gg(aP,this).size>0}async render(e){const{annotations:t}=e,n=this.div;uv(n,this.viewport);const i=new Map,r={data:null,layer:n,linkService:gg(cP,this),downloadManager:e.downloadManager,imageResourcesPath:e.imageResourcesPath||"",renderForms:!1!==e.renderForms,svgFactory:new _A,annotationStorage:gg(oP,this),enableComment:!0===e.enableComment,enableScripting:!0===e.enableScripting,hasJSActions:e.hasJSActions,fieldObjects:e.fieldObjects,parent:this,elements:null};for(const a of t){var s;if(a.noHTML)continue;const e=a.annotationType===rm.POPUP;if(e){const e=i.get(a.id);if(!e)continue;r.elements=e}else if(a.rect[2]===a.rect[0]||a.rect[3]===a.rect[1])continue;r.data=a;const t=xA.create(r);if(!t.isRenderable)continue;if(!e&&a.popupRef){const e=i.get(a.popupRef);e?e.push(t):i.set(a.popupRef,[t])}const n=t.render();var o;if(a.hidden&&(n.style.visibility="hidden"),await pg(uP,this,dP).call(this,n,a.id,r.elements),null===(s=t.extraPopupElement)||void 0===s||null===(s=s.popup)||void 0===s||s.renderCommentButton(),t._isEditable)gg(aP,this).set(t.data.id,t),null===(o=this._annotationEditorUIManager)||void 0===o||o.renderAnnotationElement(t)}pg(uP,this,pP).call(this)}async addLinkAnnotations(e){const t={data:null,layer:this.div,linkService:gg(cP,this),svgFactory:new _A,parent:this};for(const n of e){n.borderStyle||(n.borderStyle=hP._defaultBorderStyle),t.data=n;const e=xA.create(t);if(!e.isRenderable)continue;const i=e.render();await pg(uP,this,dP).call(this,i,n.id,null)}}update(e){let{viewport:t}=e;const n=this.div;this.viewport=t,uv(n,{rotation:t.rotation}),pg(uP,this,pP).call(this),n.hidden=!1}getEditableAnnotations(){return Array.from(gg(aP,this).values())}getEditableAnnotation(e){return gg(aP,this).get(e)}addFakeAnnotation(e){var t;const{div:n}=this,{id:i,rotation:r}=e,s=new PA({data:{id:i,rect:e.getPDFRect(),rotation:r},editor:e,layer:n,parent:this,enableComment:!!this._commentManager,linkService:gg(cP,this),annotationStorage:gg(oP,this)}),o=s.render();return n.append(o),null===(t=gg(rP,this))||void 0===t||t.moveElementInDOM(n,o,o,!1),s.createOrUpdatePopup(),s}static get _defaultBorderStyle(){return Cm(this,"_defaultBorderStyle",Object.freeze({width:1,rawWidth:1,style:sm,dashArray:[3],horizontalCornerRadius:0,verticalCornerRadius:0}))}}async function dP(e,t,n){var i;const r=e.firstChild||e,s=r.id="".concat(Hm).concat(t),o=await(null===(i=gg(lP,this))||void 0===i?void 0:i.getAriaAttributes(s));if(o)for(const[l,c]of o)r.setAttribute(l,c);var a;n?n.at(-1).container.after(e):(this.div.append(e),null===(a=gg(rP,this))||void 0===a||a.moveElementInDOM(this.div,e,r,!1))}function pP(){if(!gg(sP,this))return;const e=this.div;for(const[n,i]of gg(sP,this)){const r=e.querySelector('[data-annotation-id="'.concat(n,'"]'));if(!r)continue;i.className="annotationContent";const{firstChild:s}=r;s?"CANVAS"===s.nodeName?s.replaceWith(i):s.classList.contains("annotationContent")?s.after(i):s.before(i):r.append(i);const o=gg(aP,this).get(n);var t;if(o)if(o._hasNoCanvas)null===(t=this._annotationEditorUIManager)||void 0===t||t.setMissingCanvas(n,r.id,i),o._hasNoCanvas=!1;else o.canvas=i}gg(sP,this).clear()}const fP=/\r\n?|\n/g;var gP=new WeakMap,mP=new WeakMap,vP=new WeakMap,yP=new WeakMap,_P=new WeakSet;class wP extends Gw{static get _keyboardManager(){const e=wP.prototype,t=e=>e.isEmpty(),n=r_.TRANSLATE_SMALL,i=r_.TRANSLATE_BIG;return Cm(this,"_keyboardManager",new sy([[["ctrl+s","mac+meta+s","ctrl+p","mac+meta+p"],e.commitOrRemove,{bubbles:!0}],[["ctrl+Enter","mac+meta+Enter","Escape","mac+Escape"],e.commitOrRemove],[["ArrowLeft","mac+ArrowLeft"],e._translateEmpty,{args:[-n,0],checker:t}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],e._translateEmpty,{args:[-i,0],checker:t}],[["ArrowRight","mac+ArrowRight"],e._translateEmpty,{args:[n,0],checker:t}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],e._translateEmpty,{args:[i,0],checker:t}],[["ArrowUp","mac+ArrowUp"],e._translateEmpty,{args:[0,-n],checker:t}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],e._translateEmpty,{args:[0,-i],checker:t}],[["ArrowDown","mac+ArrowDown"],e._translateEmpty,{args:[0,n],checker:t}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],e._translateEmpty,{args:[0,i],checker:t}]]))}constructor(e){super(It(It({},e),{},{name:"freeTextEditor"})),hg(this,_P),dg(this,gP,""),dg(this,mP,"".concat(this.id,"-editor")),dg(this,vP,null),dg(this,yP,void 0),Tt(this,"_colorPicker",null),this.color=e.color||wP._defaultColor||Gw._defaultLineColor,mg(yP,this,e.fontSize||wP._defaultFontSize),this.annotationElementId||this._uiManager.a11yAlert("pdfjs-editor-freetext-added-alert")}static initialize(e,t){Gw.initialize(e,t);const n=getComputedStyle(document.documentElement);this._internalPadding=parseFloat(n.getPropertyValue("--freetext-padding"))}static updateDefaultParams(e,t){switch(e){case Qg.FREETEXT_SIZE:wP._defaultFontSize=t;break;case Qg.FREETEXT_COLOR:wP._defaultColor=t}}updateParams(e,t){switch(e){case Qg.FREETEXT_SIZE:pg(_P,this,bP).call(this,t);break;case Qg.FREETEXT_COLOR:pg(_P,this,xP).call(this,t)}}static get defaultPropertiesToUpdate(){return[[Qg.FREETEXT_SIZE,wP._defaultFontSize],[Qg.FREETEXT_COLOR,wP._defaultColor||Gw._defaultLineColor]]}get propertiesToUpdate(){return[[Qg.FREETEXT_SIZE,gg(yP,this)],[Qg.FREETEXT_COLOR,this.color]]}get toolbarButtons(){return this._colorPicker||(this._colorPicker=new pA(this)),[["colorPicker",this._colorPicker]]}get colorType(){return Qg.FREETEXT_COLOR}onUpdatedColor(){var e;this.editorDiv.style.color=this.color,null===(e=this._colorPicker)||void 0===e||e.update(this.color),super.onUpdatedColor()}_translateEmpty(e,t){this._uiManager.translateSelectedEditors(e,t,!0)}getInitialTranslation(){const e=this.parentScale;return[-wP._internalPadding*e,-(wP._internalPadding+gg(yP,this))*e]}rebuild(){this.parent&&(super.rebuild(),null!==this.div&&(this.isAttachedToDOM||this.parent.add(this)))}enableEditMode(){if(!super.enableEditMode())return!1;this.overlayDiv.classList.remove("enabled"),this.editorDiv.contentEditable=!0,this._isDraggable=!1,this.div.removeAttribute("aria-activedescendant"),mg(vP,this,new AbortController);const e=this._uiManager.combinedSignal(gg(vP,this));return this.editorDiv.addEventListener("keydown",this.editorDivKeydown.bind(this),{signal:e}),this.editorDiv.addEventListener("focus",this.editorDivFocus.bind(this),{signal:e}),this.editorDiv.addEventListener("blur",this.editorDivBlur.bind(this),{signal:e}),this.editorDiv.addEventListener("input",this.editorDivInput.bind(this),{signal:e}),this.editorDiv.addEventListener("paste",this.editorDivPaste.bind(this),{signal:e}),!0}disableEditMode(){var e;return!!super.disableEditMode()&&(this.overlayDiv.classList.add("enabled"),this.editorDiv.contentEditable=!1,this.div.setAttribute("aria-activedescendant",gg(mP,this)),this._isDraggable=!0,null===(e=gg(vP,this))||void 0===e||e.abort(),mg(vP,this,null),this.div.focus({preventScroll:!0}),this.isEditing=!1,this.parent.div.classList.add("freetextEditing"),!0)}focusin(e){this._focusEventsAllowed&&(super.focusin(e),e.target!==this.editorDiv&&this.editorDiv.focus())}onceAdded(e){var t;this.width||(this.enableEditMode(),e&&this.editorDiv.focus(),null!==(t=this._initialOptions)&&void 0!==t&&t.isCentered&&this.center(),this._initialOptions=null)}isEmpty(){return!this.editorDiv||""===this.editorDiv.innerText.trim()}remove(){this.isEditing=!1,this.parent&&(this.parent.setEditingState(!0),this.parent.div.classList.add("freetextEditing")),super.remove()}commit(){if(!this.isInEditMode())return;super.commit(),this.disableEditMode();const e=gg(gP,this),t=mg(gP,this,pg(_P,this,kP).call(this).trimEnd());if(e===t)return;const n=e=>{mg(gP,this,e),e?(pg(_P,this,SP).call(this),this._uiManager.rebuild(this),pg(_P,this,EP).call(this)):this.remove()};this.addCommands({cmd:()=>{n(t)},undo:()=>{n(e)},mustExec:!1}),pg(_P,this,EP).call(this)}shouldGetKeyboardEvents(){return this.isInEditMode()}enterInEditMode(){this.enableEditMode(),this.editorDiv.focus()}keydown(e){e.target===this.div&&"Enter"===e.key&&(this.enterInEditMode(),e.preventDefault())}editorDivKeydown(e){wP._keyboardManager.exec(this,e)}editorDivFocus(e){this.isEditing=!0}editorDivBlur(e){this.isEditing=!1}editorDivInput(e){this.parent.div.classList.toggle("freetextEditing",this.isEmpty())}disableEditing(){this.editorDiv.setAttribute("role","comment"),this.editorDiv.removeAttribute("aria-multiline")}enableEditing(){this.editorDiv.setAttribute("role","textbox"),this.editorDiv.setAttribute("aria-multiline",!0)}get canChangeContent(){return!0}render(){if(this.div)return this.div;let e,t;(this._isCopy||this.annotationElementId)&&(e=this.x,t=this.y),super.render(),this.editorDiv=document.createElement("div"),this.editorDiv.className="internal",this.editorDiv.setAttribute("id",gg(mP,this)),this.editorDiv.setAttribute("data-l10n-id","pdfjs-free-text2"),this.editorDiv.setAttribute("data-l10n-attrs","default-content"),this.enableEditing(),this.editorDiv.contentEditable=!0;const{style:n}=this.editorDiv;if(n.fontSize="calc(".concat(gg(yP,this),"px * var(--total-scale-factor))"),n.color=this.color,this.div.append(this.editorDiv),this.overlayDiv=document.createElement("div"),this.overlayDiv.classList.add("overlay","enabled"),this.div.append(this.overlayDiv),this._isCopy||this.annotationElementId){const[n,i]=this.parentDimensions;if(this.annotationElementId){const{position:r}=this._initialData;let[s,o]=this.getInitialTranslation();[s,o]=this.pageTranslationToScreen(s,o);const[a,l]=this.pageDimensions,[c,u]=this.pageTranslation;let h,d;switch(this.rotation){case 0:h=e+(r[0]-c)/a,d=t+this.height-(r[1]-u)/l;break;case 90:h=e+(r[0]-c)/a,d=t-(r[1]-u)/l,[s,o]=[o,-s];break;case 180:h=e-this.width+(r[0]-c)/a,d=t-(r[1]-u)/l,[s,o]=[-s,-o];break;case 270:h=e+(r[0]-c-this.height*l)/a,d=t+(r[1]-u-this.width*a)/l,[s,o]=[-o,s]}this.setAt(h*n,d*i,s,o)}else this._moveAfterPaste(e,t);pg(_P,this,SP).call(this),this._isDraggable=!0,this.editorDiv.contentEditable=!1}else this._isDraggable=!1,this.editorDiv.contentEditable=!0;return this.div}editorDivPaste(e){const t=e.clipboardData||window.clipboardData,{types:n}=t;if(1===n.length&&"text/plain"===n[0])return;e.preventDefault();const i=TP.call(wP,t.getData("text")||"").replaceAll(fP,"\n");if(!i)return;const r=window.getSelection();if(!r.rangeCount)return;this.editorDiv.normalize(),r.deleteFromDocument();const s=r.getRangeAt(0);if(!i.includes("\n"))return s.insertNode(document.createTextNode(i)),this.editorDiv.normalize(),void r.collapseToStart();const{startContainer:o,startOffset:a}=s,l=[],c=[];if(o.nodeType===Node.TEXT_NODE){const e=o.parentElement;if(c.push(o.nodeValue.slice(a).replaceAll(fP,"")),e!==this.editorDiv){let t=l;for(const n of this.editorDiv.childNodes)n!==e?t.push(CP.call(wP,n)):t=c}l.push(o.nodeValue.slice(0,a).replaceAll(fP,""))}else if(o===this.editorDiv){let e=l,t=0;for(const n of this.editorDiv.childNodes)t++===a&&(e=c),e.push(CP.call(wP,n))}mg(gP,this,"".concat(l.join("\n")).concat(i).concat(c.join("\n"))),pg(_P,this,SP).call(this);const u=new Range;let h=Math.sumPrecise(l.map(e=>e.length));for(const{firstChild:d}of this.editorDiv.childNodes)if(d.nodeType===Node.TEXT_NODE){const e=d.nodeValue.length;if(h<=e){u.setStart(d,h),u.setEnd(d,h);break}h-=e}r.removeAllRanges(),r.addRange(u)}get contentDiv(){return this.editorDiv}getPDFRect(){const e=wP._internalPadding*this.parentScale;return this.getRect(e,e)}static async deserialize(e,t,n){let i=null;if(e instanceof NT){const{data:{defaultAppearanceData:{fontSize:t,fontColor:n},rect:r,rotation:s,id:o,popupRef:a,richText:l,contentsObj:c,creationDate:u,modificationDate:h},textContent:d,textPosition:p,parent:{page:{pageNumber:f}}}=e;if(!d||0===d.length)return null;i=e={annotationType:Xg.FREETEXT,color:Array.from(n),fontSize:t,value:d.join("\n"),position:p,pageIndex:f-1,rect:r.slice(0),rotation:s,annotationElementId:o,id:o,deleted:!1,popupRef:a,comment:(null===c||void 0===c?void 0:c.str)||null,richText:l,creationDate:u,modificationDate:h}}const r=await super.deserialize(e,t,n);return mg(yP,r,e.fontSize),r.color=Fm.makeHexColor(...e.color),mg(gP,r,TP.call(wP,e.value)),r._initialData=i,e.comment&&r.setCommentData(e),r}serialize(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const t=Gw._colorManager.convert(this.isAttachedToDOM?getComputedStyle(this.editorDiv).color:this.color),n=Object.assign(super.serialize(e),{color:t,fontSize:gg(yP,this),value:pg(_P,this,AP).call(this)});return this.addComment(n),e?(n.isCopy=!0,n):this.annotationElementId&&!pg(_P,this,PP).call(this,n)?null:(n.id=this.annotationElementId,n)}renderAnnotationElement(e){const t=super.renderAnnotationElement(e);if(!t)return null;const{style:n}=t;n.fontSize="calc(".concat(gg(yP,this),"px * var(--total-scale-factor))"),n.color=this.color,t.replaceChildren();for(const i of gg(gP,this).split("\n")){const e=document.createElement("div");e.append(i?document.createTextNode(i):document.createElement("br")),t.append(e)}return e.updateEdited({rect:this.getPDFRect(),popup:this._uiManager.hasCommentManager()||this.hasEditedComment?this.comment:{text:gg(gP,this)}}),t}resetAnnotationElement(e){super.resetAnnotationElement(e),e.resetEdited()}}function bP(e){const t=e=>{this.editorDiv.style.fontSize="calc(".concat(e,"px * var(--total-scale-factor))"),this.translate(0,-(e-gg(yP,this))*this.parentScale),mg(yP,this,e),pg(_P,this,EP).call(this)},n=gg(yP,this);this.addCommands({cmd:t.bind(this,e),undo:t.bind(this,n),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:Qg.FREETEXT_SIZE,overwriteIfSameType:!0,keepUndo:!0})}function xP(e){const t=e=>{this.color=e,this.onUpdatedColor()},n=this.color;this.addCommands({cmd:t.bind(this,e),undo:t.bind(this,n),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:Qg.FREETEXT_COLOR,overwriteIfSameType:!0,keepUndo:!0})}function kP(){const e=[];this.editorDiv.normalize();let t=null;for(const i of this.editorDiv.childNodes){var n;(null===(n=t)||void 0===n?void 0:n.nodeType)===Node.TEXT_NODE&&"BR"===i.nodeName||(e.push(CP.call(Rg,i)),t=i)}return e.join("\n")}function EP(){const[e,t]=this.parentDimensions;let n;if(this.isAttachedToDOM)n=this.div.getBoundingClientRect();else{const{currentLayer:e,div:t}=this,i=t.style.display,r=t.classList.contains("hidden");t.classList.remove("hidden"),t.style.display="hidden",e.div.append(this.div),n=t.getBoundingClientRect(),t.remove(),t.style.display=i,t.classList.toggle("hidden",r)}this.rotation%180===this.parentRotation%180?(this.width=n.width/e,this.height=n.height/t):(this.width=n.height/e,this.height=n.width/t),this.fixAndSetPosition()}function CP(e){return(e.nodeType===Node.TEXT_NODE?e.nodeValue:e.innerText).replaceAll(fP,"")}function SP(){if(this.editorDiv.replaceChildren(),gg(gP,this))for(const e of gg(gP,this).split("\n")){const t=document.createElement("div");t.append(e?document.createTextNode(e):document.createElement("br")),this.editorDiv.append(t)}}function AP(){return gg(gP,this).replaceAll("\xa0"," ")}function TP(e){return e.replaceAll(" ","\xa0")}function PP(e){const{value:t,fontSize:n,color:i,pageIndex:r}=this._initialData;return this.hasEditedComment||this._hasBeenMoved||e.value!==t||e.fontSize!==n||e.color.some((e,t)=>e!==i[t])||e.pageIndex!==r}Rg=wP,Tt(wP,"_freeTextDefaultContent",""),Tt(wP,"_internalPadding",0),Tt(wP,"_defaultColor",null),Tt(wP,"_defaultFontSize",10),Tt(wP,"_type","freetext"),Tt(wP,"_editorType",Xg.FREETEXT);class IP{toSVGPath(){bm("Abstract method `toSVGPath` must be implemented.")}get box(){bm("Abstract getter `box` must be implemented.")}serialize(e,t){bm("Abstract method `serialize` must be implemented.")}static _rescale(e,t,n,i,r,s){s||(s=new Float32Array(e.length));for(let o=0,a=e.length;o<a;o+=2)s[o]=t+e[o]*i,s[o+1]=n+e[o+1]*r;return s}static _rescaleAndSwap(e,t,n,i,r,s){s||(s=new Float32Array(e.length));for(let o=0,a=e.length;o<a;o+=2)s[o]=t+e[o+1]*i,s[o+1]=n+e[o]*r;return s}static _translate(e,t,n,i){i||(i=new Float32Array(e.length));for(let r=0,s=e.length;r<s;r+=2)i[r]=t+e[r],i[r+1]=n+e[r+1];return i}static svgRound(e){return Math.round(1e4*e)}static _normalizePoint(e,t,n,i,r){switch(r){case 90:return[1-t/n,e/i];case 180:return[1-e/n,1-t/i];case 270:return[t/n,1-e/i];default:return[e/n,t/i]}}static _normalizePagePoint(e,t,n){switch(n){case 90:return[1-t,e];case 180:return[1-e,1-t];case 270:return[t,1-e];default:return[e,t]}}static createBezierPoints(e,t,n,i,r,s){return[(e+5*n)/6,(t+5*i)/6,(5*n+r)/6,(5*i+s)/6,(n+r)/2,(i+s)/2]}}Tt(IP,"PRECISION",1e-4);var RP=new WeakMap,MP=new WeakMap,NP=new WeakMap,DP=new WeakMap,OP=new WeakMap,LP=new WeakMap,FP=new WeakMap,jP=new WeakMap,BP=new WeakMap,WP=new WeakMap,UP=new WeakMap,zP=new WeakMap,HP=new WeakMap,VP=new WeakSet;class qP{constructor(e,t,n,i,r){let{x:s,y:o}=e,a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0;hg(this,VP),dg(this,RP,void 0),dg(this,MP,[]),dg(this,NP,void 0),dg(this,DP,void 0),dg(this,OP,[]),dg(this,LP,new Float32Array(18)),dg(this,FP,void 0),dg(this,jP,void 0),dg(this,BP,void 0),dg(this,WP,void 0),dg(this,UP,void 0),dg(this,zP,void 0),dg(this,HP,[]),mg(RP,this,t),mg(zP,this,i*n),mg(DP,this,r),gg(LP,this).set([NaN,NaN,NaN,NaN,s,o],6),mg(NP,this,a),mg(WP,this,ZP._*n),mg(BP,this,eI._*n),mg(UP,this,n),gg(HP,this).push(s,o)}isEmpty(){return isNaN(gg(LP,this)[8])}add(e){var t;let{x:n,y:i}=e;mg(FP,this,n),mg(jP,this,i);const[r,s,o,a]=gg(RP,this);let[l,c,u,h]=gg(LP,this).subarray(8,12);const d=n-u,p=i-h,f=Math.hypot(d,p);if(f<gg(BP,this))return!1;const g=f-gg(WP,this),m=g/f,v=m*d,y=m*p;let _=l,w=c;l=u,c=h,u+=v,h+=y,null===(t=gg(HP,this))||void 0===t||t.push(n,i);const b=v/g,x=-y/g*gg(zP,this),k=b*gg(zP,this);if(gg(LP,this).set(gg(LP,this).subarray(2,8),0),gg(LP,this).set([u+x,h+k],4),gg(LP,this).set(gg(LP,this).subarray(14,18),12),gg(LP,this).set([u-x,h-k],16),isNaN(gg(LP,this)[6]))return 0===gg(OP,this).length&&(gg(LP,this).set([l+x,c+k],2),gg(OP,this).push(NaN,NaN,NaN,NaN,(l+x-r)/o,(c+k-s)/a),gg(LP,this).set([l-x,c-k],14),gg(MP,this).push(NaN,NaN,NaN,NaN,(l-x-r)/o,(c-k-s)/a)),gg(LP,this).set([_,w,l,c,u,h],6),!this.isEmpty();gg(LP,this).set([_,w,l,c,u,h],6);return Math.abs(Math.atan2(w-c,_-l)-Math.atan2(y,v))<Math.PI/2?([l,c,u,h]=gg(LP,this).subarray(2,6),gg(OP,this).push(NaN,NaN,NaN,NaN,((l+u)/2-r)/o,((c+h)/2-s)/a),[l,c,_,w]=gg(LP,this).subarray(14,18),gg(MP,this).push(NaN,NaN,NaN,NaN,((_+l)/2-r)/o,((w+c)/2-s)/a),!0):([_,w,l,c,u,h]=gg(LP,this).subarray(0,6),gg(OP,this).push(((_+5*l)/6-r)/o,((w+5*c)/6-s)/a,((5*l+u)/6-r)/o,((5*c+h)/6-s)/a,((l+u)/2-r)/o,((c+h)/2-s)/a),[u,h,l,c,_,w]=gg(LP,this).subarray(12,18),gg(MP,this).push(((_+5*l)/6-r)/o,((w+5*c)/6-s)/a,((5*l+u)/6-r)/o,((5*c+h)/6-s)/a,((l+u)/2-r)/o,((c+h)/2-s)/a),!0)}toSVGPath(){if(this.isEmpty())return"";const e=gg(OP,this),t=gg(MP,this);if(isNaN(gg(LP,this)[6])&&!this.isEmpty())return pg(VP,this,KP).call(this);const n=[];n.push("M".concat(e[4]," ").concat(e[5]));for(let i=6;i<e.length;i+=6)isNaN(e[i])?n.push("L".concat(e[i+4]," ").concat(e[i+5])):n.push("C".concat(e[i]," ").concat(e[i+1]," ").concat(e[i+2]," ").concat(e[i+3]," ").concat(e[i+4]," ").concat(e[i+5]));pg(VP,this,XP).call(this,n);for(let i=t.length-6;i>=6;i-=6)isNaN(t[i])?n.push("L".concat(t[i+4]," ").concat(t[i+5])):n.push("C".concat(t[i]," ").concat(t[i+1]," ").concat(t[i+2]," ").concat(t[i+3]," ").concat(t[i+4]," ").concat(t[i+5]));return pg(VP,this,YP).call(this,n),n.join(" ")}newFreeDrawOutline(e,t,n,i,r,s){return new cI(e,t,n,i,r,s)}getOutlines(){var e,t;const n=gg(OP,this),i=gg(MP,this),r=gg(LP,this),[s,o,a,l]=gg(RP,this),c=new Float32Array((null!==(e=null===(t=gg(HP,this))||void 0===t?void 0:t.length)&&void 0!==e?e:0)+2);for(let d=0,p=c.length-2;d<p;d+=2)c[d]=(gg(HP,this)[d]-s)/a,c[d+1]=(gg(HP,this)[d+1]-o)/l;if(c[c.length-2]=(gg(FP,this)-s)/a,c[c.length-1]=(gg(jP,this)-o)/l,isNaN(r[6])&&!this.isEmpty())return pg(VP,this,QP).call(this,c);const u=new Float32Array(gg(OP,this).length+24+gg(MP,this).length);let h=n.length;for(let d=0;d<h;d+=2)isNaN(n[d])?u[d]=u[d+1]=NaN:(u[d]=n[d],u[d+1]=n[d+1]);h=pg(VP,this,JP).call(this,u,h);for(let d=i.length-6;d>=6;d-=6)for(let e=0;e<6;e+=2)isNaN(i[d+e])?(u[h]=u[h+1]=NaN,h+=2):(u[h]=i[d+e],u[h+1]=i[d+e+1],h+=2);return pg(VP,this,$P).call(this,u,h),this.newFreeDrawOutline(u,c,gg(RP,this),gg(UP,this),gg(NP,this),gg(DP,this))}}function GP(){const e=gg(LP,this).subarray(4,6),t=gg(LP,this).subarray(16,18),[n,i,r,s]=gg(RP,this);return[(gg(FP,this)+(e[0]-t[0])/2-n)/r,(gg(jP,this)+(e[1]-t[1])/2-i)/s,(gg(FP,this)+(t[0]-e[0])/2-n)/r,(gg(jP,this)+(t[1]-e[1])/2-i)/s]}function KP(){const[e,t,n,i]=gg(RP,this),[r,s,o,a]=pg(VP,this,GP).call(this);return"M".concat((gg(LP,this)[2]-e)/n," ").concat((gg(LP,this)[3]-t)/i," L").concat((gg(LP,this)[4]-e)/n," ").concat((gg(LP,this)[5]-t)/i," L").concat(r," ").concat(s," L").concat(o," ").concat(a," L").concat((gg(LP,this)[16]-e)/n," ").concat((gg(LP,this)[17]-t)/i," L").concat((gg(LP,this)[14]-e)/n," ").concat((gg(LP,this)[15]-t)/i," Z")}function YP(e){const t=gg(MP,this);e.push("L".concat(t[4]," ").concat(t[5]," Z"))}function XP(e){const[t,n,i,r]=gg(RP,this),s=gg(LP,this).subarray(4,6),o=gg(LP,this).subarray(16,18),[a,l,c,u]=pg(VP,this,GP).call(this);e.push("L".concat((s[0]-t)/i," ").concat((s[1]-n)/r," L").concat(a," ").concat(l," L").concat(c," ").concat(u," L").concat((o[0]-t)/i," ").concat((o[1]-n)/r))}function QP(e){const t=gg(LP,this),[n,i,r,s]=gg(RP,this),[o,a,l,c]=pg(VP,this,GP).call(this),u=new Float32Array(36);return u.set([NaN,NaN,NaN,NaN,(t[2]-n)/r,(t[3]-i)/s,NaN,NaN,NaN,NaN,(t[4]-n)/r,(t[5]-i)/s,NaN,NaN,NaN,NaN,o,a,NaN,NaN,NaN,NaN,l,c,NaN,NaN,NaN,NaN,(t[16]-n)/r,(t[17]-i)/s,NaN,NaN,NaN,NaN,(t[14]-n)/r,(t[15]-i)/s],0),this.newFreeDrawOutline(u,e,gg(RP,this),gg(UP,this),gg(NP,this),gg(DP,this))}function $P(e,t){const n=gg(MP,this);return e.set([NaN,NaN,NaN,NaN,n[4],n[5]],t),t+6}function JP(e,t){const n=gg(LP,this).subarray(4,6),i=gg(LP,this).subarray(16,18),[r,s,o,a]=gg(RP,this),[l,c,u,h]=pg(VP,this,GP).call(this);return e.set([NaN,NaN,NaN,NaN,(n[0]-r)/o,(n[1]-s)/a,NaN,NaN,NaN,NaN,l,c,NaN,NaN,NaN,NaN,u,h,NaN,NaN,NaN,NaN,(i[0]-r)/o,(i[1]-s)/a],t),t+24}var ZP={_:8},eI={_:ZP._+2},tI=new WeakMap,nI=new WeakMap,iI=new WeakMap,rI=new WeakMap,sI=new WeakMap,oI=new WeakMap,aI=new WeakMap,lI=new WeakSet;class cI extends IP{constructor(e,t,n,i,r,s){super(),hg(this,lI),dg(this,tI,void 0),dg(this,nI,new Float32Array(4)),dg(this,iI,void 0),dg(this,rI,void 0),dg(this,sI,void 0),dg(this,oI,void 0),dg(this,aI,void 0),mg(aI,this,e),mg(sI,this,t),mg(tI,this,n),mg(oI,this,i),mg(iI,this,r),mg(rI,this,s),this.firstPoint=[NaN,NaN],this.lastPoint=[NaN,NaN],pg(lI,this,uI).call(this,s);const[o,a,l,c]=gg(nI,this);for(let u=0,h=e.length;u<h;u+=2)e[u]=(e[u]-o)/l,e[u+1]=(e[u+1]-a)/c;for(let u=0,h=t.length;u<h;u+=2)t[u]=(t[u]-o)/l,t[u+1]=(t[u+1]-a)/c}toSVGPath(){const e=["M".concat(gg(aI,this)[4]," ").concat(gg(aI,this)[5])];for(let t=6,n=gg(aI,this).length;t<n;t+=6)isNaN(gg(aI,this)[t])?e.push("L".concat(gg(aI,this)[t+4]," ").concat(gg(aI,this)[t+5])):e.push("C".concat(gg(aI,this)[t]," ").concat(gg(aI,this)[t+1]," ").concat(gg(aI,this)[t+2]," ").concat(gg(aI,this)[t+3]," ").concat(gg(aI,this)[t+4]," ").concat(gg(aI,this)[t+5]));return e.push("Z"),e.join(" ")}serialize(e,t){let[n,i,r,s]=e;const o=r-n,a=s-i;let l,c;switch(t){case 0:l=IP._rescale(gg(aI,this),n,s,o,-a),c=IP._rescale(gg(sI,this),n,s,o,-a);break;case 90:l=IP._rescaleAndSwap(gg(aI,this),n,i,o,a),c=IP._rescaleAndSwap(gg(sI,this),n,i,o,a);break;case 180:l=IP._rescale(gg(aI,this),r,i,-o,a),c=IP._rescale(gg(sI,this),r,i,-o,a);break;case 270:l=IP._rescaleAndSwap(gg(aI,this),r,s,-o,-a),c=IP._rescaleAndSwap(gg(sI,this),r,s,-o,-a)}return{outline:Array.from(l),points:[Array.from(c)]}}get box(){return gg(nI,this)}newOutliner(e,t,n,i,r){return new qP(e,t,n,i,r,arguments.length>5&&void 0!==arguments[5]?arguments[5]:0)}getNewOutline(e,t){const[n,i,r,s]=gg(nI,this),[o,a,l,c]=gg(tI,this),u=r*l,h=s*c,d=n*l+o,p=i*c+a,f=this.newOutliner({x:gg(sI,this)[0]*u+d,y:gg(sI,this)[1]*h+p},gg(tI,this),gg(oI,this),e,gg(rI,this),null!==t&&void 0!==t?t:gg(iI,this));for(let g=2;g<gg(sI,this).length;g+=2)f.add({x:gg(sI,this)[g]*u+d,y:gg(sI,this)[g+1]*h+p});return f.getOutlines()}}function uI(e){const t=gg(aI,this);let n=t[4],i=t[5];const r=[n,i,n,i];let s=n,o=i,a=n,l=i;const c=e?Math.max:Math.min,u=new Float32Array(4);for(let d=6,p=t.length;d<p;d+=6){const e=t[d+4],h=t[d+5];isNaN(t[d])?(Fm.pointBoundingBox(e,h,r),o>h?(s=e,o=h):o===h&&(s=c(s,e)),l<h?(a=e,l=h):l===h&&(a=c(a,e))):(u[0]=u[1]=1/0,u[2]=u[3]=-1/0,Fm.bezierBoundingBox(n,i,...t.slice(d,d+6),u),Fm.rectBoundingBox(u[0],u[1],u[2],u[3],r),o>u[1]?(s=u[0],o=u[1]):o===u[1]&&(s=c(s,u[0])),l<u[3]?(a=u[2],l=u[3]):l===u[3]&&(a=c(a,u[2]))),n=e,i=h}const h=gg(nI,this);h[0]=r[0]-gg(iI,this),h[1]=r[1]-gg(iI,this),h[2]=r[2]-r[0]+2*gg(iI,this),h[3]=r[3]-r[1]+2*gg(iI,this),this.firstPoint=[s,o],this.lastPoint=[a,l]}var hI=new WeakMap,dI=new WeakMap,pI=new WeakMap,fI=new WeakMap,gI=new WeakMap,mI=new WeakSet;class vI{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];hg(this,mI),dg(this,hI,void 0),dg(this,dI,void 0),dg(this,pI,void 0),dg(this,fI,[]),dg(this,gI,[]);const r=[1/0,1/0,-1/0,-1/0],s=10**-4;for(const{x:f,y:g,width:m,height:v}of e){const e=Math.floor((f-t)/s)*s,n=Math.ceil((f+m+t)/s)*s,i=Math.floor((g-t)/s)*s,o=Math.ceil((g+v+t)/s)*s,a=[e,i,o,!0],l=[n,i,o,!1];gg(fI,this).push(a,l),Fm.rectBoundingBox(e,i,n,o,r)}const o=r[2]-r[0]+2*n,a=r[3]-r[1]+2*n,l=r[0]-n,c=r[1]-n;let u=i?-1/0:1/0,h=1/0;const d=gg(fI,this).at(i?-1:-2),p=[d[0],d[2]];for(const f of gg(fI,this)){const[e,t,n,r]=f;!r&&i?t<h?(h=t,u=e):t===h&&(u=Math.max(u,e)):r&&!i&&(t<h?(h=t,u=e):t===h&&(u=Math.min(u,e))),f[0]=(e-l)/o,f[1]=(t-c)/a,f[2]=(n-c)/a}mg(hI,this,new Float32Array([l,c,o,a])),mg(dI,this,[u,h]),mg(pI,this,p)}getOutlines(){gg(fI,this).sort((e,t)=>e[0]-t[0]||e[1]-t[1]||e[2]-t[2]);const e=[];for(const t of gg(fI,this))t[3]?(e.push(...pg(mI,this,xI).call(this,t)),pg(mI,this,wI).call(this,t)):(pg(mI,this,bI).call(this,t),e.push(...pg(mI,this,xI).call(this,t)));return pg(mI,this,yI).call(this,e)}}function yI(e){const t=[],n=new Set;for(const s of e){const[e,n,i]=s;t.push([e,n,s],[e,i,s])}t.sort((e,t)=>e[1]-t[1]||e[0]-t[0]);for(let s=0,o=t.length;s<o;s+=2){const e=t[s][2],i=t[s+1][2];e.push(i),i.push(e),n.add(e),n.add(i)}const i=[];let r;for(;n.size>0;){const e=n.values().next().value;let[t,s,o,a,l]=e;n.delete(e);let c=t,u=s;for(r=[t,o],i.push(r);;){let e;if(n.has(a))e=a;else{if(!n.has(l))break;e=l}n.delete(e),[t,s,o,a,l]=e,c!==t&&(r.push(c,u,t,u===s?s:o),c=t),u=u===s?o:s}r.push(c,u)}return new CI(i,gg(hI,this),gg(dI,this),gg(pI,this))}function _I(e){const t=gg(gI,this);let n=0,i=t.length-1;for(;n<=i;){const r=n+i>>1,s=t[r][0];if(s===e)return r;s<e?n=r+1:i=r-1}return i+1}function wI(e){let[,t,n]=e;const i=pg(mI,this,_I).call(this,t);gg(gI,this).splice(i,0,[t,n])}function bI(e){let[,t,n]=e;const i=pg(mI,this,_I).call(this,t);for(let r=i;r<gg(gI,this).length;r++){const[e,i]=gg(gI,this)[r];if(e!==t)break;if(e===t&&i===n)return void gg(gI,this).splice(r,1)}for(let r=i-1;r>=0;r--){const[e,i]=gg(gI,this)[r];if(e!==t)break;if(e===t&&i===n)return void gg(gI,this).splice(r,1)}}function xI(e){const[t,n,i]=e,r=[[t,n,i]],s=pg(mI,this,_I).call(this,i);for(let o=0;o<s;o++){const[e,n]=gg(gI,this)[o];for(let i=0,s=r.length;i<s;i++){const[,o,a]=r[i];if(!(n<=o||a<=e))if(o>=e)if(a>n)r[i][1]=n;else{if(1===s)return[];r.splice(i,1),i--,s--}else r[i][2]=e,a>n&&r.push([t,n,a])}}return r}var kI=new WeakMap,EI=new WeakMap;class CI extends IP{constructor(e,t,n,i){super(),dg(this,kI,void 0),dg(this,EI,void 0),mg(EI,this,e),mg(kI,this,t),this.firstPoint=n,this.lastPoint=i}toSVGPath(){const e=[];for(const t of gg(EI,this)){let[n,i]=t;e.push("M".concat(n," ").concat(i));for(let r=2;r<t.length;r+=2){const s=t[r],o=t[r+1];s===n?(e.push("V".concat(o)),i=o):o===i&&(e.push("H".concat(s)),n=s)}e.push("Z")}return e.join(" ")}serialize(e,t){let[n,i,r,s]=e;const o=[],a=r-n,l=s-i;for(const c of gg(EI,this)){const e=new Array(c.length);for(let t=0;t<c.length;t+=2)e[t]=n+c[t]*a,e[t+1]=s-c[t+1]*l;o.push(e)}return o}get box(){return gg(kI,this)}get classNamesForOutlining(){return["highlightOutline"]}}class SI extends qP{newFreeDrawOutline(e,t,n,i,r,s){return new AI(e,t,n,i,r,s)}}class AI extends cI{newOutliner(e,t,n,i,r){return new SI(e,t,n,i,r,arguments.length>5&&void 0!==arguments[5]?arguments[5]:0)}}var TI=new WeakMap,PI=new WeakMap,II=new WeakMap,RI=new WeakMap,MI=new WeakMap,NI=new WeakMap,DI=new WeakMap,OI=new WeakMap,LI=new WeakMap,FI=new WeakMap,jI=new WeakMap,BI=new WeakMap,WI=new WeakMap,UI=new WeakMap,zI=new WeakMap,HI=new WeakMap,VI=new WeakMap,qI=new WeakMap,GI=new WeakSet;class KI extends Gw{static get _keyboardManager(){const e=KI.prototype;return Cm(this,"_keyboardManager",new sy([[["ArrowLeft","mac+ArrowLeft"],e._moveCaret,{args:[0]}],[["ArrowRight","mac+ArrowRight"],e._moveCaret,{args:[1]}],[["ArrowUp","mac+ArrowUp"],e._moveCaret,{args:[2]}],[["ArrowDown","mac+ArrowDown"],e._moveCaret,{args:[3]}]]))}constructor(e){super(It(It({},e),{},{name:"highlightEditor"})),hg(this,GI),dg(this,TI,null),dg(this,PI,0),dg(this,II,void 0),dg(this,RI,null),dg(this,MI,null),dg(this,NI,null),dg(this,DI,null),dg(this,OI,0),dg(this,LI,null),dg(this,FI,null),dg(this,jI,null),dg(this,BI,!1),dg(this,WI,null),dg(this,UI,null),dg(this,zI,null),dg(this,HI,""),dg(this,VI,void 0),dg(this,qI,""),this.color=e.color||KI._defaultColor,mg(VI,this,e.thickness||KI._defaultThickness),this.opacity=e.opacity||KI._defaultOpacity,mg(II,this,e.boxes||null),mg(qI,this,e.methodOfCreation||""),mg(HI,this,e.text||""),this._isDraggable=!1,this.defaultL10nId="pdfjs-editor-highlight-editor",e.highlightId>-1?(mg(BI,this,!0),pg(GI,this,XI).call(this,e),pg(GI,this,eR).call(this)):gg(II,this)&&(mg(TI,this,e.anchorNode),mg(PI,this,e.anchorOffset),mg(DI,this,e.focusNode),mg(OI,this,e.focusOffset),pg(GI,this,YI).call(this),pg(GI,this,eR).call(this),this.rotate(this.rotation)),this.annotationElementId||this._uiManager.a11yAlert("pdfjs-editor-highlight-added-alert")}get telemetryInitialData(){return{action:"added",type:gg(BI,this)?"free_highlight":"highlight",color:this._uiManager.getNonHCMColorName(this.color),thickness:gg(VI,this),methodOfCreation:gg(qI,this)}}get telemetryFinalData(){return{type:"highlight",color:this._uiManager.getNonHCMColorName(this.color)}}static computeTelemetryFinalData(e){return{numberOfColors:e.get("color").size}}static initialize(e,t){var n;Gw.initialize(e,t),KI._defaultColor||(KI._defaultColor=(null===(n=t.highlightColors)||void 0===n?void 0:n.values().next().value)||"#fff066")}static updateDefaultParams(e,t){switch(e){case Qg.HIGHLIGHT_COLOR:KI._defaultColor=t;break;case Qg.HIGHLIGHT_THICKNESS:KI._defaultThickness=t}}translateInPage(e,t){}get toolbarPosition(){return gg(UI,this)}get commentButtonPosition(){return gg(WI,this)}updateParams(e,t){switch(e){case Qg.HIGHLIGHT_COLOR:pg(GI,this,QI).call(this,t);break;case Qg.HIGHLIGHT_THICKNESS:pg(GI,this,$I).call(this,t)}}static get defaultPropertiesToUpdate(){return[[Qg.HIGHLIGHT_COLOR,KI._defaultColor],[Qg.HIGHLIGHT_THICKNESS,KI._defaultThickness]]}get propertiesToUpdate(){return[[Qg.HIGHLIGHT_COLOR,this.color||KI._defaultColor],[Qg.HIGHLIGHT_THICKNESS,gg(VI,this)||KI._defaultThickness],[Qg.HIGHLIGHT_FREE,gg(BI,this)]]}onUpdatedColor(){var e,t;null===(e=this.parent)||void 0===e||e.drawLayer.updateProperties(gg(jI,this),{root:{fill:this.color,"fill-opacity":this.opacity}}),null===(t=gg(MI,this))||void 0===t||t.updateColor(this.color),super.onUpdatedColor()}get toolbarButtons(){if(this._uiManager.highlightColors){return[["colorPicker",mg(MI,this,new nA({editor:this}))]]}return super.toolbarButtons}disableEditing(){super.disableEditing(),this.div.classList.toggle("disabled",!0)}enableEditing(){super.enableEditing(),this.div.classList.toggle("disabled",!1)}fixAndSetPosition(){return super.fixAndSetPosition(pg(GI,this,rR).call(this))}getBaseTranslation(){return[0,0]}getRect(e,t){return super.getRect(e,t,pg(GI,this,rR).call(this))}onceAdded(e){this.annotationElementId||this.parent.addUndoableEditor(this),e&&this.div.focus()}remove(){pg(GI,this,ZI).call(this),this._reportTelemetry({action:"deleted"}),super.remove()}rebuild(){this.parent&&(super.rebuild(),null!==this.div&&(pg(GI,this,eR).call(this),this.isAttachedToDOM||this.parent.add(this)))}setParent(e){let t=!1;if(this.parent&&!e)pg(GI,this,ZI).call(this);else if(e){var n;pg(GI,this,eR).call(this,e),t=!this.parent&&(null===(n=this.div)||void 0===n?void 0:n.classList.contains("selectedEditor"))}super.setParent(e),this.show(this._isVisible),t&&this.select()}rotate(e){const{drawLayer:t}=this.parent;let n;gg(BI,this)?(e=(e-this.rotation+360)%360,n=tR.call(KI,gg(FI,this).box,e)):n=tR.call(KI,[this.x,this.y,this.width,this.height],e),t.updateProperties(gg(jI,this),{bbox:n,root:{"data-main-rotation":e}}),t.updateProperties(gg(zI,this),{bbox:tR.call(KI,gg(NI,this).box,e),root:{"data-main-rotation":e}})}render(){if(this.div)return this.div;const e=super.render();gg(HI,this)&&(e.setAttribute("aria-label",gg(HI,this)),e.setAttribute("role","mark")),gg(BI,this)?e.classList.add("free"):this.div.addEventListener("keydown",pg(GI,this,nR).bind(this),{signal:this._uiManager._signal});const t=mg(LI,this,document.createElement("div"));return e.append(t),t.setAttribute("aria-hidden","true"),t.className="internal",t.style.clipPath=gg(RI,this),this.setDims(this.width,this.height),Vv(this,gg(LI,this),["pointerover","pointerleave"]),this.enableEditing(),e}pointerover(){var e;this.isSelected||(null===(e=this.parent)||void 0===e||e.drawLayer.updateProperties(gg(zI,this),{rootClass:{hovered:!0}}))}pointerleave(){var e;this.isSelected||(null===(e=this.parent)||void 0===e||e.drawLayer.updateProperties(gg(zI,this),{rootClass:{hovered:!1}}))}_moveCaret(e){switch(this.parent.unselect(this),e){case 0:case 2:pg(GI,this,iR).call(this,!0);break;case 1:case 3:pg(GI,this,iR).call(this,!1)}}select(){var e;super.select(),gg(zI,this)&&(null===(e=this.parent)||void 0===e||e.drawLayer.updateProperties(gg(zI,this),{rootClass:{hovered:!1,selected:!0}}))}unselect(){var e;super.unselect(),gg(zI,this)&&(null===(e=this.parent)||void 0===e||e.drawLayer.updateProperties(gg(zI,this),{rootClass:{selected:!1}}),gg(BI,this)||pg(GI,this,iR).call(this,!1))}get _mustFixPosition(){return!gg(BI,this)}show(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this._isVisible;super.show(e),this.parent&&(this.parent.drawLayer.updateProperties(gg(jI,this),{rootClass:{hidden:!e}}),this.parent.drawLayer.updateProperties(gg(zI,this),{rootClass:{hidden:!e}}))}static startHighlighting(e,t,n){let{target:i,x:r,y:s}=n;const{x:o,y:a,width:l,height:c}=i.getBoundingClientRect(),u=new AbortController,h=e.combinedSignal(u),d=t=>{u.abort(),pg(KI,this,lR).call(this,e,t)};window.addEventListener("blur",d,{signal:h}),window.addEventListener("pointerup",d,{signal:h}),window.addEventListener("pointerdown",rv,{capture:!0,passive:!1,signal:h}),window.addEventListener("contextmenu",iv,{signal:h}),i.addEventListener("pointermove",pg(KI,this,aR).bind(this,e),{signal:h}),this._freeHighlight=new SI({x:r,y:s},[o,a,l,c],e.scale,this._defaultThickness/2,t,.001),({id:this._freeHighlightId,clipPathId:this._freeHighlightClipId}=e.drawLayer.draw({bbox:[0,0,1,1],root:{viewBox:"0 0 1 1",fill:this._defaultColor,"fill-opacity":this._defaultOpacity},rootClass:{highlight:!0,free:!0},path:{d:this._freeHighlight.toSVGPath()}},!0,!0))}static async deserialize(e,t,n){let i=null;if(e instanceof XT){const{data:{quadPoints:t,rect:n,rotation:r,id:s,color:o,opacity:a,popupRef:l,richText:c,contentsObj:u,creationDate:h,modificationDate:d},parent:{page:{pageNumber:p}}}=e;i=e={annotationType:Xg.HIGHLIGHT,color:Array.from(o),opacity:a,quadPoints:t,boxes:null,pageIndex:p-1,rect:n.slice(0),rotation:r,annotationElementId:s,id:s,deleted:!1,popupRef:l,richText:c,comment:(null===u||void 0===u?void 0:u.str)||null,creationDate:h,modificationDate:d}}else if(e instanceof KT){const{data:{inkLists:t,rect:n,rotation:r,id:s,color:o,borderStyle:{rawWidth:a},popupRef:l,richText:c,contentsObj:u,creationDate:h,modificationDate:d},parent:{page:{pageNumber:p}}}=e;i=e={annotationType:Xg.HIGHLIGHT,color:Array.from(o),thickness:a,inkLists:t,boxes:null,pageIndex:p-1,rect:n.slice(0),rotation:r,annotationElementId:s,id:s,deleted:!1,popupRef:l,richText:c,comment:(null===u||void 0===u?void 0:u.str)||null,creationDate:h,modificationDate:d}}const{color:r,quadPoints:s,inkLists:o,opacity:a}=e,l=await super.deserialize(e,t,n);l.color=Fm.makeHexColor(...r),l.opacity=a||1,o&&mg(VI,l,e.thickness),l._initialData=i,e.comment&&l.setCommentData(e);const[c,u]=l.pageDimensions,[h,d]=l.pageTranslation;if(s){const e=mg(II,l,[]);for(let t=0;t<s.length;t+=8)e.push({x:(s[t]-h)/c,y:1-(s[t+1]-d)/u,width:(s[t+2]-s[t])/c,height:(s[t+1]-s[t+5])/u});pg(GI,l,YI).call(l),pg(GI,l,eR).call(l),l.rotate(l.rotation)}else if(o){mg(BI,l,!0);const e=o[0],n={x:e[0]-h,y:u-(e[1]-d)},i=new SI(n,[0,0,c,u],1,gg(VI,l)/2,!0,.001);for(let t=0,o=e.length;t<o;t+=2)n.x=e[t]-h,n.y=u-(e[t+1]-d),i.add(n);const{id:r,clipPathId:s}=t.drawLayer.draw({bbox:[0,0,1,1],root:{viewBox:"0 0 1 1",fill:l.color,"fill-opacity":l._defaultOpacity},rootClass:{highlight:!0,free:!0},path:{d:i.toSVGPath()}},!0,!0);pg(GI,l,XI).call(l,{highlightOutlines:i.getOutlines(),highlightId:r,clipPathId:s}),pg(GI,l,eR).call(l),l.rotate(l.parentRotation)}return l}serialize(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(this.isEmpty()||e)return null;if(this.deleted)return this.serializeDeleted();const t=Gw._colorManager.convert(this._uiManager.getNonHCMColor(this.color)),n=super.serialize(e);return Object.assign(n,{color:t,opacity:this.opacity,thickness:gg(VI,this),quadPoints:pg(GI,this,sR).call(this),outlines:pg(GI,this,oR).call(this,n.rect)}),this.addComment(n),this.annotationElementId&&!pg(GI,this,cR).call(this,n)?null:(n.id=this.annotationElementId,n)}renderAnnotationElement(e){return this.deleted?(e.hide(),null):(e.updateEdited({rect:this.getPDFRect(),popup:this.comment}),null)}static canCreateNewEmptyEditor(){return!1}}function YI(){const e=new vI(gg(II,this),.001);mg(FI,this,e.getOutlines()),[this.x,this.y,this.width,this.height]=gg(FI,this).box;const t=new vI(gg(II,this),.0025,.001,"ltr"===this._uiManager.direction);mg(NI,this,t.getOutlines());const{firstPoint:n}=gg(FI,this);mg(WI,this,[(n[0]-this.x)/this.width,(n[1]-this.y)/this.height]);const{lastPoint:i}=gg(NI,this);mg(UI,this,[(i[0]-this.x)/this.width,(i[1]-this.y)/this.height])}function XI(e){let{highlightOutlines:t,highlightId:n,clipPathId:i}=e;mg(FI,this,t);if(mg(NI,this,t.getNewOutline(gg(VI,this)/2+1.5,.0025)),n>=0)mg(jI,this,n),mg(RI,this,i),this.parent.drawLayer.finalizeDraw(n,{bbox:t.box,path:{d:t.toSVGPath()}}),mg(zI,this,this.parent.drawLayer.drawOutline({rootClass:{highlightOutline:!0,free:!0},bbox:gg(NI,this).box,path:{d:gg(NI,this).toSVGPath()}},!0));else if(this.parent){const e=this.parent.viewport.rotation;this.parent.drawLayer.updateProperties(gg(jI,this),{bbox:tR.call(Mg,gg(FI,this).box,(e-this.rotation+360)%360),path:{d:t.toSVGPath()}}),this.parent.drawLayer.updateProperties(gg(zI,this),{bbox:tR.call(Mg,gg(NI,this).box,e),path:{d:gg(NI,this).toSVGPath()}})}const[r,s,o,a]=t.box;switch(this.rotation){case 0:this.x=r,this.y=s,this.width=o,this.height=a;break;case 90:{const[e,t]=this.parentDimensions;this.x=s,this.y=1-r,this.width=o*t/e,this.height=a*e/t;break}case 180:this.x=1-r,this.y=1-s,this.width=o,this.height=a;break;case 270:{const[e,t]=this.parentDimensions;this.x=1-s,this.y=r,this.width=o*t/e,this.height=a*e/t;break}}const{firstPoint:l}=t;mg(WI,this,[(l[0]-r)/o,(l[1]-s)/a]);const{lastPoint:c}=gg(NI,this);mg(UI,this,[(c[0]-r)/o,(c[1]-s)/a])}function QI(e){const t=(e,t)=>{this.color=e,this.opacity=t,this.onUpdatedColor()},n=this.color,i=this.opacity;this.addCommands({cmd:t.bind(this,e,Mg._defaultOpacity),undo:t.bind(this,n,i),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:Qg.HIGHLIGHT_COLOR,overwriteIfSameType:!0,keepUndo:!0}),this._reportTelemetry({action:"color_changed",color:this._uiManager.getNonHCMColorName(e)},!0)}function $I(e){const t=gg(VI,this),n=e=>{mg(VI,this,e),pg(GI,this,JI).call(this,e)};this.addCommands({cmd:n.bind(this,e),undo:n.bind(this,t),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:Qg.INK_THICKNESS,overwriteIfSameType:!0,keepUndo:!0}),this._reportTelemetry({action:"thickness_changed",thickness:e},!0)}function JI(e){gg(BI,this)&&(pg(GI,this,XI).call(this,{highlightOutlines:gg(FI,this).getNewOutline(e/2)}),this.fixAndSetPosition(),this.setDims(this.width,this.height))}function ZI(){null!==gg(jI,this)&&this.parent&&(this.parent.drawLayer.remove(gg(jI,this)),mg(jI,this,null),this.parent.drawLayer.remove(gg(zI,this)),mg(zI,this,null))}function eR(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.parent;null===gg(jI,this)&&(({id:cg(mg,[jI,this])._,clipPathId:cg(mg,[RI,this])._}=e.drawLayer.draw({bbox:gg(FI,this).box,root:{viewBox:"0 0 1 1",fill:this.color,"fill-opacity":this.opacity},rootClass:{highlight:!0,free:gg(BI,this)},path:{d:gg(FI,this).toSVGPath()}},!1,!0)),mg(zI,this,e.drawLayer.drawOutline({rootClass:{highlightOutline:!0,free:gg(BI,this)},bbox:gg(NI,this).box,path:{d:gg(NI,this).toSVGPath()}},gg(BI,this))),gg(LI,this)&&(gg(LI,this).style.clipPath=gg(RI,this)))}function tR(e,t){let[n,i,r,s]=e;switch(t){case 90:return[1-i-s,n,s,r];case 180:return[1-n-r,1-i-s,r,s];case 270:return[i,1-n-r,s,r]}return[n,i,r,s]}function nR(e){Mg._keyboardManager.exec(this,e)}function iR(e){if(!gg(TI,this))return;const t=window.getSelection();e?t.setPosition(gg(TI,this),gg(PI,this)):t.setPosition(gg(DI,this),gg(OI,this))}function rR(){return gg(BI,this)?this.rotation:0}function sR(){if(gg(BI,this))return null;const[e,t]=this.pageDimensions,[n,i]=this.pageTranslation,r=gg(II,this),s=new Float32Array(8*r.length);let o=0;for(const{x:a,y:l,width:c,height:u}of r){const r=a*e+n,h=(1-l)*t+i;s[o]=s[o+4]=r,s[o+1]=s[o+3]=h,s[o+2]=s[o+6]=r+c*e,s[o+5]=s[o+7]=h-u*t,o+=8}return s}function oR(e){return gg(FI,this).serialize(e,pg(GI,this,rR).call(this))}function aR(e,t){this._freeHighlight.add(t)&&e.drawLayer.updateProperties(this._freeHighlightId,{path:{d:this._freeHighlight.toSVGPath()}})}function lR(e,t){this._freeHighlight.isEmpty()?e.drawLayer.remove(this._freeHighlightId):e.createAndAddNewEditor(t,!1,{highlightId:this._freeHighlightId,highlightOutlines:this._freeHighlight.getOutlines(),clipPathId:this._freeHighlightClipId,methodOfCreation:"main_toolbar"}),this._freeHighlightId=-1,this._freeHighlight=null,this._freeHighlightClipId=""}function cR(e){const{color:t}=this._initialData;return this.hasEditedComment||e.color.some((e,n)=>e!==t[n])}Mg=KI,Tt(KI,"_defaultColor",null),Tt(KI,"_defaultOpacity",1),Tt(KI,"_defaultThickness",12),Tt(KI,"_type","highlight"),Tt(KI,"_editorType",Xg.HIGHLIGHT),Tt(KI,"_freeHighlightId",-1),Tt(KI,"_freeHighlight",null),Tt(KI,"_freeHighlightClipId","");var uR=new WeakMap;class hR{constructor(){dg(this,uR,Object.create(null))}updateProperty(e,t){this[e]=t,this.updateSVGProperty(e,t)}updateProperties(e){if(e)for(const[t,n]of Object.entries(e))t.startsWith("_")||this.updateProperty(t,n)}updateSVGProperty(e,t){gg(uR,this)[e]=t}toSVGProperties(){const e=gg(uR,this);return mg(uR,this,Object.create(null)),{root:e}}reset(){mg(uR,this,Object.create(null))}updateAll(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this;this.updateProperties(e)}clone(){bm("Not implemented")}}var dR=new WeakMap,pR=new WeakMap,fR=new WeakSet;class gR extends Gw{constructor(e){super(e),hg(this,fR),dg(this,dR,null),dg(this,pR,void 0),Tt(this,"_colorPicker",null),Tt(this,"_drawId",null),mg(pR,this,e.mustBeCommitted||!1),this._addOutlines(e)}onUpdatedColor(){var e;null===(e=this._colorPicker)||void 0===e||e.update(this.color),super.onUpdatedColor()}_addOutlines(e){e.drawOutlines&&(pg(fR,this,mR).call(this,e),pg(fR,this,_R).call(this))}static _mergeSVGProperties(e,t){const n=new Set(Object.keys(e));for(const[i,r]of Object.entries(t))n.has(i)?Object.assign(e[i],r):e[i]=r;return e}static getDefaultDrawingOptions(e){bm("Not implemented")}static get typesMap(){bm("Not implemented")}static get isDrawer(){return!0}static get supportMultipleDrawings(){return!1}static updateDefaultParams(e,t){const n=this.typesMap.get(e);n&&this._defaultDrawingOptions.updateProperty(n,t),this._currentParent&&(ER._.updateProperty(n,t),this._currentParent.drawLayer.updateProperties(this._currentDrawId,this._defaultDrawingOptions.toSVGProperties()))}updateParams(e,t){const n=this.constructor.typesMap.get(e);n&&this._updateProperty(e,n,t)}static get defaultPropertiesToUpdate(){const e=[],t=this._defaultDrawingOptions;for(const[n,i]of this.typesMap)e.push([n,t[i]]);return e}get propertiesToUpdate(){const e=[],{_drawingOptions:t}=this;for(const[n,i]of this.constructor.typesMap)e.push([n,t[i]]);return e}_updateProperty(e,t,n){const i=this._drawingOptions,r=i[t],s=n=>{var r;i.updateProperty(t,n);const s=gg(dR,this).updateProperty(t,n);s&&pg(fR,this,xR).call(this,s),null===(r=this.parent)||void 0===r||r.drawLayer.updateProperties(this._drawId,i.toSVGProperties()),e===this.colorType&&this.onUpdatedColor()};this.addCommands({cmd:s.bind(this,n),undo:s.bind(this,r),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:e,overwriteIfSameType:!0,keepUndo:!0})}_onResizing(){var e;null===(e=this.parent)||void 0===e||e.drawLayer.updateProperties(this._drawId,gR._mergeSVGProperties(gg(dR,this).getPathResizingSVGProperties(pg(fR,this,bR).call(this)),{bbox:pg(fR,this,kR).call(this)}))}_onResized(){var e;null===(e=this.parent)||void 0===e||e.drawLayer.updateProperties(this._drawId,gR._mergeSVGProperties(gg(dR,this).getPathResizedSVGProperties(pg(fR,this,bR).call(this)),{bbox:pg(fR,this,kR).call(this)}))}_onTranslating(e,t){var n;null===(n=this.parent)||void 0===n||n.drawLayer.updateProperties(this._drawId,{bbox:pg(fR,this,kR).call(this)})}_onTranslated(){var e;null===(e=this.parent)||void 0===e||e.drawLayer.updateProperties(this._drawId,gR._mergeSVGProperties(gg(dR,this).getPathTranslatedSVGProperties(pg(fR,this,bR).call(this),this.parentDimensions),{bbox:pg(fR,this,kR).call(this)}))}_onStartDragging(){var e;null===(e=this.parent)||void 0===e||e.drawLayer.updateProperties(this._drawId,{rootClass:{moving:!0}})}_onStopDragging(){var e;null===(e=this.parent)||void 0===e||e.drawLayer.updateProperties(this._drawId,{rootClass:{moving:!1}})}commit(){super.commit(),this.disableEditMode(),this.disableEditing()}disableEditing(){super.disableEditing(),this.div.classList.toggle("disabled",!0)}enableEditing(){super.enableEditing(),this.div.classList.toggle("disabled",!1)}getBaseTranslation(){return[0,0]}get isResizable(){return!0}onceAdded(e){this.annotationElementId||this.parent.addUndoableEditor(this),this._isDraggable=!0,gg(pR,this)&&(mg(pR,this,!1),this.commit(),this.parent.setSelected(this),e&&this.isOnScreen&&this.div.focus())}remove(){pg(fR,this,yR).call(this),super.remove()}rebuild(){this.parent&&(super.rebuild(),null!==this.div&&(pg(fR,this,_R).call(this),pg(fR,this,xR).call(this,gg(dR,this).box),this.isAttachedToDOM||this.parent.add(this)))}setParent(e){let t=!1;if(this.parent&&!e)this._uiManager.removeShouldRescale(this),pg(fR,this,yR).call(this);else if(e){var n;this._uiManager.addShouldRescale(this),pg(fR,this,_R).call(this,e),t=!this.parent&&(null===(n=this.div)||void 0===n?void 0:n.classList.contains("selectedEditor"))}super.setParent(e),t&&this.select()}rotate(){this.parent&&this.parent.drawLayer.updateProperties(this._drawId,gR._mergeSVGProperties({bbox:pg(fR,this,kR).call(this)},gg(dR,this).updateRotation((this.parentRotation-this.rotation+360)%360)))}onScaleChanging(){this.parent&&pg(fR,this,xR).call(this,gg(dR,this).updateParentDimensions(this.parentDimensions,this.parent.scale))}static onScaleChangingWhenDrawing(){}render(){if(this.div)return this.div;let e,t;this._isCopy&&(e=this.x,t=this.y);const n=super.render();n.classList.add("draw");const i=document.createElement("div");return n.append(i),i.setAttribute("aria-hidden","true"),i.className="internal",this.setDims(),this._uiManager.addShouldRescale(this),this.disableEditing(),this._isCopy&&this._moveAfterPaste(e,t),n}static createDrawerInstance(e,t,n,i,r){bm("Not implemented")}static startDrawing(e,t,n,i){var r,s;const{target:o,offsetX:a,offsetY:l,pointerId:c,pointerType:u}=i;if(TR._&&TR._!==u)return;const{viewport:{rotation:h}}=e,{width:d,height:p}=o.getBoundingClientRect(),f=CR._=new AbortController,g=e.combinedSignal(f);AR._||(AR._=c),null!==(r=TR._)&&void 0!==r||(TR._=u),window.addEventListener("pointerup",e=>{var t;AR._===e.pointerId?this._endDraw(e):null===(t=PR._)||void 0===t||t.delete(e.pointerId)},{signal:g}),window.addEventListener("pointercancel",e=>{var t;AR._===e.pointerId?this._currentParent.endDrawingSession():null===(t=PR._)||void 0===t||t.delete(e.pointerId)},{signal:g}),window.addEventListener("pointerdown",e=>{TR._===e.pointerType&&((PR._||(PR._=new Set)).add(e.pointerId),ER._.isCancellable()&&(ER._.removeLastElement(),ER._.isEmpty()?this._currentParent.endDrawingSession(!0):this._endDraw(null)))},{capture:!0,passive:!1,signal:g}),window.addEventListener("contextmenu",iv,{signal:g}),o.addEventListener("pointermove",this._drawMove.bind(this),{signal:g}),o.addEventListener("touchmove",e=>{e.timeStamp===IR._&&rv(e)},{signal:g}),e.toggleDrawing(),null===(s=t._editorUndoBar)||void 0===s||s.hide(),ER._?e.drawLayer.updateProperties(this._currentDrawId,ER._.startNew(a,l,d,p,h)):(t.updateUIForDefaultProperties(this),ER._=this.createDrawerInstance(a,l,d,p,h),SR._=this.getDefaultDrawingOptions(),this._currentParent=e,({id:this._currentDrawId}=e.drawLayer.draw(this._mergeSVGProperties(SR._.toSVGProperties(),ER._.defaultSVGProperties),!0,!1)))}static _drawMove(e){var t;if(IR._=-1,!ER._)return;const{offsetX:n,offsetY:i,pointerId:r}=e;AR._===r&&((null===(t=PR._)||void 0===t?void 0:t.size)>=1?this._endDraw(e):(this._currentParent.drawLayer.updateProperties(this._currentDrawId,ER._.add(n,i)),IR._=e.timeStamp,rv(e)))}static _cleanup(e){e&&(this._currentDrawId=-1,this._currentParent=null,ER._=null,SR._=null,TR._=null,IR._=NaN),CR._&&(CR._.abort(),CR._=null,AR._=NaN,PR._=null)}static _endDraw(e){const t=this._currentParent;if(t){if(t.toggleDrawing(!0),this._cleanup(!1),(null===e||void 0===e?void 0:e.target)===t.div&&t.drawLayer.updateProperties(this._currentDrawId,ER._.end(e.offsetX,e.offsetY)),this.supportMultipleDrawings){const e=ER._,n=this._currentDrawId,i=e.getLastElement();return void t.addCommands({cmd:()=>{t.drawLayer.updateProperties(n,e.setLastElement(i))},undo:()=>{t.drawLayer.updateProperties(n,e.removeLastElement())},mustExec:!1,type:Qg.DRAW_STEP})}this.endDrawing(!1)}}static endDrawing(e){const t=this._currentParent;if(!t)return null;if(t.toggleDrawing(!0),t.cleanUndoStack(Qg.DRAW_STEP),!ER._.isEmpty()){const{pageDimensions:[n,i],scale:r}=t,s=t.createAndAddNewEditor({offsetX:0,offsetY:0},!1,{drawId:this._currentDrawId,drawOutlines:ER._.getOutlines(n*r,i*r,r,this._INNER_MARGIN),drawingOptions:SR._,mustBeCommitted:!e});return this._cleanup(!0),s}return t.drawLayer.remove(this._currentDrawId),this._cleanup(!0),null}createDrawingOptions(e){}static deserializeDraw(e,t,n,i,r,s){bm("Not implemented")}static async deserialize(e,t,n){const{rawDims:{pageWidth:i,pageHeight:r,pageX:s,pageY:o}}=t.viewport,a=this.deserializeDraw(s,o,i,r,this._INNER_MARGIN,e),l=await super.deserialize(e,t,n);return l.createDrawingOptions(e),pg(fR,l,mR).call(l,{drawOutlines:a}),pg(fR,l,_R).call(l),l.onScaleChanging(),l.rotate(),l}serializeDraw(e){const[t,n]=this.pageTranslation,[i,r]=this.pageDimensions;return gg(dR,this).serialize([t,n,i,r],e)}renderAnnotationElement(e){return e.updateEdited({rect:this.getPDFRect()}),null}static canCreateNewEmptyEditor(){return!1}}function mR(e){let{drawOutlines:t,drawId:n,drawingOptions:i}=e;mg(dR,this,t),this._drawingOptions||(this._drawingOptions=i),this.annotationElementId||this._uiManager.a11yAlert("pdfjs-editor-".concat(this.editorType,"-added-alert")),n>=0?(this._drawId=n,this.parent.drawLayer.finalizeDraw(n,t.defaultProperties)):this._drawId=pg(fR,this,vR).call(this,t,this.parent),pg(fR,this,xR).call(this,t.box)}function vR(e,t){const{id:n}=t.drawLayer.draw(Ng._mergeSVGProperties(this._drawingOptions.toSVGProperties(),e.defaultSVGProperties),!1,!1);return n}function yR(){null!==this._drawId&&this.parent&&(this.parent.drawLayer.remove(this._drawId),this._drawId=null,this._drawingOptions.reset())}function _R(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.parent;null!==this._drawId&&this.parent===e||(null===this._drawId?(this._drawingOptions.updateAll(),this._drawId=pg(fR,this,vR).call(this,gg(dR,this),e)):this.parent.drawLayer.updateParent(this._drawId,e.drawLayer))}function wR(e){let[t,n,i,r]=e;const{parentDimensions:[s,o],rotation:a}=this;switch(a){case 90:return[n,1-t,i*(o/s),r*(s/o)];case 180:return[1-t,1-n,i,r];case 270:return[1-n,t,i*(o/s),r*(s/o)];default:return[t,n,i,r]}}function bR(){const{x:e,y:t,width:n,height:i,parentDimensions:[r,s],rotation:o}=this;switch(o){case 90:return[1-t,e,n*(r/s),i*(s/r)];case 180:return[1-e,1-t,n,i];case 270:return[t,1-e,n*(r/s),i*(s/r)];default:return[e,t,n,i]}}function xR(e){[this.x,this.y,this.width,this.height]=pg(fR,this,wR).call(this,e),this.div&&(this.fixAndSetPosition(),this.setDims()),this._onResized()}function kR(){const{x:e,y:t,width:n,height:i,rotation:r,parentRotation:s,parentDimensions:[o,a]}=this;switch((4*r+s)/90){case 1:return[1-t-i,e,i,n];case 2:return[1-e-n,1-t-i,n,i];case 3:return[t,1-e-n,i,n];case 4:return[e,t-n*(o/a),i*(a/o),n*(o/a)];case 5:return[1-t,e,n*(o/a),i*(a/o)];case 6:return[1-e-i*(a/o),1-t,i*(a/o),n*(o/a)];case 7:return[t-n*(o/a),1-e-i*(a/o),n*(o/a),i*(a/o)];case 8:return[e-n,t-i,n,i];case 9:return[1-t,e-n,i,n];case 10:return[1-e,1-t,n,i];case 11:return[t-i,1-e,i,n];case 12:return[e-i*(a/o),t,i*(a/o),n*(o/a)];case 13:return[1-t-n*(o/a),e-i*(a/o),n*(o/a),i*(a/o)];case 14:return[1-e,1-t-n*(o/a),i*(a/o),n*(o/a)];case 15:return[t,1-e,n*(o/a),i*(a/o)];default:return[e,t,n,i]}}Ng=gR,Tt(gR,"_currentDrawId",-1),Tt(gR,"_currentParent",null);var ER={_:null},CR={_:null},SR={_:null},AR={_:NaN},TR={_:null},PR={_:null},IR={_:NaN};Tt(gR,"_INNER_MARGIN",3);var RR=new WeakMap,MR=new WeakMap,NR=new WeakMap,DR=new WeakMap,OR=new WeakMap,LR=new WeakMap,FR=new WeakMap,jR=new WeakMap,BR=new WeakMap,WR=new WeakMap,UR=new WeakMap,zR=new WeakSet;class HR{constructor(e,t,n,i,r,s){hg(this,zR),dg(this,RR,new Float64Array(6)),dg(this,MR,void 0),dg(this,NR,void 0),dg(this,DR,void 0),dg(this,OR,void 0),dg(this,LR,void 0),dg(this,FR,""),dg(this,jR,0),dg(this,BR,new tM),dg(this,WR,void 0),dg(this,UR,void 0),mg(WR,this,n),mg(UR,this,i),mg(DR,this,r),mg(OR,this,s),[e,t]=pg(zR,this,VR).call(this,e,t);const o=mg(MR,this,[NaN,NaN,NaN,NaN,e,t]);mg(LR,this,[e,t]),mg(NR,this,[{line:o,points:gg(LR,this)}]),gg(RR,this).set(o,0)}updateProperty(e,t){"stroke-width"===e&&mg(OR,this,t)}isEmpty(){return!gg(NR,this)||0===gg(NR,this).length}isCancellable(){return gg(LR,this).length<=10}add(e,t){[e,t]=pg(zR,this,VR).call(this,e,t);const[n,i,r,s]=gg(RR,this).subarray(2,6),o=e-r,a=t-s;return Math.hypot(gg(WR,this)*o,gg(UR,this)*a)<=2?null:(gg(LR,this).push(e,t),isNaN(n)?(gg(RR,this).set([r,s,e,t],2),gg(MR,this).push(NaN,NaN,NaN,NaN,e,t),{path:{d:this.toSVGPath()}}):(isNaN(gg(RR,this)[0])&&gg(MR,this).splice(6,6),gg(RR,this).set([n,i,r,s,e,t],0),gg(MR,this).push(...IP.createBezierPoints(n,i,r,s,e,t)),{path:{d:this.toSVGPath()}}))}end(e,t){const n=this.add(e,t);return n||(2===gg(LR,this).length?{path:{d:this.toSVGPath()}}:null)}startNew(e,t,n,i,r){mg(WR,this,n),mg(UR,this,i),mg(DR,this,r),[e,t]=pg(zR,this,VR).call(this,e,t);const s=mg(MR,this,[NaN,NaN,NaN,NaN,e,t]);mg(LR,this,[e,t]);const o=gg(NR,this).at(-1);return o&&(o.line=new Float32Array(o.line),o.points=new Float32Array(o.points)),gg(NR,this).push({line:s,points:gg(LR,this)}),gg(RR,this).set(s,0),mg(jR,this,0),this.toSVGPath(),null}getLastElement(){return gg(NR,this).at(-1)}setLastElement(e){return gg(NR,this)?(gg(NR,this).push(e),mg(MR,this,e.line),mg(LR,this,e.points),mg(jR,this,0),{path:{d:this.toSVGPath()}}):gg(BR,this).setLastElement(e)}removeLastElement(){if(!gg(NR,this))return gg(BR,this).removeLastElement();gg(NR,this).pop(),mg(FR,this,"");for(let e=0,t=gg(NR,this).length;e<t;e++){const{line:t,points:n}=gg(NR,this)[e];mg(MR,this,t),mg(LR,this,n),mg(jR,this,0),this.toSVGPath()}return{path:{d:gg(FR,this)}}}toSVGPath(){const e=IP.svgRound(gg(MR,this)[4]),t=IP.svgRound(gg(MR,this)[5]);if(2===gg(LR,this).length)return mg(FR,this,"".concat(gg(FR,this)," M ").concat(e," ").concat(t," Z")),gg(FR,this);if(gg(LR,this).length<=6){const n=gg(FR,this).lastIndexOf("M");mg(FR,this,"".concat(gg(FR,this).slice(0,n)," M ").concat(e," ").concat(t)),mg(jR,this,6)}if(4===gg(LR,this).length){const e=IP.svgRound(gg(MR,this)[10]),t=IP.svgRound(gg(MR,this)[11]);return mg(FR,this,"".concat(gg(FR,this)," L ").concat(e," ").concat(t)),mg(jR,this,12),gg(FR,this)}const n=[];0===gg(jR,this)&&(n.push("M ".concat(e," ").concat(t)),mg(jR,this,6));for(let i=gg(jR,this),r=gg(MR,this).length;i<r;i+=6){const[e,t,r,s,o,a]=gg(MR,this).slice(i,i+6).map(IP.svgRound);n.push("C".concat(e," ").concat(t," ").concat(r," ").concat(s," ").concat(o," ").concat(a))}return mg(FR,this,gg(FR,this)+n.join(" ")),mg(jR,this,gg(MR,this).length),gg(FR,this)}getOutlines(e,t,n,i){const r=gg(NR,this).at(-1);return r.line=new Float32Array(r.line),r.points=new Float32Array(r.points),gg(BR,this).build(gg(NR,this),e,t,n,gg(DR,this),gg(OR,this),i),mg(RR,this,null),mg(MR,this,null),mg(NR,this,null),mg(FR,this,null),gg(BR,this)}get defaultSVGProperties(){return{root:{viewBox:"0 0 10000 10000"},rootClass:{draw:!0},bbox:[0,0,1,1]}}}function VR(e,t){return IP._normalizePoint(e,t,gg(WR,this),gg(UR,this),gg(DR,this))}var qR=new WeakMap,GR=new WeakMap,KR=new WeakMap,YR=new WeakMap,XR=new WeakMap,QR=new WeakMap,$R=new WeakMap,JR=new WeakMap,ZR=new WeakMap,eM=new WeakSet;class tM extends IP{constructor(){super(...arguments),hg(this,eM),dg(this,qR,void 0),dg(this,GR,0),dg(this,KR,void 0),dg(this,YR,void 0),dg(this,XR,void 0),dg(this,QR,void 0),dg(this,$R,void 0),dg(this,JR,void 0),dg(this,ZR,void 0)}build(e,t,n,i,r,s,o){mg(XR,this,t),mg(QR,this,n),mg($R,this,i),mg(JR,this,r),mg(ZR,this,s),mg(KR,this,null!==o&&void 0!==o?o:0),mg(YR,this,e),pg(eM,this,rM).call(this)}get thickness(){return gg(ZR,this)}setLastElement(e){return gg(YR,this).push(e),{path:{d:this.toSVGPath()}}}removeLastElement(){return gg(YR,this).pop(),{path:{d:this.toSVGPath()}}}toSVGPath(){const e=[];for(const{line:t}of gg(YR,this))if(e.push("M".concat(IP.svgRound(t[4])," ").concat(IP.svgRound(t[5]))),6!==t.length)if(12===t.length&&isNaN(t[6]))e.push("L".concat(IP.svgRound(t[10])," ").concat(IP.svgRound(t[11])));else for(let n=6,i=t.length;n<i;n+=6){const[i,r,s,o,a,l]=t.subarray(n,n+6).map(IP.svgRound);e.push("C".concat(i," ").concat(r," ").concat(s," ").concat(o," ").concat(a," ").concat(l))}else e.push("Z");return e.join("")}serialize(e,t){let[n,i,r,s]=e;const o=[],a=[],[l,c,u,h]=pg(eM,this,iM).call(this);let d,p,f,g,m,v,y,_,w;switch(gg(JR,this)){case 0:w=IP._rescale,d=n,p=i+s,f=r,g=-s,m=n+l*r,v=i+(1-c-h)*s,y=n+(l+u)*r,_=i+(1-c)*s;break;case 90:w=IP._rescaleAndSwap,d=n,p=i,f=r,g=s,m=n+c*r,v=i+l*s,y=n+(c+h)*r,_=i+(l+u)*s;break;case 180:w=IP._rescale,d=n+r,p=i,f=-r,g=s,m=n+(1-l-u)*r,v=i+c*s,y=n+(1-l)*r,_=i+(c+h)*s;break;case 270:w=IP._rescaleAndSwap,d=n+r,p=i+s,f=-r,g=-s,m=n+(1-c-h)*r,v=i+(1-l-u)*s,y=n+(1-c)*r,_=i+(1-l)*s}for(const{line:b,points:x}of gg(YR,this))o.push(w(b,d,p,f,g,t?new Array(b.length):null)),a.push(w(x,d,p,f,g,t?new Array(x.length):null));return{lines:o,points:a,rect:[m,v,y,_]}}static deserialize(e,t,n,i,r,s){let{paths:{lines:o,points:a},rotation:l,thickness:c}=s;const u=[];let h,d,p,f,g;switch(l){case 0:g=IP._rescale,h=-e/n,d=t/i+1,p=1/n,f=-1/i;break;case 90:g=IP._rescaleAndSwap,h=-t/i,d=-e/n,p=1/i,f=1/n;break;case 180:g=IP._rescale,h=e/n+1,d=-t/i,p=-1/n,f=1/i;break;case 270:g=IP._rescaleAndSwap,h=t/i+1,d=e/n+1,p=-1/i,f=-1/n}if(!o){o=[];for(const e of a){const t=e.length;if(2===t){o.push(new Float32Array([NaN,NaN,NaN,NaN,e[0],e[1]]));continue}if(4===t){o.push(new Float32Array([NaN,NaN,NaN,NaN,e[0],e[1],NaN,NaN,NaN,NaN,e[2],e[3]]));continue}const n=new Float32Array(3*(t-2));o.push(n);let[i,r,s,a]=e.subarray(0,4);n.set([NaN,NaN,NaN,NaN,i,r],0);for(let o=4;o<t;o+=2){const t=e[o],l=e[o+1];n.set(IP.createBezierPoints(i,r,s,a,t,l),3*(o-2)),[i,r,s,a]=[s,a,t,l]}}}for(let v=0,y=o.length;v<y;v++)u.push({line:g(o[v].map(e=>null!==e&&void 0!==e?e:NaN),h,d,p,f),points:g(a[v].map(e=>null!==e&&void 0!==e?e:NaN),h,d,p,f)});const m=new this.prototype.constructor;return m.build(u,n,i,1,l,c,r),m}get box(){return gg(qR,this)}updateProperty(e,t){return"stroke-width"===e?pg(eM,this,sM).call(this,t):null}updateParentDimensions(e,t){let[n,i]=e;const[r,s]=pg(eM,this,nM).call(this);mg(XR,this,n),mg(QR,this,i),mg($R,this,t);const[o,a]=pg(eM,this,nM).call(this),l=o-r,c=a-s,u=gg(qR,this);return u[0]-=l,u[1]-=c,u[2]+=2*l,u[3]+=2*c,u}updateRotation(e){return mg(GR,this,e),{path:{transform:this.rotationTransform}}}get viewBox(){return gg(qR,this).map(IP.svgRound).join(" ")}get defaultProperties(){const[e,t]=gg(qR,this);return{root:{viewBox:this.viewBox},path:{"transform-origin":"".concat(IP.svgRound(e)," ").concat(IP.svgRound(t))}}}get rotationTransform(){const[,,e,t]=gg(qR,this);let n=0,i=0,r=0,s=0,o=0,a=0;switch(gg(GR,this)){case 90:i=t/e,r=-e/t,o=e;break;case 180:n=-1,s=-1,o=e,a=t;break;case 270:i=-t/e,r=e/t,a=t;break;default:return""}return"matrix(".concat(n," ").concat(i," ").concat(r," ").concat(s," ").concat(IP.svgRound(o)," ").concat(IP.svgRound(a),")")}getPathResizingSVGProperties(e){let[t,n,i,r]=e;const[s,o]=pg(eM,this,nM).call(this),[a,l,c,u]=gg(qR,this);if(Math.abs(c-s)<=IP.PRECISION||Math.abs(u-o)<=IP.PRECISION){const e=t+i/2-(a+c/2),s=n+r/2-(l+u/2);return{path:{"transform-origin":"".concat(IP.svgRound(t)," ").concat(IP.svgRound(n)),transform:"".concat(this.rotationTransform," translate(").concat(e," ").concat(s,")")}}}const h=(i-2*s)/(c-2*s),d=(r-2*o)/(u-2*o),p=c/i,f=u/r;return{path:{"transform-origin":"".concat(IP.svgRound(a)," ").concat(IP.svgRound(l)),transform:"".concat(this.rotationTransform," scale(").concat(p," ").concat(f,") ")+"translate(".concat(IP.svgRound(s)," ").concat(IP.svgRound(o),") scale(").concat(h," ").concat(d,") ")+"translate(".concat(IP.svgRound(-s)," ").concat(IP.svgRound(-o),")")}}}getPathResizedSVGProperties(e){let[t,n,i,r]=e;const[s,o]=pg(eM,this,nM).call(this),a=gg(qR,this),[l,c,u,h]=a;if(a[0]=t,a[1]=n,a[2]=i,a[3]=r,Math.abs(u-s)<=IP.PRECISION||Math.abs(h-o)<=IP.PRECISION){const e=t+i/2-(l+u/2),s=n+r/2-(c+h/2);for(const{line:t,points:n}of gg(YR,this))IP._translate(t,e,s,t),IP._translate(n,e,s,n);return{root:{viewBox:this.viewBox},path:{"transform-origin":"".concat(IP.svgRound(t)," ").concat(IP.svgRound(n)),transform:this.rotationTransform||null,d:this.toSVGPath()}}}const d=(i-2*s)/(u-2*s),p=(r-2*o)/(h-2*o),f=-d*(l+s)+t+s,g=-p*(c+o)+n+o;if(1!==d||1!==p||0!==f||0!==g)for(const{line:m,points:v}of gg(YR,this))IP._rescale(m,f,g,d,p,m),IP._rescale(v,f,g,d,p,v);return{root:{viewBox:this.viewBox},path:{"transform-origin":"".concat(IP.svgRound(t)," ").concat(IP.svgRound(n)),transform:this.rotationTransform||null,d:this.toSVGPath()}}}getPathTranslatedSVGProperties(e,t){let[n,i]=e;const[r,s]=t,o=gg(qR,this),a=n-o[0],l=i-o[1];if(gg(XR,this)===r&&gg(QR,this)===s)for(const{line:c,points:u}of gg(YR,this))IP._translate(c,a,l,c),IP._translate(u,a,l,u);else{const e=gg(XR,this)/r,t=gg(QR,this)/s;mg(XR,this,r),mg(QR,this,s);for(const{line:n,points:i}of gg(YR,this))IP._rescale(n,a,l,e,t,n),IP._rescale(i,a,l,e,t,i);o[2]*=e,o[3]*=t}return o[0]=n,o[1]=i,{root:{viewBox:this.viewBox},path:{d:this.toSVGPath(),"transform-origin":"".concat(IP.svgRound(n)," ").concat(IP.svgRound(i))}}}get defaultSVGProperties(){const e=gg(qR,this);return{root:{viewBox:this.viewBox},rootClass:{draw:!0},path:{d:this.toSVGPath(),"transform-origin":"".concat(IP.svgRound(e[0])," ").concat(IP.svgRound(e[1])),transform:this.rotationTransform||null},bbox:e}}}function nM(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:gg(ZR,this);const t=gg(KR,this)+e/2*gg($R,this);return gg(JR,this)%180===0?[t/gg(XR,this),t/gg(QR,this)]:[t/gg(QR,this),t/gg(XR,this)]}function iM(){const[e,t,n,i]=gg(qR,this),[r,s]=pg(eM,this,nM).call(this,0);return[e+r,t+s,n-2*r,i-2*s]}function rM(){const e=mg(qR,this,new Float32Array([1/0,1/0,-1/0,-1/0]));for(const{line:i}of gg(YR,this)){if(i.length<=12){for(let t=4,n=i.length;t<n;t+=6)Fm.pointBoundingBox(i[t],i[t+1],e);continue}let t=i[4],n=i[5];for(let r=6,s=i.length;r<s;r+=6){const[s,o,a,l,c,u]=i.subarray(r,r+6);Fm.bezierBoundingBox(t,n,s,o,a,l,c,u,e),t=c,n=u}}const[t,n]=pg(eM,this,nM).call(this);e[0]=Vm(e[0]-t,0,1),e[1]=Vm(e[1]-n,0,1),e[2]=Vm(e[2]+t,0,1),e[3]=Vm(e[3]+n,0,1),e[2]-=e[0],e[3]-=e[1]}function sM(e){const[t,n]=pg(eM,this,nM).call(this);mg(ZR,this,e);const[i,r]=pg(eM,this,nM).call(this),[s,o]=[i-t,r-n],a=gg(qR,this);return a[0]-=s,a[1]-=o,a[2]+=2*s,a[3]+=2*o,a}class oM extends hR{constructor(e){super(),this._viewParameters=e,super.updateProperties({fill:"none",stroke:Gw._defaultLineColor,"stroke-opacity":1,"stroke-width":1,"stroke-linecap":"round","stroke-linejoin":"round","stroke-miterlimit":10})}updateSVGProperty(e,t){"stroke-width"===e&&(null!==t&&void 0!==t||(t=this["stroke-width"]),t*=this._viewParameters.realScale),super.updateSVGProperty(e,t)}clone(){const e=new oM(this._viewParameters);return e.updateAll(this),e}}var aM=new WeakSet;class lM extends gR{constructor(e){super(It(It({},e),{},{name:"inkEditor"})),hg(this,aM),this._willKeepAspectRatio=!0,this.defaultL10nId="pdfjs-editor-ink-editor"}static initialize(e,t){Gw.initialize(e,t),this._defaultDrawingOptions=new oM(t.viewParameters)}static getDefaultDrawingOptions(e){const t=this._defaultDrawingOptions.clone();return t.updateProperties(e),t}static get supportMultipleDrawings(){return!0}static get typesMap(){return Cm(this,"typesMap",new Map([[Qg.INK_THICKNESS,"stroke-width"],[Qg.INK_COLOR,"stroke"],[Qg.INK_OPACITY,"stroke-opacity"]]))}static createDrawerInstance(e,t,n,i,r){return new HR(e,t,n,i,r,this._defaultDrawingOptions["stroke-width"])}static deserializeDraw(e,t,n,i,r,s){return tM.deserialize(e,t,n,i,r,s)}static async deserialize(e,t,n){let i=null;if(e instanceof KT){const{data:{inkLists:t,rect:n,rotation:r,id:s,color:o,opacity:a,borderStyle:{rawWidth:l},popupRef:c,richText:u,contentsObj:h,creationDate:d,modificationDate:p},parent:{page:{pageNumber:f}}}=e;i=e={annotationType:Xg.INK,color:Array.from(o),thickness:l,opacity:a,paths:{points:t},boxes:null,pageIndex:f-1,rect:n.slice(0),rotation:r,annotationElementId:s,id:s,deleted:!1,popupRef:c,richText:u,comment:(null===h||void 0===h?void 0:h.str)||null,creationDate:d,modificationDate:p}}const r=await super.deserialize(e,t,n);return r._initialData=i,e.comment&&r.setCommentData(e),r}get toolbarButtons(){return this._colorPicker||(this._colorPicker=new pA(this)),[["colorPicker",this._colorPicker]]}get colorType(){return Qg.INK_COLOR}get color(){return this._drawingOptions.stroke}get opacity(){return this._drawingOptions["stroke-opacity"]}onScaleChanging(){if(!this.parent)return;super.onScaleChanging();const{_drawId:e,_drawingOptions:t,parent:n}=this;t.updateSVGProperty("stroke-width"),n.drawLayer.updateProperties(e,t.toSVGProperties())}static onScaleChangingWhenDrawing(){const e=this._currentParent;e&&(super.onScaleChangingWhenDrawing(),this._defaultDrawingOptions.updateSVGProperty("stroke-width"),e.drawLayer.updateProperties(this._currentDrawId,this._defaultDrawingOptions.toSVGProperties()))}createDrawingOptions(e){let{color:t,thickness:n,opacity:i}=e;this._drawingOptions=lM.getDefaultDrawingOptions({stroke:Fm.makeHexColor(...t),"stroke-width":n,"stroke-opacity":i})}serialize(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const{lines:t,points:n}=this.serializeDraw(e),{_drawingOptions:{stroke:i,"stroke-opacity":r,"stroke-width":s}}=this,o=Object.assign(super.serialize(e),{color:Gw._colorManager.convert(i),opacity:r,thickness:s,paths:{lines:t,points:n}});return this.addComment(o),e?(o.isCopy=!0,o):this.annotationElementId&&!pg(aM,this,cM).call(this,o)?null:(o.id=this.annotationElementId,o)}renderAnnotationElement(e){if(this.deleted)return e.hide(),null;const{points:t,rect:n}=this.serializeDraw(!1);return e.updateEdited({rect:n,thickness:this._drawingOptions["stroke-width"],points:t,popup:this.comment}),null}}function cM(e){const{color:t,thickness:n,opacity:i,pageIndex:r}=this._initialData;return this.hasEditedComment||this._hasBeenMoved||this._hasBeenResized||e.color.some((e,n)=>e!==t[n])||e.thickness!==n||e.opacity!==i||e.pageIndex!==r}Tt(lM,"_type","ink"),Tt(lM,"_editorType",Xg.INK),Tt(lM,"_defaultDrawingOptions",null);class uM extends tM{toSVGPath(){let e=super.toSVGPath();return e.endsWith("Z")||(e+="Z"),e}}class hM{static extractContoursFromText(e,t,n,i,r,s){let{fontFamily:o,fontStyle:a,fontWeight:l}=t,c=new OffscreenCanvas(1,1),u=c.getContext("2d",{alpha:!1});const h=u.font="".concat(a," ").concat(l," ").concat(200,"px ").concat(o),{actualBoundingBoxLeft:d,actualBoundingBoxRight:p,actualBoundingBoxAscent:f,actualBoundingBoxDescent:g,fontBoundingBoxAscent:m,fontBoundingBoxDescent:v,width:y}=u.measureText(e),_=1.5,w=Math.ceil(Math.max(Math.abs(d)+Math.abs(p)||0,y)*_),b=Math.ceil(Math.max(Math.abs(f)+Math.abs(g)||200,Math.abs(m)+Math.abs(v)||200)*_);c=new OffscreenCanvas(w,b),u=c.getContext("2d",{alpha:!0,willReadFrequently:!0}),u.font=h,u.filter="grayscale(1)",u.fillStyle="white",u.fillRect(0,0,w,b),u.fillStyle="black",u.fillText(e,.5*w/2,1.5*b/2);const x=pg(hM,this,wM).call(this,u.getImageData(0,0,w,b).data),k=pg(hM,this,_M).call(this,x),E=pg(hM,this,bM).call(this,k),C=pg(hM,this,gM).call(this,x,w,b,E);return this.processDrawnLines({lines:{curves:C,width:w,height:b},pageWidth:n,pageHeight:i,rotation:r,innerMargin:s,mustSmooth:!0,areContours:!0})}static process(e,t,n,i,r){const[s,o,a]=pg(hM,this,xM).call(this,e),[l,c]=pg(hM,this,yM).call(this,s,o,a,Math.hypot(o,a)*pg(hM,this,kM)._.sigmaSFactor,pg(hM,this,kM)._.sigmaR,pg(hM,this,kM)._.kernelSize),u=pg(hM,this,bM).call(this,c),h=pg(hM,this,gM).call(this,l,o,a,u);return this.processDrawnLines({lines:{curves:h,width:o,height:a},pageWidth:t,pageHeight:n,rotation:i,innerMargin:r,mustSmooth:!0,areContours:!0})}static processDrawnLines(e){var t;let{lines:n,pageWidth:i,pageHeight:r,rotation:s,innerMargin:o,mustSmooth:a,areContours:l}=e;s%180!==0&&([i,r]=[r,i]);const{curves:c,width:u,height:h}=n,d=null!==(t=n.thickness)&&void 0!==t?t:0,p=[],f=Math.min(i/u,r/h),g=f/i,m=f/r,v=[];for(const{points:_}of c){const e=a?pg(hM,this,vM).call(this,_):_;if(!e)continue;v.push(e);const t=e.length,n=new Float32Array(t),i=new Float32Array(3*(2===t?2:t-2));if(p.push({line:i,points:n}),2===t){n[0]=e[0]*g,n[1]=e[1]*m,i.set([NaN,NaN,NaN,NaN,n[0],n[1]],0);continue}let[r,s,o,l]=e;r*=g,s*=m,o*=g,l*=m,n.set([r,s,o,l],0),i.set([NaN,NaN,NaN,NaN,r,s],0);for(let a=4;a<t;a+=2){const t=n[a]=e[a]*g,c=n[a+1]=e[a+1]*m;i.set(IP.createBezierPoints(r,s,o,l,t,c),3*(a-2)),[r,s,o,l]=[o,l,t,c]}}if(0===p.length)return null;const y=l?new uM:new tM;return y.build(p,i,r,1,s,l?0:d,o),{outline:y,newCurves:v,areContours:l,thickness:d,width:u,height:h}}static async compressSignature(e){let t,{outlines:n,areContours:i,thickness:r,width:s,height:o}=e,a=1/0,l=-1/0,c=0;for(const y of n){c+=y.length;for(let e=2,t=y.length;e<t;e++){const t=y[e]-y[e-2];a=Math.min(a,t),l=Math.max(l,t)}}t=a>=-128&&l<=127?Int8Array:a>=-32768&&l<=32767?Int16Array:Int32Array;const u=n.length,h=8+3*u,d=new Uint32Array(h);let p=0;d[p++]=h*Uint32Array.BYTES_PER_ELEMENT+(c-2*u)*t.BYTES_PER_ELEMENT,d[p++]=0,d[p++]=s,d[p++]=o,d[p++]=i?0:1,d[p++]=Math.max(0,Math.floor(null!==r&&void 0!==r?r:0)),d[p++]=u,d[p++]=t.BYTES_PER_ELEMENT;for(const y of n)d[p++]=y.length-2,d[p++]=y[0],d[p++]=y[1];const f=new CompressionStream("deflate-raw"),g=f.writable.getWriter();await g.ready,g.write(d);const m=t.prototype.constructor;for(const y of n){const e=new m(y.length-2);for(let t=2,n=y.length;t<n;t++)e[t-2]=y[t]-y[t-2];g.write(e)}g.close();const v=await new Response(f.readable).arrayBuffer();return qm(new Uint8Array(v))}static async decompressSignature(e){try{const l=(o=e,Uint8Array.fromBase64?Uint8Array.fromBase64(o):Dm(atob(o))),{readable:c,writable:u}=new DecompressionStream("deflate-raw"),h=u.getWriter();await h.ready,h.write(l).then(async()=>{await h.ready,await h.close()}).catch(()=>{});let d=null,p=0;var t,n=!1,i=!1;try{for(var r,s=function(e){var t,n,i,r=2;for("undefined"!=typeof Symbol&&(n=Symbol.asyncIterator,i=Symbol.iterator);r--;){if(n&&null!=(t=e[n]))return t.call(e);if(i&&null!=(t=e[i]))return new vg(t.call(e));n="@@asyncIterator",i="@@iterator"}throw new TypeError("Object is not async iterable")}(c);n=!(r=await s.next()).done;n=!1){const e=r.value;d||(d=new Uint8Array(new Uint32Array(e.buffer,0,4)[0])),d.set(e,p),p+=e.length}}catch(a){i=!0,t=a}finally{try{n&&null!=s.return&&await s.return()}finally{if(i)throw t}}const f=new Uint32Array(d.buffer,0,d.length>>2),g=f[1];if(0!==g)throw new Error("Invalid version: ".concat(g));const m=f[2],v=f[3],y=0===f[4],_=f[5],w=f[6],b=f[7],x=[],k=(8+3*w)*Uint32Array.BYTES_PER_ELEMENT;let E;switch(b){case Int8Array.BYTES_PER_ELEMENT:E=new Int8Array(d.buffer,k);break;case Int16Array.BYTES_PER_ELEMENT:E=new Int16Array(d.buffer,k);break;case Int32Array.BYTES_PER_ELEMENT:E=new Int32Array(d.buffer,k)}p=0;for(let e=0;e<w;e++){const t=f[3*e+8],n=new Float32Array(t+2);x.push(n);for(let i=0;i<2;i++)n[i]=f[3*e+8+i+1];for(let e=0;e<t;e++)n[e+2]=n[e]+E[p++]}return{areContours:y,thickness:_,outlines:x,width:m,height:v}}catch(nz){return wm("decompressSignature: ".concat(nz)),null}var o}}function dM(e,t,n,i){return i-=t,0===(n-=e)?i>0?0:4:1===n?i+6:2-i}function pM(e,t,n,i,r,s,o){const a=pg(Dg,this,dM).call(this,n,i,r,s);for(let l=0;l<8;l++){const r=(-l+a-o+16)%8;if(0!==e[(n+pg(Dg,this,EM)._[2*r])*t+(i+pg(Dg,this,EM)._[2*r+1])])return r}return-1}function fM(e,t,n,i,r,s,o){const a=pg(Dg,this,dM).call(this,n,i,r,s);for(let l=0;l<8;l++){const r=(l+a+o+16)%8;if(0!==e[(n+pg(Dg,this,EM)._[2*r])*t+(i+pg(Dg,this,EM)._[2*r+1])])return r}return-1}function gM(e,t,n,i){const r=e.length,s=new Int32Array(r);for(let c=0;c<r;c++)s[c]=e[c]<=i?1:0;for(let c=1;c<n-1;c++)s[c*t]=s[c*t+t-1]=0;for(let c=0;c<t;c++)s[c]=s[t*n-1-c]=0;let o,a=1;const l=[];for(let c=1;c<n-1;c++){o=1;for(let e=1;e<t-1;e++){const n=c*t+e,i=s[n];if(0===i)continue;let r=c,u=e;if(1===i&&0===s[n-1])a+=1,u-=1;else{if(!(i>=1&&0===s[n+1])){1!==i&&(o=Math.abs(i));continue}a+=1,u+=1,i>1&&(o=i)}const h=[e,c],d=u===e+1,p={isHole:d,points:h,id:a,parent:0};let f;l.push(p);for(const e of l)if(e.id===o){f=e;break}f?f.isHole?p.parent=d?f.parent:o:p.parent=d?o:f.parent:p.parent=d?o:0;const g=pg(Dg,this,pM).call(this,s,t,c,e,r,u,0);if(-1===g){s[n]=-a,1!==s[n]&&(o=Math.abs(s[n]));continue}let m=pg(Dg,this,EM)._[2*g],v=pg(Dg,this,EM)._[2*g+1];const y=c+m,_=e+v;r=y,u=_;let w=c,b=e;for(;;){const i=pg(Dg,this,fM).call(this,s,t,w,b,r,u,1);m=pg(Dg,this,EM)._[2*i],v=pg(Dg,this,EM)._[2*i+1];const l=w+m,d=b+v;h.push(d,l);const p=w*t+b;if(0===s[p+1]?s[p]=-a:1===s[p]&&(s[p]=a),l===c&&d===e&&w===y&&b===_){1!==s[n]&&(o=Math.abs(s[n]));break}r=w,u=b,w=l,b=d}}}return l}function mM(e,t,n,i){if(n-t<=4){for(let r=t;r<n-2;r+=2)i.push(e[r],e[r+1]);return}const r=e[t],s=e[t+1],o=e[n-4]-r,a=e[n-3]-s,l=Math.hypot(o,a),c=o/l,u=a/l,h=c*s-u*r,d=a/o,p=1/l,f=Math.atan(d),g=Math.cos(f),m=Math.sin(f),v=p*(Math.abs(g)+Math.abs(m)),y=p*(1-v+v**2),_=Math.max(Math.atan(Math.abs(m+g)*y),Math.atan(Math.abs(m-g)*y));let w=0,b=t;for(let x=t+2;x<n-2;x+=2){const t=Math.abs(h-c*e[x+1]+u*e[x]);t>w&&(b=x,w=t)}w>(l*_)**2?(pg(Dg,this,mM).call(this,e,t,b+2,i),pg(Dg,this,mM).call(this,e,b,n,i)):i.push(r,s)}function vM(e){const t=[],n=e.length;return pg(Dg,this,mM).call(this,e,0,n,t),t.push(e[n-2],e[n-1]),t.length<=4?null:t}function yM(e,t,n,i,r,s){const o=new Float32Array(s**2),a=-2*i**2,l=s>>1;for(let f=0;f<s;f++){const e=(f-l)**2;for(let t=0;t<s;t++)o[f*s+t]=Math.exp((e+(t-l)**2)/a)}const c=new Float32Array(256),u=-2*r**2;for(let f=0;f<256;f++)c[f]=Math.exp(f**2/u);const h=e.length,d=new Uint8Array(h),p=new Uint32Array(256);for(let f=0;f<n;f++)for(let i=0;i<t;i++){const r=f*t+i,a=e[r];let u=0,h=0;for(let d=0;d<s;d++){const r=f+d-l;if(!(r<0||r>=n))for(let n=0;n<s;n++){const p=i+n-l;if(p<0||p>=t)continue;const f=e[r*t+p],g=o[d*s+n]*c[Math.abs(f-a)];u+=f*g,h+=g}}p[d[r]=Math.round(u/h)]++}return[d,p]}function _M(e){const t=new Uint32Array(256);for(const n of e)t[n]++;return t}function wM(e){const t=e.length,n=new Uint8ClampedArray(t>>2);let i=-1/0,r=1/0;for(let o=0,a=n.length;o<a;o++){const t=n[o]=e[o<<2];i=Math.max(i,t),r=Math.min(r,t)}const s=255/(i-r);for(let o=0,a=n.length;o<a;o++)n[o]=(n[o]-r)*s;return n}function bM(e){let t,n=-1/0,i=-1/0;const r=e.findIndex(e=>0!==e);let s=r,o=r;for(t=r;t<256;t++){const r=e[t];r>n&&(t-s>i&&(i=t-s,o=t-1),n=r,s=t)}for(t=o-1;t>=0&&!(e[t]>e[t+1]);t--);return t}function xM(e){const t=e,{width:n,height:i}=e,{maxDim:r}=pg(Dg,this,kM)._;let s=n,o=i;if(n>r||i>r){let a=n,l=i,c=Math.log2(Math.max(n,i)/r);const u=Math.floor(c);c=c===u?u-1:u;for(let n=0;n<c;n++){s=Math.ceil(a/2),o=Math.ceil(l/2);const n=new OffscreenCanvas(s,o);n.getContext("2d").drawImage(e,0,0,a,l,0,0,s,o),a=s,l=o,e!==t&&e.close(),e=n.transferToImageBitmap()}const h=Math.min(r/s,r/o);s=Math.round(s*h),o=Math.round(o*h)}const a=new OffscreenCanvas(s,o).getContext("2d",{willReadFrequently:!0});a.fillStyle="white",a.fillRect(0,0,s,o),a.filter="grayscale(1)",a.drawImage(e,0,0,e.width,e.height,0,0,s,o);const l=a.getImageData(0,0,s,o).data;return[pg(Dg,this,wM).call(this,l),s,o]}Dg=hM;var kM={_:{maxDim:512,sigmaSFactor:.02,sigmaR:25,kernelSize:16}},EM={_:new Int32Array([0,1,-1,1,-1,0,-1,-1,0,-1,1,-1,1,0,1,1])};class CM extends hR{constructor(){super(),super.updateProperties({fill:Gw._defaultLineColor,"stroke-width":0})}clone(){const e=new CM;return e.updateAll(this),e}}class SM extends oM{constructor(e){super(e),super.updateProperties({stroke:Gw._defaultLineColor,"stroke-width":1})}clone(){const e=new SM(this._viewParameters);return e.updateAll(this),e}}var AM=new WeakMap,TM=new WeakMap,PM=new WeakMap,IM=new WeakMap;class RM extends gR{constructor(e){super(It(It({},e),{},{mustBeCommitted:!0,name:"signatureEditor"})),dg(this,AM,!1),dg(this,TM,null),dg(this,PM,null),dg(this,IM,null),this._willKeepAspectRatio=!0,mg(PM,this,e.signatureData||null),mg(TM,this,null),this.defaultL10nId="pdfjs-editor-signature-editor1"}static initialize(e,t){Gw.initialize(e,t),this._defaultDrawingOptions=new CM,this._defaultDrawnSignatureOptions=new SM(t.viewParameters)}static getDefaultDrawingOptions(e){const t=this._defaultDrawingOptions.clone();return t.updateProperties(e),t}static get supportMultipleDrawings(){return!1}static get typesMap(){return Cm(this,"typesMap",new Map)}static get isDrawer(){return!1}get telemetryFinalData(){return{type:"signature",hasDescription:!!gg(TM,this)}}static computeTelemetryFinalData(e){var t,n;const i=e.get("hasDescription");return{hasAltText:null!==(t=i.get(!0))&&void 0!==t?t:0,hasNoAltText:null!==(n=i.get(!1))&&void 0!==n?n:0}}get isResizable(){return!0}onScaleChanging(){null!==this._drawId&&super.onScaleChanging()}render(){if(this.div)return this.div;let e,t;const{_isCopy:n}=this;if(n&&(this._isCopy=!1,e=this.x,t=this.y),super.render(),null===this._drawId)if(gg(PM,this)){const{lines:e,mustSmooth:t,areContours:n,description:i,uuid:r,heightInPage:s}=gg(PM,this),{rawDims:{pageWidth:o,pageHeight:a},rotation:l}=this.parent.viewport,c=hM.processDrawnLines({lines:e,pageWidth:o,pageHeight:a,rotation:l,innerMargin:RM._INNER_MARGIN,mustSmooth:t,areContours:n});this.addSignature(c,s,i,r)}else this.div.setAttribute("data-l10n-args",JSON.stringify({description:""})),this.div.hidden=!0,this._uiManager.getSignature(this);else this.div.setAttribute("data-l10n-args",JSON.stringify({description:gg(TM,this)||""}));return n&&(this._isCopy=!0,this._moveAfterPaste(e,t)),this.div}setUuid(e){mg(IM,this,e),this.addEditToolbar()}getUuid(){return gg(IM,this)}get description(){return gg(TM,this)}set description(e){mg(TM,this,e),this.div&&(this.div.setAttribute("data-l10n-args",JSON.stringify({description:e})),super.addEditToolbar().then(t=>{null===t||void 0===t||t.updateEditSignatureButton(e)}))}getSignaturePreview(){const{newCurves:e,areContours:t,thickness:n,width:i,height:r}=gg(PM,this),s=Math.max(i,r);return{areContours:t,outline:hM.processDrawnLines({lines:{curves:e.map(e=>({points:e})),thickness:n,width:i,height:r},pageWidth:s,pageHeight:s,rotation:0,innerMargin:0,mustSmooth:!1,areContours:t}).outline}}get toolbarButtons(){return this._uiManager.signatureManager?[["editSignature",this._uiManager.signatureManager]]:super.toolbarButtons}addSignature(e,t,n,i){const{x:r,y:s}=this,{outline:o}=mg(PM,this,e);let a;mg(AM,this,o instanceof uM),this.description=n,gg(AM,this)?a=RM.getDefaultDrawingOptions():(a=RM._defaultDrawnSignatureOptions.clone(),a.updateProperties({"stroke-width":o.thickness})),this._addOutlines({drawOutlines:o,drawingOptions:a});const[,l]=this.pageDimensions;let c=t/l;c=c>=1?.5:c,this.width*=c/this.height,this.width>=1&&(c*=.9/this.width,this.width=.9),this.height=c,this.setDims(),this.x=r,this.y=s,this.center(),this._onResized(),this.onScaleChanging(),this.rotate(),this._uiManager.addToAnnotationStorage(this),this.setUuid(i),this._reportTelemetry({action:"pdfjs.signature.inserted",data:{hasBeenSaved:!!i,hasDescription:!!n}}),this.div.hidden=!1}getFromImage(e){const{rawDims:{pageWidth:t,pageHeight:n},rotation:i}=this.parent.viewport;return hM.process(e,t,n,i,RM._INNER_MARGIN)}getFromText(e,t){const{rawDims:{pageWidth:n,pageHeight:i},rotation:r}=this.parent.viewport;return hM.extractContoursFromText(e,t,n,i,r,RM._INNER_MARGIN)}getDrawnSignature(e){const{rawDims:{pageWidth:t,pageHeight:n},rotation:i}=this.parent.viewport;return hM.processDrawnLines({lines:e,pageWidth:t,pageHeight:n,rotation:i,innerMargin:RM._INNER_MARGIN,mustSmooth:!1,areContours:!1})}createDrawingOptions(e){let{areContours:t,thickness:n}=e;t?this._drawingOptions=RM.getDefaultDrawingOptions():(this._drawingOptions=RM._defaultDrawnSignatureOptions.clone(),this._drawingOptions.updateProperties({"stroke-width":n}))}serialize(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(this.isEmpty())return null;const{lines:t,points:n}=this.serializeDraw(e),{_drawingOptions:{"stroke-width":i}}=this,r=Object.assign(super.serialize(e),{isSignature:!0,areContours:gg(AM,this),color:[0,0,0],thickness:gg(AM,this)?0:i});return this.addComment(r),e?(r.paths={lines:t,points:n},r.uuid=gg(IM,this),r.isCopy=!0):r.lines=t,gg(TM,this)&&(r.accessibilityData={type:"Figure",alt:gg(TM,this)}),r}static deserializeDraw(e,t,n,i,r,s){return s.areContours?uM.deserialize(e,t,n,i,r,s):tM.deserialize(e,t,n,i,r,s)}static async deserialize(e,t,n){var i;const r=await super.deserialize(e,t,n);return mg(AM,r,e.areContours),r.description=(null===(i=e.accessibilityData)||void 0===i?void 0:i.alt)||"",mg(IM,r,e.uuid),r}}Tt(RM,"_type","signature"),Tt(RM,"_editorType",Xg.SIGNATURE),Tt(RM,"_defaultDrawingOptions",null);var MM=new WeakMap,NM=new WeakMap,DM=new WeakMap,OM=new WeakMap,LM=new WeakMap,FM=new WeakMap,jM=new WeakMap,BM=new WeakMap,WM=new WeakMap,UM=new WeakMap,zM=new WeakMap,HM=new WeakSet;class VM extends Gw{constructor(e){super(It(It({},e),{},{name:"stampEditor"})),hg(this,HM),dg(this,MM,null),dg(this,NM,null),dg(this,DM,null),dg(this,OM,null),dg(this,LM,null),dg(this,FM,""),dg(this,jM,null),dg(this,BM,!1),dg(this,WM,null),dg(this,UM,!1),dg(this,zM,!1),mg(OM,this,e.bitmapUrl),mg(LM,this,e.bitmapFile),this.defaultL10nId="pdfjs-editor-stamp-editor"}static initialize(e,t){Gw.initialize(e,t)}static isHandlingMimeForPasting(e){return dv.includes(e)}static paste(e,t){t.pasteEditor({mode:Xg.STAMP},{bitmapFile:e.getAsFile()})}altTextFinish(){this._uiManager.useNewAltTextFlow&&(this.div.hidden=!1),super.altTextFinish()}get telemetryFinalData(){var e;return{type:"stamp",hasAltText:!(null===(e=this.altTextData)||void 0===e||!e.altText)}}static computeTelemetryFinalData(e){var t,n;const i=e.get("hasAltText");return{hasAltText:null!==(t=i.get(!0))&&void 0!==t?t:0,hasNoAltText:null!==(n=i.get(!1))&&void 0!==n?n:0}}async mlGuessAltText(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(this.hasAltTextData())return null;const{mlManager:n}=this._uiManager;if(!n)throw new Error("No ML.");if(!await n.isEnabledFor("altText"))throw new Error("ML isn't enabled for alt text.");const{data:i,width:r,height:s}=e||this.copyCanvas(null,null,!0).imageData,o=await n.guess({name:"altText",request:{data:i,width:r,height:s,channels:i.length/(r*s)}});if(!o)throw new Error("No response from the AI service.");if(o.error)throw new Error("Error from the AI service.");if(o.cancel)return null;if(!o.output)throw new Error("No valid response from the AI service.");const a=o.output;return await this.setGuessedAltText(a),t&&!this.hasAltTextData()&&(this.altTextData={alt:a,decorative:!1}),a}remove(){var e;gg(NM,this)&&(mg(MM,this,null),this._uiManager.imageManager.deleteId(gg(NM,this)),null===(e=gg(jM,this))||void 0===e||e.remove(),mg(jM,this,null),gg(WM,this)&&(clearTimeout(gg(WM,this)),mg(WM,this,null)));super.remove()}rebuild(){this.parent?(super.rebuild(),null!==this.div&&(gg(NM,this)&&null===gg(jM,this)&&pg(HM,this,KM).call(this),this.isAttachedToDOM||this.parent.add(this))):gg(NM,this)&&pg(HM,this,KM).call(this)}onceAdded(e){this._isDraggable=!0,e&&this.div.focus()}isEmpty(){return!(gg(DM,this)||gg(MM,this)||gg(OM,this)||gg(LM,this)||gg(NM,this)||gg(BM,this))}get toolbarButtons(){return[["altText",this.createAltText()]]}get isResizable(){return!0}render(){if(this.div)return this.div;let e,t;return this._isCopy&&(e=this.x,t=this.y),super.render(),this.div.hidden=!0,this.createAltText(),gg(BM,this)||(gg(MM,this)?pg(HM,this,YM).call(this):pg(HM,this,KM).call(this)),this._isCopy&&this._moveAfterPaste(e,t),this._uiManager.addShouldRescale(this),this.div}setCanvas(e,t){const{id:n,bitmap:i}=this._uiManager.imageManager.getFromCanvas(e,t);t.remove(),n&&this._uiManager.imageManager.isValidId(n)&&(mg(NM,this,n),i&&mg(MM,this,i),mg(BM,this,!1),pg(HM,this,YM).call(this))}_onResized(){this.onScaleChanging()}onScaleChanging(){if(!this.parent)return;null!==gg(WM,this)&&clearTimeout(gg(WM,this));mg(WM,this,setTimeout(()=>{mg(WM,this,null),pg(HM,this,QM).call(this)},200))}copyCanvas(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];e||(e=224);const{width:i,height:r}=gg(MM,this),s=new hv;let o=gg(MM,this),a=i,l=r,c=null;if(t){if(i>t||r>t){const e=Math.min(t/i,t/r);a=Math.floor(i*e),l=Math.floor(r*e)}c=document.createElement("canvas");const e=c.width=Math.ceil(a*s.sx),n=c.height=Math.ceil(l*s.sy);gg(UM,this)||(o=pg(HM,this,XM).call(this,e,n));const u=c.getContext("2d");u.filter=this._uiManager.hcmFilter;let h="white",d="#cfcfd8";"none"!==this._uiManager.hcmFilter?d="black":pv.isDarkMode&&(h="#8f8f9d",d="#42414d");const p=15,f=p*s.sx,g=p*s.sy,m=new OffscreenCanvas(2*f,2*g),v=m.getContext("2d");v.fillStyle=h,v.fillRect(0,0,2*f,2*g),v.fillStyle=d,v.fillRect(0,0,f,g),v.fillRect(f,g,f,g),u.fillStyle=u.createPattern(m,"repeat"),u.fillRect(0,0,e,n),u.drawImage(o,0,0,o.width,o.height,0,0,e,n)}let u=null;if(n){let t,n;if(s.symmetric&&o.width<e&&o.height<e)t=o.width,n=o.height;else if(o=gg(MM,this),i>e||r>e){const s=Math.min(e/i,e/r);t=Math.floor(i*s),n=Math.floor(r*s),gg(UM,this)||(o=pg(HM,this,XM).call(this,t,n))}const a=new OffscreenCanvas(t,n).getContext("2d",{willReadFrequently:!0});a.drawImage(o,0,0,o.width,o.height,0,0,t,n),u={width:t,height:n,data:a.getImageData(0,0,t,n).data}}return{canvas:c,width:a,height:l,imageData:u}}static async deserialize(e,t,n){let i=null,r=!1;if(e instanceof ZT){var s;const{data:{rect:o,rotation:a,id:l,structParent:c,popupRef:u,richText:h,contentsObj:d,creationDate:p,modificationDate:f},container:g,parent:{page:{pageNumber:m}},canvas:v}=e;let y,_;v?(delete e.canvas,({id:y,bitmap:_}=n.imageManager.getFromCanvas(g.id,v)),v.remove()):(r=!0,e._hasNoCanvas=!0);const w=(null===(s=await t._structTree.getAriaAttributes("".concat(Hm).concat(l)))||void 0===s?void 0:s.get("aria-label"))||"";i=e={annotationType:Xg.STAMP,bitmapId:y,bitmap:_,pageIndex:m-1,rect:o.slice(0),rotation:a,annotationElementId:l,id:l,deleted:!1,accessibilityData:{decorative:!1,altText:w},isSvg:!1,structParent:c,popupRef:u,richText:h,comment:(null===d||void 0===d?void 0:d.str)||null,creationDate:p,modificationDate:f}}const o=await super.deserialize(e,t,n),{rect:a,bitmap:l,bitmapUrl:c,bitmapId:u,isSvg:h,accessibilityData:d}=e;r?(n.addMissingCanvas(e.id,o),mg(BM,o,!0)):u&&n.imageManager.isValidId(u)?(mg(NM,o,u),l&&mg(MM,o,l)):mg(OM,o,c),mg(UM,o,h);const[p,f]=o.pageDimensions;return o.width=(a[2]-a[0])/p,o.height=(a[3]-a[1])/f,d&&(o.altTextData=d),o._initialData=i,e.comment&&o.setCommentData(e),mg(zM,o,!!i),o}serialize(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const n=Object.assign(super.serialize(e),{bitmapId:gg(NM,this),isSvg:gg(UM,this)});if(this.addComment(n),e)return n.bitmapUrl=pg(HM,this,$M).call(this,!0),n.accessibilityData=this.serializeAltText(!0),n.isCopy=!0,n;const{decorative:i,altText:r}=this.serializeAltText(!1);if(!i&&r&&(n.accessibilityData={type:"Figure",alt:r}),this.annotationElementId){const e=pg(HM,this,JM).call(this,n);if(e.isSame)return null;var s;if(e.isSameAltText)delete n.accessibilityData;else n.accessibilityData.structParent=null!==(s=this._initialData.structParent)&&void 0!==s?s:-1;return n.id=this.annotationElementId,delete n.bitmapId,n}if(null===t)return n;t.stamps||(t.stamps=new Map);const o=gg(UM,this)?(n.rect[2]-n.rect[0])*(n.rect[3]-n.rect[1]):null;if(t.stamps.has(gg(NM,this))){if(gg(UM,this)){const e=t.stamps.get(gg(NM,this));o>e.area&&(e.area=o,e.serialized.bitmap.close(),e.serialized.bitmap=pg(HM,this,$M).call(this,!1))}}else t.stamps.set(gg(NM,this),{area:o,serialized:n}),n.bitmap=pg(HM,this,$M).call(this,!1);return n}renderAnnotationElement(e){return this.deleted?(e.hide(),null):(e.updateEdited({rect:this.getPDFRect(),popup:this.comment}),null)}}function qM(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];e?(mg(MM,this,e.bitmap),t||(mg(NM,this,e.id),mg(UM,this,e.isSvg)),e.file&&mg(FM,this,e.file.name),pg(HM,this,YM).call(this)):this.remove()}function GM(){if(mg(DM,this,null),this._uiManager.enableWaiting(!1),gg(jM,this))if(this._uiManager.useNewAltTextWhenAddingImage&&this._uiManager.useNewAltTextFlow&&gg(MM,this))this.addEditToolbar().then(()=>{this._editToolbar.hide(),this._uiManager.editAltText(this,!0)});else{if(!this._uiManager.useNewAltTextWhenAddingImage&&this._uiManager.useNewAltTextFlow&&gg(MM,this)){this._reportTelemetry({action:"pdfjs.image.image_added",data:{alt_text_modal:!1,alt_text_type:"empty"}});try{this.mlGuessAltText()}catch(e){}}this.div.focus()}}function KM(){if(gg(NM,this))return this._uiManager.enableWaiting(!0),void this._uiManager.imageManager.getFromId(gg(NM,this)).then(e=>pg(HM,this,qM).call(this,e,!0)).finally(()=>pg(HM,this,GM).call(this));if(gg(OM,this)){const e=gg(OM,this);return mg(OM,this,null),this._uiManager.enableWaiting(!0),void mg(DM,this,this._uiManager.imageManager.getFromUrl(e).then(e=>pg(HM,this,qM).call(this,e)).finally(()=>pg(HM,this,GM).call(this)))}if(gg(LM,this)){const e=gg(LM,this);return mg(LM,this,null),this._uiManager.enableWaiting(!0),void mg(DM,this,this._uiManager.imageManager.getFromFile(e).then(e=>pg(HM,this,qM).call(this,e)).finally(()=>pg(HM,this,GM).call(this)))}const e=document.createElement("input");e.type="file",e.accept=dv.join(",");const t=this._uiManager._signal;mg(DM,this,new Promise(n=>{e.addEventListener("change",async()=>{if(e.files&&0!==e.files.length){this._uiManager.enableWaiting(!0);const t=await this._uiManager.imageManager.getFromFile(e.files[0]);this._reportTelemetry({action:"pdfjs.image.image_selected",data:{alt_text_modal:this._uiManager.useNewAltTextFlow}}),pg(HM,this,qM).call(this,t)}else this.remove();n()},{signal:t}),e.addEventListener("cancel",()=>{this.remove(),n()},{signal:t})}).finally(()=>pg(HM,this,GM).call(this))),e.click()}function YM(){var e;const{div:t}=this;let{width:n,height:i}=gg(MM,this);const[r,s]=this.pageDimensions,o=.75;if(this.width)n=this.width*r,i=this.height*s;else if(n>o*r||i>o*s){const e=Math.min(o*r/n,o*s/i);n*=e,i*=e}this._uiManager.enableWaiting(!1);const a=mg(jM,this,document.createElement("canvas"));a.setAttribute("role","img"),this.addContainer(a),this.width=n/r,this.height=i/s,this.setDims(),null!==(e=this._initialOptions)&&void 0!==e&&e.isCentered?this.center():this.fixAndSetPosition(),this._initialOptions=null,this._uiManager.useNewAltTextWhenAddingImage&&this._uiManager.useNewAltTextFlow&&!this.annotationElementId||(t.hidden=!1),pg(HM,this,QM).call(this),gg(zM,this)||(this.parent.addUndoableEditor(this),mg(zM,this,!0)),this._reportTelemetry({action:"inserted_image"}),gg(FM,this)&&this.div.setAttribute("aria-description",gg(FM,this)),this.annotationElementId||this._uiManager.a11yAlert("pdfjs-editor-stamp-added-alert")}function XM(e,t){const{width:n,height:i}=gg(MM,this);let r=n,s=i,o=gg(MM,this);for(;r>2*e||s>2*t;){const n=r,i=s;r>2*e&&(r=r>=16384?Math.floor(r/2)-1:Math.ceil(r/2)),s>2*t&&(s=s>=16384?Math.floor(s/2)-1:Math.ceil(s/2));const a=new OffscreenCanvas(r,s);a.getContext("2d").drawImage(o,0,0,n,i,0,0,r,s),o=a.transferToImageBitmap()}return o}function QM(){const[e,t]=this.parentDimensions,{width:n,height:i}=this,r=new hv,s=Math.ceil(n*e*r.sx),o=Math.ceil(i*t*r.sy),a=gg(jM,this);if(!a||a.width===s&&a.height===o)return;a.width=s,a.height=o;const l=gg(UM,this)?gg(MM,this):pg(HM,this,XM).call(this,s,o),c=a.getContext("2d");c.filter=this._uiManager.hcmFilter,c.drawImage(l,0,0,l.width,l.height,0,0,s,o)}function $M(e){if(e){if(gg(UM,this)){const e=this._uiManager.imageManager.getSvgUrl(gg(NM,this));if(e)return e}const e=document.createElement("canvas");({width:e.width,height:e.height}=gg(MM,this));return e.getContext("2d").drawImage(gg(MM,this),0,0),e.toDataURL()}if(gg(UM,this)){const[e,t]=this.pageDimensions,n=Math.round(this.width*e*Xm.PDF_TO_CSS_UNITS),i=Math.round(this.height*t*Xm.PDF_TO_CSS_UNITS),r=new OffscreenCanvas(n,i);return r.getContext("2d").drawImage(gg(MM,this),0,0,gg(MM,this).width,gg(MM,this).height,0,0,n,i),r.transferToImageBitmap()}return structuredClone(gg(MM,this))}function JM(e){var t;const{pageIndex:n,accessibilityData:{altText:i}}=this._initialData,r=e.pageIndex===n,s=((null===(t=e.accessibilityData)||void 0===t?void 0:t.alt)||"")===i;return{isSame:!this.hasEditedComment&&!this._hasBeenMoved&&!this._hasBeenResized&&r&&s,isSameAltText:s}}Tt(VM,"_type","stamp"),Tt(VM,"_editorType",Xg.STAMP);var ZM=new WeakMap,eN=new WeakMap,tN=new WeakMap,nN=new WeakMap,iN=new WeakMap,rN=new WeakMap,sN=new WeakMap,oN=new WeakMap,aN=new WeakMap,lN=new WeakMap,cN=new WeakMap,uN=new WeakMap,hN=new WeakMap,dN=new WeakMap,pN=new WeakMap,fN=new WeakMap,gN=new WeakSet;class mN{constructor(e){let{uiManager:t,pageIndex:n,div:i,structTreeLayer:r,accessibilityManager:s,annotationLayer:o,drawLayer:a,textLayer:l,viewport:c,l10n:u}=e;hg(this,gN),dg(this,ZM,void 0),dg(this,eN,!1),dg(this,tN,null),dg(this,nN,null),dg(this,iN,null),dg(this,rN,new Map),dg(this,sN,!1),dg(this,oN,!1),dg(this,aN,!1),dg(this,lN,null),dg(this,cN,null),dg(this,uN,null),dg(this,hN,null),dg(this,dN,null),dg(this,pN,-1),dg(this,fN,void 0);const h=[...kN._.values()];if(!mN._initialized){mN._initialized=!0;for(const e of h)e.initialize(u,t)}t.registerEditorTypes(h),mg(fN,this,t),this.pageIndex=n,this.div=i,mg(ZM,this,s),mg(tN,this,o),this.viewport=c,mg(uN,this,l),this.drawLayer=a,this._structTree=r,gg(fN,this).addLayer(this)}get isEmpty(){return 0===gg(rN,this).size}get isInvisible(){return this.isEmpty&&gg(fN,this).getMode()===Xg.NONE}updateToolbar(e){gg(fN,this).updateToolbar(e)}updateMode(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:gg(fN,this).getMode();switch(pg(gN,this,xN).call(this),e){case Xg.NONE:return this.div.classList.toggle("nonEditing",!0),this.disableTextSelection(),this.togglePointerEvents(!1),this.toggleAnnotationLayerPointerEvents(!0),void this.disableClick();case Xg.INK:this.disableTextSelection(),this.togglePointerEvents(!0),this.enableClick();break;case Xg.HIGHLIGHT:this.enableTextSelection(),this.togglePointerEvents(!1),this.disableClick();break;default:this.disableTextSelection(),this.togglePointerEvents(!0),this.enableClick()}this.toggleAnnotationLayerPointerEvents(!1);const{classList:t}=this.div;if(t.toggle("nonEditing",!1),e===Xg.POPUP)t.toggle("commentEditing",!0);else{t.toggle("commentEditing",!1);for(const n of kN._.values())t.toggle("".concat(n._type,"Editing"),e===n._editorType)}this.div.hidden=!1}hasTextLayer(e){var t;return e===(null===(t=gg(uN,this))||void 0===t?void 0:t.div)}setEditingState(e){gg(fN,this).setEditingState(e)}addCommands(e){gg(fN,this).addCommands(e)}cleanUndoStack(e){gg(fN,this).cleanUndoStack(e)}toggleDrawing(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.div.classList.toggle("drawing",!e)}togglePointerEvents(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.div.classList.toggle("disabled",!e)}toggleAnnotationLayerPointerEvents(){var e;let t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];null===(e=gg(tN,this))||void 0===e||e.div.classList.toggle("disabled",!t)}async enable(){var e;mg(aN,this,!0),this.div.tabIndex=0,this.togglePointerEvents(!0),this.div.classList.toggle("nonEditing",!1),null===(e=gg(dN,this))||void 0===e||e.abort(),mg(dN,this,null);const t=new Set;for(const i of fg(gN,this,vN))i.enableEditing(),i.show(!0),i.annotationElementId&&(gg(fN,this).removeChangedExistingAnnotation(i),t.add(i.annotationElementId));const n=gg(tN,this);if(n)for(const i of n.getEditableAnnotations()){if(i.hide(),gg(fN,this).isDeletedAnnotationElement(i.data.id))continue;if(t.has(i.data.id))continue;const e=await this.deserialize(i);e&&(this.addOrRebuild(e),e.enableEditing())}mg(aN,this,!1),gg(fN,this)._eventBus.dispatch("editorsrendered",{source:this,pageNumber:this.pageIndex+1})}disable(){if(mg(oN,this,!0),this.div.tabIndex=-1,this.togglePointerEvents(!1),this.div.classList.toggle("nonEditing",!0),gg(uN,this)&&!gg(dN,this)){mg(dN,this,new AbortController);const e=gg(fN,this).combinedSignal(gg(dN,this));gg(uN,this).div.addEventListener("pointerdown",e=>{const{clientX:t,clientY:n,timeStamp:i}=e;if(i-gg(pN,this)>500)return void mg(pN,this,i);mg(pN,this,-1);const{classList:r}=this.div;r.toggle("getElements",!0);const s=document.elementsFromPoint(t,n);if(r.toggle("getElements",!1),!this.div.contains(s[0]))return;let o;const a=new RegExp("^".concat(Yg,"[0-9]+$"));for(const c of s)if(a.test(c.id)){o=c.id;break}if(!o)return;const l=gg(rN,this).get(o);null===(null===l||void 0===l?void 0:l.annotationElementId)&&(e.stopPropagation(),e.preventDefault(),l.dblclick(e))},{signal:e,capture:!0})}const e=gg(tN,this);if(e){const n=new Map,i=new Map;for(const s of fg(gN,this,vN)){var t;s.disableEditing(),s.annotationElementId?null===s.serialize()?(i.set(s.annotationElementId,s),null===(t=this.getEditableAnnotation(s.annotationElementId))||void 0===t||t.show(),s.remove()):n.set(s.annotationElementId,s):s.updateFakeAnnotationElement(e)}const r=e.getEditableAnnotations();for(const e of r){const{id:t}=e.data;if(gg(fN,this).isDeletedAnnotationElement(t)){e.updateEdited({deleted:!0});continue}let r=i.get(t);r?(r.resetAnnotationElement(e),r.show(!1),e.show()):(r=n.get(t),r&&(gg(fN,this).addChangedExistingAnnotation(r),r.renderAnnotationElement(e)&&r.show(!1)),e.show())}}pg(gN,this,xN).call(this),this.isEmpty&&(this.div.hidden=!0);const{classList:n}=this.div;for(const i of kN._.values())n.remove("".concat(i._type,"Editing"));this.disableTextSelection(),this.toggleAnnotationLayerPointerEvents(!0),mg(oN,this,!1)}getEditableAnnotation(e){var t;return(null===(t=gg(tN,this))||void 0===t?void 0:t.getEditableAnnotation(e))||null}setActiveEditor(e){gg(fN,this).getActive()!==e&&gg(fN,this).setActiveEditor(e)}enableTextSelection(){var e;if(this.div.tabIndex=-1,null!==(e=gg(uN,this))&&void 0!==e&&e.div&&!gg(hN,this)){mg(hN,this,new AbortController);const e=gg(fN,this).combinedSignal(gg(hN,this));gg(uN,this).div.addEventListener("pointerdown",pg(gN,this,yN).bind(this),{signal:e}),gg(uN,this).div.classList.add("highlighting")}}disableTextSelection(){var e;this.div.tabIndex=0,null!==(e=gg(uN,this))&&void 0!==e&&e.div&&gg(hN,this)&&(gg(hN,this).abort(),mg(hN,this,null),gg(uN,this).div.classList.remove("highlighting"))}enableClick(){if(gg(nN,this))return;mg(nN,this,new AbortController);const e=gg(fN,this).combinedSignal(gg(nN,this));this.div.addEventListener("pointerdown",this.pointerdown.bind(this),{signal:e});const t=this.pointerup.bind(this);this.div.addEventListener("pointerup",t,{signal:e}),this.div.addEventListener("pointercancel",t,{signal:e})}disableClick(){var e;null===(e=gg(nN,this))||void 0===e||e.abort(),mg(nN,this,null)}attach(e){gg(rN,this).set(e.id,e);const{annotationElementId:t}=e;t&&gg(fN,this).isDeletedAnnotationElement(t)&&gg(fN,this).removeDeletedAnnotationElement(e)}detach(e){var t;gg(rN,this).delete(e.id),null===(t=gg(ZM,this))||void 0===t||t.removePointerInTextLayer(e.contentDiv),!gg(oN,this)&&e.annotationElementId&&gg(fN,this).addDeletedAnnotationElement(e)}remove(e){this.detach(e),gg(fN,this).removeEditor(e),e.div.remove(),e.isAttachedToDOM=!1}changeParent(e){var t;e.parent!==this&&(e.parent&&e.annotationElementId&&(gg(fN,this).addDeletedAnnotationElement(e.annotationElementId),Gw.deleteAnnotationElement(e),e.annotationElementId=null),this.attach(e),null===(t=e.parent)||void 0===t||t.detach(e),e.setParent(this),e.div&&e.isAttachedToDOM&&(e.div.remove(),this.div.append(e.div)))}add(e){if(e.parent!==this||!e.isAttachedToDOM){if(this.changeParent(e),gg(fN,this).addEditor(e),this.attach(e),!e.isAttachedToDOM){const t=e.render();this.div.append(t),e.isAttachedToDOM=!0}e.fixAndSetPosition(),e.onceAdded(!gg(aN,this)),gg(fN,this).addToAnnotationStorage(e),e._reportTelemetry(e.telemetryInitialData)}}moveEditorInDOM(e){var t;if(!e.isAttachedToDOM)return;const{activeElement:n}=document;e.div.contains(n)&&!gg(iN,this)&&(e._focusEventsAllowed=!1,mg(iN,this,setTimeout(()=>{mg(iN,this,null),e.div.contains(document.activeElement)?e._focusEventsAllowed=!0:(e.div.addEventListener("focusin",()=>{e._focusEventsAllowed=!0},{once:!0,signal:gg(fN,this)._signal}),n.focus())},0))),e._structTreeParentId=null===(t=gg(ZM,this))||void 0===t?void 0:t.moveElementInDOM(this.div,e.div,e.contentDiv,!0)}addOrRebuild(e){e.needsToBeRebuilt()?(e.parent||(e.parent=this),e.rebuild(),e.show()):this.add(e)}addUndoableEditor(e){this.addCommands({cmd:()=>e._uiManager.rebuild(e),undo:()=>{e.remove()},mustExec:!1})}getEditorByUID(e){for(const t of gg(rN,this).values())if(t.uid===e)return t;return null}getNextId(){return gg(fN,this).getId()}combinedSignal(e){return gg(fN,this).combinedSignal(e)}canCreateNewEmptyEditor(){var e;return null===(e=fg(gN,this,_N))||void 0===e?void 0:e.canCreateNewEmptyEditor()}async pasteEditor(e,t){this.updateToolbar(e),await gg(fN,this).updateMode(e.mode);const{offsetX:n,offsetY:i}=pg(gN,this,bN).call(this),r=this.getNextId(),s=pg(gN,this,wN).call(this,It({parent:this,id:r,x:n,y:i,uiManager:gg(fN,this),isCentered:!0},t));s&&this.add(s)}async deserialize(e){var t,n;return await(null===(t=kN._.get(null!==(n=e.annotationType)&&void 0!==n?n:e.annotationEditorType))||void 0===t?void 0:t.deserialize(e,this,gg(fN,this)))||null}createAndAddNewEditor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const i=this.getNextId(),r=pg(gN,this,wN).call(this,It({parent:this,id:i,x:e.offsetX,y:e.offsetY,uiManager:gg(fN,this),isCentered:t},n));return r&&this.add(r),r}get boundingClientRect(){return this.div.getBoundingClientRect()}addNewEditor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.createAndAddNewEditor(pg(gN,this,bN).call(this),!0,e)}setSelected(e){gg(fN,this).setSelected(e)}toggleSelected(e){gg(fN,this).toggleSelected(e)}unselect(e){gg(fN,this).unselect(e)}pointerup(e){var t;const{isMac:n}=Om.platform;if(0!==e.button||e.ctrlKey&&n)return;if(e.target!==this.div)return;if(!gg(sN,this))return;if(mg(sN,this,!1),null!==(t=fg(gN,this,_N))&&void 0!==t&&t.isDrawer&&fg(gN,this,_N).supportMultipleDrawings)return;if(!gg(eN,this))return void mg(eN,this,!0);const i=gg(fN,this).getMode();i!==Xg.STAMP&&i!==Xg.SIGNATURE?this.createAndAddNewEditor(e,!1):gg(fN,this).unselectAll()}pointerdown(e){var t;if(gg(fN,this).getMode()===Xg.HIGHLIGHT&&this.enableTextSelection(),gg(sN,this))return void mg(sN,this,!1);const{isMac:n}=Om.platform;if(0!==e.button||e.ctrlKey&&n)return;if(e.target!==this.div)return;if(mg(sN,this,!0),null!==(t=fg(gN,this,_N))&&void 0!==t&&t.isDrawer)return void this.startDrawingSession(e);const i=gg(fN,this).getActive();mg(eN,this,!i||i.isEmpty())}startDrawingSession(e){if(this.div.focus({preventScroll:!0}),gg(lN,this))return void fg(gN,this,_N).startDrawing(this,gg(fN,this),!1,e);gg(fN,this).setCurrentDrawingSession(this),mg(lN,this,new AbortController);const t=gg(fN,this).combinedSignal(gg(lN,this));this.div.addEventListener("blur",e=>{let{relatedTarget:t}=e;t&&!this.div.contains(t)&&(mg(cN,this,null),this.commitOrRemove())},{signal:t}),fg(gN,this,_N).startDrawing(this,gg(fN,this),!1,e)}pause(e){if(e){const{activeElement:e}=document;return void(this.div.contains(e)&&mg(cN,this,e))}gg(cN,this)&&setTimeout(()=>{var e;null===(e=gg(cN,this))||void 0===e||e.focus(),mg(cN,this,null)},0)}endDrawingSession(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return gg(lN,this)?(gg(fN,this).setCurrentDrawingSession(null),gg(lN,this).abort(),mg(lN,this,null),mg(cN,this,null),fg(gN,this,_N).endDrawing(e)):null}findNewParent(e,t,n){const i=gg(fN,this).findParent(t,n);return null!==i&&i!==this&&(i.changeParent(e),!0)}commitOrRemove(){return!!gg(lN,this)&&(this.endDrawingSession(),!0)}onScaleChanging(){gg(lN,this)&&fg(gN,this,_N).onScaleChangingWhenDrawing(this)}destroy(){var e;this.commitOrRemove(),(null===(e=gg(fN,this).getActive())||void 0===e?void 0:e.parent)===this&&(gg(fN,this).commitOrRemove(),gg(fN,this).setActiveEditor(null)),gg(iN,this)&&(clearTimeout(gg(iN,this)),mg(iN,this,null));for(const n of gg(rN,this).values()){var t;null===(t=gg(ZM,this))||void 0===t||t.removePointerInTextLayer(n.contentDiv),n.setParent(null),n.isAttachedToDOM=!1,n.div.remove()}this.div=null,gg(rN,this).clear(),gg(fN,this).removeLayer(this)}render(e){let{viewport:t}=e;this.viewport=t,uv(this.div,t);for(const n of gg(fN,this).getEditors(this.pageIndex))this.add(n),n.rebuild();this.updateMode()}update(e){let{viewport:t}=e;gg(fN,this).commitOrRemove(),pg(gN,this,xN).call(this);const n=this.viewport.rotation,i=t.rotation;if(this.viewport=t,uv(this.div,{rotation:i}),n!==i)for(const r of gg(rN,this).values())r.rotate(i)}get pageDimensions(){const{pageWidth:e,pageHeight:t}=this.viewport.rawDims;return[e,t]}get scale(){return gg(fN,this).viewParameters.realScale}}function vN(e){return 0!==gg(rN,e).size?gg(rN,e).values():gg(fN,e).getEditors(e.pageIndex)}function yN(e){gg(fN,this).unselectAll();const{target:t}=e;if(t===gg(uN,this).div||("img"===t.getAttribute("role")||t.classList.contains("endOfContent"))&&gg(uN,this).div.contains(t)){const{isMac:t}=Om.platform;if(0!==e.button||e.ctrlKey&&t)return;gg(fN,this).showAllEditors("highlight",!0,!0),gg(uN,this).div.classList.add("free"),this.toggleDrawing(),KI.startHighlighting(this,"ltr"===gg(fN,this).direction,{target:gg(uN,this).div,x:e.x,y:e.y}),gg(uN,this).div.addEventListener("pointerup",()=>{gg(uN,this).div.classList.remove("free"),this.toggleDrawing(!0)},{once:!0,signal:gg(fN,this)._signal}),e.preventDefault()}}function _N(e){return kN._.get(gg(fN,e).getMode())}function wN(e){const t=fg(gN,this,_N);return t?new t.prototype.constructor(e):null}function bN(){const{x:e,y:t,width:n,height:i}=this.boundingClientRect,r=Math.max(0,e),s=Math.max(0,t),o=(r+Math.min(window.innerWidth,e+n))/2-e,a=(s+Math.min(window.innerHeight,t+i))/2-t,[l,c]=this.viewport.rotation%180===0?[o,a]:[a,o];return{offsetX:l,offsetY:c}}function xN(){for(const e of gg(rN,this).values())e.isEmpty()&&e.remove()}Tt(mN,"_initialized",!1);var kN={_:new Map([wP,lM,VM,KI,RM].map(e=>[e._editorType,e]))},EN=new WeakMap,CN=new WeakMap,SN=new WeakMap,AN=new WeakSet;class TN{constructor(e){let{pageIndex:t}=e;hg(this,AN),dg(this,EN,null),dg(this,CN,new Map),dg(this,SN,new Map),this.pageIndex=t}setParent(e){if(gg(EN,this)){if(gg(EN,this)!==e){if(gg(CN,this).size>0)for(const t of gg(CN,this).values())t.remove(),e.append(t);mg(EN,this,e)}}else mg(EN,this,e)}static get _svgFactory(){return Cm(this,"_svgFactory",new _A)}draw(e){var t,n;let i=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const s=(NN._=(t=NN._,n=t++,t),n),o=pg(AN,this,IN).call(this),a=TN._svgFactory.createElement("defs");o.append(a);const l=TN._svgFactory.createElement("path");a.append(l);const c="path_p".concat(this.pageIndex,"_").concat(s);l.setAttribute("id",c),l.setAttribute("vector-effect","non-scaling-stroke"),i&&gg(SN,this).set(s,l);const u=r?pg(AN,this,RN).call(this,a,c):null,h=TN._svgFactory.createElement("use");return o.append(h),h.setAttribute("href","#".concat(c)),this.updateProperties(o,e),gg(CN,this).set(s,o),{id:s,clipPathId:"url(#".concat(u,")")}}drawOutline(e,t){var n,i;const r=(NN._=(n=NN._,i=n++,n),i),s=pg(AN,this,IN).call(this),o=TN._svgFactory.createElement("defs");s.append(o);const a=TN._svgFactory.createElement("path");o.append(a);const l="path_p".concat(this.pageIndex,"_").concat(r);let c;if(a.setAttribute("id",l),a.setAttribute("vector-effect","non-scaling-stroke"),t){const e=TN._svgFactory.createElement("mask");o.append(e),c="mask_p".concat(this.pageIndex,"_").concat(r),e.setAttribute("id",c),e.setAttribute("maskUnits","objectBoundingBox");const t=TN._svgFactory.createElement("rect");e.append(t),t.setAttribute("width","1"),t.setAttribute("height","1"),t.setAttribute("fill","white");const n=TN._svgFactory.createElement("use");e.append(n),n.setAttribute("href","#".concat(l)),n.setAttribute("stroke","none"),n.setAttribute("fill","black"),n.setAttribute("fill-rule","nonzero"),n.classList.add("mask")}const u=TN._svgFactory.createElement("use");s.append(u),u.setAttribute("href","#".concat(l)),c&&u.setAttribute("mask","url(#".concat(c,")"));const h=u.cloneNode();return s.append(h),u.classList.add("mainOutline"),h.classList.add("secondaryOutline"),this.updateProperties(s,e),gg(CN,this).set(r,s),r}finalizeDraw(e,t){gg(SN,this).delete(e),this.updateProperties(e,t)}updateProperties(e,t){if(!t)return;const{root:n,bbox:i,rootClass:r,path:s}=t,o="number"===typeof e?gg(CN,this).get(e):e;if(o){if(n&&pg(AN,this,MN).call(this,o,n),i&&PN.call(TN,o,i),r){const{classList:e}=o;for(const[t,n]of Object.entries(r))e.toggle(t,n)}if(s){const e=o.firstChild.firstChild;pg(AN,this,MN).call(this,e,s)}}}updateParent(e,t){if(t===this)return;const n=gg(CN,this).get(e);n&&(gg(EN,t).append(n),gg(CN,this).delete(e),gg(CN,t).set(e,n))}remove(e){gg(SN,this).delete(e),null!==gg(EN,this)&&(gg(CN,this).get(e).remove(),gg(CN,this).delete(e))}destroy(){mg(EN,this,null);for(const e of gg(CN,this).values())e.remove();gg(CN,this).clear(),gg(SN,this).clear()}}function PN(e,t){let[n,i,r,s]=t;const{style:o}=e;o.top="".concat(100*i,"%"),o.left="".concat(100*n,"%"),o.width="".concat(100*r,"%"),o.height="".concat(100*s,"%")}function IN(){const e=Og._svgFactory.create(1,1,!0);return gg(EN,this).append(e),e.setAttribute("aria-hidden",!0),e}function RN(e,t){const n=Og._svgFactory.createElement("clipPath");e.append(n);const i="clip_".concat(t);n.setAttribute("id",i),n.setAttribute("clipPathUnits","objectBoundingBox");const r=Og._svgFactory.createElement("use");return n.append(r),r.setAttribute("href","#".concat(t)),r.classList.add("clip"),i}function MN(e,t){for(const[n,i]of Object.entries(t))null===i?e.removeAttribute(n):e.setAttribute(n,i)}Og=TN;var NN={_:0};globalThis._pdfjsTestingUtils={HighlightOutliner:vI},globalThis.pdfjsLib={AbortException:Mm,AnnotationEditorLayer:mN,AnnotationEditorParamsType:Qg,AnnotationEditorType:Xg,AnnotationEditorUIManager:r_,AnnotationLayer:hP,AnnotationMode:Kg,AnnotationType:rm,applyOpacity:function(e,t,n,i){const r=255*(1-(i=Math.min(Math.max(null!==i&&void 0!==i?i:1,0),1)));return[e=Math.round(e*i+r),t=Math.round(t*i+r),n=Math.round(n*i+r)]},build:"f56dc8601",ColorPicker:nA,createValidAbsoluteUrl:km,CSSConstants:class{static get commentForegroundColor(){const e=document.createElement("span");e.classList.add("comment","sidebar");const{style:t}=e;t.width=t.height="0",t.display="none",t.color="var(--comment-fg-color)",document.body.append(e);const{color:n}=window.getComputedStyle(e);return e.remove(),Cm(this,"commentForegroundColor",av(n))}},DOMSVGFactory:_A,DrawLayer:TN,FeatureTest:Om,fetchData:Qm,findContrastColor:function(e,t){const n=e[0]+256*e[1]+65536*e[2]+16777216*t[0]+4294967296*t[1]+1099511627776*t[2];let i=yv.get(n);if(i)return i;const r=new Float32Array(9),s=r.subarray(0,3),o=r.subarray(3,6);fv(e,o);const a=r.subarray(6,9);fv(t,a);const l=a[2]<.5,c=l?12:4.5;if(o[2]=l?Math.sqrt(o[2]):1-Math.sqrt(1-o[2]),vv(o,a,s)<c){let e,t;l?(e=o[2],t=1):(e=0,t=o[2]);const n=.005;for(;t-e>n;){const n=o[2]=(e+t)/2;l===vv(o,a,s)<c?e=n:t=n}o[2]=l?t:e}return gv(o,s),i=Fm.makeHexColor(Math.round(255*s[0]),Math.round(255*s[1]),Math.round(255*s[2])),yv.set(n,i),i},getDocument:iS,getFilenameFromUrl:function(e){return[e]=e.split(/[#?]/,1),e.substring(e.lastIndexOf("/")+1)},getPdfFilenameFromUrl:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"document.pdf";if("string"!==typeof e)return t;if(Zm(e))return wm('getPdfFilenameFromUrl: ignore "data:"-URL for performance reasons.'),t;const n=(e=>{try{return new URL(e)}catch(t){try{return new URL(decodeURIComponent(e))}catch(n){try{return new URL(e,"https://foo.bar")}catch(i){try{return new URL(decodeURIComponent(e),"https://foo.bar")}catch(r){return null}}}}})(e);if(!n)return t;const i=e=>{try{let t=decodeURIComponent(e);return t.includes("/")?(t=t.split("/").at(-1),t.test(/^\.pdf$/i)?t:e):t}catch(t){return e}},r=/\.pdf$/i,s=n.pathname.split("/").at(-1);if(r.test(s))return i(s);if(n.searchParams.size>0){const e=Array.from(n.searchParams.values()).reverse();for(const n of e)if(r.test(n))return i(n);const t=Array.from(n.searchParams.keys()).reverse();for(const n of t)if(r.test(n))return i(n)}if(n.hash){const e=/[^/?#=]+\.pdf\b(?!.*\.pdf\b)/i.exec(n.hash);if(e)return i(e[0])}return t},getRGB:av,getUuid:zm,getXfaPageViewport:function(e,t){let{scale:n=1,rotation:i=0}=t;const{width:r,height:s}=e.attributes.style,o=[0,0,parseInt(r),parseInt(s)];return new $m({viewBox:o,userUnit:1,scale:n,rotation:i})},GlobalWorkerOptions:NE,ImageKind:im,InvalidPDFException:Pm,isDataScheme:Zm,isPdfFile:ev,isValidExplicitDest:Nb,MathClamp:Vm,noContextMenu:iv,normalizeUnicode:function(e){return Wm||(Wm=/([\xA0\xB5\u037E\u0EB3\u2000-\u200A\u202F\u2126\uFB00-\uFB04\uFB06\uFB20-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBA1\uFBA4-\uFBA9\uFBAE-\uFBB1\uFBD3-\uFBDC\uFBDE-\uFBE7\uFBEA-\uFBF8\uFBFC\uFBFD\uFC00-\uFC5D\uFC64-\uFCF1\uFCF5-\uFD3D\uFD88\uFDF4\uFDFA\uFDFB\uFE71\uFE77\uFE79\uFE7B\uFE7D]+)|(\uFB05+)/g,Um=new Map([["\ufb05","\u017ft"]])),e.replaceAll(Wm,(e,t,n)=>t?t.normalize("NFKC"):Um.get(n))},OPS:hm,OutputScale:hv,PasswordResponses:{NEED_PASSWORD:1,INCORRECT_PASSWORD:2},PDFDataRangeTransport:hS,PDFDateString:sv,PDFWorker:xS,PermissionFlag:{PRINT:4,MODIFY_CONTENTS:8,COPY:16,MODIFY_ANNOTATIONS:32,FILL_INTERACTIVE_FORMS:256,COPY_FOR_ACCESSIBILITY:512,ASSEMBLE:1024,PRINT_HIGH_QUALITY:2048},PixelsPerInch:Xm,RenderingCancelledException:Jm,renderRichText:_v,ResponseException:Im,setLayerDimensions:uv,shadow:Cm,SignatureExtractor:hM,stopEvent:rv,SupportedImageMimeTypes:dv,TextLayer:VC,TouchManager:gw,updateUrlHash:Em,Util:Fm,VerbosityLevel:um,version:VS,XfaLayer:Km},NE.workerSrc="//unpkg.com/pdfjs-dist@".concat(VS,"/build/pdf.worker.min.mjs");const DN=async(e,t)=>{try{if(!e)throw new Error("No file provided.");const n=URL.createObjectURL(e),i=iS(n),r=await i.promise,s=r.numPages,o=[];for(let e=1;e<=s;e++){const n=await r.getPage(e),i=(await n.getTextContent()).items.map(e=>e.str).join(" ");o.push(i);t&&t(e/s*100)}return URL.revokeObjectURL(n),o}catch(ml){throw console.error("Error extracting text from PDF:",ml),ml}},ON=(0,r.createContext)({activePDFContent:null,setActivePDFContent:()=>{},activePDFTitle:null,setActivePDFTitle:()=>{},activePDFPage:0,setActivePDFPage:()=>{},resetPDF:()=>{},setNewPDF:()=>{},isFileLoading:!1,progress:0,setIsFileLoading:()=>{},setProgress:()=>{},setFileLoadingType:()=>{},fileLoadingType:"...",setRenderingPage:()=>{},renderingPage:1,error:null,setError:()=>{}}),LN=e=>{let{children:t}=e;const{profile:n}=(0,r.useContext)(Bp),[i,s]=(0,r.useState)(null),[o,a]=(0,r.useState)(null),[l,c]=(0,r.useState)(0),[u,h]=(0,r.useState)(!1),[d,p]=(0,r.useState)(0),[f,g]=(0,r.useState)(0),[m,v]=(0,r.useState)("..."),[y,_]=(0,r.useState)(null);(0,r.useEffect)(()=>{if(n)for(const e of n.savedPdfs)e.title===o&&c(e.savedPage)},[n,o]);const w=()=>{s(null),a(null),c(0),g(0),h(!1),v("..."),_(null),p(1);const e=document.getElementById("fileInput");e instanceof HTMLInputElement&&(e.value="")},b=async e=>{if(null!==e)if(_(null),h(!0),v("Extracting text..."),"application/json"===e.type){var t;a(null!==(t=null===e||void 0===e?void 0:e.name.replace(".json",""))&&void 0!==t?t:"Unknown File");const n=JSON.parse(await e.text());s(n),h(!1)}else"application/pdf"===e.type&&DN(e,g).then(t=>{var n;s(t),a(null!==(n=null===e||void 0===e?void 0:e.name.replace(".pdf",""))&&void 0!==n?n:"Unknown File"),h(!1)}).catch(e=>{console.error("Failed to extract text from pdf",e),_(e.message||"Failed to extract text from PDF"),h(!1)});else console.error("setNewPDF was called with a null File.")},x=(0,r.useMemo)(()=>({activePDFContent:i,setActivePDFContent:s,activePDFTitle:o,setActivePDFTitle:a,activePDFPage:l,setActivePDFPage:c,resetPDF:w,setNewPDF:b,isFileLoading:u,progress:f,setIsFileLoading:h,setProgress:g,setFileLoadingType:v,fileLoadingType:m,renderingPage:d,setRenderingPage:p,error:y,setError:_}),[i,o,l,u,f,m,d,y]);return(0,jp.jsx)(ON.Provider,{value:x,children:t})},FN=e=>{let{page:t,index:n,renderingPage:i}=e;return(0,jp.jsxs)("p",{id:"page-"+(n+1),className:n+1>=i?"break-words bg-card text-card-foreground px-4 py-10 shadow-md border border-border max-w-4xl md:px-8 md:py-12":"hide-page",lang:"tr",children:[t,(0,jp.jsx)("span",{"aria-hidden":"true",className:"float-right mt-6 mr-2 text-sm italic",children:n+1},"pageNum-"+n)]},"p"+n)},jN=Yp("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]),BN=Yp("FilePlus2",[["path",{d:"M4 22h14a2 2 0 0 0 2-2V7l-5-5H6a2 2 0 0 0-2 2v4",key:"1pf5j1"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M3 15h6",key:"4e2qda"}],["path",{d:"M6 12v6",key:"1u72j0"}]]),WN=Yp("Save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]]),UN=Yp("FolderOpen",[["path",{d:"m6 14 1.5-2.9A2 2 0 0 1 9.24 10H20a2 2 0 0 1 1.94 2.5l-1.54 6a2 2 0 0 1-1.95 1.5H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h3.9a2 2 0 0 1 1.69.9l.81 1.2a2 2 0 0 0 1.67.9H18a2 2 0 0 1 2 2v2",key:"usdka0"}]]),zN=Yp("Smartphone",[["rect",{width:"14",height:"20",x:"5",y:"2",rx:"2",ry:"2",key:"1yt0o3"}],["path",{d:"M12 18h.01",key:"mhygvu"}]]),HN=Yp("CircleCheck",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);function VN(e,t){let{checkForDefaultPrevented:n=!0}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return function(i){if(null===e||void 0===e||e(i),!1===n||!i.defaultPrevented)return null===t||void 0===t?void 0:t(i)}}const qN=["children"],GN=["scope","children"];function KN(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=[];const i=()=>{const t=n.map(e=>r.createContext(e));return function(n){const i=(null===n||void 0===n?void 0:n[e])||t;return r.useMemo(()=>({["__scope".concat(e)]:It(It({},n),{},{[e]:i})}),[n,i])}};return i.scopeName=e,[function(t,i){const s=r.createContext(i),o=n.length;function a(t){const{scope:n,children:i}=t,a=zp(t,GN),l=(null===n||void 0===n?void 0:n[e][o])||s,c=r.useMemo(()=>a,Object.values(a));return(0,jp.jsx)(l.Provider,{value:c,children:i})}return n=[...n,i],a.displayName=t+"Provider",[a,function(n,a){const l=(null===a||void 0===a?void 0:a[e][o])||s,c=r.useContext(l);if(c)return c;if(void 0!==i)return i;throw new Error("`".concat(n,"` must be used within `").concat(t,"`"))}]},YN(i,...t)]}function YN(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];const i=t[0];if(1===t.length)return i;const s=()=>{const e=t.map(e=>({useScope:e(),scopeName:e.scopeName}));return function(t){const n=e.reduce((e,n)=>{let{useScope:i,scopeName:r}=n;const s=i(t)["__scope".concat(r)];return It(It({},e),s)},{});return r.useMemo(()=>({["__scope".concat(i.scopeName)]:n}),[n])}};return s.scopeName=i.scopeName,s}var XN=Boolean(null===globalThis||void 0===globalThis?void 0:globalThis.document)?r.useLayoutEffect:()=>{},QN=s["useId".toString()]||(()=>{}),$N=0;function JN(e){const[t,n]=r.useState(QN());return XN(()=>{e||n(e=>null!==e&&void 0!==e?e:String($N++))},[e]),e||(t?"radix-".concat(t):"")}function ZN(e){const t=r.useRef(e);return r.useEffect(()=>{t.current=e}),r.useMemo(()=>function(){for(var e,n=arguments.length,i=new Array(n),r=0;r<n;r++)i[r]=arguments[r];return null===(e=t.current)||void 0===e?void 0:e.call(t,...i)},[])}function eD(e){let{prop:t,defaultProp:n,onChange:i=()=>{}}=e;const[s,o]=function(e){let{defaultProp:t,onChange:n}=e;const i=r.useState(t),[s]=i,o=r.useRef(s),a=ZN(n);return r.useEffect(()=>{o.current!==s&&(a(s),o.current=s)},[s,o,a]),i}({defaultProp:n,onChange:i}),a=void 0!==t,l=a?t:s,c=ZN(i);return[l,r.useCallback(e=>{if(a){const n="function"===typeof e?e(t):e;n!==t&&c(n)}else o(e)},[a,t,o,c])]}const tD=["asChild"];var nD=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","span","svg","ul"].reduce((e,t)=>{const n=r.forwardRef((e,n)=>{const{asChild:i}=e,r=zp(e,tD),s=i?ef:t;return"undefined"!==typeof window&&(window[Symbol.for("radix-ui")]=!0),(0,jp.jsx)(s,It(It({},r),{},{ref:n}))});return n.displayName="Primitive.".concat(t),It(It({},e),{},{[t]:n})},{});function iD(e,t){e&&a.flushSync(()=>e.dispatchEvent(t))}const rD=["disableOutsidePointerEvents","onEscapeKeyDown","onPointerDownOutside","onFocusOutside","onInteractOutside","onDismiss"];var sD,oD="dismissableLayer.update",aD="dismissableLayer.pointerDownOutside",lD="dismissableLayer.focusOutside",cD=r.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),uD=r.forwardRef((e,t)=>{var n;const{disableOutsidePointerEvents:i=!1,onEscapeKeyDown:s,onPointerDownOutside:o,onFocusOutside:a,onInteractOutside:l,onDismiss:c}=e,u=zp(e,rD),h=r.useContext(cD),[d,p]=r.useState(null),f=null!==(n=null===d||void 0===d?void 0:d.ownerDocument)&&void 0!==n?n:null===globalThis||void 0===globalThis?void 0:globalThis.document,[,g]=r.useState({}),m=$p(t,e=>p(e)),v=Array.from(h.layers),[y]=[...h.layersWithOutsidePointerEventsDisabled].slice(-1),_=v.indexOf(y),w=d?v.indexOf(d):-1,b=h.layersWithOutsidePointerEventsDisabled.size>0,x=w>=_,k=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null===globalThis||void 0===globalThis?void 0:globalThis.document;const n=ZN(e),i=r.useRef(!1),s=r.useRef(()=>{});return r.useEffect(()=>{const e=e=>{if(e.target&&!i.current){let i=function(){pD(aD,n,r,{discrete:!0})};const r={originalEvent:e};"touch"===e.pointerType?(t.removeEventListener("click",s.current),s.current=i,t.addEventListener("click",s.current,{once:!0})):i()}else t.removeEventListener("click",s.current);i.current=!1},r=window.setTimeout(()=>{t.addEventListener("pointerdown",e)},0);return()=>{window.clearTimeout(r),t.removeEventListener("pointerdown",e),t.removeEventListener("click",s.current)}},[t,n]),{onPointerDownCapture:()=>i.current=!0}}(e=>{const t=e.target,n=[...h.branches].some(e=>e.contains(t));x&&!n&&(null===o||void 0===o||o(e),null===l||void 0===l||l(e),e.defaultPrevented||null===c||void 0===c||c())},f),E=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null===globalThis||void 0===globalThis?void 0:globalThis.document;const n=ZN(e),i=r.useRef(!1);return r.useEffect(()=>{const e=e=>{if(e.target&&!i.current){pD(lD,n,{originalEvent:e},{discrete:!1})}};return t.addEventListener("focusin",e),()=>t.removeEventListener("focusin",e)},[t,n]),{onFocusCapture:()=>i.current=!0,onBlurCapture:()=>i.current=!1}}(e=>{const t=e.target;[...h.branches].some(e=>e.contains(t))||(null===a||void 0===a||a(e),null===l||void 0===l||l(e),e.defaultPrevented||null===c||void 0===c||c())},f);return function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null===globalThis||void 0===globalThis?void 0:globalThis.document;const n=ZN(e);r.useEffect(()=>{const e=e=>{"Escape"===e.key&&n(e)};return t.addEventListener("keydown",e,{capture:!0}),()=>t.removeEventListener("keydown",e,{capture:!0})},[n,t])}(e=>{w===h.layers.size-1&&(null===s||void 0===s||s(e),!e.defaultPrevented&&c&&(e.preventDefault(),c()))},f),r.useEffect(()=>{if(d)return i&&(0===h.layersWithOutsidePointerEventsDisabled.size&&(sD=f.body.style.pointerEvents,f.body.style.pointerEvents="none"),h.layersWithOutsidePointerEventsDisabled.add(d)),h.layers.add(d),dD(),()=>{i&&1===h.layersWithOutsidePointerEventsDisabled.size&&(f.body.style.pointerEvents=sD)}},[d,f,i,h]),r.useEffect(()=>()=>{d&&(h.layers.delete(d),h.layersWithOutsidePointerEventsDisabled.delete(d),dD())},[d,h]),r.useEffect(()=>{const e=()=>g({});return document.addEventListener(oD,e),()=>document.removeEventListener(oD,e)},[]),(0,jp.jsx)(nD.div,It(It({},u),{},{ref:m,style:It({pointerEvents:b?x?"auto":"none":void 0},e.style),onFocusCapture:VN(e.onFocusCapture,E.onFocusCapture),onBlurCapture:VN(e.onBlurCapture,E.onBlurCapture),onPointerDownCapture:VN(e.onPointerDownCapture,k.onPointerDownCapture)}))});uD.displayName="DismissableLayer";var hD=r.forwardRef((e,t)=>{const n=r.useContext(cD),i=r.useRef(null),s=$p(t,i);return r.useEffect(()=>{const e=i.current;if(e)return n.branches.add(e),()=>{n.branches.delete(e)}},[n.branches]),(0,jp.jsx)(nD.div,It(It({},e),{},{ref:s}))});function dD(){const e=new CustomEvent(oD);document.dispatchEvent(e)}function pD(e,t,n,i){let{discrete:r}=i;const s=n.originalEvent.target,o=new CustomEvent(e,{bubbles:!1,cancelable:!0,detail:n});t&&s.addEventListener(e,t,{once:!0}),r?iD(s,o):s.dispatchEvent(o)}hD.displayName="DismissableLayerBranch";var fD=uD,gD=hD;const mD=["loop","trapped","onMountAutoFocus","onUnmountAutoFocus"];var vD="focusScope.autoFocusOnMount",yD="focusScope.autoFocusOnUnmount",_D={bubbles:!1,cancelable:!0},wD=r.forwardRef((e,t)=>{const{loop:n=!1,trapped:i=!1,onMountAutoFocus:s,onUnmountAutoFocus:o}=e,a=zp(e,mD),[l,c]=r.useState(null),u=ZN(s),h=ZN(o),d=r.useRef(null),p=$p(t,e=>c(e)),f=r.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;r.useEffect(()=>{if(i){let e=function(e){if(f.paused||!l)return;const t=e.target;l.contains(t)?d.current=t:ED(d.current,{select:!0})},t=function(e){if(f.paused||!l)return;const t=e.relatedTarget;null!==t&&(l.contains(t)||ED(d.current,{select:!0}))},n=function(e){if(document.activeElement===document.body)for(const t of e)t.removedNodes.length>0&&ED(l)};document.addEventListener("focusin",e),document.addEventListener("focusout",t);const i=new MutationObserver(n);return l&&i.observe(l,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",e),document.removeEventListener("focusout",t),i.disconnect()}}},[i,l,f.paused]),r.useEffect(()=>{if(l){CD.add(f);const t=document.activeElement;if(!l.contains(t)){const n=new CustomEvent(vD,_D);l.addEventListener(vD,u),l.dispatchEvent(n),n.defaultPrevented||(!function(e){let{select:t=!1}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const n=document.activeElement;for(const i of e)if(ED(i,{select:t}),document.activeElement!==n)return}((e=bD(l),e.filter(e=>"A"!==e.tagName)),{select:!0}),document.activeElement===t&&ED(l))}return()=>{l.removeEventListener(vD,u),setTimeout(()=>{const e=new CustomEvent(yD,_D);l.addEventListener(yD,h),l.dispatchEvent(e),e.defaultPrevented||ED(null!==t&&void 0!==t?t:document.body,{select:!0}),l.removeEventListener(yD,h),CD.remove(f)},0)}}var e},[l,u,h,f]);const g=r.useCallback(e=>{if(!n&&!i)return;if(f.paused)return;const t="Tab"===e.key&&!e.altKey&&!e.ctrlKey&&!e.metaKey,r=document.activeElement;if(t&&r){const t=e.currentTarget,[i,s]=function(e){const t=bD(e),n=xD(t,e),i=xD(t.reverse(),e);return[n,i]}(t);i&&s?e.shiftKey||r!==s?e.shiftKey&&r===i&&(e.preventDefault(),n&&ED(s,{select:!0})):(e.preventDefault(),n&&ED(i,{select:!0})):r===t&&e.preventDefault()}},[n,i,f.paused]);return(0,jp.jsx)(nD.div,It(It({tabIndex:-1},a),{},{ref:p,onKeyDown:g}))});function bD(e){const t=[],n=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,{acceptNode:e=>{const t="INPUT"===e.tagName&&"hidden"===e.type;return e.disabled||e.hidden||t?NodeFilter.FILTER_SKIP:e.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)t.push(n.currentNode);return t}function xD(e,t){for(const n of e)if(!kD(n,{upTo:t}))return n}function kD(e,t){let{upTo:n}=t;if("hidden"===getComputedStyle(e).visibility)return!0;for(;e;){if(void 0!==n&&e===n)return!1;if("none"===getComputedStyle(e).display)return!0;e=e.parentElement}return!1}function ED(e){let{select:t=!1}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(e&&e.focus){const n=document.activeElement;e.focus({preventScroll:!0}),e!==n&&function(e){return e instanceof HTMLInputElement&&"select"in e}(e)&&t&&e.select()}}wD.displayName="FocusScope";var CD=function(){let e=[];return{add(t){const n=e[0];t!==n&&(null===n||void 0===n||n.pause()),e=SD(e,t),e.unshift(t)},remove(t){var n;e=SD(e,t),null===(n=e[0])||void 0===n||n.resume()}}}();function SD(e,t){const n=[...e],i=n.indexOf(t);return-1!==i&&n.splice(i,1),n}const AD=["container"];var TD=r.forwardRef((e,t)=>{var n;const{container:i}=e,s=zp(e,AD),[o,l]=r.useState(!1);XN(()=>l(!0),[]);const c=i||o&&(null===globalThis||void 0===globalThis||null===(n=globalThis.document)||void 0===n?void 0:n.body);return c?a.createPortal((0,jp.jsx)(nD.div,It(It({},s),{},{ref:t})),c):null});TD.displayName="Portal";var PD=e=>{const{present:t,children:n}=e,i=function(e){const[t,n]=r.useState(),i=r.useRef({}),s=r.useRef(e),o=r.useRef("none"),l=e?"mounted":"unmounted",[c,u]=function(e,t){return r.useReducer((e,n)=>{const i=t[e][n];return null!==i&&void 0!==i?i:e},e)}(l,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return r.useEffect(()=>{const e=ID(i.current);o.current="mounted"===c?e:"none"},[c]),XN(()=>{const t=i.current,n=s.current;if(n!==e){const i=o.current,r=ID(t);if(e)u("MOUNT");else if("none"===r||"none"===(null===t||void 0===t?void 0:t.display))u("UNMOUNT");else{u(n&&i!==r?"ANIMATION_OUT":"UNMOUNT")}s.current=e}},[e,u]),XN(()=>{if(t){const e=e=>{const n=ID(i.current).includes(e.animationName);e.target===t&&n&&a.flushSync(()=>u("ANIMATION_END"))},n=e=>{e.target===t&&(o.current=ID(i.current))};return t.addEventListener("animationstart",n),t.addEventListener("animationcancel",e),t.addEventListener("animationend",e),()=>{t.removeEventListener("animationstart",n),t.removeEventListener("animationcancel",e),t.removeEventListener("animationend",e)}}u("ANIMATION_END")},[t,u]),{isPresent:["mounted","unmountSuspended"].includes(c),ref:r.useCallback(e=>{e&&(i.current=getComputedStyle(e)),n(e)},[])}}(t),s="function"===typeof n?n({present:i.isPresent}):r.Children.only(n),o=$p(i.ref,function(e){var t,n;let i=null===(t=Object.getOwnPropertyDescriptor(e.props,"ref"))||void 0===t?void 0:t.get,r=i&&"isReactWarning"in i&&i.isReactWarning;if(r)return e.ref;if(i=null===(n=Object.getOwnPropertyDescriptor(e,"ref"))||void 0===n?void 0:n.get,r=i&&"isReactWarning"in i&&i.isReactWarning,r)return e.props.ref;return e.props.ref||e.ref}(s));return"function"===typeof n||i.isPresent?r.cloneElement(s,{ref:o}):null};function ID(e){return(null===e||void 0===e?void 0:e.animationName)||"none"}PD.displayName="Presence";var RD=0;function MD(){r.useEffect(()=>{var e,t;const n=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",null!==(e=n[0])&&void 0!==e?e:ND()),document.body.insertAdjacentElement("beforeend",null!==(t=n[1])&&void 0!==t?t:ND()),RD++,()=>{1===RD&&document.querySelectorAll("[data-radix-focus-guard]").forEach(e=>e.remove()),RD--}},[])}function ND(){const e=document.createElement("span");return e.setAttribute("data-radix-focus-guard",""),e.tabIndex=0,e.style.cssText="outline: none; opacity: 0; position: fixed; pointer-events: none",e}var DD="right-scroll-bar-position",OD="width-before-scroll-bar";function LD(e,t){return"function"===typeof e?e(t):e&&(e.current=t),e}var FD="undefined"!==typeof window?r.useLayoutEffect:r.useEffect,jD=new WeakMap;function BD(e,t){var n=function(e,t){var n=(0,r.useState)(function(){return{value:e,callback:t,facade:{get current(){return n.value},set current(e){var t=n.value;t!==e&&(n.value=e,n.callback(e,t))}}}})[0];return n.callback=t,n.facade}(t||null,function(t){return e.forEach(function(e){return LD(e,t)})});return FD(function(){var t=jD.get(n);if(t){var i=new Set(t),r=new Set(e),s=n.current;i.forEach(function(e){r.has(e)||LD(e,null)}),r.forEach(function(e){i.has(e)||LD(e,s)})}jD.set(n,e)},[e]),n}function WD(e){return e}function UD(e,t){void 0===t&&(t=WD);var n=[],i=!1;return{read:function(){if(i)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return n.length?n[n.length-1]:e},useMedium:function(e){var r=t(e,i);return n.push(r),function(){n=n.filter(function(e){return e!==r})}},assignSyncMedium:function(e){for(i=!0;n.length;){var t=n;n=[],t.forEach(e)}n={push:function(t){return e(t)},filter:function(){return n}}},assignMedium:function(e){i=!0;var t=[];if(n.length){var r=n;n=[],r.forEach(e),t=n}var s=function(){var n=t;t=[],n.forEach(e)},o=function(){return Promise.resolve().then(s)};o(),n={push:function(e){t.push(e),o()},filter:function(e){return t=t.filter(e),n}}}}}var zD=function(e){void 0===e&&(e={});var t=UD(null);return t.options=Rr({async:!0,ssr:!1},e),t}(),HD=function(){},VD=r.forwardRef(function(e,t){var n=r.useRef(null),i=r.useState({onScrollCapture:HD,onWheelCapture:HD,onTouchMoveCapture:HD}),s=i[0],o=i[1],a=e.forwardProps,l=e.children,c=e.className,u=e.removeScrollBar,h=e.enabled,d=e.shards,p=e.sideCar,f=e.noIsolation,g=e.inert,m=e.allowPinchZoom,v=e.as,y=void 0===v?"div":v,_=e.gapMode,w=Mr(e,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noIsolation","inert","allowPinchZoom","as","gapMode"]),b=p,x=BD([n,t]),k=Rr(Rr({},w),s);return r.createElement(r.Fragment,null,h&&r.createElement(b,{sideCar:zD,removeScrollBar:u,shards:d,noIsolation:f,inert:g,setCallbacks:o,allowPinchZoom:!!m,lockRef:n,gapMode:_}),a?r.cloneElement(r.Children.only(l),Rr(Rr({},k),{ref:x})):r.createElement(y,Rr({},k,{className:c,ref:x}),l))});VD.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1},VD.classNames={fullWidth:OD,zeroRight:DD};var qD,GD=function(e){var t=e.sideCar,n=Mr(e,["sideCar"]);if(!t)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var i=t.read();if(!i)throw new Error("Sidecar medium not found");return r.createElement(i,Rr({},n))};GD.isSideCarExport=!0;function KD(){if(!document)return null;var e=document.createElement("style");e.type="text/css";var t=qD||n.nc;return t&&e.setAttribute("nonce",t),e}var YD=function(){var e=0,t=null;return{add:function(n){var i,r;0==e&&(t=KD())&&(r=n,(i=t).styleSheet?i.styleSheet.cssText=r:i.appendChild(document.createTextNode(r)),function(e){(document.head||document.getElementsByTagName("head")[0]).appendChild(e)}(t)),e++},remove:function(){! --e&&t&&(t.parentNode&&t.parentNode.removeChild(t),t=null)}}},XD=function(){var e=function(){var e=YD();return function(t,n){r.useEffect(function(){return e.add(t),function(){e.remove()}},[t&&n])}}();return function(t){var n=t.styles,i=t.dynamic;return e(n,i),null}},QD={left:0,top:0,right:0,gap:0},$D=function(e){return parseInt(e||"",10)||0},JD=function(e){if(void 0===e&&(e="margin"),"undefined"===typeof window)return QD;var t=function(e){var t=window.getComputedStyle(document.body),n=t["padding"===e?"paddingLeft":"marginLeft"],i=t["padding"===e?"paddingTop":"marginTop"],r=t["padding"===e?"paddingRight":"marginRight"];return[$D(n),$D(i),$D(r)]}(e),n=document.documentElement.clientWidth,i=window.innerWidth;return{left:t[0],top:t[1],right:t[2],gap:Math.max(0,i-n+t[2]-t[0])}},ZD=XD(),eO="data-scroll-locked",tO=function(e,t,n,i){var r=e.left,s=e.top,o=e.right,a=e.gap;return void 0===n&&(n="margin"),"\n  .".concat("with-scroll-bars-hidden"," {\n   overflow: hidden ").concat(i,";\n   padding-right: ").concat(a,"px ").concat(i,";\n  }\n  body[").concat(eO,"] {\n    overflow: hidden ").concat(i,";\n    overscroll-behavior: contain;\n    ").concat([t&&"position: relative ".concat(i,";"),"margin"===n&&"\n    padding-left: ".concat(r,"px;\n    padding-top: ").concat(s,"px;\n    padding-right: ").concat(o,"px;\n    margin-left:0;\n    margin-top:0;\n    margin-right: ").concat(a,"px ").concat(i,";\n    "),"padding"===n&&"padding-right: ".concat(a,"px ").concat(i,";")].filter(Boolean).join(""),"\n  }\n  \n  .").concat(DD," {\n    right: ").concat(a,"px ").concat(i,";\n  }\n  \n  .").concat(OD," {\n    margin-right: ").concat(a,"px ").concat(i,";\n  }\n  \n  .").concat(DD," .").concat(DD," {\n    right: 0 ").concat(i,";\n  }\n  \n  .").concat(OD," .").concat(OD," {\n    margin-right: 0 ").concat(i,";\n  }\n  \n  body[").concat(eO,"] {\n    ").concat("--removed-body-scroll-bar-size",": ").concat(a,"px;\n  }\n")},nO=function(){var e=parseInt(document.body.getAttribute(eO)||"0",10);return isFinite(e)?e:0},iO=function(e){var t=e.noRelative,n=e.noImportant,i=e.gapMode,s=void 0===i?"margin":i;r.useEffect(function(){return document.body.setAttribute(eO,(nO()+1).toString()),function(){var e=nO()-1;e<=0?document.body.removeAttribute(eO):document.body.setAttribute(eO,e.toString())}},[]);var o=r.useMemo(function(){return JD(s)},[s]);return r.createElement(ZD,{styles:tO(o,!t,s,n?"":"!important")})},rO=!1;if("undefined"!==typeof window)try{var sO=Object.defineProperty({},"passive",{get:function(){return rO=!0,!0}});window.addEventListener("test",sO,sO),window.removeEventListener("test",sO,sO)}catch(iz){rO=!1}var oO=!!rO&&{passive:!1},aO=function(e,t){var n=window.getComputedStyle(e);return"hidden"!==n[t]&&!(n.overflowY===n.overflowX&&!function(e){return"TEXTAREA"===e.tagName}(e)&&"visible"===n[t])},lO=function(e,t){var n=t.ownerDocument,i=t;do{if("undefined"!==typeof ShadowRoot&&i instanceof ShadowRoot&&(i=i.host),cO(e,i)){var r=uO(e,i);if(r[1]>r[2])return!0}i=i.parentNode}while(i&&i!==n.body);return!1},cO=function(e,t){return"v"===e?function(e){return aO(e,"overflowY")}(t):function(e){return aO(e,"overflowX")}(t)},uO=function(e,t){return"v"===e?[(n=t).scrollTop,n.scrollHeight,n.clientHeight]:function(e){return[e.scrollLeft,e.scrollWidth,e.clientWidth]}(t);var n},hO=function(e){return"changedTouches"in e?[e.changedTouches[0].clientX,e.changedTouches[0].clientY]:[0,0]},dO=function(e){return[e.deltaX,e.deltaY]},pO=function(e){return e&&"current"in e?e.current:e},fO=function(e){return"\n  .block-interactivity-".concat(e," {pointer-events: none;}\n  .allow-interactivity-").concat(e," {pointer-events: all;}\n")},gO=0,mO=[];function vO(e){for(var t=null;null!==e;)e instanceof ShadowRoot&&(t=e.host,e=e.host),e=e.parentNode;return t}const yO=(_O=function(e){var t=r.useRef([]),n=r.useRef([0,0]),i=r.useRef(),s=r.useState(gO++)[0],o=r.useState(XD)[0],a=r.useRef(e);r.useEffect(function(){a.current=e},[e]),r.useEffect(function(){if(e.inert){document.body.classList.add("block-interactivity-".concat(s));var t=Nr([e.lockRef.current],(e.shards||[]).map(pO),!0).filter(Boolean);return t.forEach(function(e){return e.classList.add("allow-interactivity-".concat(s))}),function(){document.body.classList.remove("block-interactivity-".concat(s)),t.forEach(function(e){return e.classList.remove("allow-interactivity-".concat(s))})}}},[e.inert,e.lockRef.current,e.shards]);var l=r.useCallback(function(e,t){if("touches"in e&&2===e.touches.length)return!a.current.allowPinchZoom;var r,s=hO(e),o=n.current,l="deltaX"in e?e.deltaX:o[0]-s[0],c="deltaY"in e?e.deltaY:o[1]-s[1],u=e.target,h=Math.abs(l)>Math.abs(c)?"h":"v";if("touches"in e&&"h"===h&&"range"===u.type)return!1;var d=lO(h,u);if(!d)return!0;if(d?r=h:(r="v"===h?"h":"v",d=lO(h,u)),!d)return!1;if(!i.current&&"changedTouches"in e&&(l||c)&&(i.current=r),!r)return!0;var p=i.current||r;return function(e,t,n,i,r){var s=function(e,t){return"h"===e&&"rtl"===t?-1:1}(e,window.getComputedStyle(t).direction),o=s*i,a=n.target,l=t.contains(a),c=!1,u=o>0,h=0,d=0;do{var p=uO(e,a),f=p[0],g=p[1]-p[2]-s*f;(f||g)&&cO(e,a)&&(h+=g,d+=f),a=a instanceof ShadowRoot?a.host:a.parentNode}while(!l&&a!==document.body||l&&(t.contains(a)||t===a));return(u&&(r&&Math.abs(h)<1||!r&&o>h)||!u&&(r&&Math.abs(d)<1||!r&&-o>d))&&(c=!0),c}(p,t,e,"h"===p?l:c,!0)},[]),c=r.useCallback(function(e){var n=e;if(mO.length&&mO[mO.length-1]===o){var i="deltaY"in n?dO(n):hO(n),r=t.current.filter(function(e){return e.name===n.type&&(e.target===n.target||n.target===e.shadowParent)&&(t=e.delta,r=i,t[0]===r[0]&&t[1]===r[1]);var t,r})[0];if(r&&r.should)n.cancelable&&n.preventDefault();else if(!r){var s=(a.current.shards||[]).map(pO).filter(Boolean).filter(function(e){return e.contains(n.target)});(s.length>0?l(n,s[0]):!a.current.noIsolation)&&n.cancelable&&n.preventDefault()}}},[]),u=r.useCallback(function(e,n,i,r){var s={name:e,delta:n,target:i,should:r,shadowParent:vO(i)};t.current.push(s),setTimeout(function(){t.current=t.current.filter(function(e){return e!==s})},1)},[]),h=r.useCallback(function(e){n.current=hO(e),i.current=void 0},[]),d=r.useCallback(function(t){u(t.type,dO(t),t.target,l(t,e.lockRef.current))},[]),p=r.useCallback(function(t){u(t.type,hO(t),t.target,l(t,e.lockRef.current))},[]);r.useEffect(function(){return mO.push(o),e.setCallbacks({onScrollCapture:d,onWheelCapture:d,onTouchMoveCapture:p}),document.addEventListener("wheel",c,oO),document.addEventListener("touchmove",c,oO),document.addEventListener("touchstart",h,oO),function(){mO=mO.filter(function(e){return e!==o}),document.removeEventListener("wheel",c,oO),document.removeEventListener("touchmove",c,oO),document.removeEventListener("touchstart",h,oO)}},[]);var f=e.removeScrollBar,g=e.inert;return r.createElement(r.Fragment,null,g?r.createElement(o,{styles:fO(s)}):null,f?r.createElement(iO,{gapMode:e.gapMode}):null)},zD.useMedium(_O),GD);var _O,wO=r.forwardRef(function(e,t){return r.createElement(VD,Rr({},e,{ref:t,sideCar:yO}))});wO.classNames=VD.classNames;const bO=wO;var xO=function(e){return"undefined"===typeof document?null:(Array.isArray(e)?e[0]:e).ownerDocument.body},kO=new WeakMap,EO=new WeakMap,CO={},SO=0,AO=function(e){return e&&(e.host||AO(e.parentNode))},TO=function(e,t,n,i){var r=function(e,t){return t.map(function(t){if(e.contains(t))return t;var n=AO(t);return n&&e.contains(n)?n:(console.error("aria-hidden",t,"in not contained inside",e,". Doing nothing"),null)}).filter(function(e){return Boolean(e)})}(t,Array.isArray(e)?e:[e]);CO[n]||(CO[n]=new WeakMap);var s=CO[n],o=[],a=new Set,l=new Set(r),c=function(e){e&&!a.has(e)&&(a.add(e),c(e.parentNode))};r.forEach(c);var u=function(e){e&&!l.has(e)&&Array.prototype.forEach.call(e.children,function(e){if(a.has(e))u(e);else try{var t=e.getAttribute(i),r=null!==t&&"false"!==t,l=(kO.get(e)||0)+1,c=(s.get(e)||0)+1;kO.set(e,l),s.set(e,c),o.push(e),1===l&&r&&EO.set(e,!0),1===c&&e.setAttribute(n,"true"),r||e.setAttribute(i,"true")}catch(nz){console.error("aria-hidden: cannot operate on ",e,nz)}})};return u(t),a.clear(),SO++,function(){o.forEach(function(e){var t=kO.get(e)-1,r=s.get(e)-1;kO.set(e,t),s.set(e,r),t||(EO.has(e)||e.removeAttribute(i),EO.delete(e)),r||e.removeAttribute(n)}),--SO||(kO=new WeakMap,kO=new WeakMap,EO=new WeakMap,CO={})}},PO=function(e,t,n){void 0===n&&(n="data-aria-hidden");var i=Array.from(Array.isArray(e)?e:[e]),r=t||xO(e);return r?(i.push.apply(i,Array.from(r.querySelectorAll("[aria-live]"))),TO(i,r,n,"aria-hidden")):function(){return null}};const IO=["__scopeDialog"],RO=["forceMount"],MO=["__scopeDialog"],NO=["forceMount"],DO=["__scopeDialog","trapFocus","onOpenAutoFocus","onCloseAutoFocus"],OO=["__scopeDialog"],LO=["__scopeDialog"],FO=["__scopeDialog"];var jO="Dialog",[BO,WO]=KN(jO),[UO,zO]=BO(jO),HO=e=>{const{__scopeDialog:t,children:n,open:i,defaultOpen:s,onOpenChange:o,modal:a=!0}=e,l=r.useRef(null),c=r.useRef(null),[u=!1,h]=eD({prop:i,defaultProp:s,onChange:o});return(0,jp.jsx)(UO,{scope:t,triggerRef:l,contentRef:c,contentId:JN(),titleId:JN(),descriptionId:JN(),open:u,onOpenChange:h,onOpenToggle:r.useCallback(()=>h(e=>!e),[h]),modal:a,children:n})};HO.displayName=jO;var VO="DialogTrigger",qO=r.forwardRef((e,t)=>{const{__scopeDialog:n}=e,i=zp(e,IO),r=zO(VO,n),s=$p(t,r.triggerRef);return(0,jp.jsx)(nD.button,It(It({type:"button","aria-haspopup":"dialog","aria-expanded":r.open,"aria-controls":r.contentId,"data-state":uL(r.open)},i),{},{ref:s,onClick:VN(e.onClick,r.onOpenToggle)}))});qO.displayName=VO;var GO="DialogPortal",[KO,YO]=BO(GO,{forceMount:void 0}),XO=e=>{const{__scopeDialog:t,forceMount:n,children:i,container:s}=e,o=zO(GO,t);return(0,jp.jsx)(KO,{scope:t,forceMount:n,children:r.Children.map(i,e=>(0,jp.jsx)(PD,{present:n||o.open,children:(0,jp.jsx)(TD,{asChild:!0,container:s,children:e})}))})};XO.displayName=GO;var QO="DialogOverlay",$O=r.forwardRef((e,t)=>{const n=YO(QO,e.__scopeDialog),{forceMount:i=n.forceMount}=e,r=zp(e,RO),s=zO(QO,e.__scopeDialog);return s.modal?(0,jp.jsx)(PD,{present:i||s.open,children:(0,jp.jsx)(JO,It(It({},r),{},{ref:t}))}):null});$O.displayName=QO;var JO=r.forwardRef((e,t)=>{const{__scopeDialog:n}=e,i=zp(e,MO),r=zO(QO,n);return(0,jp.jsx)(bO,{as:ef,allowPinchZoom:!0,shards:[r.contentRef],children:(0,jp.jsx)(nD.div,It(It({"data-state":uL(r.open)},i),{},{ref:t,style:It({pointerEvents:"auto"},i.style)}))})}),ZO="DialogContent",eL=r.forwardRef((e,t)=>{const n=YO(ZO,e.__scopeDialog),{forceMount:i=n.forceMount}=e,r=zp(e,NO),s=zO(ZO,e.__scopeDialog);return(0,jp.jsx)(PD,{present:i||s.open,children:s.modal?(0,jp.jsx)(tL,It(It({},r),{},{ref:t})):(0,jp.jsx)(nL,It(It({},r),{},{ref:t}))})});eL.displayName=ZO;var tL=r.forwardRef((e,t)=>{const n=zO(ZO,e.__scopeDialog),i=r.useRef(null),s=$p(t,n.contentRef,i);return r.useEffect(()=>{const e=i.current;if(e)return PO(e)},[]),(0,jp.jsx)(iL,It(It({},e),{},{ref:s,trapFocus:n.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:VN(e.onCloseAutoFocus,e=>{var t;e.preventDefault(),null===(t=n.triggerRef.current)||void 0===t||t.focus()}),onPointerDownOutside:VN(e.onPointerDownOutside,e=>{const t=e.detail.originalEvent,n=0===t.button&&!0===t.ctrlKey;(2===t.button||n)&&e.preventDefault()}),onFocusOutside:VN(e.onFocusOutside,e=>e.preventDefault())}))}),nL=r.forwardRef((e,t)=>{const n=zO(ZO,e.__scopeDialog),i=r.useRef(!1),s=r.useRef(!1);return(0,jp.jsx)(iL,It(It({},e),{},{ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:t=>{var r,o;(null===(r=e.onCloseAutoFocus)||void 0===r||r.call(e,t),t.defaultPrevented)||(i.current||null===(o=n.triggerRef.current)||void 0===o||o.focus(),t.preventDefault());i.current=!1,s.current=!1},onInteractOutside:t=>{var r,o;null===(r=e.onInteractOutside)||void 0===r||r.call(e,t),t.defaultPrevented||(i.current=!0,"pointerdown"===t.detail.originalEvent.type&&(s.current=!0));const a=t.target;(null===(o=n.triggerRef.current)||void 0===o?void 0:o.contains(a))&&t.preventDefault(),"focusin"===t.detail.originalEvent.type&&s.current&&t.preventDefault()}}))}),iL=r.forwardRef((e,t)=>{const{__scopeDialog:n,trapFocus:i,onOpenAutoFocus:s,onCloseAutoFocus:o}=e,a=zp(e,DO),l=zO(ZO,n),c=r.useRef(null),u=$p(t,c);return MD(),(0,jp.jsxs)(jp.Fragment,{children:[(0,jp.jsx)(wD,{asChild:!0,loop:!0,trapped:i,onMountAutoFocus:s,onUnmountAutoFocus:o,children:(0,jp.jsx)(uD,It(It({role:"dialog",id:l.contentId,"aria-describedby":l.descriptionId,"aria-labelledby":l.titleId,"data-state":uL(l.open)},a),{},{ref:u,onDismiss:()=>l.onOpenChange(!1)}))}),(0,jp.jsxs)(jp.Fragment,{children:[(0,jp.jsx)(fL,{titleId:l.titleId}),(0,jp.jsx)(gL,{contentRef:c,descriptionId:l.descriptionId})]})]})}),rL="DialogTitle",sL=r.forwardRef((e,t)=>{const{__scopeDialog:n}=e,i=zp(e,OO),r=zO(rL,n);return(0,jp.jsx)(nD.h2,It(It({id:r.titleId},i),{},{ref:t}))});sL.displayName=rL;var oL="DialogDescription",aL=r.forwardRef((e,t)=>{const{__scopeDialog:n}=e,i=zp(e,LO),r=zO(oL,n);return(0,jp.jsx)(nD.p,It(It({id:r.descriptionId},i),{},{ref:t}))});aL.displayName=oL;var lL="DialogClose",cL=r.forwardRef((e,t)=>{const{__scopeDialog:n}=e,i=zp(e,FO),r=zO(lL,n);return(0,jp.jsx)(nD.button,It(It({type:"button"},i),{},{ref:t,onClick:VN(e.onClick,()=>r.onOpenChange(!1))}))});function uL(e){return e?"open":"closed"}cL.displayName=lL;var hL="DialogTitleWarning",[dL,pL]=function(e,t){const n=r.createContext(t);function i(e){const{children:t}=e,i=zp(e,qN),s=r.useMemo(()=>i,Object.values(i));return(0,jp.jsx)(n.Provider,{value:s,children:t})}return i.displayName=e+"Provider",[i,function(i){const s=r.useContext(n);if(s)return s;if(void 0!==t)return t;throw new Error("`".concat(i,"` must be used within `").concat(e,"`"))}]}(hL,{contentName:ZO,titleName:rL,docsSlug:"dialog"}),fL=e=>{let{titleId:t}=e;const n=pL(hL),i="`".concat(n.contentName,"` requires a `").concat(n.titleName,"` for the component to be accessible for screen reader users.\n\nIf you want to hide the `").concat(n.titleName,"`, you can wrap it with our VisuallyHidden component.\n\nFor more information, see https://radix-ui.com/primitives/docs/components/").concat(n.docsSlug);return r.useEffect(()=>{if(t){document.getElementById(t)||console.error(i)}},[i,t]),null},gL=e=>{let{contentRef:t,descriptionId:n}=e;const i=pL("DialogDescriptionWarning"),s="Warning: Missing `Description` or `aria-describedby={undefined}` for {".concat(i.contentName,"}.");return r.useEffect(()=>{var e;const i=null===(e=t.current)||void 0===e?void 0:e.getAttribute("aria-describedby");if(n&&i){document.getElementById(n)||console.warn(s)}},[s,t,n]),null},mL=HO,vL=qO,yL=XO,_L=$O,wL=eL,bL=sL,xL=aL,kL=cL;const EL=Yp("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),CL=["className"],SL=["className","children"],AL=["className"],TL=["className"],PL=["className"],IL=["className"],RL=mL,ML=vL,NL=yL,DL=kL,OL=r.forwardRef((e,t)=>{let{className:n}=e,i=zp(e,CL);return(0,jp.jsx)(_L,It({ref:t,className:tg("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",n)},i))});OL.displayName=_L.displayName;const LL=r.forwardRef((e,t)=>{let{className:n,children:i}=e,r=zp(e,SL);return(0,jp.jsxs)(NL,{children:[(0,jp.jsx)(OL,{}),(0,jp.jsxs)(wL,It(It({ref:t,className:tg("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",n)},r),{},{children:[i,(0,jp.jsxs)(kL,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[(0,jp.jsx)(EL,{className:"w-4 h-4"}),(0,jp.jsx)("span",{className:"sr-only",children:"Close"})]})]}))]})});LL.displayName=wL.displayName;const FL=e=>{let{className:t}=e,n=zp(e,AL);return(0,jp.jsx)("div",It({className:tg("flex flex-col space-y-1.5 text-center sm:text-left",t)},n))};FL.displayName="DialogHeader";const jL=e=>{let{className:t}=e,n=zp(e,TL);return(0,jp.jsx)("div",It({className:tg("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",t)},n))};jL.displayName="DialogFooter";const BL=r.forwardRef((e,t)=>{let{className:n}=e,i=zp(e,PL);return(0,jp.jsx)(bL,It({ref:t,className:tg("text-lg font-semibold leading-none tracking-tight",n)},i))});BL.displayName=bL.displayName;const WL=r.forwardRef((e,t)=>{let{className:n}=e,i=zp(e,IL);return(0,jp.jsx)(xL,It({ref:t,className:tg("text-sm text-muted-foreground",n)},i))});function UL(){return(0,jp.jsxs)(RL,{children:[(0,jp.jsx)(ML,{asChild:!0,children:(0,jp.jsxs)(rg,{variant:"ghost",size:"icon",className:"transition-all duration-200 text-muted-foreground hover:text-foreground",children:[(0,jp.jsx)(jN,{className:"w-5 h-5"}),(0,jp.jsx)("span",{className:"sr-only",children:"How to Use"})]})}),(0,jp.jsxs)(LL,{className:"sm:max-w-[650px] p-0 overflow-hidden bg-background/95 backdrop-blur-xl border-border/50 shadow-2xl",children:[(0,jp.jsxs)(FL,{className:"p-6 pb-2",children:[(0,jp.jsx)(BL,{className:"text-2xl font-bold text-transparent bg-gradient-to-r from-primary to-primary/60 bg-clip-text",children:"Welcome to RPBP"}),(0,jp.jsx)(WL,{className:"text-base text-muted-foreground/80",children:"Follow this quick guide to get the most out of your experience."})]}),(0,jp.jsxs)("div",{className:"grid gap-4 p-6 pt-2 h-[60vh] sm:h-auto overflow-y-auto pr-2",children:[(0,jp.jsxs)("div",{className:"flex items-start gap-4 p-4 transition-all duration-300 border group rounded-xl border-border/40 bg-card/50 hover:bg-muted/30 hover:shadow-sm hover:border-primary/20",children:[(0,jp.jsx)("div",{className:"flex items-center justify-center w-12 h-12 text-blue-500 transition-all duration-300 rounded-full shrink-0 bg-blue-500/10 ring-4 ring-blue-500/5 group-hover:ring-blue-500/10",children:(0,jp.jsx)(BN,{className:"w-6 h-6"})}),(0,jp.jsxs)("div",{className:"space-y-1.5",children:[(0,jp.jsx)("h3",{className:"font-semibold leading-none tracking-tight text-foreground",children:"1. Add PDF"}),(0,jp.jsxs)("p",{className:"text-sm leading-relaxed text-muted-foreground",children:["Use"," ",(0,jp.jsx)("span",{className:"font-medium text-foreground",children:'"Add PDF"'})," ","to upload your documents.",(0,jp.jsx)("br",{}),(0,jp.jsx)("span",{className:"inline-block mt-1 text-xs font-medium text-orange-500/80",children:"Note: Scanned books or images are not supported."})]})]})]}),(0,jp.jsxs)("div",{className:"flex items-start gap-4 p-4 transition-all duration-300 border group rounded-xl border-border/40 bg-card/50 hover:bg-muted/30 hover:shadow-sm hover:border-primary/20",children:[(0,jp.jsx)("div",{className:"flex items-center justify-center w-12 h-12 transition-all duration-300 rounded-full shrink-0 bg-emerald-500/10 text-emerald-500 ring-4 ring-emerald-500/5 group-hover:ring-emerald-500/10",children:(0,jp.jsx)(WN,{className:"w-6 h-6"})}),(0,jp.jsxs)("div",{className:"space-y-1.5",children:[(0,jp.jsx)("h3",{className:"font-semibold leading-none tracking-tight text-foreground",children:"2. Save PDF & Pages"}),(0,jp.jsxs)("p",{className:"text-sm leading-relaxed text-muted-foreground",children:["Use the"," ",(0,jp.jsx)("span",{className:"font-medium text-foreground",children:"upload button"})," ","to save the entire PDF. To save just the current page, use the"," ",(0,jp.jsx)("span",{className:"font-medium text-foreground",children:"save button"})," ","on the bottom bar."]})]})]}),(0,jp.jsxs)("div",{className:"flex items-start gap-4 p-4 transition-all duration-300 border group rounded-xl border-border/40 bg-card/50 hover:bg-muted/30 hover:shadow-sm hover:border-primary/20",children:[(0,jp.jsx)("div",{className:"flex items-center justify-center w-12 h-12 transition-all duration-300 rounded-full shrink-0 bg-violet-500/10 text-violet-500 ring-4 ring-violet-500/5 group-hover:ring-violet-500/10",children:(0,jp.jsx)(UN,{className:"w-6 h-6"})}),(0,jp.jsxs)("div",{className:"space-y-1.5",children:[(0,jp.jsx)("h3",{className:"font-semibold leading-none tracking-tight text-foreground",children:"3. View Saved PDFs"}),(0,jp.jsxs)("p",{className:"text-sm leading-relaxed text-muted-foreground",children:["Access your library by clicking"," ",(0,jp.jsx)("span",{className:"font-medium text-foreground",children:'"Your PDFs"'})," ","on the top bar."]})]})]}),(0,jp.jsx)("div",{className:"w-full h-1 my-2 bg-border/100"}),(0,jp.jsxs)("div",{className:"flex items-start gap-4 p-4 transition-all duration-300 border group rounded-xl border-border/40 bg-card/50 hover:bg-muted/30 hover:shadow-sm hover:border-primary/20",children:[(0,jp.jsx)("div",{className:"flex items-center justify-center w-12 h-12 transition-all duration-300 rounded-full shrink-0 bg-rose-500/10 text-rose-500 ring-4 ring-rose-500/5 group-hover:ring-rose-500/10",children:(0,jp.jsx)(zN,{className:"w-6 h-6"})}),(0,jp.jsxs)("div",{className:"space-y-1.5",children:[(0,jp.jsx)("h3",{className:"font-semibold leading-none tracking-tight text-foreground",children:"Edge Read Aloud (Mobile)"}),(0,jp.jsxs)("p",{className:"text-sm leading-relaxed text-muted-foreground",children:["If reading doesn't start: Open app"," ",(0,jp.jsx)("span",{className:"font-medium text-foreground",children:"without a PDF"}),'. Click "Read Aloud" in browser menu. Refresh if needed until it starts.',(0,jp.jsx)("span",{className:"block mt-1 text-xs opacity-70",children:"Once active, you can open your PDFs."})]})]})]})]}),(0,jp.jsx)(jL,{className:"p-6 pt-2 bg-muted/20",children:(0,jp.jsx)(DL,{asChild:!0,children:(0,jp.jsxs)(rg,{type:"button",className:"w-full sm:w-auto font-semibold shadow-lg shadow-primary/20 transition-all hover:scale-[1.02]",children:[(0,jp.jsx)(HN,{className:"w-4 h-4 mr-2"}),"Got it, let's go!"]})})})]})]})}WL.displayName=xL.displayName;const zL=()=>{const[e,t]=(0,r.useState)([]),{activePDFContent:n,activePDFTitle:i,activePDFPage:s,renderingPage:o}=(0,r.useContext)(ON);(0,r.useEffect)(()=>{t(n?[...n]:[])},[n]);const a=e.length>0?s/e.length*100:0;return(0,jp.jsxs)("div",{className:"flex flex-col items-center w-full mt-8 mb-24",children:[(0,jp.jsx)("div",{className:"fixed top-0 left-0 z-50 h-1 transition-all duration-300 ease-out bg-primary",style:{width:"".concat(a,"%")}}),(0,jp.jsx)("div",{children:i&&(0,jp.jsxs)("h3",{className:"mb-4 text-2xl font-semibold",children:[i&&"".concat(i)," - ",s,"/",e.length," - %",a.toFixed(0)]})}),(0,jp.jsxs)("article",{className:"flex flex-col gap-4 text-justify ",children:[e.length<1&&(0,jp.jsxs)("span",{className:"italic shadow-inner",children:["Add new PDF Please ",(0,jp.jsx)(UL,{})]}),e.map((e,t)=>(0,jp.jsx)(FN,{index:t,page:e,renderingPage:o},"Page"+t))]})]})};var HL=r.createContext(void 0);const VL=["scope","children"];function qL(e){const t=e+"CollectionProvider",[n,i]=KN(t),[s,o]=n(t,{collectionRef:{current:null},itemMap:new Map}),a=e=>{const{scope:t,children:n}=e,i=r.useRef(null),o=r.useRef(new Map).current;return(0,jp.jsx)(s,{scope:t,itemMap:o,collectionRef:i,children:n})};a.displayName=t;const l=e+"CollectionSlot",c=r.forwardRef((e,t)=>{const{scope:n,children:i}=e,r=$p(t,o(l,n).collectionRef);return(0,jp.jsx)(ef,{ref:r,children:i})});c.displayName=l;const u=e+"CollectionItemSlot",h="data-radix-collection-item",d=r.forwardRef((e,t)=>{const{scope:n,children:i}=e,s=zp(e,VL),a=r.useRef(null),l=$p(t,a),c=o(u,n);return r.useEffect(()=>(c.itemMap.set(a,It({ref:a},s)),()=>{c.itemMap.delete(a)})),(0,jp.jsx)(ef,It(It({},{[h]:""}),{},{ref:l,children:i}))});return d.displayName=u,[{Provider:a,Slot:c,ItemSlot:d},function(t){const n=o(e+"CollectionConsumer",t);return r.useCallback(()=>{const e=n.collectionRef.current;if(!e)return[];const t=Array.from(e.querySelectorAll("[".concat(h,"]")));return Array.from(n.itemMap.values()).sort((e,n)=>t.indexOf(e.ref.current)-t.indexOf(n.ref.current))},[n.collectionRef,n.itemMap])},i]}function GL(e){const t=r.useRef({value:e,previous:e});return r.useMemo(()=>(t.current.value!==e&&(t.current.previous=t.current.value,t.current.value=e),t.current.previous),[e])}var KL=r.forwardRef((e,t)=>(0,jp.jsx)(nD.span,It(It({},e),{},{ref:t,style:It({position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal"},e.style)})));KL.displayName="VisuallyHidden";var YL=KL;const XL=["__scopeNavigationMenu","value","onValueChange","defaultValue","delayDuration","skipDelayDuration","orientation","dir"],QL=["__scopeNavigationMenu","value","onValueChange","defaultValue","orientation"],$L=["__scopeNavigationMenu"],JL=["__scopeNavigationMenu","value"],ZL=["__scopeNavigationMenu","disabled"],eF=["__scopeNavigationMenu","active","onSelect"],tF=["forceMount"],nF=["__scopeNavigationMenu"],iF=["forceMount"],rF=["__scopeNavigationMenu","value","triggerRef","focusProxyRef","wasEscapeCloseRef","onRootContentClose","onContentFocusOutside"],sF=["forceMount"],oF=["__scopeNavigationMenu","children"],aF=["ref","forceMount"],lF=["__scopeNavigationMenu"],cF=["__scopeNavigationMenu"];var uF="NavigationMenu",[hF,dF,pF]=qL(uF),[fF,gF,mF]=qL(uF),[vF,yF]=KN(uF,[pF,mF]),[_F,wF]=vF(uF),[bF,xF]=vF(uF),kF=r.forwardRef((e,t)=>{const{__scopeNavigationMenu:n,value:i,onValueChange:s,defaultValue:o,delayDuration:a=200,skipDelayDuration:l=300,orientation:c="horizontal",dir:u}=e,h=zp(e,XL),[d,p]=r.useState(null),f=$p(t,e=>p(e)),g=function(e){const t=r.useContext(HL);return e||t||"ltr"}(u),m=r.useRef(0),v=r.useRef(0),y=r.useRef(0),[_,w]=r.useState(!0),[b="",x]=eD({prop:i,onChange:e=>{const t=l>0;""!==e?(window.clearTimeout(y.current),t&&w(!1)):(window.clearTimeout(y.current),y.current=window.setTimeout(()=>w(!0),l)),null===s||void 0===s||s(e)},defaultProp:o}),k=r.useCallback(()=>{window.clearTimeout(v.current),v.current=window.setTimeout(()=>x(""),150)},[x]),E=r.useCallback(e=>{window.clearTimeout(v.current),x(e)},[x]),C=r.useCallback(e=>{b===e?window.clearTimeout(v.current):m.current=window.setTimeout(()=>{window.clearTimeout(v.current),x(e)},a)},[b,x,a]);return r.useEffect(()=>()=>{window.clearTimeout(m.current),window.clearTimeout(v.current),window.clearTimeout(y.current)},[]),(0,jp.jsx)(SF,{scope:n,isRootMenu:!0,value:b,dir:g,orientation:c,rootNavigationMenu:d,onTriggerEnter:e=>{window.clearTimeout(m.current),_?C(e):E(e)},onTriggerLeave:()=>{window.clearTimeout(m.current),k()},onContentEnter:()=>window.clearTimeout(v.current),onContentLeave:k,onItemSelect:e=>{x(t=>t===e?"":e)},onItemDismiss:()=>x(""),children:(0,jp.jsx)(nD.nav,It(It({"aria-label":"Main","data-orientation":c,dir:g},h),{},{ref:f}))})});kF.displayName=uF;var EF="NavigationMenuSub",CF=r.forwardRef((e,t)=>{const{__scopeNavigationMenu:n,value:i,onValueChange:r,defaultValue:s,orientation:o="horizontal"}=e,a=zp(e,QL),l=wF(EF,n),[c="",u]=eD({prop:i,onChange:r,defaultProp:s});return(0,jp.jsx)(SF,{scope:n,isRootMenu:!1,value:c,dir:l.dir,orientation:o,rootNavigationMenu:l.rootNavigationMenu,onTriggerEnter:e=>u(e),onItemSelect:e=>u(e),onItemDismiss:()=>u(""),children:(0,jp.jsx)(nD.div,It(It({"data-orientation":o},a),{},{ref:t}))})});CF.displayName=EF;var SF=e=>{const{scope:t,isRootMenu:n,rootNavigationMenu:i,dir:s,orientation:o,children:a,value:l,onItemSelect:c,onItemDismiss:u,onTriggerEnter:h,onTriggerLeave:d,onContentEnter:p,onContentLeave:f}=e,[g,m]=r.useState(null),[v,y]=r.useState(new Map),[_,w]=r.useState(null);return(0,jp.jsx)(_F,{scope:t,isRootMenu:n,rootNavigationMenu:i,value:l,previousValue:GL(l),baseId:JN(),dir:s,orientation:o,viewport:g,onViewportChange:m,indicatorTrack:_,onIndicatorTrackChange:w,onTriggerEnter:ZN(h),onTriggerLeave:ZN(d),onContentEnter:ZN(p),onContentLeave:ZN(f),onItemSelect:ZN(c),onItemDismiss:ZN(u),onViewportContentChange:r.useCallback((e,t)=>{y(n=>(n.set(e,t),new Map(n)))},[]),onViewportContentRemove:r.useCallback(e=>{y(t=>t.has(e)?(t.delete(e),new Map(t)):t)},[]),children:(0,jp.jsx)(hF.Provider,{scope:t,children:(0,jp.jsx)(bF,{scope:t,items:v,children:a})})})},AF="NavigationMenuList",TF=r.forwardRef((e,t)=>{const{__scopeNavigationMenu:n}=e,i=zp(e,$L),r=wF(AF,n),s=(0,jp.jsx)(nD.ul,It(It({"data-orientation":r.orientation},i),{},{ref:t}));return(0,jp.jsx)(nD.div,{style:{position:"relative"},ref:r.onIndicatorTrackChange,children:(0,jp.jsx)(hF.Slot,{scope:n,children:r.isRootMenu?(0,jp.jsx)(YF,{asChild:!0,children:s}):s})})});TF.displayName=AF;var PF="NavigationMenuItem",[IF,RF]=vF(PF),MF=r.forwardRef((e,t)=>{const{__scopeNavigationMenu:n,value:i}=e,s=zp(e,JL),o=JN(),a=i||o||"LEGACY_REACT_AUTO_VALUE",l=r.useRef(null),c=r.useRef(null),u=r.useRef(null),h=r.useRef(()=>{}),d=r.useRef(!1),p=r.useCallback(function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"start";if(l.current){h.current();const t=$F(l.current);t.length&&JF("start"===e?t:t.reverse())}},[]),f=r.useCallback(()=>{if(l.current){const e=$F(l.current);e.length&&(h.current=function(e){return e.forEach(e=>{e.dataset.tabindex=e.getAttribute("tabindex")||"",e.setAttribute("tabindex","-1")}),()=>{e.forEach(e=>{const t=e.dataset.tabindex;e.setAttribute("tabindex",t)})}}(e))}},[]);return(0,jp.jsx)(IF,{scope:n,value:a,triggerRef:c,contentRef:l,focusProxyRef:u,wasEscapeCloseRef:d,onEntryKeyDown:p,onFocusProxyEnter:p,onRootContentClose:f,onContentFocusOutside:f,children:(0,jp.jsx)(nD.li,It(It({},s),{},{ref:t}))})});MF.displayName=PF;var NF="NavigationMenuTrigger",DF=r.forwardRef((e,t)=>{const{__scopeNavigationMenu:n,disabled:i}=e,s=zp(e,ZL),o=wF(NF,e.__scopeNavigationMenu),a=RF(NF,e.__scopeNavigationMenu),l=r.useRef(null),c=$p(l,a.triggerRef,t),u=tj(o.baseId,a.value),h=nj(o.baseId,a.value),d=r.useRef(!1),p=r.useRef(!1),f=a.value===o.value;return(0,jp.jsxs)(jp.Fragment,{children:[(0,jp.jsx)(hF.ItemSlot,{scope:n,value:a.value,children:(0,jp.jsx)(QF,{asChild:!0,children:(0,jp.jsx)(nD.button,It(It({id:u,disabled:i,"data-disabled":i?"":void 0,"data-state":ej(f),"aria-expanded":f,"aria-controls":h},s),{},{ref:c,onPointerEnter:VN(e.onPointerEnter,()=>{p.current=!1,a.wasEscapeCloseRef.current=!1}),onPointerMove:VN(e.onPointerMove,ij(()=>{i||p.current||a.wasEscapeCloseRef.current||d.current||(o.onTriggerEnter(a.value),d.current=!0)})),onPointerLeave:VN(e.onPointerLeave,ij(()=>{i||(o.onTriggerLeave(),d.current=!1)})),onClick:VN(e.onClick,()=>{o.onItemSelect(a.value),p.current=f}),onKeyDown:VN(e.onKeyDown,e=>{const t={horizontal:"ArrowDown",vertical:"rtl"===o.dir?"ArrowLeft":"ArrowRight"}[o.orientation];f&&e.key===t&&(a.onEntryKeyDown(),e.preventDefault())})}))})}),f&&(0,jp.jsxs)(jp.Fragment,{children:[(0,jp.jsx)(YL,{"aria-hidden":!0,tabIndex:0,ref:a.focusProxyRef,onFocus:e=>{const t=a.contentRef.current,n=e.relatedTarget,i=n===l.current,r=null===t||void 0===t?void 0:t.contains(n);!i&&r||a.onFocusProxyEnter(i?"start":"end")}}),o.viewport&&(0,jp.jsx)("span",{"aria-owns":h})]})]})});DF.displayName=NF;var OF="navigationMenu.linkSelect",LF=r.forwardRef((e,t)=>{const{__scopeNavigationMenu:n,active:i,onSelect:r}=e,s=zp(e,eF);return(0,jp.jsx)(QF,{asChild:!0,children:(0,jp.jsx)(nD.a,It(It({"data-active":i?"":void 0,"aria-current":i?"page":void 0},s),{},{ref:t,onClick:VN(e.onClick,e=>{const t=e.target,n=new CustomEvent(OF,{bubbles:!0,cancelable:!0});if(t.addEventListener(OF,e=>null===r||void 0===r?void 0:r(e),{once:!0}),iD(t,n),!n.defaultPrevented&&!e.metaKey){iD(t,new CustomEvent(HF,{bubbles:!0,cancelable:!0}))}},{checkForDefaultPrevented:!1})}))})});LF.displayName="NavigationMenuLink";var FF="NavigationMenuIndicator",jF=r.forwardRef((e,t)=>{const{forceMount:n}=e,i=zp(e,tF),r=wF(FF,e.__scopeNavigationMenu),s=Boolean(r.value);return r.indicatorTrack?a.createPortal((0,jp.jsx)(PD,{present:n||s,children:(0,jp.jsx)(BF,It(It({},i),{},{ref:t}))}),r.indicatorTrack):null});jF.displayName=FF;var BF=r.forwardRef((e,t)=>{const{__scopeNavigationMenu:n}=e,i=zp(e,nF),s=wF(FF,n),o=dF(n),[a,l]=r.useState(null),[c,u]=r.useState(null),h="horizontal"===s.orientation,d=Boolean(s.value);r.useEffect(()=>{var e;const t=null===(e=o().find(e=>e.value===s.value))||void 0===e?void 0:e.ref.current;t&&l(t)},[o,s.value]);const p=()=>{a&&u({size:h?a.offsetWidth:a.offsetHeight,offset:h?a.offsetLeft:a.offsetTop})};return ZF(a,p),ZF(s.indicatorTrack,p),c?(0,jp.jsx)(nD.div,It(It({"aria-hidden":!0,"data-state":d?"visible":"hidden","data-orientation":s.orientation},i),{},{ref:t,style:It(It({position:"absolute"},h?{left:0,width:c.size+"px",transform:"translateX(".concat(c.offset,"px)")}:{top:0,height:c.size+"px",transform:"translateY(".concat(c.offset,"px)")}),i.style)})):null}),WF="NavigationMenuContent",UF=r.forwardRef((e,t)=>{const{forceMount:n}=e,i=zp(e,iF),r=wF(WF,e.__scopeNavigationMenu),s=RF(WF,e.__scopeNavigationMenu),o=$p(s.contentRef,t),a=s.value===r.value,l=It({value:s.value,triggerRef:s.triggerRef,focusProxyRef:s.focusProxyRef,wasEscapeCloseRef:s.wasEscapeCloseRef,onContentFocusOutside:s.onContentFocusOutside,onRootContentClose:s.onRootContentClose},i);return r.viewport?(0,jp.jsx)(zF,It(It({forceMount:n},l),{},{ref:o})):(0,jp.jsx)(PD,{present:n||a,children:(0,jp.jsx)(VF,It(It({"data-state":ej(a)},l),{},{ref:o,onPointerEnter:VN(e.onPointerEnter,r.onContentEnter),onPointerLeave:VN(e.onPointerLeave,ij(r.onContentLeave)),style:It({pointerEvents:!a&&r.isRootMenu?"none":void 0},l.style)}))})});UF.displayName=WF;var zF=r.forwardRef((e,t)=>{const n=wF(WF,e.__scopeNavigationMenu),{onViewportContentChange:i,onViewportContentRemove:r}=n;return XN(()=>{i(e.value,It({ref:t},e))},[e,t,i]),XN(()=>()=>r(e.value),[e.value,r]),null}),HF="navigationMenu.rootContentDismiss",VF=r.forwardRef((e,t)=>{const{__scopeNavigationMenu:n,value:i,triggerRef:s,focusProxyRef:o,wasEscapeCloseRef:a,onRootContentClose:l,onContentFocusOutside:c}=e,u=zp(e,rF),h=wF(WF,n),d=r.useRef(null),p=$p(d,t),f=tj(h.baseId,i),g=nj(h.baseId,i),m=dF(n),v=r.useRef(null),{onItemDismiss:y}=h;r.useEffect(()=>{const e=d.current;if(h.isRootMenu&&e){const t=()=>{var t;y(),l(),e.contains(document.activeElement)&&(null===(t=s.current)||void 0===t||t.focus())};return e.addEventListener(HF,t),()=>e.removeEventListener(HF,t)}},[h.isRootMenu,e.value,s,y,l]);const _=r.useMemo(()=>{const e=m().map(e=>e.value);"rtl"===h.dir&&e.reverse();const t=e.indexOf(h.value),n=e.indexOf(h.previousValue),r=i===h.value,s=n===e.indexOf(i);if(!r&&!s)return v.current;const o=(()=>{if(t!==n){if(r&&-1!==n)return t>n?"from-end":"from-start";if(s&&-1!==t)return t>n?"to-start":"to-end"}return null})();return v.current=o,o},[h.previousValue,h.value,h.dir,m,i]);return(0,jp.jsx)(YF,{asChild:!0,children:(0,jp.jsx)(uD,It(It({id:g,"aria-labelledby":f,"data-motion":_,"data-orientation":h.orientation},u),{},{ref:p,disableOutsidePointerEvents:!1,onDismiss:()=>{var e;const t=new Event(HF,{bubbles:!0,cancelable:!0});null===(e=d.current)||void 0===e||e.dispatchEvent(t)},onFocusOutside:VN(e.onFocusOutside,e=>{var t;c();const n=e.target;null!==(t=h.rootNavigationMenu)&&void 0!==t&&t.contains(n)&&e.preventDefault()}),onPointerDownOutside:VN(e.onPointerDownOutside,e=>{var t;const n=e.target,i=m().some(e=>{var t;return null===(t=e.ref.current)||void 0===t?void 0:t.contains(n)}),r=h.isRootMenu&&(null===(t=h.viewport)||void 0===t?void 0:t.contains(n));(i||r||!h.isRootMenu)&&e.preventDefault()}),onKeyDown:VN(e.onKeyDown,e=>{const t=e.altKey||e.ctrlKey||e.metaKey;if("Tab"===e.key&&!t){const t=$F(e.currentTarget),i=document.activeElement,r=t.findIndex(e=>e===i);var n;if(JF(e.shiftKey?t.slice(0,r).reverse():t.slice(r+1,t.length)))e.preventDefault();else null===(n=o.current)||void 0===n||n.focus()}}),onEscapeKeyDown:VN(e.onEscapeKeyDown,e=>{a.current=!0})}))})}),qF="NavigationMenuViewport",GF=r.forwardRef((e,t)=>{const{forceMount:n}=e,i=zp(e,sF),r=wF(qF,e.__scopeNavigationMenu),s=Boolean(r.value);return(0,jp.jsx)(PD,{present:n||s,children:(0,jp.jsx)(KF,It(It({},i),{},{ref:t}))})});GF.displayName=qF;var KF=r.forwardRef((e,t)=>{const{__scopeNavigationMenu:n,children:i}=e,s=zp(e,oF),o=wF(qF,n),a=$p(t,o.onViewportChange),l=xF(WF,e.__scopeNavigationMenu),[c,u]=r.useState(null),[h,d]=r.useState(null),p=c?(null===c||void 0===c?void 0:c.width)+"px":void 0,f=c?(null===c||void 0===c?void 0:c.height)+"px":void 0,g=Boolean(o.value),m=g?o.value:o.previousValue;return ZF(h,()=>{h&&u({width:h.offsetWidth,height:h.offsetHeight})}),(0,jp.jsx)(nD.div,It(It({"data-state":ej(g),"data-orientation":o.orientation},s),{},{ref:a,style:It({pointerEvents:!g&&o.isRootMenu?"none":void 0,"--radix-navigation-menu-viewport-width":p,"--radix-navigation-menu-viewport-height":f},s.style),onPointerEnter:VN(e.onPointerEnter,o.onContentEnter),onPointerLeave:VN(e.onPointerLeave,ij(o.onContentLeave)),children:Array.from(l.items).map(e=>{let[t,n]=e,{ref:i,forceMount:r}=n,s=zp(n,aF);const o=m===t;return(0,jp.jsx)(PD,{present:r||o,children:(0,jp.jsx)(VF,It(It({},s),{},{ref:Qp(i,e=>{o&&e&&d(e)})}))},t)})}))}),YF=r.forwardRef((e,t)=>{const{__scopeNavigationMenu:n}=e,i=zp(e,lF),r=wF("FocusGroup",n);return(0,jp.jsx)(fF.Provider,{scope:n,children:(0,jp.jsx)(fF.Slot,{scope:n,children:(0,jp.jsx)(nD.div,It(It({dir:r.dir},i),{},{ref:t}))})})}),XF=["ArrowRight","ArrowLeft","ArrowUp","ArrowDown"],QF=r.forwardRef((e,t)=>{const{__scopeNavigationMenu:n}=e,i=zp(e,cF),r=gF(n),s=wF("FocusGroupItem",n);return(0,jp.jsx)(fF.ItemSlot,{scope:n,children:(0,jp.jsx)(nD.button,It(It({},i),{},{ref:t,onKeyDown:VN(e.onKeyDown,e=>{if(["Home","End",...XF].includes(e.key)){let t=r().map(e=>e.ref.current);if(["rtl"===s.dir?"ArrowRight":"ArrowLeft","ArrowUp","End"].includes(e.key)&&t.reverse(),XF.includes(e.key)){const n=t.indexOf(e.currentTarget);t=t.slice(n+1)}setTimeout(()=>JF(t)),e.preventDefault()}})}))})});function $F(e){const t=[],n=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,{acceptNode:e=>{const t="INPUT"===e.tagName&&"hidden"===e.type;return e.disabled||e.hidden||t?NodeFilter.FILTER_SKIP:e.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)t.push(n.currentNode);return t}function JF(e){const t=document.activeElement;return e.some(e=>e===t||(e.focus(),document.activeElement!==t))}function ZF(e,t){const n=ZN(t);XN(()=>{let t=0;if(e){const i=new ResizeObserver(()=>{cancelAnimationFrame(t),t=window.requestAnimationFrame(n)});return i.observe(e),()=>{window.cancelAnimationFrame(t),i.unobserve(e)}}},[e,n])}function ej(e){return e?"open":"closed"}function tj(e,t){return"".concat(e,"-trigger-").concat(t)}function nj(e,t){return"".concat(e,"-content-").concat(t)}function ij(e){return t=>"mouse"===t.pointerType?e(t):void 0}var rj=kF,sj=TF,oj=MF,aj=DF,lj=jF,cj=UF,uj=GF;const hj=Yp("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]),dj=["className","children"],pj=["className"],fj=["className","children"],gj=["className"],mj=["className"],vj=["className"],yj=r.forwardRef((e,t)=>{let{className:n,children:i}=e,r=zp(e,dj);return(0,jp.jsxs)(rj,It(It({ref:t,className:tg("relative z-10 flex flex-1 items-center justify-center",n)},r),{},{children:[i,(0,jp.jsx)(Ej,{})]}))});yj.displayName=rj.displayName;const _j=r.forwardRef((e,t)=>{let{className:n}=e,i=zp(e,pj);return(0,jp.jsx)(sj,It({ref:t,className:tg("group flex flex-1 list-none items-center justify-center space-x-1",n)},i))});_j.displayName=sj.displayName;const wj=oj,bj=uf("group inline-flex h-10 w-max items-center justify-center rounded-md bg-background px-4 py-2 text-sm font-medium transition-colors hover:bg-accent hover:text-accent-foreground focus:bg-accent focus:text-accent-foreground focus:outline-none disabled:pointer-events-none disabled:opacity-50 data-[active]:bg-accent/50 data-[state=open]:bg-accent/50"),xj=r.forwardRef((e,t)=>{let{className:n,children:i}=e,r=zp(e,fj);return(0,jp.jsxs)(aj,It(It({ref:t,className:tg(bj(),"group",n)},r),{},{children:[i," ",(0,jp.jsx)(hj,{className:"relative top-[1px] ml-1 h-3 w-3 transition duration-200 group-data-[state=open]:rotate-180","aria-hidden":"true"})]}))});xj.displayName=aj.displayName;const kj=r.forwardRef((e,t)=>{let{className:n}=e,i=zp(e,gj);return(0,jp.jsx)(cj,It({ref:t,className:tg("left-0 top-0 w-full data-[motion^=from-]:animate-in data-[motion^=to-]:animate-out data-[motion^=from-]:fade-in data-[motion^=to-]:fade-out data-[motion=from-end]:slide-in-from-right-52 data-[motion=from-start]:slide-in-from-left-52 data-[motion=to-end]:slide-out-to-right-52 data-[motion=to-start]:slide-out-to-left-52 md:absolute md:w-auto ",n)},i))});kj.displayName=cj.displayName;const Ej=r.forwardRef((e,t)=>{let{className:n}=e,i=zp(e,mj);return(0,jp.jsx)("div",{className:tg("absolute left-0 top-full flex justify-center"),children:(0,jp.jsx)(uj,It({className:tg("origin-top-center relative mt-1.5 h-[var(--radix-navigation-menu-viewport-height)] w-full overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-90 md:w-[var(--radix-navigation-menu-viewport-width)]",n),ref:t},i))})});Ej.displayName=uj.displayName;const Cj=r.forwardRef((e,t)=>{let{className:n}=e,i=zp(e,vj);return(0,jp.jsx)(lj,It(It({ref:t,className:tg("top-full z-[1] flex h-1.5 items-end justify-center overflow-hidden data-[state=visible]:animate-in data-[state=hidden]:animate-out data-[state=hidden]:fade-out data-[state=visible]:fade-in",n)},i),{},{children:(0,jp.jsx)("div",{className:"relative top-[60%] h-2 w-2 rotate-45 rounded-tl-sm bg-border shadow-md"})}))});Cj.displayName=lj.displayName;const Sj=["className","type"],Aj=r.forwardRef((e,t)=>{let{className:n,type:i}=e,r=zp(e,Sj);return(0,jp.jsx)("input",It({type:i,className:tg("h-9 rounded-md border border-input bg-background px-2 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",n),ref:t},r))});Aj.displayName="Input";const Tj=Yp("BookMarked",[["path",{d:"M10 2v8l3-3 3 3V2",key:"sqw3rj"}],["path",{d:"M4 19.5v-15A2.5 2.5 0 0 1 6.5 2H19a1 1 0 0 1 1 1v18a1 1 0 0 1-1 1H6.5a1 1 0 0 1 0-5H20",key:"k3hazp"}]]);function Pj(){const{innerWidth:e,innerHeight:t}=window;return{width:e,height:t}}function Ij(){const[e,t]=(0,r.useState)(Pj().width);return(0,r.useEffect)(()=>{function e(){t(Pj().width)}return window.addEventListener("resize",e),()=>window.removeEventListener("resize",e)},[]),e}const Rj=()=>{const[e,t]=(0,r.useState)(null),{activePDFTitle:n,activePDFPage:i,setRenderingPage:s}=(0,r.useContext)(ON),{updatePageOfPdf:o}=(0,r.useContext)(Bp),a=Ij();return(0,r.useEffect)(()=>{e&&s(e)},[e]),(0,r.useEffect)(()=>{n||t(1)},[n]),(0,r.useEffect)(()=>{i&&t(i)},[i]),(0,jp.jsx)("div",{className:"flex flex-row",children:(0,jp.jsxs)("form",{className:"flex flex-row items-center space-x-1",children:[(0,jp.jsx)(Aj,{disabled:!n,type:"number",placeholder:"Go",required:!0,min:"0",name:"pageNum",value:e||"",onChange:e=>{const n=parseInt(e.target.value);t(isNaN(n)?null:n)},className:"w-14 placeholder:text-xs opacity-90 focus:opacity-100"}),(0,jp.jsxs)(rg,{variant:"secondary",onClick:()=>{n&&e?o(n,e):alert("PDF or page number is missing")},type:"button",size:"default",disabled:!e||!n,children:[(0,jp.jsx)(Tj,{className:"w-6 h-6 ".concat(a<470?"":"mr-2")}),a<470?"":"Save"]})]})})},Mj=Yp("FileUp",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M12 12v6",key:"3ahymv"}],["path",{d:"m15 15-3-3-3 3",key:"15xj92"}]]),Nj=Yp("CircleStop",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["rect",{width:"6",height:"6",x:"9",y:"9",key:"1wrtvo"}]]),Dj=Yp("Volume2",[["polygon",{points:"11 5 6 9 2 9 2 15 6 15 11 19 11 5",key:"16drj5"}],["path",{d:"M15.54 8.46a5 5 0 0 1 0 7.07",key:"ltjumu"}],["path",{d:"M19.07 4.93a10 10 0 0 1 0 14.14",key:"1kegas"}]]),Oj=Yp("ListRestart",[["path",{d:"M21 6H3",key:"1jwq7v"}],["path",{d:"M7 12H3",key:"13ou7f"}],["path",{d:"M7 18H3",key:"1sijw9"}],["path",{d:"M12 18a5 5 0 0 0 9-3 4.5 4.5 0 0 0-4.5-4.5c-1.33 0-2.54.54-3.41 1.41L11 14",key:"qth677"}],["path",{d:"M11 10v4h4",key:"172dkj"}]]),Lj=()=>{const{resetPDF:e,isFileLoading:t,activePDFTitle:n}=(0,r.useContext)(ON),i=Ij();return(0,jp.jsx)("div",{children:(0,jp.jsxs)(rg,{type:"button",onClick:e,variant:"secondary",size:"default",disabled:t||!n,children:[(0,jp.jsx)(Oj,{className:"w-6 h-6 ".concat(i<470?"":"mr-2")}),i<470?"":"Reset"]})})},Fj=Yp("ArrowUp",[["path",{d:"m5 12 7-7 7 7",key:"hav0vg"}],["path",{d:"M12 19V5",key:"x0mq9r"}]]),jj=()=>{const[e,t]=(0,r.useState)(!1);(0,r.useEffect)(()=>{const e=()=>{window.scrollY>300?t(!0):t(!1)};return window.addEventListener("scroll",e),()=>{window.removeEventListener("scroll",e)}},[]);return(0,jp.jsx)("div",{children:e&&(0,jp.jsx)(rg,{variant:"secondary",size:"icon",className:"ml-1 border-slate-800",onClick:()=>{window.scrollTo({top:0,behavior:"smooth"})},children:(0,jp.jsx)(Fj,{className:"w-6 h-6"})})})},Bj=()=>{const{handleAddSavedPdf:e}=(0,r.useContext)(Bp),{activePDFTitle:t,setProgress:n,setIsFileLoading:i,setFileLoadingType:s,activePDFContent:o,renderingPage:a}=(0,r.useContext)(ON),l=Ij(),[c,u]=(0,r.useState)(!1),[h,d]=(0,r.useState)([]);(0,r.useEffect)(()=>{const e=()=>{const e=window.speechSynthesis.getVoices();d(e)};return e(),window.speechSynthesis.onvoiceschanged=e,()=>{window.speechSynthesis.cancel(),window.speechSynthesis.onvoiceschanged=null}},[]);return(0,jp.jsxs)(yj,{"aria-hidden":"true",className:"fixed bottom-0 p-2 mb-2 -translate-x-1/2 rounded-md shadow-sm left-1/2 bg-primary",children:[(0,jp.jsxs)(_j,{children:[(0,jp.jsx)(wj,{children:(0,jp.jsxs)(rg,{onClick:async()=>{if(o&&t){i(!0),s("Uploading...");const r={title:t,savedPage:0,updateDate:(new Date).toISOString(),downloadURL:"",size:new Blob([JSON.stringify(o)]).size};await e(r,o,n),n(100),i(!1)}},disabled:""===t||!t,type:"button",variant:"secondary",size:"default",children:[(0,jp.jsx)(Mj,{className:"w-6 h-6 ".concat(l<470?"":"mr-2")}),l<470?"":"Upload"]})}),(0,jp.jsx)(wj,{children:(0,jp.jsxs)(rg,{variant:c?"destructive":"secondary",size:"default",onClick:()=>{if(c)return window.speechSynthesis.cancel(),void u(!1);if(!o||0===o.length)return;let e=h.find(e=>e.name.includes("Microsoft")&&e.name.includes("Natural")&&e.lang.includes("en"));e||(e=h.find(e=>e.name.includes("Google US English"))),e||(e=h.find(e=>e.lang.startsWith("en"))),u(!0),window.speechSynthesis.cancel();const t=(a>0?a:1)-1;o.forEach((n,i)=>{if(i<t)return;const r=new SpeechSynthesisUtterance(n);e&&(r.voice=e),i===o.length-1&&(r.onend=()=>u(!1)),r.onerror=()=>{i===o.length-1&&u(!1)},window.speechSynthesis.speak(r)})},disabled:!o||0===o.length,title:c?"Stop Reading":"Read Aloud",children:[c?(0,jp.jsx)(Nj,{className:"w-6 h-6 ".concat(l<470?"":"mr-2")}):(0,jp.jsx)(Dj,{className:"w-6 h-6 ".concat(l<470?"":"mr-2")}),l<470?"":c?"Stop":"Read"]})}),(0,jp.jsx)(wj,{children:(0,jp.jsx)(Lj,{})}),(0,jp.jsx)(wj,{children:(0,jp.jsx)(Rj,{})})]}),(0,jp.jsx)(jj,{})]})},Wj=["className"],Uj=["className"],zj=["className"],Hj=["className"],Vj=["className"],qj=["className"],Gj=r.forwardRef((e,t)=>{let{className:n}=e,i=zp(e,Wj);return(0,jp.jsx)("div",It({ref:t,className:tg("rounded-lg border bg-card text-card-foreground shadow-sm",n)},i))});Gj.displayName="Card";const Kj=r.forwardRef((e,t)=>{let{className:n}=e,i=zp(e,Uj);return(0,jp.jsx)("div",It({ref:t,className:tg("flex flex-col space-y-1.5 p-6",n)},i))});Kj.displayName="CardHeader";const Yj=r.forwardRef((e,t)=>{let{className:n}=e,i=zp(e,zj);return(0,jp.jsx)("h3",It({ref:t,className:tg("text-2xl font-semibold leading-none tracking-tight",n)},i))});Yj.displayName="CardTitle";const Xj=r.forwardRef((e,t)=>{let{className:n}=e,i=zp(e,Hj);return(0,jp.jsx)("p",It({ref:t,className:tg("text-sm text-muted-foreground",n)},i))});Xj.displayName="CardDescription";const Qj=r.forwardRef((e,t)=>{let{className:n}=e,i=zp(e,Vj);return(0,jp.jsx)("div",It({ref:t,className:tg("p-6 pt-0",n)},i))});Qj.displayName="CardContent";const $j=r.forwardRef((e,t)=>{let{className:n}=e,i=zp(e,qj);return(0,jp.jsx)("div",It({ref:t,className:tg("flex items-center p-6 pt-0",n)},i))});$j.displayName="CardFooter";const Jj=()=>{const{isFileLoading:e,progress:t,fileLoadingType:n}=(0,r.useContext)(ON),[i,s]=(0,r.useState)(!1),o=(0,r.useRef)(null);return(0,r.useEffect)(()=>{const t=o.current;t&&(i?t.showModal():t.close()),s(e)},[e,i]),(0,jp.jsx)("dialog",{ref:o,className:"rounded-md",children:(0,jp.jsxs)(Gj,{className:"p-4 w-60",children:[(0,jp.jsxs)("div",{className:"flex flex-col items-center mt-2 text-sm motion-safe:animate-bounce",children:[n,(0,jp.jsx)("div",{className:"w-0 motion-safe:animate-spin",children:"|"})]}),(0,jp.jsx)("div",{className:"p-2 mt-2 text-xs text-left border-solid rounded text-secondary border-light bg-primary opacity-80",style:{width:"".concat(t,"%")},children:t.toFixed(0)+"%"})]})})},Zj=()=>{const{error:e,setError:t}=(0,r.useContext)(ON),n=(0,r.useRef)(null);(0,r.useEffect)(()=>{const t=n.current;t&&(e?t.open||t.showModal():t.open&&t.close())},[e]);const i=()=>{t(null)};return e?(0,jp.jsx)("dialog",{ref:n,className:"p-0 backdrop:bg-black/50 bg-transparent rounded-lg shadow-xl",onCancel:i,children:(0,jp.jsx)(Gj,{className:"min-w-[300px] max-w-md p-6 bg-card text-card-foreground",children:(0,jp.jsxs)("div",{className:"flex flex-col gap-4",children:[(0,jp.jsxs)("div",{className:"flex items-center gap-2 text-destructive",children:[(0,jp.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,jp.jsx)("circle",{cx:"12",cy:"12",r:"10"}),(0,jp.jsx)("line",{x1:"12",y1:"8",x2:"12",y2:"12"}),(0,jp.jsx)("line",{x1:"12",y1:"16",x2:"12.01",y2:"16"})]}),(0,jp.jsx)("h3",{className:"font-semibold text-lg",children:"Error"})]}),(0,jp.jsx)("p",{className:"text-sm text-muted-foreground break-words",children:e}),(0,jp.jsx)("div",{className:"flex justify-end mt-2",children:(0,jp.jsx)(rg,{onClick:i,variant:"destructive",children:"Close"})})]})})}):null},eB=["__scopeToast","hotkey","label"],tB=["__scopeToast","onFocusFromOutsideViewport"],nB=["forceMount","open","defaultOpen","onOpenChange"],iB=["__scopeToast","type","duration","open","onClose","onEscapeKeyDown","onPause","onResume","onSwipeStart","onSwipeMove","onSwipeCancel","onSwipeEnd"],rB=["__scopeToast","children"],sB=["__scopeToast"],oB=["__scopeToast"],aB=["altText"],lB=["__scopeToast"],cB=["__scopeToast","altText"];var uB="ToastProvider",[hB,dB,pB]=qL("Toast"),[fB,gB]=KN("Toast",[pB]),[mB,vB]=fB(uB),yB=e=>{const{__scopeToast:t,label:n="Notification",duration:i=5e3,swipeDirection:s="right",swipeThreshold:o=50,children:a}=e,[l,c]=r.useState(null),[u,h]=r.useState(0),d=r.useRef(!1),p=r.useRef(!1);return n.trim()||console.error("Invalid prop `label` supplied to `".concat(uB,"`. Expected non-empty `string`.")),(0,jp.jsx)(hB.Provider,{scope:t,children:(0,jp.jsx)(mB,{scope:t,label:n,duration:i,swipeDirection:s,swipeThreshold:o,toastCount:u,viewport:l,onViewportChange:c,onToastAdd:r.useCallback(()=>h(e=>e+1),[]),onToastRemove:r.useCallback(()=>h(e=>e-1),[]),isFocusedToastEscapeKeyDownRef:d,isClosePausedRef:p,children:a})})};yB.displayName=uB;var _B="ToastViewport",wB=["F8"],bB="toast.viewportPause",xB="toast.viewportResume",kB=r.forwardRef((e,t)=>{const{__scopeToast:n,hotkey:i=wB,label:s="Notifications ({hotkey})"}=e,o=zp(e,eB),a=vB(_B,n),l=dB(n),c=r.useRef(null),u=r.useRef(null),h=r.useRef(null),d=r.useRef(null),p=$p(t,d,a.onViewportChange),f=i.join("+").replace(/Key/g,"").replace(/Digit/g,""),g=a.toastCount>0;r.useEffect(()=>{const e=e=>{var t;i.every(t=>e[t]||e.code===t)&&(null===(t=d.current)||void 0===t||t.focus())};return document.addEventListener("keydown",e),()=>document.removeEventListener("keydown",e)},[i]),r.useEffect(()=>{const e=c.current,t=d.current;if(g&&e&&t){const n=()=>{if(!a.isClosePausedRef.current){const e=new CustomEvent(bB);t.dispatchEvent(e),a.isClosePausedRef.current=!0}},i=()=>{if(a.isClosePausedRef.current){const e=new CustomEvent(xB);t.dispatchEvent(e),a.isClosePausedRef.current=!1}},r=t=>{!e.contains(t.relatedTarget)&&i()},s=()=>{e.contains(document.activeElement)||i()};return e.addEventListener("focusin",n),e.addEventListener("focusout",r),e.addEventListener("pointermove",n),e.addEventListener("pointerleave",s),window.addEventListener("blur",n),window.addEventListener("focus",i),()=>{e.removeEventListener("focusin",n),e.removeEventListener("focusout",r),e.removeEventListener("pointermove",n),e.removeEventListener("pointerleave",s),window.removeEventListener("blur",n),window.removeEventListener("focus",i)}}},[g,a.isClosePausedRef]);const m=r.useCallback(e=>{let{tabbingDirection:t}=e;const n=l().map(e=>{const n=e.ref.current,i=[n,...zB(n)];return"forwards"===t?i:i.reverse()});return("forwards"===t?n.reverse():n).flat()},[l]);return r.useEffect(()=>{const e=d.current;if(e){const t=t=>{const n=t.altKey||t.ctrlKey||t.metaKey;if("Tab"===t.key&&!n){const n=document.activeElement,o=t.shiftKey;var i;if(t.target===e&&o)return void(null===(i=u.current)||void 0===i||i.focus());const a=m({tabbingDirection:o?"backwards":"forwards"}),l=a.findIndex(e=>e===n);var r,s;if(HB(a.slice(l+1)))t.preventDefault();else o?null===(r=u.current)||void 0===r||r.focus():null===(s=h.current)||void 0===s||s.focus()}};return e.addEventListener("keydown",t),()=>e.removeEventListener("keydown",t)}},[l,m]),(0,jp.jsxs)(gD,{ref:c,role:"region","aria-label":s.replace("{hotkey}",f),tabIndex:-1,style:{pointerEvents:g?void 0:"none"},children:[g&&(0,jp.jsx)(CB,{ref:u,onFocusFromOutsideViewport:()=>{HB(m({tabbingDirection:"forwards"}))}}),(0,jp.jsx)(hB.Slot,{scope:n,children:(0,jp.jsx)(nD.ol,It(It({tabIndex:-1},o),{},{ref:p}))}),g&&(0,jp.jsx)(CB,{ref:h,onFocusFromOutsideViewport:()=>{HB(m({tabbingDirection:"backwards"}))}})]})});kB.displayName=_B;var EB="ToastFocusProxy",CB=r.forwardRef((e,t)=>{const{__scopeToast:n,onFocusFromOutsideViewport:i}=e,r=zp(e,tB),s=vB(EB,n);return(0,jp.jsx)(KL,It(It({"aria-hidden":!0,tabIndex:0},r),{},{ref:t,style:{position:"fixed"},onFocus:e=>{var t;const n=e.relatedTarget;!(null!==(t=s.viewport)&&void 0!==t&&t.contains(n))&&i()}}))});CB.displayName=EB;var SB="Toast",AB=r.forwardRef((e,t)=>{const{forceMount:n,open:i,defaultOpen:r,onOpenChange:s}=e,o=zp(e,nB),[a=!0,l]=eD({prop:i,defaultProp:r,onChange:s});return(0,jp.jsx)(PD,{present:n||a,children:(0,jp.jsx)(IB,It(It({open:a},o),{},{ref:t,onClose:()=>l(!1),onPause:ZN(e.onPause),onResume:ZN(e.onResume),onSwipeStart:VN(e.onSwipeStart,e=>{e.currentTarget.setAttribute("data-swipe","start")}),onSwipeMove:VN(e.onSwipeMove,e=>{const{x:t,y:n}=e.detail.delta;e.currentTarget.setAttribute("data-swipe","move"),e.currentTarget.style.setProperty("--radix-toast-swipe-move-x","".concat(t,"px")),e.currentTarget.style.setProperty("--radix-toast-swipe-move-y","".concat(n,"px"))}),onSwipeCancel:VN(e.onSwipeCancel,e=>{e.currentTarget.setAttribute("data-swipe","cancel"),e.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),e.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),e.currentTarget.style.removeProperty("--radix-toast-swipe-end-x"),e.currentTarget.style.removeProperty("--radix-toast-swipe-end-y")}),onSwipeEnd:VN(e.onSwipeEnd,e=>{const{x:t,y:n}=e.detail.delta;e.currentTarget.setAttribute("data-swipe","end"),e.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),e.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),e.currentTarget.style.setProperty("--radix-toast-swipe-end-x","".concat(t,"px")),e.currentTarget.style.setProperty("--radix-toast-swipe-end-y","".concat(n,"px")),l(!1)})}))})});AB.displayName=SB;var[TB,PB]=fB(SB,{onClose(){}}),IB=r.forwardRef((e,t)=>{const{__scopeToast:n,type:i="foreground",duration:s,open:o,onClose:l,onEscapeKeyDown:c,onPause:u,onResume:h,onSwipeStart:d,onSwipeMove:p,onSwipeCancel:f,onSwipeEnd:g}=e,m=zp(e,iB),v=vB(SB,n),[y,_]=r.useState(null),w=$p(t,e=>_(e)),b=r.useRef(null),x=r.useRef(null),k=s||v.duration,E=r.useRef(0),C=r.useRef(k),S=r.useRef(0),{onToastAdd:A,onToastRemove:T}=v,P=ZN(()=>{var e;(null===y||void 0===y?void 0:y.contains(document.activeElement))&&(null===(e=v.viewport)||void 0===e||e.focus()),l()}),I=r.useCallback(e=>{e&&e!==1/0&&(window.clearTimeout(S.current),E.current=(new Date).getTime(),S.current=window.setTimeout(P,e))},[P]);r.useEffect(()=>{const e=v.viewport;if(e){const t=()=>{I(C.current),null===h||void 0===h||h()},n=()=>{const e=(new Date).getTime()-E.current;C.current=C.current-e,window.clearTimeout(S.current),null===u||void 0===u||u()};return e.addEventListener(bB,n),e.addEventListener(xB,t),()=>{e.removeEventListener(bB,n),e.removeEventListener(xB,t)}}},[v.viewport,k,u,h,I]),r.useEffect(()=>{o&&!v.isClosePausedRef.current&&I(k)},[o,k,v.isClosePausedRef,I]),r.useEffect(()=>(A(),()=>T()),[A,T]);const R=r.useMemo(()=>y?BB(y):null,[y]);return v.viewport?(0,jp.jsxs)(jp.Fragment,{children:[R&&(0,jp.jsx)(RB,{__scopeToast:n,role:"status","aria-live":"foreground"===i?"assertive":"polite","aria-atomic":!0,children:R}),(0,jp.jsx)(TB,{scope:n,onClose:P,children:a.createPortal((0,jp.jsx)(hB.ItemSlot,{scope:n,children:(0,jp.jsx)(fD,{asChild:!0,onEscapeKeyDown:VN(c,()=>{v.isFocusedToastEscapeKeyDownRef.current||P(),v.isFocusedToastEscapeKeyDownRef.current=!1}),children:(0,jp.jsx)(nD.li,It(It({role:"status","aria-live":"off","aria-atomic":!0,tabIndex:0,"data-state":o?"open":"closed","data-swipe-direction":v.swipeDirection},m),{},{ref:w,style:It({userSelect:"none",touchAction:"none"},e.style),onKeyDown:VN(e.onKeyDown,e=>{"Escape"===e.key&&(null===c||void 0===c||c(e.nativeEvent),e.nativeEvent.defaultPrevented||(v.isFocusedToastEscapeKeyDownRef.current=!0,P()))}),onPointerDown:VN(e.onPointerDown,e=>{0===e.button&&(b.current={x:e.clientX,y:e.clientY})}),onPointerMove:VN(e.onPointerMove,e=>{if(!b.current)return;const t=e.clientX-b.current.x,n=e.clientY-b.current.y,i=Boolean(x.current),r=["left","right"].includes(v.swipeDirection),s=["left","up"].includes(v.swipeDirection)?Math.min:Math.max,o=r?s(0,t):0,a=r?0:s(0,n),l="touch"===e.pointerType?10:2,c={x:o,y:a},u={originalEvent:e,delta:c};i?(x.current=c,WB("toast.swipeMove",p,u,{discrete:!1})):UB(c,v.swipeDirection,l)?(x.current=c,WB("toast.swipeStart",d,u,{discrete:!1}),e.target.setPointerCapture(e.pointerId)):(Math.abs(t)>l||Math.abs(n)>l)&&(b.current=null)}),onPointerUp:VN(e.onPointerUp,e=>{const t=x.current,n=e.target;if(n.hasPointerCapture(e.pointerId)&&n.releasePointerCapture(e.pointerId),x.current=null,b.current=null,t){const n=e.currentTarget,i={originalEvent:e,delta:t};UB(t,v.swipeDirection,v.swipeThreshold)?WB("toast.swipeEnd",g,i,{discrete:!0}):WB("toast.swipeCancel",f,i,{discrete:!0}),n.addEventListener("click",e=>e.preventDefault(),{once:!0})}})}))})}),v.viewport)})]}):null}),RB=e=>{const{__scopeToast:t,children:n}=e,i=zp(e,rB),s=vB(SB,t),[o,a]=r.useState(!1),[l,c]=r.useState(!1);return function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:()=>{};const t=ZN(e);XN(()=>{let e=0,n=0;return e=window.requestAnimationFrame(()=>n=window.requestAnimationFrame(t)),()=>{window.cancelAnimationFrame(e),window.cancelAnimationFrame(n)}},[t])}(()=>a(!0)),r.useEffect(()=>{const e=window.setTimeout(()=>c(!0),1e3);return()=>window.clearTimeout(e)},[]),l?null:(0,jp.jsx)(TD,{asChild:!0,children:(0,jp.jsx)(KL,It(It({},i),{},{children:o&&(0,jp.jsxs)(jp.Fragment,{children:[s.label," ",n]})}))})},MB=r.forwardRef((e,t)=>{const{__scopeToast:n}=e,i=zp(e,sB);return(0,jp.jsx)(nD.div,It(It({},i),{},{ref:t}))});MB.displayName="ToastTitle";var NB=r.forwardRef((e,t)=>{const{__scopeToast:n}=e,i=zp(e,oB);return(0,jp.jsx)(nD.div,It(It({},i),{},{ref:t}))});NB.displayName="ToastDescription";var DB="ToastAction",OB=r.forwardRef((e,t)=>{const{altText:n}=e,i=zp(e,aB);return n.trim()?(0,jp.jsx)(jB,{altText:n,asChild:!0,children:(0,jp.jsx)(FB,It(It({},i),{},{ref:t}))}):(console.error("Invalid prop `altText` supplied to `".concat(DB,"`. Expected non-empty `string`.")),null)});OB.displayName=DB;var LB="ToastClose",FB=r.forwardRef((e,t)=>{const{__scopeToast:n}=e,i=zp(e,lB),r=PB(LB,n);return(0,jp.jsx)(jB,{asChild:!0,children:(0,jp.jsx)(nD.button,It(It({type:"button"},i),{},{ref:t,onClick:VN(e.onClick,r.onClose)}))})});FB.displayName=LB;var jB=r.forwardRef((e,t)=>{const{__scopeToast:n,altText:i}=e,r=zp(e,cB);return(0,jp.jsx)(nD.div,It(It({"data-radix-toast-announce-exclude":"","data-radix-toast-announce-alt":i||void 0},r),{},{ref:t}))});function BB(e){const t=[];return Array.from(e.childNodes).forEach(e=>{if(e.nodeType===e.TEXT_NODE&&e.textContent&&t.push(e.textContent),function(e){return e.nodeType===e.ELEMENT_NODE}(e)){const n=e.ariaHidden||e.hidden||"none"===e.style.display,i=""===e.dataset.radixToastAnnounceExclude;if(!n)if(i){const n=e.dataset.radixToastAnnounceAlt;n&&t.push(n)}else t.push(...BB(e))}}),t}function WB(e,t,n,i){let{discrete:r}=i;const s=n.originalEvent.currentTarget,o=new CustomEvent(e,{bubbles:!0,cancelable:!0,detail:n});t&&s.addEventListener(e,t,{once:!0}),r?iD(s,o):s.dispatchEvent(o)}var UB=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;const i=Math.abs(e.x),r=Math.abs(e.y),s=i>r;return"left"===t||"right"===t?s&&i>n:!s&&r>n};function zB(e){const t=[],n=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,{acceptNode:e=>{const t="INPUT"===e.tagName&&"hidden"===e.type;return e.disabled||e.hidden||t?NodeFilter.FILTER_SKIP:e.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)t.push(n.currentNode);return t}function HB(e){const t=document.activeElement;return e.some(e=>e===t||(e.focus(),document.activeElement!==t))}var VB=kB,qB=AB,GB=MB,KB=NB,YB=OB,XB=FB;const QB=["className"],$B=["className","variant"],JB=["className"],ZB=["className"],eW=["className"],tW=["className"],nW=yB,iW=r.forwardRef((e,t)=>{let{className:n}=e,i=zp(e,QB);return(0,jp.jsx)(VB,It({ref:t,className:tg("fixed top-0 z-[100] flex max-h-screen w-full flex-col-reverse p-4 sm:bottom-0 sm:right-0 sm:top-auto sm:flex-col md:max-w-[420px]",n)},i))});iW.displayName=VB.displayName;const rW=uf("group pointer-events-auto relative flex w-full items-center justify-between space-x-4 overflow-hidden rounded-md border p-6 pr-8 shadow-lg transition-all data-[swipe=cancel]:translate-x-0 data-[swipe=end]:translate-x-[var(--radix-toast-swipe-end-x)] data-[swipe=move]:translate-x-[var(--radix-toast-swipe-move-x)] data-[swipe=move]:transition-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[swipe=end]:animate-out data-[state=closed]:fade-out-80 data-[state=closed]:slide-out-to-right-full data-[state=open]:slide-in-from-top-full data-[state=open]:sm:slide-in-from-bottom-full",{variants:{variant:{default:"border bg-background text-foreground",destructive:"destructive group border-destructive bg-destructive text-destructive-foreground"}},defaultVariants:{variant:"default"}}),sW=r.forwardRef((e,t)=>{let{className:n,variant:i}=e,r=zp(e,$B);return(0,jp.jsx)(qB,It({ref:t,className:tg(rW({variant:i}),n)},r))});sW.displayName=qB.displayName;const oW=r.forwardRef((e,t)=>{let{className:n}=e,i=zp(e,JB);return(0,jp.jsx)(YB,It({ref:t,className:tg("inline-flex h-8 shrink-0 items-center justify-center rounded-md border bg-transparent px-3 text-sm font-medium ring-offset-background transition-colors hover:bg-secondary focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 group-[.destructive]:border-muted/40 group-[.destructive]:hover:border-destructive/30 group-[.destructive]:hover:bg-destructive group-[.destructive]:hover:text-destructive-foreground group-[.destructive]:focus:ring-destructive",n)},i))});oW.displayName=YB.displayName;const aW=r.forwardRef((e,t)=>{let{className:n}=e,i=zp(e,ZB);return(0,jp.jsx)(XB,It(It({ref:t,className:tg("absolute right-2 top-2 rounded-md p-1 text-foreground/50 opacity-0 transition-opacity hover:text-foreground focus:opacity-100 focus:outline-none focus:ring-2 group-hover:opacity-100 group-[.destructive]:text-red-300 group-[.destructive]:hover:text-red-50 group-[.destructive]:focus:ring-red-400 group-[.destructive]:focus:ring-offset-red-600",n),"toast-close":""},i),{},{children:(0,jp.jsx)(EL,{className:"w-4 h-4"})}))});aW.displayName=XB.displayName;const lW=r.forwardRef((e,t)=>{let{className:n}=e,i=zp(e,eW);return(0,jp.jsx)(GB,It({ref:t,className:tg("text-sm font-semibold",n)},i))});lW.displayName=GB.displayName;const cW=r.forwardRef((e,t)=>{let{className:n}=e,i=zp(e,tW);return(0,jp.jsx)(KB,It({ref:t,className:tg("text-sm opacity-90",n)},i))});cW.displayName=KB.displayName;const uW=["id","title","description","action"];function hW(){const{toasts:e}=Fp();return(0,jp.jsxs)(nW,{children:[e.map(function(e){let{id:t,title:n,description:i,action:r}=e,s=zp(e,uW);return(0,jp.jsxs)(sW,It(It({},s),{},{children:[(0,jp.jsxs)("div",{className:"grid gap-1",children:[n&&(0,jp.jsx)(lW,{children:n}),i&&(0,jp.jsx)(cW,{children:i})]}),r,(0,jp.jsx)(aW,{})]}),t)}),(0,jp.jsx)(iW,{})]})}const dW=()=>(0,jp.jsxs)("div",{className:"flex flex-col justify-center gap-8 align-middle",children:[(0,jp.jsx)(Jj,{}),(0,jp.jsx)(Zj,{}),(0,jp.jsx)(Bj,{}),(0,jp.jsx)(zL,{}),(0,jp.jsx)(hW,{})]}),pW=()=>(0,jp.jsxs)(me,{children:[(0,jp.jsx)(fe,{path:"/read-pdf-by-page/login",element:(0,jp.jsx)(Up,{children:(0,jp.jsx)(ag,{})})}),(0,jp.jsx)(fe,{index:!0,path:"/read-pdf-by-page",element:(0,jp.jsx)(lg,{children:(0,jp.jsx)(dW,{})})})]}),fW=["preventCycle","children"],gW=["children"],mW=["onOpenAutoFocus","onPointerDownOutside","onAnimationEnd","style"],vW=["onDrag","onOpenChange"];const yW=r.createContext({drawerRef:{current:null},overlayRef:{current:null},scaleBackground:()=>{},onPress:()=>{},onRelease:()=>{},onDrag:()=>{},onNestedDrag:()=>{},onNestedOpenChange:()=>{},onNestedRelease:()=>{},openProp:void 0,dismissible:!1,handleOnly:!1,isOpen:!1,isDragging:!1,keyboardIsOpen:{current:!1},snapPointsOffset:null,snapPoints:null,modal:!1,shouldFade:!1,activeSnapPoint:null,onOpenChange:()=>{},setActiveSnapPoint:()=>{},visible:!1,closeDrawer:()=>{},setVisible:()=>{},direction:"bottom"}),_W=()=>{const e=r.useContext(yW);if(!e)throw new Error("useDrawerContext must be used within a Drawer.Root");return e};!function(e){if(!e||"undefined"==typeof document)return;let t=document.head||document.getElementsByTagName("head")[0],n=document.createElement("style");n.type="text/css",t.appendChild(n),n.styleSheet?n.styleSheet.cssText=e:n.appendChild(document.createTextNode(e))}("[vaul-drawer]{touch-action:none;will-change:transform;transition:transform .5s cubic-bezier(.32, .72, 0, 1)}[vaul-drawer][vaul-drawer-direction=bottom]{transform:translate3d(0,100%,0)}[vaul-drawer][vaul-drawer-direction=top]{transform:translate3d(0,-100%,0)}[vaul-drawer][vaul-drawer-direction=left]{transform:translate3d(-100%,0,0)}[vaul-drawer][vaul-drawer-direction=right]{transform:translate3d(100%,0,0)}.vaul-dragging .vaul-scrollable [vault-drawer-direction=top]{overflow-y:hidden!important}.vaul-dragging .vaul-scrollable [vault-drawer-direction=bottom]{overflow-y:hidden!important}.vaul-dragging .vaul-scrollable [vault-drawer-direction=left]{overflow-x:hidden!important}.vaul-dragging .vaul-scrollable [vault-drawer-direction=right]{overflow-x:hidden!important}[vaul-drawer][vaul-drawer-visible=true][vaul-drawer-direction=top]{transform:translate3d(0,var(--snap-point-height,0),0)}[vaul-drawer][vaul-drawer-visible=true][vaul-drawer-direction=bottom]{transform:translate3d(0,var(--snap-point-height,0),0)}[vaul-drawer][vaul-drawer-visible=true][vaul-drawer-direction=left]{transform:translate3d(var(--snap-point-height,0),0,0)}[vaul-drawer][vaul-drawer-visible=true][vaul-drawer-direction=right]{transform:translate3d(var(--snap-point-height,0),0,0)}[vaul-overlay]{opacity:0;transition:opacity .5s cubic-bezier(.32, .72, 0, 1)}[vaul-overlay][vaul-drawer-visible=true]{opacity:1}[vaul-drawer]::after{content:'';position:absolute;background:inherit;background-color:inherit}[vaul-drawer][vaul-drawer-direction=top]::after{top:initial;bottom:100%;left:0;right:0;height:200%}[vaul-drawer][vaul-drawer-direction=bottom]::after{top:100%;bottom:initial;left:0;right:0;height:200%}[vaul-drawer][vaul-drawer-direction=left]::after{left:initial;right:100%;top:0;bottom:0;width:200%}[vaul-drawer][vaul-drawer-direction=right]::after{left:100%;right:initial;top:0;bottom:0;width:200%}[vaul-handle]{display:block;position:relative;opacity:.8;margin-left:auto;margin-right:auto;height:5px;width:56px;border-radius:1rem;touch-action:pan-y;cursor:grab}[vaul-handle]:active,[vaul-handle]:hover{opacity:1}[vaul-handle]:active{cursor:grabbing}[vaul-handle-hitarea]{position:absolute;left:50%;top:50%;transform:translate(-50%,-50%);width:max(100%,2.75rem);height:max(100%,2.75rem);touch-action:inherit}[vaul-overlay][vaul-snap-points=true]:not([vaul-snap-points-overlay=true]):not([data-state=closed]){opacity:0}[vaul-overlay][vaul-snap-points-overlay=true]:not([vaul-drawer-visible=false]){opacity:1}@media (hover:hover) and (pointer:fine){[vaul-drawer]{user-select:none}}@media (pointer:fine){[vaul-handle-hitarea]:{width:100%;height:100%}}");const wW="undefined"!==typeof window?r.useLayoutEffect:r.useEffect;function bW(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return function(){for(let e of t)"function"===typeof e&&e(...arguments)}}function xW(){return EW(/^iPad/)||EW(/^Mac/)&&navigator.maxTouchPoints>1}function kW(){return EW(/^iPhone/)||xW()}function EW(e){return"undefined"!==typeof window&&null!=window.navigator?e.test(window.navigator.platform):void 0}const CW="undefined"!==typeof document&&window.visualViewport;function SW(e){let t=window.getComputedStyle(e);return/(auto|scroll)/.test(t.overflow+t.overflowX+t.overflowY)}function AW(e){for(SW(e)&&(e=e.parentElement);e&&!SW(e);)e=e.parentElement;return e||document.scrollingElement||document.documentElement}const TW=new Set(["checkbox","radio","range","color","file","image","button","submit","reset"]);let PW,IW=0;function RW(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{isDisabled:t}=e;wW(()=>{if(!t)return IW++,1===IW&&(PW=kW()?function(){let e,t=0,n=n=>{e=AW(n.target),e===document.documentElement&&e===document.body||(t=n.changedTouches[0].pageY)},i=n=>{if(!e||e===document.documentElement||e===document.body)return void n.preventDefault();let i=n.changedTouches[0].pageY,r=e.scrollTop,s=e.scrollHeight-e.clientHeight;0!==s&&((r<=0&&i>t||r>=s&&i<t)&&n.preventDefault(),t=i)},r=e=>{let t=e.target;OW(t)&&t!==document.activeElement&&(e.preventDefault(),t.style.transform="translateY(-2000px)",t.focus(),requestAnimationFrame(()=>{t.style.transform=""}))},s=e=>{let t=e.target;OW(t)&&(t.style.transform="translateY(-2000px)",requestAnimationFrame(()=>{t.style.transform="",CW&&(CW.height<window.innerHeight?requestAnimationFrame(()=>{DW(t)}):CW.addEventListener("resize",()=>DW(t),{once:!0}))}))},o=()=>{window.scrollTo(0,0)},a=window.pageXOffset,l=window.pageYOffset,c=bW(MW(document.documentElement,"paddingRight","".concat(window.innerWidth-document.documentElement.clientWidth,"px")));window.scrollTo(0,0);let u=bW(NW(document,"touchstart",n,{passive:!1,capture:!0}),NW(document,"touchmove",i,{passive:!1,capture:!0}),NW(document,"touchend",r,{passive:!1,capture:!0}),NW(document,"focus",s,!0),NW(window,"scroll",o));return()=>{c(),u(),window.scrollTo(a,l)}}():bW(MW(document.documentElement,"paddingRight","".concat(window.innerWidth-document.documentElement.clientWidth,"px")))),()=>{IW--,0===IW&&PW()}},[t])}function MW(e,t,n){let i=e.style[t];return e.style[t]=n,()=>{e.style[t]=i}}function NW(e,t,n,i){return e.addEventListener(t,n,i),()=>{e.removeEventListener(t,n,i)}}function DW(e){let t=document.scrollingElement||document.documentElement;for(;e&&e!==t;){let t=AW(e);if(t!==document.documentElement&&t!==document.body&&t!==e){let n=t.getBoundingClientRect().top,i=e.getBoundingClientRect().top;e.getBoundingClientRect().bottom>t.getBoundingClientRect().bottom&&(t.scrollTop+=i-n)}e=t.parentElement}}function OW(e){return e instanceof HTMLInputElement&&!TW.has(e.type)||e instanceof HTMLTextAreaElement||e instanceof HTMLElement&&e.isContentEditable}function LW(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return r.useCallback(function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return e=>t.forEach(t=>function(e,t){"function"===typeof e?e(t):null!==e&&void 0!==e&&(e.current=t)}(t,e))}(...t),t)}let FW=null;const jW=new WeakMap;function BW(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(!e||!(e instanceof HTMLElement))return;let i={};Object.entries(t).forEach(t=>{let[n,r]=t;n.startsWith("--")?e.style.setProperty(n,r):(i[n]=e.style[n],e.style[n]=r)}),n||jW.set(e,i)}function WW(e,t){if(!e||!(e instanceof HTMLElement))return;let n=jW.get(e);n&&(t?e.style[t]=n[t]:Object.entries(n).forEach(t=>{let[n,i]=t;e.style[n]=i}))}const UW=e=>{switch(e){case"top":case"bottom":return!0;case"left":case"right":return!1;default:return e}};function zW(e,t){if(!e)return null;const n=window.getComputedStyle(e),i=n.transform||n.webkitTransform||n.mozTransform;let r=i.match(/^matrix3d\((.+)\)$/);return r?parseFloat(r[1].split(", ")[UW(t)?13:12]):(r=i.match(/^matrix\((.+)\)$/),r?parseFloat(r[1].split(", ")[UW(t)?5:4]):null)}const HW={DURATION:.5,EASE:[.32,.72,0,1]};function VW(e){const t=r.useRef(e);return r.useEffect(()=>{t.current=e}),r.useMemo(()=>function(){for(var e=arguments.length,n=new Array(e),i=0;i<e;i++)n[i]=arguments[i];return null==t.current?void 0:t.current.call(t,...n)},[])}function qW(e){let{prop:t,defaultProp:n,onChange:i=()=>{}}=e;const[s,o]=function(e){let{defaultProp:t,onChange:n}=e;const i=r.useState(t),[s]=i,o=r.useRef(s),a=VW(n);return r.useEffect(()=>{o.current!==s&&(a(s),o.current=s)},[s,o,a]),i}({defaultProp:n,onChange:i}),a=void 0!==t,l=a?t:s,c=VW(i),u=r.useCallback(e=>{if(a){const n="function"===typeof e?e(t):e;n!==t&&c(n)}else o(e)},[a,t,o,c]);return[l,u]}const GW=.25,KW=100,YW=16,XW="vaul-dragging";function QW(e){let{open:t,onOpenChange:n,children:i,shouldScaleBackground:s,onDrag:o,onRelease:a,snapPoints:l,nested:c=!1,setBackgroundColorOnScale:u=!0,closeThreshold:h=GW,scrollLockTimeout:d=KW,dismissible:p=!0,handleOnly:f=!1,fadeFromIndex:g=l&&l.length-1,activeSnapPoint:m,setActiveSnapPoint:v,fixed:y,modal:_=!0,onClose:w,noBodyStyles:b,direction:x="bottom",preventScrollRestoration:k=!0,disablePreventScroll:E=!1}=e;var C;const[S=!1,A]=r.useState(!1),[T,P]=r.useState(!1),[I,R]=r.useState(!1),[M,N]=r.useState(!1),[D,O]=r.useState(!1),[L,F]=r.useState(!1),j=r.useRef(null),B=r.useRef(null),W=r.useRef(null),U=r.useRef(null),z=r.useRef(null),H=r.useRef(!1),V=r.useRef(null),q=r.useRef(0),G=r.useRef(!1),K=r.useRef(0),Y=r.useRef(null),X=r.useRef((null==(C=Y.current)?void 0:C.getBoundingClientRect().height)||0),Q=r.useRef(0),$=r.useCallback(e=>{l&&e===ne.length-1&&(B.current=new Date)},[]),{activeSnapPoint:J,activeSnapPointIndex:Z,setActiveSnapPoint:ee,onRelease:te,snapPointsOffset:ne,onDrag:ie,shouldFade:re,getPercentageDragged:se}=function(e){let{activeSnapPointProp:t,setActiveSnapPointProp:n,snapPoints:i,drawerRef:s,overlayRef:o,fadeFromIndex:a,onSnapPointChange:l,direction:c="bottom"}=e;const[u,h]=qW({prop:t,defaultProp:null==i?void 0:i[0],onChange:n}),d=r.useMemo(()=>u===(null==i?void 0:i[i.length-1])||null,[i,u]),p=i&&i.length>0&&(a||0===a)&&!Number.isNaN(a)&&i[a]===u||!i,f=r.useMemo(()=>null==i?void 0:i.findIndex(e=>e===u),[i,u]),g=r.useMemo(()=>{var e;return null!=(e=null==i?void 0:i.map(e=>{const t="undefined"!==typeof window,n="string"===typeof e;let i=0;if(n&&(i=parseInt(e,10)),UW(c)){const r=n?i:t?e*window.innerHeight:0;return t?"bottom"===c?window.innerHeight-r:-window.innerHeight+r:r}const r=n?i:t?e*window.innerWidth:0;return t?"right"===c?window.innerWidth-r:-window.innerWidth+r:r}))?e:[]},[i]),m=r.useMemo(()=>null!==f?null==g?void 0:g[f]:null,[g,f]),v=r.useCallback(e=>{var t;const n=null!=(t=null==g?void 0:g.findIndex(t=>t===e))?t:null;l(n),BW(s.current,{transition:"transform ".concat(HW.DURATION,"s cubic-bezier(").concat(HW.EASE.join(","),")"),transform:UW(c)?"translate3d(0, ".concat(e,"px, 0)"):"translate3d(".concat(e,"px, 0, 0)")}),g&&n!==g.length-1&&n!==a?BW(o.current,{transition:"opacity ".concat(HW.DURATION,"s cubic-bezier(").concat(HW.EASE.join(","),")"),opacity:"0"}):BW(o.current,{transition:"opacity ".concat(HW.DURATION,"s cubic-bezier(").concat(HW.EASE.join(","),")"),opacity:"1"}),h(null!==n?null==i?void 0:i[n]:null)},[s.current,i,g,a,o,h]);return r.useEffect(()=>{if(u||t){var e;const n=null!=(e=null==i?void 0:i.findIndex(e=>e===t||e===u))?e:-1;g&&-1!==n&&"number"===typeof g[n]&&v(g[n])}},[u,t,i,g,v]),{isLastSnapPoint:d,activeSnapPoint:u,shouldFade:p,getPercentageDragged:function(e,t){if(!i||"number"!==typeof f||!g||void 0===a)return null;const n=f===a-1;if(f>=a&&t)return 0;if(n&&!t)return 1;if(!p&&!n)return null;const r=n?f+1:f-1,s=n?g[r]-g[r-1]:g[r+1]-g[r],o=e/Math.abs(s);return n?1-o:o},setActiveSnapPoint:h,activeSnapPointIndex:f,onRelease:function(e){let{draggedDistance:t,closeDrawer:n,velocity:r,dismissible:s}=e;if(void 0===a)return;const l="bottom"===c||"right"===c?(null!=m?m:0)-t:(null!=m?m:0)+t,u=0===f,h=t>0;if(f===a-1&&BW(o.current,{transition:"opacity ".concat(HW.DURATION,"s cubic-bezier(").concat(HW.EASE.join(","),")")}),r>2&&!h)return void(s?n():v(g[0]));if(r>2&&h&&g&&i)return void v(g[i.length-1]);const p=null==g?void 0:g.reduce((e,t)=>"number"!==typeof e||"number"!==typeof t?e:Math.abs(t-l)<Math.abs(e-l)?t:e),y=UW(c)?window.innerHeight:window.innerWidth;if(r>.4&&Math.abs(t)<.4*y){const e=h?1:-1;if(e>0&&d)return void v(g[i.length-1]);if(u&&e<0&&s&&n(),null===f)return;return void v(g[f+e])}v(p)},onDrag:function(e){let{draggedDistance:t}=e;if(null===m)return;const n="bottom"===c||"right"===c?m-t:m+t;("bottom"===c||"right"===c)&&n<g[g.length-1]||("top"===c||"left"===c)&&n>g[g.length-1]||BW(s.current,{transform:UW(c)?"translate3d(0, ".concat(n,"px, 0)"):"translate3d(".concat(n,"px, 0, 0)")})},snapPointsOffset:g}}({snapPoints:l,activeSnapPointProp:m,setActiveSnapPointProp:v,drawerRef:Y,fadeFromIndex:g,overlayRef:j,onSnapPointChange:$,direction:x});RW({isDisabled:!S||D||!_||L||!T||E});const{restorePositionSetting:oe}=function(e){let{isOpen:t,modal:n,nested:i,hasBeenOpened:s,preventScrollRestoration:o,noBodyStyles:a}=e;const[l,c]=r.useState(()=>"undefined"!==typeof window?window.location.href:""),u=r.useRef(0),h=r.useCallback(()=>{if(null===FW&&t&&!a){FW={position:document.body.style.position,top:document.body.style.top,left:document.body.style.left,height:document.body.style.height,right:"unset"};const{scrollX:e,innerHeight:t}=window;document.body.style.setProperty("position","fixed","important"),Object.assign(document.body.style,{top:"".concat(-u.current,"px"),left:"".concat(-e,"px"),right:"0px",height:"auto"}),window.setTimeout(()=>window.requestAnimationFrame(()=>{const e=t-window.innerHeight;e&&u.current>=t&&(document.body.style.top="".concat(-(u.current+e),"px"))}),300)}},[t]),d=r.useCallback(()=>{if(null!==FW&&!a){const e=-parseInt(document.body.style.top,10),t=-parseInt(document.body.style.left,10);Object.assign(document.body.style,FW),window.requestAnimationFrame(()=>{o&&l!==window.location.href?c(window.location.href):window.scrollTo(t,e)}),FW=null}},[l]);return r.useEffect(()=>{function e(){u.current=window.scrollY}return e(),window.addEventListener("scroll",e),()=>{window.removeEventListener("scroll",e)}},[]),r.useEffect(()=>{!i&&s&&(t?(!window.matchMedia("(display-mode: standalone)").matches&&h(),n||window.setTimeout(()=>{d()},500)):d())},[t,s,l,n,i,h,d]),{restorePositionSetting:d}}({isOpen:S,modal:_,nested:c,hasBeenOpened:T,preventScrollRestoration:k,noBodyStyles:b});function ae(){return(window.innerWidth-26)/window.innerWidth}function le(e,t){var n;let i=e;const r=null==(n=window.getSelection())?void 0:n.toString(),s=Y.current?zW(Y.current,x):null,o=new Date;if(i.hasAttribute("data-vaul-no-drag")||i.closest("[data-vaul-no-drag]"))return!1;if("right"===x||"left"===x)return!0;if(B.current&&o.getTime()-B.current.getTime()<500)return!1;if(null!==s&&("bottom"===x?s>0:s<0))return!0;if(r&&r.length>0)return!1;if(z.current&&o.getTime()-z.current.getTime()<d&&0===s)return z.current=o,!1;if(t)return z.current=o,!1;for(;i;){if(i.scrollHeight>i.clientHeight){if(0!==i.scrollTop)return z.current=new Date,!1;if("dialog"===i.getAttribute("role"))return!0}i=i.parentNode}return!0}function ce(){Y.current&&(!function(){if(!D||!Y.current)return;Y.current.classList.remove(XW),H.current=!1,O(!1),U.current=new Date}(),null==w||w(),BW(Y.current,{transform:UW(x)?"translate3d(0, ".concat("bottom"===x?"100%":"-100%",", 0)"):"translate3d(".concat("right"===x?"100%":"-100%",", 0, 0)"),transition:"transform ".concat(HW.DURATION,"s cubic-bezier(").concat(HW.EASE.join(","),")")}),BW(j.current,{opacity:"0",transition:"opacity ".concat(HW.DURATION,"s cubic-bezier(").concat(HW.EASE.join(","),")")}),he(!1),setTimeout(()=>{R(!1),A(!1)},300),setTimeout(()=>{l&&ee(l[0])},1e3*HW.DURATION))}function ue(){if(!Y.current)return;const e=document.querySelector("[vaul-drawer-wrapper]"),t=zW(Y.current,x);BW(Y.current,{transform:"translate3d(0, 0, 0)",transition:"transform ".concat(HW.DURATION,"s cubic-bezier(").concat(HW.EASE.join(","),")")}),BW(j.current,{transition:"opacity ".concat(HW.DURATION,"s cubic-bezier(").concat(HW.EASE.join(","),")"),opacity:"1"}),s&&t&&t>0&&S&&BW(e,It(It({borderRadius:"".concat(8,"px"),overflow:"hidden"},UW(x)?{transform:"scale(".concat(ae(),") translate3d(0, calc(env(safe-area-inset-top) + 14px), 0)"),transformOrigin:"top"}:{transform:"scale(".concat(ae(),") translate3d(calc(env(safe-area-inset-top) + 14px), 0, 0)"),transformOrigin:"left"}),{},{transitionProperty:"transform, border-radius",transitionDuration:"".concat(HW.DURATION,"s"),transitionTimingFunction:"cubic-bezier(".concat(HW.EASE.join(","),")")}),!0)}function he(e){const t=document.querySelector("[vaul-drawer-wrapper]");t&&s&&(e?(u&&(b||(BW(document.body,{background:document.body.style.backgroundColor||document.body.style.background}),BW(document.body,{background:"black"},!0))),BW(t,It(It({borderRadius:"".concat(8,"px"),overflow:"hidden"},UW(x)?{transform:"scale(".concat(ae(),") translate3d(0, calc(env(safe-area-inset-top) + 14px), 0)"),transformOrigin:"top"}:{transform:"scale(".concat(ae(),") translate3d(calc(env(safe-area-inset-top) + 14px), 0, 0)"),transformOrigin:"left"}),{},{transitionProperty:"transform, border-radius",transitionDuration:"".concat(HW.DURATION,"s"),transitionTimingFunction:"cubic-bezier(".concat(HW.EASE.join(","),")")}))):(WW(t,"overflow"),WW(t,"transform"),WW(t,"borderRadius"),BW(t,{transitionProperty:"transform, border-radius",transitionDuration:"".concat(HW.DURATION,"s"),transitionTimingFunction:"cubic-bezier(".concat(HW.EASE.join(","),")")})))}return r.useEffect(()=>()=>{he(!1),oe()},[]),r.useEffect(()=>{var e;function t(){if(!Y.current)return;if(OW(document.activeElement)||G.current){var e;const t=(null==(e=window.visualViewport)?void 0:e.height)||0;let n=window.innerHeight-t;const i=Y.current.getBoundingClientRect().height||0;Q.current||(Q.current=i);const r=Y.current.getBoundingClientRect().top;if(Math.abs(K.current-n)>60&&(G.current=!G.current),l&&l.length>0&&ne&&Z){n+=ne[Z]||0}if(K.current=n,i>t||G.current){const e=Y.current.getBoundingClientRect().height;let i=e;e>t&&(i=t-26),Y.current.style.height="".concat(y?e-Math.max(n,0):Math.max(i,t-r),"px")}else Y.current.style.height="".concat(Q.current,"px");l&&l.length>0&&!G.current?Y.current.style.bottom="0px":Y.current.style.bottom="".concat(Math.max(n,0),"px")}}return null==(e=window.visualViewport)||e.addEventListener("resize",t),()=>{var e;return null==(e=window.visualViewport)?void 0:e.removeEventListener("resize",t)}},[Z,l,ne]),r.useEffect(()=>{if(!S&&s){const e=setTimeout(()=>{WW(document.body)},200);return()=>clearTimeout(e)}},[S,s]),r.useLayoutEffect(()=>{t?(A(!0),P(!0)):ce()},[t]),r.useEffect(()=>{M&&(null==n||n(S))},[S]),r.useEffect(()=>{N(!0)},[]),r.useEffect(()=>{S&&(BW(document.documentElement,{scrollBehavior:"auto"}),B.current=new Date,he(!0))},[S]),r.useEffect(()=>{if(Y.current&&I){var e;const t=null==Y||null==(e=Y.current)?void 0:e.querySelectorAll("*");null==t||t.forEach(e=>{const t=e;(t.scrollHeight>t.clientHeight||t.scrollWidth>t.clientWidth)&&t.classList.add("vaul-scrollable")})}},[I]),r.createElement(mL,{modal:_,onOpenChange:e=>{void 0===t?e?(P(!0),A(e)):ce():null==n||n(e)},open:S},r.createElement(yW.Provider,{value:{visible:I,activeSnapPoint:J,snapPoints:l,setActiveSnapPoint:ee,drawerRef:Y,overlayRef:j,scaleBackground:he,onOpenChange:n,onPress:function(e){var t;(p||l)&&(Y.current&&!Y.current.contains(e.target)||(X.current=(null==(t=Y.current)?void 0:t.getBoundingClientRect().height)||0,O(!0),W.current=new Date,kW()&&window.addEventListener("touchend",()=>H.current=!1,{once:!0}),e.target.setPointerCapture(e.pointerId),q.current=UW(x)?e.clientY:e.clientX))},setVisible:R,onRelease:function(e){if(!D||!Y.current)return;Y.current.classList.remove(XW),H.current=!1,O(!1),U.current=new Date;const t=zW(Y.current,x);if(!le(e.target,!1)||!t||Number.isNaN(t))return;if(null===W.current)return;const n=U.current.getTime()-W.current.getTime(),i=q.current-(UW(x)?e.clientY:e.clientX),r=Math.abs(i)/n;if(r>.05&&(F(!0),setTimeout(()=>{F(!1)},200)),l){return te({draggedDistance:i*("bottom"===x||"right"===x?1:-1),closeDrawer:ce,velocity:r,dismissible:p}),void(null==a||a(e,!0))}if("bottom"===x||"right"===x?i>0:i<0)return ue(),void(null==a||a(e,!0));if(r>.4)return ce(),void(null==a||a(e,!1));var s;if(t>=Math.min(null!=(s=Y.current.getBoundingClientRect().height)?s:0,window.innerHeight)*h)return ce(),void(null==a||a(e,!1));null==a||a(e,!0),ue()},onDrag:function(e){var t;if(Y.current&&D){const n="bottom"===x||"right"===x?1:-1,i=(q.current-(UW(x)?e.clientY:e.clientX))*n,r=i>0,a=l&&!p&&!r;if(a&&0===Z)return;const c=Math.abs(i),u=document.querySelector("[vaul-drawer-wrapper]");let h=c/X.current;const d=se(c,r);if(null!==d&&(h=d),a&&h>=1)return;if(!H.current&&!le(e.target,r))return;if(Y.current.classList.add(XW),H.current=!0,BW(Y.current,{transition:"none"}),BW(j.current,{transition:"none"}),l&&ie({draggedDistance:i}),r&&!l){const e=(t=i,8*(Math.log(t+1)-2)),r=Math.min(-1*e,0)*n;return void BW(Y.current,{transform:UW(x)?"translate3d(0, ".concat(r,"px, 0)"):"translate3d(".concat(r,"px, 0, 0)")})}const f=1-h;if((re||g&&Z===g-1)&&(null==o||o(e,h),BW(j.current,{opacity:"".concat(f),transition:"none"},!0)),u&&j.current&&s){const e=Math.min(ae()+h*(1-ae()),1),t=8-8*h,n=Math.max(0,14-14*h);BW(u,{borderRadius:"".concat(t,"px"),transform:UW(x)?"scale(".concat(e,") translate3d(0, ").concat(n,"px, 0)"):"scale(".concat(e,") translate3d(").concat(n,"px, 0, 0)"),transition:"none"},!0)}if(!l){const e=c*n;BW(Y.current,{transform:UW(x)?"translate3d(0, ".concat(e,"px, 0)"):"translate3d(".concat(e,"px, 0, 0)")})}}},dismissible:p,handleOnly:f,isOpen:S,isDragging:D,shouldFade:re,closeDrawer:ce,onNestedDrag:function(e,t){if(t<0)return;const n=UW(x)?window.innerHeight:window.innerWidth,i=(n-YW)/n,r=i+t*(1-i),s=t*YW-16;BW(Y.current,{transform:UW(x)?"scale(".concat(r,") translate3d(0, ").concat(s,"px, 0)"):"scale(".concat(r,") translate3d(").concat(s,"px, 0, 0)"),transition:"none"})},onNestedOpenChange:function(e){const t=e?(window.innerWidth-YW)/window.innerWidth:1,n=e?-16:0;V.current&&window.clearTimeout(V.current),BW(Y.current,{transition:"transform ".concat(HW.DURATION,"s cubic-bezier(").concat(HW.EASE.join(","),")"),transform:"scale(".concat(t,") translate3d(0, ").concat(n,"px, 0)")}),!e&&Y.current&&(V.current=setTimeout(()=>{const e=zW(Y.current,x);BW(Y.current,{transition:"none",transform:UW(x)?"translate3d(0, ".concat(e,"px, 0)"):"translate3d(".concat(e,"px, 0, 0)")})},500))},onNestedRelease:function(e,t){const n=UW(x)?window.innerHeight:window.innerWidth,i=t?(n-YW)/n:1,r=t?-16:0;t&&BW(Y.current,{transition:"transform ".concat(HW.DURATION,"s cubic-bezier(").concat(HW.EASE.join(","),")"),transform:UW(x)?"scale(".concat(i,") translate3d(0, ").concat(r,"px, 0)"):"scale(".concat(i,") translate3d(").concat(r,"px, 0, 0)")})},keyboardIsOpen:G,openProp:t,modal:_,snapPointsOffset:ne,direction:x}},i))}const $W=r.forwardRef(function(e,t){let{preventCycle:n=!1,children:i}=e,s=zp(e,fW);const{visible:o,closeDrawer:a,isDragging:l,snapPoints:c,activeSnapPoint:u,setActiveSnapPoint:h,dismissible:d,handleOnly:p,onPress:f,onDrag:g}=_W(),m=r.useRef(null),v=r.useRef(!1);function y(){window.clearTimeout(m.current),v.current=!1}return r.createElement("div",It({onClick:function(){v.current?y():window.setTimeout(()=>{!function(){if(l||n||v.current)return void y();if(y(),(!c||0===c.length)&&d)return void a();if(u===c[c.length-1]&&d)return void a();const e=c.findIndex(e=>e===u);if(-1===e)return;const t=c[e+1];h(t)}()},120)},onDoubleClick:()=>{v.current=!0,a()},onPointerCancel:y,onPointerDown:e=>{p&&f(e),m.current=window.setTimeout(()=>{v.current=!0},250)},onPointerMove:e=>{p&&g(e)},ref:t,"vaul-drawer-visible":o?"true":"false","vaul-handle":"","aria-hidden":"true"},s),r.createElement("span",{"vaul-handle-hitarea":"","aria-hidden":"true"},i))});$W.displayName="Drawer.Handle";const JW=r.forwardRef(function(e,t){let{children:n}=e,i=zp(e,gW);const{overlayRef:s,snapPoints:o,onRelease:a,shouldFade:l,isOpen:c,visible:u}=_W(),h=LW(t,s),d=o&&o.length>0;return r.createElement(_L,It({onMouseUp:a,ref:h,"vaul-drawer-visible":u?"true":"false","vaul-overlay":"","vaul-snap-points":c&&d?"true":"false","vaul-snap-points-overlay":c&&l?"true":"false"},i))});JW.displayName="Drawer.Overlay";const ZW=r.forwardRef(function(e,t){let{onOpenAutoFocus:n,onPointerDownOutside:i,onAnimationEnd:s,style:o}=e,a=zp(e,mW);const{drawerRef:l,onPress:c,onRelease:u,onDrag:h,dismissible:d,keyboardIsOpen:p,snapPointsOffset:f,visible:g,closeDrawer:m,modal:v,openProp:y,onOpenChange:_,setVisible:w,handleOnly:b,direction:x}=_W(),k=LW(t,l),E=r.useRef(null),C=r.useRef(!1);return r.useEffect(()=>{w(!0)},[]),r.createElement(wL,It(It({"vaul-drawer":"","vaul-drawer-direction":x,"vaul-drawer-visible":g?"true":"false"},a),{},{ref:k,style:f&&f.length>0?It({"--snap-point-height":"".concat(f[0],"px")},o):o,onOpenAutoFocus:e=>{var t;n?n(e):(e.preventDefault(),null==(t=l.current)||t.focus())},onPointerDown:e=>{b||(null==a.onPointerDown||a.onPointerDown.call(a,e),E.current={x:e.clientX,y:e.clientY},c(e))},onPointerDownOutside:e=>{null==i||i(e),v&&!e.defaultPrevented?(p.current&&(p.current=!1),e.preventDefault(),null==_||_(!1),d&&void 0===y&&m()):e.preventDefault()},onFocusOutside:e=>{v||e.preventDefault()},onEscapeKeyDown:e=>{v||e.preventDefault()},onPointerMove:e=>{if(b)return;if(null==a.onPointerMove||a.onPointerMove.call(a,e),!E.current)return;const t=e.clientY-E.current.y,n=e.clientX-E.current.x,i="touch"===e.pointerType?10:2,r=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;if(C.current)return!0;const i=Math.abs(e.y),r=Math.abs(e.x),s=r>i,o=["bottom","right"].includes(t)?1:-1;if("left"===t||"right"===t){if(!(e.x*o<0)&&r>=0&&r<=n)return s}else if(!(e.y*o<0)&&i>=0&&i<=n)return!s;return C.current=!0,!0}({x:n,y:t},x,i);r?h(e):(Math.abs(n)>i||Math.abs(t)>i)&&(E.current=null)},onPointerUp:e=>{null==a.onPointerUp||a.onPointerUp.call(a,e),E.current=null,C.current=!1,u(e)}}))});ZW.displayName="Drawer.Content";const eU={Root:QW,NestedRoot:function(e){let{onDrag:t,onOpenChange:n}=e,i=zp(e,vW);const{onNestedDrag:s,onNestedOpenChange:o,onNestedRelease:a}=_W();if(!s)throw new Error("Drawer.NestedRoot must be placed in another drawer");return r.createElement(QW,It({nested:!0,onClose:()=>{o(!1)},onDrag:(e,n)=>{s(e,n),null==t||t(e,n)},onOpenChange:e=>{e&&o(e),null==n||n(e)},onRelease:a},i))},Content:ZW,Handle:$W,Overlay:JW,Trigger:vL,Portal:yL,Close:kL,Title:bL,Description:xL},tU=["shouldScaleBackground"],nU=["className"],iU=["className","children"],rU=["className"],sU=["className"],oU=["className"],aU=["className"],lU=e=>{let{shouldScaleBackground:t=!0}=e,n=zp(e,tU);return(0,jp.jsx)(eU.Root,It({shouldScaleBackground:t},n))};lU.displayName="Drawer";const cU=eU.Trigger,uU=eU.Portal,hU=eU.Close,dU=r.forwardRef((e,t)=>{let{className:n}=e,i=zp(e,nU);return(0,jp.jsx)(eU.Overlay,It({ref:t,className:tg("fixed inset-0 z-50 bg-black/80",n)},i))});dU.displayName=eU.Overlay.displayName;const pU=r.forwardRef((e,t)=>{let{className:n,children:i}=e,r=zp(e,iU);return(0,jp.jsxs)(uU,{children:[(0,jp.jsx)(dU,{}),(0,jp.jsxs)(eU.Content,It(It({ref:t,className:tg("fixed inset-x-0 bottom-0 z-50 mt-24 flex h-auto flex-col rounded-t-[10px] border bg-background",n)},r),{},{children:[(0,jp.jsx)("div",{className:"mx-auto mt-4 h-2 w-[100px] rounded-full bg-muted"}),i]}))]})});pU.displayName="DrawerContent";const fU=e=>{let{className:t}=e,n=zp(e,rU);return(0,jp.jsx)("div",It({className:tg("grid gap-1.5 p-4 text-center sm:text-left",t)},n))};fU.displayName="DrawerHeader";const gU=e=>{let{className:t}=e,n=zp(e,sU);return(0,jp.jsx)("div",It({className:tg("mt-auto flex flex-col gap-2 p-4",t)},n))};gU.displayName="DrawerFooter";const mU=r.forwardRef((e,t)=>{let{className:n}=e,i=zp(e,oU);return(0,jp.jsx)(eU.Title,It({ref:t,className:tg("text-lg font-semibold leading-none tracking-tight",n)},i))});mU.displayName=eU.Title.displayName;const vU=r.forwardRef((e,t)=>{let{className:n}=e,i=zp(e,aU);return(0,jp.jsx)(eU.Description,It({ref:t,className:tg("text-sm text-muted-foreground",n)},i))});vU.displayName=eU.Description.displayName;const yU=(e,t,n)=>{var i;const r="berkaysonel85@gmail.com"===(null===t||void 0===t?void 0:t.email);return((null===t||void 0===t||null===(i=t.savedPdfs)||void 0===i?void 0:i.length)||0)>=5&&!r?(n({title:"Limit Reached",description:"You have reached the limit of 5 PDFs. Please delete some to upload more.",variant:"destructive"}),!1):e.size>10485760?(n({title:"File too large",description:"Please select a file smaller than 10MB.",variant:"destructive"}),!1):"application/pdf"===e.type||(n({title:"Invalid file type",description:"Please upload a PDF file.",variant:"destructive"}),!1)},_U=e=>{let{isDraggingProp:t=!1}=e;const{setNewPDF:n,isFileLoading:i,progress:s,fileLoadingType:o}=(0,r.useContext)(ON),{profile:a}=(0,r.useContext)(Bp),[l,c]=(0,r.useState)(null),[u,h]=(0,r.useState)(!1),d=u||t;return(0,r.useEffect)(()=>{l&&n(l)},[l]),(0,jp.jsx)("div",{className:"flex flex-col gap-2",children:(0,jp.jsx)(Gj,{children:(0,jp.jsxs)("form",{className:"flex flex-col gap-2",onDragOver:e=>{e.preventDefault(),e.stopPropagation(),h(!0)},onDragLeave:e=>{e.preventDefault(),e.stopPropagation(),h(!1)},onDrop:e=>{e.preventDefault(),e.stopPropagation(),h(!1);const t=e.dataTransfer.files;if(t&&t.length>0){yU(t[0],a,Lp)&&c(t[0])}},children:[(0,jp.jsxs)("label",{className:"items-center justify-center p-4 text-5xl text-center align-middle rounded-md cursor-pointer text-primary transition-colors duration-200 ".concat(d?"bg-secondary border-2 border-dashed border-primary":"hover:bg-secondary"),htmlFor:"fileInput",children:[i?(0,jp.jsxs)("div",{className:"text-sm mt-2 ".concat(i&&"motion-safe:animate-bounce"),children:[o,(0,jp.jsx)("div",{className:"".concat(i&&"motion-safe:animate-spin"),children:"|"})]}):"+",(0,jp.jsx)("div",{className:"p-2 mt-2 text-xs text-left border-solid rounded text-secondary border-light bg-primary opacity-80",style:{width:"".concat(i?s:100,"%")},children:i?s.toFixed(0)+"%":d?"Drop PDF here":"Add new PDF (or drag & drop)"})]}),(0,jp.jsx)("input",{type:"file",id:"fileInput",accept:".pdf",onChange:e=>{const t=e.target.files;if(t&&t.length>0){yU(t[0],a,Lp)?c(t[0]):e.target.value=""}},disabled:i,className:"hidden"})]})})})};const wU=function(){const e=Ij(),{setNewPDF:t}=(0,r.useContext)(ON),{profile:n}=(0,r.useContext)(Bp),[i,s]=(0,r.useState)(!1);return(0,jp.jsxs)(lU,{children:[(0,jp.jsx)(cU,{asChild:!0,children:(0,jp.jsxs)(rg,{variant:"outline",size:"default",children:[(0,jp.jsx)(BN,{className:"w-6 h-6 ".concat(e<470?"":"mr-2")}),e<470?"":"Add New PDF"]})}),(0,jp.jsx)(pU,{children:(0,jp.jsxs)("div",{className:"w-full max-w-sm mx-auto transition-all duration-200 ".concat(i?"bg-accent/20 scale-105":""),onDragOver:e=>{e.preventDefault(),s(!0)},onDragLeave:e=>{e.preventDefault(),e.currentTarget.contains(e.relatedTarget)||s(!1)},onDrop:e=>{e.preventDefault(),s(!1);const i=e.dataTransfer.files;if(i&&i.length>0){yU(i[0],n,Lp)&&t(i[0])}},children:[(0,jp.jsxs)(fU,{children:[(0,jp.jsx)(mU,{children:"Add New Document"}),(0,jp.jsx)(vU,{children:"Click plus button to add new PDF"})]}),(0,jp.jsx)("div",{className:"p-4 pb-0",children:(0,jp.jsx)(_U,{isDraggingProp:i})}),(0,jp.jsx)(gU,{children:(0,jp.jsx)(hU,{asChild:!0,children:(0,jp.jsx)(rg,{variant:"outline",children:"Cancel"})})})]})})]})},bU=Yp("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]),xU=()=>{if(xp)try{xp.signOut()}catch(ml){console.error("Error signing out:",ml)}else console.error("Auth instance is not defined")},kU=Yp("FileBadge",[["path",{d:"M12 22h6a2 2 0 0 0 2-2V7l-5-5H6a2 2 0 0 0-2 2v3",key:"12ixgl"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M5 17a3 3 0 1 0 0-6 3 3 0 0 0 0 6Z",key:"u0c8gj"}],["path",{d:"M7 16.5 8 22l-3-1-3 1 1-5.5",key:"5gm2nr"}]]),EU=["className"],CU=["side","className","children"],SU=["className"],AU=["className"],TU=["className"],PU=["className"],IU=mL,RU=vL,MU=kL,NU=yL,DU=r.forwardRef((e,t)=>{let{className:n}=e,i=zp(e,EU);return(0,jp.jsx)(_L,It(It({className:tg("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",n)},i),{},{ref:t}))});DU.displayName=_L.displayName;const OU=uf("fixed z-50 gap-4 bg-background p-6 shadow-lg transition ease-in-out data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:duration-300 data-[state=open]:duration-500",{variants:{side:{top:"inset-x-0 top-0 border-b data-[state=closed]:slide-out-to-top data-[state=open]:slide-in-from-top",bottom:"inset-x-0 bottom-0 border-t data-[state=closed]:slide-out-to-bottom data-[state=open]:slide-in-from-bottom",left:"inset-y-0 left-0 h-full w-3/4 border-r data-[state=closed]:slide-out-to-left data-[state=open]:slide-in-from-left sm:max-w-sm",right:"inset-y-0 right-0 h-full w-3/4  border-l data-[state=closed]:slide-out-to-right data-[state=open]:slide-in-from-right sm:max-w-sm"}},defaultVariants:{side:"right"}}),LU=r.forwardRef((e,t)=>{let{side:n="right",className:i,children:r}=e,s=zp(e,CU);return(0,jp.jsxs)(NU,{children:[(0,jp.jsx)(DU,{}),(0,jp.jsxs)(wL,It(It({ref:t,className:tg(OU({side:n}),i)},s),{},{children:[r,(0,jp.jsxs)(kL,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-secondary",children:[(0,jp.jsx)(EL,{className:"w-4 h-4"}),(0,jp.jsx)("span",{className:"sr-only",children:"Close"})]})]}))]})});LU.displayName=wL.displayName;const FU=e=>{let{className:t}=e,n=zp(e,SU);return(0,jp.jsx)("div",It({className:tg("flex flex-col space-y-2 text-center sm:text-left",t)},n))};FU.displayName="SheetHeader";const jU=e=>{let{className:t}=e,n=zp(e,AU);return(0,jp.jsx)("div",It({className:tg("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",t)},n))};jU.displayName="SheetFooter";const BU=r.forwardRef((e,t)=>{let{className:n}=e,i=zp(e,TU);return(0,jp.jsx)(bL,It({ref:t,className:tg("text-lg font-semibold text-foreground",n)},i))});BU.displayName=bL.displayName;const WU=r.forwardRef((e,t)=>{let{className:n}=e,i=zp(e,PU);return(0,jp.jsx)(xL,It({ref:t,className:tg("text-sm text-muted-foreground",n)},i))});WU.displayName=xL.displayName;const UU=Yp("CircleX",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]),zU=e=>{let{message:t,onConfirm:n,onCancel:i}=e;const r=(e,t)=>{t.stopPropagation(),e()};return(0,jp.jsx)("div",{className:"z-50",children:(0,jp.jsxs)("div",{className:"flex flex-row gap-1 mx-2",children:[(0,jp.jsx)(rg,{variant:"default",size:"sm",type:"button",onClick:e=>r(i,e),children:(0,jp.jsx)(UU,{className:"w-4 h-4"})}),(0,jp.jsx)(rg,{variant:"destructive",size:"sm",type:"button",onClick:e=>r(n,e),children:t})]})})},HU=Yp("FileX2",[["path",{d:"M4 22h14a2 2 0 0 0 2-2V7l-5-5H6a2 2 0 0 0-2 2v4",key:"1pf5j1"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"m8 12.5-5 5",key:"b853mi"}],["path",{d:"m3 12.5 5 5",key:"1qls4r"}]]),VU=Yp("FileDown",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M12 18v-6",key:"17g6i2"}],["path",{d:"m9 15 3 3 3-3",key:"1npd3o"}]]),qU=e=>{let{pdfItem:t}=e;const{profile:n,deletePdf:i}=(0,r.useContext)(Bp),{setNewPDF:s,isFileLoading:o,setFileLoadingType:a,setIsFileLoading:l,setProgress:c}=(0,r.useContext)(ON),[u,h]=(0,r.useState)(!1),d=async e=>{if(!n)return;l(!0),a("Downloading...");const t=await(async(e,t,n)=>{if(!e||!e.uid||!t.title)return console.error("Error retrieving PDF from storage: Invalid input"),null;const i=Tr(n,"files/".concat(e.uid,"/").concat(t.title));try{const e=await Pr(i);return new File([e],t.title,{type:e.type})}catch(ml){return console.error("Error retrieving PDF from storage:",ml),null}})(n,e,Ep);t&&(c(50),s(t))};return(0,jp.jsxs)("li",{className:"p-2 rounded-md shadow-sm bg-secondary",children:[(0,jp.jsx)("p",{className:"overflow-x-auto whitespace-nowrap",children:t.title}),(0,jp.jsxs)("p",{className:"font-bold",children:["Page: ",t.savedPage]}),u&&!o?(0,jp.jsx)("span",{className:"float-right mt-1",children:(0,jp.jsx)(zU,{message:"Delete PDF",onCancel:()=>h(!1),onConfirm:()=>(i(t,Ep),void h(!1))})}):(0,jp.jsx)(rg,{disabled:o,onClick:e=>(e=>{e.stopPropagation(),h(!0)})(e),className:"float-right mt-1",type:"button",variant:"destructive",size:"sm",children:(0,jp.jsx)(HU,{className:"w-4 h-4"})}),(0,jp.jsx)(rg,{type:"button",disabled:o,className:"float-right mt-1 mr-1",onClick:()=>d(t),size:"sm",variant:"default",children:(0,jp.jsx)(VU,{className:"w-4 h-4"})})]},t.title)},GU=()=>{const{profile:e}=(0,r.useContext)(Bp),t=null===e||void 0===e?void 0:e.savedPdfs;return t&&t.sort((e,t)=>new Date(t.updateDate).getTime()-new Date(e.updateDate).getTime()),(0,jp.jsxs)("ul",{className:"flex flex-col gap-2 p-1 overflow-y-scroll rounded-sm shadow-sm",children:[0===(null===t||void 0===t?void 0:t.length)&&(0,jp.jsx)("li",{className:"text-center",children:"You have no saved PDFs"}),null===t||void 0===t?void 0:t.map(e=>(0,jp.jsx)(qU,{pdfItem:e},e.title))]})};const KU=function(){const e=Ij();return(0,jp.jsxs)(IU,{children:[(0,jp.jsx)(RU,{asChild:!0,children:(0,jp.jsxs)(rg,{variant:"outline",size:"default",children:[(0,jp.jsx)(kU,{className:"w-6 h-6 ".concat(e<470?"":"mr-2")}),e<470?"":"Your PDFs"]})}),(0,jp.jsxs)(LU,{children:[(0,jp.jsxs)(FU,{children:[(0,jp.jsx)(BU,{children:"Your PDFs"}),(0,jp.jsx)(WU,{children:"List of your uploaded PDFs"})]}),(0,jp.jsx)("div",{className:"py-4",children:(0,jp.jsx)(GU,{})}),(0,jp.jsx)(jU,{children:(0,jp.jsx)(MU,{asChild:!0,children:(0,jp.jsx)(rg,{type:"button",variant:"secondary",size:"sm",children:"Close"})})})]})]})},YU=Yp("Sun",[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]]),XU=Yp("Moon",[["path",{d:"M12 3a6 6 0 0 0 9 9 9 9 0 1 1-9-9Z",key:"a7tn18"}]]),QU={theme:"system",setTheme:()=>null},$U=(0,r.createContext)(QU);function JU(e){let{children:t,defaultTheme:n="system",storageKey:i="vite-ui-theme"}=e;const[s,o]=(0,r.useState)(()=>localStorage.getItem(i)||n);(0,r.useEffect)(()=>{const e=window.document.documentElement;if(e.classList.remove("light","dark"),"system"===s){const t=window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light";return void e.classList.add(t)}e.classList.add(s)},[s]);const a={theme:s,setTheme:e=>{localStorage.setItem(i,e),o(e)}};return(0,jp.jsx)($U.Provider,{value:a,children:t})}function ZU(){const{theme:e,setTheme:t}=(()=>{const e=(0,r.useContext)($U);if(void 0===e)throw new Error("useTheme must be used within a ThemeProvider");return e})();return(0,jp.jsxs)(rg,{variant:"secondary",size:"icon",onClick:()=>{t("light"===e?"dark":"light")},className:"rounded-full",children:[(0,jp.jsx)(YU,{className:"h-[1.2rem] w-[1.2rem] rotate-0 scale-100 transition-all dark:-rotate-90 dark:scale-0"}),(0,jp.jsx)(XU,{className:"absolute h-[1.2rem] w-[1.2rem] rotate-90 scale-0 transition-all dark:rotate-0 dark:scale-100"}),(0,jp.jsx)("span",{className:"sr-only",children:"Toggle theme"})]})}const ez=()=>{const{profile:e}=(0,r.useContext)(Bp),t=Ij();return(0,jp.jsx)(jp.Fragment,{children:e&&(0,jp.jsx)(yj,{"aria-hidden":"true",className:"fixed p-2 m-2 -translate-x-1/2 rounded-md shadow-sm bg-primary left-1/2",children:(0,jp.jsxs)(_j,{className:"gap-4",children:[(0,jp.jsx)(wj,{children:(0,jp.jsx)(wU,{})}),(0,jp.jsx)(wj,{children:(0,jp.jsx)(KU,{})}),(0,jp.jsx)(wj,{children:(0,jp.jsx)(ZU,{})}),(0,jp.jsx)(wj,{children:(0,jp.jsxs)(rg,{type:"button",onClick:xU,variant:"destructive",size:"default",children:[(0,jp.jsx)(bU,{className:"w-6 h-6 ".concat(t<470?"":"mr-2")}),t<470?"":"Logout"]})}),(0,jp.jsx)(wj,{children:(0,jp.jsx)(UL,{})})]})})})};const tz=function(){return(0,jp.jsx)("div",{className:"h-screen bg-secondary",children:(0,jp.jsx)(JU,{defaultTheme:"dark",storageKey:"vite-ui-theme",children:(0,jp.jsx)(Wp,{children:(0,jp.jsx)(LN,{children:(0,jp.jsx)(_e,{children:(0,jp.jsxs)("main",{className:"flex flex-col flex-1 text-primary bg-secondary",children:[(0,jp.jsx)(ez,{}),(0,jp.jsxs)("section",{className:"w-full h-full p-4 mt-8",children:[(0,jp.jsxs)("h2",{className:"mt-8 text-center text-md sm:text-xl",children:[(0,jp.jsx)("span",{className:"text-xl font-bold sm:text-2xl",children:"RPBP"})," ","(Read PDF By Page) is a web application that allows users to read PDF files by page."]}),(0,jp.jsx)(pW,{})]})]})})})})})})};o.createRoot(document.getElementById("root")).render((0,jp.jsx)(r.StrictMode,{children:(0,jp.jsx)(tz,{})}))})();
//# sourceMappingURL=main.a3447ed8.js.map