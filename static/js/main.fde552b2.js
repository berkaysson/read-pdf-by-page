/*! For license information please see main.fde552b2.js.LICENSE.txt */
(()=>{var __webpack_modules__={749:(module,__unused_webpack_exports,__webpack_require__)=>{var _classPrivateGetter=__webpack_require__(183).default,_defineProperty=__webpack_require__(693).default,_classPrivateMethodInitSpec=__webpack_require__(312).default,_assertClassBrand=__webpack_require__(756).default,_classPrivateFieldInitSpec=__webpack_require__(459).default,_classPrivateFieldGet=__webpack_require__(668).default,_classPrivateFieldSet=__webpack_require__(88).default,root,factory;root=globalThis,factory=()=>(()=>{"use strict";var __webpack_modules__=[,(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.VerbosityLevel=t.Util=t.UnknownErrorException=t.UnexpectedResponseException=t.TextRenderingMode=t.RenderingIntentFlag=t.PromiseCapability=t.PermissionFlag=t.PasswordResponses=t.PasswordException=t.PageActionEventType=t.OPS=t.MissingPDFException=t.MAX_IMAGE_SIZE_TO_CACHE=t.LINE_FACTOR=t.LINE_DESCENT_FACTOR=t.InvalidPDFException=t.ImageKind=t.IDENTITY_MATRIX=t.FormatError=t.FeatureTest=t.FONT_IDENTITY_MATRIX=t.DocumentActionEventType=t.CMapCompressionType=t.BaseException=t.BASELINE_FACTOR=t.AnnotationType=t.AnnotationReplyType=t.AnnotationPrefix=t.AnnotationMode=t.AnnotationFlag=t.AnnotationFieldFlag=t.AnnotationEditorType=t.AnnotationEditorPrefix=t.AnnotationEditorParamsType=t.AnnotationBorderStyleType=t.AnnotationActionEventType=t.AbortException=void 0,t.assert=function(e,t){e||o(t)},t.bytesToString=u,t.createValidAbsoluteUrl=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;if(!e)return null;try{if(n&&"string"===typeof e){if(n.addDefaultProtocol&&e.startsWith("www.")){const t=e.match(/\./g);(null===t||void 0===t?void 0:t.length)>=2&&(e="http://".concat(e))}if(n.tryConvertEncoding)try{e=f(e)}catch{}}const r=t?new URL(e,t):new URL(e);if(function(e){switch(null===e||void 0===e?void 0:e.protocol){case"http:":case"https:":case"ftp:":case"mailto:":case"tel:":return!0;default:return!1}}(r))return r}catch{}return null},t.getModificationDate=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Date;return[e.getUTCFullYear().toString(),(e.getUTCMonth()+1).toString().padStart(2,"0"),e.getUTCDate().toString().padStart(2,"0"),e.getUTCHours().toString().padStart(2,"0"),e.getUTCMinutes().toString().padStart(2,"0"),e.getUTCSeconds().toString().padStart(2,"0")].join("")},t.getUuid=function(){var e,t;if("undefined"!==typeof crypto&&"function"===typeof(null===(e=crypto)||void 0===e?void 0:e.randomUUID))return crypto.randomUUID();const n=new Uint8Array(32);if("undefined"!==typeof crypto&&"function"===typeof(null===(t=crypto)||void 0===t?void 0:t.getRandomValues))crypto.getRandomValues(n);else for(let r=0;r<32;r++)n[r]=Math.floor(255*Math.random());return u(n)},t.getVerbosityLevel=function(){return s},t.info=function(e){s>=i.INFOS&&console.log("Info: ".concat(e))},t.isArrayBuffer=function(e){return"object"===typeof e&&void 0!==(null===e||void 0===e?void 0:e.byteLength)},t.isArrayEqual=function(e,t){if(e.length!==t.length)return!1;for(let n=0,r=e.length;n<r;n++)if(e[n]!==t[n])return!1;return!0},t.isNodeJS=void 0,t.normalizeUnicode=function(e){return g||(g=/([\u00a0\u00b5\u037e\u0eb3\u2000-\u200a\u202f\u2126\ufb00-\ufb04\ufb06\ufb20-\ufb36\ufb38-\ufb3c\ufb3e\ufb40-\ufb41\ufb43-\ufb44\ufb46-\ufba1\ufba4-\ufba9\ufbae-\ufbb1\ufbd3-\ufbdc\ufbde-\ufbe7\ufbea-\ufbf8\ufbfc-\ufbfd\ufc00-\ufc5d\ufc64-\ufcf1\ufcf5-\ufd3d\ufd88\ufdf4\ufdfa-\ufdfb\ufe71\ufe77\ufe79\ufe7b\ufe7d]+)|(\ufb05+)/gu,v=new Map([["\ufb05","\u017ft"]])),e.replaceAll(g,((e,t,n)=>t?t.normalize("NFKC"):v.get(n)))},t.objectFromMap=function(e){const t=Object.create(null);for(const[n,r]of e)t[n]=r;return t},t.objectSize=function(e){return Object.keys(e).length},t.setVerbosityLevel=function(e){Number.isInteger(e)&&(s=e)},t.shadow=l,t.string32=function(e){return String.fromCharCode(e>>24&255,e>>16&255,e>>8&255,255&e)},t.stringToBytes=d,t.stringToPDFString=function(e){if(e[0]>="\xef"){let t;if("\xfe"===e[0]&&"\xff"===e[1]?t="utf-16be":"\xff"===e[0]&&"\xfe"===e[1]?t="utf-16le":"\xef"===e[0]&&"\xbb"===e[1]&&"\xbf"===e[2]&&(t="utf-8"),t)try{const n=new TextDecoder(t,{fatal:!0}),r=d(e);return n.decode(r)}catch(n){a('stringToPDFString: "'.concat(n,'".'))}}const t=[];for(let r=0,i=e.length;r<i;r++){const n=p[e.charCodeAt(r)];t.push(n?String.fromCharCode(n):e.charAt(r))}return t.join("")},t.stringToUTF8String=f,t.unreachable=o,t.utf8StringToString=function(e){return unescape(encodeURIComponent(e))},t.warn=a;const n="object"===typeof process&&process+""==="[object process]"&&!process.versions.nw&&!(process.versions.electron&&process.type&&"browser"!==process.type);t.isNodeJS=n,t.IDENTITY_MATRIX=[1,0,0,1,0,0],t.FONT_IDENTITY_MATRIX=[.001,0,0,.001,0,0],t.MAX_IMAGE_SIZE_TO_CACHE=1e7,t.LINE_FACTOR=1.35,t.LINE_DESCENT_FACTOR=.35;const r=.35/1.35;t.BASELINE_FACTOR=r,t.RenderingIntentFlag={ANY:1,DISPLAY:2,PRINT:4,SAVE:8,ANNOTATIONS_FORMS:16,ANNOTATIONS_STORAGE:32,ANNOTATIONS_DISABLE:64,OPLIST:256},t.AnnotationMode={DISABLE:0,ENABLE:1,ENABLE_FORMS:2,ENABLE_STORAGE:3},t.AnnotationEditorPrefix="pdfjs_internal_editor_",t.AnnotationEditorType={DISABLE:-1,NONE:0,FREETEXT:3,STAMP:13,INK:15},t.AnnotationEditorParamsType={RESIZE:1,CREATE:2,FREETEXT_SIZE:11,FREETEXT_COLOR:12,FREETEXT_OPACITY:13,INK_COLOR:21,INK_THICKNESS:22,INK_OPACITY:23},t.PermissionFlag={PRINT:4,MODIFY_CONTENTS:8,COPY:16,MODIFY_ANNOTATIONS:32,FILL_INTERACTIVE_FORMS:256,COPY_FOR_ACCESSIBILITY:512,ASSEMBLE:1024,PRINT_HIGH_QUALITY:2048},t.TextRenderingMode={FILL:0,STROKE:1,FILL_STROKE:2,INVISIBLE:3,FILL_ADD_TO_PATH:4,STROKE_ADD_TO_PATH:5,FILL_STROKE_ADD_TO_PATH:6,ADD_TO_PATH:7,FILL_STROKE_MASK:3,ADD_TO_PATH_FLAG:4},t.ImageKind={GRAYSCALE_1BPP:1,RGB_24BPP:2,RGBA_32BPP:3},t.AnnotationType={TEXT:1,LINK:2,FREETEXT:3,LINE:4,SQUARE:5,CIRCLE:6,POLYGON:7,POLYLINE:8,HIGHLIGHT:9,UNDERLINE:10,SQUIGGLY:11,STRIKEOUT:12,STAMP:13,CARET:14,INK:15,POPUP:16,FILEATTACHMENT:17,SOUND:18,MOVIE:19,WIDGET:20,SCREEN:21,PRINTERMARK:22,TRAPNET:23,WATERMARK:24,THREED:25,REDACT:26},t.AnnotationReplyType={GROUP:"Group",REPLY:"R"},t.AnnotationFlag={INVISIBLE:1,HIDDEN:2,PRINT:4,NOZOOM:8,NOROTATE:16,NOVIEW:32,READONLY:64,LOCKED:128,TOGGLENOVIEW:256,LOCKEDCONTENTS:512},t.AnnotationFieldFlag={READONLY:1,REQUIRED:2,NOEXPORT:4,MULTILINE:4096,PASSWORD:8192,NOTOGGLETOOFF:16384,RADIO:32768,PUSHBUTTON:65536,COMBO:131072,EDIT:262144,SORT:524288,FILESELECT:1048576,MULTISELECT:2097152,DONOTSPELLCHECK:4194304,DONOTSCROLL:8388608,COMB:16777216,RICHTEXT:33554432,RADIOSINUNISON:33554432,COMMITONSELCHANGE:67108864},t.AnnotationBorderStyleType={SOLID:1,DASHED:2,BEVELED:3,INSET:4,UNDERLINE:5},t.AnnotationActionEventType={E:"Mouse Enter",X:"Mouse Exit",D:"Mouse Down",U:"Mouse Up",Fo:"Focus",Bl:"Blur",PO:"PageOpen",PC:"PageClose",PV:"PageVisible",PI:"PageInvisible",K:"Keystroke",F:"Format",V:"Validate",C:"Calculate"},t.DocumentActionEventType={WC:"WillClose",WS:"WillSave",DS:"DidSave",WP:"WillPrint",DP:"DidPrint"},t.PageActionEventType={O:"PageOpen",C:"PageClose"};const i={ERRORS:0,WARNINGS:1,INFOS:5};t.VerbosityLevel=i,t.CMapCompressionType={NONE:0,BINARY:1},t.OPS={dependency:1,setLineWidth:2,setLineCap:3,setLineJoin:4,setMiterLimit:5,setDash:6,setRenderingIntent:7,setFlatness:8,setGState:9,save:10,restore:11,transform:12,moveTo:13,lineTo:14,curveTo:15,curveTo2:16,curveTo3:17,closePath:18,rectangle:19,stroke:20,closeStroke:21,fill:22,eoFill:23,fillStroke:24,eoFillStroke:25,closeFillStroke:26,closeEOFillStroke:27,endPath:28,clip:29,eoClip:30,beginText:31,endText:32,setCharSpacing:33,setWordSpacing:34,setHScale:35,setLeading:36,setFont:37,setTextRenderingMode:38,setTextRise:39,moveText:40,setLeadingMoveText:41,setTextMatrix:42,nextLine:43,showText:44,showSpacedText:45,nextLineShowText:46,nextLineSetSpacingShowText:47,setCharWidth:48,setCharWidthAndBounds:49,setStrokeColorSpace:50,setFillColorSpace:51,setStrokeColor:52,setStrokeColorN:53,setFillColor:54,setFillColorN:55,setStrokeGray:56,setFillGray:57,setStrokeRGBColor:58,setFillRGBColor:59,setStrokeCMYKColor:60,setFillCMYKColor:61,shadingFill:62,beginInlineImage:63,beginImageData:64,endInlineImage:65,paintXObject:66,markPoint:67,markPointProps:68,beginMarkedContent:69,beginMarkedContentProps:70,endMarkedContent:71,beginCompat:72,endCompat:73,paintFormXObjectBegin:74,paintFormXObjectEnd:75,beginGroup:76,endGroup:77,beginAnnotation:80,endAnnotation:81,paintImageMaskXObject:83,paintImageMaskXObjectGroup:84,paintImageXObject:85,paintInlineImageXObject:86,paintInlineImageXObjectGroup:87,paintImageXObjectRepeat:88,paintImageMaskXObjectRepeat:89,paintSolidColorImageMask:90,constructPath:91},t.PasswordResponses={NEED_PASSWORD:1,INCORRECT_PASSWORD:2};let s=i.WARNINGS;function a(e){s>=i.WARNINGS&&console.log("Warning: ".concat(e))}function o(e){throw new Error(e)}function l(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return Object.defineProperty(e,t,{value:n,enumerable:!r,configurable:!0,writable:!1}),n}const c=function(){function e(t,n){this.constructor===e&&o("Cannot initialize BaseException."),this.message=t,this.name=n}return e.prototype=new Error,e.constructor=e,e}();function u(e){"object"===typeof e&&void 0!==(null===e||void 0===e?void 0:e.length)||o("Invalid argument for bytesToString");const t=e.length,n=8192;if(t<n)return String.fromCharCode.apply(null,e);const r=[];for(let i=0;i<t;i+=n){const s=Math.min(i+n,t),a=e.subarray(i,s);r.push(String.fromCharCode.apply(null,a))}return r.join("")}function d(e){"string"!==typeof e&&o("Invalid argument for stringToBytes");const t=e.length,n=new Uint8Array(t);for(let r=0;r<t;++r)n[r]=255&e.charCodeAt(r);return n}t.BaseException=c,t.PasswordException=class extends c{constructor(e,t){super(e,"PasswordException"),this.code=t}},t.UnknownErrorException=class extends c{constructor(e,t){super(e,"UnknownErrorException"),this.details=t}},t.InvalidPDFException=class extends c{constructor(e){super(e,"InvalidPDFException")}},t.MissingPDFException=class extends c{constructor(e){super(e,"MissingPDFException")}},t.UnexpectedResponseException=class extends c{constructor(e,t){super(e,"UnexpectedResponseException"),this.status=t}},t.FormatError=class extends c{constructor(e){super(e,"FormatError")}},t.AbortException=class extends c{constructor(e){super(e,"AbortException")}},t.FeatureTest=class{static get isLittleEndian(){return l(this,"isLittleEndian",function(){const e=new Uint8Array(4);return e[0]=1,1===new Uint32Array(e.buffer,0,1)[0]}())}static get isEvalSupported(){return l(this,"isEvalSupported",function(){try{return new Function(""),!0}catch{return!1}}())}static get isOffscreenCanvasSupported(){return l(this,"isOffscreenCanvasSupported","undefined"!==typeof OffscreenCanvas)}static get platform(){return"undefined"===typeof navigator?l(this,"platform",{isWin:!1,isMac:!1}):l(this,"platform",{isWin:navigator.platform.includes("Win"),isMac:navigator.platform.includes("Mac")})}static get isCSSRoundSupported(){var e,t;return l(this,"isCSSRoundSupported",null===(e=globalThis.CSS)||void 0===e||null===(t=e.supports)||void 0===t?void 0:t.call(e,"width: round(1.5px, 1px)"))}};const h=[...Array(256).keys()].map((e=>e.toString(16).padStart(2,"0")));t.Util=class{static makeHexColor(e,t,n){return"#".concat(h[e]).concat(h[t]).concat(h[n])}static scaleMinMax(e,t){let n;e[0]?(e[0]<0&&(n=t[0],t[0]=t[1],t[1]=n),t[0]*=e[0],t[1]*=e[0],e[3]<0&&(n=t[2],t[2]=t[3],t[3]=n),t[2]*=e[3],t[3]*=e[3]):(n=t[0],t[0]=t[2],t[2]=n,n=t[1],t[1]=t[3],t[3]=n,e[1]<0&&(n=t[2],t[2]=t[3],t[3]=n),t[2]*=e[1],t[3]*=e[1],e[2]<0&&(n=t[0],t[0]=t[1],t[1]=n),t[0]*=e[2],t[1]*=e[2]),t[0]+=e[4],t[1]+=e[4],t[2]+=e[5],t[3]+=e[5]}static transform(e,t){return[e[0]*t[0]+e[2]*t[1],e[1]*t[0]+e[3]*t[1],e[0]*t[2]+e[2]*t[3],e[1]*t[2]+e[3]*t[3],e[0]*t[4]+e[2]*t[5]+e[4],e[1]*t[4]+e[3]*t[5]+e[5]]}static applyTransform(e,t){return[e[0]*t[0]+e[1]*t[2]+t[4],e[0]*t[1]+e[1]*t[3]+t[5]]}static applyInverseTransform(e,t){const n=t[0]*t[3]-t[1]*t[2];return[(e[0]*t[3]-e[1]*t[2]+t[2]*t[5]-t[4]*t[3])/n,(-e[0]*t[1]+e[1]*t[0]+t[4]*t[1]-t[5]*t[0])/n]}static getAxialAlignedBoundingBox(e,t){const n=this.applyTransform(e,t),r=this.applyTransform(e.slice(2,4),t),i=this.applyTransform([e[0],e[3]],t),s=this.applyTransform([e[2],e[1]],t);return[Math.min(n[0],r[0],i[0],s[0]),Math.min(n[1],r[1],i[1],s[1]),Math.max(n[0],r[0],i[0],s[0]),Math.max(n[1],r[1],i[1],s[1])]}static inverseTransform(e){const t=e[0]*e[3]-e[1]*e[2];return[e[3]/t,-e[1]/t,-e[2]/t,e[0]/t,(e[2]*e[5]-e[4]*e[3])/t,(e[4]*e[1]-e[5]*e[0])/t]}static singularValueDecompose2dScale(e){const t=[e[0],e[2],e[1],e[3]],n=e[0]*t[0]+e[1]*t[2],r=e[0]*t[1]+e[1]*t[3],i=e[2]*t[0]+e[3]*t[2],s=e[2]*t[1]+e[3]*t[3],a=(n+s)/2,o=Math.sqrt((n+s)**2-4*(n*s-i*r))/2,l=a+o||1,c=a-o||1;return[Math.sqrt(l),Math.sqrt(c)]}static normalizeRect(e){const t=e.slice(0);return e[0]>e[2]&&(t[0]=e[2],t[2]=e[0]),e[1]>e[3]&&(t[1]=e[3],t[3]=e[1]),t}static intersect(e,t){const n=Math.max(Math.min(e[0],e[2]),Math.min(t[0],t[2])),r=Math.min(Math.max(e[0],e[2]),Math.max(t[0],t[2]));if(n>r)return null;const i=Math.max(Math.min(e[1],e[3]),Math.min(t[1],t[3])),s=Math.min(Math.max(e[1],e[3]),Math.max(t[1],t[3]));return i>s?null:[n,i,r,s]}static bezierBoundingBox(e,t,n,r,i,s,a,o){const l=[],c=[[],[]];let u,d,h,p,f,m,g,v;for(let w=0;w<2;++w)if(0===w?(d=6*e-12*n+6*i,u=-3*e+9*n-9*i+3*a,h=3*n-3*e):(d=6*t-12*r+6*s,u=-3*t+9*r-9*s+3*o,h=3*r-3*t),Math.abs(u)<1e-12){if(Math.abs(d)<1e-12)continue;p=-h/d,0<p&&p<1&&l.push(p)}else g=d*d-4*h*u,v=Math.sqrt(g),g<0||(f=(-d+v)/(2*u),0<f&&f<1&&l.push(f),m=(-d-v)/(2*u),0<m&&m<1&&l.push(m));let _,y=l.length;const b=y;for(;y--;)p=l[y],_=1-p,c[0][y]=_*_*_*e+3*_*_*p*n+3*_*p*p*i+p*p*p*a,c[1][y]=_*_*_*t+3*_*_*p*r+3*_*p*p*s+p*p*p*o;return c[0][b]=e,c[1][b]=t,c[0][b+1]=a,c[1][b+1]=o,c[0].length=c[1].length=b+2,[Math.min(...c[0]),Math.min(...c[1]),Math.max(...c[0]),Math.max(...c[1])]}};const p=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,728,711,710,729,733,731,730,732,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,8226,8224,8225,8230,8212,8211,402,8260,8249,8250,8722,8240,8222,8220,8221,8216,8217,8218,8482,64257,64258,321,338,352,376,381,305,322,339,353,382,0,8364];function f(e){return decodeURIComponent(escape(e))}var m=new WeakMap;t.PromiseCapability=class{constructor(){_classPrivateFieldInitSpec(this,m,!1),this.promise=new Promise(((e,t)=>{this.resolve=t=>{_classPrivateFieldSet(m,this,!0),e(t)},this.reject=e=>{_classPrivateFieldSet(m,this,!0),t(e)}}))}get settled(){return _classPrivateFieldGet(m,this)}};let g=null,v=null;t.AnnotationPrefix="pdfjs_internal_id_"},(__unused_webpack_module,exports,__w_pdfjs_require__)=>{Object.defineProperty(exports,"__esModule",{value:!0}),exports.RenderTask=exports.PDFWorkerUtil=exports.PDFWorker=exports.PDFPageProxy=exports.PDFDocumentProxy=exports.PDFDocumentLoadingTask=exports.PDFDataRangeTransport=exports.LoopbackPort=exports.DefaultStandardFontDataFactory=exports.DefaultFilterFactory=exports.DefaultCanvasFactory=exports.DefaultCMapReaderFactory=void 0,Object.defineProperty(exports,"SVGGraphics",{enumerable:!0,get:function(){return _displaySvg.SVGGraphics}}),exports.build=void 0,exports.getDocument=getDocument,exports.version=void 0;var _util=__w_pdfjs_require__(1),_annotation_storage=__w_pdfjs_require__(3),_display_utils=__w_pdfjs_require__(6),_font_loader=__w_pdfjs_require__(9),_displayNode_utils=__w_pdfjs_require__(10),_canvas=__w_pdfjs_require__(11),_worker_options=__w_pdfjs_require__(14),_message_handler=__w_pdfjs_require__(15),_metadata=__w_pdfjs_require__(16),_optional_content_config=__w_pdfjs_require__(17),_transport_stream=__w_pdfjs_require__(18),_displayFetch_stream=__w_pdfjs_require__(19),_displayNetwork=__w_pdfjs_require__(22),_displayNode_stream=__w_pdfjs_require__(23),_displaySvg=__w_pdfjs_require__(24),_xfa_text=__w_pdfjs_require__(25);const DEFAULT_RANGE_CHUNK_SIZE=65536,RENDERING_CANCELLED_TIMEOUT=100,DELAYED_CLEANUP_TIMEOUT=5e3,DefaultCanvasFactory=_util.isNodeJS?_displayNode_utils.NodeCanvasFactory:_display_utils.DOMCanvasFactory;exports.DefaultCanvasFactory=DefaultCanvasFactory;const DefaultCMapReaderFactory=_util.isNodeJS?_displayNode_utils.NodeCMapReaderFactory:_display_utils.DOMCMapReaderFactory;exports.DefaultCMapReaderFactory=DefaultCMapReaderFactory;const DefaultFilterFactory=_util.isNodeJS?_displayNode_utils.NodeFilterFactory:_display_utils.DOMFilterFactory;exports.DefaultFilterFactory=DefaultFilterFactory;const DefaultStandardFontDataFactory=_util.isNodeJS?_displayNode_utils.NodeStandardFontDataFactory:_display_utils.DOMStandardFontDataFactory;function getDocument(e){var t,n;if("string"===typeof e||e instanceof URL?e={url:e}:(0,_util.isArrayBuffer)(e)&&(e={data:e}),"object"!==typeof e)throw new Error("Invalid parameter in getDocument, need parameter object.");if(!e.url&&!e.data&&!e.range)throw new Error("Invalid parameter object: need either .data, .range or .url");const r=new PDFDocumentLoadingTask,{docId:i}=r,s=e.url?getUrlProp(e.url):null,a=e.data?getDataProp(e.data):null,o=e.httpHeaders||null,l=!0===e.withCredentials,c=null!==(t=e.password)&&void 0!==t?t:null,u=e.range instanceof PDFDataRangeTransport?e.range:null,d=Number.isInteger(e.rangeChunkSize)&&e.rangeChunkSize>0?e.rangeChunkSize:DEFAULT_RANGE_CHUNK_SIZE;let h=e.worker instanceof PDFWorker?e.worker:null;const p=e.verbosity,f="string"!==typeof e.docBaseUrl||(0,_display_utils.isDataScheme)(e.docBaseUrl)?null:e.docBaseUrl,m="string"===typeof e.cMapUrl?e.cMapUrl:null,g=!1!==e.cMapPacked,v=e.CMapReaderFactory||DefaultCMapReaderFactory,_="string"===typeof e.standardFontDataUrl?e.standardFontDataUrl:null,y=e.StandardFontDataFactory||DefaultStandardFontDataFactory,b=!0!==e.stopAtErrors,w=Number.isInteger(e.maxImageSize)&&e.maxImageSize>-1?e.maxImageSize:-1,S=!1!==e.isEvalSupported,P="boolean"===typeof e.isOffscreenCanvasSupported?e.isOffscreenCanvasSupported:!_util.isNodeJS,C=Number.isInteger(e.canvasMaxAreaInBytes)?e.canvasMaxAreaInBytes:-1,E="boolean"===typeof e.disableFontFace?e.disableFontFace:_util.isNodeJS,x=!0===e.fontExtraProperties,k=!0===e.enableXfa,A=e.ownerDocument||globalThis.document,T=!0===e.disableRange,F=!0===e.disableStream,I=!0===e.disableAutoFetch,R=!0===e.pdfBug,M=u?u.length:null!==(n=e.length)&&void 0!==n?n:NaN,N="boolean"===typeof e.useSystemFonts?e.useSystemFonts:!_util.isNodeJS&&!E,D="boolean"===typeof e.useWorkerFetch?e.useWorkerFetch:v===_display_utils.DOMCMapReaderFactory&&y===_display_utils.DOMStandardFontDataFactory&&m&&_&&(0,_display_utils.isValidFetchUrl)(m,document.baseURI)&&(0,_display_utils.isValidFetchUrl)(_,document.baseURI),O=e.canvasFactory||new DefaultCanvasFactory({ownerDocument:A}),L=e.filterFactory||new DefaultFilterFactory({docId:i,ownerDocument:A});(0,_util.setVerbosityLevel)(p);const j={canvasFactory:O,filterFactory:L};if(D||(j.cMapReaderFactory=new v({baseUrl:m,isCompressed:g}),j.standardFontDataFactory=new y({baseUrl:_})),!h){const e={verbosity:p,port:_worker_options.GlobalWorkerOptions.workerPort};h=e.port?PDFWorker.fromPort(e):new PDFWorker(e),r._worker=h}const U={docId:i,apiVersion:"3.11.174",data:a,password:c,disableAutoFetch:I,rangeChunkSize:d,length:M,docBaseUrl:f,enableXfa:k,evaluatorOptions:{maxImageSize:w,disableFontFace:E,ignoreErrors:b,isEvalSupported:S,isOffscreenCanvasSupported:P,canvasMaxAreaInBytes:C,fontExtraProperties:x,useSystemFonts:N,cMapUrl:D?m:null,standardFontDataUrl:D?_:null}},G={ignoreErrors:b,isEvalSupported:S,disableFontFace:E,fontExtraProperties:x,enableXfa:k,ownerDocument:A,disableAutoFetch:I,pdfBug:R,styleElement:null};return h.promise.then((function(){if(r.destroyed)throw new Error("Loading aborted");const e=_fetchDocument(h,U),t=new Promise((function(e){let t;var n;u?t=new _transport_stream.PDFDataTransportStream({length:M,initialData:u.initialData,progressiveDone:u.progressiveDone,contentDispositionFilename:u.contentDispositionFilename,disableRange:T,disableStream:F},u):a||(n={url:s,length:M,httpHeaders:o,withCredentials:l,rangeChunkSize:d,disableRange:T,disableStream:F},t=_util.isNodeJS?new _displayNode_stream.PDFNodeStream(n):(0,_display_utils.isValidFetchUrl)(n.url)?new _displayFetch_stream.PDFFetchStream(n):new _displayNetwork.PDFNetworkStream(n)),e(t)}));return Promise.all([e,t]).then((function(e){let[t,n]=e;if(r.destroyed)throw new Error("Loading aborted");const s=new _message_handler.MessageHandler(i,t,h.port),a=new WorkerTransport(s,r,n,G,j);r._transport=a,s.send("Ready",null)}))})).catch(r._capability.reject),r}async function _fetchDocument(e,t){if(e.destroyed)throw new Error("Worker was destroyed");const n=await e.messageHandler.sendWithPromise("GetDocRequest",t,t.data?[t.data.buffer]:null);if(e.destroyed)throw new Error("Worker was destroyed");return n}function getUrlProp(e){if(e instanceof URL)return e.href;try{return new URL(e,window.location).href}catch{if(_util.isNodeJS&&"string"===typeof e)return e}throw new Error("Invalid PDF url data: either string or URL-object is expected in the url property.")}function getDataProp(e){if(_util.isNodeJS&&"undefined"!==typeof Buffer&&e instanceof Buffer)throw new Error("Please provide binary data as `Uint8Array`, rather than `Buffer`.");if(e instanceof Uint8Array&&e.byteLength===e.buffer.byteLength)return e;if("string"===typeof e)return(0,_util.stringToBytes)(e);if("object"===typeof e&&!isNaN(null===e||void 0===e?void 0:e.length)||(0,_util.isArrayBuffer)(e))return new Uint8Array(e);throw new Error("Invalid PDF binary data: either TypedArray, string, or array-like object is expected in the data property.")}exports.DefaultStandardFontDataFactory=DefaultStandardFontDataFactory;class PDFDocumentLoadingTask{constructor(){var e,t;this._capability=new _util.PromiseCapability,this._transport=null,this._worker=null,this.docId="d".concat((_docId._=(e=_docId._,t=e++,e),t)),this.destroyed=!1,this.onPassword=null,this.onProgress=null}get promise(){return this._capability.promise}async destroy(){this.destroyed=!0;try{var e,t;null!==(e=this._worker)&&void 0!==e&&e.port&&(this._worker._pendingDestroy=!0),await(null===(t=this._transport)||void 0===t?void 0:t.destroy())}catch(r){var n;throw null!==(n=this._worker)&&void 0!==n&&n.port&&delete this._worker._pendingDestroy,r}this._transport=null,this._worker&&(this._worker.destroy(),this._worker=null)}}var _docId={_:0};exports.PDFDocumentLoadingTask=PDFDocumentLoadingTask;class PDFDataRangeTransport{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;this.length=e,this.initialData=t,this.progressiveDone=n,this.contentDispositionFilename=r,this._rangeListeners=[],this._progressListeners=[],this._progressiveReadListeners=[],this._progressiveDoneListeners=[],this._readyCapability=new _util.PromiseCapability}addRangeListener(e){this._rangeListeners.push(e)}addProgressListener(e){this._progressListeners.push(e)}addProgressiveReadListener(e){this._progressiveReadListeners.push(e)}addProgressiveDoneListener(e){this._progressiveDoneListeners.push(e)}onDataRange(e,t){for(const n of this._rangeListeners)n(e,t)}onDataProgress(e,t){this._readyCapability.promise.then((()=>{for(const n of this._progressListeners)n(e,t)}))}onDataProgressiveRead(e){this._readyCapability.promise.then((()=>{for(const t of this._progressiveReadListeners)t(e)}))}onDataProgressiveDone(){this._readyCapability.promise.then((()=>{for(const e of this._progressiveDoneListeners)e()}))}transportReady(){this._readyCapability.resolve()}requestDataRange(e,t){(0,_util.unreachable)("Abstract method PDFDataRangeTransport.requestDataRange")}abort(){}}exports.PDFDataRangeTransport=PDFDataRangeTransport;class PDFDocumentProxy{constructor(e,t){this._pdfInfo=e,this._transport=t,Object.defineProperty(this,"getJavaScript",{value:()=>((0,_display_utils.deprecated)("`PDFDocumentProxy.getJavaScript`, please use `PDFDocumentProxy.getJSActions` instead."),this.getJSActions().then((e=>{if(!e)return e;const t=[];for(const n in e)t.push(...e[n]);return t})))})}get annotationStorage(){return this._transport.annotationStorage}get filterFactory(){return this._transport.filterFactory}get numPages(){return this._pdfInfo.numPages}get fingerprints(){return this._pdfInfo.fingerprints}get isPureXfa(){return(0,_util.shadow)(this,"isPureXfa",!!this._transport._htmlForXfa)}get allXfaHtml(){return this._transport._htmlForXfa}getPage(e){return this._transport.getPage(e)}getPageIndex(e){return this._transport.getPageIndex(e)}getDestinations(){return this._transport.getDestinations()}getDestination(e){return this._transport.getDestination(e)}getPageLabels(){return this._transport.getPageLabels()}getPageLayout(){return this._transport.getPageLayout()}getPageMode(){return this._transport.getPageMode()}getViewerPreferences(){return this._transport.getViewerPreferences()}getOpenAction(){return this._transport.getOpenAction()}getAttachments(){return this._transport.getAttachments()}getJSActions(){return this._transport.getDocJSActions()}getOutline(){return this._transport.getOutline()}getOptionalContentConfig(){return this._transport.getOptionalContentConfig()}getPermissions(){return this._transport.getPermissions()}getMetadata(){return this._transport.getMetadata()}getMarkInfo(){return this._transport.getMarkInfo()}getData(){return this._transport.getData()}saveDocument(){return this._transport.saveDocument()}getDownloadInfo(){return this._transport.downloadInfoCapability.promise}cleanup(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return this._transport.startCleanup(e||this.isPureXfa)}destroy(){return this.loadingTask.destroy()}get loadingParams(){return this._transport.loadingParams}get loadingTask(){return this._transport.loadingTask}getFieldObjects(){return this._transport.getFieldObjects()}hasJSActions(){return this._transport.hasJSActions()}getCalculationOrderIds(){return this._transport.getCalculationOrderIds()}}exports.PDFDocumentProxy=PDFDocumentProxy;var _delayedCleanupTimeout=new WeakMap,_pendingCleanup=new WeakMap,_PDFPageProxy_brand=new WeakSet;class PDFPageProxy{constructor(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];_classPrivateMethodInitSpec(this,_PDFPageProxy_brand),_classPrivateFieldInitSpec(this,_delayedCleanupTimeout,null),_classPrivateFieldInitSpec(this,_pendingCleanup,!1),this._pageIndex=e,this._pageInfo=t,this._transport=n,this._stats=r?new _display_utils.StatTimer:null,this._pdfBug=r,this.commonObjs=n.commonObjs,this.objs=new PDFObjects,this._maybeCleanupAfterRender=!1,this._intentStates=new Map,this.destroyed=!1}get pageNumber(){return this._pageIndex+1}get rotate(){return this._pageInfo.rotate}get ref(){return this._pageInfo.ref}get userUnit(){return this._pageInfo.userUnit}get view(){return this._pageInfo.view}getViewport(){let{scale:e,rotation:t=this.rotate,offsetX:n=0,offsetY:r=0,dontFlip:i=!1}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return new _display_utils.PageViewport({viewBox:this.view,scale:e,rotation:t,offsetX:n,offsetY:r,dontFlip:i})}getAnnotations(){let{intent:e="display"}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const t=this._transport.getRenderingIntent(e);return this._transport.getAnnotations(this._pageIndex,t.renderingIntent)}getJSActions(){return this._transport.getPageJSActions(this._pageIndex)}get filterFactory(){return this._transport.filterFactory}get isPureXfa(){return(0,_util.shadow)(this,"isPureXfa",!!this._transport._htmlForXfa)}async getXfa(){var e;return(null===(e=this._transport._htmlForXfa)||void 0===e?void 0:e.children[this._pageIndex])||null}render(e){var t,n;let{canvasContext:r,viewport:i,intent:s="display",annotationMode:a=_util.AnnotationMode.ENABLE,transform:o=null,background:l=null,optionalContentConfigPromise:c=null,annotationCanvasMap:u=null,pageColors:d=null,printAnnotationStorage:h=null}=e;null===(t=this._stats)||void 0===t||t.time("Overall");const p=this._transport.getRenderingIntent(s,a,h);_classPrivateFieldSet(_pendingCleanup,this,!1),_assertClassBrand(_PDFPageProxy_brand,this,_abortDelayedCleanup).call(this),c||(c=this._transport.getOptionalContentConfig());let f=this._intentStates.get(p.cacheKey);f||(f=Object.create(null),this._intentStates.set(p.cacheKey,f)),f.streamReaderCancelTimeout&&(clearTimeout(f.streamReaderCancelTimeout),f.streamReaderCancelTimeout=null);const m=!!(p.renderingIntent&_util.RenderingIntentFlag.PRINT);var g;f.displayReadyCapability||(f.displayReadyCapability=new _util.PromiseCapability,f.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},null===(g=this._stats)||void 0===g||g.time("Page Request"),this._pumpOperatorList(p));const v=e=>{var t,n;f.renderTasks.delete(_),(this._maybeCleanupAfterRender||m)&&_classPrivateFieldSet(_pendingCleanup,this,!0),_assertClassBrand(_PDFPageProxy_brand,this,_tryCleanup).call(this,!m),e?(_.capability.reject(e),this._abortOperatorList({intentState:f,reason:e instanceof Error?e:new Error(e)})):_.capability.resolve(),null===(t=this._stats)||void 0===t||t.timeEnd("Rendering"),null===(n=this._stats)||void 0===n||n.timeEnd("Overall")},_=new InternalRenderTask({callback:v,params:{canvasContext:r,viewport:i,transform:o,background:l},objs:this.objs,commonObjs:this.commonObjs,annotationCanvasMap:u,operatorList:f.operatorList,pageIndex:this._pageIndex,canvasFactory:this._transport.canvasFactory,filterFactory:this._transport.filterFactory,useRequestAnimationFrame:!m,pdfBug:this._pdfBug,pageColors:d});((n=f).renderTasks||(n.renderTasks=new Set)).add(_);const y=_.task;return Promise.all([f.displayReadyCapability.promise,c]).then((e=>{var t;let[n,r]=e;this.destroyed?v():(null===(t=this._stats)||void 0===t||t.time("Rendering"),_.initializeGraphics({transparency:n,optionalContentConfig:r}),_.operatorListChanged())})).catch(v),y}getOperatorList(){let{intent:e="display",annotationMode:t=_util.AnnotationMode.ENABLE,printAnnotationStorage:n=null}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const r=this._transport.getRenderingIntent(e,t,n,!0);let i,s=this._intentStates.get(r.cacheKey);var a,o;return s||(s=Object.create(null),this._intentStates.set(r.cacheKey,s)),s.opListReadCapability||(i=Object.create(null),i.operatorListChanged=function(){s.operatorList.lastChunk&&(s.opListReadCapability.resolve(s.operatorList),s.renderTasks.delete(i))},s.opListReadCapability=new _util.PromiseCapability,((a=s).renderTasks||(a.renderTasks=new Set)).add(i),s.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},null===(o=this._stats)||void 0===o||o.time("Page Request"),this._pumpOperatorList(r)),s.opListReadCapability.promise}streamTextContent(){let{includeMarkedContent:e=!1,disableNormalization:t=!1}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this._transport.messageHandler.sendWithStream("GetTextContent",{pageIndex:this._pageIndex,includeMarkedContent:!0===e,disableNormalization:!0===t},{highWaterMark:100,size:e=>e.items.length})}getTextContent(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(this._transport._htmlForXfa)return this.getXfa().then((e=>_xfa_text.XfaText.textContent(e)));const t=this.streamTextContent(e);return new Promise((function(e,n){const r=t.getReader(),i={items:[],styles:Object.create(null)};!function t(){r.read().then((function(n){let{value:r,done:s}=n;s?e(i):(Object.assign(i.styles,r.styles),i.items.push(...r.items),t())}),n)}()}))}getStructTree(){return this._transport.getStructTree(this._pageIndex)}_destroy(){this.destroyed=!0;const e=[];for(const t of this._intentStates.values())if(this._abortOperatorList({intentState:t,reason:new Error("Page was destroyed."),force:!0}),!t.opListReadCapability)for(const n of t.renderTasks)e.push(n.completed),n.cancel();return this.objs.clear(),_classPrivateFieldSet(_pendingCleanup,this,!1),_assertClassBrand(_PDFPageProxy_brand,this,_abortDelayedCleanup).call(this),Promise.all(e)}cleanup(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];_classPrivateFieldSet(_pendingCleanup,this,!0);const t=_assertClassBrand(_PDFPageProxy_brand,this,_tryCleanup).call(this,!1);return e&&t&&this._stats&&(this._stats=new _display_utils.StatTimer),t}_startRenderPage(e,t){var n,r;const i=this._intentStates.get(t);i&&(null===(n=this._stats)||void 0===n||n.timeEnd("Page Request"),null===(r=i.displayReadyCapability)||void 0===r||r.resolve(e))}_renderPageChunk(e,t){for(let n=0,r=e.length;n<r;n++)t.operatorList.fnArray.push(e.fnArray[n]),t.operatorList.argsArray.push(e.argsArray[n]);t.operatorList.lastChunk=e.lastChunk,t.operatorList.separateAnnots=e.separateAnnots;for(const n of t.renderTasks)n.operatorListChanged();e.lastChunk&&_assertClassBrand(_PDFPageProxy_brand,this,_tryCleanup).call(this,!0)}_pumpOperatorList(e){let{renderingIntent:t,cacheKey:n,annotationStorageSerializable:r}=e;const{map:i,transfers:s}=r,a=this._transport.messageHandler.sendWithStream("GetOperatorList",{pageIndex:this._pageIndex,intent:t,cacheKey:n,annotationStorage:i},s).getReader(),o=this._intentStates.get(n);o.streamReader=a;const l=()=>{a.read().then((e=>{let{value:t,done:n}=e;n?o.streamReader=null:this._transport.destroyed||(this._renderPageChunk(t,o),l())}),(e=>{if(o.streamReader=null,!this._transport.destroyed){if(o.operatorList){o.operatorList.lastChunk=!0;for(const e of o.renderTasks)e.operatorListChanged();_assertClassBrand(_PDFPageProxy_brand,this,_tryCleanup).call(this,!0)}if(o.displayReadyCapability)o.displayReadyCapability.reject(e);else{if(!o.opListReadCapability)throw e;o.opListReadCapability.reject(e)}}}))};l()}_abortOperatorList(e){let{intentState:t,reason:n,force:r=!1}=e;if(t.streamReader){if(t.streamReaderCancelTimeout&&(clearTimeout(t.streamReaderCancelTimeout),t.streamReaderCancelTimeout=null),!r){if(t.renderTasks.size>0)return;if(n instanceof _display_utils.RenderingCancelledException){let e=RENDERING_CANCELLED_TIMEOUT;return n.extraDelay>0&&n.extraDelay<1e3&&(e+=n.extraDelay),void(t.streamReaderCancelTimeout=setTimeout((()=>{t.streamReaderCancelTimeout=null,this._abortOperatorList({intentState:t,reason:n,force:!0})}),e))}}if(t.streamReader.cancel(new _util.AbortException(n.message)).catch((()=>{})),t.streamReader=null,!this._transport.destroyed){for(const[e,n]of this._intentStates)if(n===t){this._intentStates.delete(e);break}this.cleanup()}}}get stats(){return this._stats}}function _tryCleanup(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(_assertClassBrand(_PDFPageProxy_brand,this,_abortDelayedCleanup).call(this),!_classPrivateFieldGet(_pendingCleanup,this)||this.destroyed)return!1;if(e)return _classPrivateFieldSet(_delayedCleanupTimeout,this,setTimeout((()=>{_classPrivateFieldSet(_delayedCleanupTimeout,this,null),_assertClassBrand(_PDFPageProxy_brand,this,_tryCleanup).call(this,!1)}),DELAYED_CLEANUP_TIMEOUT)),!1;for(const{renderTasks:t,operatorList:n}of this._intentStates.values())if(t.size>0||!n.lastChunk)return!1;return this._intentStates.clear(),this.objs.clear(),_classPrivateFieldSet(_pendingCleanup,this,!1),!0}function _abortDelayedCleanup(){_classPrivateFieldGet(_delayedCleanupTimeout,this)&&(clearTimeout(_classPrivateFieldGet(_delayedCleanupTimeout,this)),_classPrivateFieldSet(_delayedCleanupTimeout,this,null))}exports.PDFPageProxy=PDFPageProxy;var _listeners=new WeakMap,_deferred=new WeakMap;class LoopbackPort{constructor(){_classPrivateFieldInitSpec(this,_listeners,new Set),_classPrivateFieldInitSpec(this,_deferred,Promise.resolve())}postMessage(e,t){const n={data:structuredClone(e,t?{transfer:t}:null)};_classPrivateFieldGet(_deferred,this).then((()=>{for(const e of _classPrivateFieldGet(_listeners,this))e.call(this,n)}))}addEventListener(e,t){_classPrivateFieldGet(_listeners,this).add(t)}removeEventListener(e,t){_classPrivateFieldGet(_listeners,this).delete(t)}terminate(){_classPrivateFieldGet(_listeners,this).clear()}}exports.LoopbackPort=LoopbackPort;const PDFWorkerUtil={isWorkerDisabled:!1,fallbackWorkerSrc:null,fakeWorkerId:0};if(exports.PDFWorkerUtil=PDFWorkerUtil,_util.isNodeJS)PDFWorkerUtil.isWorkerDisabled=!0,PDFWorkerUtil.fallbackWorkerSrc="./pdf.worker.js";else if("object"===typeof document){var _document;const e=null===(_document=document)||void 0===_document||null===(_document=_document.currentScript)||void 0===_document?void 0:_document.src;e&&(PDFWorkerUtil.fallbackWorkerSrc=e.replace(/(\.(?:min\.)?js)(\?.*)?$/i,".worker$1$2"))}PDFWorkerUtil.isSameOrigin=function(e,t){let n;try{if(n=new URL(e),!n.origin||"null"===n.origin)return!1}catch{return!1}const r=new URL(t,n);return n.origin===r.origin},PDFWorkerUtil.createCDNWrapper=function(e){const t='importScripts("'.concat(e,'");');return URL.createObjectURL(new Blob([t]))};class PDFWorker{constructor(){let{name:e=null,port:t=null,verbosity:n=(0,_util.getVerbosityLevel)()}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(this.name=e,this.destroyed=!1,this.verbosity=n,this._readyCapability=new _util.PromiseCapability,this._port=null,this._webWorker=null,this._messageHandler=null,t){var r;if(null!==(r=_workerPorts._)&&void 0!==r&&r.has(t))throw new Error("Cannot use more than one PDFWorker per port.");return(_workerPorts._||(_workerPorts._=new WeakMap)).set(t,this),void this._initializeFromPort(t)}this._initialize()}get promise(){return this._readyCapability.promise}get port(){return this._port}get messageHandler(){return this._messageHandler}_initializeFromPort(e){this._port=e,this._messageHandler=new _message_handler.MessageHandler("main","worker",e),this._messageHandler.on("ready",(function(){})),this._readyCapability.resolve(),this._messageHandler.send("configure",{verbosity:this.verbosity})}_initialize(){if(!PDFWorkerUtil.isWorkerDisabled&&!PDFWorker._mainThreadWorkerMessageHandler){let{workerSrc:e}=PDFWorker;try{PDFWorkerUtil.isSameOrigin(window.location.href,e)||(e=PDFWorkerUtil.createCDNWrapper(new URL(e,window.location).href));const t=new Worker(e),n=new _message_handler.MessageHandler("main","worker",t),r=()=>{t.removeEventListener("error",i),n.destroy(),t.terminate(),this.destroyed?this._readyCapability.reject(new Error("Worker was destroyed")):this._setupFakeWorker()},i=()=>{this._webWorker||r()};t.addEventListener("error",i),n.on("test",(e=>{t.removeEventListener("error",i),this.destroyed?r():e?(this._messageHandler=n,this._port=t,this._webWorker=t,this._readyCapability.resolve(),n.send("configure",{verbosity:this.verbosity})):(this._setupFakeWorker(),n.destroy(),t.terminate())})),n.on("ready",(e=>{if(t.removeEventListener("error",i),this.destroyed)r();else try{s()}catch{this._setupFakeWorker()}}));const s=()=>{const e=new Uint8Array;n.send("test",e,[e.buffer])};return void s()}catch{(0,_util.info)("The worker has been disabled.")}}this._setupFakeWorker()}_setupFakeWorker(){PDFWorkerUtil.isWorkerDisabled||((0,_util.warn)("Setting up fake worker."),PDFWorkerUtil.isWorkerDisabled=!0),PDFWorker._setupFakeWorkerGlobal.then((e=>{if(this.destroyed)return void this._readyCapability.reject(new Error("Worker was destroyed"));const t=new LoopbackPort;this._port=t;const n="fake".concat(PDFWorkerUtil.fakeWorkerId++),r=new _message_handler.MessageHandler(n+"_worker",n,t);e.setup(r,t);const i=new _message_handler.MessageHandler(n,n+"_worker",t);this._messageHandler=i,this._readyCapability.resolve(),i.send("configure",{verbosity:this.verbosity})})).catch((e=>{this._readyCapability.reject(new Error('Setting up fake worker failed: "'.concat(e.message,'".')))}))}destroy(){var e;this.destroyed=!0,this._webWorker&&(this._webWorker.terminate(),this._webWorker=null),null===(e=_workerPorts._)||void 0===e||e.delete(this._port),this._port=null,this._messageHandler&&(this._messageHandler.destroy(),this._messageHandler=null)}static fromPort(e){var t;if(null===e||void 0===e||!e.port)throw new Error("PDFWorker.fromPort - invalid method signature.");const n=null===(t=_assertClassBrand(PDFWorker,this,_workerPorts)._)||void 0===t?void 0:t.get(e.port);if(n){if(n._pendingDestroy)throw new Error("PDFWorker.fromPort - the worker is being destroyed.\nPlease remember to await `PDFDocumentLoadingTask.destroy()`-calls.");return n}return new PDFWorker(e)}static get workerSrc(){if(_worker_options.GlobalWorkerOptions.workerSrc)return _worker_options.GlobalWorkerOptions.workerSrc;if(null!==PDFWorkerUtil.fallbackWorkerSrc)return _util.isNodeJS||(0,_display_utils.deprecated)('No "GlobalWorkerOptions.workerSrc" specified.'),PDFWorkerUtil.fallbackWorkerSrc;throw new Error('No "GlobalWorkerOptions.workerSrc" specified.')}static get _mainThreadWorkerMessageHandler(){try{var e;return(null===(e=globalThis.pdfjsWorker)||void 0===e?void 0:e.WorkerMessageHandler)||null}catch{return null}}static get _setupFakeWorkerGlobal(){const loader=async()=>{const mainWorkerMessageHandler=this._mainThreadWorkerMessageHandler;if(mainWorkerMessageHandler)return mainWorkerMessageHandler;if(_util.isNodeJS){const worker=eval("require")(this.workerSrc);return worker.WorkerMessageHandler}return await(0,_display_utils.loadScript)(this.workerSrc),window.pdfjsWorker.WorkerMessageHandler};return(0,_util.shadow)(this,"_setupFakeWorkerGlobal",loader())}}var _workerPorts={_:void 0};exports.PDFWorker=PDFWorker;var _methodPromises=new WeakMap,_pageCache=new WeakMap,_pagePromises=new WeakMap,_passwordCapability=new WeakMap,_WorkerTransport_brand=new WeakSet;class WorkerTransport{constructor(e,t,n,r,i){_classPrivateMethodInitSpec(this,_WorkerTransport_brand),_classPrivateFieldInitSpec(this,_methodPromises,new Map),_classPrivateFieldInitSpec(this,_pageCache,new Map),_classPrivateFieldInitSpec(this,_pagePromises,new Map),_classPrivateFieldInitSpec(this,_passwordCapability,null),this.messageHandler=e,this.loadingTask=t,this.commonObjs=new PDFObjects,this.fontLoader=new _font_loader.FontLoader({ownerDocument:r.ownerDocument,styleElement:r.styleElement}),this._params=r,this.canvasFactory=i.canvasFactory,this.filterFactory=i.filterFactory,this.cMapReaderFactory=i.cMapReaderFactory,this.standardFontDataFactory=i.standardFontDataFactory,this.destroyed=!1,this.destroyCapability=null,this._networkStream=n,this._fullReader=null,this._lastProgress=null,this.downloadInfoCapability=new _util.PromiseCapability,this.setupMessageHandler()}get annotationStorage(){return(0,_util.shadow)(this,"annotationStorage",new _annotation_storage.AnnotationStorage)}getRenderingIntent(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:_util.AnnotationMode.ENABLE,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],i=_util.RenderingIntentFlag.DISPLAY,s=_annotation_storage.SerializableEmpty;switch(e){case"any":i=_util.RenderingIntentFlag.ANY;break;case"display":break;case"print":i=_util.RenderingIntentFlag.PRINT;break;default:(0,_util.warn)("getRenderingIntent - invalid intent: ".concat(e))}switch(t){case _util.AnnotationMode.DISABLE:i+=_util.RenderingIntentFlag.ANNOTATIONS_DISABLE;break;case _util.AnnotationMode.ENABLE:break;case _util.AnnotationMode.ENABLE_FORMS:i+=_util.RenderingIntentFlag.ANNOTATIONS_FORMS;break;case _util.AnnotationMode.ENABLE_STORAGE:i+=_util.RenderingIntentFlag.ANNOTATIONS_STORAGE,s=(i&_util.RenderingIntentFlag.PRINT&&n instanceof _annotation_storage.PrintAnnotationStorage?n:this.annotationStorage).serializable;break;default:(0,_util.warn)("getRenderingIntent - invalid annotationMode: ".concat(t))}return r&&(i+=_util.RenderingIntentFlag.OPLIST),{renderingIntent:i,cacheKey:"".concat(i,"_").concat(s.hash),annotationStorageSerializable:s}}destroy(){var e;if(this.destroyCapability)return this.destroyCapability.promise;this.destroyed=!0,this.destroyCapability=new _util.PromiseCapability,null===(e=_classPrivateFieldGet(_passwordCapability,this))||void 0===e||e.reject(new Error("Worker was destroyed during onPassword callback"));const t=[];for(const r of _classPrivateFieldGet(_pageCache,this).values())t.push(r._destroy());_classPrivateFieldGet(_pageCache,this).clear(),_classPrivateFieldGet(_pagePromises,this).clear(),this.hasOwnProperty("annotationStorage")&&this.annotationStorage.resetModified();const n=this.messageHandler.sendWithPromise("Terminate",null);return t.push(n),Promise.all(t).then((()=>{var e;this.commonObjs.clear(),this.fontLoader.clear(),_classPrivateFieldGet(_methodPromises,this).clear(),this.filterFactory.destroy(),null===(e=this._networkStream)||void 0===e||e.cancelAllRequests(new _util.AbortException("Worker was terminated.")),this.messageHandler&&(this.messageHandler.destroy(),this.messageHandler=null),this.destroyCapability.resolve()}),this.destroyCapability.reject),this.destroyCapability.promise}setupMessageHandler(){const{messageHandler:e,loadingTask:t}=this;e.on("GetReader",((e,t)=>{(0,_util.assert)(this._networkStream,"GetReader - no `IPDFStream` instance available."),this._fullReader=this._networkStream.getFullReader(),this._fullReader.onProgress=e=>{this._lastProgress={loaded:e.loaded,total:e.total}},t.onPull=()=>{this._fullReader.read().then((function(e){let{value:n,done:r}=e;r?t.close():((0,_util.assert)(n instanceof ArrayBuffer,"GetReader - expected an ArrayBuffer."),t.enqueue(new Uint8Array(n),1,[n]))})).catch((e=>{t.error(e)}))},t.onCancel=e=>{this._fullReader.cancel(e),t.ready.catch((e=>{if(!this.destroyed)throw e}))}})),e.on("ReaderHeadersReady",(e=>{const n=new _util.PromiseCapability,r=this._fullReader;return r.headersReady.then((()=>{var e;r.isStreamingSupported&&r.isRangeSupported||(this._lastProgress&&(null===(e=t.onProgress)||void 0===e||e.call(t,this._lastProgress)),r.onProgress=e=>{var n;null===(n=t.onProgress)||void 0===n||n.call(t,{loaded:e.loaded,total:e.total})});n.resolve({isStreamingSupported:r.isStreamingSupported,isRangeSupported:r.isRangeSupported,contentLength:r.contentLength})}),n.reject),n.promise})),e.on("GetRangeReader",((e,t)=>{(0,_util.assert)(this._networkStream,"GetRangeReader - no `IPDFStream` instance available.");const n=this._networkStream.getRangeReader(e.begin,e.end);n?(t.onPull=()=>{n.read().then((function(e){let{value:n,done:r}=e;r?t.close():((0,_util.assert)(n instanceof ArrayBuffer,"GetRangeReader - expected an ArrayBuffer."),t.enqueue(new Uint8Array(n),1,[n]))})).catch((e=>{t.error(e)}))},t.onCancel=e=>{n.cancel(e),t.ready.catch((e=>{if(!this.destroyed)throw e}))}):t.close()})),e.on("GetDoc",(e=>{let{pdfInfo:n}=e;this._numPages=n.numPages,this._htmlForXfa=n.htmlForXfa,delete n.htmlForXfa,t._capability.resolve(new PDFDocumentProxy(n,this))})),e.on("DocException",(function(e){let n;switch(e.name){case"PasswordException":n=new _util.PasswordException(e.message,e.code);break;case"InvalidPDFException":n=new _util.InvalidPDFException(e.message);break;case"MissingPDFException":n=new _util.MissingPDFException(e.message);break;case"UnexpectedResponseException":n=new _util.UnexpectedResponseException(e.message,e.status);break;case"UnknownErrorException":n=new _util.UnknownErrorException(e.message,e.details);break;default:(0,_util.unreachable)("DocException - expected a valid Error.")}t._capability.reject(n)})),e.on("PasswordRequest",(e=>{if(_classPrivateFieldSet(_passwordCapability,this,new _util.PromiseCapability),t.onPassword){const r=e=>{e instanceof Error?_classPrivateFieldGet(_passwordCapability,this).reject(e):_classPrivateFieldGet(_passwordCapability,this).resolve({password:e})};try{t.onPassword(r,e.code)}catch(n){_classPrivateFieldGet(_passwordCapability,this).reject(n)}}else _classPrivateFieldGet(_passwordCapability,this).reject(new _util.PasswordException(e.message,e.code));return _classPrivateFieldGet(_passwordCapability,this).promise})),e.on("DataLoaded",(e=>{var n;null===(n=t.onProgress)||void 0===n||n.call(t,{loaded:e.length,total:e.length}),this.downloadInfoCapability.resolve(e)})),e.on("StartRenderPage",(e=>{this.destroyed||_classPrivateFieldGet(_pageCache,this).get(e.pageIndex)._startRenderPage(e.transparency,e.cacheKey)})),e.on("commonobj",(t=>{var n;let[r,i,s]=t;if(!this.destroyed&&!this.commonObjs.has(r))switch(i){case"Font":const t=this._params;if("error"in s){const e=s.error;(0,_util.warn)("Error during font loading: ".concat(e)),this.commonObjs.resolve(r,e);break}const a=t.pdfBug&&null!==(n=globalThis.FontInspector)&&void 0!==n&&n.enabled?(e,t)=>globalThis.FontInspector.fontAdded(e,t):null,o=new _font_loader.FontFaceObject(s,{isEvalSupported:t.isEvalSupported,disableFontFace:t.disableFontFace,ignoreErrors:t.ignoreErrors,inspectFont:a});this.fontLoader.bind(o).catch((t=>e.sendWithPromise("FontFallback",{id:r}))).finally((()=>{!t.fontExtraProperties&&o.data&&(o.data=null),this.commonObjs.resolve(r,o)}));break;case"FontPath":case"Image":case"Pattern":this.commonObjs.resolve(r,s);break;default:throw new Error("Got unknown common object type ".concat(i))}})),e.on("obj",(e=>{let[t,n,r,i]=e;if(this.destroyed)return;const s=_classPrivateFieldGet(_pageCache,this).get(n);if(!s.objs.has(t))switch(r){case"Image":if(s.objs.resolve(t,i),i){let e;if(i.bitmap){const{width:t,height:n}=i;e=t*n*4}else{var a;e=(null===(a=i.data)||void 0===a?void 0:a.length)||0}e>_util.MAX_IMAGE_SIZE_TO_CACHE&&(s._maybeCleanupAfterRender=!0)}break;case"Pattern":s.objs.resolve(t,i);break;default:throw new Error("Got unknown object type ".concat(r))}})),e.on("DocProgress",(e=>{var n;this.destroyed||null===(n=t.onProgress)||void 0===n||n.call(t,{loaded:e.loaded,total:e.total})})),e.on("FetchBuiltInCMap",(e=>this.destroyed?Promise.reject(new Error("Worker was destroyed.")):this.cMapReaderFactory?this.cMapReaderFactory.fetch(e):Promise.reject(new Error("CMapReaderFactory not initialized, see the `useWorkerFetch` parameter.")))),e.on("FetchStandardFontData",(e=>this.destroyed?Promise.reject(new Error("Worker was destroyed.")):this.standardFontDataFactory?this.standardFontDataFactory.fetch(e):Promise.reject(new Error("StandardFontDataFactory not initialized, see the `useWorkerFetch` parameter."))))}getData(){return this.messageHandler.sendWithPromise("GetData",null)}saveDocument(){var e,t;this.annotationStorage.size<=0&&(0,_util.warn)("saveDocument called while `annotationStorage` is empty, please use the getData-method instead.");const{map:n,transfers:r}=this.annotationStorage.serializable;return this.messageHandler.sendWithPromise("SaveDocument",{isPureXfa:!!this._htmlForXfa,numPages:this._numPages,annotationStorage:n,filename:null!==(e=null===(t=this._fullReader)||void 0===t?void 0:t.filename)&&void 0!==e?e:null},r).finally((()=>{this.annotationStorage.resetModified()}))}getPage(e){if(!Number.isInteger(e)||e<=0||e>this._numPages)return Promise.reject(new Error("Invalid page request."));const t=e-1,n=_classPrivateFieldGet(_pagePromises,this).get(t);if(n)return n;const r=this.messageHandler.sendWithPromise("GetPage",{pageIndex:t}).then((e=>{if(this.destroyed)throw new Error("Transport destroyed");const n=new PDFPageProxy(t,e,this,this._params.pdfBug);return _classPrivateFieldGet(_pageCache,this).set(t,n),n}));return _classPrivateFieldGet(_pagePromises,this).set(t,r),r}getPageIndex(e){return"object"!==typeof e||null===e||!Number.isInteger(e.num)||e.num<0||!Number.isInteger(e.gen)||e.gen<0?Promise.reject(new Error("Invalid pageIndex request.")):this.messageHandler.sendWithPromise("GetPageIndex",{num:e.num,gen:e.gen})}getAnnotations(e,t){return this.messageHandler.sendWithPromise("GetAnnotations",{pageIndex:e,intent:t})}getFieldObjects(){return _assertClassBrand(_WorkerTransport_brand,this,_cacheSimpleMethod).call(this,"GetFieldObjects")}hasJSActions(){return _assertClassBrand(_WorkerTransport_brand,this,_cacheSimpleMethod).call(this,"HasJSActions")}getCalculationOrderIds(){return this.messageHandler.sendWithPromise("GetCalculationOrderIds",null)}getDestinations(){return this.messageHandler.sendWithPromise("GetDestinations",null)}getDestination(e){return"string"!==typeof e?Promise.reject(new Error("Invalid destination request.")):this.messageHandler.sendWithPromise("GetDestination",{id:e})}getPageLabels(){return this.messageHandler.sendWithPromise("GetPageLabels",null)}getPageLayout(){return this.messageHandler.sendWithPromise("GetPageLayout",null)}getPageMode(){return this.messageHandler.sendWithPromise("GetPageMode",null)}getViewerPreferences(){return this.messageHandler.sendWithPromise("GetViewerPreferences",null)}getOpenAction(){return this.messageHandler.sendWithPromise("GetOpenAction",null)}getAttachments(){return this.messageHandler.sendWithPromise("GetAttachments",null)}getDocJSActions(){return _assertClassBrand(_WorkerTransport_brand,this,_cacheSimpleMethod).call(this,"GetDocJSActions")}getPageJSActions(e){return this.messageHandler.sendWithPromise("GetPageJSActions",{pageIndex:e})}getStructTree(e){return this.messageHandler.sendWithPromise("GetStructTree",{pageIndex:e})}getOutline(){return this.messageHandler.sendWithPromise("GetOutline",null)}getOptionalContentConfig(){return this.messageHandler.sendWithPromise("GetOptionalContentConfig",null).then((e=>new _optional_content_config.OptionalContentConfig(e)))}getPermissions(){return this.messageHandler.sendWithPromise("GetPermissions",null)}getMetadata(){const e="GetMetadata",t=_classPrivateFieldGet(_methodPromises,this).get(e);if(t)return t;const n=this.messageHandler.sendWithPromise(e,null).then((e=>{var t,n,r,i;return{info:e[0],metadata:e[1]?new _metadata.Metadata(e[1]):null,contentDispositionFilename:null!==(t=null===(n=this._fullReader)||void 0===n?void 0:n.filename)&&void 0!==t?t:null,contentLength:null!==(r=null===(i=this._fullReader)||void 0===i?void 0:i.contentLength)&&void 0!==r?r:null}}));return _classPrivateFieldGet(_methodPromises,this).set(e,n),n}getMarkInfo(){return this.messageHandler.sendWithPromise("GetMarkInfo",null)}async startCleanup(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(!this.destroyed){await this.messageHandler.sendWithPromise("Cleanup",null);for(const e of _classPrivateFieldGet(_pageCache,this).values())if(!e.cleanup())throw new Error("startCleanup: Page ".concat(e.pageNumber," is currently rendering."));this.commonObjs.clear(),e||this.fontLoader.clear(),_classPrivateFieldGet(_methodPromises,this).clear(),this.filterFactory.destroy(!0)}}get loadingParams(){const{disableAutoFetch:e,enableXfa:t}=this._params;return(0,_util.shadow)(this,"loadingParams",{disableAutoFetch:e,enableXfa:t})}}function _cacheSimpleMethod(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;const n=_classPrivateFieldGet(_methodPromises,this).get(e);if(n)return n;const r=this.messageHandler.sendWithPromise(e,t);return _classPrivateFieldGet(_methodPromises,this).set(e,r),r}var _objs=new WeakMap,_PDFObjects_brand=new WeakSet;class PDFObjects{constructor(){_classPrivateMethodInitSpec(this,_PDFObjects_brand),_classPrivateFieldInitSpec(this,_objs,Object.create(null))}get(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(t){const n=_assertClassBrand(_PDFObjects_brand,this,_ensureObj).call(this,e);return n.capability.promise.then((()=>t(n.data))),null}const n=_classPrivateFieldGet(_objs,this)[e];if(null===n||void 0===n||!n.capability.settled)throw new Error("Requesting object that isn't resolved yet ".concat(e,"."));return n.data}has(e){const t=_classPrivateFieldGet(_objs,this)[e];return(null===t||void 0===t?void 0:t.capability.settled)||!1}resolve(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;const n=_assertClassBrand(_PDFObjects_brand,this,_ensureObj).call(this,e);n.data=t,n.capability.resolve()}clear(){for(const t in _classPrivateFieldGet(_objs,this)){var e;const{data:n}=_classPrivateFieldGet(_objs,this)[t];null===n||void 0===n||null===(e=n.bitmap)||void 0===e||e.close()}_classPrivateFieldSet(_objs,this,Object.create(null))}}function _ensureObj(e){var t;return(t=_classPrivateFieldGet(_objs,this))[e]||(t[e]={capability:new _util.PromiseCapability,data:null})}var _internalRenderTask=new WeakMap;class RenderTask{constructor(e){_classPrivateFieldInitSpec(this,_internalRenderTask,null),_classPrivateFieldSet(_internalRenderTask,this,e),this.onContinue=null}get promise(){return _classPrivateFieldGet(_internalRenderTask,this).capability.promise}cancel(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;_classPrivateFieldGet(_internalRenderTask,this).cancel(null,e)}get separateAnnots(){const{separateAnnots:e}=_classPrivateFieldGet(_internalRenderTask,this).operatorList;if(!e)return!1;const{annotationCanvasMap:t}=_classPrivateFieldGet(_internalRenderTask,this);return e.form||e.canvas&&(null===t||void 0===t?void 0:t.size)>0}}exports.RenderTask=RenderTask;class InternalRenderTask{constructor(e){let{callback:t,params:n,objs:r,commonObjs:i,annotationCanvasMap:s,operatorList:a,pageIndex:o,canvasFactory:l,filterFactory:c,useRequestAnimationFrame:u=!1,pdfBug:d=!1,pageColors:h=null}=e;this.callback=t,this.params=n,this.objs=r,this.commonObjs=i,this.annotationCanvasMap=s,this.operatorListIdx=null,this.operatorList=a,this._pageIndex=o,this.canvasFactory=l,this.filterFactory=c,this._pdfBug=d,this.pageColors=h,this.running=!1,this.graphicsReadyCallback=null,this.graphicsReady=!1,this._useRequestAnimationFrame=!0===u&&"undefined"!==typeof window,this.cancelled=!1,this.capability=new _util.PromiseCapability,this.task=new RenderTask(this),this._cancelBound=this.cancel.bind(this),this._continueBound=this._continue.bind(this),this._scheduleNextBound=this._scheduleNext.bind(this),this._nextBound=this._next.bind(this),this._canvas=n.canvasContext.canvas}get completed(){return this.capability.promise.catch((function(){}))}initializeGraphics(e){var t,n;let{transparency:r=!1,optionalContentConfig:i}=e;if(this.cancelled)return;if(this._canvas){if(_canvasInUse._.has(this._canvas))throw new Error("Cannot use the same canvas during multiple render() operations. Use different canvas or ensure previous operations were cancelled or completed.");_canvasInUse._.add(this._canvas)}this._pdfBug&&null!==(t=globalThis.StepperManager)&&void 0!==t&&t.enabled&&(this.stepper=globalThis.StepperManager.create(this._pageIndex),this.stepper.init(this.operatorList),this.stepper.nextBreakPoint=this.stepper.getNextBreakPoint());const{canvasContext:s,viewport:a,transform:o,background:l}=this.params;this.gfx=new _canvas.CanvasGraphics(s,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:i},this.annotationCanvasMap,this.pageColors),this.gfx.beginDrawing({transform:o,viewport:a,transparency:r,background:l}),this.operatorListIdx=0,this.graphicsReady=!0,null===(n=this.graphicsReadyCallback)||void 0===n||n.call(this)}cancel(){var e;let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;this.running=!1,this.cancelled=!0,null===(e=this.gfx)||void 0===e||e.endDrawing(),_canvasInUse._.delete(this._canvas),this.callback(t||new _display_utils.RenderingCancelledException("Rendering cancelled, page ".concat(this._pageIndex+1),n))}operatorListChanged(){var e;this.graphicsReady?(null===(e=this.stepper)||void 0===e||e.updateOperatorList(this.operatorList),this.running||this._continue()):this.graphicsReadyCallback||(this.graphicsReadyCallback=this._continueBound)}_continue(){this.running=!0,this.cancelled||(this.task.onContinue?this.task.onContinue(this._scheduleNextBound):this._scheduleNext())}_scheduleNext(){this._useRequestAnimationFrame?window.requestAnimationFrame((()=>{this._nextBound().catch(this._cancelBound)})):Promise.resolve().then(this._nextBound).catch(this._cancelBound)}async _next(){this.cancelled||(this.operatorListIdx=this.gfx.executeOperatorList(this.operatorList,this.operatorListIdx,this._continueBound,this.stepper),this.operatorListIdx===this.operatorList.argsArray.length&&(this.running=!1,this.operatorList.lastChunk&&(this.gfx.endDrawing(),_canvasInUse._.delete(this._canvas),this.callback())))}}var _canvasInUse={_:new WeakSet};const version="3.11.174";exports.version=version;const build="ce8716743";exports.build=build},(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.SerializableEmpty=t.PrintAnnotationStorage=t.AnnotationStorage=void 0;var r=n(1),i=n(4),s=n(8);const a=Object.freeze({map:null,hash:"",transfers:void 0});t.SerializableEmpty=a;var o=new WeakMap,l=new WeakMap,c=new WeakSet;class u{constructor(){_classPrivateMethodInitSpec(this,c),_classPrivateFieldInitSpec(this,o,!1),_classPrivateFieldInitSpec(this,l,new Map),this.onSetModified=null,this.onResetModified=null,this.onAnnotationEditor=null}getValue(e,t){const n=_classPrivateFieldGet(l,this).get(e);return void 0===n?t:Object.assign(t,n)}getRawValue(e){return _classPrivateFieldGet(l,this).get(e)}remove(e){if(_classPrivateFieldGet(l,this).delete(e),0===_classPrivateFieldGet(l,this).size&&this.resetModified(),"function"===typeof this.onAnnotationEditor){for(const e of _classPrivateFieldGet(l,this).values())if(e instanceof i.AnnotationEditor)return;this.onAnnotationEditor(null)}}setValue(e,t){const n=_classPrivateFieldGet(l,this).get(e);let r=!1;if(void 0!==n)for(const[i,s]of Object.entries(t))n[i]!==s&&(r=!0,n[i]=s);else r=!0,_classPrivateFieldGet(l,this).set(e,t);r&&_assertClassBrand(c,this,d).call(this),t instanceof i.AnnotationEditor&&"function"===typeof this.onAnnotationEditor&&this.onAnnotationEditor(t.constructor._type)}has(e){return _classPrivateFieldGet(l,this).has(e)}getAll(){return _classPrivateFieldGet(l,this).size>0?(0,r.objectFromMap)(_classPrivateFieldGet(l,this)):null}setAll(e){for(const[t,n]of Object.entries(e))this.setValue(t,n)}get size(){return _classPrivateFieldGet(l,this).size}resetModified(){_classPrivateFieldGet(o,this)&&(_classPrivateFieldSet(o,this,!1),"function"===typeof this.onResetModified&&this.onResetModified())}get print(){return new p(this)}get serializable(){if(0===_classPrivateFieldGet(l,this).size)return a;const e=new Map,t=new s.MurmurHash3_64,n=[],r=Object.create(null);let o=!1;for(const[s,a]of _classPrivateFieldGet(l,this)){const n=a instanceof i.AnnotationEditor?a.serialize(!1,r):a;n&&(e.set(s,n),t.update("".concat(s,":").concat(JSON.stringify(n))),o||(o=!!n.bitmap))}if(o)for(const i of e.values())i.bitmap&&n.push(i.bitmap);return e.size>0?{map:e,hash:t.hexdigest(),transfers:n}:a}}function d(){_classPrivateFieldGet(o,this)||(_classPrivateFieldSet(o,this,!0),"function"===typeof this.onSetModified&&this.onSetModified())}t.AnnotationStorage=u;var h=new WeakMap;class p extends u{constructor(e){super(),_classPrivateFieldInitSpec(this,h,void 0);const{map:t,hash:n,transfers:r}=e.serializable,i=structuredClone(t,r?{transfer:r}:null);_classPrivateFieldSet(h,this,{map:i,hash:n,transfers:r})}get print(){(0,r.unreachable)("Should not call PrintAnnotationStorage.print")}get serializable(){return _classPrivateFieldGet(h,this)}}t.PrintAnnotationStorage=p},(e,t,n)=>{var r;Object.defineProperty(t,"__esModule",{value:!0}),t.AnnotationEditor=void 0;var i=n(5),s=n(1),a=n(6),o=new WeakMap,l=new WeakMap,c=new WeakMap,u=new WeakMap,d=new WeakMap,h=new WeakMap,p=new WeakMap,f=new WeakMap,m=new WeakMap,g=new WeakMap,v=new WeakMap,_=new WeakMap,y=new WeakMap,b=new WeakMap,w=new WeakSet;class S{constructor(e){_classPrivateMethodInitSpec(this,w),_classPrivateFieldInitSpec(this,o,""),_classPrivateFieldInitSpec(this,l,!1),_classPrivateFieldInitSpec(this,c,null),_classPrivateFieldInitSpec(this,u,null),_classPrivateFieldInitSpec(this,d,null),_classPrivateFieldInitSpec(this,h,!1),_classPrivateFieldInitSpec(this,p,null),_classPrivateFieldInitSpec(this,f,this.focusin.bind(this)),_classPrivateFieldInitSpec(this,m,this.focusout.bind(this)),_classPrivateFieldInitSpec(this,g,!1),_classPrivateFieldInitSpec(this,v,!1),_classPrivateFieldInitSpec(this,_,!1),_defineProperty(this,"_initialOptions",Object.create(null)),_defineProperty(this,"_uiManager",null),_defineProperty(this,"_focusEventsAllowed",!0),_defineProperty(this,"_l10nPromise",null),_classPrivateFieldInitSpec(this,y,!1),_classPrivateFieldInitSpec(this,b,S._zIndex++),this.constructor===S&&(0,s.unreachable)("Cannot initialize AnnotationEditor."),this.parent=e.parent,this.id=e.id,this.width=this.height=null,this.pageIndex=e.parent.pageIndex,this.name=e.name,this.div=null,this._uiManager=e.uiManager,this.annotationElementId=null,this._willKeepAspectRatio=!1,this._initialOptions.isCentered=e.isCentered,this._structTreeParentId=null;const{rotation:t,rawDims:{pageWidth:n,pageHeight:r,pageX:i,pageY:a}}=this.parent.viewport;this.rotation=t,this.pageRotation=(360+t-this._uiManager.viewParameters.rotation)%360,this.pageDimensions=[n,r],this.pageTranslation=[i,a];const[P,C]=this.parentDimensions;this.x=e.x/P,this.y=e.y/C,this.isAttachedToDOM=!1,this.deleted=!1}get editorType(){return Object.getPrototypeOf(this).constructor._type}static get _defaultLineColor(){return(0,s.shadow)(this,"_defaultLineColor",this._colorManager.getHexCode("CanvasText"))}static deleteAnnotationElement(e){const t=new R({id:e.parent.getNextId(),parent:e.parent,uiManager:e._uiManager});t.annotationElementId=e.annotationElementId,t.deleted=!0,t._uiManager.addToAnnotationStorage(t)}static initialize(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(S._l10nPromise||(S._l10nPromise=new Map(["editor_alt_text_button_label","editor_alt_text_edit_button_label","editor_alt_text_decorative_tooltip"].map((t=>[t,e.get(t)])))),null!==t&&void 0!==t&&t.strings)for(const r of t.strings)S._l10nPromise.set(r,e.get(r));if(-1!==S._borderLineWidth)return;const n=getComputedStyle(document.documentElement);S._borderLineWidth=parseFloat(n.getPropertyValue("--outline-width"))||0}static updateDefaultParams(e,t){}static get defaultPropertiesToUpdate(){return[]}static isHandlingMimeForPasting(e){return!1}static paste(e,t){(0,s.unreachable)("Not implemented")}get propertiesToUpdate(){return[]}get _isDraggable(){return _classPrivateFieldGet(y,this)}set _isDraggable(e){var t;_classPrivateFieldSet(y,this,e),null===(t=this.div)||void 0===t||t.classList.toggle("draggable",e)}center(){const[e,t]=this.pageDimensions;switch(this.parentRotation){case 90:this.x-=this.height*t/(2*e),this.y+=this.width*e/(2*t);break;case 180:this.x+=this.width/2,this.y+=this.height/2;break;case 270:this.x+=this.height*t/(2*e),this.y-=this.width*e/(2*t);break;default:this.x-=this.width/2,this.y-=this.height/2}this.fixAndSetPosition()}addCommands(e){this._uiManager.addCommands(e)}get currentLayer(){return this._uiManager.currentLayer}setInBackground(){this.div.style.zIndex=0}setInForeground(){this.div.style.zIndex=_classPrivateFieldGet(b,this)}setParent(e){null!==e&&(this.pageIndex=e.pageIndex,this.pageDimensions=e.pageDimensions),this.parent=e}focusin(e){this._focusEventsAllowed&&(_classPrivateFieldGet(g,this)?_classPrivateFieldSet(g,this,!1):this.parent.setSelected(this))}focusout(e){var t;if(!this._focusEventsAllowed)return;if(!this.isAttachedToDOM)return;const n=e.relatedTarget;null!==n&&void 0!==n&&n.closest("#".concat(this.id))||(e.preventDefault(),null!==(t=this.parent)&&void 0!==t&&t.isMultipleSelection||this.commitOrRemove())}commitOrRemove(){this.isEmpty()?this.remove():this.commit()}commit(){this.addToAnnotationStorage()}addToAnnotationStorage(){this._uiManager.addToAnnotationStorage(this)}setAt(e,t,n,r){const[i,s]=this.parentDimensions;[n,r]=this.screenToPageTranslation(n,r),this.x=(e+n)/i,this.y=(t+r)/s,this.fixAndSetPosition()}translate(e,t){_assertClassBrand(w,this,P).call(this,this.parentDimensions,e,t)}translateInPage(e,t){_assertClassBrand(w,this,P).call(this,this.pageDimensions,e,t),this.div.scrollIntoView({block:"nearest"})}drag(e,t){const[n,r]=this.parentDimensions;if(this.x+=e/n,this.y+=t/r,this.parent&&(this.x<0||this.x>1||this.y<0||this.y>1)){const{x:e,y:t}=this.div.getBoundingClientRect();this.parent.findNewParent(this,e,t)&&(this.x-=Math.floor(this.x),this.y-=Math.floor(this.y))}let{x:i,y:s}=this;const[a,o]=_assertClassBrand(w,this,C).call(this);i+=a,s+=o,this.div.style.left="".concat((100*i).toFixed(2),"%"),this.div.style.top="".concat((100*s).toFixed(2),"%"),this.div.scrollIntoView({block:"nearest"})}fixAndSetPosition(){const[e,t]=this.pageDimensions;let{x:n,y:r,width:i,height:s}=this;switch(i*=e,s*=t,n*=e,r*=t,this.rotation){case 0:n=Math.max(0,Math.min(e-i,n)),r=Math.max(0,Math.min(t-s,r));break;case 90:n=Math.max(0,Math.min(e-s,n)),r=Math.min(t,Math.max(i,r));break;case 180:n=Math.min(e,Math.max(i,n)),r=Math.min(t,Math.max(s,r));break;case 270:n=Math.min(e,Math.max(s,n)),r=Math.max(0,Math.min(t-i,r))}this.x=n/=e,this.y=r/=t;const[a,o]=_assertClassBrand(w,this,C).call(this);n+=a,r+=o;const{style:l}=this.div;l.left="".concat((100*n).toFixed(2),"%"),l.top="".concat((100*r).toFixed(2),"%"),this.moveInDOM()}screenToPageTranslation(e,t){return E.call(S,e,t,this.parentRotation)}pageTranslationToScreen(e,t){return E.call(S,e,t,360-this.parentRotation)}get parentScale(){return this._uiManager.viewParameters.realScale}get parentRotation(){return(this._uiManager.viewParameters.rotation+this.pageRotation)%360}get parentDimensions(){const{parentScale:e,pageDimensions:[t,n]}=this,r=t*e,i=n*e;return s.FeatureTest.isCSSRoundSupported?[Math.round(r),Math.round(i)]:[r,i]}setDims(e,t){var n;const[r,i]=this.parentDimensions;this.div.style.width="".concat((100*e/r).toFixed(2),"%"),_classPrivateFieldGet(h,this)||(this.div.style.height="".concat((100*t/i).toFixed(2),"%")),null===(n=_classPrivateFieldGet(c,this))||void 0===n||n.classList.toggle("small",e<S.SMALL_EDITOR_SIZE||t<S.SMALL_EDITOR_SIZE)}fixDims(){const{style:e}=this.div,{height:t,width:n}=e,r=n.endsWith("%"),i=!_classPrivateFieldGet(h,this)&&t.endsWith("%");if(r&&i)return;const[s,a]=this.parentDimensions;r||(e.width="".concat((100*parseFloat(n)/s).toFixed(2),"%")),_classPrivateFieldGet(h,this)||i||(e.height="".concat((100*parseFloat(t)/a).toFixed(2),"%"))}getInitialTranslation(){return[0,0]}async addAltTextButton(){if(_classPrivateFieldGet(c,this))return;const e=_classPrivateFieldSet(c,this,document.createElement("button"));e.className="altText";const t=await S._l10nPromise.get("editor_alt_text_button_label");if(e.textContent=t,e.setAttribute("aria-label",t),e.tabIndex="0",e.addEventListener("contextmenu",a.noContextMenu),e.addEventListener("pointerdown",(e=>e.stopPropagation())),e.addEventListener("click",(e=>{e.preventDefault(),this._uiManager.editAltText(this)}),{capture:!0}),e.addEventListener("keydown",(t=>{t.target===e&&"Enter"===t.key&&(t.preventDefault(),this._uiManager.editAltText(this))})),_assertClassBrand(w,this,F).call(this),this.div.append(e),!S.SMALL_EDITOR_SIZE){const t=40;S.SMALL_EDITOR_SIZE=Math.min(128,Math.round(e.getBoundingClientRect().width*(1+t/100)))}}getClientDimensions(){return this.div.getBoundingClientRect()}get altTextData(){return{altText:_classPrivateFieldGet(o,this),decorative:_classPrivateFieldGet(l,this)}}set altTextData(e){let{altText:t,decorative:n}=e;_classPrivateFieldGet(o,this)===t&&_classPrivateFieldGet(l,this)===n||(_classPrivateFieldSet(o,this,t),_classPrivateFieldSet(l,this,n),_assertClassBrand(w,this,F).call(this))}render(){this.div=document.createElement("div"),this.div.setAttribute("data-editor-rotation",(360-this.rotation)%360),this.div.className=this.name,this.div.setAttribute("id",this.id),this.div.setAttribute("tabIndex",0),this.setInForeground(),this.div.addEventListener("focusin",_classPrivateFieldGet(f,this)),this.div.addEventListener("focusout",_classPrivateFieldGet(m,this));const[e,t]=this.parentDimensions;this.parentRotation%180!==0&&(this.div.style.maxWidth="".concat((100*t/e).toFixed(2),"%"),this.div.style.maxHeight="".concat((100*e/t).toFixed(2),"%"));const[n,r]=this.getInitialTranslation();return this.translate(n,r),(0,i.bindEvents)(this,this.div,["pointerdown"]),this.div}pointerdown(e){const{isMac:t}=s.FeatureTest.platform;0!==e.button||e.ctrlKey&&t?e.preventDefault():(_classPrivateFieldSet(g,this,!0),_assertClassBrand(w,this,I).call(this,e))}moveInDOM(){var e;null===(e=this.parent)||void 0===e||e.moveEditorInDOM(this)}_setParentAndPosition(e,t,n){e.changeParent(this),this.x=t,this.y=n,this.fixAndSetPosition()}getRect(e,t){const n=this.parentScale,[r,i]=this.pageDimensions,[s,a]=this.pageTranslation,o=e/n,l=t/n,c=this.x*r,u=this.y*i,d=this.width*r,h=this.height*i;switch(this.rotation){case 0:return[c+o+s,i-u-l-h+a,c+o+d+s,i-u-l+a];case 90:return[c+l+s,i-u+o+a,c+l+h+s,i-u+o+d+a];case 180:return[c-o-d+s,i-u+l+a,c-o+s,i-u+l+h+a];case 270:return[c-l-h+s,i-u-o-d+a,c-l+s,i-u-o+a];default:throw new Error("Invalid rotation")}}getRectInCurrentCoords(e,t){const[n,r,i,s]=e,a=i-n,o=s-r;switch(this.rotation){case 0:return[n,t-s,a,o];case 90:return[n,t-r,o,a];case 180:return[i,t-r,a,o];case 270:return[i,t-s,o,a];default:throw new Error("Invalid rotation")}}onceAdded(){}isEmpty(){return!1}enableEditMode(){_classPrivateFieldSet(_,this,!0)}disableEditMode(){_classPrivateFieldSet(_,this,!1)}isInEditMode(){return _classPrivateFieldGet(_,this)}shouldGetKeyboardEvents(){return!1}needsToBeRebuilt(){return this.div&&!this.isAttachedToDOM}rebuild(){var e,t;null===(e=this.div)||void 0===e||e.addEventListener("focusin",_classPrivateFieldGet(f,this)),null===(t=this.div)||void 0===t||t.addEventListener("focusout",_classPrivateFieldGet(m,this))}serialize(){(0,s.unreachable)("An editor must be serializable")}static deserialize(e,t,n){const r=new this.prototype.constructor({parent:t,id:t.getNextId(),uiManager:n});r.rotation=e.rotation;const[i,s]=r.pageDimensions,[a,o,l,c]=r.getRectInCurrentCoords(e.rect,s);return r.x=a/i,r.y=o/s,r.width=l/i,r.height=c/s,r}remove(){var e;this.div.removeEventListener("focusin",_classPrivateFieldGet(f,this)),this.div.removeEventListener("focusout",_classPrivateFieldGet(m,this)),this.isEmpty()||this.commit(),this.parent?this.parent.remove(this):this._uiManager.removeEditor(this),null===(e=_classPrivateFieldGet(c,this))||void 0===e||e.remove(),_classPrivateFieldSet(c,this,null),_classPrivateFieldSet(u,this,null)}get isResizable(){return!1}makeResizable(){this.isResizable&&(_assertClassBrand(w,this,k).call(this),_classPrivateFieldGet(p,this).classList.remove("hidden"))}select(){var e;this.makeResizable(),null===(e=this.div)||void 0===e||e.classList.add("selectedEditor")}unselect(){var e,t,n;null===(e=_classPrivateFieldGet(p,this))||void 0===e||e.classList.add("hidden"),null===(t=this.div)||void 0===t||t.classList.remove("selectedEditor"),null!==(n=this.div)&&void 0!==n&&n.contains(document.activeElement)&&this._uiManager.currentLayer.div.focus()}updateParams(e,t){}disableEditing(){_classPrivateFieldGet(c,this)&&(_classPrivateFieldGet(c,this).hidden=!0)}enableEditing(){_classPrivateFieldGet(c,this)&&(_classPrivateFieldGet(c,this).hidden=!1)}enterInEditMode(){}get contentDiv(){return this.div}get isEditing(){return _classPrivateFieldGet(v,this)}set isEditing(e){_classPrivateFieldSet(v,this,e),this.parent&&(e?(this.parent.setSelected(this),this.parent.setActiveEditor(this)):this.parent.setActiveEditor(null))}setAspectRatio(e,t){_classPrivateFieldSet(h,this,!0);const n=e/t,{style:r}=this.div;r.aspectRatio=n,r.height="auto"}static get MIN_SIZE(){return 16}}function P(e,t,n){let[r,i]=e;[t,n]=this.screenToPageTranslation(t,n),this.x+=t/r,this.y+=n/i,this.fixAndSetPosition()}function C(){const[e,t]=this.parentDimensions,{_borderLineWidth:n}=r,i=n/e,s=n/t;switch(this.rotation){case 90:return[-i,s];case 180:return[i,s];case 270:return[i,-s];default:return[-i,-s]}}function E(e,t,n){switch(n){case 90:return[t,-e];case 180:return[-e,-t];case 270:return[-t,e];default:return[e,t]}}function x(e){switch(e){case 90:{const[e,t]=this.pageDimensions;return[0,-e/t,t/e,0]}case 180:return[-1,0,0,-1];case 270:{const[e,t]=this.pageDimensions;return[0,e/t,-t/e,0]}default:return[1,0,0,1]}}function k(){if(_classPrivateFieldGet(p,this))return;_classPrivateFieldSet(p,this,document.createElement("div")),_classPrivateFieldGet(p,this).classList.add("resizers");const e=["topLeft","topRight","bottomRight","bottomLeft"];this._willKeepAspectRatio||e.push("topMiddle","middleRight","bottomMiddle","middleLeft");for(const t of e){const e=document.createElement("div");_classPrivateFieldGet(p,this).append(e),e.classList.add("resizer",t),e.addEventListener("pointerdown",_assertClassBrand(w,this,A).bind(this,t)),e.addEventListener("contextmenu",a.noContextMenu)}this.div.prepend(_classPrivateFieldGet(p,this))}function A(e,t){t.preventDefault();const{isMac:n}=s.FeatureTest.platform;if(0!==t.button||t.ctrlKey&&n)return;const r=_assertClassBrand(w,this,T).bind(this,e),i=this._isDraggable;this._isDraggable=!1;const a={passive:!0,capture:!0};window.addEventListener("pointermove",r,a);const o=this.x,l=this.y,c=this.width,u=this.height,d=this.parent.div.style.cursor,h=this.div.style.cursor;this.div.style.cursor=this.parent.div.style.cursor=window.getComputedStyle(t.target).cursor;const p=()=>{this._isDraggable=i,window.removeEventListener("pointerup",p),window.removeEventListener("blur",p),window.removeEventListener("pointermove",r,a),this.parent.div.style.cursor=d,this.div.style.cursor=h;const e=this.x,t=this.y,n=this.width,s=this.height;e===o&&t===l&&n===c&&s===u||this.addCommands({cmd:()=>{this.width=n,this.height=s,this.x=e,this.y=t;const[r,i]=this.parentDimensions;this.setDims(r*n,i*s),this.fixAndSetPosition()},undo:()=>{this.width=c,this.height=u,this.x=o,this.y=l;const[e,t]=this.parentDimensions;this.setDims(e*c,t*u),this.fixAndSetPosition()},mustExec:!0})};window.addEventListener("pointerup",p),window.addEventListener("blur",p)}function T(e,t){const[n,i]=this.parentDimensions,s=this.x,a=this.y,o=this.width,l=this.height,c=r.MIN_SIZE/n,u=r.MIN_SIZE/i,d=e=>Math.round(1e4*e)/1e4,h=_assertClassBrand(w,this,x).call(this,this.rotation),p=(e,t)=>[h[0]*e+h[2]*t,h[1]*e+h[3]*t],f=_assertClassBrand(w,this,x).call(this,360-this.rotation);let m,g,v=!1,_=!1;switch(e){case"topLeft":v=!0,m=(e,t)=>[0,0],g=(e,t)=>[e,t];break;case"topMiddle":m=(e,t)=>[e/2,0],g=(e,t)=>[e/2,t];break;case"topRight":v=!0,m=(e,t)=>[e,0],g=(e,t)=>[0,t];break;case"middleRight":_=!0,m=(e,t)=>[e,t/2],g=(e,t)=>[0,t/2];break;case"bottomRight":v=!0,m=(e,t)=>[e,t],g=(e,t)=>[0,0];break;case"bottomMiddle":m=(e,t)=>[e/2,t],g=(e,t)=>[e/2,0];break;case"bottomLeft":v=!0,m=(e,t)=>[0,t],g=(e,t)=>[e,0];break;case"middleLeft":_=!0,m=(e,t)=>[0,t/2],g=(e,t)=>[e,t/2]}const y=m(o,l),b=g(o,l);let S=p(...b);const P=d(s+S[0]),C=d(a+S[1]);let E=1,k=1,[A,T]=this.screenToPageTranslation(t.movementX,t.movementY);var F,I;if([A,T]=(F=A/n,I=T/i,[f[0]*F+f[2]*I,f[1]*F+f[3]*I]),v){const e=Math.hypot(o,l);E=k=Math.max(Math.min(Math.hypot(b[0]-y[0]-A,b[1]-y[1]-T)/e,1/o,1/l),c/o,u/l)}else _?E=Math.max(c,Math.min(1,Math.abs(b[0]-y[0]-A)))/o:k=Math.max(u,Math.min(1,Math.abs(b[1]-y[1]-T)))/l;const R=d(o*E),M=d(l*k);S=p(...g(R,M));const N=P-S[0],D=C-S[1];this.width=R,this.height=M,this.x=N,this.y=D,this.setDims(n*R,i*M),this.fixAndSetPosition()}async function F(){const e=_classPrivateFieldGet(c,this);if(!e)return;var t;if(!_classPrivateFieldGet(o,this)&&!_classPrivateFieldGet(l,this))return e.classList.remove("done"),void(null===(t=_classPrivateFieldGet(u,this))||void 0===t||t.remove());r._l10nPromise.get("editor_alt_text_edit_button_label").then((t=>{e.setAttribute("aria-label",t)}));let n=_classPrivateFieldGet(u,this);if(!n){_classPrivateFieldSet(u,this,n=document.createElement("span")),n.className="tooltip",n.setAttribute("role","tooltip");const t=n.id="alt-text-tooltip-".concat(this.id);e.setAttribute("aria-describedby",t);const r=100;e.addEventListener("mouseenter",(()=>{_classPrivateFieldSet(d,this,setTimeout((()=>{_classPrivateFieldSet(d,this,null),_classPrivateFieldGet(u,this).classList.add("show"),this._uiManager._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",subtype:this.editorType,data:{action:"alt_text_tooltip"}}})}),r))})),e.addEventListener("mouseleave",(()=>{var e;clearTimeout(_classPrivateFieldGet(d,this)),_classPrivateFieldSet(d,this,null),null===(e=_classPrivateFieldGet(u,this))||void 0===e||e.classList.remove("show")}))}e.classList.add("done"),n.innerText=_classPrivateFieldGet(l,this)?await r._l10nPromise.get("editor_alt_text_decorative_tooltip"):_classPrivateFieldGet(o,this),n.parentNode||e.append(n)}function I(e){if(!this._isDraggable)return;const t=this._uiManager.isSelected(this);let n,r;this._uiManager.setUpDragSession(),t&&(n={passive:!0,capture:!0},r=e=>{const[t,n]=this.screenToPageTranslation(e.movementX,e.movementY);this._uiManager.dragSelectedEditors(t,n)},window.addEventListener("pointermove",r,n));const i=()=>{if(window.removeEventListener("pointerup",i),window.removeEventListener("blur",i),t&&window.removeEventListener("pointermove",r,n),_classPrivateFieldSet(g,this,!1),!this._uiManager.endDragSession()){const{isMac:t}=s.FeatureTest.platform;e.ctrlKey&&!t||e.shiftKey||e.metaKey&&t?this.parent.toggleSelected(this):this.parent.setSelected(this)}};window.addEventListener("pointerup",i),window.addEventListener("blur",i)}r=S,_defineProperty(S,"_borderLineWidth",-1),_defineProperty(S,"_colorManager",new i.ColorManager),_defineProperty(S,"_zIndex",1),_defineProperty(S,"SMALL_EDITOR_SIZE",0),t.AnnotationEditor=S;class R extends S{constructor(e){super(e),this.annotationElementId=e.annotationElementId,this.deleted=!0}serialize(){return{id:this.annotationElementId,deleted:!0,pageIndex:this.pageIndex}}}},(e,t,n)=>{var r;Object.defineProperty(t,"__esModule",{value:!0}),t.KeyboardManager=t.CommandManager=t.ColorManager=t.AnnotationEditorUIManager=void 0,t.bindEvents=function(e,t,n){for(const r of n)t.addEventListener(r,e[r].bind(e))},t.opacityToHex=function(e){return Math.round(Math.min(255,Math.max(1,255*e))).toString(16).padStart(2,"0")};var i=n(1),s=n(6),a=new WeakMap;class o{constructor(){_classPrivateFieldInitSpec(this,a,0)}getId(){var e,t;return"".concat(i.AnnotationEditorPrefix).concat((_classPrivateFieldSet(a,this,(e=_classPrivateFieldGet(a,this),t=e++,e)),t))}}var l=new WeakMap,c=new WeakMap,u=new WeakMap,d=new WeakSet;class h{constructor(){_classPrivateMethodInitSpec(this,d),_classPrivateFieldInitSpec(this,l,(0,i.getUuid)()),_classPrivateFieldInitSpec(this,c,0),_classPrivateFieldInitSpec(this,u,null)}static get _isSVGFittingCanvas(){const e=new OffscreenCanvas(1,3).getContext("2d"),t=new Image;t.src='data:image/svg+xml;charset=UTF-8,<svg viewBox="0 0 1 1" width="1" height="1" xmlns="http://www.w3.org/2000/svg"><rect width="1" height="1" style="fill:red;"/></svg>';const n=t.decode().then((()=>(e.drawImage(t,0,0,1,1,0,0,1,3),0===new Uint32Array(e.getImageData(0,0,1,1).data.buffer)[0])));return(0,i.shadow)(this,"_isSVGFittingCanvas",n)}async getFromFile(e){const{lastModified:t,name:n,size:r,type:i}=e;return _assertClassBrand(d,this,p).call(this,"".concat(t,"_").concat(n,"_").concat(r,"_").concat(i),e)}async getFromUrl(e){return _assertClassBrand(d,this,p).call(this,e,e)}async getFromId(e){_classPrivateFieldGet(u,this)||_classPrivateFieldSet(u,this,new Map);const t=_classPrivateFieldGet(u,this).get(e);return t?t.bitmap?(t.refCounter+=1,t):t.file?this.getFromFile(t.file):this.getFromUrl(t.url):null}getSvgUrl(e){const t=_classPrivateFieldGet(u,this).get(e);return null!==t&&void 0!==t&&t.isSvg?t.svgUrl:null}deleteId(e){_classPrivateFieldGet(u,this)||_classPrivateFieldSet(u,this,new Map);const t=_classPrivateFieldGet(u,this).get(e);t&&(t.refCounter-=1,0===t.refCounter&&(t.bitmap=null))}isValidId(e){return e.startsWith("image_".concat(_classPrivateFieldGet(l,this),"_"))}}async function p(e,t){var n;_classPrivateFieldGet(u,this)||_classPrivateFieldSet(u,this,new Map);let i=_classPrivateFieldGet(u,this).get(e);if(null===i)return null;if(null!==(n=i)&&void 0!==n&&n.bitmap)return i.refCounter+=1,i;try{var s,a;let e;if(i||(i={bitmap:null,id:"image_".concat(_classPrivateFieldGet(l,this),"_").concat((_classPrivateFieldSet(c,this,(s=_classPrivateFieldGet(c,this),a=s++,s)),a)),refCounter:0,isSvg:!1}),"string"===typeof t){i.url=t;const n=await fetch(t);if(!n.ok)throw new Error(n.statusText);e=await n.blob()}else e=i.file=t;if("image/svg+xml"===e.type){const t=r._isSVGFittingCanvas,n=new FileReader,s=new Image,a=new Promise(((e,r)=>{s.onload=()=>{i.bitmap=s,i.isSvg=!0,e()},n.onload=async()=>{const e=i.svgUrl=n.result;s.src=await t?"".concat(e,"#svgView(preserveAspectRatio(none))"):e},s.onerror=n.onerror=r}));n.readAsDataURL(e),await a}else i.bitmap=await createImageBitmap(e);i.refCounter=1}catch(o){console.error(o),i=null}return _classPrivateFieldGet(u,this).set(e,i),i&&_classPrivateFieldGet(u,this).set(i.id,i),i}r=h;var f=new WeakMap,m=new WeakMap,g=new WeakMap,v=new WeakMap;class _{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:128;_classPrivateFieldInitSpec(this,f,[]),_classPrivateFieldInitSpec(this,m,!1),_classPrivateFieldInitSpec(this,g,void 0),_classPrivateFieldInitSpec(this,v,-1),_classPrivateFieldSet(g,this,e)}add(e){let{cmd:t,undo:n,mustExec:r,type:i=NaN,overwriteIfSameType:s=!1,keepUndo:a=!1}=e;if(r&&t(),_classPrivateFieldGet(m,this))return;const o={cmd:t,undo:n,type:i};if(-1===_classPrivateFieldGet(v,this))return _classPrivateFieldGet(f,this).length>0&&(_classPrivateFieldGet(f,this).length=0),_classPrivateFieldSet(v,this,0),void _classPrivateFieldGet(f,this).push(o);if(s&&_classPrivateFieldGet(f,this)[_classPrivateFieldGet(v,this)].type===i)return a&&(o.undo=_classPrivateFieldGet(f,this)[_classPrivateFieldGet(v,this)].undo),void(_classPrivateFieldGet(f,this)[_classPrivateFieldGet(v,this)]=o);const l=_classPrivateFieldGet(v,this)+1;l===_classPrivateFieldGet(g,this)?_classPrivateFieldGet(f,this).splice(0,1):(_classPrivateFieldSet(v,this,l),l<_classPrivateFieldGet(f,this).length&&_classPrivateFieldGet(f,this).splice(l)),_classPrivateFieldGet(f,this).push(o)}undo(){-1!==_classPrivateFieldGet(v,this)&&(_classPrivateFieldSet(m,this,!0),_classPrivateFieldGet(f,this)[_classPrivateFieldGet(v,this)].undo(),_classPrivateFieldSet(m,this,!1),_classPrivateFieldSet(v,this,_classPrivateFieldGet(v,this)-1))}redo(){_classPrivateFieldGet(v,this)<_classPrivateFieldGet(f,this).length-1&&(_classPrivateFieldSet(v,this,_classPrivateFieldGet(v,this)+1),_classPrivateFieldSet(m,this,!0),_classPrivateFieldGet(f,this)[_classPrivateFieldGet(v,this)].cmd(),_classPrivateFieldSet(m,this,!1))}hasSomethingToUndo(){return-1!==_classPrivateFieldGet(v,this)}hasSomethingToRedo(){return _classPrivateFieldGet(v,this)<_classPrivateFieldGet(f,this).length-1}destroy(){_classPrivateFieldSet(f,this,null)}}t.CommandManager=_;var y=new WeakSet;class b{constructor(e){_classPrivateMethodInitSpec(this,y),this.buffer=[],this.callbacks=new Map,this.allKeys=new Set;const{isMac:t}=i.FeatureTest.platform;for(const[n,r,i={}]of e)for(const e of n){const n=e.startsWith("mac+");t&&n?(this.callbacks.set(e.slice(4),{callback:r,options:i}),this.allKeys.add(e.split("+").at(-1))):t||n||(this.callbacks.set(e,{callback:r,options:i}),this.allKeys.add(e.split("+").at(-1)))}}exec(e,t){if(!this.allKeys.has(t.key))return;const n=this.callbacks.get(_assertClassBrand(y,this,w).call(this,t));if(!n)return;const{callback:r,options:{bubbles:i=!1,args:s=[],checker:a=null}}=n;a&&!a(e,t)||(r.bind(e,...s)(),i||(t.stopPropagation(),t.preventDefault()))}}function w(e){e.altKey&&this.buffer.push("alt"),e.ctrlKey&&this.buffer.push("ctrl"),e.metaKey&&this.buffer.push("meta"),e.shiftKey&&this.buffer.push("shift"),this.buffer.push(e.key);const t=this.buffer.join("+");return this.buffer.length=0,t}t.KeyboardManager=b;class S{get _colors(){const e=new Map([["CanvasText",null],["Canvas",null]]);return(0,s.getColorValues)(e),(0,i.shadow)(this,"_colors",e)}convert(e){const t=(0,s.getRGB)(e);if(!window.matchMedia("(forced-colors: active)").matches)return t;for(const[n,r]of this._colors)if(r.every(((e,n)=>e===t[n])))return S._colorsMapping.get(n);return t}getHexCode(e){const t=this._colors.get(e);return t?i.Util.makeHexColor(...t):e}}_defineProperty(S,"_colorsMapping",new Map([["CanvasText",[0,0,0]],["Canvas",[255,255,255]]])),t.ColorManager=S;var P=new WeakMap,C=new WeakMap,E=new WeakMap,x=new WeakMap,k=new WeakMap,A=new WeakMap,T=new WeakMap,F=new WeakMap,I=new WeakMap,R=new WeakMap,M=new WeakMap,N=new WeakMap,D=new WeakMap,O=new WeakMap,L=new WeakMap,j=new WeakMap,U=new WeakMap,G=new WeakMap,B=new WeakMap,W=new WeakMap,z=new WeakMap,q=new WeakMap,H=new WeakMap,V=new WeakMap,K=new WeakMap,X=new WeakMap,Y=new WeakMap,Q=new WeakMap,J=new WeakMap,$=new WeakMap,Z=new WeakMap,ee=new WeakMap,te=new WeakMap,ne=new WeakMap,re=new WeakSet;class ie{static get _keyboardManager(){const e=ie.prototype,t=e=>{const{activeElement:t}=document;return t&&_classPrivateFieldGet(te,e).contains(t)&&e.hasSomethingToControl()},n=this.TRANSLATE_SMALL,r=this.TRANSLATE_BIG;return(0,i.shadow)(this,"_keyboardManager",new b([[["ctrl+a","mac+meta+a"],e.selectAll],[["ctrl+z","mac+meta+z"],e.undo],[["ctrl+y","ctrl+shift+z","mac+meta+shift+z","ctrl+shift+Z","mac+meta+shift+Z"],e.redo],[["Backspace","alt+Backspace","ctrl+Backspace","shift+Backspace","mac+Backspace","mac+alt+Backspace","mac+ctrl+Backspace","Delete","ctrl+Delete","shift+Delete","mac+Delete"],e.delete],[["Escape","mac+Escape"],e.unselectAll],[["ArrowLeft","mac+ArrowLeft"],e.translateSelectedEditors,{args:[-n,0],checker:t}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],e.translateSelectedEditors,{args:[-r,0],checker:t}],[["ArrowRight","mac+ArrowRight"],e.translateSelectedEditors,{args:[n,0],checker:t}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],e.translateSelectedEditors,{args:[r,0],checker:t}],[["ArrowUp","mac+ArrowUp"],e.translateSelectedEditors,{args:[0,-n],checker:t}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],e.translateSelectedEditors,{args:[0,-r],checker:t}],[["ArrowDown","mac+ArrowDown"],e.translateSelectedEditors,{args:[0,n],checker:t}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],e.translateSelectedEditors,{args:[0,r],checker:t}]]))}constructor(e,t,n,r,a,l){_classPrivateMethodInitSpec(this,re),_classPrivateFieldInitSpec(this,P,null),_classPrivateFieldInitSpec(this,C,new Map),_classPrivateFieldInitSpec(this,E,new Map),_classPrivateFieldInitSpec(this,x,null),_classPrivateFieldInitSpec(this,k,null),_classPrivateFieldInitSpec(this,A,new _),_classPrivateFieldInitSpec(this,T,0),_classPrivateFieldInitSpec(this,F,new Set),_classPrivateFieldInitSpec(this,I,null),_classPrivateFieldInitSpec(this,R,null),_classPrivateFieldInitSpec(this,M,new Set),_classPrivateFieldInitSpec(this,N,null),_classPrivateFieldInitSpec(this,D,new o),_classPrivateFieldInitSpec(this,O,!1),_classPrivateFieldInitSpec(this,L,!1),_classPrivateFieldInitSpec(this,j,null),_classPrivateFieldInitSpec(this,U,i.AnnotationEditorType.NONE),_classPrivateFieldInitSpec(this,G,new Set),_classPrivateFieldInitSpec(this,B,null),_classPrivateFieldInitSpec(this,W,this.blur.bind(this)),_classPrivateFieldInitSpec(this,z,this.focus.bind(this)),_classPrivateFieldInitSpec(this,q,this.copy.bind(this)),_classPrivateFieldInitSpec(this,H,this.cut.bind(this)),_classPrivateFieldInitSpec(this,V,this.paste.bind(this)),_classPrivateFieldInitSpec(this,K,this.keydown.bind(this)),_classPrivateFieldInitSpec(this,X,this.onEditingAction.bind(this)),_classPrivateFieldInitSpec(this,Y,this.onPageChanging.bind(this)),_classPrivateFieldInitSpec(this,Q,this.onScaleChanging.bind(this)),_classPrivateFieldInitSpec(this,J,this.onRotationChanging.bind(this)),_classPrivateFieldInitSpec(this,$,{isEditing:!1,isEmpty:!0,hasSomethingToUndo:!1,hasSomethingToRedo:!1,hasSelectedEditor:!1}),_classPrivateFieldInitSpec(this,Z,[0,0]),_classPrivateFieldInitSpec(this,ee,null),_classPrivateFieldInitSpec(this,te,null),_classPrivateFieldInitSpec(this,ne,null),_classPrivateFieldSet(te,this,e),_classPrivateFieldSet(ne,this,t),_classPrivateFieldSet(x,this,n),this._eventBus=r,this._eventBus._on("editingaction",_classPrivateFieldGet(X,this)),this._eventBus._on("pagechanging",_classPrivateFieldGet(Y,this)),this._eventBus._on("scalechanging",_classPrivateFieldGet(Q,this)),this._eventBus._on("rotationchanging",_classPrivateFieldGet(J,this)),_classPrivateFieldSet(k,this,a.annotationStorage),_classPrivateFieldSet(N,this,a.filterFactory),_classPrivateFieldSet(B,this,l),this.viewParameters={realScale:s.PixelsPerInch.PDF_TO_CSS_UNITS,rotation:0}}destroy(){_assertClassBrand(re,this,le).call(this),_assertClassBrand(re,this,ae).call(this),this._eventBus._off("editingaction",_classPrivateFieldGet(X,this)),this._eventBus._off("pagechanging",_classPrivateFieldGet(Y,this)),this._eventBus._off("scalechanging",_classPrivateFieldGet(Q,this)),this._eventBus._off("rotationchanging",_classPrivateFieldGet(J,this));for(const e of _classPrivateFieldGet(E,this).values())e.destroy();_classPrivateFieldGet(E,this).clear(),_classPrivateFieldGet(C,this).clear(),_classPrivateFieldGet(M,this).clear(),_classPrivateFieldSet(P,this,null),_classPrivateFieldGet(G,this).clear(),_classPrivateFieldGet(A,this).destroy(),_classPrivateFieldGet(x,this).destroy()}get hcmFilter(){return(0,i.shadow)(this,"hcmFilter",_classPrivateFieldGet(B,this)?_classPrivateFieldGet(N,this).addHCMFilter(_classPrivateFieldGet(B,this).foreground,_classPrivateFieldGet(B,this).background):"none")}get direction(){return(0,i.shadow)(this,"direction",getComputedStyle(_classPrivateFieldGet(te,this)).direction)}editAltText(e){var t;null===(t=_classPrivateFieldGet(x,this))||void 0===t||t.editAltText(this,e)}onPageChanging(e){let{pageNumber:t}=e;_classPrivateFieldSet(T,this,t-1)}focusMainContainer(){_classPrivateFieldGet(te,this).focus()}findParent(e,t){for(const n of _classPrivateFieldGet(E,this).values()){const{x:r,y:i,width:s,height:a}=n.div.getBoundingClientRect();if(e>=r&&e<=r+s&&t>=i&&t<=i+a)return n}return null}disableUserSelect(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];_classPrivateFieldGet(ne,this).classList.toggle("noUserSelect",e)}addShouldRescale(e){_classPrivateFieldGet(M,this).add(e)}removeShouldRescale(e){_classPrivateFieldGet(M,this).delete(e)}onScaleChanging(e){let{scale:t}=e;this.commitOrRemove(),this.viewParameters.realScale=t*s.PixelsPerInch.PDF_TO_CSS_UNITS;for(const n of _classPrivateFieldGet(M,this))n.onScaleChanging()}onRotationChanging(e){let{pagesRotation:t}=e;this.commitOrRemove(),this.viewParameters.rotation=t}addToAnnotationStorage(e){e.isEmpty()||!_classPrivateFieldGet(k,this)||_classPrivateFieldGet(k,this).has(e.id)||_classPrivateFieldGet(k,this).setValue(e.id,e)}blur(){if(!this.hasSelection)return;const{activeElement:e}=document;for(const t of _classPrivateFieldGet(G,this))if(t.div.contains(e)){_classPrivateFieldSet(j,this,[t,e]),t._focusEventsAllowed=!1;break}}focus(){if(!_classPrivateFieldGet(j,this))return;const[e,t]=_classPrivateFieldGet(j,this);_classPrivateFieldSet(j,this,null),t.addEventListener("focusin",(()=>{e._focusEventsAllowed=!0}),{once:!0}),t.focus()}addEditListeners(){_assertClassBrand(re,this,oe).call(this),_assertClassBrand(re,this,ce).call(this)}removeEditListeners(){_assertClassBrand(re,this,le).call(this),_assertClassBrand(re,this,ue).call(this)}copy(e){var t;if(e.preventDefault(),null===(t=_classPrivateFieldGet(P,this))||void 0===t||t.commitOrRemove(),!this.hasSelection)return;const n=[];for(const r of _classPrivateFieldGet(G,this)){const e=r.serialize(!0);e&&n.push(e)}0!==n.length&&e.clipboardData.setData("application/pdfjs",JSON.stringify(n))}cut(e){this.copy(e),this.delete()}paste(e){e.preventDefault();const{clipboardData:t}=e;for(const i of t.items)for(const e of _classPrivateFieldGet(R,this))if(e.isHandlingMimeForPasting(i.type))return void e.paste(i,this.currentLayer);let n=t.getData("application/pdfjs");if(!n)return;try{n=JSON.parse(n)}catch(s){return void(0,i.warn)('paste: "'.concat(s.message,'".'))}if(!Array.isArray(n))return;this.unselectAll();const r=this.currentLayer;try{const e=[];for(const s of n){const t=r.deserialize(s);if(!t)return;e.push(t)}const t=()=>{for(const t of e)_assertClassBrand(re,this,me).call(this,t);_assertClassBrand(re,this,ve).call(this,e)},i=()=>{for(const t of e)t.remove()};this.addCommands({cmd:t,undo:i,mustExec:!0})}catch(s){(0,i.warn)('paste: "'.concat(s.message,'".'))}}keydown(e){var t;null!==(t=this.getActive())&&void 0!==t&&t.shouldGetKeyboardEvents()||ie._keyboardManager.exec(this,e)}onEditingAction(e){["undo","redo","delete","selectAll"].includes(e.name)&&this[e.name]()}setEditingState(e){e?(_assertClassBrand(re,this,se).call(this),_assertClassBrand(re,this,oe).call(this),_assertClassBrand(re,this,ce).call(this),_assertClassBrand(re,this,de).call(this,{isEditing:_classPrivateFieldGet(U,this)!==i.AnnotationEditorType.NONE,isEmpty:_assertClassBrand(re,this,ge).call(this),hasSomethingToUndo:_classPrivateFieldGet(A,this).hasSomethingToUndo(),hasSomethingToRedo:_classPrivateFieldGet(A,this).hasSomethingToRedo(),hasSelectedEditor:!1})):(_assertClassBrand(re,this,ae).call(this),_assertClassBrand(re,this,le).call(this),_assertClassBrand(re,this,ue).call(this),_assertClassBrand(re,this,de).call(this,{isEditing:!1}),this.disableUserSelect(!1))}registerEditorTypes(e){if(!_classPrivateFieldGet(R,this)){_classPrivateFieldSet(R,this,e);for(const e of _classPrivateFieldGet(R,this))_assertClassBrand(re,this,he).call(this,e.defaultPropertiesToUpdate)}}getId(){return _classPrivateFieldGet(D,this).getId()}get currentLayer(){return _classPrivateFieldGet(E,this).get(_classPrivateFieldGet(T,this))}getLayer(e){return _classPrivateFieldGet(E,this).get(e)}get currentPageIndex(){return _classPrivateFieldGet(T,this)}addLayer(e){_classPrivateFieldGet(E,this).set(e.pageIndex,e),_classPrivateFieldGet(O,this)?e.enable():e.disable()}removeLayer(e){_classPrivateFieldGet(E,this).delete(e.pageIndex)}updateMode(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(_classPrivateFieldGet(U,this)!==e){if(_classPrivateFieldSet(U,this,e),e===i.AnnotationEditorType.NONE)return this.setEditingState(!1),void _assertClassBrand(re,this,fe).call(this);this.setEditingState(!0),_assertClassBrand(re,this,pe).call(this),this.unselectAll();for(const t of _classPrivateFieldGet(E,this).values())t.updateMode(e);if(t)for(const e of _classPrivateFieldGet(C,this).values())if(e.annotationElementId===t){this.setSelected(e),e.enterInEditMode();break}}}updateToolbar(e){e!==_classPrivateFieldGet(U,this)&&this._eventBus.dispatch("switchannotationeditormode",{source:this,mode:e})}updateParams(e,t){if(_classPrivateFieldGet(R,this))if(e!==i.AnnotationEditorParamsType.CREATE){for(const n of _classPrivateFieldGet(G,this))n.updateParams(e,t);for(const n of _classPrivateFieldGet(R,this))n.updateDefaultParams(e,t)}else this.currentLayer.addNewEditor(e)}enableWaiting(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(_classPrivateFieldGet(L,this)!==e){_classPrivateFieldSet(L,this,e);for(const t of _classPrivateFieldGet(E,this).values())e?t.disableClick():t.enableClick(),t.div.classList.toggle("waiting",e)}}getEditors(e){const t=[];for(const n of _classPrivateFieldGet(C,this).values())n.pageIndex===e&&t.push(n);return t}getEditor(e){return _classPrivateFieldGet(C,this).get(e)}addEditor(e){_classPrivateFieldGet(C,this).set(e.id,e)}removeEditor(e){var t;_classPrivateFieldGet(C,this).delete(e.id),this.unselect(e),e.annotationElementId&&_classPrivateFieldGet(F,this).has(e.annotationElementId)||null===(t=_classPrivateFieldGet(k,this))||void 0===t||t.remove(e.id)}addDeletedAnnotationElement(e){_classPrivateFieldGet(F,this).add(e.annotationElementId),e.deleted=!0}isDeletedAnnotationElement(e){return _classPrivateFieldGet(F,this).has(e)}removeDeletedAnnotationElement(e){_classPrivateFieldGet(F,this).delete(e.annotationElementId),e.deleted=!1}setActiveEditor(e){_classPrivateFieldGet(P,this)!==e&&(_classPrivateFieldSet(P,this,e),e&&_assertClassBrand(re,this,he).call(this,e.propertiesToUpdate))}toggleSelected(e){if(_classPrivateFieldGet(G,this).has(e))return _classPrivateFieldGet(G,this).delete(e),e.unselect(),void _assertClassBrand(re,this,de).call(this,{hasSelectedEditor:this.hasSelection});_classPrivateFieldGet(G,this).add(e),e.select(),_assertClassBrand(re,this,he).call(this,e.propertiesToUpdate),_assertClassBrand(re,this,de).call(this,{hasSelectedEditor:!0})}setSelected(e){for(const t of _classPrivateFieldGet(G,this))t!==e&&t.unselect();_classPrivateFieldGet(G,this).clear(),_classPrivateFieldGet(G,this).add(e),e.select(),_assertClassBrand(re,this,he).call(this,e.propertiesToUpdate),_assertClassBrand(re,this,de).call(this,{hasSelectedEditor:!0})}isSelected(e){return _classPrivateFieldGet(G,this).has(e)}unselect(e){e.unselect(),_classPrivateFieldGet(G,this).delete(e),_assertClassBrand(re,this,de).call(this,{hasSelectedEditor:this.hasSelection})}get hasSelection(){return 0!==_classPrivateFieldGet(G,this).size}undo(){_classPrivateFieldGet(A,this).undo(),_assertClassBrand(re,this,de).call(this,{hasSomethingToUndo:_classPrivateFieldGet(A,this).hasSomethingToUndo(),hasSomethingToRedo:!0,isEmpty:_assertClassBrand(re,this,ge).call(this)})}redo(){_classPrivateFieldGet(A,this).redo(),_assertClassBrand(re,this,de).call(this,{hasSomethingToUndo:!0,hasSomethingToRedo:_classPrivateFieldGet(A,this).hasSomethingToRedo(),isEmpty:_assertClassBrand(re,this,ge).call(this)})}addCommands(e){_classPrivateFieldGet(A,this).add(e),_assertClassBrand(re,this,de).call(this,{hasSomethingToUndo:!0,hasSomethingToRedo:!1,isEmpty:_assertClassBrand(re,this,ge).call(this)})}delete(){if(this.commitOrRemove(),!this.hasSelection)return;const e=[..._classPrivateFieldGet(G,this)];this.addCommands({cmd:()=>{for(const t of e)t.remove()},undo:()=>{for(const t of e)_assertClassBrand(re,this,me).call(this,t)},mustExec:!0})}commitOrRemove(){var e;null===(e=_classPrivateFieldGet(P,this))||void 0===e||e.commitOrRemove()}hasSomethingToControl(){return _classPrivateFieldGet(P,this)||this.hasSelection}selectAll(){for(const e of _classPrivateFieldGet(G,this))e.commit();_assertClassBrand(re,this,ve).call(this,_classPrivateFieldGet(C,this).values())}unselectAll(){if(_classPrivateFieldGet(P,this))_classPrivateFieldGet(P,this).commitOrRemove();else if(this.hasSelection){for(const e of _classPrivateFieldGet(G,this))e.unselect();_classPrivateFieldGet(G,this).clear(),_assertClassBrand(re,this,de).call(this,{hasSelectedEditor:!1})}}translateSelectedEditors(e,t){if(arguments.length>2&&void 0!==arguments[2]&&arguments[2]||this.commitOrRemove(),!this.hasSelection)return;_classPrivateFieldGet(Z,this)[0]+=e,_classPrivateFieldGet(Z,this)[1]+=t;const[n,r]=_classPrivateFieldGet(Z,this),i=[..._classPrivateFieldGet(G,this)];_classPrivateFieldGet(ee,this)&&clearTimeout(_classPrivateFieldGet(ee,this)),_classPrivateFieldSet(ee,this,setTimeout((()=>{_classPrivateFieldSet(ee,this,null),_classPrivateFieldGet(Z,this)[0]=_classPrivateFieldGet(Z,this)[1]=0,this.addCommands({cmd:()=>{for(const e of i)_classPrivateFieldGet(C,this).has(e.id)&&e.translateInPage(n,r)},undo:()=>{for(const e of i)_classPrivateFieldGet(C,this).has(e.id)&&e.translateInPage(-n,-r)},mustExec:!1})}),1e3));for(const s of i)s.translateInPage(e,t)}setUpDragSession(){if(this.hasSelection){this.disableUserSelect(!0),_classPrivateFieldSet(I,this,new Map);for(const e of _classPrivateFieldGet(G,this))_classPrivateFieldGet(I,this).set(e,{savedX:e.x,savedY:e.y,savedPageIndex:e.pageIndex,newX:0,newY:0,newPageIndex:-1})}}endDragSession(){if(!_classPrivateFieldGet(I,this))return!1;this.disableUserSelect(!1);const e=_classPrivateFieldGet(I,this);_classPrivateFieldSet(I,this,null);let t=!1;for(const[{x:r,y:i,pageIndex:s},a]of e)a.newX=r,a.newY=i,a.newPageIndex=s,t||(t=r!==a.savedX||i!==a.savedY||s!==a.savedPageIndex);if(!t)return!1;const n=(e,t,n,r)=>{if(_classPrivateFieldGet(C,this).has(e.id)){const i=_classPrivateFieldGet(E,this).get(r);i?e._setParentAndPosition(i,t,n):(e.pageIndex=r,e.x=t,e.y=n)}};return this.addCommands({cmd:()=>{for(const[t,{newX:r,newY:i,newPageIndex:s}]of e)n(t,r,i,s)},undo:()=>{for(const[t,{savedX:r,savedY:i,savedPageIndex:s}]of e)n(t,r,i,s)},mustExec:!0}),!0}dragSelectedEditors(e,t){if(_classPrivateFieldGet(I,this))for(const n of _classPrivateFieldGet(I,this).keys())n.drag(e,t)}rebuild(e){if(null===e.parent){const t=this.getLayer(e.pageIndex);t?(t.changeParent(e),t.addOrRebuild(e)):(this.addEditor(e),this.addToAnnotationStorage(e),e.rebuild())}else e.parent.addOrRebuild(e)}isActive(e){return _classPrivateFieldGet(P,this)===e}getActive(){return _classPrivateFieldGet(P,this)}getMode(){return _classPrivateFieldGet(U,this)}get imageManager(){return(0,i.shadow)(this,"imageManager",new h)}}function se(){window.addEventListener("focus",_classPrivateFieldGet(z,this)),window.addEventListener("blur",_classPrivateFieldGet(W,this))}function ae(){window.removeEventListener("focus",_classPrivateFieldGet(z,this)),window.removeEventListener("blur",_classPrivateFieldGet(W,this))}function oe(){window.addEventListener("keydown",_classPrivateFieldGet(K,this),{capture:!0})}function le(){window.removeEventListener("keydown",_classPrivateFieldGet(K,this),{capture:!0})}function ce(){document.addEventListener("copy",_classPrivateFieldGet(q,this)),document.addEventListener("cut",_classPrivateFieldGet(H,this)),document.addEventListener("paste",_classPrivateFieldGet(V,this))}function ue(){document.removeEventListener("copy",_classPrivateFieldGet(q,this)),document.removeEventListener("cut",_classPrivateFieldGet(H,this)),document.removeEventListener("paste",_classPrivateFieldGet(V,this))}function de(e){Object.entries(e).some((e=>{let[t,n]=e;return _classPrivateFieldGet($,this)[t]!==n}))&&this._eventBus.dispatch("annotationeditorstateschanged",{source:this,details:Object.assign(_classPrivateFieldGet($,this),e)})}function he(e){this._eventBus.dispatch("annotationeditorparamschanged",{source:this,details:e})}function pe(){if(!_classPrivateFieldGet(O,this)){_classPrivateFieldSet(O,this,!0);for(const e of _classPrivateFieldGet(E,this).values())e.enable()}}function fe(){if(this.unselectAll(),_classPrivateFieldGet(O,this)){_classPrivateFieldSet(O,this,!1);for(const e of _classPrivateFieldGet(E,this).values())e.disable()}}function me(e){const t=_classPrivateFieldGet(E,this).get(e.pageIndex);t?t.addOrRebuild(e):this.addEditor(e)}function ge(){if(0===_classPrivateFieldGet(C,this).size)return!0;if(1===_classPrivateFieldGet(C,this).size)for(const e of _classPrivateFieldGet(C,this).values())return e.isEmpty();return!1}function ve(e){_classPrivateFieldGet(G,this).clear();for(const t of e)t.isEmpty()||(_classPrivateFieldGet(G,this).add(t),t.select());_assertClassBrand(re,this,de).call(this,{hasSelectedEditor:!0})}_defineProperty(ie,"TRANSLATE_SMALL",1),_defineProperty(ie,"TRANSLATE_BIG",10),t.AnnotationEditorUIManager=ie},(e,t,n)=>{var r;Object.defineProperty(t,"__esModule",{value:!0}),t.StatTimer=t.RenderingCancelledException=t.PixelsPerInch=t.PageViewport=t.PDFDateString=t.DOMStandardFontDataFactory=t.DOMSVGFactory=t.DOMFilterFactory=t.DOMCanvasFactory=t.DOMCMapReaderFactory=void 0,t.deprecated=function(e){console.log("Deprecated API usage: "+e)},t.getColorValues=function(e){const t=document.createElement("span");t.style.visibility="hidden",document.body.append(t);for(const n of e.keys()){t.style.color=n;const r=window.getComputedStyle(t).color;e.set(n,j(r))}t.remove()},t.getCurrentTransform=function(e){const{a:t,b:n,c:r,d:i,e:s,f:a}=e.getTransform();return[t,n,r,i,s,a]},t.getCurrentTransformInverse=function(e){const{a:t,b:n,c:r,d:i,e:s,f:a}=e.getTransform().invertSelf();return[t,n,r,i,s,a]},t.getFilenameFromUrl=function(e){return arguments.length>1&&void 0!==arguments[1]&&arguments[1]||([e]=e.split(/[#?]/,1)),e.substring(e.lastIndexOf("/")+1)},t.getPdfFilenameFromUrl=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"document.pdf";if("string"!==typeof e)return t;if(D(e))return(0,s.warn)('getPdfFilenameFromUrl: ignore "data:"-URL for performance reasons.'),t;const n=/[^/?#=]+\.pdf\b(?!.*\.pdf\b)/i,r=/^(?:(?:[^:]+:)?\/\/[^/]+)?([^?#]*)(\?[^#]*)?(#.*)?$/.exec(e);let i=n.exec(r[1])||n.exec(r[2])||n.exec(r[3]);if(i&&(i=i[0],i.includes("%")))try{i=n.exec(decodeURIComponent(i))[0]}catch{}return i||t},t.getRGB=j,t.getXfaPageViewport=function(e,t){let{scale:n=1,rotation:r=0}=t;const{width:i,height:s}=e.attributes.style,a=[0,0,parseInt(i),parseInt(s)];return new M({viewBox:a,scale:n,rotation:r})},t.isDataScheme=D,t.isPdfFile=function(e){return"string"===typeof e&&/\.pdf$/i.test(e)},t.isValidFetchUrl=O,t.loadScript=function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return new Promise(((n,r)=>{const i=document.createElement("script");i.src=e,i.onload=function(e){t&&i.remove(),n(e)},i.onerror=function(){r(new Error("Cannot load script at: ".concat(i.src)))},(document.head||document.documentElement).append(i)}))},t.noContextMenu=function(e){e.preventDefault()},t.setLayerDimensions=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];if(t instanceof M){const{pageWidth:r,pageHeight:i}=t.rawDims,{style:a}=e,o=s.FeatureTest.isCSSRoundSupported,l="var(--scale-factor) * ".concat(r,"px"),c="var(--scale-factor) * ".concat(i,"px"),u=o?"round(".concat(l,", 1px)"):"calc(".concat(l,")"),d=o?"round(".concat(c,", 1px)"):"calc(".concat(c,")");n&&t.rotation%180!==0?(a.width=d,a.height=u):(a.width=u,a.height=d)}r&&e.setAttribute("data-main-rotation",t.rotation)};var i=n(7),s=n(1);const a="http://www.w3.org/2000/svg";class o{}r=o,_defineProperty(o,"CSS",96),_defineProperty(o,"PDF",72),_defineProperty(o,"PDF_TO_CSS_UNITS",r.CSS/r.PDF),t.PixelsPerInch=o;var l=new WeakMap,c=new WeakMap,u=new WeakMap,d=new WeakMap,h=new WeakMap,p=new WeakMap,f=new WeakMap,m=new WeakMap,g=new WeakMap,v=new WeakMap,_=new WeakMap,y=new WeakSet;class b extends i.BaseFilterFactory{constructor(){let{docId:e,ownerDocument:t=globalThis.document}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};super(),_classPrivateMethodInitSpec(this,y),_classPrivateFieldInitSpec(this,l,void 0),_classPrivateFieldInitSpec(this,c,void 0),_classPrivateFieldInitSpec(this,u,void 0),_classPrivateFieldInitSpec(this,d,void 0),_classPrivateFieldInitSpec(this,h,void 0),_classPrivateFieldInitSpec(this,p,void 0),_classPrivateFieldInitSpec(this,f,void 0),_classPrivateFieldInitSpec(this,m,void 0),_classPrivateFieldInitSpec(this,g,void 0),_classPrivateFieldInitSpec(this,v,void 0),_classPrivateFieldInitSpec(this,_,0),_classPrivateFieldSet(u,this,e),_classPrivateFieldSet(d,this,t)}addFilter(e){var t,n;if(!e)return"none";let r,i,s,a,o=_classPrivateGetter(y,this,w).get(e);if(o)return o;if(1===e.length){const t=e[0],n=new Array(256);for(let e=0;e<256;e++)n[e]=t[e]/255;a=r=i=s=n.join(",")}else{const[t,n,o]=e,l=new Array(256),c=new Array(256),u=new Array(256);for(let e=0;e<256;e++)l[e]=t[e]/255,c[e]=n[e]/255,u[e]=o[e]/255;r=l.join(","),i=c.join(","),s=u.join(","),a="".concat(r).concat(i).concat(s)}if(o=_classPrivateGetter(y,this,w).get(a),o)return _classPrivateGetter(y,this,w).set(e,o),o;const l="g_".concat(_classPrivateFieldGet(u,this),"_transfer_map_").concat((_classPrivateFieldSet(_,this,(t=_classPrivateFieldGet(_,this),n=t++,t)),n)),c="url(#".concat(l,")");_classPrivateGetter(y,this,w).set(e,c),_classPrivateGetter(y,this,w).set(a,c);const d=_assertClassBrand(y,this,C).call(this,l);return _assertClassBrand(y,this,x).call(this,r,i,s,d),c}addHCMFilter(e,t){var n;const r="".concat(e,"-").concat(t);if(_classPrivateFieldGet(p,this)===r)return _classPrivateFieldGet(f,this);if(_classPrivateFieldSet(p,this,r),_classPrivateFieldSet(f,this,"none"),null===(n=_classPrivateFieldGet(h,this))||void 0===n||n.remove(),!e||!t)return _classPrivateFieldGet(f,this);const i=_assertClassBrand(y,this,k).call(this,e);e=s.Util.makeHexColor(...i);const a=_assertClassBrand(y,this,k).call(this,t);if(t=s.Util.makeHexColor(...a),_classPrivateGetter(y,this,S).style.color="","#000000"===e&&"#ffffff"===t||e===t)return _classPrivateFieldGet(f,this);const o=new Array(256);for(let s=0;s<=255;s++){const e=s/255;o[s]=e<=.03928?e/12.92:((e+.055)/1.055)**2.4}const l=o.join(","),c="g_".concat(_classPrivateFieldGet(u,this),"_hcm_filter"),d=_classPrivateFieldSet(m,this,_assertClassBrand(y,this,C).call(this,c));_assertClassBrand(y,this,x).call(this,l,l,l,d),_assertClassBrand(y,this,P).call(this,d);const g=(e,t)=>{const n=i[e]/255,r=a[e]/255,s=new Array(t+1);for(let i=0;i<=t;i++)s[i]=n+i/t*(r-n);return s.join(",")};return _assertClassBrand(y,this,x).call(this,g(0,5),g(1,5),g(2,5),d),_classPrivateFieldSet(f,this,"url(#".concat(c,")")),_classPrivateFieldGet(f,this)}addHighlightHCMFilter(e,t,n,r){var i;const s="".concat(e,"-").concat(t,"-").concat(n,"-").concat(r);if(_classPrivateFieldGet(g,this)===s)return _classPrivateFieldGet(v,this);if(_classPrivateFieldSet(g,this,s),_classPrivateFieldSet(v,this,"none"),null===(i=_classPrivateFieldGet(m,this))||void 0===i||i.remove(),!e||!t)return _classPrivateFieldGet(v,this);const[a,o]=[e,t].map(_assertClassBrand(y,this,k).bind(this));let l=Math.round(.2126*a[0]+.7152*a[1]+.0722*a[2]),c=Math.round(.2126*o[0]+.7152*o[1]+.0722*o[2]),[d,h]=[n,r].map(_assertClassBrand(y,this,k).bind(this));c<l&&([l,c,d,h]=[c,l,h,d]),_classPrivateGetter(y,this,S).style.color="";const p=(e,t,n)=>{const r=new Array(256),i=(c-l)/n,s=e/255,a=(t-e)/(255*n);let o=0;for(let c=0;c<=n;c++){const e=Math.round(l+c*i),t=s+c*a;for(let n=o;n<=e;n++)r[n]=t;o=e+1}for(let l=o;l<256;l++)r[l]=r[o-1];return r.join(",")},f="g_".concat(_classPrivateFieldGet(u,this),"_hcm_highlight_filter"),_=_classPrivateFieldSet(m,this,_assertClassBrand(y,this,C).call(this,f));return _assertClassBrand(y,this,P).call(this,_),_assertClassBrand(y,this,x).call(this,p(d[0],h[0],5),p(d[1],h[1],5),p(d[2],h[2],5),_),_classPrivateFieldSet(v,this,"url(#".concat(f,")")),_classPrivateFieldGet(v,this)}destroy(){arguments.length>0&&void 0!==arguments[0]&&arguments[0]&&(_classPrivateFieldGet(f,this)||_classPrivateFieldGet(v,this))||(_classPrivateFieldGet(c,this)&&(_classPrivateFieldGet(c,this).parentNode.parentNode.remove(),_classPrivateFieldSet(c,this,null)),_classPrivateFieldGet(l,this)&&(_classPrivateFieldGet(l,this).clear(),_classPrivateFieldSet(l,this,null)),_classPrivateFieldSet(_,this,0))}}function w(e){return _classPrivateFieldGet(l,e)||_classPrivateFieldSet(l,e,new Map)}function S(e){if(!_classPrivateFieldGet(c,e)){const t=_classPrivateFieldGet(d,e).createElement("div"),{style:n}=t;n.visibility="hidden",n.contain="strict",n.width=n.height=0,n.position="absolute",n.top=n.left=0,n.zIndex=-1;const r=_classPrivateFieldGet(d,e).createElementNS(a,"svg");r.setAttribute("width",0),r.setAttribute("height",0),_classPrivateFieldSet(c,e,_classPrivateFieldGet(d,e).createElementNS(a,"defs")),t.append(r),r.append(_classPrivateFieldGet(c,e)),_classPrivateFieldGet(d,e).body.append(t)}return _classPrivateFieldGet(c,e)}function P(e){const t=_classPrivateFieldGet(d,this).createElementNS(a,"feColorMatrix");t.setAttribute("type","matrix"),t.setAttribute("values","0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0 0 0 1 0"),e.append(t)}function C(e){const t=_classPrivateFieldGet(d,this).createElementNS(a,"filter");return t.setAttribute("color-interpolation-filters","sRGB"),t.setAttribute("id",e),_classPrivateGetter(y,this,S).append(t),t}function E(e,t,n){const r=_classPrivateFieldGet(d,this).createElementNS(a,t);r.setAttribute("type","discrete"),r.setAttribute("tableValues",n),e.append(r)}function x(e,t,n,r){const i=_classPrivateFieldGet(d,this).createElementNS(a,"feComponentTransfer");r.append(i),_assertClassBrand(y,this,E).call(this,i,"feFuncR",e),_assertClassBrand(y,this,E).call(this,i,"feFuncG",t),_assertClassBrand(y,this,E).call(this,i,"feFuncB",n)}function k(e){return _classPrivateGetter(y,this,S).style.color=e,j(getComputedStyle(_classPrivateGetter(y,this,S)).getPropertyValue("color"))}t.DOMFilterFactory=b;class A extends i.BaseCanvasFactory{constructor(){let{ownerDocument:e=globalThis.document}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};super(),this._document=e}_createCanvas(e,t){const n=this._document.createElement("canvas");return n.width=e,n.height=t,n}}async function T(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(O(e,document.baseURI)){const n=await fetch(e);if(!n.ok)throw new Error(n.statusText);return t?new Uint8Array(await n.arrayBuffer()):(0,s.stringToBytes)(await n.text())}return new Promise(((n,r)=>{const i=new XMLHttpRequest;i.open("GET",e,!0),t&&(i.responseType="arraybuffer"),i.onreadystatechange=()=>{if(i.readyState===XMLHttpRequest.DONE){if(200===i.status||0===i.status){let e;if(t&&i.response?e=new Uint8Array(i.response):!t&&i.responseText&&(e=(0,s.stringToBytes)(i.responseText)),e)return void n(e)}r(new Error(i.statusText))}},i.send(null)}))}t.DOMCanvasFactory=A;class F extends i.BaseCMapReaderFactory{_fetchData(e,t){return T(e,this.isCompressed).then((e=>({cMapData:e,compressionType:t})))}}t.DOMCMapReaderFactory=F;class I extends i.BaseStandardFontDataFactory{_fetchData(e){return T(e,!0)}}t.DOMStandardFontDataFactory=I;class R extends i.BaseSVGFactory{_createSVG(e){return document.createElementNS(a,e)}}t.DOMSVGFactory=R;class M{constructor(e){let{viewBox:t,scale:n,rotation:r,offsetX:i=0,offsetY:s=0,dontFlip:a=!1}=e;this.viewBox=t,this.scale=n,this.rotation=r,this.offsetX=i,this.offsetY=s;const o=(t[2]+t[0])/2,l=(t[3]+t[1])/2;let c,u,d,h,p,f,m,g;switch(r%=360,r<0&&(r+=360),r){case 180:c=-1,u=0,d=0,h=1;break;case 90:c=0,u=1,d=1,h=0;break;case 270:c=0,u=-1,d=-1,h=0;break;case 0:c=1,u=0,d=0,h=-1;break;default:throw new Error("PageViewport: Invalid rotation, must be a multiple of 90 degrees.")}a&&(d=-d,h=-h),0===c?(p=Math.abs(l-t[1])*n+i,f=Math.abs(o-t[0])*n+s,m=(t[3]-t[1])*n,g=(t[2]-t[0])*n):(p=Math.abs(o-t[0])*n+i,f=Math.abs(l-t[1])*n+s,m=(t[2]-t[0])*n,g=(t[3]-t[1])*n),this.transform=[c*n,u*n,d*n,h*n,p-c*n*o-d*n*l,f-u*n*o-h*n*l],this.width=m,this.height=g}get rawDims(){const{viewBox:e}=this;return(0,s.shadow)(this,"rawDims",{pageWidth:e[2]-e[0],pageHeight:e[3]-e[1],pageX:e[0],pageY:e[1]})}clone(){let{scale:e=this.scale,rotation:t=this.rotation,offsetX:n=this.offsetX,offsetY:r=this.offsetY,dontFlip:i=!1}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return new M({viewBox:this.viewBox.slice(),scale:e,rotation:t,offsetX:n,offsetY:r,dontFlip:i})}convertToViewportPoint(e,t){return s.Util.applyTransform([e,t],this.transform)}convertToViewportRectangle(e){const t=s.Util.applyTransform([e[0],e[1]],this.transform),n=s.Util.applyTransform([e[2],e[3]],this.transform);return[t[0],t[1],n[0],n[1]]}convertToPdfPoint(e,t){return s.Util.applyInverseTransform([e,t],this.transform)}}t.PageViewport=M;class N extends s.BaseException{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;super(e,"RenderingCancelledException"),this.extraDelay=t}}function D(e){const t=e.length;let n=0;for(;n<t&&""===e[n].trim();)n++;return"data:"===e.substring(n,n+5).toLowerCase()}function O(e,t){try{const{protocol:n}=t?new URL(e,t):new URL(e);return"http:"===n||"https:"===n}catch{return!1}}let L;function j(e){if(e.startsWith("#")){const t=parseInt(e.slice(1),16);return[(16711680&t)>>16,(65280&t)>>8,255&t]}return e.startsWith("rgb(")?e.slice(4,-1).split(",").map((e=>parseInt(e))):e.startsWith("rgba(")?e.slice(5,-1).split(",").map((e=>parseInt(e))).slice(0,3):((0,s.warn)('Not a valid color format: "'.concat(e,'"')),[0,0,0])}t.RenderingCancelledException=N,t.StatTimer=class{constructor(){_defineProperty(this,"started",Object.create(null)),_defineProperty(this,"times",[])}time(e){e in this.started&&(0,s.warn)("Timer is already running for ".concat(e)),this.started[e]=Date.now()}timeEnd(e){e in this.started||(0,s.warn)("Timer has not been started for ".concat(e)),this.times.push({name:e,start:this.started[e],end:Date.now()}),delete this.started[e]}toString(){const e=[];let t=0;for(const{name:n}of this.times)t=Math.max(n.length,t);for(const{name:n,start:r,end:i}of this.times)e.push("".concat(n.padEnd(t)," ").concat(i-r,"ms\n"));return e.join("")}},t.PDFDateString=class{static toDateObject(e){if(!e||"string"!==typeof e)return null;L||(L=new RegExp("^D:(\\d{4})(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?([Z|+|-])?(\\d{2})?'?(\\d{2})?'?"));const t=L.exec(e);if(!t)return null;const n=parseInt(t[1],10);let r=parseInt(t[2],10);r=r>=1&&r<=12?r-1:0;let i=parseInt(t[3],10);i=i>=1&&i<=31?i:1;let s=parseInt(t[4],10);s=s>=0&&s<=23?s:0;let a=parseInt(t[5],10);a=a>=0&&a<=59?a:0;let o=parseInt(t[6],10);o=o>=0&&o<=59?o:0;const l=t[7]||"Z";let c=parseInt(t[8],10);c=c>=0&&c<=23?c:0;let u=parseInt(t[9],10)||0;return u=u>=0&&u<=59?u:0,"-"===l?(s+=c,a+=u):"+"===l&&(s-=c,a-=u),new Date(Date.UTC(n,r,i,s,a,o))}}},(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.BaseStandardFontDataFactory=t.BaseSVGFactory=t.BaseFilterFactory=t.BaseCanvasFactory=t.BaseCMapReaderFactory=void 0;var r=n(1);class i{constructor(){this.constructor===i&&(0,r.unreachable)("Cannot initialize BaseFilterFactory.")}addFilter(e){return"none"}addHCMFilter(e,t){return"none"}addHighlightHCMFilter(e,t,n,r){return"none"}destroy(){}}t.BaseFilterFactory=i;class s{constructor(){this.constructor===s&&(0,r.unreachable)("Cannot initialize BaseCanvasFactory.")}create(e,t){if(e<=0||t<=0)throw new Error("Invalid canvas size");const n=this._createCanvas(e,t);return{canvas:n,context:n.getContext("2d")}}reset(e,t,n){if(!e.canvas)throw new Error("Canvas is not specified");if(t<=0||n<=0)throw new Error("Invalid canvas size");e.canvas.width=t,e.canvas.height=n}destroy(e){if(!e.canvas)throw new Error("Canvas is not specified");e.canvas.width=0,e.canvas.height=0,e.canvas=null,e.context=null}_createCanvas(e,t){(0,r.unreachable)("Abstract method `_createCanvas` called.")}}t.BaseCanvasFactory=s;class a{constructor(e){let{baseUrl:t=null,isCompressed:n=!0}=e;this.constructor===a&&(0,r.unreachable)("Cannot initialize BaseCMapReaderFactory."),this.baseUrl=t,this.isCompressed=n}async fetch(e){let{name:t}=e;if(!this.baseUrl)throw new Error('The CMap "baseUrl" parameter must be specified, ensure that the "cMapUrl" and "cMapPacked" API parameters are provided.');if(!t)throw new Error("CMap name must be specified.");const n=this.baseUrl+t+(this.isCompressed?".bcmap":""),i=this.isCompressed?r.CMapCompressionType.BINARY:r.CMapCompressionType.NONE;return this._fetchData(n,i).catch((e=>{throw new Error("Unable to load ".concat(this.isCompressed?"binary ":"","CMap at: ").concat(n))}))}_fetchData(e,t){(0,r.unreachable)("Abstract method `_fetchData` called.")}}t.BaseCMapReaderFactory=a;class o{constructor(e){let{baseUrl:t=null}=e;this.constructor===o&&(0,r.unreachable)("Cannot initialize BaseStandardFontDataFactory."),this.baseUrl=t}async fetch(e){let{filename:t}=e;if(!this.baseUrl)throw new Error('The standard font "baseUrl" parameter must be specified, ensure that the "standardFontDataUrl" API parameter is provided.');if(!t)throw new Error("Font filename must be specified.");const n="".concat(this.baseUrl).concat(t);return this._fetchData(n).catch((e=>{throw new Error("Unable to load font data at: ".concat(n))}))}_fetchData(e){(0,r.unreachable)("Abstract method `_fetchData` called.")}}t.BaseStandardFontDataFactory=o;class l{constructor(){this.constructor===l&&(0,r.unreachable)("Cannot initialize BaseSVGFactory.")}create(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(e<=0||t<=0)throw new Error("Invalid SVG dimensions");const r=this._createSVG("svg:svg");return r.setAttribute("version","1.1"),n||(r.setAttribute("width","".concat(e,"px")),r.setAttribute("height","".concat(t,"px"))),r.setAttribute("preserveAspectRatio","none"),r.setAttribute("viewBox","0 0 ".concat(e," ").concat(t)),r}createElement(e){if("string"!==typeof e)throw new Error("Invalid SVG element type");return this._createSVG(e)}_createSVG(e){(0,r.unreachable)("Abstract method `_createSVG` called.")}}t.BaseSVGFactory=l},(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.MurmurHash3_64=void 0;var r=n(1);const i=3285377520,s=4294901760,a=65535;t.MurmurHash3_64=class{constructor(e){this.h1=e?4294967295&e:i,this.h2=e?4294967295&e:i}update(e){let t,n;if("string"===typeof e){t=new Uint8Array(2*e.length),n=0;for(let r=0,i=e.length;r<i;r++){const i=e.charCodeAt(r);i<=255?t[n++]=i:(t[n++]=i>>>8,t[n++]=255&i)}}else{if(!(0,r.isArrayBuffer)(e))throw new Error("Wrong data format in MurmurHash3_64_update. Input must be a string or array.");t=e.slice(),n=t.byteLength}const i=n>>2,o=n-4*i,l=new Uint32Array(t.buffer,0,i);let c=0,u=0,d=this.h1,h=this.h2;const p=3432918353,f=461845907,m=11601,g=13715;for(let r=0;r<i;r++)1&r?(c=l[r],c=c*p&s|c*m&a,c=c<<15|c>>>17,c=c*f&s|c*g&a,d^=c,d=d<<13|d>>>19,d=5*d+3864292196):(u=l[r],u=u*p&s|u*m&a,u=u<<15|u>>>17,u=u*f&s|u*g&a,h^=u,h=h<<13|h>>>19,h=5*h+3864292196);switch(c=0,o){case 3:c^=t[4*i+2]<<16;case 2:c^=t[4*i+1]<<8;case 1:c^=t[4*i],c=c*p&s|c*m&a,c=c<<15|c>>>17,c=c*f&s|c*g&a,1&i?d^=c:h^=c}this.h1=d,this.h2=h}hexdigest(){let e=this.h1,t=this.h2;return e^=t>>>1,e=3981806797*e&s|36045*e&a,t=4283543511*t&s|(2950163797*(t<<16|e>>>16)&s)>>>16,e^=t>>>1,e=444984403*e&s|60499*e&a,t=3301882366*t&s|(3120437893*(t<<16|e>>>16)&s)>>>16,e^=t>>>1,(e>>>0).toString(16).padStart(8,"0")+(t>>>0).toString(16).padStart(8,"0")}}},(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.FontLoader=t.FontFaceObject=void 0;var r=n(1),i=new WeakMap;t.FontLoader=class{constructor(e){let{ownerDocument:t=globalThis.document,styleElement:n=null}=e;_classPrivateFieldInitSpec(this,i,new Set),this._document=t,this.nativeFontFaces=new Set,this.styleElement=null,this.loadingRequests=[],this.loadTestFontId=0}addNativeFontFace(e){this.nativeFontFaces.add(e),this._document.fonts.add(e)}removeNativeFontFace(e){this.nativeFontFaces.delete(e),this._document.fonts.delete(e)}insertRule(e){this.styleElement||(this.styleElement=this._document.createElement("style"),this._document.documentElement.getElementsByTagName("head")[0].append(this.styleElement));const t=this.styleElement.sheet;t.insertRule(e,t.cssRules.length)}clear(){for(const e of this.nativeFontFaces)this._document.fonts.delete(e);this.nativeFontFaces.clear(),_classPrivateFieldGet(i,this).clear(),this.styleElement&&(this.styleElement.remove(),this.styleElement=null)}async loadSystemFont(e){if(e&&!_classPrivateFieldGet(i,this).has(e.loadedName))if((0,r.assert)(!this.disableFontFace,"loadSystemFont shouldn't be called when `disableFontFace` is set."),this.isFontLoadingAPISupported){const{loadedName:t,src:n,style:s}=e,a=new FontFace(t,n,s);this.addNativeFontFace(a);try{await a.load(),_classPrivateFieldGet(i,this).add(t)}catch{(0,r.warn)("Cannot load system font: ".concat(e.baseFontName,", installing it could help to improve PDF rendering.")),this.removeNativeFontFace(a)}}else(0,r.unreachable)("Not implemented: loadSystemFont without the Font Loading API.")}async bind(e){if(e.attached||e.missingFile&&!e.systemFontInfo)return;if(e.attached=!0,e.systemFontInfo)return void await this.loadSystemFont(e.systemFontInfo);if(this.isFontLoadingAPISupported){const t=e.createNativeFontFace();if(t){this.addNativeFontFace(t);try{await t.loaded}catch(n){throw(0,r.warn)("Failed to load font '".concat(t.family,"': '").concat(n,"'.")),e.disableFontFace=!0,n}}return}const t=e.createFontFaceRule();if(t){if(this.insertRule(t),this.isSyncFontLoadingSupported)return;await new Promise((t=>{const n=this._queueLoadingCallback(t);this._prepareFontLoadEvent(e,n)}))}}get isFontLoadingAPISupported(){var e;const t=!(null===(e=this._document)||void 0===e||!e.fonts);return(0,r.shadow)(this,"isFontLoadingAPISupported",t)}get isSyncFontLoadingSupported(){let e=!1;return(r.isNodeJS||"undefined"!==typeof navigator&&/Mozilla\/5.0.*?rv:\d+.*? Gecko/.test(navigator.userAgent))&&(e=!0),(0,r.shadow)(this,"isSyncFontLoadingSupported",e)}_queueLoadingCallback(e){const{loadingRequests:t}=this,n={done:!1,complete:function(){for((0,r.assert)(!n.done,"completeRequest() cannot be called twice."),n.done=!0;t.length>0&&t[0].done;){const e=t.shift();setTimeout(e.callback,0)}},callback:e};return t.push(n),n}get _loadTestFont(){const e=atob("T1RUTwALAIAAAwAwQ0ZGIDHtZg4AAAOYAAAAgUZGVE1lkzZwAAAEHAAAABxHREVGABQAFQAABDgAAAAeT1MvMlYNYwkAAAEgAAAAYGNtYXABDQLUAAACNAAAAUJoZWFk/xVFDQAAALwAAAA2aGhlYQdkA+oAAAD0AAAAJGhtdHgD6AAAAAAEWAAAAAZtYXhwAAJQAAAAARgAAAAGbmFtZVjmdH4AAAGAAAAAsXBvc3T/hgAzAAADeAAAACAAAQAAAAEAALZRFsRfDzz1AAsD6AAAAADOBOTLAAAAAM4KHDwAAAAAA+gDIQAAAAgAAgAAAAAAAAABAAADIQAAAFoD6AAAAAAD6AABAAAAAAAAAAAAAAAAAAAAAQAAUAAAAgAAAAQD6AH0AAUAAAKKArwAAACMAooCvAAAAeAAMQECAAACAAYJAAAAAAAAAAAAAQAAAAAAAAAAAAAAAFBmRWQAwAAuAC4DIP84AFoDIQAAAAAAAQAAAAAAAAAAACAAIAABAAAADgCuAAEAAAAAAAAAAQAAAAEAAAAAAAEAAQAAAAEAAAAAAAIAAQAAAAEAAAAAAAMAAQAAAAEAAAAAAAQAAQAAAAEAAAAAAAUAAQAAAAEAAAAAAAYAAQAAAAMAAQQJAAAAAgABAAMAAQQJAAEAAgABAAMAAQQJAAIAAgABAAMAAQQJAAMAAgABAAMAAQQJAAQAAgABAAMAAQQJAAUAAgABAAMAAQQJAAYAAgABWABYAAAAAAAAAwAAAAMAAAAcAAEAAAAAADwAAwABAAAAHAAEACAAAAAEAAQAAQAAAC7//wAAAC7////TAAEAAAAAAAABBgAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAD/gwAyAAAAAQAAAAAAAAAAAAAAAAAAAAABAAQEAAEBAQJYAAEBASH4DwD4GwHEAvgcA/gXBIwMAYuL+nz5tQXkD5j3CBLnEQACAQEBIVhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYAAABAQAADwACAQEEE/t3Dov6fAH6fAT+fPp8+nwHDosMCvm1Cvm1DAz6fBQAAAAAAAABAAAAAMmJbzEAAAAAzgTjFQAAAADOBOQpAAEAAAAAAAAADAAUAAQAAAABAAAAAgABAAAAAAAAAAAD6AAAAAAAAA==");return(0,r.shadow)(this,"_loadTestFont",e)}_prepareFontLoadEvent(e,t){function n(e,t){return e.charCodeAt(t)<<24|e.charCodeAt(t+1)<<16|e.charCodeAt(t+2)<<8|255&e.charCodeAt(t+3)}function i(e,t,n,r){return e.substring(0,t)+r+e.substring(t+n)}let s,a;const o=this._document.createElement("canvas");o.width=1,o.height=1;const l=o.getContext("2d");let c=0;const u="lt".concat(Date.now()).concat(this.loadTestFontId++);let d=this._loadTestFont;d=i(d,976,u.length,u);const h=1482184792;let p=n(d,16);for(s=0,a=u.length-3;s<a;s+=4)p=p-h+n(u,s)|0;s<u.length&&(p=p-h+n(u+"XXX",s)|0),d=i(d,16,4,(0,r.string32)(p));const f="url(data:font/opentype;base64,".concat(btoa(d),");"),m='@font-face {font-family:"'.concat(u,'";src:').concat(f,"}");this.insertRule(m);const g=this._document.createElement("div");g.style.visibility="hidden",g.style.width=g.style.height="10px",g.style.position="absolute",g.style.top=g.style.left="0px";for(const r of[e.loadedName,u]){const e=this._document.createElement("span");e.textContent="Hi",e.style.fontFamily=r,g.append(e)}this._document.body.append(g),function e(t,n){if(++c>30)return(0,r.warn)("Load test font never loaded."),void n();l.font="30px "+t,l.fillText(".",0,20),l.getImageData(0,0,1,1).data[3]>0?n():setTimeout(e.bind(null,t,n))}(u,(()=>{g.remove(),t.complete()}))}},t.FontFaceObject=class{constructor(e,t){let{isEvalSupported:n=!0,disableFontFace:r=!1,ignoreErrors:i=!1,inspectFont:s=null}=t;this.compiledGlyphs=Object.create(null);for(const a in e)this[a]=e[a];this.isEvalSupported=!1!==n,this.disableFontFace=!0===r,this.ignoreErrors=!0===i,this._inspectFont=s}createNativeFontFace(){var e;if(!this.data||this.disableFontFace)return null;let t;if(this.cssFontInfo){const e={weight:this.cssFontInfo.fontWeight};this.cssFontInfo.italicAngle&&(e.style="oblique ".concat(this.cssFontInfo.italicAngle,"deg")),t=new FontFace(this.cssFontInfo.fontFamily,this.data,e)}else t=new FontFace(this.loadedName,this.data,{});return null===(e=this._inspectFont)||void 0===e||e.call(this,this),t}createFontFaceRule(){var e;if(!this.data||this.disableFontFace)return null;const t=(0,r.bytesToString)(this.data),n="url(data:".concat(this.mimetype,";base64,").concat(btoa(t),");");let i;if(this.cssFontInfo){let e="font-weight: ".concat(this.cssFontInfo.fontWeight,";");this.cssFontInfo.italicAngle&&(e+="font-style: oblique ".concat(this.cssFontInfo.italicAngle,"deg;")),i='@font-face {font-family:"'.concat(this.cssFontInfo.fontFamily,'";').concat(e,"src:").concat(n,"}")}else i='@font-face {font-family:"'.concat(this.loadedName,'";src:').concat(n,"}");return null===(e=this._inspectFont)||void 0===e||e.call(this,this,n),i}getPathGenerator(e,t){if(void 0!==this.compiledGlyphs[t])return this.compiledGlyphs[t];let n;try{n=e.get(this.loadedName+"_path_"+t)}catch(i){if(!this.ignoreErrors)throw i;return(0,r.warn)('getPathGenerator - ignoring character: "'.concat(i,'".')),this.compiledGlyphs[t]=function(e,t){}}if(this.isEvalSupported&&r.FeatureTest.isEvalSupported){const e=[];for(const t of n){const n=void 0!==t.args?t.args.join(","):"";e.push("c.",t.cmd,"(",n,");\n")}return this.compiledGlyphs[t]=new Function("c","size",e.join(""))}return this.compiledGlyphs[t]=function(e,t){for(const r of n)"scale"===r.cmd&&(r.args=[t,-t]),e[r.cmd].apply(e,r.args)}}}},(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.NodeStandardFontDataFactory=t.NodeFilterFactory=t.NodeCanvasFactory=t.NodeCMapReaderFactory=void 0;var r=n(7);n(1);const i=function(e){return new Promise(((t,n)=>{__webpack_require__(237).readFile(e,((e,r)=>{!e&&r?t(new Uint8Array(r)):n(new Error(e))}))}))};class s extends r.BaseFilterFactory{}t.NodeFilterFactory=s;class a extends r.BaseCanvasFactory{_createCanvas(e,t){return __webpack_require__(640).createCanvas(e,t)}}t.NodeCanvasFactory=a;class o extends r.BaseCMapReaderFactory{_fetchData(e,t){return i(e).then((e=>({cMapData:e,compressionType:t})))}}t.NodeCMapReaderFactory=o;class l extends r.BaseStandardFontDataFactory{_fetchData(e){return i(e)}}t.NodeStandardFontDataFactory=l},(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.CanvasGraphics=void 0;var r=n(1),i=n(6),s=n(12),a=n(13);const o=4096,l=16;class c{constructor(e){this.canvasFactory=e,this.cache=Object.create(null)}getCanvas(e,t,n){let r;return void 0!==this.cache[e]?(r=this.cache[e],this.canvasFactory.reset(r,t,n)):(r=this.canvasFactory.create(t,n),this.cache[e]=r),r}delete(e){delete this.cache[e]}clear(){for(const e in this.cache){const t=this.cache[e];this.canvasFactory.destroy(t),delete this.cache[e]}}}function u(e,t,n,r,s,a,o,l,c,u){const[d,h,p,f,m,g]=(0,i.getCurrentTransform)(e);if(0===h&&0===p){const i=o*d+m,v=Math.round(i),_=l*f+g,y=Math.round(_),b=(o+c)*d+m,w=Math.abs(Math.round(b)-v)||1,S=(l+u)*f+g,P=Math.abs(Math.round(S)-y)||1;return e.setTransform(Math.sign(d),0,0,Math.sign(f),v,y),e.drawImage(t,n,r,s,a,0,0,w,P),e.setTransform(d,h,p,f,m,g),[w,P]}if(0===d&&0===f){const i=l*p+m,v=Math.round(i),_=o*h+g,y=Math.round(_),b=(l+u)*p+m,w=Math.abs(Math.round(b)-v)||1,S=(o+c)*h+g,P=Math.abs(Math.round(S)-y)||1;return e.setTransform(0,Math.sign(h),Math.sign(p),0,v,y),e.drawImage(t,n,r,s,a,0,0,P,w),e.setTransform(d,h,p,f,m,g),[P,w]}return e.drawImage(t,n,r,s,a,o,l,c,u),[Math.hypot(d,h)*c,Math.hypot(p,f)*u]}class d{constructor(e,t){this.alphaIsShape=!1,this.fontSize=0,this.fontSizeScale=1,this.textMatrix=r.IDENTITY_MATRIX,this.textMatrixScale=1,this.fontMatrix=r.FONT_IDENTITY_MATRIX,this.leading=0,this.x=0,this.y=0,this.lineX=0,this.lineY=0,this.charSpacing=0,this.wordSpacing=0,this.textHScale=1,this.textRenderingMode=r.TextRenderingMode.FILL,this.textRise=0,this.fillColor="#000000",this.strokeColor="#000000",this.patternFill=!1,this.fillAlpha=1,this.strokeAlpha=1,this.lineWidth=1,this.activeSMask=null,this.transferMaps="none",this.startNewPathAndClipBox([0,0,e,t])}clone(){const e=Object.create(this);return e.clipBox=this.clipBox.slice(),e}setCurrentPoint(e,t){this.x=e,this.y=t}updatePathMinMax(e,t,n){[t,n]=r.Util.applyTransform([t,n],e),this.minX=Math.min(this.minX,t),this.minY=Math.min(this.minY,n),this.maxX=Math.max(this.maxX,t),this.maxY=Math.max(this.maxY,n)}updateRectMinMax(e,t){const n=r.Util.applyTransform(t,e),i=r.Util.applyTransform(t.slice(2),e);this.minX=Math.min(this.minX,n[0],i[0]),this.minY=Math.min(this.minY,n[1],i[1]),this.maxX=Math.max(this.maxX,n[0],i[0]),this.maxY=Math.max(this.maxY,n[1],i[1])}updateScalingPathMinMax(e,t){r.Util.scaleMinMax(e,t),this.minX=Math.min(this.minX,t[0]),this.maxX=Math.max(this.maxX,t[1]),this.minY=Math.min(this.minY,t[2]),this.maxY=Math.max(this.maxY,t[3])}updateCurvePathMinMax(e,t,n,i,s,a,o,l,c,u){const d=r.Util.bezierBoundingBox(t,n,i,s,a,o,l,c);if(u)return u[0]=Math.min(u[0],d[0],d[2]),u[1]=Math.max(u[1],d[0],d[2]),u[2]=Math.min(u[2],d[1],d[3]),void(u[3]=Math.max(u[3],d[1],d[3]));this.updateRectMinMax(e,d)}getPathBoundingBox(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:s.PathType.FILL,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;const n=[this.minX,this.minY,this.maxX,this.maxY];if(e===s.PathType.STROKE){t||(0,r.unreachable)("Stroke bounding box must include transform.");const e=r.Util.singularValueDecompose2dScale(t),i=e[0]*this.lineWidth/2,s=e[1]*this.lineWidth/2;n[0]-=i,n[1]-=s,n[2]+=i,n[3]+=s}return n}updateClipFromPath(){const e=r.Util.intersect(this.clipBox,this.getPathBoundingBox());this.startNewPathAndClipBox(e||[0,0,0,0])}isEmptyClip(){return this.minX===1/0}startNewPathAndClipBox(e){this.clipBox=e,this.minX=1/0,this.minY=1/0,this.maxX=0,this.maxY=0}getClippedPathBoundingBox(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:s.PathType.FILL,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return r.Util.intersect(this.clipBox,this.getPathBoundingBox(e,t))}}function h(e,t){if("undefined"!==typeof ImageData&&t instanceof ImageData)return void e.putImageData(t,0,0);const n=t.height,i=t.width,s=n%l,a=(n-s)/l,o=0===s?a:a+1,c=e.createImageData(i,l);let u,d=0;const h=t.data,p=c.data;let f,m,g,v;if(t.kind===r.ImageKind.GRAYSCALE_1BPP){const t=h.byteLength,n=new Uint32Array(p.buffer,0,p.byteLength>>2),v=n.length,_=i+7>>3,y=4294967295,b=r.FeatureTest.isLittleEndian?4278190080:255;for(f=0;f<o;f++){for(g=f<a?l:s,u=0,m=0;m<g;m++){const e=t-d;let r=0;const s=e>_?i:8*e-7,a=-8&s;let o=0,l=0;for(;r<a;r+=8)l=h[d++],n[u++]=128&l?y:b,n[u++]=64&l?y:b,n[u++]=32&l?y:b,n[u++]=16&l?y:b,n[u++]=8&l?y:b,n[u++]=4&l?y:b,n[u++]=2&l?y:b,n[u++]=1&l?y:b;for(;r<s;r++)0===o&&(l=h[d++],o=128),n[u++]=l&o?y:b,o>>=1}for(;u<v;)n[u++]=0;e.putImageData(c,0,f*l)}}else if(t.kind===r.ImageKind.RGBA_32BPP){for(m=0,v=i*l*4,f=0;f<a;f++)p.set(h.subarray(d,d+v)),d+=v,e.putImageData(c,0,m),m+=l;f<o&&(v=i*s*4,p.set(h.subarray(d,d+v)),e.putImageData(c,0,m))}else{if(t.kind!==r.ImageKind.RGB_24BPP)throw new Error("bad image kind: ".concat(t.kind));for(g=l,v=i*g,f=0;f<o;f++){for(f>=a&&(g=s,v=i*g),u=0,m=v;m--;)p[u++]=h[d++],p[u++]=h[d++],p[u++]=h[d++],p[u++]=255;e.putImageData(c,0,f*l)}}}function p(e,t){if(t.bitmap)return void e.drawImage(t.bitmap,0,0);const n=t.height,r=t.width,i=n%l,s=(n-i)/l,o=0===i?s:s+1,c=e.createImageData(r,l);let u=0;const d=t.data,h=c.data;for(let p=0;p<o;p++){const t=p<s?l:i;({srcPos:u}=(0,a.convertBlackAndWhiteToRGBA)({src:d,srcPos:u,dest:h,width:r,height:t,nonBlackColor:0})),e.putImageData(c,0,p*l)}}function f(e,t){const n=["strokeStyle","fillStyle","fillRule","globalAlpha","lineWidth","lineCap","lineJoin","miterLimit","globalCompositeOperation","font","filter"];for(const r of n)void 0!==e[r]&&(t[r]=e[r]);void 0!==e.setLineDash&&(t.setLineDash(e.getLineDash()),t.lineDashOffset=e.lineDashOffset)}function m(e){if(e.strokeStyle=e.fillStyle="#000000",e.fillRule="nonzero",e.globalAlpha=1,e.lineWidth=1,e.lineCap="butt",e.lineJoin="miter",e.miterLimit=10,e.globalCompositeOperation="source-over",e.font="10px sans-serif",void 0!==e.setLineDash&&(e.setLineDash([]),e.lineDashOffset=0),!r.isNodeJS){const{filter:t}=e;"none"!==t&&""!==t&&(e.filter="none")}}function g(e,t,n,r){const i=e.length;for(let s=3;s<i;s+=4){const i=e[s];if(0===i)e[s-3]=t,e[s-2]=n,e[s-1]=r;else if(i<255){const a=255-i;e[s-3]=e[s-3]*i+t*a>>8,e[s-2]=e[s-2]*i+n*a>>8,e[s-1]=e[s-1]*i+r*a>>8}}}function v(e,t,n){const r=e.length,i=1/255;for(let s=3;s<r;s+=4){const r=n?n[e[s]]:e[s];t[s]=t[s]*r*i|0}}function _(e,t,n){const r=e.length;for(let i=3;i<r;i+=4){const r=77*e[i-3]+152*e[i-2]+28*e[i-1];t[i]=n?t[i]*n[r>>8]>>8:t[i]*r>>16}}function y(e,t,n,r){const i=r[0],s=r[1],a=r[2]-i,o=r[3]-s;0!==a&&0!==o&&(function(e,t,n,r,i,s,a,o,l,c,u){const d=!!s,h=d?s[0]:0,p=d?s[1]:0,f=d?s[2]:0,m="Luminosity"===i?_:v,y=Math.min(r,Math.ceil(1048576/n));for(let v=0;v<r;v+=y){const i=Math.min(y,r-v),s=e.getImageData(o-c,v+(l-u),n,i),_=t.getImageData(o,v+l,n,i);d&&g(s.data,h,p,f),m(s.data,_.data,a),t.putImageData(_,o,v+l)}}(t.context,n,a,o,t.subtype,t.backdrop,t.transferMap,i,s,t.offsetX,t.offsetY),e.save(),e.globalAlpha=1,e.globalCompositeOperation="source-over",e.setTransform(1,0,0,1,0,0),e.drawImage(n.canvas,0,0),e.restore())}function b(e,t){const n=r.Util.singularValueDecompose2dScale(e);n[0]=Math.fround(n[0]),n[1]=Math.fround(n[1]);const s=Math.fround((globalThis.devicePixelRatio||1)*i.PixelsPerInch.PDF_TO_CSS_UNITS);return void 0!==t?t:n[0]<=s||n[1]<=s}const w=["butt","round","square"],S=["miter","round","bevel"],P={},C={};var E=new WeakSet;class x{constructor(e,t,n,r,i,s,a,o){let{optionalContentConfig:l,markedContentStack:u=null}=s;_classPrivateMethodInitSpec(this,E),this.ctx=e,this.current=new d(this.ctx.canvas.width,this.ctx.canvas.height),this.stateStack=[],this.pendingClip=null,this.pendingEOFill=!1,this.res=null,this.xobjs=null,this.commonObjs=t,this.objs=n,this.canvasFactory=r,this.filterFactory=i,this.groupStack=[],this.processingType3=null,this.baseTransform=null,this.baseTransformStack=[],this.groupLevel=0,this.smaskStack=[],this.smaskCounter=0,this.tempSMask=null,this.suspendedCtx=null,this.contentVisible=!0,this.markedContentStack=u||[],this.optionalContentConfig=l,this.cachedCanvases=new c(this.canvasFactory),this.cachedPatterns=new Map,this.annotationCanvasMap=a,this.viewportScale=1,this.outputScaleX=1,this.outputScaleY=1,this.pageColors=o,this._cachedScaleForStroking=[-1,0],this._cachedGetSinglePixelWidth=null,this._cachedBitmapsMap=new Map}getObject(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return"string"===typeof e?e.startsWith("g_")?this.commonObjs.get(e):this.objs.get(e):t}beginDrawing(e){let{transform:t,viewport:n,transparency:r=!1,background:s=null}=e;const a=this.ctx.canvas.width,o=this.ctx.canvas.height,l=this.ctx.fillStyle;if(this.ctx.fillStyle=s||"#ffffff",this.ctx.fillRect(0,0,a,o),this.ctx.fillStyle=l,r){const e=this.cachedCanvases.getCanvas("transparent",a,o);this.compositeCtx=this.ctx,this.transparentCanvas=e.canvas,this.ctx=e.context,this.ctx.save(),this.ctx.transform(...(0,i.getCurrentTransform)(this.compositeCtx))}this.ctx.save(),m(this.ctx),t&&(this.ctx.transform(...t),this.outputScaleX=t[0],this.outputScaleY=t[0]),this.ctx.transform(...n.transform),this.viewportScale=n.scale,this.baseTransform=(0,i.getCurrentTransform)(this.ctx)}executeOperatorList(e,t,n,i){const s=e.argsArray,a=e.fnArray;let o=t||0;const l=s.length;if(l===o)return o;const c=l-o>10&&"function"===typeof n,u=c?Date.now()+15:0;let d=0;const h=this.commonObjs,p=this.objs;let f;for(;;){if(void 0!==i&&o===i.nextBreakPoint)return i.breakIt(o,n),o;if(f=a[o],f!==r.OPS.dependency)this[f].apply(this,s[o]);else for(const e of s[o]){const t=e.startsWith("g_")?h:p;if(!t.has(e))return t.get(e,n),o}if(o++,o===l)return o;if(c&&++d>10){if(Date.now()>u)return n(),o;d=0}}}endDrawing(){_assertClassBrand(E,this,k).call(this),this.cachedCanvases.clear(),this.cachedPatterns.clear();for(const e of this._cachedBitmapsMap.values()){for(const t of e.values())"undefined"!==typeof HTMLCanvasElement&&t instanceof HTMLCanvasElement&&(t.width=t.height=0);e.clear()}this._cachedBitmapsMap.clear(),_assertClassBrand(E,this,A).call(this)}_scaleImage(e,t){const n=e.width,r=e.height;let i,s,a=Math.max(Math.hypot(t[0],t[1]),1),o=Math.max(Math.hypot(t[2],t[3]),1),l=n,c=r,u="prescale1";for(;a>2&&l>1||o>2&&c>1;){let t=l,n=c;a>2&&l>1&&(t=l>=16384?Math.floor(l/2)-1||1:Math.ceil(l/2),a/=l/t),o>2&&c>1&&(n=c>=16384?Math.floor(c/2)-1||1:Math.ceil(c)/2,o/=c/n),i=this.cachedCanvases.getCanvas(u,t,n),s=i.context,s.clearRect(0,0,t,n),s.drawImage(e,0,0,l,c,0,0,t,n),e=i.canvas,l=t,c=n,u="prescale1"===u?"prescale2":"prescale1"}return{img:e,paintWidth:l,paintHeight:c}}_createMaskCanvas(e){const t=this.ctx,{width:n,height:a}=e,o=this.current.fillColor,l=this.current.patternFill,c=(0,i.getCurrentTransform)(t);let d,h,f,m;if((e.bitmap||e.data)&&e.count>1){const t=e.bitmap||e.data.buffer;h=JSON.stringify(l?c:[c.slice(0,4),o]),d=this._cachedBitmapsMap.get(t),d||(d=new Map,this._cachedBitmapsMap.set(t,d));const n=d.get(h);if(n&&!l)return{canvas:n,offsetX:Math.round(Math.min(c[0],c[2])+c[4]),offsetY:Math.round(Math.min(c[1],c[3])+c[5])};f=n}f||(m=this.cachedCanvases.getCanvas("maskCanvas",n,a),p(m.context,e));let g=r.Util.transform(c,[1/n,0,0,-1/a,0,0]);g=r.Util.transform(g,[1,0,0,1,0,-a]);const v=r.Util.applyTransform([0,0],g),_=r.Util.applyTransform([n,a],g),y=r.Util.normalizeRect([v[0],v[1],_[0],_[1]]),w=Math.round(y[2]-y[0])||1,S=Math.round(y[3]-y[1])||1,P=this.cachedCanvases.getCanvas("fillCanvas",w,S),C=P.context,E=Math.min(v[0],_[0]),x=Math.min(v[1],_[1]);C.translate(-E,-x),C.transform(...g),f||(f=this._scaleImage(m.canvas,(0,i.getCurrentTransformInverse)(C)),f=f.img,d&&l&&d.set(h,f)),C.imageSmoothingEnabled=b((0,i.getCurrentTransform)(C),e.interpolate),u(C,f,0,0,f.width,f.height,0,0,n,a),C.globalCompositeOperation="source-in";const k=r.Util.transform((0,i.getCurrentTransformInverse)(C),[1,0,0,1,-E,-x]);return C.fillStyle=l?o.getPattern(t,this,k,s.PathType.FILL):o,C.fillRect(0,0,n,a),d&&!l&&(this.cachedCanvases.delete("fillCanvas"),d.set(h,P.canvas)),{canvas:P.canvas,offsetX:Math.round(E),offsetY:Math.round(x)}}setLineWidth(e){e!==this.current.lineWidth&&(this._cachedScaleForStroking[0]=-1),this.current.lineWidth=e,this.ctx.lineWidth=e}setLineCap(e){this.ctx.lineCap=w[e]}setLineJoin(e){this.ctx.lineJoin=S[e]}setMiterLimit(e){this.ctx.miterLimit=e}setDash(e,t){const n=this.ctx;void 0!==n.setLineDash&&(n.setLineDash(e),n.lineDashOffset=t)}setRenderingIntent(e){}setFlatness(e){}setGState(e){for(const[t,n]of e)switch(t){case"LW":this.setLineWidth(n);break;case"LC":this.setLineCap(n);break;case"LJ":this.setLineJoin(n);break;case"ML":this.setMiterLimit(n);break;case"D":this.setDash(n[0],n[1]);break;case"RI":this.setRenderingIntent(n);break;case"FL":this.setFlatness(n);break;case"Font":this.setFont(n[0],n[1]);break;case"CA":this.current.strokeAlpha=n;break;case"ca":this.current.fillAlpha=n,this.ctx.globalAlpha=n;break;case"BM":this.ctx.globalCompositeOperation=n;break;case"SMask":this.current.activeSMask=n?this.tempSMask:null,this.tempSMask=null,this.checkSMaskState();break;case"TR":this.ctx.filter=this.current.transferMaps=this.filterFactory.addFilter(n)}}get inSMaskMode(){return!!this.suspendedCtx}checkSMaskState(){const e=this.inSMaskMode;this.current.activeSMask&&!e?this.beginSMaskMode():!this.current.activeSMask&&e&&this.endSMaskMode()}beginSMaskMode(){if(this.inSMaskMode)throw new Error("beginSMaskMode called while already in smask mode");const e=this.ctx.canvas.width,t=this.ctx.canvas.height,n="smaskGroupAt"+this.groupLevel,r=this.cachedCanvases.getCanvas(n,e,t);this.suspendedCtx=this.ctx,this.ctx=r.context;const s=this.ctx;s.setTransform(...(0,i.getCurrentTransform)(this.suspendedCtx)),f(this.suspendedCtx,s),function(e,t){if(e._removeMirroring)throw new Error("Context is already forwarding operations.");e.__originalSave=e.save,e.__originalRestore=e.restore,e.__originalRotate=e.rotate,e.__originalScale=e.scale,e.__originalTranslate=e.translate,e.__originalTransform=e.transform,e.__originalSetTransform=e.setTransform,e.__originalResetTransform=e.resetTransform,e.__originalClip=e.clip,e.__originalMoveTo=e.moveTo,e.__originalLineTo=e.lineTo,e.__originalBezierCurveTo=e.bezierCurveTo,e.__originalRect=e.rect,e.__originalClosePath=e.closePath,e.__originalBeginPath=e.beginPath,e._removeMirroring=()=>{e.save=e.__originalSave,e.restore=e.__originalRestore,e.rotate=e.__originalRotate,e.scale=e.__originalScale,e.translate=e.__originalTranslate,e.transform=e.__originalTransform,e.setTransform=e.__originalSetTransform,e.resetTransform=e.__originalResetTransform,e.clip=e.__originalClip,e.moveTo=e.__originalMoveTo,e.lineTo=e.__originalLineTo,e.bezierCurveTo=e.__originalBezierCurveTo,e.rect=e.__originalRect,e.closePath=e.__originalClosePath,e.beginPath=e.__originalBeginPath,delete e._removeMirroring},e.save=function(){t.save(),this.__originalSave()},e.restore=function(){t.restore(),this.__originalRestore()},e.translate=function(e,n){t.translate(e,n),this.__originalTranslate(e,n)},e.scale=function(e,n){t.scale(e,n),this.__originalScale(e,n)},e.transform=function(e,n,r,i,s,a){t.transform(e,n,r,i,s,a),this.__originalTransform(e,n,r,i,s,a)},e.setTransform=function(e,n,r,i,s,a){t.setTransform(e,n,r,i,s,a),this.__originalSetTransform(e,n,r,i,s,a)},e.resetTransform=function(){t.resetTransform(),this.__originalResetTransform()},e.rotate=function(e){t.rotate(e),this.__originalRotate(e)},e.clip=function(e){t.clip(e),this.__originalClip(e)},e.moveTo=function(e,n){t.moveTo(e,n),this.__originalMoveTo(e,n)},e.lineTo=function(e,n){t.lineTo(e,n),this.__originalLineTo(e,n)},e.bezierCurveTo=function(e,n,r,i,s,a){t.bezierCurveTo(e,n,r,i,s,a),this.__originalBezierCurveTo(e,n,r,i,s,a)},e.rect=function(e,n,r,i){t.rect(e,n,r,i),this.__originalRect(e,n,r,i)},e.closePath=function(){t.closePath(),this.__originalClosePath()},e.beginPath=function(){t.beginPath(),this.__originalBeginPath()}}(s,this.suspendedCtx),this.setGState([["BM","source-over"],["ca",1],["CA",1]])}endSMaskMode(){if(!this.inSMaskMode)throw new Error("endSMaskMode called while not in smask mode");this.ctx._removeMirroring(),f(this.ctx,this.suspendedCtx),this.ctx=this.suspendedCtx,this.suspendedCtx=null}compose(e){if(!this.current.activeSMask)return;e?(e[0]=Math.floor(e[0]),e[1]=Math.floor(e[1]),e[2]=Math.ceil(e[2]),e[3]=Math.ceil(e[3])):e=[0,0,this.ctx.canvas.width,this.ctx.canvas.height];const t=this.current.activeSMask;y(this.suspendedCtx,t,this.ctx,e),this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.clearRect(0,0,this.ctx.canvas.width,this.ctx.canvas.height),this.ctx.restore()}save(){this.inSMaskMode?(f(this.ctx,this.suspendedCtx),this.suspendedCtx.save()):this.ctx.save();const e=this.current;this.stateStack.push(e),this.current=e.clone()}restore(){0===this.stateStack.length&&this.inSMaskMode&&this.endSMaskMode(),0!==this.stateStack.length&&(this.current=this.stateStack.pop(),this.inSMaskMode?(this.suspendedCtx.restore(),f(this.suspendedCtx,this.ctx)):this.ctx.restore(),this.checkSMaskState(),this.pendingClip=null,this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null)}transform(e,t,n,r,i,s){this.ctx.transform(e,t,n,r,i,s),this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null}constructPath(e,t,n){const s=this.ctx,a=this.current;let o,l,c=a.x,u=a.y;const d=(0,i.getCurrentTransform)(s),h=0===d[0]&&0===d[3]||0===d[1]&&0===d[2],p=h?n.slice(0):null;for(let i=0,f=0,m=e.length;i<m;i++)switch(0|e[i]){case r.OPS.rectangle:c=t[f++],u=t[f++];const e=t[f++],n=t[f++],i=c+e,m=u+n;s.moveTo(c,u),0===e||0===n?s.lineTo(i,m):(s.lineTo(i,u),s.lineTo(i,m),s.lineTo(c,m)),h||a.updateRectMinMax(d,[c,u,i,m]),s.closePath();break;case r.OPS.moveTo:c=t[f++],u=t[f++],s.moveTo(c,u),h||a.updatePathMinMax(d,c,u);break;case r.OPS.lineTo:c=t[f++],u=t[f++],s.lineTo(c,u),h||a.updatePathMinMax(d,c,u);break;case r.OPS.curveTo:o=c,l=u,c=t[f+4],u=t[f+5],s.bezierCurveTo(t[f],t[f+1],t[f+2],t[f+3],c,u),a.updateCurvePathMinMax(d,o,l,t[f],t[f+1],t[f+2],t[f+3],c,u,p),f+=6;break;case r.OPS.curveTo2:o=c,l=u,s.bezierCurveTo(c,u,t[f],t[f+1],t[f+2],t[f+3]),a.updateCurvePathMinMax(d,o,l,c,u,t[f],t[f+1],t[f+2],t[f+3],p),c=t[f+2],u=t[f+3],f+=4;break;case r.OPS.curveTo3:o=c,l=u,c=t[f+2],u=t[f+3],s.bezierCurveTo(t[f],t[f+1],c,u,c,u),a.updateCurvePathMinMax(d,o,l,t[f],t[f+1],c,u,c,u,p),f+=4;break;case r.OPS.closePath:s.closePath()}h&&a.updateScalingPathMinMax(d,p),a.setCurrentPoint(c,u)}closePath(){this.ctx.closePath()}stroke(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];const t=this.ctx,n=this.current.strokeColor;t.globalAlpha=this.current.strokeAlpha,this.contentVisible&&("object"===typeof n&&null!==n&&void 0!==n&&n.getPattern?(t.save(),t.strokeStyle=n.getPattern(t,this,(0,i.getCurrentTransformInverse)(t),s.PathType.STROKE),this.rescaleAndStroke(!1),t.restore()):this.rescaleAndStroke(!0)),e&&this.consumePath(this.current.getClippedPathBoundingBox()),t.globalAlpha=this.current.fillAlpha}closeStroke(){this.closePath(),this.stroke()}fill(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];const t=this.ctx,n=this.current.fillColor;let r=!1;this.current.patternFill&&(t.save(),t.fillStyle=n.getPattern(t,this,(0,i.getCurrentTransformInverse)(t),s.PathType.FILL),r=!0);const a=this.current.getClippedPathBoundingBox();this.contentVisible&&null!==a&&(this.pendingEOFill?(t.fill("evenodd"),this.pendingEOFill=!1):t.fill()),r&&t.restore(),e&&this.consumePath(a)}eoFill(){this.pendingEOFill=!0,this.fill()}fillStroke(){this.fill(!1),this.stroke(!1),this.consumePath()}eoFillStroke(){this.pendingEOFill=!0,this.fillStroke()}closeFillStroke(){this.closePath(),this.fillStroke()}closeEOFillStroke(){this.pendingEOFill=!0,this.closePath(),this.fillStroke()}endPath(){this.consumePath()}clip(){this.pendingClip=P}eoClip(){this.pendingClip=C}beginText(){this.current.textMatrix=r.IDENTITY_MATRIX,this.current.textMatrixScale=1,this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}endText(){const e=this.pendingTextPaths,t=this.ctx;if(void 0!==e){t.save(),t.beginPath();for(const n of e)t.setTransform(...n.transform),t.translate(n.x,n.y),n.addToPath(t,n.fontSize);t.restore(),t.clip(),t.beginPath(),delete this.pendingTextPaths}else t.beginPath()}setCharSpacing(e){this.current.charSpacing=e}setWordSpacing(e){this.current.wordSpacing=e}setHScale(e){this.current.textHScale=e/100}setLeading(e){this.current.leading=-e}setFont(e,t){var n;const i=this.commonObjs.get(e),s=this.current;if(!i)throw new Error("Can't find font for ".concat(e));if(s.fontMatrix=i.fontMatrix||r.FONT_IDENTITY_MATRIX,0!==s.fontMatrix[0]&&0!==s.fontMatrix[3]||(0,r.warn)("Invalid font matrix for font "+e),t<0?(t=-t,s.fontDirection=-1):s.fontDirection=1,this.current.font=i,this.current.fontSize=t,i.isType3Font)return;const a=i.loadedName||"sans-serif",o=(null===(n=i.systemFontInfo)||void 0===n?void 0:n.css)||'"'.concat(a,'", ').concat(i.fallbackName);let l="normal";i.black?l="900":i.bold&&(l="bold");const c=i.italic?"italic":"normal";let u=t;t<16?u=16:t>100&&(u=100),this.current.fontSizeScale=t/u,this.ctx.font="".concat(c," ").concat(l," ").concat(u,"px ").concat(o)}setTextRenderingMode(e){this.current.textRenderingMode=e}setTextRise(e){this.current.textRise=e}moveText(e,t){this.current.x=this.current.lineX+=e,this.current.y=this.current.lineY+=t}setLeadingMoveText(e,t){this.setLeading(-t),this.moveText(e,t)}setTextMatrix(e,t,n,r,i,s){this.current.textMatrix=[e,t,n,r,i,s],this.current.textMatrixScale=Math.hypot(e,t),this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}nextLine(){this.moveText(0,this.current.leading)}paintChar(e,t,n,s){const a=this.ctx,o=this.current,l=o.font,c=o.textRenderingMode,u=o.fontSize/o.fontSizeScale,d=c&r.TextRenderingMode.FILL_STROKE_MASK,h=!!(c&r.TextRenderingMode.ADD_TO_PATH_FLAG),p=o.patternFill&&!l.missingFile;let f;(l.disableFontFace||h||p)&&(f=l.getPathGenerator(this.commonObjs,e)),l.disableFontFace||p?(a.save(),a.translate(t,n),a.beginPath(),f(a,u),s&&a.setTransform(...s),d!==r.TextRenderingMode.FILL&&d!==r.TextRenderingMode.FILL_STROKE||a.fill(),d!==r.TextRenderingMode.STROKE&&d!==r.TextRenderingMode.FILL_STROKE||a.stroke(),a.restore()):(d!==r.TextRenderingMode.FILL&&d!==r.TextRenderingMode.FILL_STROKE||a.fillText(e,t,n),d!==r.TextRenderingMode.STROKE&&d!==r.TextRenderingMode.FILL_STROKE||a.strokeText(e,t,n)),h&&(this.pendingTextPaths||(this.pendingTextPaths=[])).push({transform:(0,i.getCurrentTransform)(a),x:t,y:n,fontSize:u,addToPath:f})}get isFontSubpixelAAEnabled(){const{context:e}=this.cachedCanvases.getCanvas("isFontSubpixelAAEnabled",10,10);e.scale(1.5,1),e.fillText("I",0,10);const t=e.getImageData(0,0,10,10).data;let n=!1;for(let r=3;r<t.length;r+=4)if(t[r]>0&&t[r]<255){n=!0;break}return(0,r.shadow)(this,"isFontSubpixelAAEnabled",n)}showText(e){const t=this.current,n=t.font;if(n.isType3Font)return this.showType3Text(e);const a=t.fontSize;if(0===a)return;const o=this.ctx,l=t.fontSizeScale,c=t.charSpacing,u=t.wordSpacing,d=t.fontDirection,h=t.textHScale*d,p=e.length,f=n.vertical,m=f?1:-1,g=n.defaultVMetrics,v=a*t.fontMatrix[0],_=t.textRenderingMode===r.TextRenderingMode.FILL&&!n.disableFontFace&&!t.patternFill;let y;if(o.save(),o.transform(...t.textMatrix),o.translate(t.x,t.y+t.textRise),d>0?o.scale(h,-1):o.scale(h,1),t.patternFill){o.save();const e=t.fillColor.getPattern(o,this,(0,i.getCurrentTransformInverse)(o),s.PathType.FILL);y=(0,i.getCurrentTransform)(o),o.restore(),o.fillStyle=e}let b=t.lineWidth;const w=t.textMatrixScale;if(0===w||0===b){const e=t.textRenderingMode&r.TextRenderingMode.FILL_STROKE_MASK;e!==r.TextRenderingMode.STROKE&&e!==r.TextRenderingMode.FILL_STROKE||(b=this.getSinglePixelWidth())}else b/=w;if(1!==l&&(o.scale(l,l),b/=l),o.lineWidth=b,n.isInvalidPDFjsFont){const n=[];let r=0;for(const t of e)n.push(t.unicode),r+=t.width;return o.fillText(n.join(""),0,0),t.x+=r*v*h,o.restore(),void this.compose()}let S,P=0;for(S=0;S<p;++S){const t=e[S];if("number"===typeof t){P+=m*t*a/1e3;continue}let r=!1;const i=(t.isSpace?u:0)+c,s=t.fontChar,h=t.accent;let p,b,w=t.width;if(f){const e=t.vmetric||g,n=-(t.vmetric?e[1]:.5*w)*v,r=e[2]*v;w=e?-e[0]:w,p=n/l,b=(P+r)/l}else p=P/l,b=0;if(n.remeasure&&w>0){const e=1e3*o.measureText(s).width/a*l;if(w<e&&this.isFontSubpixelAAEnabled){const t=w/e;r=!0,o.save(),o.scale(t,1),p/=t}else w!==e&&(p+=(w-e)/2e3*a/l)}if(this.contentVisible&&(t.isInFont||n.missingFile))if(_&&!h)o.fillText(s,p,b);else if(this.paintChar(s,p,b,y),h){const e=p+a*h.offset.x/l,t=b-a*h.offset.y/l;this.paintChar(h.fontChar,e,t,y)}P+=f?w*v-i*d:w*v+i*d,r&&o.restore()}f?t.y-=P:t.x+=P*h,o.restore(),this.compose()}showType3Text(e){const t=this.ctx,n=this.current,i=n.font,s=n.fontSize,a=n.fontDirection,o=i.vertical?1:-1,l=n.charSpacing,c=n.wordSpacing,u=n.textHScale*a,d=n.fontMatrix||r.FONT_IDENTITY_MATRIX,h=e.length;let p,f,m,g;if(n.textRenderingMode!==r.TextRenderingMode.INVISIBLE&&0!==s){for(this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null,t.save(),t.transform(...n.textMatrix),t.translate(n.x,n.y),t.scale(u,a),p=0;p<h;++p){if(f=e[p],"number"===typeof f){g=o*f*s/1e3,this.ctx.translate(g,0),n.x+=g*u;continue}const a=(f.isSpace?c:0)+l,h=i.charProcOperatorList[f.operatorListId];h?(this.contentVisible&&(this.processingType3=f,this.save(),t.scale(s,s),t.transform(...d),this.executeOperatorList(h),this.restore()),m=r.Util.applyTransform([f.width,0],d)[0]*s+a,t.translate(m,0),n.x+=m*u):(0,r.warn)('Type3 character "'.concat(f.operatorListId,'" is not available.'))}t.restore(),this.processingType3=null}}setCharWidth(e,t){}setCharWidthAndBounds(e,t,n,r,i,s){this.ctx.rect(n,r,i-n,s-r),this.ctx.clip(),this.endPath()}getColorN_Pattern(e){let t;if("TilingPattern"===e[0]){const n=e[1],r=this.baseTransform||(0,i.getCurrentTransform)(this.ctx),a={createCanvasGraphics:e=>new x(e,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:this.optionalContentConfig,markedContentStack:this.markedContentStack})};t=new s.TilingPattern(e,n,this.ctx,a,r)}else t=this._getPattern(e[1],e[2]);return t}setStrokeColorN(){this.current.strokeColor=this.getColorN_Pattern(arguments)}setFillColorN(){this.current.fillColor=this.getColorN_Pattern(arguments),this.current.patternFill=!0}setStrokeRGBColor(e,t,n){const i=r.Util.makeHexColor(e,t,n);this.ctx.strokeStyle=i,this.current.strokeColor=i}setFillRGBColor(e,t,n){const i=r.Util.makeHexColor(e,t,n);this.ctx.fillStyle=i,this.current.fillColor=i,this.current.patternFill=!1}_getPattern(e){let t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return this.cachedPatterns.has(e)?t=this.cachedPatterns.get(e):(t=(0,s.getShadingPattern)(this.getObject(e)),this.cachedPatterns.set(e,t)),n&&(t.matrix=n),t}shadingFill(e){if(!this.contentVisible)return;const t=this.ctx;this.save();const n=this._getPattern(e);t.fillStyle=n.getPattern(t,this,(0,i.getCurrentTransformInverse)(t),s.PathType.SHADING);const a=(0,i.getCurrentTransformInverse)(t);if(a){const{width:e,height:n}=t.canvas,[i,s,o,l]=r.Util.getAxialAlignedBoundingBox([0,0,e,n],a);this.ctx.fillRect(i,s,o-i,l-s)}else this.ctx.fillRect(-1e10,-1e10,2e10,2e10);this.compose(this.current.getClippedPathBoundingBox()),this.restore()}beginInlineImage(){(0,r.unreachable)("Should not call beginInlineImage")}beginImageData(){(0,r.unreachable)("Should not call beginImageData")}paintFormXObjectBegin(e,t){if(this.contentVisible&&(this.save(),this.baseTransformStack.push(this.baseTransform),Array.isArray(e)&&6===e.length&&this.transform(...e),this.baseTransform=(0,i.getCurrentTransform)(this.ctx),t)){const e=t[2]-t[0],n=t[3]-t[1];this.ctx.rect(t[0],t[1],e,n),this.current.updateRectMinMax((0,i.getCurrentTransform)(this.ctx),t),this.clip(),this.endPath()}}paintFormXObjectEnd(){this.contentVisible&&(this.restore(),this.baseTransform=this.baseTransformStack.pop())}beginGroup(e){if(!this.contentVisible)return;this.save(),this.inSMaskMode&&(this.endSMaskMode(),this.current.activeSMask=null);const t=this.ctx;e.isolated||(0,r.info)("TODO: Support non-isolated groups."),e.knockout&&(0,r.warn)("Knockout groups not supported.");const n=(0,i.getCurrentTransform)(t);if(e.matrix&&t.transform(...e.matrix),!e.bbox)throw new Error("Bounding box is required.");let s=r.Util.getAxialAlignedBoundingBox(e.bbox,(0,i.getCurrentTransform)(t));const a=[0,0,t.canvas.width,t.canvas.height];s=r.Util.intersect(s,a)||[0,0,0,0];const l=Math.floor(s[0]),c=Math.floor(s[1]);let u=Math.max(Math.ceil(s[2])-l,1),d=Math.max(Math.ceil(s[3])-c,1),h=1,p=1;u>o&&(h=u/o,u=o),d>o&&(p=d/o,d=o),this.current.startNewPathAndClipBox([0,0,u,d]);let m="groupAt"+this.groupLevel;e.smask&&(m+="_smask_"+this.smaskCounter++%2);const g=this.cachedCanvases.getCanvas(m,u,d),v=g.context;v.scale(1/h,1/p),v.translate(-l,-c),v.transform(...n),e.smask?this.smaskStack.push({canvas:g.canvas,context:v,offsetX:l,offsetY:c,scaleX:h,scaleY:p,subtype:e.smask.subtype,backdrop:e.smask.backdrop,transferMap:e.smask.transferMap||null,startTransformInverse:null}):(t.setTransform(1,0,0,1,0,0),t.translate(l,c),t.scale(h,p),t.save()),f(t,v),this.ctx=v,this.setGState([["BM","source-over"],["ca",1],["CA",1]]),this.groupStack.push(t),this.groupLevel++}endGroup(e){if(!this.contentVisible)return;this.groupLevel--;const t=this.ctx,n=this.groupStack.pop();if(this.ctx=n,this.ctx.imageSmoothingEnabled=!1,e.smask)this.tempSMask=this.smaskStack.pop(),this.restore();else{this.ctx.restore();const e=(0,i.getCurrentTransform)(this.ctx);this.restore(),this.ctx.save(),this.ctx.setTransform(...e);const n=r.Util.getAxialAlignedBoundingBox([0,0,t.canvas.width,t.canvas.height],e);this.ctx.drawImage(t.canvas,0,0),this.ctx.restore(),this.compose(n)}}beginAnnotation(e,t,n,s,a){if(_assertClassBrand(E,this,k).call(this),m(this.ctx),this.ctx.save(),this.save(),this.baseTransform&&this.ctx.setTransform(...this.baseTransform),Array.isArray(t)&&4===t.length){const s=t[2]-t[0],o=t[3]-t[1];if(a&&this.annotationCanvasMap){(n=n.slice())[4]-=t[0],n[5]-=t[1],(t=t.slice())[0]=t[1]=0,t[2]=s,t[3]=o;const[a,l]=r.Util.singularValueDecompose2dScale((0,i.getCurrentTransform)(this.ctx)),{viewportScale:c}=this,u=Math.ceil(s*this.outputScaleX*c),d=Math.ceil(o*this.outputScaleY*c);this.annotationCanvas=this.canvasFactory.create(u,d);const{canvas:h,context:p}=this.annotationCanvas;this.annotationCanvasMap.set(e,h),this.annotationCanvas.savedCtx=this.ctx,this.ctx=p,this.ctx.save(),this.ctx.setTransform(a,0,0,-l,0,o*l),m(this.ctx)}else m(this.ctx),this.ctx.rect(t[0],t[1],s,o),this.ctx.clip(),this.endPath()}this.current=new d(this.ctx.canvas.width,this.ctx.canvas.height),this.transform(...n),this.transform(...s)}endAnnotation(){this.annotationCanvas&&(this.ctx.restore(),_assertClassBrand(E,this,A).call(this),this.ctx=this.annotationCanvas.savedCtx,delete this.annotationCanvas.savedCtx,delete this.annotationCanvas)}paintImageMaskXObject(e){if(!this.contentVisible)return;const t=e.count;(e=this.getObject(e.data,e)).count=t;const n=this.ctx,r=this.processingType3;if(r&&(void 0===r.compiled&&(r.compiled=function(e){const{width:t,height:n}=e;if(t>1e3||n>1e3)return null;const r=new Uint8Array([0,2,4,0,1,0,5,4,8,10,0,8,0,2,1,0]),i=t+1;let s,a,o,l=new Uint8Array(i*(n+1));const c=t+7&-8;let u=new Uint8Array(c*n),d=0;for(const m of e.data){let e=128;for(;e>0;)u[d++]=m&e?0:255,e>>=1}let h=0;for(d=0,0!==u[d]&&(l[0]=1,++h),a=1;a<t;a++)u[d]!==u[d+1]&&(l[a]=u[d]?2:1,++h),d++;for(0!==u[d]&&(l[a]=2,++h),s=1;s<n;s++){d=s*c,o=s*i,u[d-c]!==u[d]&&(l[o]=u[d]?1:8,++h);let e=(u[d]?4:0)+(u[d-c]?8:0);for(a=1;a<t;a++)e=(e>>2)+(u[d+1]?4:0)+(u[d-c+1]?8:0),r[e]&&(l[o+a]=r[e],++h),d++;if(u[d-c]!==u[d]&&(l[o+a]=u[d]?2:4,++h),h>1e3)return null}for(d=c*(n-1),o=s*i,0!==u[d]&&(l[o]=8,++h),a=1;a<t;a++)u[d]!==u[d+1]&&(l[o+a]=u[d]?4:8,++h),d++;if(0!==u[d]&&(l[o+a]=4,++h),h>1e3)return null;const p=new Int32Array([0,i,-1,0,-i,0,0,0,1]),f=new Path2D;for(s=0;h&&s<=n;s++){let e=s*i;const n=e+t;for(;e<n&&!l[e];)e++;if(e===n)continue;f.moveTo(e%i,s);const r=e;let a=l[e];do{const t=p[a];do{e+=t}while(!l[e]);const n=l[e];5!==n&&10!==n?(a=n,l[e]=0):(a=n&51*a>>4,l[e]&=a>>2|a<<2),f.lineTo(e%i,e/i|0),l[e]||--h}while(r!==e);--s}return u=null,l=null,function(e){e.save(),e.scale(1/t,-1/n),e.translate(0,-n),e.fill(f),e.beginPath(),e.restore()}}(e)),r.compiled))return void r.compiled(n);const i=this._createMaskCanvas(e),s=i.canvas;n.save(),n.setTransform(1,0,0,1,0,0),n.drawImage(s,i.offsetX,i.offsetY),n.restore(),this.compose()}paintImageMaskXObjectRepeat(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,a=arguments.length>4?arguments[4]:void 0,o=arguments.length>5?arguments[5]:void 0;if(!this.contentVisible)return;e=this.getObject(e.data,e);const l=this.ctx;l.save();const c=(0,i.getCurrentTransform)(l);l.transform(t,n,s,a,0,0);const u=this._createMaskCanvas(e);l.setTransform(1,0,0,1,u.offsetX-c[4],u.offsetY-c[5]);for(let i=0,d=o.length;i<d;i+=2){const e=r.Util.transform(c,[t,n,s,a,o[i],o[i+1]]),[d,h]=r.Util.applyTransform([0,0],e);l.drawImage(u.canvas,d,h)}l.restore(),this.compose()}paintImageMaskXObjectGroup(e){if(!this.contentVisible)return;const t=this.ctx,n=this.current.fillColor,r=this.current.patternFill;for(const a of e){const{data:e,width:o,height:l,transform:c}=a,d=this.cachedCanvases.getCanvas("maskCanvas",o,l),h=d.context;h.save(),p(h,this.getObject(e,a)),h.globalCompositeOperation="source-in",h.fillStyle=r?n.getPattern(h,this,(0,i.getCurrentTransformInverse)(t),s.PathType.FILL):n,h.fillRect(0,0,o,l),h.restore(),t.save(),t.transform(...c),t.scale(1,-1),u(t,d.canvas,0,0,o,l,0,-1,1,1),t.restore()}this.compose()}paintImageXObject(e){if(!this.contentVisible)return;const t=this.getObject(e);t?this.paintInlineImageXObject(t):(0,r.warn)("Dependent image isn't ready yet")}paintImageXObjectRepeat(e,t,n,i){if(!this.contentVisible)return;const s=this.getObject(e);if(!s)return void(0,r.warn)("Dependent image isn't ready yet");const a=s.width,o=s.height,l=[];for(let r=0,c=i.length;r<c;r+=2)l.push({transform:[t,0,0,n,i[r],i[r+1]],x:0,y:0,w:a,h:o});this.paintInlineImageXObjectGroup(s,l)}applyTransferMapsToCanvas(e){return"none"!==this.current.transferMaps&&(e.filter=this.current.transferMaps,e.drawImage(e.canvas,0,0),e.filter="none"),e.canvas}applyTransferMapsToBitmap(e){if("none"===this.current.transferMaps)return e.bitmap;const{bitmap:t,width:n,height:r}=e,i=this.cachedCanvases.getCanvas("inlineImage",n,r),s=i.context;return s.filter=this.current.transferMaps,s.drawImage(t,0,0),s.filter="none",i.canvas}paintInlineImageXObject(e){if(!this.contentVisible)return;const t=e.width,n=e.height,s=this.ctx;if(this.save(),!r.isNodeJS){const{filter:e}=s;"none"!==e&&""!==e&&(s.filter="none")}let a;if(s.scale(1/t,-1/n),e.bitmap)a=this.applyTransferMapsToBitmap(e);else if("function"===typeof HTMLElement&&e instanceof HTMLElement||!e.data)a=e;else{const r=this.cachedCanvases.getCanvas("inlineImage",t,n).context;h(r,e),a=this.applyTransferMapsToCanvas(r)}const o=this._scaleImage(a,(0,i.getCurrentTransformInverse)(s));s.imageSmoothingEnabled=b((0,i.getCurrentTransform)(s),e.interpolate),u(s,o.img,0,0,o.paintWidth,o.paintHeight,0,-n,t,n),this.compose(),this.restore()}paintInlineImageXObjectGroup(e,t){if(!this.contentVisible)return;const n=this.ctx;let r;if(e.bitmap)r=e.bitmap;else{const t=e.width,n=e.height,i=this.cachedCanvases.getCanvas("inlineImage",t,n).context;h(i,e),r=this.applyTransferMapsToCanvas(i)}for(const i of t)n.save(),n.transform(...i.transform),n.scale(1,-1),u(n,r,i.x,i.y,i.w,i.h,0,-1,1,1),n.restore();this.compose()}paintSolidColorImageMask(){this.contentVisible&&(this.ctx.fillRect(0,0,1,1),this.compose())}markPoint(e){}markPointProps(e,t){}beginMarkedContent(e){this.markedContentStack.push({visible:!0})}beginMarkedContentProps(e,t){"OC"===e?this.markedContentStack.push({visible:this.optionalContentConfig.isVisible(t)}):this.markedContentStack.push({visible:!0}),this.contentVisible=this.isContentVisible()}endMarkedContent(){this.markedContentStack.pop(),this.contentVisible=this.isContentVisible()}beginCompat(){}endCompat(){}consumePath(e){const t=this.current.isEmptyClip();this.pendingClip&&this.current.updateClipFromPath(),this.pendingClip||this.compose(e);const n=this.ctx;this.pendingClip&&(t||(this.pendingClip===C?n.clip("evenodd"):n.clip()),this.pendingClip=null),this.current.startNewPathAndClipBox(this.current.clipBox),n.beginPath()}getSinglePixelWidth(){if(!this._cachedGetSinglePixelWidth){const e=(0,i.getCurrentTransform)(this.ctx);if(0===e[1]&&0===e[2])this._cachedGetSinglePixelWidth=1/Math.min(Math.abs(e[0]),Math.abs(e[3]));else{const t=Math.abs(e[0]*e[3]-e[2]*e[1]),n=Math.hypot(e[0],e[2]),r=Math.hypot(e[1],e[3]);this._cachedGetSinglePixelWidth=Math.max(n,r)/t}}return this._cachedGetSinglePixelWidth}getScaleForStroking(){if(-1===this._cachedScaleForStroking[0]){const{lineWidth:e}=this.current,{a:t,b:n,c:r,d:i}=this.ctx.getTransform();let s,a;if(0===n&&0===r){const n=Math.abs(t),r=Math.abs(i);if(n===r)if(0===e)s=a=1/n;else{const t=n*e;s=a=t<1?1/t:1}else if(0===e)s=1/n,a=1/r;else{const t=n*e,i=r*e;s=t<1?1/t:1,a=i<1?1/i:1}}else{const o=Math.abs(t*i-n*r),l=Math.hypot(t,n),c=Math.hypot(r,i);if(0===e)s=c/o,a=l/o;else{const t=e*o;s=c>t?c/t:1,a=l>t?l/t:1}}this._cachedScaleForStroking[0]=s,this._cachedScaleForStroking[1]=a}return this._cachedScaleForStroking}rescaleAndStroke(e){const{ctx:t}=this,{lineWidth:n}=this.current,[r,i]=this.getScaleForStroking();if(t.lineWidth=n||1,1===r&&1===i)return void t.stroke();const s=t.getLineDash();if(e&&t.save(),t.scale(r,i),s.length>0){const e=Math.max(r,i);t.setLineDash(s.map((t=>t/e))),t.lineDashOffset/=e}t.stroke(),e&&t.restore()}isContentVisible(){for(let e=this.markedContentStack.length-1;e>=0;e--)if(!this.markedContentStack[e].visible)return!1;return!0}}function k(){for(;this.stateStack.length||this.inSMaskMode;)this.restore();this.ctx.restore(),this.transparentCanvas&&(this.ctx=this.compositeCtx,this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.drawImage(this.transparentCanvas,0,0),this.ctx.restore(),this.transparentCanvas=null)}function A(){if(this.pageColors){const e=this.filterFactory.addHCMFilter(this.pageColors.foreground,this.pageColors.background);if("none"!==e){const t=this.ctx.filter;this.ctx.filter=e,this.ctx.drawImage(this.ctx.canvas,0,0),this.ctx.filter=t}}}t.CanvasGraphics=x;for(const T in r.OPS)void 0!==x.prototype[T]&&(x.prototype[r.OPS[T]]=x.prototype[T])},(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.TilingPattern=t.PathType=void 0,t.getShadingPattern=function(e){switch(e[0]){case"RadialAxial":return new l(e);case"Mesh":return new d(e);case"Dummy":return new h}throw new Error("Unknown IR type: ".concat(e[0]))};var r=n(1),i=n(6);const s={FILL:"Fill",STROKE:"Stroke",SHADING:"Shading"};function a(e,t){if(!t)return;const n=t[2]-t[0],r=t[3]-t[1],i=new Path2D;i.rect(t[0],t[1],n,r),e.clip(i)}t.PathType=s;class o{constructor(){this.constructor===o&&(0,r.unreachable)("Cannot initialize BaseShadingPattern.")}getPattern(){(0,r.unreachable)("Abstract method `getPattern` called.")}}class l extends o{constructor(e){super(),this._type=e[1],this._bbox=e[2],this._colorStops=e[3],this._p0=e[4],this._p1=e[5],this._r0=e[6],this._r1=e[7],this.matrix=null}_createGradient(e){let t;"axial"===this._type?t=e.createLinearGradient(this._p0[0],this._p0[1],this._p1[0],this._p1[1]):"radial"===this._type&&(t=e.createRadialGradient(this._p0[0],this._p0[1],this._r0,this._p1[0],this._p1[1],this._r1));for(const n of this._colorStops)t.addColorStop(n[0],n[1]);return t}getPattern(e,t,n,o){let l;if(o===s.STROKE||o===s.FILL){const s=t.current.getClippedPathBoundingBox(o,(0,i.getCurrentTransform)(e))||[0,0,0,0],c=Math.ceil(s[2]-s[0])||1,u=Math.ceil(s[3]-s[1])||1,d=t.cachedCanvases.getCanvas("pattern",c,u,!0),h=d.context;h.clearRect(0,0,h.canvas.width,h.canvas.height),h.beginPath(),h.rect(0,0,h.canvas.width,h.canvas.height),h.translate(-s[0],-s[1]),n=r.Util.transform(n,[1,0,0,1,s[0],s[1]]),h.transform(...t.baseTransform),this.matrix&&h.transform(...this.matrix),a(h,this._bbox),h.fillStyle=this._createGradient(h),h.fill(),l=e.createPattern(d.canvas,"no-repeat");const p=new DOMMatrix(n);l.setTransform(p)}else a(e,this._bbox),l=this._createGradient(e);return l}}function c(e,t,n,r,i,s,a,o){const l=t.coords,c=t.colors,u=e.data,d=4*e.width;let h;l[n+1]>l[r+1]&&(h=n,n=r,r=h,h=s,s=a,a=h),l[r+1]>l[i+1]&&(h=r,r=i,i=h,h=a,a=o,o=h),l[n+1]>l[r+1]&&(h=n,n=r,r=h,h=s,s=a,a=h);const p=(l[n]+t.offsetX)*t.scaleX,f=(l[n+1]+t.offsetY)*t.scaleY,m=(l[r]+t.offsetX)*t.scaleX,g=(l[r+1]+t.offsetY)*t.scaleY,v=(l[i]+t.offsetX)*t.scaleX,_=(l[i+1]+t.offsetY)*t.scaleY;if(f>=_)return;const y=c[s],b=c[s+1],w=c[s+2],S=c[a],P=c[a+1],C=c[a+2],E=c[o],x=c[o+1],k=c[o+2],A=Math.round(f),T=Math.round(_);let F,I,R,M,N,D,O,L;for(let j=A;j<=T;j++){if(j<g){const e=j<f?0:(f-j)/(f-g);F=p-(p-m)*e,I=y-(y-S)*e,R=b-(b-P)*e,M=w-(w-C)*e}else{let e;e=j>_?1:g===_?0:(g-j)/(g-_),F=m-(m-v)*e,I=S-(S-E)*e,R=P-(P-x)*e,M=C-(C-k)*e}let e;e=j<f?0:j>_?1:(f-j)/(f-_),N=p-(p-v)*e,D=y-(y-E)*e,O=b-(b-x)*e,L=w-(w-k)*e;const t=Math.round(Math.min(F,N)),n=Math.round(Math.max(F,N));let r=d*j+4*t;for(let i=t;i<=n;i++)e=(F-i)/(F-N),e<0?e=0:e>1&&(e=1),u[r++]=I-(I-D)*e|0,u[r++]=R-(R-O)*e|0,u[r++]=M-(M-L)*e|0,u[r++]=255}}function u(e,t,n){const r=t.coords,i=t.colors;let s,a;switch(t.type){case"lattice":const o=t.verticesPerRow,l=Math.floor(r.length/o)-1,u=o-1;for(s=0;s<l;s++){let t=s*o;for(let s=0;s<u;s++,t++)c(e,n,r[t],r[t+1],r[t+o],i[t],i[t+1],i[t+o]),c(e,n,r[t+o+1],r[t+1],r[t+o],i[t+o+1],i[t+1],i[t+o])}break;case"triangles":for(s=0,a=r.length;s<a;s+=3)c(e,n,r[s],r[s+1],r[s+2],i[s],i[s+1],i[s+2]);break;default:throw new Error("illegal figure")}}class d extends o{constructor(e){super(),this._coords=e[2],this._colors=e[3],this._figures=e[4],this._bounds=e[5],this._bbox=e[7],this._background=e[8],this.matrix=null}_createMeshCanvas(e,t,n){const r=Math.floor(this._bounds[0]),i=Math.floor(this._bounds[1]),s=Math.ceil(this._bounds[2])-r,a=Math.ceil(this._bounds[3])-i,o=Math.min(Math.ceil(Math.abs(s*e[0]*1.1)),3e3),l=Math.min(Math.ceil(Math.abs(a*e[1]*1.1)),3e3),c=s/o,d=a/l,h={coords:this._coords,colors:this._colors,offsetX:-r,offsetY:-i,scaleX:1/c,scaleY:1/d},p=o+4,f=l+4,m=n.getCanvas("mesh",p,f,!1),g=m.context,v=g.createImageData(o,l);if(t){const e=v.data;for(let n=0,r=e.length;n<r;n+=4)e[n]=t[0],e[n+1]=t[1],e[n+2]=t[2],e[n+3]=255}for(const _ of this._figures)u(v,_,h);return g.putImageData(v,2,2),{canvas:m.canvas,offsetX:r-2*c,offsetY:i-2*d,scaleX:c,scaleY:d}}getPattern(e,t,n,o){let l;if(a(e,this._bbox),o===s.SHADING)l=r.Util.singularValueDecompose2dScale((0,i.getCurrentTransform)(e));else if(l=r.Util.singularValueDecompose2dScale(t.baseTransform),this.matrix){const e=r.Util.singularValueDecompose2dScale(this.matrix);l=[l[0]*e[0],l[1]*e[1]]}const c=this._createMeshCanvas(l,o===s.SHADING?null:this._background,t.cachedCanvases);return o!==s.SHADING&&(e.setTransform(...t.baseTransform),this.matrix&&e.transform(...this.matrix)),e.translate(c.offsetX,c.offsetY),e.scale(c.scaleX,c.scaleY),e.createPattern(c.canvas,"no-repeat")}}class h extends o{getPattern(){return"hotpink"}}const p=1,f=2;class m{constructor(e,t,n,r,i){this.operatorList=e[2],this.matrix=e[3]||[1,0,0,1,0,0],this.bbox=e[4],this.xstep=e[5],this.ystep=e[6],this.paintType=e[7],this.tilingType=e[8],this.color=t,this.ctx=n,this.canvasGraphicsFactory=r,this.baseTransform=i}createPatternCanvas(e){const t=this.operatorList,n=this.bbox,s=this.xstep,a=this.ystep,o=this.paintType,l=this.tilingType,c=this.color,u=this.canvasGraphicsFactory;(0,r.info)("TilingType: "+l);const d=n[0],h=n[1],p=n[2],f=n[3],m=r.Util.singularValueDecompose2dScale(this.matrix),g=r.Util.singularValueDecompose2dScale(this.baseTransform),v=[m[0]*g[0],m[1]*g[1]],_=this.getSizeAndScale(s,this.ctx.canvas.width,v[0]),y=this.getSizeAndScale(a,this.ctx.canvas.height,v[1]),b=e.cachedCanvases.getCanvas("pattern",_.size,y.size,!0),w=b.context,S=u.createCanvasGraphics(w);S.groupLevel=e.groupLevel,this.setFillAndStrokeStyleToContext(S,o,c);let P=d,C=h,E=p,x=f;return d<0&&(P=0,E+=Math.abs(d)),h<0&&(C=0,x+=Math.abs(h)),w.translate(-_.scale*P,-y.scale*C),S.transform(_.scale,0,0,y.scale,0,0),w.save(),this.clipBbox(S,P,C,E,x),S.baseTransform=(0,i.getCurrentTransform)(S.ctx),S.executeOperatorList(t),S.endDrawing(),{canvas:b.canvas,scaleX:_.scale,scaleY:y.scale,offsetX:P,offsetY:C}}getSizeAndScale(e,t,n){e=Math.abs(e);const r=Math.max(m.MAX_PATTERN_SIZE,t);let i=Math.ceil(e*n);return i>=r?i=r:n=i/e,{scale:n,size:i}}clipBbox(e,t,n,r,s){const a=r-t,o=s-n;e.ctx.rect(t,n,a,o),e.current.updateRectMinMax((0,i.getCurrentTransform)(e.ctx),[t,n,r,s]),e.clip(),e.endPath()}setFillAndStrokeStyleToContext(e,t,n){const i=e.ctx,s=e.current;switch(t){case p:const e=this.ctx;i.fillStyle=e.fillStyle,i.strokeStyle=e.strokeStyle,s.fillColor=e.fillStyle,s.strokeColor=e.strokeStyle;break;case f:const a=r.Util.makeHexColor(n[0],n[1],n[2]);i.fillStyle=a,i.strokeStyle=a,s.fillColor=a,s.strokeColor=a;break;default:throw new r.FormatError("Unsupported paint type: ".concat(t))}}getPattern(e,t,n,i){let a=n;i!==s.SHADING&&(a=r.Util.transform(a,t.baseTransform),this.matrix&&(a=r.Util.transform(a,this.matrix)));const o=this.createPatternCanvas(t);let l=new DOMMatrix(a);l=l.translate(o.offsetX,o.offsetY),l=l.scale(1/o.scaleX,1/o.scaleY);const c=e.createPattern(o.canvas,"repeat");return c.setTransform(l),c}}_defineProperty(m,"MAX_PATTERN_SIZE",3e3),t.TilingPattern=m},(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.convertBlackAndWhiteToRGBA=i,t.convertToRGBA=function(e){switch(e.kind){case r.ImageKind.GRAYSCALE_1BPP:return i(e);case r.ImageKind.RGB_24BPP:return function(e){let{src:t,srcPos:n=0,dest:i,destPos:s=0,width:a,height:o}=e,l=0;const c=t.length>>2,u=new Uint32Array(t.buffer,n,c);if(r.FeatureTest.isLittleEndian){for(;l<c-2;l+=3,s+=4){const e=u[l],t=u[l+1],n=u[l+2];i[s]=4278190080|e,i[s+1]=e>>>24|t<<8|4278190080,i[s+2]=t>>>16|n<<16|4278190080,i[s+3]=n>>>8|4278190080}for(let e=4*l,n=t.length;e<n;e+=3)i[s++]=t[e]|t[e+1]<<8|t[e+2]<<16|4278190080}else{for(;l<c-2;l+=3,s+=4){const e=u[l],t=u[l+1],n=u[l+2];i[s]=255|e,i[s+1]=e<<24|t>>>8|255,i[s+2]=t<<16|n>>>16|255,i[s+3]=n<<8|255}for(let e=4*l,n=t.length;e<n;e+=3)i[s++]=t[e]<<24|t[e+1]<<16|t[e+2]<<8|255}return{srcPos:n,destPos:s}}(e)}return null},t.grayToRGBA=function(e,t){if(r.FeatureTest.isLittleEndian)for(let n=0,r=e.length;n<r;n++)t[n]=65793*e[n]|4278190080;else for(let n=0,r=e.length;n<r;n++)t[n]=16843008*e[n]|255};var r=n(1);function i(e){let{src:t,srcPos:n=0,dest:i,width:s,height:a,nonBlackColor:o=4294967295,inverseDecode:l=!1}=e;const c=r.FeatureTest.isLittleEndian?4278190080:255,[u,d]=l?[o,c]:[c,o],h=s>>3,p=7&s,f=t.length;i=new Uint32Array(i.buffer);let m=0;for(let r=0;r<a;r++){for(const r=n+h;n<r;n++){const e=n<f?t[n]:255;i[m++]=128&e?d:u,i[m++]=64&e?d:u,i[m++]=32&e?d:u,i[m++]=16&e?d:u,i[m++]=8&e?d:u,i[m++]=4&e?d:u,i[m++]=2&e?d:u,i[m++]=1&e?d:u}if(0===p)continue;const e=n<f?t[n++]:255;for(let t=0;t<p;t++)i[m++]=e&1<<7-t?d:u}return{srcPos:n,destPos:m}}},(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.GlobalWorkerOptions=void 0;const n=Object.create(null);t.GlobalWorkerOptions=n,n.workerPort=null,n.workerSrc=""},(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.MessageHandler=void 0;var r=n(1);const i=1,s=2,a=1,o=2,l=3,c=4,u=5,d=6,h=7,p=8;function f(e){switch(e instanceof Error||"object"===typeof e&&null!==e||(0,r.unreachable)('wrapReason: Expected "reason" to be a (possibly cloned) Error.'),e.name){case"AbortException":return new r.AbortException(e.message);case"MissingPDFException":return new r.MissingPDFException(e.message);case"PasswordException":return new r.PasswordException(e.message,e.code);case"UnexpectedResponseException":return new r.UnexpectedResponseException(e.message,e.status);case"UnknownErrorException":return new r.UnknownErrorException(e.message,e.details);default:return new r.UnknownErrorException(e.message,e.toString())}}var m=new WeakSet;function g(e){const t=e.streamId,n=this.sourceName,i=e.sourceName,s=this.comObj,a=this,o=this.actionHandler[e.action],d={enqueue(e){let a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,o=arguments.length>2?arguments[2]:void 0;if(this.isCancelled)return;const l=this.desiredSize;this.desiredSize-=a,l>0&&this.desiredSize<=0&&(this.sinkCapability=new r.PromiseCapability,this.ready=this.sinkCapability.promise),s.postMessage({sourceName:n,targetName:i,stream:c,streamId:t,chunk:e},o)},close(){this.isCancelled||(this.isCancelled=!0,s.postMessage({sourceName:n,targetName:i,stream:l,streamId:t}),delete a.streamSinks[t])},error(e){(0,r.assert)(e instanceof Error,"error must have a valid reason"),this.isCancelled||(this.isCancelled=!0,s.postMessage({sourceName:n,targetName:i,stream:u,streamId:t,reason:f(e)}))},sinkCapability:new r.PromiseCapability,onPull:null,onCancel:null,isCancelled:!1,desiredSize:e.desiredSize,ready:null};d.sinkCapability.resolve(),d.ready=d.sinkCapability.promise,this.streamSinks[t]=d,new Promise((function(t){t(o(e.data,d))})).then((function(){s.postMessage({sourceName:n,targetName:i,stream:p,streamId:t,success:!0})}),(function(e){s.postMessage({sourceName:n,targetName:i,stream:p,streamId:t,reason:f(e)})}))}function v(e){const t=e.streamId,n=this.sourceName,i=e.sourceName,s=this.comObj,g=this.streamControllers[t],v=this.streamSinks[t];switch(e.stream){case p:e.success?g.startCall.resolve():g.startCall.reject(f(e.reason));break;case h:e.success?g.pullCall.resolve():g.pullCall.reject(f(e.reason));break;case d:if(!v){s.postMessage({sourceName:n,targetName:i,stream:h,streamId:t,success:!0});break}v.desiredSize<=0&&e.desiredSize>0&&v.sinkCapability.resolve(),v.desiredSize=e.desiredSize,new Promise((function(e){var t;e(null===(t=v.onPull)||void 0===t?void 0:t.call(v))})).then((function(){s.postMessage({sourceName:n,targetName:i,stream:h,streamId:t,success:!0})}),(function(e){s.postMessage({sourceName:n,targetName:i,stream:h,streamId:t,reason:f(e)})}));break;case c:if((0,r.assert)(g,"enqueue should have stream controller"),g.isClosed)break;g.controller.enqueue(e.chunk);break;case l:if((0,r.assert)(g,"close should have stream controller"),g.isClosed)break;g.isClosed=!0,g.controller.close(),_assertClassBrand(m,this,_).call(this,g,t);break;case u:(0,r.assert)(g,"error should have stream controller"),g.controller.error(f(e.reason)),_assertClassBrand(m,this,_).call(this,g,t);break;case o:e.success?g.cancelCall.resolve():g.cancelCall.reject(f(e.reason)),_assertClassBrand(m,this,_).call(this,g,t);break;case a:if(!v)break;new Promise((function(t){var n;t(null===(n=v.onCancel)||void 0===n?void 0:n.call(v,f(e.reason)))})).then((function(){s.postMessage({sourceName:n,targetName:i,stream:o,streamId:t,success:!0})}),(function(e){s.postMessage({sourceName:n,targetName:i,stream:o,streamId:t,reason:f(e)})})),v.sinkCapability.reject(f(e.reason)),v.isCancelled=!0,delete this.streamSinks[t];break;default:throw new Error("Unexpected stream case")}}async function _(e,t){var n,r,i;await Promise.allSettled([null===(n=e.startCall)||void 0===n?void 0:n.promise,null===(r=e.pullCall)||void 0===r?void 0:r.promise,null===(i=e.cancelCall)||void 0===i?void 0:i.promise]),delete this.streamControllers[t]}t.MessageHandler=class{constructor(e,t,n){_classPrivateMethodInitSpec(this,m),this.sourceName=e,this.targetName=t,this.comObj=n,this.callbackId=1,this.streamId=1,this.streamSinks=Object.create(null),this.streamControllers=Object.create(null),this.callbackCapabilities=Object.create(null),this.actionHandler=Object.create(null),this._onComObjOnMessage=e=>{const t=e.data;if(t.targetName!==this.sourceName)return;if(t.stream)return void _assertClassBrand(m,this,v).call(this,t);if(t.callback){const e=t.callbackId,n=this.callbackCapabilities[e];if(!n)throw new Error("Cannot resolve callback ".concat(e));if(delete this.callbackCapabilities[e],t.callback===i)n.resolve(t.data);else{if(t.callback!==s)throw new Error("Unexpected callback case");n.reject(f(t.reason))}return}const r=this.actionHandler[t.action];if(!r)throw new Error("Unknown action from worker: ".concat(t.action));if(t.callbackId){const e=this.sourceName,a=t.sourceName;new Promise((function(e){e(r(t.data))})).then((function(r){n.postMessage({sourceName:e,targetName:a,callback:i,callbackId:t.callbackId,data:r})}),(function(r){n.postMessage({sourceName:e,targetName:a,callback:s,callbackId:t.callbackId,reason:f(r)})}))}else t.streamId?_assertClassBrand(m,this,g).call(this,t):r(t.data)},n.addEventListener("message",this._onComObjOnMessage)}on(e,t){const n=this.actionHandler;if(n[e])throw new Error('There is already an actionName called "'.concat(e,'"'));n[e]=t}send(e,t,n){this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:e,data:t},n)}sendWithPromise(e,t,n){const i=this.callbackId++,s=new r.PromiseCapability;this.callbackCapabilities[i]=s;try{this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:e,callbackId:i,data:t},n)}catch(a){s.reject(a)}return s.promise}sendWithStream(e,t,n,i){const s=this.streamId++,o=this.sourceName,l=this.targetName,c=this.comObj;return new ReadableStream({start:n=>{const a=new r.PromiseCapability;return this.streamControllers[s]={controller:n,startCall:a,pullCall:null,cancelCall:null,isClosed:!1},c.postMessage({sourceName:o,targetName:l,action:e,streamId:s,data:t,desiredSize:n.desiredSize},i),a.promise},pull:e=>{const t=new r.PromiseCapability;return this.streamControllers[s].pullCall=t,c.postMessage({sourceName:o,targetName:l,stream:d,streamId:s,desiredSize:e.desiredSize}),t.promise},cancel:e=>{(0,r.assert)(e instanceof Error,"cancel must have a valid reason");const t=new r.PromiseCapability;return this.streamControllers[s].cancelCall=t,this.streamControllers[s].isClosed=!0,c.postMessage({sourceName:o,targetName:l,stream:a,streamId:s,reason:f(e)}),t.promise}},n)}destroy(){this.comObj.removeEventListener("message",this._onComObjOnMessage)}}},(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.Metadata=void 0;var r=n(1),i=new WeakMap,s=new WeakMap;t.Metadata=class{constructor(e){let{parsedData:t,rawData:n}=e;_classPrivateFieldInitSpec(this,i,void 0),_classPrivateFieldInitSpec(this,s,void 0),_classPrivateFieldSet(i,this,t),_classPrivateFieldSet(s,this,n)}getRaw(){return _classPrivateFieldGet(s,this)}get(e){var t;return null!==(t=_classPrivateFieldGet(i,this).get(e))&&void 0!==t?t:null}getAll(){return(0,r.objectFromMap)(_classPrivateFieldGet(i,this))}has(e){return _classPrivateFieldGet(i,this).has(e)}}},(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.OptionalContentConfig=void 0;var r=n(1),i=n(8);const s=Symbol("INTERNAL");var a=new WeakMap;class o{constructor(e,t){_classPrivateFieldInitSpec(this,a,!0),this.name=e,this.intent=t}get visible(){return _classPrivateFieldGet(a,this)}_setVisible(e,t){e!==s&&(0,r.unreachable)("Internal method `_setVisible` called."),_classPrivateFieldSet(a,this,t)}}var l=new WeakMap,c=new WeakMap,u=new WeakMap,d=new WeakMap,h=new WeakSet;function p(e){const t=e.length;if(t<2)return!0;const n=e[0];for(let i=1;i<t;i++){const t=e[i];let s;if(Array.isArray(t))s=_assertClassBrand(h,this,p).call(this,t);else{if(!_classPrivateFieldGet(c,this).has(t))return(0,r.warn)("Optional content group not found: ".concat(t)),!0;s=_classPrivateFieldGet(c,this).get(t).visible}switch(n){case"And":if(!s)return!1;break;case"Or":if(s)return!0;break;case"Not":return!s;default:return!0}}return"And"===n}t.OptionalContentConfig=class{constructor(e){if(_classPrivateMethodInitSpec(this,h),_classPrivateFieldInitSpec(this,l,null),_classPrivateFieldInitSpec(this,c,new Map),_classPrivateFieldInitSpec(this,u,null),_classPrivateFieldInitSpec(this,d,null),this.name=null,this.creator=null,null!==e){this.name=e.name,this.creator=e.creator,_classPrivateFieldSet(d,this,e.order);for(const t of e.groups)_classPrivateFieldGet(c,this).set(t.id,new o(t.name,t.intent));if("OFF"===e.baseState)for(const e of _classPrivateFieldGet(c,this).values())e._setVisible(s,!1);for(const t of e.on)_classPrivateFieldGet(c,this).get(t)._setVisible(s,!0);for(const t of e.off)_classPrivateFieldGet(c,this).get(t)._setVisible(s,!1);_classPrivateFieldSet(u,this,this.getHash())}}isVisible(e){if(0===_classPrivateFieldGet(c,this).size)return!0;if(!e)return(0,r.warn)("Optional content group not defined."),!0;if("OCG"===e.type)return _classPrivateFieldGet(c,this).has(e.id)?_classPrivateFieldGet(c,this).get(e.id).visible:((0,r.warn)("Optional content group not found: ".concat(e.id)),!0);if("OCMD"===e.type){if(e.expression)return _assertClassBrand(h,this,p).call(this,e.expression);if(!e.policy||"AnyOn"===e.policy){for(const t of e.ids){if(!_classPrivateFieldGet(c,this).has(t))return(0,r.warn)("Optional content group not found: ".concat(t)),!0;if(_classPrivateFieldGet(c,this).get(t).visible)return!0}return!1}if("AllOn"===e.policy){for(const t of e.ids){if(!_classPrivateFieldGet(c,this).has(t))return(0,r.warn)("Optional content group not found: ".concat(t)),!0;if(!_classPrivateFieldGet(c,this).get(t).visible)return!1}return!0}if("AnyOff"===e.policy){for(const t of e.ids){if(!_classPrivateFieldGet(c,this).has(t))return(0,r.warn)("Optional content group not found: ".concat(t)),!0;if(!_classPrivateFieldGet(c,this).get(t).visible)return!0}return!1}if("AllOff"===e.policy){for(const t of e.ids){if(!_classPrivateFieldGet(c,this).has(t))return(0,r.warn)("Optional content group not found: ".concat(t)),!0;if(_classPrivateFieldGet(c,this).get(t).visible)return!1}return!0}return(0,r.warn)("Unknown optional content policy ".concat(e.policy,".")),!0}return(0,r.warn)("Unknown group type ".concat(e.type,".")),!0}setVisibility(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];_classPrivateFieldGet(c,this).has(e)?(_classPrivateFieldGet(c,this).get(e)._setVisible(s,!!t),_classPrivateFieldSet(l,this,null)):(0,r.warn)("Optional content group not found: ".concat(e))}get hasInitialVisibility(){return null===_classPrivateFieldGet(u,this)||this.getHash()===_classPrivateFieldGet(u,this)}getOrder(){return _classPrivateFieldGet(c,this).size?_classPrivateFieldGet(d,this)?_classPrivateFieldGet(d,this).slice():[..._classPrivateFieldGet(c,this).keys()]:null}getGroups(){return _classPrivateFieldGet(c,this).size>0?(0,r.objectFromMap)(_classPrivateFieldGet(c,this)):null}getGroup(e){return _classPrivateFieldGet(c,this).get(e)||null}getHash(){if(null!==_classPrivateFieldGet(l,this))return _classPrivateFieldGet(l,this);const e=new i.MurmurHash3_64;for(const[t,n]of _classPrivateFieldGet(c,this))e.update("".concat(t,":").concat(n.visible));return _classPrivateFieldSet(l,this,e.hexdigest())}}},(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.PDFDataTransportStream=void 0;var r=n(1),i=n(6);t.PDFDataTransportStream=class{constructor(e,t){let{length:n,initialData:i,progressiveDone:s=!1,contentDispositionFilename:a=null,disableRange:o=!1,disableStream:l=!1}=e;if((0,r.assert)(t,'PDFDataTransportStream - missing required "pdfDataRangeTransport" argument.'),this._queuedChunks=[],this._progressiveDone=s,this._contentDispositionFilename=a,(null===i||void 0===i?void 0:i.length)>0){const e=i instanceof Uint8Array&&i.byteLength===i.buffer.byteLength?i.buffer:new Uint8Array(i).buffer;this._queuedChunks.push(e)}this._pdfDataRangeTransport=t,this._isStreamingSupported=!l,this._isRangeSupported=!o,this._contentLength=n,this._fullRequestReader=null,this._rangeReaders=[],this._pdfDataRangeTransport.addRangeListener(((e,t)=>{this._onReceiveData({begin:e,chunk:t})})),this._pdfDataRangeTransport.addProgressListener(((e,t)=>{this._onProgress({loaded:e,total:t})})),this._pdfDataRangeTransport.addProgressiveReadListener((e=>{this._onReceiveData({chunk:e})})),this._pdfDataRangeTransport.addProgressiveDoneListener((()=>{this._onProgressiveDone()})),this._pdfDataRangeTransport.transportReady()}_onReceiveData(e){let{begin:t,chunk:n}=e;const i=n instanceof Uint8Array&&n.byteLength===n.buffer.byteLength?n.buffer:new Uint8Array(n).buffer;if(void 0===t)this._fullRequestReader?this._fullRequestReader._enqueue(i):this._queuedChunks.push(i);else{const e=this._rangeReaders.some((function(e){return e._begin===t&&(e._enqueue(i),!0)}));(0,r.assert)(e,"_onReceiveData - no `PDFDataTransportStreamRangeReader` instance found.")}}get _progressiveDataLength(){var e,t;return null!==(e=null===(t=this._fullRequestReader)||void 0===t?void 0:t._loaded)&&void 0!==e?e:0}_onProgress(e){var t,n,r,i;void 0===e.total?null===(t=this._rangeReaders[0])||void 0===t||null===(n=t.onProgress)||void 0===n||n.call(t,{loaded:e.loaded}):null===(r=this._fullRequestReader)||void 0===r||null===(i=r.onProgress)||void 0===i||i.call(r,{loaded:e.loaded,total:e.total})}_onProgressiveDone(){var e;null===(e=this._fullRequestReader)||void 0===e||e.progressiveDone(),this._progressiveDone=!0}_removeRangeReader(e){const t=this._rangeReaders.indexOf(e);t>=0&&this._rangeReaders.splice(t,1)}getFullReader(){(0,r.assert)(!this._fullRequestReader,"PDFDataTransportStream.getFullReader can only be called once.");const e=this._queuedChunks;return this._queuedChunks=null,new s(this,e,this._progressiveDone,this._contentDispositionFilename)}getRangeReader(e,t){if(t<=this._progressiveDataLength)return null;const n=new a(this,e,t);return this._pdfDataRangeTransport.requestDataRange(e,t),this._rangeReaders.push(n),n}cancelAllRequests(e){var t;null===(t=this._fullRequestReader)||void 0===t||t.cancel(e);for(const n of this._rangeReaders.slice(0))n.cancel(e);this._pdfDataRangeTransport.abort()}};class s{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;this._stream=e,this._done=n||!1,this._filename=(0,i.isPdfFile)(r)?r:null,this._queuedChunks=t||[],this._loaded=0;for(const i of this._queuedChunks)this._loaded+=i.byteLength;this._requests=[],this._headersReady=Promise.resolve(),e._fullRequestReader=this,this.onProgress=null}_enqueue(e){this._done||(this._requests.length>0?this._requests.shift().resolve({value:e,done:!1}):this._queuedChunks.push(e),this._loaded+=e.byteLength)}get headersReady(){return this._headersReady}get filename(){return this._filename}get isRangeSupported(){return this._stream._isRangeSupported}get isStreamingSupported(){return this._stream._isStreamingSupported}get contentLength(){return this._stream._contentLength}async read(){if(this._queuedChunks.length>0)return{value:this._queuedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const e=new r.PromiseCapability;return this._requests.push(e),e.promise}cancel(e){this._done=!0;for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0}progressiveDone(){this._done||(this._done=!0)}}class a{constructor(e,t,n){this._stream=e,this._begin=t,this._end=n,this._queuedChunk=null,this._requests=[],this._done=!1,this.onProgress=null}_enqueue(e){if(!this._done){if(0===this._requests.length)this._queuedChunk=e;else{this._requests.shift().resolve({value:e,done:!1});for(const e of this._requests)e.resolve({value:void 0,done:!0});this._requests.length=0}this._done=!0,this._stream._removeRangeReader(this)}}get isStreamingSupported(){return!1}async read(){if(this._queuedChunk){const e=this._queuedChunk;return this._queuedChunk=null,{value:e,done:!1}}if(this._done)return{value:void 0,done:!0};const e=new r.PromiseCapability;return this._requests.push(e),e.promise}cancel(e){this._done=!0;for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0,this._stream._removeRangeReader(this)}}},(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.PDFFetchStream=void 0;var r=n(1),i=n(20);function s(e,t,n){return{method:"GET",headers:e,signal:n.signal,mode:"cors",credentials:t?"include":"same-origin",redirect:"follow"}}function a(e){const t=new Headers;for(const n in e){const r=e[n];void 0!==r&&t.append(n,r)}return t}function o(e){return e instanceof Uint8Array?e.buffer:e instanceof ArrayBuffer?e:((0,r.warn)("getArrayBuffer - unexpected data format: ".concat(e)),new Uint8Array(e).buffer)}t.PDFFetchStream=class{constructor(e){this.source=e,this.isHttp=/^https?:/i.test(e.url),this.httpHeaders=this.isHttp&&e.httpHeaders||{},this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){var e,t;return null!==(e=null===(t=this._fullRequestReader)||void 0===t?void 0:t._loaded)&&void 0!==e?e:0}getFullReader(){return(0,r.assert)(!this._fullRequestReader,"PDFFetchStream.getFullReader can only be called once."),this._fullRequestReader=new l(this),this._fullRequestReader}getRangeReader(e,t){if(t<=this._progressiveDataLength)return null;const n=new c(this,e,t);return this._rangeRequestReaders.push(n),n}cancelAllRequests(e){var t;null===(t=this._fullRequestReader)||void 0===t||t.cancel(e);for(const n of this._rangeRequestReaders.slice(0))n.cancel(e)}};class l{constructor(e){this._stream=e,this._reader=null,this._loaded=0,this._filename=null;const t=e.source;this._withCredentials=t.withCredentials||!1,this._contentLength=t.length,this._headersCapability=new r.PromiseCapability,this._disableRange=t.disableRange||!1,this._rangeChunkSize=t.rangeChunkSize,this._rangeChunkSize||this._disableRange||(this._disableRange=!0),this._abortController=new AbortController,this._isStreamingSupported=!t.disableStream,this._isRangeSupported=!t.disableRange,this._headers=a(this._stream.httpHeaders);const n=t.url;fetch(n,s(this._headers,this._withCredentials,this._abortController)).then((e=>{if(!(0,i.validateResponseStatus)(e.status))throw(0,i.createResponseStatusError)(e.status,n);this._reader=e.body.getReader(),this._headersCapability.resolve();const t=t=>e.headers.get(t),{allowRangeRequests:s,suggestedLength:a}=(0,i.validateRangeRequestCapabilities)({getResponseHeader:t,isHttp:this._stream.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=s,this._contentLength=a||this._contentLength,this._filename=(0,i.extractFilenameFromHeader)(t),!this._isStreamingSupported&&this._isRangeSupported&&this.cancel(new r.AbortException("Streaming is disabled."))})).catch(this._headersCapability.reject),this.onProgress=null}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){var e;await this._headersCapability.promise;const{value:t,done:n}=await this._reader.read();return n?{value:t,done:n}:(this._loaded+=t.byteLength,null===(e=this.onProgress)||void 0===e||e.call(this,{loaded:this._loaded,total:this._contentLength}),{value:o(t),done:!1})}cancel(e){var t;null===(t=this._reader)||void 0===t||t.cancel(e),this._abortController.abort()}}class c{constructor(e,t,n){this._stream=e,this._reader=null,this._loaded=0;const o=e.source;this._withCredentials=o.withCredentials||!1,this._readCapability=new r.PromiseCapability,this._isStreamingSupported=!o.disableStream,this._abortController=new AbortController,this._headers=a(this._stream.httpHeaders),this._headers.append("Range","bytes=".concat(t,"-").concat(n-1));const l=o.url;fetch(l,s(this._headers,this._withCredentials,this._abortController)).then((e=>{if(!(0,i.validateResponseStatus)(e.status))throw(0,i.createResponseStatusError)(e.status,l);this._readCapability.resolve(),this._reader=e.body.getReader()})).catch(this._readCapability.reject),this.onProgress=null}get isStreamingSupported(){return this._isStreamingSupported}async read(){var e;await this._readCapability.promise;const{value:t,done:n}=await this._reader.read();return n?{value:t,done:n}:(this._loaded+=t.byteLength,null===(e=this.onProgress)||void 0===e||e.call(this,{loaded:this._loaded}),{value:o(t),done:!1})}cancel(e){var t;null===(t=this._reader)||void 0===t||t.cancel(e),this._abortController.abort()}}},(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.createResponseStatusError=function(e,t){return 404===e||0===e&&t.startsWith("file:")?new r.MissingPDFException('Missing PDF "'+t+'".'):new r.UnexpectedResponseException("Unexpected server response (".concat(e,') while retrieving PDF "').concat(t,'".'),e)},t.extractFilenameFromHeader=function(e){const t=e("Content-Disposition");if(t){let e=(0,i.getFilenameFromContentDispositionHeader)(t);if(e.includes("%"))try{e=decodeURIComponent(e)}catch{}if((0,s.isPdfFile)(e))return e}return null},t.validateRangeRequestCapabilities=function(e){let{getResponseHeader:t,isHttp:n,rangeChunkSize:r,disableRange:i}=e;const s={allowRangeRequests:!1,suggestedLength:void 0},a=parseInt(t("Content-Length"),10);return Number.isInteger(a)?(s.suggestedLength=a,a<=2*r||i||!n||"bytes"!==t("Accept-Ranges")||"identity"!==(t("Content-Encoding")||"identity")||(s.allowRangeRequests=!0),s):s},t.validateResponseStatus=function(e){return 200===e||206===e};var r=n(1),i=n(21),s=n(6)},(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getFilenameFromContentDispositionHeader=function(e){let t=!0,n=i("filename\\*","i").exec(e);if(n){n=n[1];let e=o(n);return e=unescape(e),e=l(e),e=c(e),a(e)}if(n=function(e){const t=[];let n;const r=i("filename\\*((?!0\\d)\\d+)(\\*?)","ig");for(;null!==(n=r.exec(e));){let[,e,r,i]=n;if(e=parseInt(e,10),e in t){if(0===e)break}else t[e]=[r,i]}const s=[];for(let i=0;i<t.length&&i in t;++i){let[e,n]=t[i];n=o(n),e&&(n=unescape(n),0===i&&(n=l(n))),s.push(n)}return s.join("")}(e),n)return a(c(n));if(n=i("filename","i").exec(e),n){n=n[1];let e=o(n);return e=c(e),a(e)}function i(e,t){return new RegExp("(?:^|;)\\s*"+e+'\\s*=\\s*([^";\\s][^;\\s]*|"(?:[^"\\\\]|\\\\"?)+"?)',t)}function s(e,n){if(e){if(!/^[\x00-\xFF]+$/.test(n))return n;try{const i=new TextDecoder(e,{fatal:!0}),s=(0,r.stringToBytes)(n);n=i.decode(s),t=!1}catch{}}return n}function a(e){return t&&/[\x80-\xff]/.test(e)&&(e=s("utf-8",e),t&&(e=s("iso-8859-1",e))),e}function o(e){if(e.startsWith('"')){const t=e.slice(1).split('\\"');for(let e=0;e<t.length;++e){const n=t[e].indexOf('"');-1!==n&&(t[e]=t[e].slice(0,n),t.length=e+1),t[e]=t[e].replaceAll(/\\(.)/g,"$1")}e=t.join('"')}return e}function l(e){const t=e.indexOf("'");return-1===t?e:s(e.slice(0,t),e.slice(t+1).replace(/^[^']*'/,""))}function c(e){return!e.startsWith("=?")||/[\x00-\x19\x80-\xff]/.test(e)?e:e.replaceAll(/=\?([\w-]*)\?([QqBb])\?((?:[^?]|\?(?!=))*)\?=/g,(function(e,t,n,r){if("q"===n||"Q"===n)return s(t,r=(r=r.replaceAll("_"," ")).replaceAll(/=([0-9a-fA-F]{2})/g,(function(e,t){return String.fromCharCode(parseInt(t,16))})));try{r=atob(r)}catch{}return s(t,r)}))}return""};var r=n(1)},(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.PDFNetworkStream=void 0;var r=n(1),i=n(20);class s{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.url=e,this.isHttp=/^https?:/i.test(e),this.httpHeaders=this.isHttp&&t.httpHeaders||Object.create(null),this.withCredentials=t.withCredentials||!1,this.currXhrId=0,this.pendingRequests=Object.create(null)}requestRange(e,t,n){const r={begin:e,end:t};for(const i in n)r[i]=n[i];return this.request(r)}requestFull(e){return this.request(e)}request(e){const t=new XMLHttpRequest,n=this.currXhrId++,r=this.pendingRequests[n]={xhr:t};t.open("GET",this.url),t.withCredentials=this.withCredentials;for(const i in this.httpHeaders){const e=this.httpHeaders[i];void 0!==e&&t.setRequestHeader(i,e)}return this.isHttp&&"begin"in e&&"end"in e?(t.setRequestHeader("Range","bytes=".concat(e.begin,"-").concat(e.end-1)),r.expectedStatus=206):r.expectedStatus=200,t.responseType="arraybuffer",e.onError&&(t.onerror=function(n){e.onError(t.status)}),t.onreadystatechange=this.onStateChange.bind(this,n),t.onprogress=this.onProgress.bind(this,n),r.onHeadersReceived=e.onHeadersReceived,r.onDone=e.onDone,r.onError=e.onError,r.onProgress=e.onProgress,t.send(null),n}onProgress(e,t){var n;const r=this.pendingRequests[e];r&&(null===(n=r.onProgress)||void 0===n||n.call(r,t))}onStateChange(e,t){const n=this.pendingRequests[e];if(!n)return;const i=n.xhr;if(i.readyState>=2&&n.onHeadersReceived&&(n.onHeadersReceived(),delete n.onHeadersReceived),4!==i.readyState)return;if(!(e in this.pendingRequests))return;var s;if(delete this.pendingRequests[e],0===i.status&&this.isHttp)return void(null===(s=n.onError)||void 0===s||s.call(n,i.status));const a=i.status||200;var o;if((200!==a||206!==n.expectedStatus)&&a!==n.expectedStatus)return void(null===(o=n.onError)||void 0===o||o.call(n,i.status));const l=function(e){const t=e.response;return"string"!==typeof t?t:(0,r.stringToBytes)(t).buffer}(i);if(206===a){const e=i.getResponseHeader("Content-Range"),t=/bytes (\d+)-(\d+)\/(\d+)/.exec(e);n.onDone({begin:parseInt(t[1],10),chunk:l})}else if(l)n.onDone({begin:0,chunk:l});else{var c;null===(c=n.onError)||void 0===c||c.call(n,i.status)}}getRequestXhr(e){return this.pendingRequests[e].xhr}isPendingRequest(e){return e in this.pendingRequests}abortRequest(e){const t=this.pendingRequests[e].xhr;delete this.pendingRequests[e],t.abort()}}t.PDFNetworkStream=class{constructor(e){this._source=e,this._manager=new s(e.url,{httpHeaders:e.httpHeaders,withCredentials:e.withCredentials}),this._rangeChunkSize=e.rangeChunkSize,this._fullRequestReader=null,this._rangeRequestReaders=[]}_onRangeRequestReaderClosed(e){const t=this._rangeRequestReaders.indexOf(e);t>=0&&this._rangeRequestReaders.splice(t,1)}getFullReader(){return(0,r.assert)(!this._fullRequestReader,"PDFNetworkStream.getFullReader can only be called once."),this._fullRequestReader=new a(this._manager,this._source),this._fullRequestReader}getRangeReader(e,t){const n=new o(this._manager,e,t);return n.onClosed=this._onRangeRequestReaderClosed.bind(this),this._rangeRequestReaders.push(n),n}cancelAllRequests(e){var t;null===(t=this._fullRequestReader)||void 0===t||t.cancel(e);for(const n of this._rangeRequestReaders.slice(0))n.cancel(e)}};class a{constructor(e,t){this._manager=e;const n={onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)};this._url=t.url,this._fullRequestId=e.requestFull(n),this._headersReceivedCapability=new r.PromiseCapability,this._disableRange=t.disableRange||!1,this._contentLength=t.length,this._rangeChunkSize=t.rangeChunkSize,this._rangeChunkSize||this._disableRange||(this._disableRange=!0),this._isStreamingSupported=!1,this._isRangeSupported=!1,this._cachedChunks=[],this._requests=[],this._done=!1,this._storedError=void 0,this._filename=null,this.onProgress=null}_onHeadersReceived(){const e=this._fullRequestId,t=this._manager.getRequestXhr(e),n=e=>t.getResponseHeader(e),{allowRangeRequests:r,suggestedLength:s}=(0,i.validateRangeRequestCapabilities)({getResponseHeader:n,isHttp:this._manager.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});r&&(this._isRangeSupported=!0),this._contentLength=s||this._contentLength,this._filename=(0,i.extractFilenameFromHeader)(n),this._isRangeSupported&&this._manager.abortRequest(e),this._headersReceivedCapability.resolve()}_onDone(e){if(e&&(this._requests.length>0?this._requests.shift().resolve({value:e.chunk,done:!1}):this._cachedChunks.push(e.chunk)),this._done=!0,!(this._cachedChunks.length>0)){for(const e of this._requests)e.resolve({value:void 0,done:!0});this._requests.length=0}}_onError(e){this._storedError=(0,i.createResponseStatusError)(e,this._url),this._headersReceivedCapability.reject(this._storedError);for(const t of this._requests)t.reject(this._storedError);this._requests.length=0,this._cachedChunks.length=0}_onProgress(e){var t;null===(t=this.onProgress)||void 0===t||t.call(this,{loaded:e.loaded,total:e.lengthComputable?e.total:this._contentLength})}get filename(){return this._filename}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}get contentLength(){return this._contentLength}get headersReady(){return this._headersReceivedCapability.promise}async read(){if(this._storedError)throw this._storedError;if(this._cachedChunks.length>0)return{value:this._cachedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const e=new r.PromiseCapability;return this._requests.push(e),e.promise}cancel(e){this._done=!0,this._headersReceivedCapability.reject(e);for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._fullRequestId)&&this._manager.abortRequest(this._fullRequestId),this._fullRequestReader=null}}class o{constructor(e,t,n){this._manager=e;const r={onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)};this._url=e.url,this._requestId=e.requestRange(t,n,r),this._requests=[],this._queuedChunk=null,this._done=!1,this._storedError=void 0,this.onProgress=null,this.onClosed=null}_close(){var e;null===(e=this.onClosed)||void 0===e||e.call(this,this)}_onDone(e){const t=e.chunk;this._requests.length>0?this._requests.shift().resolve({value:t,done:!1}):this._queuedChunk=t,this._done=!0;for(const n of this._requests)n.resolve({value:void 0,done:!0});this._requests.length=0,this._close()}_onError(e){this._storedError=(0,i.createResponseStatusError)(e,this._url);for(const t of this._requests)t.reject(this._storedError);this._requests.length=0,this._queuedChunk=null}_onProgress(e){var t;this.isStreamingSupported||null===(t=this.onProgress)||void 0===t||t.call(this,{loaded:e.loaded})}get isStreamingSupported(){return!1}async read(){if(this._storedError)throw this._storedError;if(null!==this._queuedChunk){const e=this._queuedChunk;return this._queuedChunk=null,{value:e,done:!1}}if(this._done)return{value:void 0,done:!0};const e=new r.PromiseCapability;return this._requests.push(e),e.promise}cancel(e){this._done=!0;for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._requestId)&&this._manager.abortRequest(this._requestId),this._close()}}},(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.PDFNodeStream=void 0;var r=n(1),i=n(20);const s=/^file:\/\/\/[a-zA-Z]:\//;t.PDFNodeStream=class{constructor(e){this.source=e,this.url=function(e){const t=__webpack_require__(671),n=t.parse(e);return"file:"===n.protocol||n.host?n:/^[a-z]:[/\\]/i.test(e)?t.parse("file:///".concat(e)):(n.host||(n.protocol="file:"),n)}(e.url),this.isHttp="http:"===this.url.protocol||"https:"===this.url.protocol,this.isFsUrl="file:"===this.url.protocol,this.httpHeaders=this.isHttp&&e.httpHeaders||{},this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){var e,t;return null!==(e=null===(t=this._fullRequestReader)||void 0===t?void 0:t._loaded)&&void 0!==e?e:0}getFullReader(){return(0,r.assert)(!this._fullRequestReader,"PDFNodeStream.getFullReader can only be called once."),this._fullRequestReader=this.isFsUrl?new d(this):new c(this),this._fullRequestReader}getRangeReader(e,t){if(t<=this._progressiveDataLength)return null;const n=this.isFsUrl?new h(this,e,t):new u(this,e,t);return this._rangeRequestReaders.push(n),n}cancelAllRequests(e){var t;null===(t=this._fullRequestReader)||void 0===t||t.cancel(e);for(const n of this._rangeRequestReaders.slice(0))n.cancel(e)}};class a{constructor(e){this._url=e.url,this._done=!1,this._storedError=null,this.onProgress=null;const t=e.source;this._contentLength=t.length,this._loaded=0,this._filename=null,this._disableRange=t.disableRange||!1,this._rangeChunkSize=t.rangeChunkSize,this._rangeChunkSize||this._disableRange||(this._disableRange=!0),this._isStreamingSupported=!t.disableStream,this._isRangeSupported=!t.disableRange,this._readableStream=null,this._readCapability=new r.PromiseCapability,this._headersCapability=new r.PromiseCapability}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){var e;if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const t=this._readableStream.read();return null===t?(this._readCapability=new r.PromiseCapability,this.read()):(this._loaded+=t.length,null===(e=this.onProgress)||void 0===e||e.call(this,{loaded:this._loaded,total:this._contentLength}),{value:new Uint8Array(t).buffer,done:!1})}cancel(e){this._readableStream?this._readableStream.destroy(e):this._error(e)}_error(e){this._storedError=e,this._readCapability.resolve()}_setReadableStream(e){this._readableStream=e,e.on("readable",(()=>{this._readCapability.resolve()})),e.on("end",(()=>{e.destroy(),this._done=!0,this._readCapability.resolve()})),e.on("error",(e=>{this._error(e)})),!this._isStreamingSupported&&this._isRangeSupported&&this._error(new r.AbortException("streaming is disabled")),this._storedError&&this._readableStream.destroy(this._storedError)}}class o{constructor(e){this._url=e.url,this._done=!1,this._storedError=null,this.onProgress=null,this._loaded=0,this._readableStream=null,this._readCapability=new r.PromiseCapability;const t=e.source;this._isStreamingSupported=!t.disableStream}get isStreamingSupported(){return this._isStreamingSupported}async read(){var e;if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const t=this._readableStream.read();return null===t?(this._readCapability=new r.PromiseCapability,this.read()):(this._loaded+=t.length,null===(e=this.onProgress)||void 0===e||e.call(this,{loaded:this._loaded}),{value:new Uint8Array(t).buffer,done:!1})}cancel(e){this._readableStream?this._readableStream.destroy(e):this._error(e)}_error(e){this._storedError=e,this._readCapability.resolve()}_setReadableStream(e){this._readableStream=e,e.on("readable",(()=>{this._readCapability.resolve()})),e.on("end",(()=>{e.destroy(),this._done=!0,this._readCapability.resolve()})),e.on("error",(e=>{this._error(e)})),this._storedError&&this._readableStream.destroy(this._storedError)}}function l(e,t){return{protocol:e.protocol,auth:e.auth,host:e.hostname,port:e.port,path:e.path,method:"GET",headers:t}}class c extends a{constructor(e){super(e);const t=t=>{if(404===t.statusCode){const e=new r.MissingPDFException('Missing PDF "'.concat(this._url,'".'));return this._storedError=e,void this._headersCapability.reject(e)}this._headersCapability.resolve(),this._setReadableStream(t);const n=e=>this._readableStream.headers[e.toLowerCase()],{allowRangeRequests:s,suggestedLength:a}=(0,i.validateRangeRequestCapabilities)({getResponseHeader:n,isHttp:e.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=s,this._contentLength=a||this._contentLength,this._filename=(0,i.extractFilenameFromHeader)(n)};if(this._request=null,"http:"===this._url.protocol){const n=__webpack_require__(492);this._request=n.request(l(this._url,e.httpHeaders),t)}else{const n=__webpack_require__(815);this._request=n.request(l(this._url,e.httpHeaders),t)}this._request.on("error",(e=>{this._storedError=e,this._headersCapability.reject(e)})),this._request.end()}}class u extends o{constructor(e,t,n){super(e),this._httpHeaders={};for(const r in e.httpHeaders){const t=e.httpHeaders[r];void 0!==t&&(this._httpHeaders[r]=t)}this._httpHeaders.Range="bytes=".concat(t,"-").concat(n-1);const i=e=>{if(404!==e.statusCode)this._setReadableStream(e);else{const e=new r.MissingPDFException('Missing PDF "'.concat(this._url,'".'));this._storedError=e}};if(this._request=null,"http:"===this._url.protocol){const e=__webpack_require__(492);this._request=e.request(l(this._url,this._httpHeaders),i)}else{const e=__webpack_require__(815);this._request=e.request(l(this._url,this._httpHeaders),i)}this._request.on("error",(e=>{this._storedError=e})),this._request.end()}}class d extends a{constructor(e){super(e);let t=decodeURIComponent(this._url.path);s.test(this._url.href)&&(t=t.replace(/^\//,""));const n=__webpack_require__(237);n.lstat(t,((e,i)=>{if(e)return"ENOENT"===e.code&&(e=new r.MissingPDFException('Missing PDF "'.concat(t,'".'))),this._storedError=e,void this._headersCapability.reject(e);this._contentLength=i.size,this._setReadableStream(n.createReadStream(t)),this._headersCapability.resolve()}))}}class h extends o{constructor(e,t,n){super(e);let r=decodeURIComponent(this._url.path);s.test(this._url.href)&&(r=r.replace(/^\//,""));const i=__webpack_require__(237);this._setReadableStream(i.createReadStream(r,{start:t,end:n-1}))}}},(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.SVGGraphics=void 0;var r=n(6),i=n(1);const s="normal",a="normal",o="#000000",l=["butt","round","square"],c=["miter","round","bevel"],u=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(URL.createObjectURL&&"undefined"!==typeof Blob&&!n)return URL.createObjectURL(new Blob([e],{type:t}));const r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";let i="data:".concat(t,";base64,");for(let s=0,a=e.length;s<a;s+=3){const t=255&e[s],n=255&e[s+1],o=255&e[s+2];i+=r[t>>2]+r[(3&t)<<4|n>>4]+r[s+1<a?(15&n)<<2|o>>6:64]+r[s+2<a?63&o:64]}return i},d=function(){const e=new Uint8Array([137,80,78,71,13,10,26,10]),t=new Int32Array(256);for(let i=0;i<256;i++){let e=i;for(let t=0;t<8;t++)e=1&e?3988292384^e>>1&2147483647:e>>1&2147483647;t[i]=e}function n(e,n,r,i){let s=i;const a=n.length;r[s]=a>>24&255,r[s+1]=a>>16&255,r[s+2]=a>>8&255,r[s+3]=255&a,s+=4,r[s]=255&e.charCodeAt(0),r[s+1]=255&e.charCodeAt(1),r[s+2]=255&e.charCodeAt(2),r[s+3]=255&e.charCodeAt(3),s+=4,r.set(n,s),s+=n.length;const o=function(e,n,r){let i=-1;for(let s=n;s<r;s++){const n=255&(i^e[s]);i=i>>>8^t[n]}return~i}(r,i+4,s);r[s]=o>>24&255,r[s+1]=o>>16&255,r[s+2]=o>>8&255,r[s+3]=255&o}function r(e){let t=e.length;const n=65535,r=Math.ceil(t/n),i=new Uint8Array(2+t+5*r+4);let s=0;i[s++]=120,i[s++]=156;let a=0;for(;t>n;)i[s++]=0,i[s++]=255,i[s++]=255,i[s++]=0,i[s++]=0,i.set(e.subarray(a,a+n),s),s+=n,a+=n,t-=n;i[s++]=1,i[s++]=255&t,i[s++]=t>>8&255,i[s++]=255&~t,i[s++]=(65535&~t)>>8&255,i.set(e.subarray(a),s),s+=e.length-a;const o=function(e,t,n){let r=1,i=0;for(let s=t;s<n;++s)r=(r+(255&e[s]))%65521,i=(i+r)%65521;return i<<16|r}(e,0,e.length);return i[s++]=o>>24&255,i[s++]=o>>16&255,i[s++]=o>>8&255,i[s++]=255&o,i}function s(t,s,a,o){const l=t.width,c=t.height;let d,h,p;const f=t.data;switch(s){case i.ImageKind.GRAYSCALE_1BPP:h=0,d=1,p=l+7>>3;break;case i.ImageKind.RGB_24BPP:h=2,d=8,p=3*l;break;case i.ImageKind.RGBA_32BPP:h=6,d=8,p=4*l;break;default:throw new Error("invalid format")}const m=new Uint8Array((1+p)*c);let g=0,v=0;for(let e=0;e<c;++e)m[g++]=0,m.set(f.subarray(v,v+p),g),v+=p,g+=p;if(s===i.ImageKind.GRAYSCALE_1BPP&&o){g=0;for(let e=0;e<c;e++){g++;for(let e=0;e<p;e++)m[g++]^=255}}const _=new Uint8Array([l>>24&255,l>>16&255,l>>8&255,255&l,c>>24&255,c>>16&255,c>>8&255,255&c,d,h,0,0,0]),y=function(e){if(!i.isNodeJS)return r(e);try{const t=parseInt(process.versions.node)>=8?e:Buffer.from(e),n=__webpack_require__(787).deflateSync(t,{level:9});return n instanceof Uint8Array?n:new Uint8Array(n)}catch(t){(0,i.warn)("Not compressing PNG because zlib.deflateSync is unavailable: "+t)}return r(e)}(m),b=e.length+36+_.length+y.length,w=new Uint8Array(b);let S=0;return w.set(e,S),S+=e.length,n("IHDR",_,w,S),S+=12+_.length,n("IDATA",y,w,S),S+=12+y.length,n("IEND",new Uint8Array(0),w,S),u(w,"image/png",a)}return function(e,t,n){return s(e,void 0===e.kind?i.ImageKind.GRAYSCALE_1BPP:e.kind,t,n)}}();class h{constructor(){this.fontSizeScale=1,this.fontWeight=a,this.fontSize=0,this.textMatrix=i.IDENTITY_MATRIX,this.fontMatrix=i.FONT_IDENTITY_MATRIX,this.leading=0,this.textRenderingMode=i.TextRenderingMode.FILL,this.textMatrixScale=1,this.x=0,this.y=0,this.lineX=0,this.lineY=0,this.charSpacing=0,this.wordSpacing=0,this.textHScale=1,this.textRise=0,this.fillColor=o,this.strokeColor="#000000",this.fillAlpha=1,this.strokeAlpha=1,this.lineWidth=1,this.lineJoin="",this.lineCap="",this.miterLimit=0,this.dashArray=[],this.dashPhase=0,this.dependencies=[],this.activeClipUrl=null,this.clipGroup=null,this.maskId=""}clone(){return Object.create(this)}setCurrentPoint(e,t){this.x=e,this.y=t}}function p(e){if(Number.isInteger(e))return e.toString();const t=e.toFixed(10);let n=t.length-1;if("0"!==t[n])return t;do{n--}while("0"===t[n]);return t.substring(0,"."===t[n]?n:n+1)}function f(e){if(0===e[4]&&0===e[5]){if(0===e[1]&&0===e[2])return 1===e[0]&&1===e[3]?"":"scale(".concat(p(e[0])," ").concat(p(e[3]),")");if(e[0]===e[3]&&e[1]===-e[2]){const t=180*Math.acos(e[0])/Math.PI;return"rotate(".concat(p(t),")")}}else if(1===e[0]&&0===e[1]&&0===e[2]&&1===e[3])return"translate(".concat(p(e[4])," ").concat(p(e[5]),")");return"matrix(".concat(p(e[0])," ").concat(p(e[1])," ").concat(p(e[2])," ").concat(p(e[3])," ").concat(p(e[4])," ")+"".concat(p(e[5]),")")}let m=0,g=0,v=0;t.SVGGraphics=class{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];(0,r.deprecated)("The SVG back-end is no longer maintained and *may* be removed in the future."),this.svgFactory=new r.DOMSVGFactory,this.current=new h,this.transformMatrix=i.IDENTITY_MATRIX,this.transformStack=[],this.extraStack=[],this.commonObjs=e,this.objs=t,this.pendingClip=null,this.pendingEOFill=!1,this.embedFonts=!1,this.embeddedFonts=Object.create(null),this.cssStyle=null,this.forceDataSchema=!!n,this._operatorIdMapping=[];for(const r in i.OPS)this._operatorIdMapping[i.OPS[r]]=r}getObject(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return"string"===typeof e?e.startsWith("g_")?this.commonObjs.get(e):this.objs.get(e):t}save(){this.transformStack.push(this.transformMatrix);const e=this.current;this.extraStack.push(e),this.current=e.clone()}restore(){this.transformMatrix=this.transformStack.pop(),this.current=this.extraStack.pop(),this.pendingClip=null,this.tgrp=null}group(e){this.save(),this.executeOpTree(e),this.restore()}loadDependencies(e){const t=e.fnArray,n=e.argsArray;for(let r=0,s=t.length;r<s;r++)if(t[r]===i.OPS.dependency)for(const e of n[r]){const t=e.startsWith("g_")?this.commonObjs:this.objs,n=new Promise((n=>{t.get(e,n)}));this.current.dependencies.push(n)}return Promise.all(this.current.dependencies)}transform(e,t,n,r,s,a){const o=[e,t,n,r,s,a];this.transformMatrix=i.Util.transform(this.transformMatrix,o),this.tgrp=null}getSVG(e,t){this.viewport=t;const n=this._initialize(t);return this.loadDependencies(e).then((()=>(this.transformMatrix=i.IDENTITY_MATRIX,this.executeOpTree(this.convertOpList(e)),n)))}convertOpList(e){const t=this._operatorIdMapping,n=e.argsArray,r=e.fnArray,i=[];for(let s=0,a=r.length;s<a;s++){const e=r[s];i.push({fnId:e,fn:t[e],args:n[s]})}return function(e){let t=[];const n=[];for(const r of e)"save"!==r.fn?"restore"===r.fn?t=n.pop():t.push(r):(t.push({fnId:92,fn:"group",items:[]}),n.push(t),t=t.at(-1).items);return t}(i)}executeOpTree(e){for(const t of e){const e=t.fn,n=t.fnId,r=t.args;switch(0|n){case i.OPS.beginText:this.beginText();break;case i.OPS.dependency:break;case i.OPS.setLeading:this.setLeading(r);break;case i.OPS.setLeadingMoveText:this.setLeadingMoveText(r[0],r[1]);break;case i.OPS.setFont:this.setFont(r);break;case i.OPS.showText:case i.OPS.showSpacedText:this.showText(r[0]);break;case i.OPS.endText:this.endText();break;case i.OPS.moveText:this.moveText(r[0],r[1]);break;case i.OPS.setCharSpacing:this.setCharSpacing(r[0]);break;case i.OPS.setWordSpacing:this.setWordSpacing(r[0]);break;case i.OPS.setHScale:this.setHScale(r[0]);break;case i.OPS.setTextMatrix:this.setTextMatrix(r[0],r[1],r[2],r[3],r[4],r[5]);break;case i.OPS.setTextRise:this.setTextRise(r[0]);break;case i.OPS.setTextRenderingMode:this.setTextRenderingMode(r[0]);break;case i.OPS.setLineWidth:this.setLineWidth(r[0]);break;case i.OPS.setLineJoin:this.setLineJoin(r[0]);break;case i.OPS.setLineCap:this.setLineCap(r[0]);break;case i.OPS.setMiterLimit:this.setMiterLimit(r[0]);break;case i.OPS.setFillRGBColor:this.setFillRGBColor(r[0],r[1],r[2]);break;case i.OPS.setStrokeRGBColor:this.setStrokeRGBColor(r[0],r[1],r[2]);break;case i.OPS.setStrokeColorN:this.setStrokeColorN(r);break;case i.OPS.setFillColorN:this.setFillColorN(r);break;case i.OPS.shadingFill:this.shadingFill(r[0]);break;case i.OPS.setDash:this.setDash(r[0],r[1]);break;case i.OPS.setRenderingIntent:this.setRenderingIntent(r[0]);break;case i.OPS.setFlatness:this.setFlatness(r[0]);break;case i.OPS.setGState:this.setGState(r[0]);break;case i.OPS.fill:this.fill();break;case i.OPS.eoFill:this.eoFill();break;case i.OPS.stroke:this.stroke();break;case i.OPS.fillStroke:this.fillStroke();break;case i.OPS.eoFillStroke:this.eoFillStroke();break;case i.OPS.clip:this.clip("nonzero");break;case i.OPS.eoClip:this.clip("evenodd");break;case i.OPS.paintSolidColorImageMask:this.paintSolidColorImageMask();break;case i.OPS.paintImageXObject:this.paintImageXObject(r[0]);break;case i.OPS.paintInlineImageXObject:this.paintInlineImageXObject(r[0]);break;case i.OPS.paintImageMaskXObject:this.paintImageMaskXObject(r[0]);break;case i.OPS.paintFormXObjectBegin:this.paintFormXObjectBegin(r[0],r[1]);break;case i.OPS.paintFormXObjectEnd:this.paintFormXObjectEnd();break;case i.OPS.closePath:this.closePath();break;case i.OPS.closeStroke:this.closeStroke();break;case i.OPS.closeFillStroke:this.closeFillStroke();break;case i.OPS.closeEOFillStroke:this.closeEOFillStroke();break;case i.OPS.nextLine:this.nextLine();break;case i.OPS.transform:this.transform(r[0],r[1],r[2],r[3],r[4],r[5]);break;case i.OPS.constructPath:this.constructPath(r[0],r[1]);break;case i.OPS.endPath:this.endPath();break;case 92:this.group(t.items);break;default:(0,i.warn)("Unimplemented operator ".concat(e))}}}setWordSpacing(e){this.current.wordSpacing=e}setCharSpacing(e){this.current.charSpacing=e}nextLine(){this.moveText(0,this.current.leading)}setTextMatrix(e,t,n,r,i,s){const a=this.current;a.textMatrix=a.lineMatrix=[e,t,n,r,i,s],a.textMatrixScale=Math.hypot(e,t),a.x=a.lineX=0,a.y=a.lineY=0,a.xcoords=[],a.ycoords=[],a.tspan=this.svgFactory.createElement("svg:tspan"),a.tspan.setAttributeNS(null,"font-family",a.fontFamily),a.tspan.setAttributeNS(null,"font-size","".concat(p(a.fontSize),"px")),a.tspan.setAttributeNS(null,"y",p(-a.y)),a.txtElement=this.svgFactory.createElement("svg:text"),a.txtElement.append(a.tspan)}beginText(){const e=this.current;e.x=e.lineX=0,e.y=e.lineY=0,e.textMatrix=i.IDENTITY_MATRIX,e.lineMatrix=i.IDENTITY_MATRIX,e.textMatrixScale=1,e.tspan=this.svgFactory.createElement("svg:tspan"),e.txtElement=this.svgFactory.createElement("svg:text"),e.txtgrp=this.svgFactory.createElement("svg:g"),e.xcoords=[],e.ycoords=[]}moveText(e,t){const n=this.current;n.x=n.lineX+=e,n.y=n.lineY+=t,n.xcoords=[],n.ycoords=[],n.tspan=this.svgFactory.createElement("svg:tspan"),n.tspan.setAttributeNS(null,"font-family",n.fontFamily),n.tspan.setAttributeNS(null,"font-size","".concat(p(n.fontSize),"px")),n.tspan.setAttributeNS(null,"y",p(-n.y))}showText(e){const t=this.current,n=t.font,r=t.fontSize;if(0===r)return;const l=t.fontSizeScale,c=t.charSpacing,u=t.wordSpacing,d=t.fontDirection,h=t.textHScale*d,m=n.vertical,g=m?1:-1,v=n.defaultVMetrics,_=r*t.fontMatrix[0];let y=0;for(const i of e){if(null===i){y+=d*u;continue}if("number"===typeof i){y+=g*i*r/1e3;continue}const e=(i.isSpace?u:0)+c,s=i.fontChar;let a,o,h=i.width;if(m){let e;const t=i.vmetric||v;e=i.vmetric?t[1]:.5*h,e=-e*_;const n=t[2]*_;h=t?-t[0]:h,a=e/l,o=(y+n)/l}else a=y/l,o=0;(i.isInFont||n.missingFile)&&(t.xcoords.push(t.x+a),m&&t.ycoords.push(-t.y+o),t.tspan.textContent+=s),y+=m?h*_-e*d:h*_+e*d}t.tspan.setAttributeNS(null,"x",t.xcoords.map(p).join(" ")),m?t.tspan.setAttributeNS(null,"y",t.ycoords.map(p).join(" ")):t.tspan.setAttributeNS(null,"y",p(-t.y)),m?t.y-=y:t.x+=y*h,t.tspan.setAttributeNS(null,"font-family",t.fontFamily),t.tspan.setAttributeNS(null,"font-size","".concat(p(t.fontSize),"px")),t.fontStyle!==s&&t.tspan.setAttributeNS(null,"font-style",t.fontStyle),t.fontWeight!==a&&t.tspan.setAttributeNS(null,"font-weight",t.fontWeight);const b=t.textRenderingMode&i.TextRenderingMode.FILL_STROKE_MASK;if(b===i.TextRenderingMode.FILL||b===i.TextRenderingMode.FILL_STROKE?(t.fillColor!==o&&t.tspan.setAttributeNS(null,"fill",t.fillColor),t.fillAlpha<1&&t.tspan.setAttributeNS(null,"fill-opacity",t.fillAlpha)):t.textRenderingMode===i.TextRenderingMode.ADD_TO_PATH?t.tspan.setAttributeNS(null,"fill","transparent"):t.tspan.setAttributeNS(null,"fill","none"),b===i.TextRenderingMode.STROKE||b===i.TextRenderingMode.FILL_STROKE){const e=1/(t.textMatrixScale||1);this._setStrokeAttributes(t.tspan,e)}let w=t.textMatrix;0!==t.textRise&&(w=w.slice(),w[5]+=t.textRise),t.txtElement.setAttributeNS(null,"transform","".concat(f(w)," scale(").concat(p(h),", -1)")),t.txtElement.setAttributeNS("http://www.w3.org/XML/1998/namespace","xml:space","preserve"),t.txtElement.append(t.tspan),t.txtgrp.append(t.txtElement),this._ensureTransformGroup().append(t.txtElement)}setLeadingMoveText(e,t){this.setLeading(-t),this.moveText(e,t)}addFontStyle(e){if(!e.data)throw new Error('addFontStyle: No font data available, ensure that the "fontExtraProperties" API parameter is set.');this.cssStyle||(this.cssStyle=this.svgFactory.createElement("svg:style"),this.cssStyle.setAttributeNS(null,"type","text/css"),this.defs.append(this.cssStyle));const t=u(e.data,e.mimetype,this.forceDataSchema);this.cssStyle.textContent+='@font-face { font-family: "'.concat(e.loadedName,'";')+" src: url(".concat(t,"); }\n")}setFont(e){const t=this.current,n=this.commonObjs.get(e[0]);let r=e[1];t.font=n,!this.embedFonts||n.missingFile||this.embeddedFonts[n.loadedName]||(this.addFontStyle(n),this.embeddedFonts[n.loadedName]=n),t.fontMatrix=n.fontMatrix||i.FONT_IDENTITY_MATRIX;let s="normal";n.black?s="900":n.bold&&(s="bold");const a=n.italic?"italic":"normal";r<0?(r=-r,t.fontDirection=-1):t.fontDirection=1,t.fontSize=r,t.fontFamily=n.loadedName,t.fontWeight=s,t.fontStyle=a,t.tspan=this.svgFactory.createElement("svg:tspan"),t.tspan.setAttributeNS(null,"y",p(-t.y)),t.xcoords=[],t.ycoords=[]}endText(){var e;const t=this.current;t.textRenderingMode&i.TextRenderingMode.ADD_TO_PATH_FLAG&&null!==(e=t.txtElement)&&void 0!==e&&e.hasChildNodes()&&(t.element=t.txtElement,this.clip("nonzero"),this.endPath())}setLineWidth(e){e>0&&(this.current.lineWidth=e)}setLineCap(e){this.current.lineCap=l[e]}setLineJoin(e){this.current.lineJoin=c[e]}setMiterLimit(e){this.current.miterLimit=e}setStrokeAlpha(e){this.current.strokeAlpha=e}setStrokeRGBColor(e,t,n){this.current.strokeColor=i.Util.makeHexColor(e,t,n)}setFillAlpha(e){this.current.fillAlpha=e}setFillRGBColor(e,t,n){this.current.fillColor=i.Util.makeHexColor(e,t,n),this.current.tspan=this.svgFactory.createElement("svg:tspan"),this.current.xcoords=[],this.current.ycoords=[]}setStrokeColorN(e){this.current.strokeColor=this._makeColorN_Pattern(e)}setFillColorN(e){this.current.fillColor=this._makeColorN_Pattern(e)}shadingFill(e){const{width:t,height:n}=this.viewport,r=i.Util.inverseTransform(this.transformMatrix),[s,a,o,l]=i.Util.getAxialAlignedBoundingBox([0,0,t,n],r),c=this.svgFactory.createElement("svg:rect");c.setAttributeNS(null,"x",s),c.setAttributeNS(null,"y",a),c.setAttributeNS(null,"width",o-s),c.setAttributeNS(null,"height",l-a),c.setAttributeNS(null,"fill",this._makeShadingPattern(e)),this.current.fillAlpha<1&&c.setAttributeNS(null,"fill-opacity",this.current.fillAlpha),this._ensureTransformGroup().append(c)}_makeColorN_Pattern(e){return"TilingPattern"===e[0]?this._makeTilingPattern(e):this._makeShadingPattern(e)}_makeTilingPattern(e){const t=e[1],n=e[2],r=e[3]||i.IDENTITY_MATRIX,[s,a,o,l]=e[4],c=e[5],u=e[6],d=e[7],h="shading".concat(v++),[p,f,m,g]=i.Util.normalizeRect([...i.Util.applyTransform([s,a],r),...i.Util.applyTransform([o,l],r)]),[_,y]=i.Util.singularValueDecompose2dScale(r),b=c*_,w=u*y,S=this.svgFactory.createElement("svg:pattern");S.setAttributeNS(null,"id",h),S.setAttributeNS(null,"patternUnits","userSpaceOnUse"),S.setAttributeNS(null,"width",b),S.setAttributeNS(null,"height",w),S.setAttributeNS(null,"x","".concat(p)),S.setAttributeNS(null,"y","".concat(f));const P=this.svg,C=this.transformMatrix,E=this.current.fillColor,x=this.current.strokeColor,k=this.svgFactory.create(m-p,g-f);if(this.svg=k,this.transformMatrix=r,2===d){const e=i.Util.makeHexColor(...t);this.current.fillColor=e,this.current.strokeColor=e}return this.executeOpTree(this.convertOpList(n)),this.svg=P,this.transformMatrix=C,this.current.fillColor=E,this.current.strokeColor=x,S.append(k.childNodes[0]),this.defs.append(S),"url(#".concat(h,")")}_makeShadingPattern(e){switch("string"===typeof e&&(e=this.objs.get(e)),e[0]){case"RadialAxial":const t="shading".concat(v++),n=e[3];let r;switch(e[1]){case"axial":const n=e[4],i=e[5];r=this.svgFactory.createElement("svg:linearGradient"),r.setAttributeNS(null,"id",t),r.setAttributeNS(null,"gradientUnits","userSpaceOnUse"),r.setAttributeNS(null,"x1",n[0]),r.setAttributeNS(null,"y1",n[1]),r.setAttributeNS(null,"x2",i[0]),r.setAttributeNS(null,"y2",i[1]);break;case"radial":const s=e[4],a=e[5],o=e[6],l=e[7];r=this.svgFactory.createElement("svg:radialGradient"),r.setAttributeNS(null,"id",t),r.setAttributeNS(null,"gradientUnits","userSpaceOnUse"),r.setAttributeNS(null,"cx",a[0]),r.setAttributeNS(null,"cy",a[1]),r.setAttributeNS(null,"r",l),r.setAttributeNS(null,"fx",s[0]),r.setAttributeNS(null,"fy",s[1]),r.setAttributeNS(null,"fr",o);break;default:throw new Error("Unknown RadialAxial type: ".concat(e[1]))}for(const e of n){const t=this.svgFactory.createElement("svg:stop");t.setAttributeNS(null,"offset",e[0]),t.setAttributeNS(null,"stop-color",e[1]),r.append(t)}return this.defs.append(r),"url(#".concat(t,")");case"Mesh":return(0,i.warn)("Unimplemented pattern Mesh"),null;case"Dummy":return"hotpink";default:throw new Error("Unknown IR type: ".concat(e[0]))}}setDash(e,t){this.current.dashArray=e,this.current.dashPhase=t}constructPath(e,t){const n=this.current;let r=n.x,s=n.y,a=[],o=0;for(const l of e)switch(0|l){case i.OPS.rectangle:r=t[o++],s=t[o++];const e=r+t[o++],n=s+t[o++];a.push("M",p(r),p(s),"L",p(e),p(s),"L",p(e),p(n),"L",p(r),p(n),"Z");break;case i.OPS.moveTo:r=t[o++],s=t[o++],a.push("M",p(r),p(s));break;case i.OPS.lineTo:r=t[o++],s=t[o++],a.push("L",p(r),p(s));break;case i.OPS.curveTo:r=t[o+4],s=t[o+5],a.push("C",p(t[o]),p(t[o+1]),p(t[o+2]),p(t[o+3]),p(r),p(s)),o+=6;break;case i.OPS.curveTo2:a.push("C",p(r),p(s),p(t[o]),p(t[o+1]),p(t[o+2]),p(t[o+3])),r=t[o+2],s=t[o+3],o+=4;break;case i.OPS.curveTo3:r=t[o+2],s=t[o+3],a.push("C",p(t[o]),p(t[o+1]),p(r),p(s),p(r),p(s)),o+=4;break;case i.OPS.closePath:a.push("Z")}a=a.join(" "),n.path&&e.length>0&&e[0]!==i.OPS.rectangle&&e[0]!==i.OPS.moveTo?a=n.path.getAttributeNS(null,"d")+a:(n.path=this.svgFactory.createElement("svg:path"),this._ensureTransformGroup().append(n.path)),n.path.setAttributeNS(null,"d",a),n.path.setAttributeNS(null,"fill","none"),n.element=n.path,n.setCurrentPoint(r,s)}endPath(){const e=this.current;if(e.path=null,!this.pendingClip)return;if(!e.element)return void(this.pendingClip=null);const t="clippath".concat(m++),n=this.svgFactory.createElement("svg:clipPath");n.setAttributeNS(null,"id",t),n.setAttributeNS(null,"transform",f(this.transformMatrix));const r=e.element.cloneNode(!0);if("evenodd"===this.pendingClip?r.setAttributeNS(null,"clip-rule","evenodd"):r.setAttributeNS(null,"clip-rule","nonzero"),this.pendingClip=null,n.append(r),this.defs.append(n),e.activeClipUrl){e.clipGroup=null;for(const e of this.extraStack)e.clipGroup=null;n.setAttributeNS(null,"clip-path",e.activeClipUrl)}e.activeClipUrl="url(#".concat(t,")"),this.tgrp=null}clip(e){this.pendingClip=e}closePath(){const e=this.current;if(e.path){const t="".concat(e.path.getAttributeNS(null,"d"),"Z");e.path.setAttributeNS(null,"d",t)}}setLeading(e){this.current.leading=-e}setTextRise(e){this.current.textRise=e}setTextRenderingMode(e){this.current.textRenderingMode=e}setHScale(e){this.current.textHScale=e/100}setRenderingIntent(e){}setFlatness(e){}setGState(e){for(const[t,n]of e)switch(t){case"LW":this.setLineWidth(n);break;case"LC":this.setLineCap(n);break;case"LJ":this.setLineJoin(n);break;case"ML":this.setMiterLimit(n);break;case"D":this.setDash(n[0],n[1]);break;case"RI":this.setRenderingIntent(n);break;case"FL":this.setFlatness(n);break;case"Font":this.setFont(n);break;case"CA":this.setStrokeAlpha(n);break;case"ca":this.setFillAlpha(n);break;default:(0,i.warn)("Unimplemented graphic state operator ".concat(t))}}fill(){const e=this.current;e.element&&(e.element.setAttributeNS(null,"fill",e.fillColor),e.element.setAttributeNS(null,"fill-opacity",e.fillAlpha),this.endPath())}stroke(){const e=this.current;e.element&&(this._setStrokeAttributes(e.element),e.element.setAttributeNS(null,"fill","none"),this.endPath())}_setStrokeAttributes(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;const n=this.current;let r=n.dashArray;1!==t&&r.length>0&&(r=r.map((function(e){return t*e}))),e.setAttributeNS(null,"stroke",n.strokeColor),e.setAttributeNS(null,"stroke-opacity",n.strokeAlpha),e.setAttributeNS(null,"stroke-miterlimit",p(n.miterLimit)),e.setAttributeNS(null,"stroke-linecap",n.lineCap),e.setAttributeNS(null,"stroke-linejoin",n.lineJoin),e.setAttributeNS(null,"stroke-width",p(t*n.lineWidth)+"px"),e.setAttributeNS(null,"stroke-dasharray",r.map(p).join(" ")),e.setAttributeNS(null,"stroke-dashoffset",p(t*n.dashPhase)+"px")}eoFill(){var e;null===(e=this.current.element)||void 0===e||e.setAttributeNS(null,"fill-rule","evenodd"),this.fill()}fillStroke(){this.stroke(),this.fill()}eoFillStroke(){var e;null===(e=this.current.element)||void 0===e||e.setAttributeNS(null,"fill-rule","evenodd"),this.fillStroke()}closeStroke(){this.closePath(),this.stroke()}closeFillStroke(){this.closePath(),this.fillStroke()}closeEOFillStroke(){this.closePath(),this.eoFillStroke()}paintSolidColorImageMask(){const e=this.svgFactory.createElement("svg:rect");e.setAttributeNS(null,"x","0"),e.setAttributeNS(null,"y","0"),e.setAttributeNS(null,"width","1px"),e.setAttributeNS(null,"height","1px"),e.setAttributeNS(null,"fill",this.current.fillColor),this._ensureTransformGroup().append(e)}paintImageXObject(e){const t=this.getObject(e);t?this.paintInlineImageXObject(t):(0,i.warn)("Dependent image with object ID ".concat(e," is not ready yet"))}paintInlineImageXObject(e,t){const n=e.width,r=e.height,i=d(e,this.forceDataSchema,!!t),s=this.svgFactory.createElement("svg:rect");s.setAttributeNS(null,"x","0"),s.setAttributeNS(null,"y","0"),s.setAttributeNS(null,"width",p(n)),s.setAttributeNS(null,"height",p(r)),this.current.element=s,this.clip("nonzero");const a=this.svgFactory.createElement("svg:image");a.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",i),a.setAttributeNS(null,"x","0"),a.setAttributeNS(null,"y",p(-r)),a.setAttributeNS(null,"width",p(n)+"px"),a.setAttributeNS(null,"height",p(r)+"px"),a.setAttributeNS(null,"transform","scale(".concat(p(1/n)," ").concat(p(-1/r),")")),t?t.append(a):this._ensureTransformGroup().append(a)}paintImageMaskXObject(e){const t=this.getObject(e.data,e);if(t.bitmap)return void(0,i.warn)("paintImageMaskXObject: ImageBitmap support is not implemented, ensure that the `isOffscreenCanvasSupported` API parameter is disabled.");const n=this.current,r=t.width,s=t.height,a=n.fillColor;n.maskId="mask".concat(g++);const o=this.svgFactory.createElement("svg:mask");o.setAttributeNS(null,"id",n.maskId);const l=this.svgFactory.createElement("svg:rect");l.setAttributeNS(null,"x","0"),l.setAttributeNS(null,"y","0"),l.setAttributeNS(null,"width",p(r)),l.setAttributeNS(null,"height",p(s)),l.setAttributeNS(null,"fill",a),l.setAttributeNS(null,"mask","url(#".concat(n.maskId,")")),this.defs.append(o),this._ensureTransformGroup().append(l),this.paintInlineImageXObject(t,o)}paintFormXObjectBegin(e,t){if(Array.isArray(e)&&6===e.length&&this.transform(e[0],e[1],e[2],e[3],e[4],e[5]),t){const e=t[2]-t[0],n=t[3]-t[1],r=this.svgFactory.createElement("svg:rect");r.setAttributeNS(null,"x",t[0]),r.setAttributeNS(null,"y",t[1]),r.setAttributeNS(null,"width",p(e)),r.setAttributeNS(null,"height",p(n)),this.current.element=r,this.clip("nonzero"),this.endPath()}}paintFormXObjectEnd(){}_initialize(e){const t=this.svgFactory.create(e.width,e.height),n=this.svgFactory.createElement("svg:defs");t.append(n),this.defs=n;const r=this.svgFactory.createElement("svg:g");return r.setAttributeNS(null,"transform",f(e.transform)),t.append(r),this.svg=r,t}_ensureClipGroup(){if(!this.current.clipGroup){const e=this.svgFactory.createElement("svg:g");e.setAttributeNS(null,"clip-path",this.current.activeClipUrl),this.svg.append(e),this.current.clipGroup=e}return this.current.clipGroup}_ensureTransformGroup(){return this.tgrp||(this.tgrp=this.svgFactory.createElement("svg:g"),this.tgrp.setAttributeNS(null,"transform",f(this.transformMatrix)),this.current.activeClipUrl?this._ensureClipGroup().append(this.tgrp):this.svg.append(this.tgrp)),this.tgrp}}},(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.XfaText=void 0;class n{static textContent(e){const t=[],r={items:t,styles:Object.create(null)};return function e(r){var i;if(!r)return;let s=null;const a=r.name;if("#text"===a)s=r.value;else{if(!n.shouldBuildText(a))return;null!==r&&void 0!==r&&null!==(i=r.attributes)&&void 0!==i&&i.textContent?s=r.attributes.textContent:r.value&&(s=r.value)}if(null!==s&&t.push({str:s}),r.children)for(const t of r.children)e(t)}(e),r}static shouldBuildText(e){return!("textarea"===e||"input"===e||"option"===e||"select"===e)}}t.XfaText=n},(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.TextLayerRenderTask=void 0,t.renderTextLayer=function(e){e.textContentSource||!e.textContent&&!e.textContentStream||((0,i.deprecated)("The TextLayerRender `textContent`/`textContentStream` parameters will be removed in the future, please use `textContentSource` instead."),e.textContentSource=e.textContent||e.textContentStream);const{container:t,viewport:n}=e,r=getComputedStyle(t),s=r.getPropertyValue("visibility"),a=parseFloat(r.getPropertyValue("--scale-factor"));"visible"===s&&(!a||Math.abs(a-n.scale)>1e-5)&&console.error("The `--scale-factor` CSS-variable must be set, to the same value as `viewport.scale`, either on the `container`-element itself or higher up in the DOM.");const o=new d(e);return o._render(),o},t.updateTextLayer=function(e){let{container:t,viewport:n,textDivs:r,textDivProperties:s,isOffscreenCanvasSupported:a,mustRotate:o=!0,mustRescale:c=!0}=e;if(o&&(0,i.setLayerDimensions)(t,{rotation:n.rotation}),c){const e=l(0,a),t={prevFontSize:null,prevFontFamily:null,div:null,scale:n.scale*(globalThis.devicePixelRatio||1),properties:null,ctx:e};for(const n of r)t.properties=s.get(n),t.div=n,u(t)}};var r=n(1),i=n(6);const s=30,a=.8,o=new Map;function l(e,t){let n;if(t&&r.FeatureTest.isOffscreenCanvasSupported)n=new OffscreenCanvas(e,e).getContext("2d",{alpha:!1});else{const t=document.createElement("canvas");t.width=t.height=e,n=t.getContext("2d",{alpha:!1})}return n}function c(e,t,n){const i=document.createElement("span"),c={angle:0,canvasWidth:0,hasText:""!==t.str,hasEOL:t.hasEOL,fontSize:0};e._textDivs.push(i);const u=r.Util.transform(e._transform,t.transform);let d=Math.atan2(u[1],u[0]);const h=n[t.fontName];h.vertical&&(d+=Math.PI/2);const p=Math.hypot(u[2],u[3]),f=p*function(e,t){const n=o.get(e);if(n)return n;const r=l(s,t);r.font="".concat(s,"px ").concat(e);const i=r.measureText("");let c=i.fontBoundingBoxAscent,u=Math.abs(i.fontBoundingBoxDescent);if(c){const t=c/(c+u);return o.set(e,t),r.canvas.width=r.canvas.height=0,t}r.strokeStyle="red",r.clearRect(0,0,s,s),r.strokeText("g",0,0);let d=r.getImageData(0,0,s,s).data;u=0;for(let a=d.length-1-3;a>=0;a-=4)if(d[a]>0){u=Math.ceil(a/4/s);break}r.clearRect(0,0,s,s),r.strokeText("A",0,s),d=r.getImageData(0,0,s,s).data,c=0;for(let a=0,o=d.length;a<o;a+=4)if(d[a]>0){c=s-Math.floor(a/4/s);break}if(r.canvas.width=r.canvas.height=0,c){const t=c/(c+u);return o.set(e,t),t}return o.set(e,a),a}(h.fontFamily,e._isOffscreenCanvasSupported);let m,g;0===d?(m=u[4],g=u[5]-f):(m=u[4]+f*Math.sin(d),g=u[5]-f*Math.cos(d));const v="calc(var(--scale-factor)*",_=i.style;e._container===e._rootContainer?(_.left="".concat((100*m/e._pageWidth).toFixed(2),"%"),_.top="".concat((100*g/e._pageHeight).toFixed(2),"%")):(_.left="".concat(v).concat(m.toFixed(2),"px)"),_.top="".concat(v).concat(g.toFixed(2),"px)")),_.fontSize="".concat(v).concat(p.toFixed(2),"px)"),_.fontFamily=h.fontFamily,c.fontSize=p,i.setAttribute("role","presentation"),i.textContent=t.str,i.dir=t.dir,e._fontInspectorEnabled&&(i.dataset.fontName=t.fontName),0!==d&&(c.angle=d*(180/Math.PI));let y=!1;if(t.str.length>1)y=!0;else if(" "!==t.str&&t.transform[0]!==t.transform[3]){const e=Math.abs(t.transform[0]),n=Math.abs(t.transform[3]);e!==n&&Math.max(e,n)/Math.min(e,n)>1.5&&(y=!0)}y&&(c.canvasWidth=h.vertical?t.height:t.width),e._textDivProperties.set(i,c),e._isReadableStream&&e._layoutText(i)}function u(e){const{div:t,scale:n,properties:r,ctx:i,prevFontSize:s,prevFontFamily:a}=e,{style:o}=t;let l="";if(0!==r.canvasWidth&&r.hasText){const{fontFamily:c}=o,{canvasWidth:u,fontSize:d}=r;s===d&&a===c||(i.font="".concat(d*n,"px ").concat(c),e.prevFontSize=d,e.prevFontFamily=c);const{width:h}=i.measureText(t.textContent);h>0&&(l="scaleX(".concat(u*n/h,")"))}0!==r.angle&&(l="rotate(".concat(r.angle,"deg) ").concat(l)),l.length>0&&(o.transform=l)}class d{constructor(e){var t;let{textContentSource:n,container:s,viewport:a,textDivs:o,textDivProperties:c,textContentItemsStr:u,isOffscreenCanvasSupported:d}=e;this._textContentSource=n,this._isReadableStream=n instanceof ReadableStream,this._container=this._rootContainer=s,this._textDivs=o||[],this._textContentItemsStr=u||[],this._isOffscreenCanvasSupported=d,this._fontInspectorEnabled=!(null===(t=globalThis.FontInspector)||void 0===t||!t.enabled),this._reader=null,this._textDivProperties=c||new WeakMap,this._canceled=!1,this._capability=new r.PromiseCapability,this._layoutTextParams={prevFontSize:null,prevFontFamily:null,div:null,scale:a.scale*(globalThis.devicePixelRatio||1),properties:null,ctx:l(0,d)};const{pageWidth:h,pageHeight:p,pageX:f,pageY:m}=a.rawDims;this._transform=[1,0,0,-1,-f,m+p],this._pageWidth=h,this._pageHeight=p,(0,i.setLayerDimensions)(s,a),this._capability.promise.finally((()=>{this._layoutTextParams=null})).catch((()=>{}))}get promise(){return this._capability.promise}cancel(){this._canceled=!0,this._reader&&(this._reader.cancel(new r.AbortException("TextLayer task cancelled.")).catch((()=>{})),this._reader=null),this._capability.reject(new r.AbortException("TextLayer task cancelled."))}_processItems(e,t){for(const n of e)if(void 0!==n.str)this._textContentItemsStr.push(n.str),c(this,n,t);else if("beginMarkedContentProps"===n.type||"beginMarkedContent"===n.type){const e=this._container;this._container=document.createElement("span"),this._container.classList.add("markedContent"),null!==n.id&&this._container.setAttribute("id","".concat(n.id)),e.append(this._container)}else"endMarkedContent"===n.type&&(this._container=this._container.parentNode)}_layoutText(e){const t=this._layoutTextParams.properties=this._textDivProperties.get(e);if(this._layoutTextParams.div=e,u(this._layoutTextParams),t.hasText&&this._container.append(e),t.hasEOL){const e=document.createElement("br");e.setAttribute("role","presentation"),this._container.append(e)}}_render(){const e=new r.PromiseCapability;let t=Object.create(null);if(this._isReadableStream){const n=()=>{this._reader.read().then((r=>{let{value:i,done:s}=r;s?e.resolve():(Object.assign(t,i.styles),this._processItems(i.items,t),n())}),e.reject)};this._reader=this._textContentSource.getReader(),n()}else{if(!this._textContentSource)throw new Error('No "textContentSource" parameter specified.');{const{items:t,styles:n}=this._textContentSource;this._processItems(t,n),e.resolve()}}e.promise.then((()=>{t=null,function(e){if(e._canceled)return;const t=e._textDivs,n=e._capability;if(t.length>1e5)n.resolve();else{if(!e._isReadableStream)for(const n of t)e._layoutText(n);n.resolve()}}(this)}),this._capability.reject)}}t.TextLayerRenderTask=d},(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.AnnotationEditorLayer=void 0;var r=n(1),i=n(4),s=n(28),a=n(33),o=n(6),l=n(34),c=new WeakMap,u=new WeakMap,d=new WeakMap,h=new WeakMap,p=new WeakMap,f=new WeakMap,m=new WeakMap,g=new WeakMap,v=new WeakMap,_=new WeakMap,y=new WeakSet;class b{constructor(e){let{uiManager:t,pageIndex:n,div:r,accessibilityManager:i,annotationLayer:o,viewport:w,l10n:S}=e;_classPrivateMethodInitSpec(this,y),_classPrivateFieldInitSpec(this,c,void 0),_classPrivateFieldInitSpec(this,u,!1),_classPrivateFieldInitSpec(this,d,null),_classPrivateFieldInitSpec(this,h,this.pointerup.bind(this)),_classPrivateFieldInitSpec(this,p,this.pointerdown.bind(this)),_classPrivateFieldInitSpec(this,f,new Map),_classPrivateFieldInitSpec(this,m,!1),_classPrivateFieldInitSpec(this,g,!1),_classPrivateFieldInitSpec(this,v,!1),_classPrivateFieldInitSpec(this,_,void 0);const P=[s.FreeTextEditor,a.InkEditor,l.StampEditor];if(!b._initialized){b._initialized=!0;for(const e of P)e.initialize(S)}t.registerEditorTypes(P),_classPrivateFieldSet(_,this,t),this.pageIndex=n,this.div=r,_classPrivateFieldSet(c,this,i),_classPrivateFieldSet(d,this,o),this.viewport=w,_classPrivateFieldGet(_,this).addLayer(this)}get isEmpty(){return 0===_classPrivateFieldGet(f,this).size}updateToolbar(e){_classPrivateFieldGet(_,this).updateToolbar(e)}updateMode(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:_classPrivateFieldGet(_,this).getMode();_assertClassBrand(y,this,C).call(this),e===r.AnnotationEditorType.INK?(this.addInkEditorIfNeeded(!1),this.disableClick()):this.enableClick(),e!==r.AnnotationEditorType.NONE&&(this.div.classList.toggle("freeTextEditing",e===r.AnnotationEditorType.FREETEXT),this.div.classList.toggle("inkEditing",e===r.AnnotationEditorType.INK),this.div.classList.toggle("stampEditing",e===r.AnnotationEditorType.STAMP),this.div.hidden=!1)}addInkEditorIfNeeded(e){if(e||_classPrivateFieldGet(_,this).getMode()===r.AnnotationEditorType.INK){if(!e)for(const e of _classPrivateFieldGet(f,this).values())if(e.isEmpty())return void e.setInBackground();_assertClassBrand(y,this,S).call(this,{offsetX:0,offsetY:0},!1).setInBackground()}}setEditingState(e){_classPrivateFieldGet(_,this).setEditingState(e)}addCommands(e){_classPrivateFieldGet(_,this).addCommands(e)}enable(){this.div.style.pointerEvents="auto";const e=new Set;for(const n of _classPrivateFieldGet(f,this).values())n.enableEditing(),n.annotationElementId&&e.add(n.annotationElementId);if(!_classPrivateFieldGet(d,this))return;const t=_classPrivateFieldGet(d,this).getEditableAnnotations();for(const n of t){if(n.hide(),_classPrivateFieldGet(_,this).isDeletedAnnotationElement(n.data.id))continue;if(e.has(n.data.id))continue;const t=this.deserialize(n);t&&(this.addOrRebuild(t),t.enableEditing())}}disable(){_classPrivateFieldSet(v,this,!0),this.div.style.pointerEvents="none";const e=new Set;for(const n of _classPrivateFieldGet(f,this).values()){var t;n.disableEditing(),n.annotationElementId&&null===n.serialize()?(null===(t=this.getEditableAnnotation(n.annotationElementId))||void 0===t||t.show(),n.remove()):e.add(n.annotationElementId)}if(_classPrivateFieldGet(d,this)){const t=_classPrivateFieldGet(d,this).getEditableAnnotations();for(const n of t){const{id:t}=n.data;e.has(t)||_classPrivateFieldGet(_,this).isDeletedAnnotationElement(t)||n.show()}}_assertClassBrand(y,this,C).call(this),this.isEmpty&&(this.div.hidden=!0),_classPrivateFieldSet(v,this,!1)}getEditableAnnotation(e){var t;return(null===(t=_classPrivateFieldGet(d,this))||void 0===t?void 0:t.getEditableAnnotation(e))||null}setActiveEditor(e){_classPrivateFieldGet(_,this).getActive()!==e&&_classPrivateFieldGet(_,this).setActiveEditor(e)}enableClick(){this.div.addEventListener("pointerdown",_classPrivateFieldGet(p,this)),this.div.addEventListener("pointerup",_classPrivateFieldGet(h,this))}disableClick(){this.div.removeEventListener("pointerdown",_classPrivateFieldGet(p,this)),this.div.removeEventListener("pointerup",_classPrivateFieldGet(h,this))}attach(e){_classPrivateFieldGet(f,this).set(e.id,e);const{annotationElementId:t}=e;t&&_classPrivateFieldGet(_,this).isDeletedAnnotationElement(t)&&_classPrivateFieldGet(_,this).removeDeletedAnnotationElement(e)}detach(e){var t;_classPrivateFieldGet(f,this).delete(e.id),null===(t=_classPrivateFieldGet(c,this))||void 0===t||t.removePointerInTextLayer(e.contentDiv),!_classPrivateFieldGet(v,this)&&e.annotationElementId&&_classPrivateFieldGet(_,this).addDeletedAnnotationElement(e)}remove(e){this.detach(e),_classPrivateFieldGet(_,this).removeEditor(e),e.div.contains(document.activeElement)&&setTimeout((()=>{_classPrivateFieldGet(_,this).focusMainContainer()}),0),e.div.remove(),e.isAttachedToDOM=!1,_classPrivateFieldGet(g,this)||this.addInkEditorIfNeeded(!1)}changeParent(e){var t;e.parent!==this&&(e.annotationElementId&&(_classPrivateFieldGet(_,this).addDeletedAnnotationElement(e.annotationElementId),i.AnnotationEditor.deleteAnnotationElement(e),e.annotationElementId=null),this.attach(e),null===(t=e.parent)||void 0===t||t.detach(e),e.setParent(this),e.div&&e.isAttachedToDOM&&(e.div.remove(),this.div.append(e.div)))}add(e){if(this.changeParent(e),_classPrivateFieldGet(_,this).addEditor(e),this.attach(e),!e.isAttachedToDOM){const t=e.render();this.div.append(t),e.isAttachedToDOM=!0}e.fixAndSetPosition(),e.onceAdded(),_classPrivateFieldGet(_,this).addToAnnotationStorage(e)}moveEditorInDOM(e){var t;if(!e.isAttachedToDOM)return;const{activeElement:n}=document;e.div.contains(n)&&(e._focusEventsAllowed=!1,setTimeout((()=>{e.div.contains(document.activeElement)?e._focusEventsAllowed=!0:(e.div.addEventListener("focusin",(()=>{e._focusEventsAllowed=!0}),{once:!0}),n.focus())}),0)),e._structTreeParentId=null===(t=_classPrivateFieldGet(c,this))||void 0===t?void 0:t.moveElementInDOM(this.div,e.div,e.contentDiv,!0)}addOrRebuild(e){e.needsToBeRebuilt()?e.rebuild():this.add(e)}addUndoableEditor(e){this.addCommands({cmd:()=>e._uiManager.rebuild(e),undo:()=>{e.remove()},mustExec:!1})}getNextId(){return _classPrivateFieldGet(_,this).getId()}pasteEditor(e,t){_classPrivateFieldGet(_,this).updateToolbar(e),_classPrivateFieldGet(_,this).updateMode(e);const{offsetX:n,offsetY:r}=_assertClassBrand(y,this,P).call(this),i=this.getNextId(),s=_assertClassBrand(y,this,w).call(this,{parent:this,id:i,x:n,y:r,uiManager:_classPrivateFieldGet(_,this),isCentered:!0,...t});s&&this.add(s)}deserialize(e){var t;switch(null!==(t=e.annotationType)&&void 0!==t?t:e.annotationEditorType){case r.AnnotationEditorType.FREETEXT:return s.FreeTextEditor.deserialize(e,this,_classPrivateFieldGet(_,this));case r.AnnotationEditorType.INK:return a.InkEditor.deserialize(e,this,_classPrivateFieldGet(_,this));case r.AnnotationEditorType.STAMP:return l.StampEditor.deserialize(e,this,_classPrivateFieldGet(_,this))}return null}addNewEditor(){_assertClassBrand(y,this,S).call(this,_assertClassBrand(y,this,P).call(this),!0)}setSelected(e){_classPrivateFieldGet(_,this).setSelected(e)}toggleSelected(e){_classPrivateFieldGet(_,this).toggleSelected(e)}isSelected(e){return _classPrivateFieldGet(_,this).isSelected(e)}unselect(e){_classPrivateFieldGet(_,this).unselect(e)}pointerup(e){const{isMac:t}=r.FeatureTest.platform;0!==e.button||e.ctrlKey&&t||e.target===this.div&&_classPrivateFieldGet(m,this)&&(_classPrivateFieldSet(m,this,!1),_classPrivateFieldGet(u,this)?_classPrivateFieldGet(_,this).getMode()!==r.AnnotationEditorType.STAMP?_assertClassBrand(y,this,S).call(this,e,!1):_classPrivateFieldGet(_,this).unselectAll():_classPrivateFieldSet(u,this,!0))}pointerdown(e){if(_classPrivateFieldGet(m,this))return void _classPrivateFieldSet(m,this,!1);const{isMac:t}=r.FeatureTest.platform;if(0!==e.button||e.ctrlKey&&t)return;if(e.target!==this.div)return;_classPrivateFieldSet(m,this,!0);const n=_classPrivateFieldGet(_,this).getActive();_classPrivateFieldSet(u,this,!n||n.isEmpty())}findNewParent(e,t,n){const r=_classPrivateFieldGet(_,this).findParent(t,n);return null!==r&&r!==this&&(r.changeParent(e),!0)}destroy(){var e;(null===(e=_classPrivateFieldGet(_,this).getActive())||void 0===e?void 0:e.parent)===this&&(_classPrivateFieldGet(_,this).commitOrRemove(),_classPrivateFieldGet(_,this).setActiveEditor(null));for(const n of _classPrivateFieldGet(f,this).values()){var t;null===(t=_classPrivateFieldGet(c,this))||void 0===t||t.removePointerInTextLayer(n.contentDiv),n.setParent(null),n.isAttachedToDOM=!1,n.div.remove()}this.div=null,_classPrivateFieldGet(f,this).clear(),_classPrivateFieldGet(_,this).removeLayer(this)}render(e){let{viewport:t}=e;this.viewport=t,(0,o.setLayerDimensions)(this.div,t);for(const n of _classPrivateFieldGet(_,this).getEditors(this.pageIndex))this.add(n);this.updateMode()}update(e){let{viewport:t}=e;_classPrivateFieldGet(_,this).commitOrRemove(),this.viewport=t,(0,o.setLayerDimensions)(this.div,{rotation:t.rotation}),this.updateMode()}get pageDimensions(){const{pageWidth:e,pageHeight:t}=this.viewport.rawDims;return[e,t]}}function w(e){switch(_classPrivateFieldGet(_,this).getMode()){case r.AnnotationEditorType.FREETEXT:return new s.FreeTextEditor(e);case r.AnnotationEditorType.INK:return new a.InkEditor(e);case r.AnnotationEditorType.STAMP:return new l.StampEditor(e)}return null}function S(e,t){const n=this.getNextId(),r=_assertClassBrand(y,this,w).call(this,{parent:this,id:n,x:e.offsetX,y:e.offsetY,uiManager:_classPrivateFieldGet(_,this),isCentered:t});return r&&this.add(r),r}function P(){const{x:e,y:t,width:n,height:r}=this.div.getBoundingClientRect(),i=Math.max(0,e),s=Math.max(0,t),a=(i+Math.min(window.innerWidth,e+n))/2-e,o=(s+Math.min(window.innerHeight,t+r))/2-t,[l,c]=this.viewport.rotation%180===0?[a,o]:[o,a];return{offsetX:l,offsetY:c}}function C(){_classPrivateFieldSet(g,this,!0);for(const e of _classPrivateFieldGet(f,this).values())e.isEmpty()&&e.remove();_classPrivateFieldSet(g,this,!1)}_defineProperty(b,"_initialized",!1),t.AnnotationEditorLayer=b},(e,t,n)=>{var r;Object.defineProperty(t,"__esModule",{value:!0}),t.FreeTextEditor=void 0;var i=n(1),s=n(5),a=n(4),o=n(29),l=new WeakMap,c=new WeakMap,u=new WeakMap,d=new WeakMap,h=new WeakMap,p=new WeakMap,f=new WeakMap,m=new WeakMap,g=new WeakMap,v=new WeakSet;class _ extends a.AnnotationEditor{static get _keyboardManager(){const e=_.prototype,t=e=>e.isEmpty(),n=s.AnnotationEditorUIManager.TRANSLATE_SMALL,r=s.AnnotationEditorUIManager.TRANSLATE_BIG;return(0,i.shadow)(this,"_keyboardManager",new s.KeyboardManager([[["ctrl+s","mac+meta+s","ctrl+p","mac+meta+p"],e.commitOrRemove,{bubbles:!0}],[["ctrl+Enter","mac+meta+Enter","Escape","mac+Escape"],e.commitOrRemove],[["ArrowLeft","mac+ArrowLeft"],e._translateEmpty,{args:[-n,0],checker:t}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],e._translateEmpty,{args:[-r,0],checker:t}],[["ArrowRight","mac+ArrowRight"],e._translateEmpty,{args:[n,0],checker:t}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],e._translateEmpty,{args:[r,0],checker:t}],[["ArrowUp","mac+ArrowUp"],e._translateEmpty,{args:[0,-n],checker:t}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],e._translateEmpty,{args:[0,-r],checker:t}],[["ArrowDown","mac+ArrowDown"],e._translateEmpty,{args:[0,n],checker:t}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],e._translateEmpty,{args:[0,r],checker:t}]]))}constructor(e){super({...e,name:"freeTextEditor"}),_classPrivateMethodInitSpec(this,v),_classPrivateFieldInitSpec(this,l,this.editorDivBlur.bind(this)),_classPrivateFieldInitSpec(this,c,this.editorDivFocus.bind(this)),_classPrivateFieldInitSpec(this,u,this.editorDivInput.bind(this)),_classPrivateFieldInitSpec(this,d,this.editorDivKeydown.bind(this)),_classPrivateFieldInitSpec(this,h,void 0),_classPrivateFieldInitSpec(this,p,""),_classPrivateFieldInitSpec(this,f,"".concat(this.id,"-editor")),_classPrivateFieldInitSpec(this,m,void 0),_classPrivateFieldInitSpec(this,g,null),_classPrivateFieldSet(h,this,e.color||_._defaultColor||a.AnnotationEditor._defaultLineColor),_classPrivateFieldSet(m,this,e.fontSize||_._defaultFontSize)}static initialize(e){a.AnnotationEditor.initialize(e,{strings:["free_text2_default_content","editor_free_text2_aria_label"]});const t=getComputedStyle(document.documentElement);this._internalPadding=parseFloat(t.getPropertyValue("--freetext-padding"))}static updateDefaultParams(e,t){switch(e){case i.AnnotationEditorParamsType.FREETEXT_SIZE:_._defaultFontSize=t;break;case i.AnnotationEditorParamsType.FREETEXT_COLOR:_._defaultColor=t}}updateParams(e,t){switch(e){case i.AnnotationEditorParamsType.FREETEXT_SIZE:_assertClassBrand(v,this,y).call(this,t);break;case i.AnnotationEditorParamsType.FREETEXT_COLOR:_assertClassBrand(v,this,b).call(this,t)}}static get defaultPropertiesToUpdate(){return[[i.AnnotationEditorParamsType.FREETEXT_SIZE,_._defaultFontSize],[i.AnnotationEditorParamsType.FREETEXT_COLOR,_._defaultColor||a.AnnotationEditor._defaultLineColor]]}get propertiesToUpdate(){return[[i.AnnotationEditorParamsType.FREETEXT_SIZE,_classPrivateFieldGet(m,this)],[i.AnnotationEditorParamsType.FREETEXT_COLOR,_classPrivateFieldGet(h,this)]]}_translateEmpty(e,t){this._uiManager.translateSelectedEditors(e,t,!0)}getInitialTranslation(){const e=this.parentScale;return[-_._internalPadding*e,-(_._internalPadding+_classPrivateFieldGet(m,this))*e]}rebuild(){this.parent&&(super.rebuild(),null!==this.div&&(this.isAttachedToDOM||this.parent.add(this)))}enableEditMode(){this.isInEditMode()||(this.parent.setEditingState(!1),this.parent.updateToolbar(i.AnnotationEditorType.FREETEXT),super.enableEditMode(),this.overlayDiv.classList.remove("enabled"),this.editorDiv.contentEditable=!0,this._isDraggable=!1,this.div.removeAttribute("aria-activedescendant"),this.editorDiv.addEventListener("keydown",_classPrivateFieldGet(d,this)),this.editorDiv.addEventListener("focus",_classPrivateFieldGet(c,this)),this.editorDiv.addEventListener("blur",_classPrivateFieldGet(l,this)),this.editorDiv.addEventListener("input",_classPrivateFieldGet(u,this)))}disableEditMode(){this.isInEditMode()&&(this.parent.setEditingState(!0),super.disableEditMode(),this.overlayDiv.classList.add("enabled"),this.editorDiv.contentEditable=!1,this.div.setAttribute("aria-activedescendant",_classPrivateFieldGet(f,this)),this._isDraggable=!0,this.editorDiv.removeEventListener("keydown",_classPrivateFieldGet(d,this)),this.editorDiv.removeEventListener("focus",_classPrivateFieldGet(c,this)),this.editorDiv.removeEventListener("blur",_classPrivateFieldGet(l,this)),this.editorDiv.removeEventListener("input",_classPrivateFieldGet(u,this)),this.div.focus({preventScroll:!0}),this.isEditing=!1,this.parent.div.classList.add("freeTextEditing"))}focusin(e){this._focusEventsAllowed&&(super.focusin(e),e.target!==this.editorDiv&&this.editorDiv.focus())}onceAdded(){var e;this.width?_assertClassBrand(v,this,E).call(this):(this.enableEditMode(),this.editorDiv.focus(),null!==(e=this._initialOptions)&&void 0!==e&&e.isCentered&&this.center(),this._initialOptions=null)}isEmpty(){return!this.editorDiv||""===this.editorDiv.innerText.trim()}remove(){this.isEditing=!1,this.parent&&(this.parent.setEditingState(!0),this.parent.div.classList.add("freeTextEditing")),super.remove()}commit(){if(!this.isInEditMode())return;super.commit(),this.disableEditMode();const e=_classPrivateFieldGet(p,this),t=_classPrivateFieldSet(p,this,_assertClassBrand(v,this,w).call(this).trimEnd());if(e===t)return;const n=e=>{_classPrivateFieldSet(p,this,e),e?(_assertClassBrand(v,this,P).call(this),this._uiManager.rebuild(this),_assertClassBrand(v,this,S).call(this)):this.remove()};this.addCommands({cmd:()=>{n(t)},undo:()=>{n(e)},mustExec:!1}),_assertClassBrand(v,this,S).call(this)}shouldGetKeyboardEvents(){return this.isInEditMode()}enterInEditMode(){this.enableEditMode(),this.editorDiv.focus()}dblclick(e){this.enterInEditMode()}keydown(e){e.target===this.div&&"Enter"===e.key&&(this.enterInEditMode(),e.preventDefault())}editorDivKeydown(e){_._keyboardManager.exec(this,e)}editorDivFocus(e){this.isEditing=!0}editorDivBlur(e){this.isEditing=!1}editorDivInput(e){this.parent.div.classList.toggle("freeTextEditing",this.isEmpty())}disableEditing(){this.editorDiv.setAttribute("role","comment"),this.editorDiv.removeAttribute("aria-multiline")}enableEditing(){this.editorDiv.setAttribute("role","textbox"),this.editorDiv.setAttribute("aria-multiline",!0)}render(){if(this.div)return this.div;let e,t;this.width&&(e=this.x,t=this.y),super.render(),this.editorDiv=document.createElement("div"),this.editorDiv.className="internal",this.editorDiv.setAttribute("id",_classPrivateFieldGet(f,this)),this.enableEditing(),a.AnnotationEditor._l10nPromise.get("editor_free_text2_aria_label").then((e=>{var t;return null===(t=this.editorDiv)||void 0===t?void 0:t.setAttribute("aria-label",e)})),a.AnnotationEditor._l10nPromise.get("free_text2_default_content").then((e=>{var t;return null===(t=this.editorDiv)||void 0===t?void 0:t.setAttribute("default-content",e)})),this.editorDiv.contentEditable=!0;const{style:n}=this.editorDiv;if(n.fontSize="calc(".concat(_classPrivateFieldGet(m,this),"px * var(--scale-factor))"),n.color=_classPrivateFieldGet(h,this),this.div.append(this.editorDiv),this.overlayDiv=document.createElement("div"),this.overlayDiv.classList.add("overlay","enabled"),this.div.append(this.overlayDiv),(0,s.bindEvents)(this,this.div,["dblclick","keydown"]),this.width){const[n,r]=this.parentDimensions;if(this.annotationElementId){const{position:i}=_classPrivateFieldGet(g,this);let[s,a]=this.getInitialTranslation();[s,a]=this.pageTranslationToScreen(s,a);const[o,l]=this.pageDimensions,[c,u]=this.pageTranslation;let d,h;switch(this.rotation){case 0:d=e+(i[0]-c)/o,h=t+this.height-(i[1]-u)/l;break;case 90:d=e+(i[0]-c)/o,h=t-(i[1]-u)/l,[s,a]=[a,-s];break;case 180:d=e-this.width+(i[0]-c)/o,h=t-(i[1]-u)/l,[s,a]=[-s,-a];break;case 270:d=e+(i[0]-c-this.height*l)/o,h=t+(i[1]-u-this.width*o)/l,[s,a]=[-a,s]}this.setAt(d*n,h*r,s,a)}else this.setAt(e*n,t*r,this.width*n,this.height*r);_assertClassBrand(v,this,P).call(this),this._isDraggable=!0,this.editorDiv.contentEditable=!1}else this._isDraggable=!1,this.editorDiv.contentEditable=!0;return this.div}get contentDiv(){return this.editorDiv}static deserialize(e,t,n){let r=null;if(e instanceof o.FreeTextAnnotationElement){const{data:{defaultAppearanceData:{fontSize:t,fontColor:n},rect:s,rotation:a,id:o},textContent:l,textPosition:c,parent:{page:{pageNumber:u}}}=e;if(!l||0===l.length)return null;r=e={annotationType:i.AnnotationEditorType.FREETEXT,color:Array.from(n),fontSize:t,value:l.join("\n"),position:c,pageIndex:u-1,rect:s,rotation:a,id:o,deleted:!1}}const s=super.deserialize(e,t,n);return _classPrivateFieldSet(m,s,e.fontSize),_classPrivateFieldSet(h,s,i.Util.makeHexColor(...e.color)),_classPrivateFieldSet(p,s,e.value),s.annotationElementId=e.id||null,_classPrivateFieldSet(g,s,r),s}serialize(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(this.isEmpty())return null;if(this.deleted)return{pageIndex:this.pageIndex,id:this.annotationElementId,deleted:!0};const t=_._internalPadding*this.parentScale,n=this.getRect(t,t),r=a.AnnotationEditor._colorManager.convert(this.isAttachedToDOM?getComputedStyle(this.editorDiv).color:_classPrivateFieldGet(h,this)),s={annotationType:i.AnnotationEditorType.FREETEXT,color:r,fontSize:_classPrivateFieldGet(m,this),value:_classPrivateFieldGet(p,this),pageIndex:this.pageIndex,rect:n,rotation:this.rotation,structTreeParentId:this._structTreeParentId};return e?s:this.annotationElementId&&!_assertClassBrand(v,this,C).call(this,s)?null:(s.id=this.annotationElementId,s)}}function y(e){const t=e=>{this.editorDiv.style.fontSize="calc(".concat(e,"px * var(--scale-factor))"),this.translate(0,-(e-_classPrivateFieldGet(m,this))*this.parentScale),_classPrivateFieldSet(m,this,e),_assertClassBrand(v,this,S).call(this)},n=_classPrivateFieldGet(m,this);this.addCommands({cmd:()=>{t(e)},undo:()=>{t(n)},mustExec:!0,type:i.AnnotationEditorParamsType.FREETEXT_SIZE,overwriteIfSameType:!0,keepUndo:!0})}function b(e){const t=_classPrivateFieldGet(h,this);this.addCommands({cmd:()=>{_classPrivateFieldSet(h,this,this.editorDiv.style.color=e)},undo:()=>{_classPrivateFieldSet(h,this,this.editorDiv.style.color=t)},mustExec:!0,type:i.AnnotationEditorParamsType.FREETEXT_COLOR,overwriteIfSameType:!0,keepUndo:!0})}function w(){const e=this.editorDiv.getElementsByTagName("div");if(0===e.length)return this.editorDiv.innerText;const t=[];for(const n of e)t.push(n.innerText.replace(/\r\n?|\n/,""));return t.join("\n")}function S(){const[e,t]=this.parentDimensions;let n;if(this.isAttachedToDOM)n=this.div.getBoundingClientRect();else{const{currentLayer:e,div:t}=this,r=t.style.display;t.style.display="hidden",e.div.append(this.div),n=t.getBoundingClientRect(),t.remove(),t.style.display=r}this.rotation%180===this.parentRotation%180?(this.width=n.width/e,this.height=n.height/t):(this.width=n.height/e,this.height=n.width/t),this.fixAndSetPosition()}function P(){if(this.editorDiv.replaceChildren(),_classPrivateFieldGet(p,this))for(const e of _classPrivateFieldGet(p,this).split("\n")){const t=document.createElement("div");t.append(e?document.createTextNode(e):document.createElement("br")),this.editorDiv.append(t)}}function C(e){const{value:t,fontSize:n,color:r,rect:i,pageIndex:s}=_classPrivateFieldGet(g,this);return e.value!==t||e.fontSize!==n||e.rect.some(((e,t)=>Math.abs(e-i[t])>=1))||e.color.some(((e,t)=>e!==r[t]))||e.pageIndex!==s}function E(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(!this.annotationElementId)return;if(_assertClassBrand(v,this,S).call(this),!e&&(0===this.width||0===this.height))return void setTimeout((()=>_assertClassBrand(v,this,E).call(this,!0)),0);const t=r._internalPadding*this.parentScale;_classPrivateFieldGet(g,this).rect=this.getRect(t,t)}r=_,_defineProperty(_,"_freeTextDefaultContent",""),_defineProperty(_,"_internalPadding",0),_defineProperty(_,"_defaultColor",null),_defineProperty(_,"_defaultFontSize",10),_defineProperty(_,"_type","freetext"),t.FreeTextEditor=_},(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.StampAnnotationElement=t.InkAnnotationElement=t.FreeTextAnnotationElement=t.AnnotationLayer=void 0;var r=n(1),i=n(6),s=n(3),a=n(30),o=n(31),l=n(32);const c=1e3,u=new WeakSet;function d(e){return{width:e[2]-e[0],height:e[3]-e[1]}}class h{static create(e){switch(e.data.annotationType){case r.AnnotationType.LINK:return new g(e);case r.AnnotationType.TEXT:return new y(e);case r.AnnotationType.WIDGET:switch(e.data.fieldType){case"Tx":return new w(e);case"Btn":return e.data.radioButton?new C(e):e.data.checkBox?new P(e):new E(e);case"Ch":return new x(e);case"Sig":return new S(e)}return new b(e);case r.AnnotationType.POPUP:return new k(e);case r.AnnotationType.FREETEXT:return new J(e);case r.AnnotationType.LINE:return new Z(e);case r.AnnotationType.SQUARE:return new te(e);case r.AnnotationType.CIRCLE:return new re(e);case r.AnnotationType.POLYLINE:return new se(e);case r.AnnotationType.CARET:return new oe(e);case r.AnnotationType.INK:return new ce(e);case r.AnnotationType.POLYGON:return new ae(e);case r.AnnotationType.HIGHLIGHT:return new ue(e);case r.AnnotationType.UNDERLINE:return new de(e);case r.AnnotationType.SQUIGGLY:return new he(e);case r.AnnotationType.STRIKEOUT:return new pe(e);case r.AnnotationType.STAMP:return new fe(e);case r.AnnotationType.FILEATTACHMENT:return new ve(e);default:return new f(e)}}}var p=new WeakMap;class f{constructor(e){let{isRenderable:t=!1,ignoreBorder:n=!1,createQuadrilaterals:r=!1}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};_classPrivateFieldInitSpec(this,p,!1),this.isRenderable=t,this.data=e.data,this.layer=e.layer,this.linkService=e.linkService,this.downloadManager=e.downloadManager,this.imageResourcesPath=e.imageResourcesPath,this.renderForms=e.renderForms,this.svgFactory=e.svgFactory,this.annotationStorage=e.annotationStorage,this.enableScripting=e.enableScripting,this.hasJSActions=e.hasJSActions,this._fieldObjects=e.fieldObjects,this.parent=e.parent,t&&(this.container=this._createContainer(n)),r&&this._createQuadrilaterals()}static _hasPopupData(e){let{titleObj:t,contentsObj:n,richText:r}=e;return!!(null!==t&&void 0!==t&&t.str||null!==n&&void 0!==n&&n.str||null!==r&&void 0!==r&&r.str)}get hasPopupData(){return f._hasPopupData(this.data)}_createContainer(e){const{data:t,parent:{page:n,viewport:i}}=this,s=document.createElement("section");s.setAttribute("data-annotation-id",t.id),this instanceof b||(s.tabIndex=c),s.style.zIndex=this.parent.zIndex++,this.data.popupRef&&s.setAttribute("aria-haspopup","dialog"),t.noRotate&&s.classList.add("norotate");const{pageWidth:a,pageHeight:o,pageX:l,pageY:u}=i.rawDims;if(!t.rect||this instanceof k){const{rotation:e}=t;return t.hasOwnCanvas||0===e||this.setRotation(e,s),s}const{width:h,height:f}=d(t.rect),m=r.Util.normalizeRect([t.rect[0],n.view[3]-t.rect[1]+n.view[1],t.rect[2],n.view[3]-t.rect[3]+n.view[1]]);if(!e&&t.borderStyle.width>0){s.style.borderWidth="".concat(t.borderStyle.width,"px");const e=t.borderStyle.horizontalCornerRadius,n=t.borderStyle.verticalCornerRadius;if(e>0||n>0){const t="calc(".concat(e,"px * var(--scale-factor)) / calc(").concat(n,"px * var(--scale-factor))");s.style.borderRadius=t}else if(this instanceof C){const e="calc(".concat(h,"px * var(--scale-factor)) / calc(").concat(f,"px * var(--scale-factor))");s.style.borderRadius=e}switch(t.borderStyle.style){case r.AnnotationBorderStyleType.SOLID:s.style.borderStyle="solid";break;case r.AnnotationBorderStyleType.DASHED:s.style.borderStyle="dashed";break;case r.AnnotationBorderStyleType.BEVELED:(0,r.warn)("Unimplemented border style: beveled");break;case r.AnnotationBorderStyleType.INSET:(0,r.warn)("Unimplemented border style: inset");break;case r.AnnotationBorderStyleType.UNDERLINE:s.style.borderBottomStyle="solid"}const i=t.borderColor||null;i?(_classPrivateFieldSet(p,this,!0),s.style.borderColor=r.Util.makeHexColor(0|i[0],0|i[1],0|i[2])):s.style.borderWidth=0}s.style.left="".concat(100*(m[0]-l)/a,"%"),s.style.top="".concat(100*(m[1]-u)/o,"%");const{rotation:g}=t;return t.hasOwnCanvas||0===g?(s.style.width="".concat(100*h/a,"%"),s.style.height="".concat(100*f/o,"%")):this.setRotation(g,s),s}setRotation(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.container;if(!this.data.rect)return;const{pageWidth:n,pageHeight:r}=this.parent.viewport.rawDims,{width:i,height:s}=d(this.data.rect);let a,o;e%180===0?(a=100*i/n,o=100*s/r):(a=100*s/n,o=100*i/r),t.style.width="".concat(a,"%"),t.style.height="".concat(o,"%"),t.setAttribute("data-main-rotation",(360-e)%360)}get _commonActions(){const e=(e,t,n)=>{const r=n.detail[e],i=r[0],s=r.slice(1);n.target.style[t]=a.ColorConverters["".concat(i,"_HTML")](s),this.annotationStorage.setValue(this.data.id,{[t]:a.ColorConverters["".concat(i,"_rgb")](s)})};return(0,r.shadow)(this,"_commonActions",{display:e=>{const{display:t}=e.detail,n=t%2===1;this.container.style.visibility=n?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noView:n,noPrint:1===t||2===t})},print:e=>{this.annotationStorage.setValue(this.data.id,{noPrint:!e.detail.print})},hidden:e=>{const{hidden:t}=e.detail;this.container.style.visibility=t?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noPrint:t,noView:t})},focus:e=>{setTimeout((()=>e.target.focus({preventScroll:!1})),0)},userName:e=>{e.target.title=e.detail.userName},readonly:e=>{e.target.disabled=e.detail.readonly},required:e=>{this._setRequired(e.target,e.detail.required)},bgColor:t=>{e("bgColor","backgroundColor",t)},fillColor:t=>{e("fillColor","backgroundColor",t)},fgColor:t=>{e("fgColor","color",t)},textColor:t=>{e("textColor","color",t)},borderColor:t=>{e("borderColor","borderColor",t)},strokeColor:t=>{e("strokeColor","borderColor",t)},rotation:e=>{const t=e.detail.rotation;this.setRotation(t),this.annotationStorage.setValue(this.data.id,{rotation:t})}})}_dispatchEventFromSandbox(e,t){const n=this._commonActions;for(const r of Object.keys(t.detail)){const i=e[r]||n[r];null===i||void 0===i||i(t)}}_setDefaultPropertiesFromJS(e){if(!this.enableScripting)return;const t=this.annotationStorage.getRawValue(this.data.id);if(!t)return;const n=this._commonActions;for(const[r,i]of Object.entries(t)){const s=n[r];s&&(s({detail:{[r]:i},target:e}),delete t[r])}}_createQuadrilaterals(){if(!this.container)return;const{quadPoints:e}=this.data;if(!e)return;const[t,n,r,i]=this.data.rect;if(1===e.length){const[,{x:s,y:a},{x:o,y:l}]=e[0];if(r===s&&i===a&&t===o&&n===l)return}const{style:s}=this.container;let a;if(_classPrivateFieldGet(p,this)){const{borderColor:e,borderWidth:t}=s;s.borderWidth=0,a=["url('data:image/svg+xml;utf8,",'<svg xmlns="http://www.w3.org/2000/svg"',' preserveAspectRatio="none" viewBox="0 0 1 1">','<g fill="transparent" stroke="'.concat(e,'" stroke-width="').concat(t,'">')],this.container.classList.add("hasBorder")}const o=r-t,l=i-n,{svgFactory:c}=this,u=c.createElement("svg");u.classList.add("quadrilateralsContainer"),u.setAttribute("width",0),u.setAttribute("height",0);const d=c.createElement("defs");u.append(d);const h=c.createElement("clipPath"),f="clippath_".concat(this.data.id);h.setAttribute("id",f),h.setAttribute("clipPathUnits","objectBoundingBox"),d.append(h);for(const[,{x:p,y:g},{x:v,y:_}]of e){var m;const e=c.createElement("rect"),n=(v-t)/o,r=(i-g)/l,s=(p-v)/o,u=(g-_)/l;e.setAttribute("x",n),e.setAttribute("y",r),e.setAttribute("width",s),e.setAttribute("height",u),h.append(e),null===(m=a)||void 0===m||m.push('<rect vector-effect="non-scaling-stroke" x="'.concat(n,'" y="').concat(r,'" width="').concat(s,'" height="').concat(u,'"/>'))}_classPrivateFieldGet(p,this)&&(a.push("</g></svg>')"),s.backgroundImage=a.join("")),this.container.append(u),this.container.style.clipPath="url(#".concat(f,")")}_createPopup(){const{container:e,data:t}=this;e.setAttribute("aria-haspopup","dialog");const n=new k({data:{color:t.color,titleObj:t.titleObj,modificationDate:t.modificationDate,contentsObj:t.contentsObj,richText:t.richText,parentRect:t.rect,borderStyle:0,id:"popup_".concat(t.id),rotation:t.rotation},parent:this.parent,elements:[this]});this.parent.div.append(n.render())}render(){(0,r.unreachable)("Abstract method `AnnotationElement.render` called")}_getElementsByName(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;const n=[];if(this._fieldObjects){const i=this._fieldObjects[e];if(i)for(const{page:e,id:s,exportValues:a}of i){if(-1===e)continue;if(s===t)continue;const i="string"===typeof a?a:null,o=document.querySelector('[data-element-id="'.concat(s,'"]'));!o||u.has(o)?n.push({id:s,exportValue:i,domElement:o}):(0,r.warn)("_getElementsByName - element not allowed: ".concat(s))}return n}for(const r of document.getElementsByName(e)){const{exportValue:e}=r,i=r.getAttribute("data-element-id");i!==t&&u.has(r)&&n.push({id:i,exportValue:e,domElement:r})}return n}show(){var e;this.container&&(this.container.hidden=!1),null===(e=this.popup)||void 0===e||e.maybeShow()}hide(){var e;this.container&&(this.container.hidden=!0),null===(e=this.popup)||void 0===e||e.forceHide()}getElementsToTriggerPopup(){return this.container}addHighlightArea(){const e=this.getElementsToTriggerPopup();if(Array.isArray(e))for(const t of e)t.classList.add("highlightArea");else e.classList.add("highlightArea")}_editOnDoubleClick(){const{annotationEditorType:e,data:{id:t}}=this;this.container.addEventListener("dblclick",(()=>{var n;null===(n=this.linkService.eventBus)||void 0===n||n.dispatch("switchannotationeditormode",{source:this,mode:e,editId:t})}))}}var m=new WeakSet;class g extends f{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;super(e,{isRenderable:!0,ignoreBorder:!(null===t||void 0===t||!t.ignoreBorder),createQuadrilaterals:!0}),_classPrivateMethodInitSpec(this,m),this.isTooltipOnly=e.data.isTooltipOnly}render(){const{data:e,linkService:t}=this,n=document.createElement("a");n.setAttribute("data-element-id",e.id);let r=!1;return e.url?(t.addLinkAttributes(n,e.url,e.newWindow),r=!0):e.action?(this._bindNamedAction(n,e.action),r=!0):e.attachment?(this._bindAttachment(n,e.attachment),r=!0):e.setOCGState?(_assertClassBrand(m,this,_).call(this,n,e.setOCGState),r=!0):e.dest?(this._bindLink(n,e.dest),r=!0):(e.actions&&(e.actions.Action||e.actions["Mouse Up"]||e.actions["Mouse Down"])&&this.enableScripting&&this.hasJSActions&&(this._bindJSAction(n,e),r=!0),e.resetForm?(this._bindResetFormAction(n,e.resetForm),r=!0):this.isTooltipOnly&&!r&&(this._bindLink(n,""),r=!0)),this.container.classList.add("linkAnnotation"),r&&this.container.append(n),this.container}_bindLink(e,t){e.href=this.linkService.getDestinationHash(t),e.onclick=()=>(t&&this.linkService.goToDestination(t),!1),(t||""===t)&&_assertClassBrand(m,this,v).call(this)}_bindNamedAction(e,t){e.href=this.linkService.getAnchorUrl(""),e.onclick=()=>(this.linkService.executeNamedAction(t),!1),_assertClassBrand(m,this,v).call(this)}_bindAttachment(e,t){e.href=this.linkService.getAnchorUrl(""),e.onclick=()=>{var e;return null===(e=this.downloadManager)||void 0===e||e.openOrDownloadData(this.container,t.content,t.filename),!1},_assertClassBrand(m,this,v).call(this)}_bindJSAction(e,t){e.href=this.linkService.getAnchorUrl("");const n=new Map([["Action","onclick"],["Mouse Up","onmouseup"],["Mouse Down","onmousedown"]]);for(const r of Object.keys(t.actions)){const i=n.get(r);i&&(e[i]=()=>{var e;return null===(e=this.linkService.eventBus)||void 0===e||e.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t.id,name:r}}),!1})}e.onclick||(e.onclick=()=>!1),_assertClassBrand(m,this,v).call(this)}_bindResetFormAction(e,t){const n=e.onclick;if(n||(e.href=this.linkService.getAnchorUrl("")),_assertClassBrand(m,this,v).call(this),!this._fieldObjects)return(0,r.warn)('_bindResetFormAction - "resetForm" action not supported, ensure that the `fieldObjects` parameter is provided.'),void(n||(e.onclick=()=>!1));e.onclick=()=>{null===n||void 0===n||n();const{fields:e,refs:i,include:s}=t,a=[];if(0!==e.length||0!==i.length){const t=new Set(i);for(const n of e){const e=this._fieldObjects[n]||[];for(const{id:n}of e)t.add(n)}for(const e of Object.values(this._fieldObjects))for(const n of e)t.has(n.id)===s&&a.push(n)}else for(const t of Object.values(this._fieldObjects))a.push(...t);const o=this.annotationStorage,l=[];for(const t of a){const{id:e}=t;switch(l.push(e),t.type){case"text":{const n=t.defaultValue||"";o.setValue(e,{value:n});break}case"checkbox":case"radiobutton":{const n=t.defaultValue===t.exportValues;o.setValue(e,{value:n});break}case"combobox":case"listbox":{const n=t.defaultValue||"";o.setValue(e,{value:n});break}default:continue}const n=document.querySelector('[data-element-id="'.concat(e,'"]'));n&&(u.has(n)?n.dispatchEvent(new Event("resetform")):(0,r.warn)("_bindResetFormAction - element not allowed: ".concat(e)))}var c;return this.enableScripting&&(null===(c=this.linkService.eventBus)||void 0===c||c.dispatch("dispatcheventinsandbox",{source:this,detail:{id:"app",ids:l,name:"ResetForm"}})),!1}}}function v(){this.container.setAttribute("data-internal-link","")}function _(e,t){e.href=this.linkService.getAnchorUrl(""),e.onclick=()=>(this.linkService.executeSetOCGState(t),!1),_assertClassBrand(m,this,v).call(this)}class y extends f{constructor(e){super(e,{isRenderable:!0})}render(){this.container.classList.add("textAnnotation");const e=document.createElement("img");return e.src=this.imageResourcesPath+"annotation-"+this.data.name.toLowerCase()+".svg",e.alt="[{{type}} Annotation]",e.dataset.l10nId="text_annotation_type",e.dataset.l10nArgs=JSON.stringify({type:this.data.name}),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.append(e),this.container}}class b extends f{render(){return this.data.alternativeText&&(this.container.title=this.data.alternativeText),this.container}showElementAndHideCanvas(e){var t;this.data.hasOwnCanvas&&("CANVAS"===(null===(t=e.previousSibling)||void 0===t?void 0:t.nodeName)&&(e.previousSibling.hidden=!0),e.hidden=!1)}_getKeyModifier(e){const{isWin:t,isMac:n}=r.FeatureTest.platform;return t&&e.ctrlKey||n&&e.metaKey}_setEventListener(e,t,n,r,i){n.includes("mouse")?e.addEventListener(n,(e=>{var t;null===(t=this.linkService.eventBus)||void 0===t||t.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:r,value:i(e),shift:e.shiftKey,modifier:this._getKeyModifier(e)}})})):e.addEventListener(n,(e=>{var s;if("blur"===n){if(!t.focused||!e.relatedTarget)return;t.focused=!1}else if("focus"===n){if(t.focused)return;t.focused=!0}i&&(null===(s=this.linkService.eventBus)||void 0===s||s.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:r,value:i(e)}}))}))}_setEventListeners(e,t,n,r){for(const[o,l]of n){var i,s,a;("Action"===l||null!==(i=this.data.actions)&&void 0!==i&&i[l])&&("Focus"!==l&&"Blur"!==l||t||(t={focused:!1}),this._setEventListener(e,t,o,l,r),"Focus"!==l||null!==(s=this.data.actions)&&void 0!==s&&s.Blur?"Blur"!==l||null!==(a=this.data.actions)&&void 0!==a&&a.Focus||this._setEventListener(e,t,"focus","Focus",null):this._setEventListener(e,t,"blur","Blur",null))}}_setBackgroundColor(e){const t=this.data.backgroundColor||null;e.style.backgroundColor=null===t?"transparent":r.Util.makeHexColor(t[0],t[1],t[2])}_setTextStyle(e){const t=["left","center","right"],{fontColor:n}=this.data.defaultAppearanceData,i=this.data.defaultAppearanceData.fontSize||9,s=e.style;let a;const o=e=>Math.round(10*e)/10;if(this.data.multiLine){const e=Math.abs(this.data.rect[3]-this.data.rect[1]-2),t=e/(Math.round(e/(r.LINE_FACTOR*i))||1);a=Math.min(i,o(t/r.LINE_FACTOR))}else{const e=Math.abs(this.data.rect[3]-this.data.rect[1]-2);a=Math.min(i,o(e/r.LINE_FACTOR))}s.fontSize="calc(".concat(a,"px * var(--scale-factor))"),s.color=r.Util.makeHexColor(n[0],n[1],n[2]),null!==this.data.textAlignment&&(s.textAlign=t[this.data.textAlignment])}_setRequired(e,t){t?e.setAttribute("required",!0):e.removeAttribute("required"),e.setAttribute("aria-required",t)}}class w extends b{constructor(e){super(e,{isRenderable:e.renderForms||!e.data.hasAppearance&&!!e.data.fieldValue})}setPropertyOnSiblings(e,t,n,r){const i=this.annotationStorage;for(const s of this._getElementsByName(e.name,e.id))s.domElement&&(s.domElement[t]=n),i.setValue(s.id,{[r]:n})}render(){const e=this.annotationStorage,t=this.data.id;this.container.classList.add("textWidgetAnnotation");let n=null;if(this.renderForms){var r;const o=e.getValue(t,{value:this.data.fieldValue});let l=o.value||"";const d=e.getValue(t,{charLimit:this.data.maxLen}).charLimit;d&&l.length>d&&(l=l.slice(0,d));let h=o.formattedValue||(null===(r=this.data.textContent)||void 0===r?void 0:r.join("\n"))||null;h&&this.data.comb&&(h=h.replaceAll(/\s+/g,""));const p={userValue:l,formattedValue:h,lastCommittedValue:null,commitKey:1,focused:!1};var i,s;this.data.multiLine?(n=document.createElement("textarea"),n.textContent=null!==(i=h)&&void 0!==i?i:l,this.data.doNotScroll&&(n.style.overflowY="hidden")):(n=document.createElement("input"),n.type="text",n.setAttribute("value",null!==(s=h)&&void 0!==s?s:l),this.data.doNotScroll&&(n.style.overflowX="hidden")),this.data.hasOwnCanvas&&(n.hidden=!0),u.add(n),n.setAttribute("data-element-id",t),n.disabled=this.data.readOnly,n.name=this.data.fieldName,n.tabIndex=c,this._setRequired(n,this.data.required),d&&(n.maxLength=d),n.addEventListener("input",(r=>{e.setValue(t,{value:r.target.value}),this.setPropertyOnSiblings(n,"value",r.target.value,"value"),p.formattedValue=null})),n.addEventListener("resetform",(e=>{var t;const r=null!==(t=this.data.defaultFieldValue)&&void 0!==t?t:"";n.value=p.userValue=r,p.formattedValue=null}));let f=e=>{const{formattedValue:t}=p;null!==t&&void 0!==t&&(e.target.value=t),e.target.scrollLeft=0};if(this.enableScripting&&this.hasJSActions){var a;n.addEventListener("focus",(e=>{if(p.focused)return;const{target:t}=e;p.userValue&&(t.value=p.userValue),p.lastCommittedValue=t.value,p.commitKey=1,p.focused=!0})),n.addEventListener("updatefromsandbox",(n=>{this.showElementAndHideCanvas(n.target);const r={value(n){var r;p.userValue=null!==(r=n.detail.value)&&void 0!==r?r:"",e.setValue(t,{value:p.userValue.toString()}),n.target.value=p.userValue},formattedValue(n){const{formattedValue:r}=n.detail;p.formattedValue=r,null!==r&&void 0!==r&&n.target!==document.activeElement&&(n.target.value=r),e.setValue(t,{formattedValue:r})},selRange(e){e.target.setSelectionRange(...e.detail.selRange)},charLimit:n=>{var r;const{charLimit:i}=n.detail,{target:s}=n;if(0===i)return void s.removeAttribute("maxLength");s.setAttribute("maxLength",i);let a=p.userValue;!a||a.length<=i||(a=a.slice(0,i),s.value=p.userValue=a,e.setValue(t,{value:a}),null===(r=this.linkService.eventBus)||void 0===r||r.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:a,willCommit:!0,commitKey:1,selStart:s.selectionStart,selEnd:s.selectionEnd}}))}};this._dispatchEventFromSandbox(r,n)})),n.addEventListener("keydown",(e=>{var n;p.commitKey=1;let r=-1;if("Escape"===e.key?r=0:"Enter"!==e.key||this.data.multiLine?"Tab"===e.key&&(p.commitKey=3):r=2,-1===r)return;const{value:i}=e.target;p.lastCommittedValue!==i&&(p.lastCommittedValue=i,p.userValue=i,null===(n=this.linkService.eventBus)||void 0===n||n.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:i,willCommit:!0,commitKey:r,selStart:e.target.selectionStart,selEnd:e.target.selectionEnd}}))}));const r=f;f=null,n.addEventListener("blur",(e=>{if(!p.focused||!e.relatedTarget)return;p.focused=!1;const{value:n}=e.target;var i;p.userValue=n,p.lastCommittedValue!==n&&(null===(i=this.linkService.eventBus)||void 0===i||i.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:n,willCommit:!0,commitKey:p.commitKey,selStart:e.target.selectionStart,selEnd:e.target.selectionEnd}})),r(e)})),null!==(a=this.data.actions)&&void 0!==a&&a.Keystroke&&n.addEventListener("beforeinput",(e=>{var n;p.lastCommittedValue=null;const{data:r,target:i}=e,{value:s,selectionStart:a,selectionEnd:o}=i;let l=a,c=o;switch(e.inputType){case"deleteWordBackward":{const e=s.substring(0,a).match(/\w*[^\w]*$/);e&&(l-=e[0].length);break}case"deleteWordForward":{const e=s.substring(a).match(/^[^\w]*\w*/);e&&(c+=e[0].length);break}case"deleteContentBackward":a===o&&(l-=1);break;case"deleteContentForward":a===o&&(c+=1)}e.preventDefault(),null===(n=this.linkService.eventBus)||void 0===n||n.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:s,change:r||"",willCommit:!1,selStart:l,selEnd:c}})})),this._setEventListeners(n,p,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],(e=>e.target.value))}if(f&&n.addEventListener("blur",f),this.data.comb){const e=(this.data.rect[2]-this.data.rect[0])/d;n.classList.add("comb"),n.style.letterSpacing="calc(".concat(e,"px * var(--scale-factor) - 1ch)")}}else n=document.createElement("div"),n.textContent=this.data.fieldValue,n.style.verticalAlign="middle",n.style.display="table-cell";return this._setTextStyle(n),this._setBackgroundColor(n),this._setDefaultPropertiesFromJS(n),this.container.append(n),this.container}}class S extends b{constructor(e){super(e,{isRenderable:!!e.data.hasOwnCanvas})}}class P extends b{constructor(e){super(e,{isRenderable:e.renderForms})}render(){const e=this.annotationStorage,t=this.data,n=t.id;let r=e.getValue(n,{value:t.exportValue===t.fieldValue}).value;"string"===typeof r&&(r="Off"!==r,e.setValue(n,{value:r})),this.container.classList.add("buttonWidgetAnnotation","checkBox");const i=document.createElement("input");return u.add(i),i.setAttribute("data-element-id",n),i.disabled=t.readOnly,this._setRequired(i,this.data.required),i.type="checkbox",i.name=t.fieldName,r&&i.setAttribute("checked",!0),i.setAttribute("exportValue",t.exportValue),i.tabIndex=c,i.addEventListener("change",(r=>{const{name:i,checked:s}=r.target;for(const a of this._getElementsByName(i,n)){const n=s&&a.exportValue===t.exportValue;a.domElement&&(a.domElement.checked=n),e.setValue(a.id,{value:n})}e.setValue(n,{value:s})})),i.addEventListener("resetform",(e=>{const n=t.defaultFieldValue||"Off";e.target.checked=n===t.exportValue})),this.enableScripting&&this.hasJSActions&&(i.addEventListener("updatefromsandbox",(t=>{const r={value(t){t.target.checked="Off"!==t.detail.value,e.setValue(n,{value:t.target.checked})}};this._dispatchEventFromSandbox(r,t)})),this._setEventListeners(i,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],(e=>e.target.checked))),this._setBackgroundColor(i),this._setDefaultPropertiesFromJS(i),this.container.append(i),this.container}}class C extends b{constructor(e){super(e,{isRenderable:e.renderForms})}render(){this.container.classList.add("buttonWidgetAnnotation","radioButton");const e=this.annotationStorage,t=this.data,n=t.id;let r=e.getValue(n,{value:t.fieldValue===t.buttonValue}).value;"string"===typeof r&&(r=r!==t.buttonValue,e.setValue(n,{value:r}));const i=document.createElement("input");if(u.add(i),i.setAttribute("data-element-id",n),i.disabled=t.readOnly,this._setRequired(i,this.data.required),i.type="radio",i.name=t.fieldName,r&&i.setAttribute("checked",!0),i.tabIndex=c,i.addEventListener("change",(t=>{const{name:r,checked:i}=t.target;for(const s of this._getElementsByName(r,n))e.setValue(s.id,{value:!1});e.setValue(n,{value:i})})),i.addEventListener("resetform",(e=>{const n=t.defaultFieldValue;e.target.checked=null!==n&&void 0!==n&&n===t.buttonValue})),this.enableScripting&&this.hasJSActions){const r=t.buttonValue;i.addEventListener("updatefromsandbox",(t=>{const i={value:t=>{const i=r===t.detail.value;for(const r of this._getElementsByName(t.target.name)){const t=i&&r.id===n;r.domElement&&(r.domElement.checked=t),e.setValue(r.id,{value:t})}}};this._dispatchEventFromSandbox(i,t)})),this._setEventListeners(i,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],(e=>e.target.checked))}return this._setBackgroundColor(i),this._setDefaultPropertiesFromJS(i),this.container.append(i),this.container}}class E extends g{constructor(e){super(e,{ignoreBorder:e.data.hasAppearance})}render(){const e=super.render();e.classList.add("buttonWidgetAnnotation","pushButton"),this.data.alternativeText&&(e.title=this.data.alternativeText);const t=e.lastChild;return this.enableScripting&&this.hasJSActions&&t&&(this._setDefaultPropertiesFromJS(t),t.addEventListener("updatefromsandbox",(e=>{this._dispatchEventFromSandbox({},e)}))),e}}class x extends b{constructor(e){super(e,{isRenderable:e.renderForms})}render(){this.container.classList.add("choiceWidgetAnnotation");const e=this.annotationStorage,t=this.data.id,n=e.getValue(t,{value:this.data.fieldValue}),r=document.createElement("select");u.add(r),r.setAttribute("data-element-id",t),r.disabled=this.data.readOnly,this._setRequired(r,this.data.required),r.name=this.data.fieldName,r.tabIndex=c;let i=this.data.combo&&this.data.options.length>0;this.data.combo||(r.size=this.data.options.length,this.data.multiSelect&&(r.multiple=!0)),r.addEventListener("resetform",(e=>{const t=this.data.defaultFieldValue;for(const n of r.options)n.selected=n.value===t}));for(const c of this.data.options){const e=document.createElement("option");e.textContent=c.displayValue,e.value=c.exportValue,n.value.includes(c.exportValue)&&(e.setAttribute("selected",!0),i=!1),r.append(e)}let s=null;if(i){const e=document.createElement("option");e.value=" ",e.setAttribute("hidden",!0),e.setAttribute("selected",!0),r.prepend(e),s=()=>{e.remove(),r.removeEventListener("input",s),s=null},r.addEventListener("input",s)}const a=e=>{const t=e?"value":"textContent",{options:n,multiple:i}=r;return i?Array.prototype.filter.call(n,(e=>e.selected)).map((e=>e[t])):-1===n.selectedIndex?null:n[n.selectedIndex][t]};let o=a(!1);const l=e=>{const t=e.target.options;return Array.prototype.map.call(t,(e=>({displayValue:e.textContent,exportValue:e.value})))};return this.enableScripting&&this.hasJSActions?(r.addEventListener("updatefromsandbox",(n=>{const i={value(n){var i;null===(i=s)||void 0===i||i();const l=n.detail.value,c=new Set(Array.isArray(l)?l:[l]);for(const e of r.options)e.selected=c.has(e.value);e.setValue(t,{value:a(!0)}),o=a(!1)},multipleSelection(e){r.multiple=!0},remove(n){const i=r.options,s=n.detail.remove;i[s].selected=!1,r.remove(s),i.length>0&&-1===Array.prototype.findIndex.call(i,(e=>e.selected))&&(i[0].selected=!0),e.setValue(t,{value:a(!0),items:l(n)}),o=a(!1)},clear(n){for(;0!==r.length;)r.remove(0);e.setValue(t,{value:null,items:[]}),o=a(!1)},insert(n){const{index:i,displayValue:s,exportValue:c}=n.detail.insert,u=r.children[i],d=document.createElement("option");d.textContent=s,d.value=c,u?u.before(d):r.append(d),e.setValue(t,{value:a(!0),items:l(n)}),o=a(!1)},items(n){const{items:i}=n.detail;for(;0!==r.length;)r.remove(0);for(const e of i){const{displayValue:t,exportValue:n}=e,i=document.createElement("option");i.textContent=t,i.value=n,r.append(i)}r.options.length>0&&(r.options[0].selected=!0),e.setValue(t,{value:a(!0),items:l(n)}),o=a(!1)},indices(n){const r=new Set(n.detail.indices);for(const e of n.target.options)e.selected=r.has(e.index);e.setValue(t,{value:a(!0)}),o=a(!1)},editable(e){e.target.disabled=!e.detail.editable}};this._dispatchEventFromSandbox(i,n)})),r.addEventListener("input",(n=>{var r;const i=a(!0);e.setValue(t,{value:i}),n.preventDefault(),null===(r=this.linkService.eventBus)||void 0===r||r.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:o,changeEx:i,willCommit:!1,commitKey:1,keyDown:!1}})})),this._setEventListeners(r,null,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"],["input","Action"],["input","Validate"]],(e=>e.target.value))):r.addEventListener("input",(function(n){e.setValue(t,{value:a(!0)})})),this.data.combo&&this._setTextStyle(r),this._setBackgroundColor(r),this._setDefaultPropertiesFromJS(r),this.container.append(r),this.container}}class k extends f{constructor(e){const{data:t,elements:n}=e;super(e,{isRenderable:f._hasPopupData(t)}),this.elements=n}render(){this.container.classList.add("popupAnnotation");const e=new V({container:this.container,color:this.data.color,titleObj:this.data.titleObj,modificationDate:this.data.modificationDate,contentsObj:this.data.contentsObj,richText:this.data.richText,rect:this.data.rect,parentRect:this.data.parentRect||null,parent:this.parent,elements:this.elements,open:this.data.open}),t=[];for(const n of this.elements)n.popup=e,t.push(n.data.id),n.addHighlightArea();return this.container.setAttribute("aria-controls",t.map((e=>"".concat(r.AnnotationPrefix).concat(e))).join(",")),this.container}}var A=new WeakMap,T=new WeakMap,F=new WeakMap,I=new WeakMap,R=new WeakMap,M=new WeakMap,N=new WeakMap,D=new WeakMap,O=new WeakMap,L=new WeakMap,j=new WeakMap,U=new WeakMap,G=new WeakMap,B=new WeakMap,W=new WeakMap,z=new WeakMap,q=new WeakMap,H=new WeakSet;class V{constructor(e){let{container:t,color:n,elements:r,titleObj:s,modificationDate:a,contentsObj:o,richText:l,parent:c,rect:u,parentRect:d,open:h}=e;_classPrivateMethodInitSpec(this,H),_classPrivateFieldInitSpec(this,A,null),_classPrivateFieldInitSpec(this,T,_assertClassBrand(H,this,K).bind(this)),_classPrivateFieldInitSpec(this,F,_assertClassBrand(H,this,Q).bind(this)),_classPrivateFieldInitSpec(this,I,_assertClassBrand(H,this,Y).bind(this)),_classPrivateFieldInitSpec(this,R,_assertClassBrand(H,this,X).bind(this)),_classPrivateFieldInitSpec(this,M,null),_classPrivateFieldInitSpec(this,N,null),_classPrivateFieldInitSpec(this,D,null),_classPrivateFieldInitSpec(this,O,null),_classPrivateFieldInitSpec(this,L,null),_classPrivateFieldInitSpec(this,j,null),_classPrivateFieldInitSpec(this,U,!1),_classPrivateFieldInitSpec(this,G,null),_classPrivateFieldInitSpec(this,B,null),_classPrivateFieldInitSpec(this,W,null),_classPrivateFieldInitSpec(this,z,null),_classPrivateFieldInitSpec(this,q,!1),_classPrivateFieldSet(N,this,t),_classPrivateFieldSet(z,this,s),_classPrivateFieldSet(D,this,o),_classPrivateFieldSet(W,this,l),_classPrivateFieldSet(L,this,c),_classPrivateFieldSet(M,this,n),_classPrivateFieldSet(B,this,u),_classPrivateFieldSet(j,this,d),_classPrivateFieldSet(O,this,r);const p=i.PDFDateString.toDateObject(a);p&&_classPrivateFieldSet(A,this,c.l10n.get("annotation_date_string",{date:p.toLocaleDateString(),time:p.toLocaleTimeString()})),this.trigger=r.flatMap((e=>e.getElementsToTriggerPopup()));for(const i of this.trigger)i.addEventListener("click",_classPrivateFieldGet(R,this)),i.addEventListener("mouseenter",_classPrivateFieldGet(I,this)),i.addEventListener("mouseleave",_classPrivateFieldGet(F,this)),i.classList.add("popupTriggerArea");for(const i of r){var f;null===(f=i.container)||void 0===f||f.addEventListener("keydown",_classPrivateFieldGet(T,this))}_classPrivateFieldGet(N,this).hidden=!0,h&&_assertClassBrand(H,this,X).call(this)}render(){if(_classPrivateFieldGet(G,this))return;const{page:{view:e},viewport:{rawDims:{pageWidth:t,pageHeight:n,pageX:i,pageY:s}}}=_classPrivateFieldGet(L,this),a=_classPrivateFieldSet(G,this,document.createElement("div"));if(a.className="popup",_classPrivateFieldGet(M,this)){const e=a.style.outlineColor=r.Util.makeHexColor(..._classPrivateFieldGet(M,this));if(CSS.supports("background-color","color-mix(in srgb, red 30%, white)"))a.style.backgroundColor="color-mix(in srgb, ".concat(e," 30%, white)");else{const e=.7;a.style.backgroundColor=r.Util.makeHexColor(..._classPrivateFieldGet(M,this).map((t=>Math.floor(e*(255-t)+t))))}}const o=document.createElement("span");o.className="header";const c=document.createElement("h1");if(o.append(c),({dir:c.dir,str:c.textContent}=_classPrivateFieldGet(z,this)),a.append(o),_classPrivateFieldGet(A,this)){const e=document.createElement("span");e.classList.add("popupDate"),_classPrivateFieldGet(A,this).then((t=>{e.textContent=t})),o.append(e)}const u=_classPrivateFieldGet(D,this),d=_classPrivateFieldGet(W,this);if(null===d||void 0===d||!d.str||null!==u&&void 0!==u&&u.str&&u.str!==d.str){const e=this._formatContents(u);a.append(e)}else l.XfaLayer.render({xfaHtml:d.html,intent:"richText",div:a}),a.lastChild.classList.add("richText","popupContent");let h=!!_classPrivateFieldGet(j,this),p=_classPrivateFieldGet(h?j:B,this);for(const l of _classPrivateFieldGet(O,this))if(!p||null!==r.Util.intersect(l.data.rect,p)){p=l.data.rect,h=!0;break}const f=r.Util.normalizeRect([p[0],e[3]-p[1]+e[1],p[2],e[3]-p[3]+e[1]]),m=h?p[2]-p[0]+5:0,g=f[0]+m,v=f[1],{style:_}=_classPrivateFieldGet(N,this);_.left="".concat(100*(g-i)/t,"%"),_.top="".concat(100*(v-s)/n,"%"),_classPrivateFieldGet(N,this).append(a)}_formatContents(e){let{str:t,dir:n}=e;const r=document.createElement("p");r.classList.add("popupContent"),r.dir=n;const i=t.split(/(?:\r\n?|\n)/);for(let s=0,a=i.length;s<a;++s){const e=i[s];r.append(document.createTextNode(e)),s<a-1&&r.append(document.createElement("br"))}return r}forceHide(){_classPrivateFieldSet(q,this,this.isVisible),_classPrivateFieldGet(q,this)&&(_classPrivateFieldGet(N,this).hidden=!0)}maybeShow(){_classPrivateFieldGet(q,this)&&(_classPrivateFieldSet(q,this,!1),_classPrivateFieldGet(N,this).hidden=!1)}get isVisible(){return!1===_classPrivateFieldGet(N,this).hidden}}function K(e){e.altKey||e.shiftKey||e.ctrlKey||e.metaKey||("Enter"===e.key||"Escape"===e.key&&_classPrivateFieldGet(U,this))&&_assertClassBrand(H,this,X).call(this)}function X(){_classPrivateFieldSet(U,this,!_classPrivateFieldGet(U,this)),_classPrivateFieldGet(U,this)?(_assertClassBrand(H,this,Y).call(this),_classPrivateFieldGet(N,this).addEventListener("click",_classPrivateFieldGet(R,this)),_classPrivateFieldGet(N,this).addEventListener("keydown",_classPrivateFieldGet(T,this))):(_assertClassBrand(H,this,Q).call(this),_classPrivateFieldGet(N,this).removeEventListener("click",_classPrivateFieldGet(R,this)),_classPrivateFieldGet(N,this).removeEventListener("keydown",_classPrivateFieldGet(T,this)))}function Y(){_classPrivateFieldGet(G,this)||this.render(),this.isVisible?_classPrivateFieldGet(U,this)&&_classPrivateFieldGet(N,this).classList.add("focused"):(_classPrivateFieldGet(N,this).hidden=!1,_classPrivateFieldGet(N,this).style.zIndex=parseInt(_classPrivateFieldGet(N,this).style.zIndex)+1e3)}function Q(){_classPrivateFieldGet(N,this).classList.remove("focused"),!_classPrivateFieldGet(U,this)&&this.isVisible&&(_classPrivateFieldGet(N,this).hidden=!0,_classPrivateFieldGet(N,this).style.zIndex=parseInt(_classPrivateFieldGet(N,this).style.zIndex)-1e3)}class J extends f{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0}),this.textContent=e.data.textContent,this.textPosition=e.data.textPosition,this.annotationEditorType=r.AnnotationEditorType.FREETEXT}render(){if(this.container.classList.add("freeTextAnnotation"),this.textContent){const e=document.createElement("div");e.classList.add("annotationTextContent"),e.setAttribute("role","comment");for(const t of this.textContent){const n=document.createElement("span");n.textContent=t,e.append(n)}this.container.append(e)}return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this._editOnDoubleClick(),this.container}}t.FreeTextAnnotationElement=J;var $=new WeakMap;class Z extends f{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0}),_classPrivateFieldInitSpec(this,$,null)}render(){this.container.classList.add("lineAnnotation");const e=this.data,{width:t,height:n}=d(e.rect),r=this.svgFactory.create(t,n,!0),i=_classPrivateFieldSet($,this,this.svgFactory.createElement("svg:line"));return i.setAttribute("x1",e.rect[2]-e.lineCoordinates[0]),i.setAttribute("y1",e.rect[3]-e.lineCoordinates[1]),i.setAttribute("x2",e.rect[2]-e.lineCoordinates[2]),i.setAttribute("y2",e.rect[3]-e.lineCoordinates[3]),i.setAttribute("stroke-width",e.borderStyle.width||1),i.setAttribute("stroke","transparent"),i.setAttribute("fill","transparent"),r.append(i),this.container.append(r),!e.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return _classPrivateFieldGet($,this)}addHighlightArea(){this.container.classList.add("highlightArea")}}var ee=new WeakMap;class te extends f{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0}),_classPrivateFieldInitSpec(this,ee,null)}render(){this.container.classList.add("squareAnnotation");const e=this.data,{width:t,height:n}=d(e.rect),r=this.svgFactory.create(t,n,!0),i=e.borderStyle.width,s=_classPrivateFieldSet(ee,this,this.svgFactory.createElement("svg:rect"));return s.setAttribute("x",i/2),s.setAttribute("y",i/2),s.setAttribute("width",t-i),s.setAttribute("height",n-i),s.setAttribute("stroke-width",i||1),s.setAttribute("stroke","transparent"),s.setAttribute("fill","transparent"),r.append(s),this.container.append(r),!e.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return _classPrivateFieldGet(ee,this)}addHighlightArea(){this.container.classList.add("highlightArea")}}var ne=new WeakMap;class re extends f{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0}),_classPrivateFieldInitSpec(this,ne,null)}render(){this.container.classList.add("circleAnnotation");const e=this.data,{width:t,height:n}=d(e.rect),r=this.svgFactory.create(t,n,!0),i=e.borderStyle.width,s=_classPrivateFieldSet(ne,this,this.svgFactory.createElement("svg:ellipse"));return s.setAttribute("cx",t/2),s.setAttribute("cy",n/2),s.setAttribute("rx",t/2-i/2),s.setAttribute("ry",n/2-i/2),s.setAttribute("stroke-width",i||1),s.setAttribute("stroke","transparent"),s.setAttribute("fill","transparent"),r.append(s),this.container.append(r),!e.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return _classPrivateFieldGet(ne,this)}addHighlightArea(){this.container.classList.add("highlightArea")}}var ie=new WeakMap;class se extends f{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0}),_classPrivateFieldInitSpec(this,ie,null),this.containerClassName="polylineAnnotation",this.svgElementName="svg:polyline"}render(){this.container.classList.add(this.containerClassName);const e=this.data,{width:t,height:n}=d(e.rect),r=this.svgFactory.create(t,n,!0);let i=[];for(const a of e.vertices){const t=a.x-e.rect[0],n=e.rect[3]-a.y;i.push(t+","+n)}i=i.join(" ");const s=_classPrivateFieldSet(ie,this,this.svgFactory.createElement(this.svgElementName));return s.setAttribute("points",i),s.setAttribute("stroke-width",e.borderStyle.width||1),s.setAttribute("stroke","transparent"),s.setAttribute("fill","transparent"),r.append(s),this.container.append(r),!e.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return _classPrivateFieldGet(ie,this)}addHighlightArea(){this.container.classList.add("highlightArea")}}class ae extends se{constructor(e){super(e),this.containerClassName="polygonAnnotation",this.svgElementName="svg:polygon"}}class oe extends f{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0})}render(){return this.container.classList.add("caretAnnotation"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container}}var le=new WeakMap;class ce extends f{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0}),_classPrivateFieldInitSpec(this,le,[]),this.containerClassName="inkAnnotation",this.svgElementName="svg:polyline",this.annotationEditorType=r.AnnotationEditorType.INK}render(){this.container.classList.add(this.containerClassName);const e=this.data,{width:t,height:n}=d(e.rect),r=this.svgFactory.create(t,n,!0);for(const i of e.inkLists){let t=[];for(const r of i){const n=r.x-e.rect[0],i=e.rect[3]-r.y;t.push("".concat(n,",").concat(i))}t=t.join(" ");const n=this.svgFactory.createElement(this.svgElementName);_classPrivateFieldGet(le,this).push(n),n.setAttribute("points",t),n.setAttribute("stroke-width",e.borderStyle.width||1),n.setAttribute("stroke","transparent"),n.setAttribute("fill","transparent"),!e.popupRef&&this.hasPopupData&&this._createPopup(),r.append(n)}return this.container.append(r),this.container}getElementsToTriggerPopup(){return _classPrivateFieldGet(le,this)}addHighlightArea(){this.container.classList.add("highlightArea")}}t.InkAnnotationElement=ce;class ue extends f{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("highlightAnnotation"),this.container}}class de extends f{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("underlineAnnotation"),this.container}}class he extends f{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("squigglyAnnotation"),this.container}}class pe extends f{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("strikeoutAnnotation"),this.container}}class fe extends f{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0})}render(){return this.container.classList.add("stampAnnotation"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container}}t.StampAnnotationElement=fe;var me=new WeakMap,ge=new WeakSet;class ve extends f{constructor(e){var t;super(e,{isRenderable:!0}),_classPrivateMethodInitSpec(this,ge),_classPrivateFieldInitSpec(this,me,null);const{filename:n,content:r}=this.data.file;this.filename=(0,i.getFilenameFromUrl)(n,!0),this.content=r,null===(t=this.linkService.eventBus)||void 0===t||t.dispatch("fileattachmentannotation",{source:this,filename:n,content:r})}render(){this.container.classList.add("fileAttachmentAnnotation");const{container:e,data:t}=this;let n;t.hasAppearance||0===t.fillAlpha?n=document.createElement("div"):(n=document.createElement("img"),n.src="".concat(this.imageResourcesPath,"annotation-").concat(/paperclip/i.test(t.name)?"paperclip":"pushpin",".svg"),t.fillAlpha&&t.fillAlpha<1&&(n.style="filter: opacity(".concat(Math.round(100*t.fillAlpha),"%);"))),n.addEventListener("dblclick",_assertClassBrand(ge,this,_e).bind(this)),_classPrivateFieldSet(me,this,n);const{isMac:i}=r.FeatureTest.platform;return e.addEventListener("keydown",(e=>{"Enter"===e.key&&(i?e.metaKey:e.ctrlKey)&&_assertClassBrand(ge,this,_e).call(this)})),!t.popupRef&&this.hasPopupData?this._createPopup():n.classList.add("popupTriggerArea"),e.append(n),e}getElementsToTriggerPopup(){return _classPrivateFieldGet(me,this)}addHighlightArea(){this.container.classList.add("highlightArea")}}function _e(){var e;null===(e=this.downloadManager)||void 0===e||e.openOrDownloadData(this.container,this.content,this.filename)}var ye=new WeakMap,be=new WeakMap,we=new WeakMap,Se=new WeakSet;function Pe(e,t){var n;const i=e.firstChild||e;i.id="".concat(r.AnnotationPrefix).concat(t),this.div.append(e),null===(n=_classPrivateFieldGet(ye,this))||void 0===n||n.moveElementInDOM(this.div,e,i,!1)}function Ce(){if(!_classPrivateFieldGet(be,this))return;const e=this.div;for(const[t,n]of _classPrivateFieldGet(be,this)){const r=e.querySelector('[data-annotation-id="'.concat(t,'"]'));if(!r)continue;const{firstChild:i}=r;i?"CANVAS"===i.nodeName?i.replaceWith(n):i.before(n):r.append(n)}_classPrivateFieldGet(be,this).clear()}t.AnnotationLayer=class{constructor(e){let{div:t,accessibilityManager:n,annotationCanvasMap:r,l10n:i,page:s,viewport:a}=e;_classPrivateMethodInitSpec(this,Se),_classPrivateFieldInitSpec(this,ye,null),_classPrivateFieldInitSpec(this,be,null),_classPrivateFieldInitSpec(this,we,new Map),this.div=t,_classPrivateFieldSet(ye,this,n),_classPrivateFieldSet(be,this,r),this.l10n=i,this.page=s,this.viewport=a,this.zIndex=0,this.l10n||(this.l10n=o.NullL10n)}async render(e){const{annotations:t}=e,n=this.div;(0,i.setLayerDimensions)(n,this.viewport);const a=new Map,o={data:null,layer:n,linkService:e.linkService,downloadManager:e.downloadManager,imageResourcesPath:e.imageResourcesPath||"",renderForms:!1!==e.renderForms,svgFactory:new i.DOMSVGFactory,annotationStorage:e.annotationStorage||new s.AnnotationStorage,enableScripting:!0===e.enableScripting,hasJSActions:e.hasJSActions,fieldObjects:e.fieldObjects,parent:this,elements:null};for(const i of t){if(i.noHTML)continue;const e=i.annotationType===r.AnnotationType.POPUP;if(e){const e=a.get(i.id);if(!e)continue;o.elements=e}else{const{width:e,height:t}=d(i.rect);if(e<=0||t<=0)continue}o.data=i;const t=h.create(o);if(!t.isRenderable)continue;if(!e&&i.popupRef){const e=a.get(i.popupRef);e?e.push(t):a.set(i.popupRef,[t])}t.annotationEditorType>0&&_classPrivateFieldGet(we,this).set(t.data.id,t);const n=t.render();i.hidden&&(n.style.visibility="hidden"),_assertClassBrand(Se,this,Pe).call(this,n,i.id)}_assertClassBrand(Se,this,Ce).call(this),await this.l10n.translate(n)}update(e){let{viewport:t}=e;const n=this.div;this.viewport=t,(0,i.setLayerDimensions)(n,{rotation:t.rotation}),_assertClassBrand(Se,this,Ce).call(this),n.hidden=!1}getEditableAnnotations(){return Array.from(_classPrivateFieldGet(we,this).values())}getEditableAnnotation(e){return _classPrivateFieldGet(we,this).get(e)}}},(e,t)=>{function n(e){return Math.floor(255*Math.max(0,Math.min(1,e))).toString(16).padStart(2,"0")}function r(e){return Math.max(0,Math.min(255,255*e))}Object.defineProperty(t,"__esModule",{value:!0}),t.ColorConverters=void 0,t.ColorConverters=class{static CMYK_G(e){let[t,n,r,i]=e;return["G",1-Math.min(1,.3*t+.59*r+.11*n+i)]}static G_CMYK(e){let[t]=e;return["CMYK",0,0,0,1-t]}static G_RGB(e){let[t]=e;return["RGB",t,t,t]}static G_rgb(e){let[t]=e;return t=r(t),[t,t,t]}static G_HTML(e){let[t]=e;const r=n(t);return"#".concat(r).concat(r).concat(r)}static RGB_G(e){let[t,n,r]=e;return["G",.3*t+.59*n+.11*r]}static RGB_rgb(e){return e.map(r)}static RGB_HTML(e){return"#".concat(e.map(n).join(""))}static T_HTML(){return"#00000000"}static T_rgb(){return[null]}static CMYK_RGB(e){let[t,n,r,i]=e;return["RGB",1-Math.min(1,t+i),1-Math.min(1,r+i),1-Math.min(1,n+i)]}static CMYK_rgb(e){let[t,n,i,s]=e;return[r(1-Math.min(1,t+s)),r(1-Math.min(1,i+s)),r(1-Math.min(1,n+s))]}static CMYK_HTML(e){const t=this.CMYK_RGB(e).slice(1);return this.RGB_HTML(t)}static RGB_CMYK(e){let[t,n,r]=e;const i=1-t,s=1-n,a=1-r;return["CMYK",i,s,a,Math.min(i,s,a)]}}},(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.NullL10n=void 0,t.getL10nFallback=r;const n={of_pages:"of {{pagesCount}}",page_of_pages:"({{pageNumber}} of {{pagesCount}})",document_properties_kb:"{{size_kb}} KB ({{size_b}} bytes)",document_properties_mb:"{{size_mb}} MB ({{size_b}} bytes)",document_properties_date_string:"{{date}}, {{time}}",document_properties_page_size_unit_inches:"in",document_properties_page_size_unit_millimeters:"mm",document_properties_page_size_orientation_portrait:"portrait",document_properties_page_size_orientation_landscape:"landscape",document_properties_page_size_name_a3:"A3",document_properties_page_size_name_a4:"A4",document_properties_page_size_name_letter:"Letter",document_properties_page_size_name_legal:"Legal",document_properties_page_size_dimension_string:"{{width}} \xd7 {{height}} {{unit}} ({{orientation}})",document_properties_page_size_dimension_name_string:"{{width}} \xd7 {{height}} {{unit}} ({{name}}, {{orientation}})",document_properties_linearized_yes:"Yes",document_properties_linearized_no:"No",additional_layers:"Additional Layers",page_landmark:"Page {{page}}",thumb_page_title:"Page {{page}}",thumb_page_canvas:"Thumbnail of Page {{page}}",find_reached_top:"Reached top of document, continued from bottom",find_reached_bottom:"Reached end of document, continued from top","find_match_count[one]":"{{current}} of {{total}} match","find_match_count[other]":"{{current}} of {{total}} matches","find_match_count_limit[one]":"More than {{limit}} match","find_match_count_limit[other]":"More than {{limit}} matches",find_not_found:"Phrase not found",page_scale_width:"Page Width",page_scale_fit:"Page Fit",page_scale_auto:"Automatic Zoom",page_scale_actual:"Actual Size",page_scale_percent:"{{scale}}%",loading_error:"An error occurred while loading the PDF.",invalid_file_error:"Invalid or corrupted PDF file.",missing_file_error:"Missing PDF file.",unexpected_response_error:"Unexpected server response.",rendering_error:"An error occurred while rendering the page.",annotation_date_string:"{{date}}, {{time}}",printing_not_supported:"Warning: Printing is not fully supported by this browser.",printing_not_ready:"Warning: The PDF is not fully loaded for printing.",web_fonts_disabled:"Web fonts are disabled: unable to use embedded PDF fonts.",free_text2_default_content:"Start typing\u2026",editor_free_text2_aria_label:"Text Editor",editor_ink2_aria_label:"Draw Editor",editor_ink_canvas_aria_label:"User-created image",editor_alt_text_button_label:"Alt text",editor_alt_text_edit_button_label:"Edit alt text",editor_alt_text_decorative_tooltip:"Marked as decorative"};function r(e,t){switch(e){case"find_match_count":e="find_match_count[".concat(1===t.total?"one":"other","]");break;case"find_match_count_limit":e="find_match_count_limit[".concat(1===t.limit?"one":"other","]")}return n[e]||""}n.print_progress_percent="{{progress}}%";const i={getLanguage:async()=>"en-us",getDirection:async()=>"ltr",async get(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return function(e,t){return t?e.replaceAll(/\{\{\s*(\w+)\s*\}\}/g,((e,n)=>n in t?t[n]:"{{"+n+"}}")):e}(arguments.length>2&&void 0!==arguments[2]?arguments[2]:r(e,t),t)},async translate(e){}};t.NullL10n=i},(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.XfaLayer=void 0;var r=n(25);t.XfaLayer=class{static setupStorage(e,t,n,r,i){const s=r.getValue(t,{value:null});switch(n.name){case"textarea":if(null!==s.value&&(e.textContent=s.value),"print"===i)break;e.addEventListener("input",(e=>{r.setValue(t,{value:e.target.value})}));break;case"input":if("radio"===n.attributes.type||"checkbox"===n.attributes.type){if(s.value===n.attributes.xfaOn?e.setAttribute("checked",!0):s.value===n.attributes.xfaOff&&e.removeAttribute("checked"),"print"===i)break;e.addEventListener("change",(e=>{r.setValue(t,{value:e.target.checked?e.target.getAttribute("xfaOn"):e.target.getAttribute("xfaOff")})}))}else{if(null!==s.value&&e.setAttribute("value",s.value),"print"===i)break;e.addEventListener("input",(e=>{r.setValue(t,{value:e.target.value})}))}break;case"select":if(null!==s.value){e.setAttribute("value",s.value);for(const e of n.children)e.attributes.value===s.value?e.attributes.selected=!0:e.attributes.hasOwnProperty("selected")&&delete e.attributes.selected}e.addEventListener("input",(e=>{const n=e.target.options,i=-1===n.selectedIndex?"":n[n.selectedIndex].value;r.setValue(t,{value:i})}))}}static setAttributes(e){let{html:t,element:n,storage:r=null,intent:i,linkService:s}=e;const{attributes:a}=n,o=t instanceof HTMLAnchorElement;"radio"===a.type&&(a.name="".concat(a.name,"-").concat(i));for(const[l,c]of Object.entries(a))if(null!==c&&void 0!==c)switch(l){case"class":c.length&&t.setAttribute(l,c.join(" "));break;case"dataId":break;case"id":t.setAttribute("data-element-id",c);break;case"style":Object.assign(t.style,c);break;case"textContent":t.textContent=c;break;default:(!o||"href"!==l&&"newWindow"!==l)&&t.setAttribute(l,c)}o&&s.addLinkAttributes(t,a.href,a.newWindow),r&&a.dataId&&this.setupStorage(t,a.dataId,n,r)}static render(e){const t=e.annotationStorage,n=e.linkService,i=e.xfaHtml,s=e.intent||"display",a=document.createElement(i.name);i.attributes&&this.setAttributes({html:a,element:i,intent:s,linkService:n});const o=[[i,-1,a]],l=e.div;if(l.append(a),e.viewport){const t="matrix(".concat(e.viewport.transform.join(","),")");l.style.transform=t}"richText"!==s&&l.setAttribute("class","xfaLayer xfaFont");const c=[];for(;o.length>0;){var u;const[e,i,a]=o.at(-1);if(i+1===e.children.length){o.pop();continue}const l=e.children[++o.at(-1)[1]];if(null===l)continue;const{name:d}=l;if("#text"===d){const e=document.createTextNode(l.value);c.push(e),a.append(e);continue}const h=null!==l&&void 0!==l&&null!==(u=l.attributes)&&void 0!==u&&u.xmlns?document.createElementNS(l.attributes.xmlns,d):document.createElement(d);if(a.append(h),l.attributes&&this.setAttributes({html:h,element:l,storage:t,intent:s,linkService:n}),l.children&&l.children.length>0)o.push([l,-1,h]);else if(l.value){const e=document.createTextNode(l.value);r.XfaText.shouldBuildText(d)&&c.push(e),h.append(e)}}for(const r of l.querySelectorAll(".xfaNonInteractive input, .xfaNonInteractive textarea"))r.setAttribute("readOnly",!0);return{textDivs:c}}static update(e){const t="matrix(".concat(e.viewport.transform.join(","),")");e.div.style.transform=t,e.div.hidden=!1}}},(e,t,n)=>{var r;Object.defineProperty(t,"__esModule",{value:!0}),t.InkEditor=void 0;var i=n(1),s=n(4),a=n(29),o=n(6),l=n(5),c=new WeakMap,u=new WeakMap,d=new WeakMap,h=new WeakMap,p=new WeakMap,f=new WeakMap,m=new WeakMap,g=new WeakMap,v=new WeakMap,_=new WeakMap,y=new WeakMap,b=new WeakMap,w=new WeakMap,S=new WeakMap,P=new WeakSet;class C extends s.AnnotationEditor{constructor(e){super({...e,name:"inkEditor"}),_classPrivateMethodInitSpec(this,P),_classPrivateFieldInitSpec(this,c,0),_classPrivateFieldInitSpec(this,u,0),_classPrivateFieldInitSpec(this,d,this.canvasPointermove.bind(this)),_classPrivateFieldInitSpec(this,h,this.canvasPointerleave.bind(this)),_classPrivateFieldInitSpec(this,p,this.canvasPointerup.bind(this)),_classPrivateFieldInitSpec(this,f,this.canvasPointerdown.bind(this)),_classPrivateFieldInitSpec(this,m,new Path2D),_classPrivateFieldInitSpec(this,g,!1),_classPrivateFieldInitSpec(this,v,!1),_classPrivateFieldInitSpec(this,_,!1),_classPrivateFieldInitSpec(this,y,null),_classPrivateFieldInitSpec(this,b,0),_classPrivateFieldInitSpec(this,w,0),_classPrivateFieldInitSpec(this,S,null),this.color=e.color||null,this.thickness=e.thickness||null,this.opacity=e.opacity||null,this.paths=[],this.bezierPath2D=[],this.allRawPaths=[],this.currentPath=[],this.scaleFactor=1,this.translationX=this.translationY=0,this.x=0,this.y=0,this._willKeepAspectRatio=!0}static initialize(e){s.AnnotationEditor.initialize(e,{strings:["editor_ink_canvas_aria_label","editor_ink2_aria_label"]})}static updateDefaultParams(e,t){switch(e){case i.AnnotationEditorParamsType.INK_THICKNESS:C._defaultThickness=t;break;case i.AnnotationEditorParamsType.INK_COLOR:C._defaultColor=t;break;case i.AnnotationEditorParamsType.INK_OPACITY:C._defaultOpacity=t/100}}updateParams(e,t){switch(e){case i.AnnotationEditorParamsType.INK_THICKNESS:_assertClassBrand(P,this,E).call(this,t);break;case i.AnnotationEditorParamsType.INK_COLOR:_assertClassBrand(P,this,x).call(this,t);break;case i.AnnotationEditorParamsType.INK_OPACITY:_assertClassBrand(P,this,k).call(this,t)}}static get defaultPropertiesToUpdate(){return[[i.AnnotationEditorParamsType.INK_THICKNESS,C._defaultThickness],[i.AnnotationEditorParamsType.INK_COLOR,C._defaultColor||s.AnnotationEditor._defaultLineColor],[i.AnnotationEditorParamsType.INK_OPACITY,Math.round(100*C._defaultOpacity)]]}get propertiesToUpdate(){var e;return[[i.AnnotationEditorParamsType.INK_THICKNESS,this.thickness||C._defaultThickness],[i.AnnotationEditorParamsType.INK_COLOR,this.color||C._defaultColor||s.AnnotationEditor._defaultLineColor],[i.AnnotationEditorParamsType.INK_OPACITY,Math.round(100*(null!==(e=this.opacity)&&void 0!==e?e:C._defaultOpacity))]]}rebuild(){this.parent&&(super.rebuild(),null!==this.div&&(this.canvas||(_assertClassBrand(P,this,U).call(this),_assertClassBrand(P,this,G).call(this)),this.isAttachedToDOM||(this.parent.add(this),_assertClassBrand(P,this,B).call(this)),_assertClassBrand(P,this,Q).call(this)))}remove(){null!==this.canvas&&(this.isEmpty()||this.commit(),this.canvas.width=this.canvas.height=0,this.canvas.remove(),this.canvas=null,_classPrivateFieldGet(y,this).disconnect(),_classPrivateFieldSet(y,this,null),super.remove())}setParent(e){!this.parent&&e?this._uiManager.removeShouldRescale(this):this.parent&&null===e&&this._uiManager.addShouldRescale(this),super.setParent(e)}onScaleChanging(){const[e,t]=this.parentDimensions,n=this.width*e,r=this.height*t;this.setDimensions(n,r)}enableEditMode(){_classPrivateFieldGet(g,this)||null===this.canvas||(super.enableEditMode(),this._isDraggable=!1,this.canvas.addEventListener("pointerdown",_classPrivateFieldGet(f,this)))}disableEditMode(){this.isInEditMode()&&null!==this.canvas&&(super.disableEditMode(),this._isDraggable=!this.isEmpty(),this.div.classList.remove("editing"),this.canvas.removeEventListener("pointerdown",_classPrivateFieldGet(f,this)))}onceAdded(){this._isDraggable=!this.isEmpty()}isEmpty(){return 0===this.paths.length||1===this.paths.length&&0===this.paths[0].length}commit(){_classPrivateFieldGet(g,this)||(super.commit(),this.isEditing=!1,this.disableEditMode(),this.setInForeground(),_classPrivateFieldSet(g,this,!0),this.div.classList.add("disabled"),_assertClassBrand(P,this,Q).call(this,!0),this.makeResizable(),this.parent.addInkEditorIfNeeded(!0),this.moveInDOM(),this.div.focus({preventScroll:!0}))}focusin(e){this._focusEventsAllowed&&(super.focusin(e),this.enableEditMode())}canvasPointerdown(e){0===e.button&&this.isInEditMode()&&!_classPrivateFieldGet(g,this)&&(this.setInForeground(),e.preventDefault(),"mouse"!==e.type&&this.div.focus(),_assertClassBrand(P,this,F).call(this,e.offsetX,e.offsetY))}canvasPointermove(e){e.preventDefault(),_assertClassBrand(P,this,I).call(this,e.offsetX,e.offsetY)}canvasPointerup(e){e.preventDefault(),_assertClassBrand(P,this,j).call(this,e)}canvasPointerleave(e){_assertClassBrand(P,this,j).call(this,e)}get isResizable(){return!this.isEmpty()&&_classPrivateFieldGet(g,this)}render(){if(this.div)return this.div;let e,t;this.width&&(e=this.x,t=this.y),super.render(),s.AnnotationEditor._l10nPromise.get("editor_ink2_aria_label").then((e=>{var t;return null===(t=this.div)||void 0===t?void 0:t.setAttribute("aria-label",e)}));const[n,r,i,a]=_assertClassBrand(P,this,A).call(this);if(this.setAt(n,r,0,0),this.setDims(i,a),_assertClassBrand(P,this,U).call(this),this.width){const[n,r]=this.parentDimensions;this.setAspectRatio(this.width*n,this.height*r),this.setAt(e*n,t*r,this.width*n,this.height*r),_classPrivateFieldSet(_,this,!0),_assertClassBrand(P,this,B).call(this),this.setDims(this.width*n,this.height*r),_assertClassBrand(P,this,L).call(this),this.div.classList.add("disabled")}else this.div.classList.add("editing"),this.enableEditMode();return _assertClassBrand(P,this,G).call(this),this.div}setDimensions(e,t){const n=Math.round(e),r=Math.round(t);if(_classPrivateFieldGet(b,this)===n&&_classPrivateFieldGet(w,this)===r)return;_classPrivateFieldSet(b,this,n),_classPrivateFieldSet(w,this,r),this.canvas.style.visibility="hidden";const[i,s]=this.parentDimensions;this.width=e/i,this.height=t/s,this.fixAndSetPosition(),_classPrivateFieldGet(g,this)&&_assertClassBrand(P,this,W).call(this,e,t),_assertClassBrand(P,this,B).call(this),_assertClassBrand(P,this,L).call(this),this.canvas.style.visibility="visible",this.fixDims()}static deserialize(e,t,n){if(e instanceof a.InkAnnotationElement)return null;const r=super.deserialize(e,t,n);r.thickness=e.thickness,r.color=i.Util.makeHexColor(...e.color),r.opacity=e.opacity;const[o,l]=r.pageDimensions,d=r.width*o,h=r.height*l,p=r.parentScale,f=e.thickness/2;_classPrivateFieldSet(g,r,!0),_classPrivateFieldSet(b,r,Math.round(d)),_classPrivateFieldSet(w,r,Math.round(h));const{paths:m,rect:v,rotation:_}=e;for(let{bezier:i}of m){i=V.call(C,i,v,_);const e=[];r.paths.push(e);let t=p*(i[0]-f),n=p*(i[1]-f);for(let r=2,a=i.length;r<a;r+=6){const s=p*(i[r]-f),a=p*(i[r+1]-f),o=p*(i[r+2]-f),l=p*(i[r+3]-f),c=p*(i[r+4]-f),u=p*(i[r+5]-f);e.push([[t,n],[s,a],[o,l],[c,u]]),t=c,n=u}const s=_assertClassBrand(C,this,q).call(this,e);r.bezierPath2D.push(s)}const y=_assertClassBrand(P,r,X).call(r);return _classPrivateFieldSet(u,r,Math.max(s.AnnotationEditor.MIN_SIZE,y[2]-y[0])),_classPrivateFieldSet(c,r,Math.max(s.AnnotationEditor.MIN_SIZE,y[3]-y[1])),_assertClassBrand(P,r,W).call(r,d,h),r}serialize(){if(this.isEmpty())return null;const e=this.getRect(0,0),t=s.AnnotationEditor._colorManager.convert(this.ctx.strokeStyle);return{annotationType:i.AnnotationEditorType.INK,color:t,thickness:this.thickness,opacity:this.opacity,paths:_assertClassBrand(P,this,K).call(this,this.scaleFactor/this.parentScale,this.translationX,this.translationY,e),pageIndex:this.pageIndex,rect:e,rotation:this.rotation,structTreeParentId:this._structTreeParentId}}}function E(e){const t=this.thickness;this.addCommands({cmd:()=>{this.thickness=e,_assertClassBrand(P,this,Q).call(this)},undo:()=>{this.thickness=t,_assertClassBrand(P,this,Q).call(this)},mustExec:!0,type:i.AnnotationEditorParamsType.INK_THICKNESS,overwriteIfSameType:!0,keepUndo:!0})}function x(e){const t=this.color;this.addCommands({cmd:()=>{this.color=e,_assertClassBrand(P,this,L).call(this)},undo:()=>{this.color=t,_assertClassBrand(P,this,L).call(this)},mustExec:!0,type:i.AnnotationEditorParamsType.INK_COLOR,overwriteIfSameType:!0,keepUndo:!0})}function k(e){e/=100;const t=this.opacity;this.addCommands({cmd:()=>{this.opacity=e,_assertClassBrand(P,this,L).call(this)},undo:()=>{this.opacity=t,_assertClassBrand(P,this,L).call(this)},mustExec:!0,type:i.AnnotationEditorParamsType.INK_OPACITY,overwriteIfSameType:!0,keepUndo:!0})}function A(){const{parentRotation:e,parentDimensions:[t,n]}=this;switch(e){case 90:return[0,n,n,t];case 180:return[t,n,t,n];case 270:return[t,0,n,t];default:return[0,0,t,n]}}function T(){const{ctx:e,color:t,opacity:n,thickness:r,parentScale:i,scaleFactor:s}=this;e.lineWidth=r*i/s,e.lineCap="round",e.lineJoin="round",e.miterLimit=10,e.strokeStyle="".concat(t).concat((0,l.opacityToHex)(n))}function F(e,t){var n;this.canvas.addEventListener("contextmenu",o.noContextMenu),this.canvas.addEventListener("pointerleave",_classPrivateFieldGet(h,this)),this.canvas.addEventListener("pointermove",_classPrivateFieldGet(d,this)),this.canvas.addEventListener("pointerup",_classPrivateFieldGet(p,this)),this.canvas.removeEventListener("pointerdown",_classPrivateFieldGet(f,this)),this.isEditing=!0,_classPrivateFieldGet(_,this)||(_classPrivateFieldSet(_,this,!0),_assertClassBrand(P,this,B).call(this),this.thickness||(this.thickness=r._defaultThickness),this.color||(this.color=r._defaultColor||s.AnnotationEditor._defaultLineColor),null!==(n=this.opacity)&&void 0!==n||(this.opacity=r._defaultOpacity)),this.currentPath.push([e,t]),_classPrivateFieldSet(v,this,!1),_assertClassBrand(P,this,T).call(this),_classPrivateFieldSet(S,this,(()=>{_assertClassBrand(P,this,N).call(this),_classPrivateFieldGet(S,this)&&window.requestAnimationFrame(_classPrivateFieldGet(S,this))})),window.requestAnimationFrame(_classPrivateFieldGet(S,this))}function I(e,t){const[n,r]=this.currentPath.at(-1);if(this.currentPath.length>1&&e===n&&t===r)return;const i=this.currentPath;let s=_classPrivateFieldGet(m,this);if(i.push([e,t]),_classPrivateFieldSet(v,this,!0),i.length<=2)return s.moveTo(...i[0]),void s.lineTo(e,t);3===i.length&&(_classPrivateFieldSet(m,this,s=new Path2D),s.moveTo(...i[0])),_assertClassBrand(P,this,D).call(this,s,...i.at(-3),...i.at(-2),e,t)}function R(){if(0===this.currentPath.length)return;const e=this.currentPath.at(-1);_classPrivateFieldGet(m,this).lineTo(...e)}function M(e,t){let n;if(_classPrivateFieldSet(S,this,null),e=Math.min(Math.max(e,0),this.canvas.width),t=Math.min(Math.max(t,0),this.canvas.height),_assertClassBrand(P,this,I).call(this,e,t),_assertClassBrand(P,this,R).call(this),1!==this.currentPath.length)n=_assertClassBrand(P,this,O).call(this);else{const r=[e,t];n=[[r,r.slice(),r.slice(),r]]}const r=_classPrivateFieldGet(m,this),i=this.currentPath;this.currentPath=[],_classPrivateFieldSet(m,this,new Path2D),this.addCommands({cmd:()=>{this.allRawPaths.push(i),this.paths.push(n),this.bezierPath2D.push(r),this.rebuild()},undo:()=>{this.allRawPaths.pop(),this.paths.pop(),this.bezierPath2D.pop(),0===this.paths.length?this.remove():(this.canvas||(_assertClassBrand(P,this,U).call(this),_assertClassBrand(P,this,G).call(this)),_assertClassBrand(P,this,Q).call(this))},mustExec:!0})}function N(){if(!_classPrivateFieldGet(v,this))return;_classPrivateFieldSet(v,this,!1);Math.ceil(this.thickness*this.parentScale);const e=this.currentPath.slice(-3),t=e.map((e=>e[0])),n=e.map((e=>e[1])),{ctx:r}=(Math.min(...t),Math.max(...t),Math.min(...n),Math.max(...n),this);r.save(),r.clearRect(0,0,this.canvas.width,this.canvas.height);for(const i of this.bezierPath2D)r.stroke(i);r.stroke(_classPrivateFieldGet(m,this)),r.restore()}function D(e,t,n,r,i,s,a){const o=(t+r)/2,l=(n+i)/2,c=(r+s)/2,u=(i+a)/2;e.bezierCurveTo(o+2*(r-o)/3,l+2*(i-l)/3,c+2*(r-c)/3,u+2*(i-u)/3,c,u)}function O(){const e=this.currentPath;if(e.length<=2)return[[e[0],e[0],e.at(-1),e.at(-1)]];const t=[];let n,[r,i]=e[0];for(n=1;n<e.length-2;n++){const[s,a]=e[n],[o,l]=e[n+1],c=(s+o)/2,u=(a+l)/2,d=[r+2*(s-r)/3,i+2*(a-i)/3],h=[c+2*(s-c)/3,u+2*(a-u)/3];t.push([[r,i],d,h,[c,u]]),[r,i]=[c,u]}const[s,a]=e[n],[o,l]=e[n+1],c=[r+2*(s-r)/3,i+2*(a-i)/3],u=[o+2*(s-o)/3,l+2*(a-l)/3];return t.push([[r,i],c,u,[o,l]]),t}function L(){if(this.isEmpty())return void _assertClassBrand(P,this,z).call(this);_assertClassBrand(P,this,T).call(this);const{canvas:e,ctx:t}=this;t.setTransform(1,0,0,1,0,0),t.clearRect(0,0,e.width,e.height),_assertClassBrand(P,this,z).call(this);for(const n of this.bezierPath2D)t.stroke(n)}function j(e){this.canvas.removeEventListener("pointerleave",_classPrivateFieldGet(h,this)),this.canvas.removeEventListener("pointermove",_classPrivateFieldGet(d,this)),this.canvas.removeEventListener("pointerup",_classPrivateFieldGet(p,this)),this.canvas.addEventListener("pointerdown",_classPrivateFieldGet(f,this)),setTimeout((()=>{this.canvas.removeEventListener("contextmenu",o.noContextMenu)}),10),_assertClassBrand(P,this,M).call(this,e.offsetX,e.offsetY),this.addToAnnotationStorage(),this.setInBackground()}function U(){this.canvas=document.createElement("canvas"),this.canvas.width=this.canvas.height=0,this.canvas.className="inkEditorCanvas",s.AnnotationEditor._l10nPromise.get("editor_ink_canvas_aria_label").then((e=>{var t;return null===(t=this.canvas)||void 0===t?void 0:t.setAttribute("aria-label",e)})),this.div.append(this.canvas),this.ctx=this.canvas.getContext("2d")}function G(){_classPrivateFieldSet(y,this,new ResizeObserver((e=>{const t=e[0].contentRect;t.width&&t.height&&this.setDimensions(t.width,t.height)}))),_classPrivateFieldGet(y,this).observe(this.div)}function B(){if(!_classPrivateFieldGet(_,this))return;const[e,t]=this.parentDimensions;this.canvas.width=Math.ceil(this.width*e),this.canvas.height=Math.ceil(this.height*t),_assertClassBrand(P,this,z).call(this)}function W(e,t){const n=_assertClassBrand(P,this,Y).call(this),r=(e-n)/_classPrivateFieldGet(u,this),i=(t-n)/_classPrivateFieldGet(c,this);this.scaleFactor=Math.min(r,i)}function z(){const e=_assertClassBrand(P,this,Y).call(this)/2;this.ctx.setTransform(this.scaleFactor,0,0,this.scaleFactor,this.translationX*this.scaleFactor+e,this.translationY*this.scaleFactor+e)}function q(e){const t=new Path2D;for(let n=0,r=e.length;n<r;n++){const[r,i,s,a]=e[n];0===n&&t.moveTo(...r),t.bezierCurveTo(i[0],i[1],s[0],s[1],a[0],a[1])}return t}function H(e,t,n){const[r,i,s,a]=t;switch(n){case 0:for(let t=0,n=e.length;t<n;t+=2)e[t]+=r,e[t+1]=a-e[t+1];break;case 90:for(let t=0,n=e.length;t<n;t+=2){const n=e[t];e[t]=e[t+1]+r,e[t+1]=n+i}break;case 180:for(let t=0,n=e.length;t<n;t+=2)e[t]=s-e[t],e[t+1]+=i;break;case 270:for(let t=0,n=e.length;t<n;t+=2){const n=e[t];e[t]=s-e[t+1],e[t+1]=a-n}break;default:throw new Error("Invalid rotation")}return e}function V(e,t,n){const[r,i,s,a]=t;switch(n){case 0:for(let t=0,n=e.length;t<n;t+=2)e[t]-=r,e[t+1]=a-e[t+1];break;case 90:for(let t=0,n=e.length;t<n;t+=2){const n=e[t];e[t]=e[t+1]-i,e[t+1]=n-r}break;case 180:for(let t=0,n=e.length;t<n;t+=2)e[t]=s-e[t],e[t+1]-=i;break;case 270:for(let t=0,n=e.length;t<n;t+=2){const n=e[t];e[t]=a-e[t+1],e[t+1]=s-n}break;default:throw new Error("Invalid rotation")}return e}function K(e,t,n,i){const s=[],a=this.thickness/2,o=e*t+a,l=e*n+a;for(const c of this.paths){const t=[],n=[];for(let r=0,i=c.length;r<i;r++){const[s,a,u,d]=c[r],h=e*s[0]+o,p=e*s[1]+l,f=e*a[0]+o,m=e*a[1]+l,g=e*u[0]+o,v=e*u[1]+l,_=e*d[0]+o,y=e*d[1]+l;0===r&&(t.push(h,p),n.push(h,p)),t.push(f,m,g,v,_,y),n.push(f,m),r===i-1&&n.push(_,y)}s.push({bezier:H.call(r,t,i,this.rotation),points:H.call(r,n,i,this.rotation)})}return s}function X(){let e=1/0,t=-1/0,n=1/0,r=-1/0;for(const s of this.paths)for(const[a,o,l,c]of s){const s=i.Util.bezierBoundingBox(...a,...o,...l,...c);e=Math.min(e,s[0]),n=Math.min(n,s[1]),t=Math.max(t,s[2]),r=Math.max(r,s[3])}return[e,n,t,r]}function Y(){return _classPrivateFieldGet(g,this)?Math.ceil(this.thickness*this.parentScale):0}function Q(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(this.isEmpty())return;if(!_classPrivateFieldGet(g,this))return void _assertClassBrand(P,this,L).call(this);const t=_assertClassBrand(P,this,X).call(this),n=_assertClassBrand(P,this,Y).call(this);_classPrivateFieldSet(u,this,Math.max(s.AnnotationEditor.MIN_SIZE,t[2]-t[0])),_classPrivateFieldSet(c,this,Math.max(s.AnnotationEditor.MIN_SIZE,t[3]-t[1]));const r=Math.ceil(n+_classPrivateFieldGet(u,this)*this.scaleFactor),i=Math.ceil(n+_classPrivateFieldGet(c,this)*this.scaleFactor),[a,o]=this.parentDimensions;this.width=r/a,this.height=i/o,this.setAspectRatio(r,i);const l=this.translationX,d=this.translationY;this.translationX=-t[0],this.translationY=-t[1],_assertClassBrand(P,this,B).call(this),_assertClassBrand(P,this,L).call(this),_classPrivateFieldSet(b,this,r),_classPrivateFieldSet(w,this,i),this.setDims(r,i);const h=e?n/this.scaleFactor/2:0;this.translate(l-this.translationX-h,d-this.translationY-h)}r=C,_defineProperty(C,"_defaultColor",null),_defineProperty(C,"_defaultOpacity",1),_defineProperty(C,"_defaultThickness",1),_defineProperty(C,"_type","ink"),t.InkEditor=C},(e,t,n)=>{var r;Object.defineProperty(t,"__esModule",{value:!0}),t.StampEditor=void 0;var i=n(1),s=n(4),a=n(6),o=n(29),l=new WeakMap,c=new WeakMap,u=new WeakMap,d=new WeakMap,h=new WeakMap,p=new WeakMap,f=new WeakMap,m=new WeakMap,g=new WeakMap,v=new WeakMap,_=new WeakSet;class y extends s.AnnotationEditor{constructor(e){super({...e,name:"stampEditor"}),_classPrivateMethodInitSpec(this,_),_classPrivateFieldInitSpec(this,l,null),_classPrivateFieldInitSpec(this,c,null),_classPrivateFieldInitSpec(this,u,null),_classPrivateFieldInitSpec(this,d,null),_classPrivateFieldInitSpec(this,h,null),_classPrivateFieldInitSpec(this,p,null),_classPrivateFieldInitSpec(this,f,null),_classPrivateFieldInitSpec(this,m,null),_classPrivateFieldInitSpec(this,g,!1),_classPrivateFieldInitSpec(this,v,!1),_classPrivateFieldSet(d,this,e.bitmapUrl),_classPrivateFieldSet(h,this,e.bitmapFile)}static initialize(e){s.AnnotationEditor.initialize(e)}static get supportedTypes(){return(0,i.shadow)(this,"supportedTypes",["apng","avif","bmp","gif","jpeg","png","svg+xml","webp","x-icon"].map((e=>"image/".concat(e))))}static get supportedTypesStr(){return(0,i.shadow)(this,"supportedTypesStr",this.supportedTypes.join(","))}static isHandlingMimeForPasting(e){return this.supportedTypes.includes(e)}static paste(e,t){t.pasteEditor(i.AnnotationEditorType.STAMP,{bitmapFile:e.getAsFile()})}remove(){var e,t;_classPrivateFieldGet(c,this)&&(_classPrivateFieldSet(l,this,null),this._uiManager.imageManager.deleteId(_classPrivateFieldGet(c,this)),null===(e=_classPrivateFieldGet(p,this))||void 0===e||e.remove(),_classPrivateFieldSet(p,this,null),null===(t=_classPrivateFieldGet(f,this))||void 0===t||t.disconnect(),_classPrivateFieldSet(f,this,null)),super.remove()}rebuild(){this.parent?(super.rebuild(),null!==this.div&&(_classPrivateFieldGet(c,this)&&_assertClassBrand(_,this,S).call(this),this.isAttachedToDOM||this.parent.add(this))):_classPrivateFieldGet(c,this)&&_assertClassBrand(_,this,S).call(this)}onceAdded(){this._isDraggable=!0,this.div.focus()}isEmpty(){return!(_classPrivateFieldGet(u,this)||_classPrivateFieldGet(l,this)||_classPrivateFieldGet(d,this)||_classPrivateFieldGet(h,this))}get isResizable(){return!0}render(){if(this.div)return this.div;let e,t;if(this.width&&(e=this.x,t=this.y),super.render(),this.div.hidden=!0,_classPrivateFieldGet(l,this)?_assertClassBrand(_,this,P).call(this):_assertClassBrand(_,this,S).call(this),this.width){const[n,r]=this.parentDimensions;this.setAt(e*n,t*r,this.width*n,this.height*r)}return this.div}static deserialize(e,t,n){if(e instanceof o.StampAnnotationElement)return null;const r=super.deserialize(e,t,n),{rect:i,bitmapUrl:s,bitmapId:a,isSvg:l,accessibilityData:u}=e;a&&n.imageManager.isValidId(a)?_classPrivateFieldSet(c,r,a):_classPrivateFieldSet(d,r,s),_classPrivateFieldSet(g,r,l);const[h,p]=r.pageDimensions;return r.width=(i[2]-i[0])/h,r.height=(i[3]-i[1])/p,u&&(r.altTextData=u),r}serialize(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(this.isEmpty())return null;const n={annotationType:i.AnnotationEditorType.STAMP,bitmapId:_classPrivateFieldGet(c,this),pageIndex:this.pageIndex,rect:this.getRect(0,0),rotation:this.rotation,isSvg:_classPrivateFieldGet(g,this),structTreeParentId:this._structTreeParentId};if(e)return n.bitmapUrl=_assertClassBrand(_,this,k).call(this,!0),n.accessibilityData=this.altTextData,n;const{decorative:r,altText:s}=this.altTextData;if(!r&&s&&(n.accessibilityData={type:"Figure",alt:s}),null===t)return n;t.stamps||(t.stamps=new Map);const a=_classPrivateFieldGet(g,this)?(n.rect[2]-n.rect[0])*(n.rect[3]-n.rect[1]):null;if(t.stamps.has(_classPrivateFieldGet(c,this))){if(_classPrivateFieldGet(g,this)){const e=t.stamps.get(_classPrivateFieldGet(c,this));a>e.area&&(e.area=a,e.serialized.bitmap.close(),e.serialized.bitmap=_assertClassBrand(_,this,k).call(this,!1))}}else t.stamps.set(_classPrivateFieldGet(c,this),{area:a,serialized:n}),n.bitmap=_assertClassBrand(_,this,k).call(this,!1);return n}}function b(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];e?(_classPrivateFieldSet(l,this,e.bitmap),t||(_classPrivateFieldSet(c,this,e.id),_classPrivateFieldSet(g,this,e.isSvg)),_assertClassBrand(_,this,P).call(this)):this.remove()}function w(){_classPrivateFieldSet(u,this,null),this._uiManager.enableWaiting(!1),_classPrivateFieldGet(p,this)&&this.div.focus()}function S(){if(_classPrivateFieldGet(c,this))return this._uiManager.enableWaiting(!0),void this._uiManager.imageManager.getFromId(_classPrivateFieldGet(c,this)).then((e=>_assertClassBrand(_,this,b).call(this,e,!0))).finally((()=>_assertClassBrand(_,this,w).call(this)));if(_classPrivateFieldGet(d,this)){const e=_classPrivateFieldGet(d,this);return _classPrivateFieldSet(d,this,null),this._uiManager.enableWaiting(!0),void _classPrivateFieldSet(u,this,this._uiManager.imageManager.getFromUrl(e).then((e=>_assertClassBrand(_,this,b).call(this,e))).finally((()=>_assertClassBrand(_,this,w).call(this))))}if(_classPrivateFieldGet(h,this)){const e=_classPrivateFieldGet(h,this);return _classPrivateFieldSet(h,this,null),this._uiManager.enableWaiting(!0),void _classPrivateFieldSet(u,this,this._uiManager.imageManager.getFromFile(e).then((e=>_assertClassBrand(_,this,b).call(this,e))).finally((()=>_assertClassBrand(_,this,w).call(this))))}const e=document.createElement("input");e.type="file",e.accept=r.supportedTypesStr,_classPrivateFieldSet(u,this,new Promise((t=>{e.addEventListener("change",(async()=>{if(e.files&&0!==e.files.length){this._uiManager.enableWaiting(!0);const t=await this._uiManager.imageManager.getFromFile(e.files[0]);_assertClassBrand(_,this,b).call(this,t)}else this.remove();t()})),e.addEventListener("cancel",(()=>{this.remove(),t()}))})).finally((()=>_assertClassBrand(_,this,w).call(this)))),e.click()}function P(){const{div:e}=this;let{width:t,height:n}=_classPrivateFieldGet(l,this);const[r,i]=this.pageDimensions,s=.75;if(this.width)t=this.width*r,n=this.height*i;else if(t>s*r||n>s*i){const e=Math.min(s*r/t,s*i/n);t*=e,n*=e}const[a,o]=this.parentDimensions;this.setDims(t*a/r,n*o/i),this._uiManager.enableWaiting(!1);const c=_classPrivateFieldSet(p,this,document.createElement("canvas"));e.append(c),e.hidden=!1,_assertClassBrand(_,this,x).call(this,t,n),_assertClassBrand(_,this,A).call(this),_classPrivateFieldGet(v,this)||(this.parent.addUndoableEditor(this),_classPrivateFieldSet(v,this,!0)),this._uiManager._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",subtype:this.editorType,data:{action:"inserted_image"}}}),this.addAltTextButton()}function C(e,t){var n;const[r,i]=this.parentDimensions;this.width=e/r,this.height=t/i,this.setDims(e,t),null!==(n=this._initialOptions)&&void 0!==n&&n.isCentered?this.center():this.fixAndSetPosition(),this._initialOptions=null,null!==_classPrivateFieldGet(m,this)&&clearTimeout(_classPrivateFieldGet(m,this)),_classPrivateFieldSet(m,this,setTimeout((()=>{_classPrivateFieldSet(m,this,null),_assertClassBrand(_,this,x).call(this,e,t)}),200))}function E(e,t){const{width:n,height:r}=_classPrivateFieldGet(l,this);let i=n,s=r,a=_classPrivateFieldGet(l,this);for(;i>2*e||s>2*t;){const n=i,r=s;i>2*e&&(i=i>=16384?Math.floor(i/2)-1:Math.ceil(i/2)),s>2*t&&(s=s>=16384?Math.floor(s/2)-1:Math.ceil(s/2));const o=new OffscreenCanvas(i,s);o.getContext("2d").drawImage(a,0,0,n,r,0,0,i,s),a=o.transferToImageBitmap()}return a}function x(e,t){e=Math.ceil(e),t=Math.ceil(t);const n=_classPrivateFieldGet(p,this);if(!n||n.width===e&&n.height===t)return;n.width=e,n.height=t;const r=_classPrivateFieldGet(g,this)?_classPrivateFieldGet(l,this):_assertClassBrand(_,this,E).call(this,e,t),i=n.getContext("2d");i.filter=this._uiManager.hcmFilter,i.drawImage(r,0,0,r.width,r.height,0,0,e,t)}function k(e){if(e){if(_classPrivateFieldGet(g,this)){const e=this._uiManager.imageManager.getSvgUrl(_classPrivateFieldGet(c,this));if(e)return e}const e=document.createElement("canvas");return({width:e.width,height:e.height}=_classPrivateFieldGet(l,this)),e.getContext("2d").drawImage(_classPrivateFieldGet(l,this),0,0),e.toDataURL()}if(_classPrivateFieldGet(g,this)){const[e,t]=this.pageDimensions,n=Math.round(this.width*e*a.PixelsPerInch.PDF_TO_CSS_UNITS),r=Math.round(this.height*t*a.PixelsPerInch.PDF_TO_CSS_UNITS),i=new OffscreenCanvas(n,r);return i.getContext("2d").drawImage(_classPrivateFieldGet(l,this),0,0,_classPrivateFieldGet(l,this).width,_classPrivateFieldGet(l,this).height,0,0,n,r),i.transferToImageBitmap()}return structuredClone(_classPrivateFieldGet(l,this))}function A(){_classPrivateFieldSet(f,this,new ResizeObserver((e=>{const t=e[0].contentRect;t.width&&t.height&&_assertClassBrand(_,this,C).call(this,t.width,t.height)}))),_classPrivateFieldGet(f,this).observe(this.div)}r=y,_defineProperty(y,"_type","stamp"),t.StampEditor=y}],__webpack_module_cache__={};function __w_pdfjs_require__(e){var t=__webpack_module_cache__[e];if(void 0!==t)return t.exports;var n=__webpack_module_cache__[e]={exports:{}};return __webpack_modules__[e](n,n.exports,__w_pdfjs_require__),n.exports}var __nested_webpack_exports__={};return(()=>{var e=__nested_webpack_exports__;Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"AbortException",{enumerable:!0,get:function(){return t.AbortException}}),Object.defineProperty(e,"AnnotationEditorLayer",{enumerable:!0,get:function(){return s.AnnotationEditorLayer}}),Object.defineProperty(e,"AnnotationEditorParamsType",{enumerable:!0,get:function(){return t.AnnotationEditorParamsType}}),Object.defineProperty(e,"AnnotationEditorType",{enumerable:!0,get:function(){return t.AnnotationEditorType}}),Object.defineProperty(e,"AnnotationEditorUIManager",{enumerable:!0,get:function(){return a.AnnotationEditorUIManager}}),Object.defineProperty(e,"AnnotationLayer",{enumerable:!0,get:function(){return o.AnnotationLayer}}),Object.defineProperty(e,"AnnotationMode",{enumerable:!0,get:function(){return t.AnnotationMode}}),Object.defineProperty(e,"CMapCompressionType",{enumerable:!0,get:function(){return t.CMapCompressionType}}),Object.defineProperty(e,"DOMSVGFactory",{enumerable:!0,get:function(){return r.DOMSVGFactory}}),Object.defineProperty(e,"FeatureTest",{enumerable:!0,get:function(){return t.FeatureTest}}),Object.defineProperty(e,"GlobalWorkerOptions",{enumerable:!0,get:function(){return l.GlobalWorkerOptions}}),Object.defineProperty(e,"ImageKind",{enumerable:!0,get:function(){return t.ImageKind}}),Object.defineProperty(e,"InvalidPDFException",{enumerable:!0,get:function(){return t.InvalidPDFException}}),Object.defineProperty(e,"MissingPDFException",{enumerable:!0,get:function(){return t.MissingPDFException}}),Object.defineProperty(e,"OPS",{enumerable:!0,get:function(){return t.OPS}}),Object.defineProperty(e,"PDFDataRangeTransport",{enumerable:!0,get:function(){return n.PDFDataRangeTransport}}),Object.defineProperty(e,"PDFDateString",{enumerable:!0,get:function(){return r.PDFDateString}}),Object.defineProperty(e,"PDFWorker",{enumerable:!0,get:function(){return n.PDFWorker}}),Object.defineProperty(e,"PasswordResponses",{enumerable:!0,get:function(){return t.PasswordResponses}}),Object.defineProperty(e,"PermissionFlag",{enumerable:!0,get:function(){return t.PermissionFlag}}),Object.defineProperty(e,"PixelsPerInch",{enumerable:!0,get:function(){return r.PixelsPerInch}}),Object.defineProperty(e,"PromiseCapability",{enumerable:!0,get:function(){return t.PromiseCapability}}),Object.defineProperty(e,"RenderingCancelledException",{enumerable:!0,get:function(){return r.RenderingCancelledException}}),Object.defineProperty(e,"SVGGraphics",{enumerable:!0,get:function(){return n.SVGGraphics}}),Object.defineProperty(e,"UnexpectedResponseException",{enumerable:!0,get:function(){return t.UnexpectedResponseException}}),Object.defineProperty(e,"Util",{enumerable:!0,get:function(){return t.Util}}),Object.defineProperty(e,"VerbosityLevel",{enumerable:!0,get:function(){return t.VerbosityLevel}}),Object.defineProperty(e,"XfaLayer",{enumerable:!0,get:function(){return c.XfaLayer}}),Object.defineProperty(e,"build",{enumerable:!0,get:function(){return n.build}}),Object.defineProperty(e,"createValidAbsoluteUrl",{enumerable:!0,get:function(){return t.createValidAbsoluteUrl}}),Object.defineProperty(e,"getDocument",{enumerable:!0,get:function(){return n.getDocument}}),Object.defineProperty(e,"getFilenameFromUrl",{enumerable:!0,get:function(){return r.getFilenameFromUrl}}),Object.defineProperty(e,"getPdfFilenameFromUrl",{enumerable:!0,get:function(){return r.getPdfFilenameFromUrl}}),Object.defineProperty(e,"getXfaPageViewport",{enumerable:!0,get:function(){return r.getXfaPageViewport}}),Object.defineProperty(e,"isDataScheme",{enumerable:!0,get:function(){return r.isDataScheme}}),Object.defineProperty(e,"isPdfFile",{enumerable:!0,get:function(){return r.isPdfFile}}),Object.defineProperty(e,"loadScript",{enumerable:!0,get:function(){return r.loadScript}}),Object.defineProperty(e,"noContextMenu",{enumerable:!0,get:function(){return r.noContextMenu}}),Object.defineProperty(e,"normalizeUnicode",{enumerable:!0,get:function(){return t.normalizeUnicode}}),Object.defineProperty(e,"renderTextLayer",{enumerable:!0,get:function(){return i.renderTextLayer}}),Object.defineProperty(e,"setLayerDimensions",{enumerable:!0,get:function(){return r.setLayerDimensions}}),Object.defineProperty(e,"shadow",{enumerable:!0,get:function(){return t.shadow}}),Object.defineProperty(e,"updateTextLayer",{enumerable:!0,get:function(){return i.updateTextLayer}}),Object.defineProperty(e,"version",{enumerable:!0,get:function(){return n.version}});var t=__w_pdfjs_require__(1),n=__w_pdfjs_require__(2),r=__w_pdfjs_require__(6),i=__w_pdfjs_require__(26),s=__w_pdfjs_require__(27),a=__w_pdfjs_require__(5),o=__w_pdfjs_require__(29),l=__w_pdfjs_require__(14),c=__w_pdfjs_require__(32)})(),__nested_webpack_exports__})(),module.exports=root.pdfjsLib=factory()},730:(e,t,n)=>{"use strict";var r=n(43),i=n(853);function s(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var a=new Set,o={};function l(e,t){c(e,t),c(e+"Capture",t)}function c(e,t){for(o[e]=t,e=0;e<t.length;e++)a.add(t[e])}var u=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),d=Object.prototype.hasOwnProperty,h=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,p={},f={};function m(e,t,n,r,i,s,a){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=s,this.removeEmptyString=a}var g={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach((function(e){g[e]=new m(e,0,!1,e,null,!1,!1)})),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach((function(e){var t=e[0];g[t]=new m(t,1,!1,e[1],null,!1,!1)})),["contentEditable","draggable","spellCheck","value"].forEach((function(e){g[e]=new m(e,2,!1,e.toLowerCase(),null,!1,!1)})),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach((function(e){g[e]=new m(e,2,!1,e,null,!1,!1)})),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach((function(e){g[e]=new m(e,3,!1,e.toLowerCase(),null,!1,!1)})),["checked","multiple","muted","selected"].forEach((function(e){g[e]=new m(e,3,!0,e,null,!1,!1)})),["capture","download"].forEach((function(e){g[e]=new m(e,4,!1,e,null,!1,!1)})),["cols","rows","size","span"].forEach((function(e){g[e]=new m(e,6,!1,e,null,!1,!1)})),["rowSpan","start"].forEach((function(e){g[e]=new m(e,5,!1,e.toLowerCase(),null,!1,!1)}));var v=/[\-:]([a-z])/g;function _(e){return e[1].toUpperCase()}function y(e,t,n,r){var i=g.hasOwnProperty(t)?g[t]:null;(null!==i?0!==i.type:r||!(2<t.length)||"o"!==t[0]&&"O"!==t[0]||"n"!==t[1]&&"N"!==t[1])&&(function(e,t,n,r){if(null===t||"undefined"===typeof t||function(e,t,n,r){if(null!==n&&0===n.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!r&&(null!==n?!n.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(e,t,n,r))return!0;if(r)return!1;if(null!==n)switch(n.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}(t,n,i,r)&&(n=null),r||null===i?function(e){return!!d.call(f,e)||!d.call(p,e)&&(h.test(e)?f[e]=!0:(p[e]=!0,!1))}(t)&&(null===n?e.removeAttribute(t):e.setAttribute(t,""+n)):i.mustUseProperty?e[i.propertyName]=null===n?3!==i.type&&"":n:(t=i.attributeName,r=i.attributeNamespace,null===n?e.removeAttribute(t):(n=3===(i=i.type)||4===i&&!0===n?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach((function(e){var t=e.replace(v,_);g[t]=new m(t,1,!1,e,null,!1,!1)})),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach((function(e){var t=e.replace(v,_);g[t]=new m(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)})),["xml:base","xml:lang","xml:space"].forEach((function(e){var t=e.replace(v,_);g[t]=new m(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)})),["tabIndex","crossOrigin"].forEach((function(e){g[e]=new m(e,1,!1,e.toLowerCase(),null,!1,!1)})),g.xlinkHref=new m("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach((function(e){g[e]=new m(e,1,!1,e.toLowerCase(),null,!0,!0)}));var b=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,w=Symbol.for("react.element"),S=Symbol.for("react.portal"),P=Symbol.for("react.fragment"),C=Symbol.for("react.strict_mode"),E=Symbol.for("react.profiler"),x=Symbol.for("react.provider"),k=Symbol.for("react.context"),A=Symbol.for("react.forward_ref"),T=Symbol.for("react.suspense"),F=Symbol.for("react.suspense_list"),I=Symbol.for("react.memo"),R=Symbol.for("react.lazy");Symbol.for("react.scope"),Symbol.for("react.debug_trace_mode");var M=Symbol.for("react.offscreen");Symbol.for("react.legacy_hidden"),Symbol.for("react.cache"),Symbol.for("react.tracing_marker");var N=Symbol.iterator;function D(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=N&&e[N]||e["@@iterator"])?e:null}var O,L=Object.assign;function j(e){if(void 0===O)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);O=t&&t[1]||""}return"\n"+O+e}var U=!1;function G(e,t){if(!e||U)return"";U=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),"object"===typeof Reflect&&Reflect.construct){try{Reflect.construct(t,[])}catch(c){var r=c}Reflect.construct(e,[],t)}else{try{t.call()}catch(c){r=c}e.call(t.prototype)}else{try{throw Error()}catch(c){r=c}e()}}catch(c){if(c&&r&&"string"===typeof c.stack){for(var i=c.stack.split("\n"),s=r.stack.split("\n"),a=i.length-1,o=s.length-1;1<=a&&0<=o&&i[a]!==s[o];)o--;for(;1<=a&&0<=o;a--,o--)if(i[a]!==s[o]){if(1!==a||1!==o)do{if(a--,0>--o||i[a]!==s[o]){var l="\n"+i[a].replace(" at new "," at ");return e.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",e.displayName)),l}}while(1<=a&&0<=o);break}}}finally{U=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?j(e):""}function B(e){switch(e.tag){case 5:return j(e.type);case 16:return j("Lazy");case 13:return j("Suspense");case 19:return j("SuspenseList");case 0:case 2:case 15:return e=G(e.type,!1);case 11:return e=G(e.type.render,!1);case 1:return e=G(e.type,!0);default:return""}}function W(e){if(null==e)return null;if("function"===typeof e)return e.displayName||e.name||null;if("string"===typeof e)return e;switch(e){case P:return"Fragment";case S:return"Portal";case E:return"Profiler";case C:return"StrictMode";case T:return"Suspense";case F:return"SuspenseList"}if("object"===typeof e)switch(e.$$typeof){case k:return(e.displayName||"Context")+".Consumer";case x:return(e._context.displayName||"Context")+".Provider";case A:var t=e.render;return(e=e.displayName)||(e=""!==(e=t.displayName||t.name||"")?"ForwardRef("+e+")":"ForwardRef"),e;case I:return null!==(t=e.displayName||null)?t:W(e.type)||"Memo";case R:t=e._payload,e=e._init;try{return W(e(t))}catch(n){}}return null}function z(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=(e=t.render).displayName||e.name||"",t.displayName||(""!==e?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return W(t);case 8:return t===C?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if("function"===typeof t)return t.displayName||t.name||null;if("string"===typeof t)return t}return null}function q(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":case"object":return e;default:return""}}function H(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function V(e){e._valueTracker||(e._valueTracker=function(e){var t=H(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&"undefined"!==typeof n&&"function"===typeof n.get&&"function"===typeof n.set){var i=n.get,s=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(e){r=""+e,s.call(this,e)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(e){r=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function K(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=H(e)?e.checked?"true":"false":e.value),(e=r)!==n&&(t.setValue(e),!0)}function X(e){if("undefined"===typeof(e=e||("undefined"!==typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}function Y(e,t){var n=t.checked;return L({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=n?n:e._wrapperState.initialChecked})}function Q(e,t){var n=null==t.defaultValue?"":t.defaultValue,r=null!=t.checked?t.checked:t.defaultChecked;n=q(null!=t.value?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function J(e,t){null!=(t=t.checked)&&y(e,"checked",t,!1)}function $(e,t){J(e,t);var n=q(t.value),r=t.type;if(null!=n)"number"===r?(0===n&&""===e.value||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if("submit"===r||"reset"===r)return void e.removeAttribute("value");t.hasOwnProperty("value")?ee(e,t.type,n):t.hasOwnProperty("defaultValue")&&ee(e,t.type,q(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function Z(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!("submit"!==r&&"reset"!==r||void 0!==t.value&&null!==t.value))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}""!==(n=e.name)&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,""!==n&&(e.name=n)}function ee(e,t,n){"number"===t&&X(e.ownerDocument)===e||(null==n?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var te=Array.isArray;function ne(e,t,n,r){if(e=e.options,t){t={};for(var i=0;i<n.length;i++)t["$"+n[i]]=!0;for(n=0;n<e.length;n++)i=t.hasOwnProperty("$"+e[n].value),e[n].selected!==i&&(e[n].selected=i),i&&r&&(e[n].defaultSelected=!0)}else{for(n=""+q(n),t=null,i=0;i<e.length;i++){if(e[i].value===n)return e[i].selected=!0,void(r&&(e[i].defaultSelected=!0));null!==t||e[i].disabled||(t=e[i])}null!==t&&(t.selected=!0)}}function re(e,t){if(null!=t.dangerouslySetInnerHTML)throw Error(s(91));return L({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function ie(e,t){var n=t.value;if(null==n){if(n=t.children,t=t.defaultValue,null!=n){if(null!=t)throw Error(s(92));if(te(n)){if(1<n.length)throw Error(s(93));n=n[0]}t=n}null==t&&(t=""),n=t}e._wrapperState={initialValue:q(n)}}function se(e,t){var n=q(t.value),r=q(t.defaultValue);null!=n&&((n=""+n)!==e.value&&(e.value=n),null==t.defaultValue&&e.defaultValue!==n&&(e.defaultValue=n)),null!=r&&(e.defaultValue=""+r)}function ae(e){var t=e.textContent;t===e._wrapperState.initialValue&&""!==t&&null!==t&&(e.value=t)}function oe(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function le(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?oe(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}var ce,ue,de=(ue=function(e,t){if("http://www.w3.org/2000/svg"!==e.namespaceURI||"innerHTML"in e)e.innerHTML=t;else{for((ce=ce||document.createElement("div")).innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=ce.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}},"undefined"!==typeof MSApp&&MSApp.execUnsafeLocalFunction?function(e,t,n,r){MSApp.execUnsafeLocalFunction((function(){return ue(e,t)}))}:ue);function he(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}var pe={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},fe=["Webkit","ms","Moz","O"];function me(e,t,n){return null==t||"boolean"===typeof t||""===t?"":n||"number"!==typeof t||0===t||pe.hasOwnProperty(e)&&pe[e]?(""+t).trim():t+"px"}function ge(e,t){for(var n in e=e.style,t)if(t.hasOwnProperty(n)){var r=0===n.indexOf("--"),i=me(n,t[n],r);"float"===n&&(n="cssFloat"),r?e.setProperty(n,i):e[n]=i}}Object.keys(pe).forEach((function(e){fe.forEach((function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),pe[t]=pe[e]}))}));var ve=L({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function _e(e,t){if(t){if(ve[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML))throw Error(s(137,e));if(null!=t.dangerouslySetInnerHTML){if(null!=t.children)throw Error(s(60));if("object"!==typeof t.dangerouslySetInnerHTML||!("__html"in t.dangerouslySetInnerHTML))throw Error(s(61))}if(null!=t.style&&"object"!==typeof t.style)throw Error(s(62))}}function ye(e,t){if(-1===e.indexOf("-"))return"string"===typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var be=null;function we(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var Se=null,Pe=null,Ce=null;function Ee(e){if(e=yi(e)){if("function"!==typeof Se)throw Error(s(280));var t=e.stateNode;t&&(t=wi(t),Se(e.stateNode,e.type,t))}}function xe(e){Pe?Ce?Ce.push(e):Ce=[e]:Pe=e}function ke(){if(Pe){var e=Pe,t=Ce;if(Ce=Pe=null,Ee(e),t)for(e=0;e<t.length;e++)Ee(t[e])}}function Ae(e,t){return e(t)}function Te(){}var Fe=!1;function Ie(e,t,n){if(Fe)return e(t,n);Fe=!0;try{return Ae(e,t,n)}finally{Fe=!1,(null!==Pe||null!==Ce)&&(Te(),ke())}}function Re(e,t){var n=e.stateNode;if(null===n)return null;var r=wi(n);if(null===r)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(r=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!r;break e;default:e=!1}if(e)return null;if(n&&"function"!==typeof n)throw Error(s(231,t,typeof n));return n}var Me=!1;if(u)try{var Ne={};Object.defineProperty(Ne,"passive",{get:function(){Me=!0}}),window.addEventListener("test",Ne,Ne),window.removeEventListener("test",Ne,Ne)}catch(ue){Me=!1}function De(e,t,n,r,i,s,a,o,l){var c=Array.prototype.slice.call(arguments,3);try{t.apply(n,c)}catch(u){this.onError(u)}}var Oe=!1,Le=null,je=!1,Ue=null,Ge={onError:function(e){Oe=!0,Le=e}};function Be(e,t,n,r,i,s,a,o,l){Oe=!1,Le=null,De.apply(Ge,arguments)}function We(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!==(4098&(t=e).flags)&&(n=t.return),e=t.return}while(e)}return 3===t.tag?n:null}function ze(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function qe(e){if(We(e)!==e)throw Error(s(188))}function He(e){return null!==(e=function(e){var t=e.alternate;if(!t){if(null===(t=We(e)))throw Error(s(188));return t!==e?null:e}for(var n=e,r=t;;){var i=n.return;if(null===i)break;var a=i.alternate;if(null===a){if(null!==(r=i.return)){n=r;continue}break}if(i.child===a.child){for(a=i.child;a;){if(a===n)return qe(i),e;if(a===r)return qe(i),t;a=a.sibling}throw Error(s(188))}if(n.return!==r.return)n=i,r=a;else{for(var o=!1,l=i.child;l;){if(l===n){o=!0,n=i,r=a;break}if(l===r){o=!0,r=i,n=a;break}l=l.sibling}if(!o){for(l=a.child;l;){if(l===n){o=!0,n=a,r=i;break}if(l===r){o=!0,r=a,n=i;break}l=l.sibling}if(!o)throw Error(s(189))}}if(n.alternate!==r)throw Error(s(190))}if(3!==n.tag)throw Error(s(188));return n.stateNode.current===n?e:t}(e))?Ve(e):null}function Ve(e){if(5===e.tag||6===e.tag)return e;for(e=e.child;null!==e;){var t=Ve(e);if(null!==t)return t;e=e.sibling}return null}var Ke=i.unstable_scheduleCallback,Xe=i.unstable_cancelCallback,Ye=i.unstable_shouldYield,Qe=i.unstable_requestPaint,Je=i.unstable_now,$e=i.unstable_getCurrentPriorityLevel,Ze=i.unstable_ImmediatePriority,et=i.unstable_UserBlockingPriority,tt=i.unstable_NormalPriority,nt=i.unstable_LowPriority,rt=i.unstable_IdlePriority,it=null,st=null;var at=Math.clz32?Math.clz32:function(e){return e>>>=0,0===e?32:31-(ot(e)/lt|0)|0},ot=Math.log,lt=Math.LN2;var ct=64,ut=4194304;function dt(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194240&e;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return 130023424&e;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function ht(e,t){var n=e.pendingLanes;if(0===n)return 0;var r=0,i=e.suspendedLanes,s=e.pingedLanes,a=268435455&n;if(0!==a){var o=a&~i;0!==o?r=dt(o):0!==(s&=a)&&(r=dt(s))}else 0!==(a=n&~i)?r=dt(a):0!==s&&(r=dt(s));if(0===r)return 0;if(0!==t&&t!==r&&0===(t&i)&&((i=r&-r)>=(s=t&-t)||16===i&&0!==(4194240&s)))return t;if(0!==(4&r)&&(r|=16&n),0!==(t=e.entangledLanes))for(e=e.entanglements,t&=r;0<t;)i=1<<(n=31-at(t)),r|=e[n],t&=~i;return r}function pt(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;default:return-1}}function ft(e){return 0!==(e=-1073741825&e.pendingLanes)?e:1073741824&e?1073741824:0}function mt(){var e=ct;return 0===(4194240&(ct<<=1))&&(ct=64),e}function gt(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function vt(e,t,n){e.pendingLanes|=t,536870912!==t&&(e.suspendedLanes=0,e.pingedLanes=0),(e=e.eventTimes)[t=31-at(t)]=n}function _t(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-at(n),i=1<<r;i&t|e[r]&t&&(e[r]|=t),n&=~i}}var yt=0;function bt(e){return 1<(e&=-e)?4<e?0!==(268435455&e)?16:536870912:4:1}var wt,St,Pt,Ct,Et,xt=!1,kt=[],At=null,Tt=null,Ft=null,It=new Map,Rt=new Map,Mt=[],Nt="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Dt(e,t){switch(e){case"focusin":case"focusout":At=null;break;case"dragenter":case"dragleave":Tt=null;break;case"mouseover":case"mouseout":Ft=null;break;case"pointerover":case"pointerout":It.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Rt.delete(t.pointerId)}}function Ot(e,t,n,r,i,s){return null===e||e.nativeEvent!==s?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:s,targetContainers:[i]},null!==t&&(null!==(t=yi(t))&&St(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,null!==i&&-1===t.indexOf(i)&&t.push(i),e)}function Lt(e){var t=_i(e.target);if(null!==t){var n=We(t);if(null!==n)if(13===(t=n.tag)){if(null!==(t=ze(n)))return e.blockedOn=t,void Et(e.priority,(function(){Pt(n)}))}else if(3===t&&n.stateNode.current.memoizedState.isDehydrated)return void(e.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}e.blockedOn=null}function jt(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var n=Yt(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==n)return null!==(t=yi(n))&&St(t),e.blockedOn=n,!1;var r=new(n=e.nativeEvent).constructor(n.type,n);be=r,n.target.dispatchEvent(r),be=null,t.shift()}return!0}function Ut(e,t,n){jt(e)&&n.delete(t)}function Gt(){xt=!1,null!==At&&jt(At)&&(At=null),null!==Tt&&jt(Tt)&&(Tt=null),null!==Ft&&jt(Ft)&&(Ft=null),It.forEach(Ut),Rt.forEach(Ut)}function Bt(e,t){e.blockedOn===t&&(e.blockedOn=null,xt||(xt=!0,i.unstable_scheduleCallback(i.unstable_NormalPriority,Gt)))}function Wt(e){function t(t){return Bt(t,e)}if(0<kt.length){Bt(kt[0],e);for(var n=1;n<kt.length;n++){var r=kt[n];r.blockedOn===e&&(r.blockedOn=null)}}for(null!==At&&Bt(At,e),null!==Tt&&Bt(Tt,e),null!==Ft&&Bt(Ft,e),It.forEach(t),Rt.forEach(t),n=0;n<Mt.length;n++)(r=Mt[n]).blockedOn===e&&(r.blockedOn=null);for(;0<Mt.length&&null===(n=Mt[0]).blockedOn;)Lt(n),null===n.blockedOn&&Mt.shift()}var zt=b.ReactCurrentBatchConfig,qt=!0;function Ht(e,t,n,r){var i=yt,s=zt.transition;zt.transition=null;try{yt=1,Kt(e,t,n,r)}finally{yt=i,zt.transition=s}}function Vt(e,t,n,r){var i=yt,s=zt.transition;zt.transition=null;try{yt=4,Kt(e,t,n,r)}finally{yt=i,zt.transition=s}}function Kt(e,t,n,r){if(qt){var i=Yt(e,t,n,r);if(null===i)qr(e,t,r,Xt,n),Dt(e,r);else if(function(e,t,n,r,i){switch(t){case"focusin":return At=Ot(At,e,t,n,r,i),!0;case"dragenter":return Tt=Ot(Tt,e,t,n,r,i),!0;case"mouseover":return Ft=Ot(Ft,e,t,n,r,i),!0;case"pointerover":var s=i.pointerId;return It.set(s,Ot(It.get(s)||null,e,t,n,r,i)),!0;case"gotpointercapture":return s=i.pointerId,Rt.set(s,Ot(Rt.get(s)||null,e,t,n,r,i)),!0}return!1}(i,e,t,n,r))r.stopPropagation();else if(Dt(e,r),4&t&&-1<Nt.indexOf(e)){for(;null!==i;){var s=yi(i);if(null!==s&&wt(s),null===(s=Yt(e,t,n,r))&&qr(e,t,r,Xt,n),s===i)break;i=s}null!==i&&r.stopPropagation()}else qr(e,t,r,null,n)}}var Xt=null;function Yt(e,t,n,r){if(Xt=null,null!==(e=_i(e=we(r))))if(null===(t=We(e)))e=null;else if(13===(n=t.tag)){if(null!==(e=ze(t)))return e;e=null}else if(3===n){if(t.stateNode.current.memoizedState.isDehydrated)return 3===t.tag?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Xt=e,null}function Qt(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch($e()){case Ze:return 1;case et:return 4;case tt:case nt:return 16;case rt:return 536870912;default:return 16}default:return 16}}var Jt=null,$t=null,Zt=null;function en(){if(Zt)return Zt;var e,t,n=$t,r=n.length,i="value"in Jt?Jt.value:Jt.textContent,s=i.length;for(e=0;e<r&&n[e]===i[e];e++);var a=r-e;for(t=1;t<=a&&n[r-t]===i[s-t];t++);return Zt=i.slice(e,1<t?1-t:void 0)}function tn(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function nn(){return!0}function rn(){return!1}function sn(e){function t(t,n,r,i,s){for(var a in this._reactName=t,this._targetInst=r,this.type=n,this.nativeEvent=i,this.target=s,this.currentTarget=null,e)e.hasOwnProperty(a)&&(t=e[a],this[a]=t?t(i):i[a]);return this.isDefaultPrevented=(null!=i.defaultPrevented?i.defaultPrevented:!1===i.returnValue)?nn:rn,this.isPropagationStopped=rn,this}return L(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!==typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=nn)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!==typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=nn)},persist:function(){},isPersistent:nn}),t}var an,on,ln,cn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},un=sn(cn),dn=L({},cn,{view:0,detail:0}),hn=sn(dn),pn=L({},dn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:En,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==ln&&(ln&&"mousemove"===e.type?(an=e.screenX-ln.screenX,on=e.screenY-ln.screenY):on=an=0,ln=e),an)},movementY:function(e){return"movementY"in e?e.movementY:on}}),fn=sn(pn),mn=sn(L({},pn,{dataTransfer:0})),gn=sn(L({},dn,{relatedTarget:0})),vn=sn(L({},cn,{animationName:0,elapsedTime:0,pseudoElement:0})),_n=L({},cn,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),yn=sn(_n),bn=sn(L({},cn,{data:0})),wn={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Sn={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Pn={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Cn(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=Pn[e])&&!!t[e]}function En(){return Cn}var xn=L({},dn,{key:function(e){if(e.key){var t=wn[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=tn(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?Sn[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:En,charCode:function(e){return"keypress"===e.type?tn(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?tn(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}}),kn=sn(xn),An=sn(L({},pn,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),Tn=sn(L({},dn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:En})),Fn=sn(L({},cn,{propertyName:0,elapsedTime:0,pseudoElement:0})),In=L({},pn,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Rn=sn(In),Mn=[9,13,27,32],Nn=u&&"CompositionEvent"in window,Dn=null;u&&"documentMode"in document&&(Dn=document.documentMode);var On=u&&"TextEvent"in window&&!Dn,Ln=u&&(!Nn||Dn&&8<Dn&&11>=Dn),jn=String.fromCharCode(32),Un=!1;function Gn(e,t){switch(e){case"keyup":return-1!==Mn.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Bn(e){return"object"===typeof(e=e.detail)&&"data"in e?e.data:null}var Wn=!1;var zn={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function qn(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!zn[e.type]:"textarea"===t}function Hn(e,t,n,r){xe(r),0<(t=Vr(t,"onChange")).length&&(n=new un("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var Vn=null,Kn=null;function Xn(e){jr(e,0)}function Yn(e){if(K(bi(e)))return e}function Qn(e,t){if("change"===e)return t}var Jn=!1;if(u){var $n;if(u){var Zn="oninput"in document;if(!Zn){var er=document.createElement("div");er.setAttribute("oninput","return;"),Zn="function"===typeof er.oninput}$n=Zn}else $n=!1;Jn=$n&&(!document.documentMode||9<document.documentMode)}function tr(){Vn&&(Vn.detachEvent("onpropertychange",nr),Kn=Vn=null)}function nr(e){if("value"===e.propertyName&&Yn(Kn)){var t=[];Hn(t,Kn,e,we(e)),Ie(Xn,t)}}function rr(e,t,n){"focusin"===e?(tr(),Kn=n,(Vn=t).attachEvent("onpropertychange",nr)):"focusout"===e&&tr()}function ir(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return Yn(Kn)}function sr(e,t){if("click"===e)return Yn(t)}function ar(e,t){if("input"===e||"change"===e)return Yn(t)}var or="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t};function lr(e,t){if(or(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!d.call(t,i)||!or(e[i],t[i]))return!1}return!0}function cr(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function ur(e,t){var n,r=cr(e);for(e=0;r;){if(3===r.nodeType){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=cr(r)}}function dr(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?dr(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function hr(){for(var e=window,t=X();t instanceof e.HTMLIFrameElement;){try{var n="string"===typeof t.contentWindow.location.href}catch(r){n=!1}if(!n)break;t=X((e=t.contentWindow).document)}return t}function pr(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}function fr(e){var t=hr(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&dr(n.ownerDocument.documentElement,n)){if(null!==r&&pr(n))if(t=r.start,void 0===(e=r.end)&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if((e=(t=n.ownerDocument||document)&&t.defaultView||window).getSelection){e=e.getSelection();var i=n.textContent.length,s=Math.min(r.start,i);r=void 0===r.end?s:Math.min(r.end,i),!e.extend&&s>r&&(i=r,r=s,s=i),i=ur(n,s);var a=ur(n,r);i&&a&&(1!==e.rangeCount||e.anchorNode!==i.node||e.anchorOffset!==i.offset||e.focusNode!==a.node||e.focusOffset!==a.offset)&&((t=t.createRange()).setStart(i.node,i.offset),e.removeAllRanges(),s>r?(e.addRange(t),e.extend(a.node,a.offset)):(t.setEnd(a.node,a.offset),e.addRange(t)))}for(t=[],e=n;e=e.parentNode;)1===e.nodeType&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for("function"===typeof n.focus&&n.focus(),n=0;n<t.length;n++)(e=t[n]).element.scrollLeft=e.left,e.element.scrollTop=e.top}}var mr=u&&"documentMode"in document&&11>=document.documentMode,gr=null,vr=null,_r=null,yr=!1;function br(e,t,n){var r=n.window===n?n.document:9===n.nodeType?n:n.ownerDocument;yr||null==gr||gr!==X(r)||("selectionStart"in(r=gr)&&pr(r)?r={start:r.selectionStart,end:r.selectionEnd}:r={anchorNode:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset},_r&&lr(_r,r)||(_r=r,0<(r=Vr(vr,"onSelect")).length&&(t=new un("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=gr)))}function wr(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var Sr={animationend:wr("Animation","AnimationEnd"),animationiteration:wr("Animation","AnimationIteration"),animationstart:wr("Animation","AnimationStart"),transitionend:wr("Transition","TransitionEnd")},Pr={},Cr={};function Er(e){if(Pr[e])return Pr[e];if(!Sr[e])return e;var t,n=Sr[e];for(t in n)if(n.hasOwnProperty(t)&&t in Cr)return Pr[e]=n[t];return e}u&&(Cr=document.createElement("div").style,"AnimationEvent"in window||(delete Sr.animationend.animation,delete Sr.animationiteration.animation,delete Sr.animationstart.animation),"TransitionEvent"in window||delete Sr.transitionend.transition);var xr=Er("animationend"),kr=Er("animationiteration"),Ar=Er("animationstart"),Tr=Er("transitionend"),Fr=new Map,Ir="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Rr(e,t){Fr.set(e,t),l(t,[e])}for(var Mr=0;Mr<Ir.length;Mr++){var Nr=Ir[Mr];Rr(Nr.toLowerCase(),"on"+(Nr[0].toUpperCase()+Nr.slice(1)))}Rr(xr,"onAnimationEnd"),Rr(kr,"onAnimationIteration"),Rr(Ar,"onAnimationStart"),Rr("dblclick","onDoubleClick"),Rr("focusin","onFocus"),Rr("focusout","onBlur"),Rr(Tr,"onTransitionEnd"),c("onMouseEnter",["mouseout","mouseover"]),c("onMouseLeave",["mouseout","mouseover"]),c("onPointerEnter",["pointerout","pointerover"]),c("onPointerLeave",["pointerout","pointerover"]),l("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),l("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),l("onBeforeInput",["compositionend","keypress","textInput","paste"]),l("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Dr="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Or=new Set("cancel close invalid load scroll toggle".split(" ").concat(Dr));function Lr(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,function(e,t,n,r,i,a,o,l,c){if(Be.apply(this,arguments),Oe){if(!Oe)throw Error(s(198));var u=Le;Oe=!1,Le=null,je||(je=!0,Ue=u)}}(r,t,void 0,e),e.currentTarget=null}function jr(e,t){t=0!==(4&t);for(var n=0;n<e.length;n++){var r=e[n],i=r.event;r=r.listeners;e:{var s=void 0;if(t)for(var a=r.length-1;0<=a;a--){var o=r[a],l=o.instance,c=o.currentTarget;if(o=o.listener,l!==s&&i.isPropagationStopped())break e;Lr(i,o,c),s=l}else for(a=0;a<r.length;a++){if(l=(o=r[a]).instance,c=o.currentTarget,o=o.listener,l!==s&&i.isPropagationStopped())break e;Lr(i,o,c),s=l}}}if(je)throw e=Ue,je=!1,Ue=null,e}function Ur(e,t){var n=t[mi];void 0===n&&(n=t[mi]=new Set);var r=e+"__bubble";n.has(r)||(zr(t,e,2,!1),n.add(r))}function Gr(e,t,n){var r=0;t&&(r|=4),zr(n,e,r,t)}var Br="_reactListening"+Math.random().toString(36).slice(2);function Wr(e){if(!e[Br]){e[Br]=!0,a.forEach((function(t){"selectionchange"!==t&&(Or.has(t)||Gr(t,!1,e),Gr(t,!0,e))}));var t=9===e.nodeType?e:e.ownerDocument;null===t||t[Br]||(t[Br]=!0,Gr("selectionchange",!1,t))}}function zr(e,t,n,r){switch(Qt(t)){case 1:var i=Ht;break;case 4:i=Vt;break;default:i=Kt}n=i.bind(null,t,n,e),i=void 0,!Me||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(i=!0),r?void 0!==i?e.addEventListener(t,n,{capture:!0,passive:i}):e.addEventListener(t,n,!0):void 0!==i?e.addEventListener(t,n,{passive:i}):e.addEventListener(t,n,!1)}function qr(e,t,n,r,i){var s=r;if(0===(1&t)&&0===(2&t)&&null!==r)e:for(;;){if(null===r)return;var a=r.tag;if(3===a||4===a){var o=r.stateNode.containerInfo;if(o===i||8===o.nodeType&&o.parentNode===i)break;if(4===a)for(a=r.return;null!==a;){var l=a.tag;if((3===l||4===l)&&((l=a.stateNode.containerInfo)===i||8===l.nodeType&&l.parentNode===i))return;a=a.return}for(;null!==o;){if(null===(a=_i(o)))return;if(5===(l=a.tag)||6===l){r=s=a;continue e}o=o.parentNode}}r=r.return}Ie((function(){var r=s,i=we(n),a=[];e:{var o=Fr.get(e);if(void 0!==o){var l=un,c=e;switch(e){case"keypress":if(0===tn(n))break e;case"keydown":case"keyup":l=kn;break;case"focusin":c="focus",l=gn;break;case"focusout":c="blur",l=gn;break;case"beforeblur":case"afterblur":l=gn;break;case"click":if(2===n.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":l=fn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":l=mn;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":l=Tn;break;case xr:case kr:case Ar:l=vn;break;case Tr:l=Fn;break;case"scroll":l=hn;break;case"wheel":l=Rn;break;case"copy":case"cut":case"paste":l=yn;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":l=An}var u=0!==(4&t),d=!u&&"scroll"===e,h=u?null!==o?o+"Capture":null:o;u=[];for(var p,f=r;null!==f;){var m=(p=f).stateNode;if(5===p.tag&&null!==m&&(p=m,null!==h&&(null!=(m=Re(f,h))&&u.push(Hr(f,m,p)))),d)break;f=f.return}0<u.length&&(o=new l(o,c,null,n,i),a.push({event:o,listeners:u}))}}if(0===(7&t)){if(l="mouseout"===e||"pointerout"===e,(!(o="mouseover"===e||"pointerover"===e)||n===be||!(c=n.relatedTarget||n.fromElement)||!_i(c)&&!c[fi])&&(l||o)&&(o=i.window===i?i:(o=i.ownerDocument)?o.defaultView||o.parentWindow:window,l?(l=r,null!==(c=(c=n.relatedTarget||n.toElement)?_i(c):null)&&(c!==(d=We(c))||5!==c.tag&&6!==c.tag)&&(c=null)):(l=null,c=r),l!==c)){if(u=fn,m="onMouseLeave",h="onMouseEnter",f="mouse","pointerout"!==e&&"pointerover"!==e||(u=An,m="onPointerLeave",h="onPointerEnter",f="pointer"),d=null==l?o:bi(l),p=null==c?o:bi(c),(o=new u(m,f+"leave",l,n,i)).target=d,o.relatedTarget=p,m=null,_i(i)===r&&((u=new u(h,f+"enter",c,n,i)).target=p,u.relatedTarget=d,m=u),d=m,l&&c)e:{for(h=c,f=0,p=u=l;p;p=Kr(p))f++;for(p=0,m=h;m;m=Kr(m))p++;for(;0<f-p;)u=Kr(u),f--;for(;0<p-f;)h=Kr(h),p--;for(;f--;){if(u===h||null!==h&&u===h.alternate)break e;u=Kr(u),h=Kr(h)}u=null}else u=null;null!==l&&Xr(a,o,l,u,!1),null!==c&&null!==d&&Xr(a,d,c,u,!0)}if("select"===(l=(o=r?bi(r):window).nodeName&&o.nodeName.toLowerCase())||"input"===l&&"file"===o.type)var g=Qn;else if(qn(o))if(Jn)g=ar;else{g=ir;var v=rr}else(l=o.nodeName)&&"input"===l.toLowerCase()&&("checkbox"===o.type||"radio"===o.type)&&(g=sr);switch(g&&(g=g(e,r))?Hn(a,g,n,i):(v&&v(e,o,r),"focusout"===e&&(v=o._wrapperState)&&v.controlled&&"number"===o.type&&ee(o,"number",o.value)),v=r?bi(r):window,e){case"focusin":(qn(v)||"true"===v.contentEditable)&&(gr=v,vr=r,_r=null);break;case"focusout":_r=vr=gr=null;break;case"mousedown":yr=!0;break;case"contextmenu":case"mouseup":case"dragend":yr=!1,br(a,n,i);break;case"selectionchange":if(mr)break;case"keydown":case"keyup":br(a,n,i)}var _;if(Nn)e:{switch(e){case"compositionstart":var y="onCompositionStart";break e;case"compositionend":y="onCompositionEnd";break e;case"compositionupdate":y="onCompositionUpdate";break e}y=void 0}else Wn?Gn(e,n)&&(y="onCompositionEnd"):"keydown"===e&&229===n.keyCode&&(y="onCompositionStart");y&&(Ln&&"ko"!==n.locale&&(Wn||"onCompositionStart"!==y?"onCompositionEnd"===y&&Wn&&(_=en()):($t="value"in(Jt=i)?Jt.value:Jt.textContent,Wn=!0)),0<(v=Vr(r,y)).length&&(y=new bn(y,e,null,n,i),a.push({event:y,listeners:v}),_?y.data=_:null!==(_=Bn(n))&&(y.data=_))),(_=On?function(e,t){switch(e){case"compositionend":return Bn(t);case"keypress":return 32!==t.which?null:(Un=!0,jn);case"textInput":return(e=t.data)===jn&&Un?null:e;default:return null}}(e,n):function(e,t){if(Wn)return"compositionend"===e||!Nn&&Gn(e,t)?(e=en(),Zt=$t=Jt=null,Wn=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Ln&&"ko"!==t.locale?null:t.data}}(e,n))&&(0<(r=Vr(r,"onBeforeInput")).length&&(i=new bn("onBeforeInput","beforeinput",null,n,i),a.push({event:i,listeners:r}),i.data=_))}jr(a,t)}))}function Hr(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Vr(e,t){for(var n=t+"Capture",r=[];null!==e;){var i=e,s=i.stateNode;5===i.tag&&null!==s&&(i=s,null!=(s=Re(e,n))&&r.unshift(Hr(e,s,i)),null!=(s=Re(e,t))&&r.push(Hr(e,s,i))),e=e.return}return r}function Kr(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag);return e||null}function Xr(e,t,n,r,i){for(var s=t._reactName,a=[];null!==n&&n!==r;){var o=n,l=o.alternate,c=o.stateNode;if(null!==l&&l===r)break;5===o.tag&&null!==c&&(o=c,i?null!=(l=Re(n,s))&&a.unshift(Hr(n,l,o)):i||null!=(l=Re(n,s))&&a.push(Hr(n,l,o))),n=n.return}0!==a.length&&e.push({event:t,listeners:a})}var Yr=/\r\n?/g,Qr=/\u0000|\uFFFD/g;function Jr(e){return("string"===typeof e?e:""+e).replace(Yr,"\n").replace(Qr,"")}function $r(e,t,n){if(t=Jr(t),Jr(e)!==t&&n)throw Error(s(425))}function Zr(){}var ei=null,ti=null;function ni(e,t){return"textarea"===e||"noscript"===e||"string"===typeof t.children||"number"===typeof t.children||"object"===typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var ri="function"===typeof setTimeout?setTimeout:void 0,ii="function"===typeof clearTimeout?clearTimeout:void 0,si="function"===typeof Promise?Promise:void 0,ai="function"===typeof queueMicrotask?queueMicrotask:"undefined"!==typeof si?function(e){return si.resolve(null).then(e).catch(oi)}:ri;function oi(e){setTimeout((function(){throw e}))}function li(e,t){var n=t,r=0;do{var i=n.nextSibling;if(e.removeChild(n),i&&8===i.nodeType)if("/$"===(n=i.data)){if(0===r)return e.removeChild(i),void Wt(t);r--}else"$"!==n&&"$?"!==n&&"$!"!==n||r++;n=i}while(n);Wt(t)}function ci(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break;if(8===t){if("$"===(t=e.data)||"$!"===t||"$?"===t)break;if("/$"===t)return null}}return e}function ui(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("$"===n||"$!"===n||"$?"===n){if(0===t)return e;t--}else"/$"===n&&t++}e=e.previousSibling}return null}var di=Math.random().toString(36).slice(2),hi="__reactFiber$"+di,pi="__reactProps$"+di,fi="__reactContainer$"+di,mi="__reactEvents$"+di,gi="__reactListeners$"+di,vi="__reactHandles$"+di;function _i(e){var t=e[hi];if(t)return t;for(var n=e.parentNode;n;){if(t=n[fi]||n[hi]){if(n=t.alternate,null!==t.child||null!==n&&null!==n.child)for(e=ui(e);null!==e;){if(n=e[hi])return n;e=ui(e)}return t}n=(e=n).parentNode}return null}function yi(e){return!(e=e[hi]||e[fi])||5!==e.tag&&6!==e.tag&&13!==e.tag&&3!==e.tag?null:e}function bi(e){if(5===e.tag||6===e.tag)return e.stateNode;throw Error(s(33))}function wi(e){return e[pi]||null}var Si=[],Pi=-1;function Ci(e){return{current:e}}function Ei(e){0>Pi||(e.current=Si[Pi],Si[Pi]=null,Pi--)}function xi(e,t){Pi++,Si[Pi]=e.current,e.current=t}var ki={},Ai=Ci(ki),Ti=Ci(!1),Fi=ki;function Ii(e,t){var n=e.type.contextTypes;if(!n)return ki;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var i,s={};for(i in n)s[i]=t[i];return r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=s),s}function Ri(e){return null!==(e=e.childContextTypes)&&void 0!==e}function Mi(){Ei(Ti),Ei(Ai)}function Ni(e,t,n){if(Ai.current!==ki)throw Error(s(168));xi(Ai,t),xi(Ti,n)}function Di(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,"function"!==typeof r.getChildContext)return n;for(var i in r=r.getChildContext())if(!(i in t))throw Error(s(108,z(e)||"Unknown",i));return L({},n,r)}function Oi(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||ki,Fi=Ai.current,xi(Ai,e),xi(Ti,Ti.current),!0}function Li(e,t,n){var r=e.stateNode;if(!r)throw Error(s(169));n?(e=Di(e,t,Fi),r.__reactInternalMemoizedMergedChildContext=e,Ei(Ti),Ei(Ai),xi(Ai,e)):Ei(Ti),xi(Ti,n)}var ji=null,Ui=!1,Gi=!1;function Bi(e){null===ji?ji=[e]:ji.push(e)}function Wi(){if(!Gi&&null!==ji){Gi=!0;var e=0,t=yt;try{var n=ji;for(yt=1;e<n.length;e++){var r=n[e];do{r=r(!0)}while(null!==r)}ji=null,Ui=!1}catch(i){throw null!==ji&&(ji=ji.slice(e+1)),Ke(Ze,Wi),i}finally{yt=t,Gi=!1}}return null}var zi=[],qi=0,Hi=null,Vi=0,Ki=[],Xi=0,Yi=null,Qi=1,Ji="";function $i(e,t){zi[qi++]=Vi,zi[qi++]=Hi,Hi=e,Vi=t}function Zi(e,t,n){Ki[Xi++]=Qi,Ki[Xi++]=Ji,Ki[Xi++]=Yi,Yi=e;var r=Qi;e=Ji;var i=32-at(r)-1;r&=~(1<<i),n+=1;var s=32-at(t)+i;if(30<s){var a=i-i%5;s=(r&(1<<a)-1).toString(32),r>>=a,i-=a,Qi=1<<32-at(t)+i|n<<i|r,Ji=s+e}else Qi=1<<s|n<<i|r,Ji=e}function es(e){null!==e.return&&($i(e,1),Zi(e,1,0))}function ts(e){for(;e===Hi;)Hi=zi[--qi],zi[qi]=null,Vi=zi[--qi],zi[qi]=null;for(;e===Yi;)Yi=Ki[--Xi],Ki[Xi]=null,Ji=Ki[--Xi],Ki[Xi]=null,Qi=Ki[--Xi],Ki[Xi]=null}var ns=null,rs=null,is=!1,ss=null;function as(e,t){var n=Rc(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,null===(t=e.deletions)?(e.deletions=[n],e.flags|=16):t.push(n)}function os(e,t){switch(e.tag){case 5:var n=e.type;return null!==(t=1!==t.nodeType||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t)&&(e.stateNode=t,ns=e,rs=ci(t.firstChild),!0);case 6:return null!==(t=""===e.pendingProps||3!==t.nodeType?null:t)&&(e.stateNode=t,ns=e,rs=null,!0);case 13:return null!==(t=8!==t.nodeType?null:t)&&(n=null!==Yi?{id:Qi,overflow:Ji}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},(n=Rc(18,null,null,0)).stateNode=t,n.return=e,e.child=n,ns=e,rs=null,!0);default:return!1}}function ls(e){return 0!==(1&e.mode)&&0===(128&e.flags)}function cs(e){if(is){var t=rs;if(t){var n=t;if(!os(e,t)){if(ls(e))throw Error(s(418));t=ci(n.nextSibling);var r=ns;t&&os(e,t)?as(r,n):(e.flags=-4097&e.flags|2,is=!1,ns=e)}}else{if(ls(e))throw Error(s(418));e.flags=-4097&e.flags|2,is=!1,ns=e}}}function us(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;ns=e}function ds(e){if(e!==ns)return!1;if(!is)return us(e),is=!0,!1;var t;if((t=3!==e.tag)&&!(t=5!==e.tag)&&(t="head"!==(t=e.type)&&"body"!==t&&!ni(e.type,e.memoizedProps)),t&&(t=rs)){if(ls(e))throw hs(),Error(s(418));for(;t;)as(e,t),t=ci(t.nextSibling)}if(us(e),13===e.tag){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(s(317));e:{for(e=e.nextSibling,t=0;e;){if(8===e.nodeType){var n=e.data;if("/$"===n){if(0===t){rs=ci(e.nextSibling);break e}t--}else"$"!==n&&"$!"!==n&&"$?"!==n||t++}e=e.nextSibling}rs=null}}else rs=ns?ci(e.stateNode.nextSibling):null;return!0}function hs(){for(var e=rs;e;)e=ci(e.nextSibling)}function ps(){rs=ns=null,is=!1}function fs(e){null===ss?ss=[e]:ss.push(e)}var ms=b.ReactCurrentBatchConfig;function gs(e,t){if(e&&e.defaultProps){for(var n in t=L({},t),e=e.defaultProps)void 0===t[n]&&(t[n]=e[n]);return t}return t}var vs=Ci(null),_s=null,ys=null,bs=null;function ws(){bs=ys=_s=null}function Ss(e){var t=vs.current;Ei(vs),e._currentValue=t}function Ps(e,t,n){for(;null!==e;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,null!==r&&(r.childLanes|=t)):null!==r&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function Cs(e,t){_s=e,bs=ys=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(0!==(e.lanes&t)&&(bo=!0),e.firstContext=null)}function Es(e){var t=e._currentValue;if(bs!==e)if(e={context:e,memoizedValue:t,next:null},null===ys){if(null===_s)throw Error(s(308));ys=e,_s.dependencies={lanes:0,firstContext:e}}else ys=ys.next=e;return t}var xs=null;function ks(e){null===xs?xs=[e]:xs.push(e)}function As(e,t,n,r){var i=t.interleaved;return null===i?(n.next=n,ks(t)):(n.next=i.next,i.next=n),t.interleaved=n,Ts(e,r)}function Ts(e,t){e.lanes|=t;var n=e.alternate;for(null!==n&&(n.lanes|=t),n=e,e=e.return;null!==e;)e.childLanes|=t,null!==(n=e.alternate)&&(n.childLanes|=t),n=e,e=e.return;return 3===n.tag?n.stateNode:null}var Fs=!1;function Is(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Rs(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Ms(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Ns(e,t,n){var r=e.updateQueue;if(null===r)return null;if(r=r.shared,0!==(2&Tl)){var i=r.pending;return null===i?t.next=t:(t.next=i.next,i.next=t),r.pending=t,Ts(e,n)}return null===(i=r.interleaved)?(t.next=t,ks(r)):(t.next=i.next,i.next=t),r.interleaved=t,Ts(e,n)}function Ds(e,t,n){if(null!==(t=t.updateQueue)&&(t=t.shared,0!==(4194240&n))){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,_t(e,n)}}function Os(e,t){var n=e.updateQueue,r=e.alternate;if(null!==r&&n===(r=r.updateQueue)){var i=null,s=null;if(null!==(n=n.firstBaseUpdate)){do{var a={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};null===s?i=s=a:s=s.next=a,n=n.next}while(null!==n);null===s?i=s=t:s=s.next=t}else i=s=t;return n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:r.shared,effects:r.effects},void(e.updateQueue=n)}null===(e=n.lastBaseUpdate)?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function Ls(e,t,n,r){var i=e.updateQueue;Fs=!1;var s=i.firstBaseUpdate,a=i.lastBaseUpdate,o=i.shared.pending;if(null!==o){i.shared.pending=null;var l=o,c=l.next;l.next=null,null===a?s=c:a.next=c,a=l;var u=e.alternate;null!==u&&((o=(u=u.updateQueue).lastBaseUpdate)!==a&&(null===o?u.firstBaseUpdate=c:o.next=c,u.lastBaseUpdate=l))}if(null!==s){var d=i.baseState;for(a=0,u=c=l=null,o=s;;){var h=o.lane,p=o.eventTime;if((r&h)===h){null!==u&&(u=u.next={eventTime:p,lane:0,tag:o.tag,payload:o.payload,callback:o.callback,next:null});e:{var f=e,m=o;switch(h=t,p=n,m.tag){case 1:if("function"===typeof(f=m.payload)){d=f.call(p,d,h);break e}d=f;break e;case 3:f.flags=-65537&f.flags|128;case 0:if(null===(h="function"===typeof(f=m.payload)?f.call(p,d,h):f)||void 0===h)break e;d=L({},d,h);break e;case 2:Fs=!0}}null!==o.callback&&0!==o.lane&&(e.flags|=64,null===(h=i.effects)?i.effects=[o]:h.push(o))}else p={eventTime:p,lane:h,tag:o.tag,payload:o.payload,callback:o.callback,next:null},null===u?(c=u=p,l=d):u=u.next=p,a|=h;if(null===(o=o.next)){if(null===(o=i.shared.pending))break;o=(h=o).next,h.next=null,i.lastBaseUpdate=h,i.shared.pending=null}}if(null===u&&(l=d),i.baseState=l,i.firstBaseUpdate=c,i.lastBaseUpdate=u,null!==(t=i.shared.interleaved)){i=t;do{a|=i.lane,i=i.next}while(i!==t)}else null===s&&(i.shared.lanes=0);Ll|=a,e.lanes=a,e.memoizedState=d}}function js(e,t,n){if(e=t.effects,t.effects=null,null!==e)for(t=0;t<e.length;t++){var r=e[t],i=r.callback;if(null!==i){if(r.callback=null,r=n,"function"!==typeof i)throw Error(s(191,i));i.call(r)}}}var Us=(new r.Component).refs;function Gs(e,t,n,r){n=null===(n=n(r,t=e.memoizedState))||void 0===n?t:L({},t,n),e.memoizedState=n,0===e.lanes&&(e.updateQueue.baseState=n)}var Bs={isMounted:function(e){return!!(e=e._reactInternals)&&We(e)===e},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=tc(),i=nc(e),s=Ms(r,i);s.payload=t,void 0!==n&&null!==n&&(s.callback=n),null!==(t=Ns(e,s,i))&&(rc(t,e,i,r),Ds(t,e,i))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=tc(),i=nc(e),s=Ms(r,i);s.tag=1,s.payload=t,void 0!==n&&null!==n&&(s.callback=n),null!==(t=Ns(e,s,i))&&(rc(t,e,i,r),Ds(t,e,i))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=tc(),r=nc(e),i=Ms(n,r);i.tag=2,void 0!==t&&null!==t&&(i.callback=t),null!==(t=Ns(e,i,r))&&(rc(t,e,r,n),Ds(t,e,r))}};function Ws(e,t,n,r,i,s,a){return"function"===typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(r,s,a):!t.prototype||!t.prototype.isPureReactComponent||(!lr(n,r)||!lr(i,s))}function zs(e,t,n){var r=!1,i=ki,s=t.contextType;return"object"===typeof s&&null!==s?s=Es(s):(i=Ri(t)?Fi:Ai.current,s=(r=null!==(r=t.contextTypes)&&void 0!==r)?Ii(e,i):ki),t=new t(n,s),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=Bs,e.stateNode=t,t._reactInternals=e,r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=i,e.__reactInternalMemoizedMaskedChildContext=s),t}function qs(e,t,n,r){e=t.state,"function"===typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,r),"function"===typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&Bs.enqueueReplaceState(t,t.state,null)}function Hs(e,t,n,r){var i=e.stateNode;i.props=n,i.state=e.memoizedState,i.refs=Us,Is(e);var s=t.contextType;"object"===typeof s&&null!==s?i.context=Es(s):(s=Ri(t)?Fi:Ai.current,i.context=Ii(e,s)),i.state=e.memoizedState,"function"===typeof(s=t.getDerivedStateFromProps)&&(Gs(e,t,s,n),i.state=e.memoizedState),"function"===typeof t.getDerivedStateFromProps||"function"===typeof i.getSnapshotBeforeUpdate||"function"!==typeof i.UNSAFE_componentWillMount&&"function"!==typeof i.componentWillMount||(t=i.state,"function"===typeof i.componentWillMount&&i.componentWillMount(),"function"===typeof i.UNSAFE_componentWillMount&&i.UNSAFE_componentWillMount(),t!==i.state&&Bs.enqueueReplaceState(i,i.state,null),Ls(e,n,i,r),i.state=e.memoizedState),"function"===typeof i.componentDidMount&&(e.flags|=4194308)}function Vs(e,t,n){if(null!==(e=n.ref)&&"function"!==typeof e&&"object"!==typeof e){if(n._owner){if(n=n._owner){if(1!==n.tag)throw Error(s(309));var r=n.stateNode}if(!r)throw Error(s(147,e));var i=r,a=""+e;return null!==t&&null!==t.ref&&"function"===typeof t.ref&&t.ref._stringRef===a?t.ref:(t=function(e){var t=i.refs;t===Us&&(t=i.refs={}),null===e?delete t[a]:t[a]=e},t._stringRef=a,t)}if("string"!==typeof e)throw Error(s(284));if(!n._owner)throw Error(s(290,e))}return e}function Ks(e,t){throw e=Object.prototype.toString.call(t),Error(s(31,"[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function Xs(e){return(0,e._init)(e._payload)}function Ys(e){function t(t,n){if(e){var r=t.deletions;null===r?(t.deletions=[n],t.flags|=16):r.push(n)}}function n(n,r){if(!e)return null;for(;null!==r;)t(n,r),r=r.sibling;return null}function r(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function i(e,t){return(e=Nc(e,t)).index=0,e.sibling=null,e}function a(t,n,r){return t.index=r,e?null!==(r=t.alternate)?(r=r.index)<n?(t.flags|=2,n):r:(t.flags|=2,n):(t.flags|=1048576,n)}function o(t){return e&&null===t.alternate&&(t.flags|=2),t}function l(e,t,n,r){return null===t||6!==t.tag?((t=jc(n,e.mode,r)).return=e,t):((t=i(t,n)).return=e,t)}function c(e,t,n,r){var s=n.type;return s===P?d(e,t,n.props.children,r,n.key):null!==t&&(t.elementType===s||"object"===typeof s&&null!==s&&s.$$typeof===R&&Xs(s)===t.type)?((r=i(t,n.props)).ref=Vs(e,t,n),r.return=e,r):((r=Dc(n.type,n.key,n.props,null,e.mode,r)).ref=Vs(e,t,n),r.return=e,r)}function u(e,t,n,r){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=Uc(n,e.mode,r)).return=e,t):((t=i(t,n.children||[])).return=e,t)}function d(e,t,n,r,s){return null===t||7!==t.tag?((t=Oc(n,e.mode,r,s)).return=e,t):((t=i(t,n)).return=e,t)}function h(e,t,n){if("string"===typeof t&&""!==t||"number"===typeof t)return(t=jc(""+t,e.mode,n)).return=e,t;if("object"===typeof t&&null!==t){switch(t.$$typeof){case w:return(n=Dc(t.type,t.key,t.props,null,e.mode,n)).ref=Vs(e,null,t),n.return=e,n;case S:return(t=Uc(t,e.mode,n)).return=e,t;case R:return h(e,(0,t._init)(t._payload),n)}if(te(t)||D(t))return(t=Oc(t,e.mode,n,null)).return=e,t;Ks(e,t)}return null}function p(e,t,n,r){var i=null!==t?t.key:null;if("string"===typeof n&&""!==n||"number"===typeof n)return null!==i?null:l(e,t,""+n,r);if("object"===typeof n&&null!==n){switch(n.$$typeof){case w:return n.key===i?c(e,t,n,r):null;case S:return n.key===i?u(e,t,n,r):null;case R:return p(e,t,(i=n._init)(n._payload),r)}if(te(n)||D(n))return null!==i?null:d(e,t,n,r,null);Ks(e,n)}return null}function f(e,t,n,r,i){if("string"===typeof r&&""!==r||"number"===typeof r)return l(t,e=e.get(n)||null,""+r,i);if("object"===typeof r&&null!==r){switch(r.$$typeof){case w:return c(t,e=e.get(null===r.key?n:r.key)||null,r,i);case S:return u(t,e=e.get(null===r.key?n:r.key)||null,r,i);case R:return f(e,t,n,(0,r._init)(r._payload),i)}if(te(r)||D(r))return d(t,e=e.get(n)||null,r,i,null);Ks(t,r)}return null}function m(i,s,o,l){for(var c=null,u=null,d=s,m=s=0,g=null;null!==d&&m<o.length;m++){d.index>m?(g=d,d=null):g=d.sibling;var v=p(i,d,o[m],l);if(null===v){null===d&&(d=g);break}e&&d&&null===v.alternate&&t(i,d),s=a(v,s,m),null===u?c=v:u.sibling=v,u=v,d=g}if(m===o.length)return n(i,d),is&&$i(i,m),c;if(null===d){for(;m<o.length;m++)null!==(d=h(i,o[m],l))&&(s=a(d,s,m),null===u?c=d:u.sibling=d,u=d);return is&&$i(i,m),c}for(d=r(i,d);m<o.length;m++)null!==(g=f(d,i,m,o[m],l))&&(e&&null!==g.alternate&&d.delete(null===g.key?m:g.key),s=a(g,s,m),null===u?c=g:u.sibling=g,u=g);return e&&d.forEach((function(e){return t(i,e)})),is&&$i(i,m),c}function g(i,o,l,c){var u=D(l);if("function"!==typeof u)throw Error(s(150));if(null==(l=u.call(l)))throw Error(s(151));for(var d=u=null,m=o,g=o=0,v=null,_=l.next();null!==m&&!_.done;g++,_=l.next()){m.index>g?(v=m,m=null):v=m.sibling;var y=p(i,m,_.value,c);if(null===y){null===m&&(m=v);break}e&&m&&null===y.alternate&&t(i,m),o=a(y,o,g),null===d?u=y:d.sibling=y,d=y,m=v}if(_.done)return n(i,m),is&&$i(i,g),u;if(null===m){for(;!_.done;g++,_=l.next())null!==(_=h(i,_.value,c))&&(o=a(_,o,g),null===d?u=_:d.sibling=_,d=_);return is&&$i(i,g),u}for(m=r(i,m);!_.done;g++,_=l.next())null!==(_=f(m,i,g,_.value,c))&&(e&&null!==_.alternate&&m.delete(null===_.key?g:_.key),o=a(_,o,g),null===d?u=_:d.sibling=_,d=_);return e&&m.forEach((function(e){return t(i,e)})),is&&$i(i,g),u}return function e(r,s,a,l){if("object"===typeof a&&null!==a&&a.type===P&&null===a.key&&(a=a.props.children),"object"===typeof a&&null!==a){switch(a.$$typeof){case w:e:{for(var c=a.key,u=s;null!==u;){if(u.key===c){if((c=a.type)===P){if(7===u.tag){n(r,u.sibling),(s=i(u,a.props.children)).return=r,r=s;break e}}else if(u.elementType===c||"object"===typeof c&&null!==c&&c.$$typeof===R&&Xs(c)===u.type){n(r,u.sibling),(s=i(u,a.props)).ref=Vs(r,u,a),s.return=r,r=s;break e}n(r,u);break}t(r,u),u=u.sibling}a.type===P?((s=Oc(a.props.children,r.mode,l,a.key)).return=r,r=s):((l=Dc(a.type,a.key,a.props,null,r.mode,l)).ref=Vs(r,s,a),l.return=r,r=l)}return o(r);case S:e:{for(u=a.key;null!==s;){if(s.key===u){if(4===s.tag&&s.stateNode.containerInfo===a.containerInfo&&s.stateNode.implementation===a.implementation){n(r,s.sibling),(s=i(s,a.children||[])).return=r,r=s;break e}n(r,s);break}t(r,s),s=s.sibling}(s=Uc(a,r.mode,l)).return=r,r=s}return o(r);case R:return e(r,s,(u=a._init)(a._payload),l)}if(te(a))return m(r,s,a,l);if(D(a))return g(r,s,a,l);Ks(r,a)}return"string"===typeof a&&""!==a||"number"===typeof a?(a=""+a,null!==s&&6===s.tag?(n(r,s.sibling),(s=i(s,a)).return=r,r=s):(n(r,s),(s=jc(a,r.mode,l)).return=r,r=s),o(r)):n(r,s)}}var Qs=Ys(!0),Js=Ys(!1),$s={},Zs=Ci($s),ea=Ci($s),ta=Ci($s);function na(e){if(e===$s)throw Error(s(174));return e}function ra(e,t){switch(xi(ta,t),xi(ea,e),xi(Zs,$s),e=t.nodeType){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:le(null,"");break;default:t=le(t=(e=8===e?t.parentNode:t).namespaceURI||null,e=e.tagName)}Ei(Zs),xi(Zs,t)}function ia(){Ei(Zs),Ei(ea),Ei(ta)}function sa(e){na(ta.current);var t=na(Zs.current),n=le(t,e.type);t!==n&&(xi(ea,e),xi(Zs,n))}function aa(e){ea.current===e&&(Ei(Zs),Ei(ea))}var oa=Ci(0);function la(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||"$?"===n.data||"$!"===n.data))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!==(128&t.flags))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var ca=[];function ua(){for(var e=0;e<ca.length;e++)ca[e]._workInProgressVersionPrimary=null;ca.length=0}var da=b.ReactCurrentDispatcher,ha=b.ReactCurrentBatchConfig,pa=0,fa=null,ma=null,ga=null,va=!1,_a=!1,ya=0,ba=0;function wa(){throw Error(s(321))}function Sa(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!or(e[n],t[n]))return!1;return!0}function Pa(e,t,n,r,i,a){if(pa=a,fa=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,da.current=null===e||null===e.memoizedState?ao:oo,e=n(r,i),_a){a=0;do{if(_a=!1,ya=0,25<=a)throw Error(s(301));a+=1,ga=ma=null,t.updateQueue=null,da.current=lo,e=n(r,i)}while(_a)}if(da.current=so,t=null!==ma&&null!==ma.next,pa=0,ga=ma=fa=null,va=!1,t)throw Error(s(300));return e}function Ca(){var e=0!==ya;return ya=0,e}function Ea(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===ga?fa.memoizedState=ga=e:ga=ga.next=e,ga}function xa(){if(null===ma){var e=fa.alternate;e=null!==e?e.memoizedState:null}else e=ma.next;var t=null===ga?fa.memoizedState:ga.next;if(null!==t)ga=t,ma=e;else{if(null===e)throw Error(s(310));e={memoizedState:(ma=e).memoizedState,baseState:ma.baseState,baseQueue:ma.baseQueue,queue:ma.queue,next:null},null===ga?fa.memoizedState=ga=e:ga=ga.next=e}return ga}function ka(e,t){return"function"===typeof t?t(e):t}function Aa(e){var t=xa(),n=t.queue;if(null===n)throw Error(s(311));n.lastRenderedReducer=e;var r=ma,i=r.baseQueue,a=n.pending;if(null!==a){if(null!==i){var o=i.next;i.next=a.next,a.next=o}r.baseQueue=i=a,n.pending=null}if(null!==i){a=i.next,r=r.baseState;var l=o=null,c=null,u=a;do{var d=u.lane;if((pa&d)===d)null!==c&&(c=c.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),r=u.hasEagerState?u.eagerState:e(r,u.action);else{var h={lane:d,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};null===c?(l=c=h,o=r):c=c.next=h,fa.lanes|=d,Ll|=d}u=u.next}while(null!==u&&u!==a);null===c?o=r:c.next=l,or(r,t.memoizedState)||(bo=!0),t.memoizedState=r,t.baseState=o,t.baseQueue=c,n.lastRenderedState=r}if(null!==(e=n.interleaved)){i=e;do{a=i.lane,fa.lanes|=a,Ll|=a,i=i.next}while(i!==e)}else null===i&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function Ta(e){var t=xa(),n=t.queue;if(null===n)throw Error(s(311));n.lastRenderedReducer=e;var r=n.dispatch,i=n.pending,a=t.memoizedState;if(null!==i){n.pending=null;var o=i=i.next;do{a=e(a,o.action),o=o.next}while(o!==i);or(a,t.memoizedState)||(bo=!0),t.memoizedState=a,null===t.baseQueue&&(t.baseState=a),n.lastRenderedState=a}return[a,r]}function Fa(){}function Ia(e,t){var n=fa,r=xa(),i=t(),a=!or(r.memoizedState,i);if(a&&(r.memoizedState=i,bo=!0),r=r.queue,za(Na.bind(null,n,r,e),[e]),r.getSnapshot!==t||a||null!==ga&&1&ga.memoizedState.tag){if(n.flags|=2048,ja(9,Ma.bind(null,n,r,i,t),void 0,null),null===Fl)throw Error(s(349));0!==(30&pa)||Ra(n,t,i)}return i}function Ra(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},null===(t=fa.updateQueue)?(t={lastEffect:null,stores:null},fa.updateQueue=t,t.stores=[e]):null===(n=t.stores)?t.stores=[e]:n.push(e)}function Ma(e,t,n,r){t.value=n,t.getSnapshot=r,Da(t)&&Oa(e)}function Na(e,t,n){return n((function(){Da(t)&&Oa(e)}))}function Da(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!or(e,n)}catch(r){return!0}}function Oa(e){var t=Ts(e,1);null!==t&&rc(t,e,1,-1)}function La(e){var t=Ea();return"function"===typeof e&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:ka,lastRenderedState:e},t.queue=e,e=e.dispatch=to.bind(null,fa,e),[t.memoizedState,e]}function ja(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},null===(t=fa.updateQueue)?(t={lastEffect:null,stores:null},fa.updateQueue=t,t.lastEffect=e.next=e):null===(n=t.lastEffect)?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e),e}function Ua(){return xa().memoizedState}function Ga(e,t,n,r){var i=Ea();fa.flags|=e,i.memoizedState=ja(1|t,n,void 0,void 0===r?null:r)}function Ba(e,t,n,r){var i=xa();r=void 0===r?null:r;var s=void 0;if(null!==ma){var a=ma.memoizedState;if(s=a.destroy,null!==r&&Sa(r,a.deps))return void(i.memoizedState=ja(t,n,s,r))}fa.flags|=e,i.memoizedState=ja(1|t,n,s,r)}function Wa(e,t){return Ga(8390656,8,e,t)}function za(e,t){return Ba(2048,8,e,t)}function qa(e,t){return Ba(4,2,e,t)}function Ha(e,t){return Ba(4,4,e,t)}function Va(e,t){return"function"===typeof t?(e=e(),t(e),function(){t(null)}):null!==t&&void 0!==t?(e=e(),t.current=e,function(){t.current=null}):void 0}function Ka(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,Ba(4,4,Va.bind(null,t,e),n)}function Xa(){}function Ya(e,t){var n=xa();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&Sa(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function Qa(e,t){var n=xa();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&Sa(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function Ja(e,t,n){return 0===(21&pa)?(e.baseState&&(e.baseState=!1,bo=!0),e.memoizedState=n):(or(n,t)||(n=mt(),fa.lanes|=n,Ll|=n,e.baseState=!0),t)}function $a(e,t){var n=yt;yt=0!==n&&4>n?n:4,e(!0);var r=ha.transition;ha.transition={};try{e(!1),t()}finally{yt=n,ha.transition=r}}function Za(){return xa().memoizedState}function eo(e,t,n){var r=nc(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},no(e))ro(t,n);else if(null!==(n=As(e,t,n,r))){rc(n,e,r,tc()),io(n,t,r)}}function to(e,t,n){var r=nc(e),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(no(e))ro(t,i);else{var s=e.alternate;if(0===e.lanes&&(null===s||0===s.lanes)&&null!==(s=t.lastRenderedReducer))try{var a=t.lastRenderedState,o=s(a,n);if(i.hasEagerState=!0,i.eagerState=o,or(o,a)){var l=t.interleaved;return null===l?(i.next=i,ks(t)):(i.next=l.next,l.next=i),void(t.interleaved=i)}}catch(c){}null!==(n=As(e,t,i,r))&&(rc(n,e,r,i=tc()),io(n,t,r))}}function no(e){var t=e.alternate;return e===fa||null!==t&&t===fa}function ro(e,t){_a=va=!0;var n=e.pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function io(e,t,n){if(0!==(4194240&n)){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,_t(e,n)}}var so={readContext:Es,useCallback:wa,useContext:wa,useEffect:wa,useImperativeHandle:wa,useInsertionEffect:wa,useLayoutEffect:wa,useMemo:wa,useReducer:wa,useRef:wa,useState:wa,useDebugValue:wa,useDeferredValue:wa,useTransition:wa,useMutableSource:wa,useSyncExternalStore:wa,useId:wa,unstable_isNewReconciler:!1},ao={readContext:Es,useCallback:function(e,t){return Ea().memoizedState=[e,void 0===t?null:t],e},useContext:Es,useEffect:Wa,useImperativeHandle:function(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,Ga(4194308,4,Va.bind(null,t,e),n)},useLayoutEffect:function(e,t){return Ga(4194308,4,e,t)},useInsertionEffect:function(e,t){return Ga(4,2,e,t)},useMemo:function(e,t){var n=Ea();return t=void 0===t?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=Ea();return t=void 0!==n?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=eo.bind(null,fa,e),[r.memoizedState,e]},useRef:function(e){return e={current:e},Ea().memoizedState=e},useState:La,useDebugValue:Xa,useDeferredValue:function(e){return Ea().memoizedState=e},useTransition:function(){var e=La(!1),t=e[0];return e=$a.bind(null,e[1]),Ea().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=fa,i=Ea();if(is){if(void 0===n)throw Error(s(407));n=n()}else{if(n=t(),null===Fl)throw Error(s(349));0!==(30&pa)||Ra(r,t,n)}i.memoizedState=n;var a={value:n,getSnapshot:t};return i.queue=a,Wa(Na.bind(null,r,a,e),[e]),r.flags|=2048,ja(9,Ma.bind(null,r,a,n,t),void 0,null),n},useId:function(){var e=Ea(),t=Fl.identifierPrefix;if(is){var n=Ji;t=":"+t+"R"+(n=(Qi&~(1<<32-at(Qi)-1)).toString(32)+n),0<(n=ya++)&&(t+="H"+n.toString(32)),t+=":"}else t=":"+t+"r"+(n=ba++).toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},oo={readContext:Es,useCallback:Ya,useContext:Es,useEffect:za,useImperativeHandle:Ka,useInsertionEffect:qa,useLayoutEffect:Ha,useMemo:Qa,useReducer:Aa,useRef:Ua,useState:function(){return Aa(ka)},useDebugValue:Xa,useDeferredValue:function(e){return Ja(xa(),ma.memoizedState,e)},useTransition:function(){return[Aa(ka)[0],xa().memoizedState]},useMutableSource:Fa,useSyncExternalStore:Ia,useId:Za,unstable_isNewReconciler:!1},lo={readContext:Es,useCallback:Ya,useContext:Es,useEffect:za,useImperativeHandle:Ka,useInsertionEffect:qa,useLayoutEffect:Ha,useMemo:Qa,useReducer:Ta,useRef:Ua,useState:function(){return Ta(ka)},useDebugValue:Xa,useDeferredValue:function(e){var t=xa();return null===ma?t.memoizedState=e:Ja(t,ma.memoizedState,e)},useTransition:function(){return[Ta(ka)[0],xa().memoizedState]},useMutableSource:Fa,useSyncExternalStore:Ia,useId:Za,unstable_isNewReconciler:!1};function co(e,t){try{var n="",r=t;do{n+=B(r),r=r.return}while(r);var i=n}catch(s){i="\nError generating stack: "+s.message+"\n"+s.stack}return{value:e,source:t,stack:i,digest:null}}function uo(e,t,n){return{value:e,source:null,stack:null!=n?n:null,digest:null!=t?t:null}}function ho(e,t){try{console.error(t.value)}catch(n){setTimeout((function(){throw n}))}}var po="function"===typeof WeakMap?WeakMap:Map;function fo(e,t,n){(n=Ms(-1,n)).tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){Hl||(Hl=!0,Vl=r),ho(0,t)},n}function mo(e,t,n){(n=Ms(-1,n)).tag=3;var r=e.type.getDerivedStateFromError;if("function"===typeof r){var i=t.value;n.payload=function(){return r(i)},n.callback=function(){ho(0,t)}}var s=e.stateNode;return null!==s&&"function"===typeof s.componentDidCatch&&(n.callback=function(){ho(0,t),"function"!==typeof r&&(null===Kl?Kl=new Set([this]):Kl.add(this));var e=t.stack;this.componentDidCatch(t.value,{componentStack:null!==e?e:""})}),n}function go(e,t,n){var r=e.pingCache;if(null===r){r=e.pingCache=new po;var i=new Set;r.set(t,i)}else void 0===(i=r.get(t))&&(i=new Set,r.set(t,i));i.has(n)||(i.add(n),e=xc.bind(null,e,t,n),t.then(e,e))}function vo(e){do{var t;if((t=13===e.tag)&&(t=null===(t=e.memoizedState)||null!==t.dehydrated),t)return e;e=e.return}while(null!==e);return null}function _o(e,t,n,r,i){return 0===(1&e.mode)?(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,1===n.tag&&(null===n.alternate?n.tag=17:((t=Ms(-1,1)).tag=2,Ns(n,t,1))),n.lanes|=1),e):(e.flags|=65536,e.lanes=i,e)}var yo=b.ReactCurrentOwner,bo=!1;function wo(e,t,n,r){t.child=null===e?Js(t,null,n,r):Qs(t,e.child,n,r)}function So(e,t,n,r,i){n=n.render;var s=t.ref;return Cs(t,i),r=Pa(e,t,n,r,s,i),n=Ca(),null===e||bo?(is&&n&&es(t),t.flags|=1,wo(e,t,r,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Ho(e,t,i))}function Po(e,t,n,r,i){if(null===e){var s=n.type;return"function"!==typeof s||Mc(s)||void 0!==s.defaultProps||null!==n.compare||void 0!==n.defaultProps?((e=Dc(n.type,null,r,t,t.mode,i)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=s,Co(e,t,s,r,i))}if(s=e.child,0===(e.lanes&i)){var a=s.memoizedProps;if((n=null!==(n=n.compare)?n:lr)(a,r)&&e.ref===t.ref)return Ho(e,t,i)}return t.flags|=1,(e=Nc(s,r)).ref=t.ref,e.return=t,t.child=e}function Co(e,t,n,r,i){if(null!==e){var s=e.memoizedProps;if(lr(s,r)&&e.ref===t.ref){if(bo=!1,t.pendingProps=r=s,0===(e.lanes&i))return t.lanes=e.lanes,Ho(e,t,i);0!==(131072&e.flags)&&(bo=!0)}}return ko(e,t,n,r,i)}function Eo(e,t,n){var r=t.pendingProps,i=r.children,s=null!==e?e.memoizedState:null;if("hidden"===r.mode)if(0===(1&t.mode))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},xi(Nl,Ml),Ml|=n;else{if(0===(1073741824&n))return e=null!==s?s.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,xi(Nl,Ml),Ml|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=null!==s?s.baseLanes:n,xi(Nl,Ml),Ml|=r}else null!==s?(r=s.baseLanes|n,t.memoizedState=null):r=n,xi(Nl,Ml),Ml|=r;return wo(e,t,i,n),t.child}function xo(e,t){var n=t.ref;(null===e&&null!==n||null!==e&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function ko(e,t,n,r,i){var s=Ri(n)?Fi:Ai.current;return s=Ii(t,s),Cs(t,i),n=Pa(e,t,n,r,s,i),r=Ca(),null===e||bo?(is&&r&&es(t),t.flags|=1,wo(e,t,n,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Ho(e,t,i))}function Ao(e,t,n,r,i){if(Ri(n)){var s=!0;Oi(t)}else s=!1;if(Cs(t,i),null===t.stateNode)qo(e,t),zs(t,n,r),Hs(t,n,r,i),r=!0;else if(null===e){var a=t.stateNode,o=t.memoizedProps;a.props=o;var l=a.context,c=n.contextType;"object"===typeof c&&null!==c?c=Es(c):c=Ii(t,c=Ri(n)?Fi:Ai.current);var u=n.getDerivedStateFromProps,d="function"===typeof u||"function"===typeof a.getSnapshotBeforeUpdate;d||"function"!==typeof a.UNSAFE_componentWillReceiveProps&&"function"!==typeof a.componentWillReceiveProps||(o!==r||l!==c)&&qs(t,a,r,c),Fs=!1;var h=t.memoizedState;a.state=h,Ls(t,r,a,i),l=t.memoizedState,o!==r||h!==l||Ti.current||Fs?("function"===typeof u&&(Gs(t,n,u,r),l=t.memoizedState),(o=Fs||Ws(t,n,o,r,h,l,c))?(d||"function"!==typeof a.UNSAFE_componentWillMount&&"function"!==typeof a.componentWillMount||("function"===typeof a.componentWillMount&&a.componentWillMount(),"function"===typeof a.UNSAFE_componentWillMount&&a.UNSAFE_componentWillMount()),"function"===typeof a.componentDidMount&&(t.flags|=4194308)):("function"===typeof a.componentDidMount&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=l),a.props=r,a.state=l,a.context=c,r=o):("function"===typeof a.componentDidMount&&(t.flags|=4194308),r=!1)}else{a=t.stateNode,Rs(e,t),o=t.memoizedProps,c=t.type===t.elementType?o:gs(t.type,o),a.props=c,d=t.pendingProps,h=a.context,"object"===typeof(l=n.contextType)&&null!==l?l=Es(l):l=Ii(t,l=Ri(n)?Fi:Ai.current);var p=n.getDerivedStateFromProps;(u="function"===typeof p||"function"===typeof a.getSnapshotBeforeUpdate)||"function"!==typeof a.UNSAFE_componentWillReceiveProps&&"function"!==typeof a.componentWillReceiveProps||(o!==d||h!==l)&&qs(t,a,r,l),Fs=!1,h=t.memoizedState,a.state=h,Ls(t,r,a,i);var f=t.memoizedState;o!==d||h!==f||Ti.current||Fs?("function"===typeof p&&(Gs(t,n,p,r),f=t.memoizedState),(c=Fs||Ws(t,n,c,r,h,f,l)||!1)?(u||"function"!==typeof a.UNSAFE_componentWillUpdate&&"function"!==typeof a.componentWillUpdate||("function"===typeof a.componentWillUpdate&&a.componentWillUpdate(r,f,l),"function"===typeof a.UNSAFE_componentWillUpdate&&a.UNSAFE_componentWillUpdate(r,f,l)),"function"===typeof a.componentDidUpdate&&(t.flags|=4),"function"===typeof a.getSnapshotBeforeUpdate&&(t.flags|=1024)):("function"!==typeof a.componentDidUpdate||o===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!==typeof a.getSnapshotBeforeUpdate||o===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=f),a.props=r,a.state=f,a.context=l,r=c):("function"!==typeof a.componentDidUpdate||o===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!==typeof a.getSnapshotBeforeUpdate||o===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),r=!1)}return To(e,t,n,r,s,i)}function To(e,t,n,r,i,s){xo(e,t);var a=0!==(128&t.flags);if(!r&&!a)return i&&Li(t,n,!1),Ho(e,t,s);r=t.stateNode,yo.current=t;var o=a&&"function"!==typeof n.getDerivedStateFromError?null:r.render();return t.flags|=1,null!==e&&a?(t.child=Qs(t,e.child,null,s),t.child=Qs(t,null,o,s)):wo(e,t,o,s),t.memoizedState=r.state,i&&Li(t,n,!0),t.child}function Fo(e){var t=e.stateNode;t.pendingContext?Ni(0,t.pendingContext,t.pendingContext!==t.context):t.context&&Ni(0,t.context,!1),ra(e,t.containerInfo)}function Io(e,t,n,r,i){return ps(),fs(i),t.flags|=256,wo(e,t,n,r),t.child}var Ro,Mo,No,Do,Oo={dehydrated:null,treeContext:null,retryLane:0};function Lo(e){return{baseLanes:e,cachePool:null,transitions:null}}function jo(e,t,n){var r,i=t.pendingProps,a=oa.current,o=!1,l=0!==(128&t.flags);if((r=l)||(r=(null===e||null!==e.memoizedState)&&0!==(2&a)),r?(o=!0,t.flags&=-129):null!==e&&null===e.memoizedState||(a|=1),xi(oa,1&a),null===e)return cs(t),null!==(e=t.memoizedState)&&null!==(e=e.dehydrated)?(0===(1&t.mode)?t.lanes=1:"$!"===e.data?t.lanes=8:t.lanes=1073741824,null):(l=i.children,e=i.fallback,o?(i=t.mode,o=t.child,l={mode:"hidden",children:l},0===(1&i)&&null!==o?(o.childLanes=0,o.pendingProps=l):o=Lc(l,i,0,null),e=Oc(e,i,n,null),o.return=t,e.return=t,o.sibling=e,t.child=o,t.child.memoizedState=Lo(n),t.memoizedState=Oo,e):Uo(t,l));if(null!==(a=e.memoizedState)&&null!==(r=a.dehydrated))return function(e,t,n,r,i,a,o){if(n)return 256&t.flags?(t.flags&=-257,Go(e,t,o,r=uo(Error(s(422))))):null!==t.memoizedState?(t.child=e.child,t.flags|=128,null):(a=r.fallback,i=t.mode,r=Lc({mode:"visible",children:r.children},i,0,null),(a=Oc(a,i,o,null)).flags|=2,r.return=t,a.return=t,r.sibling=a,t.child=r,0!==(1&t.mode)&&Qs(t,e.child,null,o),t.child.memoizedState=Lo(o),t.memoizedState=Oo,a);if(0===(1&t.mode))return Go(e,t,o,null);if("$!"===i.data){if(r=i.nextSibling&&i.nextSibling.dataset)var l=r.dgst;return r=l,Go(e,t,o,r=uo(a=Error(s(419)),r,void 0))}if(l=0!==(o&e.childLanes),bo||l){if(null!==(r=Fl)){switch(o&-o){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}0!==(i=0!==(i&(r.suspendedLanes|o))?0:i)&&i!==a.retryLane&&(a.retryLane=i,Ts(e,i),rc(r,e,i,-1))}return gc(),Go(e,t,o,r=uo(Error(s(421))))}return"$?"===i.data?(t.flags|=128,t.child=e.child,t=Ac.bind(null,e),i._reactRetry=t,null):(e=a.treeContext,rs=ci(i.nextSibling),ns=t,is=!0,ss=null,null!==e&&(Ki[Xi++]=Qi,Ki[Xi++]=Ji,Ki[Xi++]=Yi,Qi=e.id,Ji=e.overflow,Yi=t),t=Uo(t,r.children),t.flags|=4096,t)}(e,t,l,i,r,a,n);if(o){o=i.fallback,l=t.mode,r=(a=e.child).sibling;var c={mode:"hidden",children:i.children};return 0===(1&l)&&t.child!==a?((i=t.child).childLanes=0,i.pendingProps=c,t.deletions=null):(i=Nc(a,c)).subtreeFlags=14680064&a.subtreeFlags,null!==r?o=Nc(r,o):(o=Oc(o,l,n,null)).flags|=2,o.return=t,i.return=t,i.sibling=o,t.child=i,i=o,o=t.child,l=null===(l=e.child.memoizedState)?Lo(n):{baseLanes:l.baseLanes|n,cachePool:null,transitions:l.transitions},o.memoizedState=l,o.childLanes=e.childLanes&~n,t.memoizedState=Oo,i}return e=(o=e.child).sibling,i=Nc(o,{mode:"visible",children:i.children}),0===(1&t.mode)&&(i.lanes=n),i.return=t,i.sibling=null,null!==e&&(null===(n=t.deletions)?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=i,t.memoizedState=null,i}function Uo(e,t){return(t=Lc({mode:"visible",children:t},e.mode,0,null)).return=e,e.child=t}function Go(e,t,n,r){return null!==r&&fs(r),Qs(t,e.child,null,n),(e=Uo(t,t.pendingProps.children)).flags|=2,t.memoizedState=null,e}function Bo(e,t,n){e.lanes|=t;var r=e.alternate;null!==r&&(r.lanes|=t),Ps(e.return,t,n)}function Wo(e,t,n,r,i){var s=e.memoizedState;null===s?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(s.isBackwards=t,s.rendering=null,s.renderingStartTime=0,s.last=r,s.tail=n,s.tailMode=i)}function zo(e,t,n){var r=t.pendingProps,i=r.revealOrder,s=r.tail;if(wo(e,t,r.children,n),0!==(2&(r=oa.current)))r=1&r|2,t.flags|=128;else{if(null!==e&&0!==(128&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&Bo(e,n,t);else if(19===e.tag)Bo(e,n,t);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(xi(oa,r),0===(1&t.mode))t.memoizedState=null;else switch(i){case"forwards":for(n=t.child,i=null;null!==n;)null!==(e=n.alternate)&&null===la(e)&&(i=n),n=n.sibling;null===(n=i)?(i=t.child,t.child=null):(i=n.sibling,n.sibling=null),Wo(t,!1,i,n,s);break;case"backwards":for(n=null,i=t.child,t.child=null;null!==i;){if(null!==(e=i.alternate)&&null===la(e)){t.child=i;break}e=i.sibling,i.sibling=n,n=i,i=e}Wo(t,!0,n,null,s);break;case"together":Wo(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function qo(e,t){0===(1&t.mode)&&null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Ho(e,t,n){if(null!==e&&(t.dependencies=e.dependencies),Ll|=t.lanes,0===(n&t.childLanes))return null;if(null!==e&&t.child!==e.child)throw Error(s(153));if(null!==t.child){for(n=Nc(e=t.child,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=Nc(e,e.pendingProps)).return=t;n.sibling=null}return t.child}function Vo(e,t){if(!is)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;null!==n;)null!==n.alternate&&(r=n),n=n.sibling;null===r?t||null===e.tail?e.tail=null:e.tail.sibling=null:r.sibling=null}}function Ko(e){var t=null!==e.alternate&&e.alternate.child===e.child,n=0,r=0;if(t)for(var i=e.child;null!==i;)n|=i.lanes|i.childLanes,r|=14680064&i.subtreeFlags,r|=14680064&i.flags,i.return=e,i=i.sibling;else for(i=e.child;null!==i;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=e,i=i.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function Xo(e,t,n){var r=t.pendingProps;switch(ts(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ko(t),null;case 1:case 17:return Ri(t.type)&&Mi(),Ko(t),null;case 3:return r=t.stateNode,ia(),Ei(Ti),Ei(Ai),ua(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),null!==e&&null!==e.child||(ds(t)?t.flags|=4:null===e||e.memoizedState.isDehydrated&&0===(256&t.flags)||(t.flags|=1024,null!==ss&&(oc(ss),ss=null))),Mo(e,t),Ko(t),null;case 5:aa(t);var i=na(ta.current);if(n=t.type,null!==e&&null!=t.stateNode)No(e,t,n,r,i),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(null===t.stateNode)throw Error(s(166));return Ko(t),null}if(e=na(Zs.current),ds(t)){r=t.stateNode,n=t.type;var a=t.memoizedProps;switch(r[hi]=t,r[pi]=a,e=0!==(1&t.mode),n){case"dialog":Ur("cancel",r),Ur("close",r);break;case"iframe":case"object":case"embed":Ur("load",r);break;case"video":case"audio":for(i=0;i<Dr.length;i++)Ur(Dr[i],r);break;case"source":Ur("error",r);break;case"img":case"image":case"link":Ur("error",r),Ur("load",r);break;case"details":Ur("toggle",r);break;case"input":Q(r,a),Ur("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!a.multiple},Ur("invalid",r);break;case"textarea":ie(r,a),Ur("invalid",r)}for(var l in _e(n,a),i=null,a)if(a.hasOwnProperty(l)){var c=a[l];"children"===l?"string"===typeof c?r.textContent!==c&&(!0!==a.suppressHydrationWarning&&$r(r.textContent,c,e),i=["children",c]):"number"===typeof c&&r.textContent!==""+c&&(!0!==a.suppressHydrationWarning&&$r(r.textContent,c,e),i=["children",""+c]):o.hasOwnProperty(l)&&null!=c&&"onScroll"===l&&Ur("scroll",r)}switch(n){case"input":V(r),Z(r,a,!0);break;case"textarea":V(r),ae(r);break;case"select":case"option":break;default:"function"===typeof a.onClick&&(r.onclick=Zr)}r=i,t.updateQueue=r,null!==r&&(t.flags|=4)}else{l=9===i.nodeType?i:i.ownerDocument,"http://www.w3.org/1999/xhtml"===e&&(e=oe(n)),"http://www.w3.org/1999/xhtml"===e?"script"===n?((e=l.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):"string"===typeof r.is?e=l.createElement(n,{is:r.is}):(e=l.createElement(n),"select"===n&&(l=e,r.multiple?l.multiple=!0:r.size&&(l.size=r.size))):e=l.createElementNS(e,n),e[hi]=t,e[pi]=r,Ro(e,t,!1,!1),t.stateNode=e;e:{switch(l=ye(n,r),n){case"dialog":Ur("cancel",e),Ur("close",e),i=r;break;case"iframe":case"object":case"embed":Ur("load",e),i=r;break;case"video":case"audio":for(i=0;i<Dr.length;i++)Ur(Dr[i],e);i=r;break;case"source":Ur("error",e),i=r;break;case"img":case"image":case"link":Ur("error",e),Ur("load",e),i=r;break;case"details":Ur("toggle",e),i=r;break;case"input":Q(e,r),i=Y(e,r),Ur("invalid",e);break;case"option":default:i=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},i=L({},r,{value:void 0}),Ur("invalid",e);break;case"textarea":ie(e,r),i=re(e,r),Ur("invalid",e)}for(a in _e(n,i),c=i)if(c.hasOwnProperty(a)){var u=c[a];"style"===a?ge(e,u):"dangerouslySetInnerHTML"===a?null!=(u=u?u.__html:void 0)&&de(e,u):"children"===a?"string"===typeof u?("textarea"!==n||""!==u)&&he(e,u):"number"===typeof u&&he(e,""+u):"suppressContentEditableWarning"!==a&&"suppressHydrationWarning"!==a&&"autoFocus"!==a&&(o.hasOwnProperty(a)?null!=u&&"onScroll"===a&&Ur("scroll",e):null!=u&&y(e,a,u,l))}switch(n){case"input":V(e),Z(e,r,!1);break;case"textarea":V(e),ae(e);break;case"option":null!=r.value&&e.setAttribute("value",""+q(r.value));break;case"select":e.multiple=!!r.multiple,null!=(a=r.value)?ne(e,!!r.multiple,a,!1):null!=r.defaultValue&&ne(e,!!r.multiple,r.defaultValue,!0);break;default:"function"===typeof i.onClick&&(e.onclick=Zr)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}null!==t.ref&&(t.flags|=512,t.flags|=2097152)}return Ko(t),null;case 6:if(e&&null!=t.stateNode)Do(e,t,e.memoizedProps,r);else{if("string"!==typeof r&&null===t.stateNode)throw Error(s(166));if(n=na(ta.current),na(Zs.current),ds(t)){if(r=t.stateNode,n=t.memoizedProps,r[hi]=t,(a=r.nodeValue!==n)&&null!==(e=ns))switch(e.tag){case 3:$r(r.nodeValue,n,0!==(1&e.mode));break;case 5:!0!==e.memoizedProps.suppressHydrationWarning&&$r(r.nodeValue,n,0!==(1&e.mode))}a&&(t.flags|=4)}else(r=(9===n.nodeType?n:n.ownerDocument).createTextNode(r))[hi]=t,t.stateNode=r}return Ko(t),null;case 13:if(Ei(oa),r=t.memoizedState,null===e||null!==e.memoizedState&&null!==e.memoizedState.dehydrated){if(is&&null!==rs&&0!==(1&t.mode)&&0===(128&t.flags))hs(),ps(),t.flags|=98560,a=!1;else if(a=ds(t),null!==r&&null!==r.dehydrated){if(null===e){if(!a)throw Error(s(318));if(!(a=null!==(a=t.memoizedState)?a.dehydrated:null))throw Error(s(317));a[hi]=t}else ps(),0===(128&t.flags)&&(t.memoizedState=null),t.flags|=4;Ko(t),a=!1}else null!==ss&&(oc(ss),ss=null),a=!0;if(!a)return 65536&t.flags?t:null}return 0!==(128&t.flags)?(t.lanes=n,t):((r=null!==r)!==(null!==e&&null!==e.memoizedState)&&r&&(t.child.flags|=8192,0!==(1&t.mode)&&(null===e||0!==(1&oa.current)?0===Dl&&(Dl=3):gc())),null!==t.updateQueue&&(t.flags|=4),Ko(t),null);case 4:return ia(),Mo(e,t),null===e&&Wr(t.stateNode.containerInfo),Ko(t),null;case 10:return Ss(t.type._context),Ko(t),null;case 19:if(Ei(oa),null===(a=t.memoizedState))return Ko(t),null;if(r=0!==(128&t.flags),null===(l=a.rendering))if(r)Vo(a,!1);else{if(0!==Dl||null!==e&&0!==(128&e.flags))for(e=t.child;null!==e;){if(null!==(l=la(e))){for(t.flags|=128,Vo(a,!1),null!==(r=l.updateQueue)&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;null!==n;)e=r,(a=n).flags&=14680066,null===(l=a.alternate)?(a.childLanes=0,a.lanes=e,a.child=null,a.subtreeFlags=0,a.memoizedProps=null,a.memoizedState=null,a.updateQueue=null,a.dependencies=null,a.stateNode=null):(a.childLanes=l.childLanes,a.lanes=l.lanes,a.child=l.child,a.subtreeFlags=0,a.deletions=null,a.memoizedProps=l.memoizedProps,a.memoizedState=l.memoizedState,a.updateQueue=l.updateQueue,a.type=l.type,e=l.dependencies,a.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return xi(oa,1&oa.current|2),t.child}e=e.sibling}null!==a.tail&&Je()>zl&&(t.flags|=128,r=!0,Vo(a,!1),t.lanes=4194304)}else{if(!r)if(null!==(e=la(l))){if(t.flags|=128,r=!0,null!==(n=e.updateQueue)&&(t.updateQueue=n,t.flags|=4),Vo(a,!0),null===a.tail&&"hidden"===a.tailMode&&!l.alternate&&!is)return Ko(t),null}else 2*Je()-a.renderingStartTime>zl&&1073741824!==n&&(t.flags|=128,r=!0,Vo(a,!1),t.lanes=4194304);a.isBackwards?(l.sibling=t.child,t.child=l):(null!==(n=a.last)?n.sibling=l:t.child=l,a.last=l)}return null!==a.tail?(t=a.tail,a.rendering=t,a.tail=t.sibling,a.renderingStartTime=Je(),t.sibling=null,n=oa.current,xi(oa,r?1&n|2:1&n),t):(Ko(t),null);case 22:case 23:return hc(),r=null!==t.memoizedState,null!==e&&null!==e.memoizedState!==r&&(t.flags|=8192),r&&0!==(1&t.mode)?0!==(1073741824&Ml)&&(Ko(t),6&t.subtreeFlags&&(t.flags|=8192)):Ko(t),null;case 24:case 25:return null}throw Error(s(156,t.tag))}function Yo(e,t){switch(ts(t),t.tag){case 1:return Ri(t.type)&&Mi(),65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 3:return ia(),Ei(Ti),Ei(Ai),ua(),0!==(65536&(e=t.flags))&&0===(128&e)?(t.flags=-65537&e|128,t):null;case 5:return aa(t),null;case 13:if(Ei(oa),null!==(e=t.memoizedState)&&null!==e.dehydrated){if(null===t.alternate)throw Error(s(340));ps()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 19:return Ei(oa),null;case 4:return ia(),null;case 10:return Ss(t.type._context),null;case 22:case 23:return hc(),null;default:return null}}Ro=function(e,t){for(var n=t.child;null!==n;){if(5===n.tag||6===n.tag)e.appendChild(n.stateNode);else if(4!==n.tag&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===t)break;for(;null===n.sibling;){if(null===n.return||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},Mo=function(){},No=function(e,t,n,r){var i=e.memoizedProps;if(i!==r){e=t.stateNode,na(Zs.current);var s,a=null;switch(n){case"input":i=Y(e,i),r=Y(e,r),a=[];break;case"select":i=L({},i,{value:void 0}),r=L({},r,{value:void 0}),a=[];break;case"textarea":i=re(e,i),r=re(e,r),a=[];break;default:"function"!==typeof i.onClick&&"function"===typeof r.onClick&&(e.onclick=Zr)}for(u in _e(n,r),n=null,i)if(!r.hasOwnProperty(u)&&i.hasOwnProperty(u)&&null!=i[u])if("style"===u){var l=i[u];for(s in l)l.hasOwnProperty(s)&&(n||(n={}),n[s]="")}else"dangerouslySetInnerHTML"!==u&&"children"!==u&&"suppressContentEditableWarning"!==u&&"suppressHydrationWarning"!==u&&"autoFocus"!==u&&(o.hasOwnProperty(u)?a||(a=[]):(a=a||[]).push(u,null));for(u in r){var c=r[u];if(l=null!=i?i[u]:void 0,r.hasOwnProperty(u)&&c!==l&&(null!=c||null!=l))if("style"===u)if(l){for(s in l)!l.hasOwnProperty(s)||c&&c.hasOwnProperty(s)||(n||(n={}),n[s]="");for(s in c)c.hasOwnProperty(s)&&l[s]!==c[s]&&(n||(n={}),n[s]=c[s])}else n||(a||(a=[]),a.push(u,n)),n=c;else"dangerouslySetInnerHTML"===u?(c=c?c.__html:void 0,l=l?l.__html:void 0,null!=c&&l!==c&&(a=a||[]).push(u,c)):"children"===u?"string"!==typeof c&&"number"!==typeof c||(a=a||[]).push(u,""+c):"suppressContentEditableWarning"!==u&&"suppressHydrationWarning"!==u&&(o.hasOwnProperty(u)?(null!=c&&"onScroll"===u&&Ur("scroll",e),a||l===c||(a=[])):(a=a||[]).push(u,c))}n&&(a=a||[]).push("style",n);var u=a;(t.updateQueue=u)&&(t.flags|=4)}},Do=function(e,t,n,r){n!==r&&(t.flags|=4)};var Qo=!1,Jo=!1,$o="function"===typeof WeakSet?WeakSet:Set,Zo=null;function el(e,t){var n=e.ref;if(null!==n)if("function"===typeof n)try{n(null)}catch(r){Ec(e,t,r)}else n.current=null}function tl(e,t,n){try{n()}catch(r){Ec(e,t,r)}}var nl=!1;function rl(e,t,n){var r=t.updateQueue;if(null!==(r=null!==r?r.lastEffect:null)){var i=r=r.next;do{if((i.tag&e)===e){var s=i.destroy;i.destroy=void 0,void 0!==s&&tl(t,n,s)}i=i.next}while(i!==r)}}function il(e,t){if(null!==(t=null!==(t=t.updateQueue)?t.lastEffect:null)){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function sl(e){var t=e.ref;if(null!==t){var n=e.stateNode;e.tag,e=n,"function"===typeof t?t(e):t.current=e}}function al(e){var t=e.alternate;null!==t&&(e.alternate=null,al(t)),e.child=null,e.deletions=null,e.sibling=null,5===e.tag&&(null!==(t=e.stateNode)&&(delete t[hi],delete t[pi],delete t[mi],delete t[gi],delete t[vi])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function ol(e){return 5===e.tag||3===e.tag||4===e.tag}function ll(e){e:for(;;){for(;null===e.sibling;){if(null===e.return||ol(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;5!==e.tag&&6!==e.tag&&18!==e.tag;){if(2&e.flags)continue e;if(null===e.child||4===e.tag)continue e;e.child.return=e,e=e.child}if(!(2&e.flags))return e.stateNode}}function cl(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?8===n.nodeType?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(8===n.nodeType?(t=n.parentNode).insertBefore(e,n):(t=n).appendChild(e),null!==(n=n._reactRootContainer)&&void 0!==n||null!==t.onclick||(t.onclick=Zr));else if(4!==r&&null!==(e=e.child))for(cl(e,t,n),e=e.sibling;null!==e;)cl(e,t,n),e=e.sibling}function ul(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(4!==r&&null!==(e=e.child))for(ul(e,t,n),e=e.sibling;null!==e;)ul(e,t,n),e=e.sibling}var dl=null,hl=!1;function pl(e,t,n){for(n=n.child;null!==n;)fl(e,t,n),n=n.sibling}function fl(e,t,n){if(st&&"function"===typeof st.onCommitFiberUnmount)try{st.onCommitFiberUnmount(it,n)}catch(o){}switch(n.tag){case 5:Jo||el(n,t);case 6:var r=dl,i=hl;dl=null,pl(e,t,n),hl=i,null!==(dl=r)&&(hl?(e=dl,n=n.stateNode,8===e.nodeType?e.parentNode.removeChild(n):e.removeChild(n)):dl.removeChild(n.stateNode));break;case 18:null!==dl&&(hl?(e=dl,n=n.stateNode,8===e.nodeType?li(e.parentNode,n):1===e.nodeType&&li(e,n),Wt(e)):li(dl,n.stateNode));break;case 4:r=dl,i=hl,dl=n.stateNode.containerInfo,hl=!0,pl(e,t,n),dl=r,hl=i;break;case 0:case 11:case 14:case 15:if(!Jo&&(null!==(r=n.updateQueue)&&null!==(r=r.lastEffect))){i=r=r.next;do{var s=i,a=s.destroy;s=s.tag,void 0!==a&&(0!==(2&s)||0!==(4&s))&&tl(n,t,a),i=i.next}while(i!==r)}pl(e,t,n);break;case 1:if(!Jo&&(el(n,t),"function"===typeof(r=n.stateNode).componentWillUnmount))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(o){Ec(n,t,o)}pl(e,t,n);break;case 21:pl(e,t,n);break;case 22:1&n.mode?(Jo=(r=Jo)||null!==n.memoizedState,pl(e,t,n),Jo=r):pl(e,t,n);break;default:pl(e,t,n)}}function ml(e){var t=e.updateQueue;if(null!==t){e.updateQueue=null;var n=e.stateNode;null===n&&(n=e.stateNode=new $o),t.forEach((function(t){var r=Tc.bind(null,e,t);n.has(t)||(n.add(t),t.then(r,r))}))}}function gl(e,t){var n=t.deletions;if(null!==n)for(var r=0;r<n.length;r++){var i=n[r];try{var a=e,o=t,l=o;e:for(;null!==l;){switch(l.tag){case 5:dl=l.stateNode,hl=!1;break e;case 3:case 4:dl=l.stateNode.containerInfo,hl=!0;break e}l=l.return}if(null===dl)throw Error(s(160));fl(a,o,i),dl=null,hl=!1;var c=i.alternate;null!==c&&(c.return=null),i.return=null}catch(u){Ec(i,t,u)}}if(12854&t.subtreeFlags)for(t=t.child;null!==t;)vl(t,e),t=t.sibling}function vl(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(gl(t,e),_l(e),4&r){try{rl(3,e,e.return),il(3,e)}catch(g){Ec(e,e.return,g)}try{rl(5,e,e.return)}catch(g){Ec(e,e.return,g)}}break;case 1:gl(t,e),_l(e),512&r&&null!==n&&el(n,n.return);break;case 5:if(gl(t,e),_l(e),512&r&&null!==n&&el(n,n.return),32&e.flags){var i=e.stateNode;try{he(i,"")}catch(g){Ec(e,e.return,g)}}if(4&r&&null!=(i=e.stateNode)){var a=e.memoizedProps,o=null!==n?n.memoizedProps:a,l=e.type,c=e.updateQueue;if(e.updateQueue=null,null!==c)try{"input"===l&&"radio"===a.type&&null!=a.name&&J(i,a),ye(l,o);var u=ye(l,a);for(o=0;o<c.length;o+=2){var d=c[o],h=c[o+1];"style"===d?ge(i,h):"dangerouslySetInnerHTML"===d?de(i,h):"children"===d?he(i,h):y(i,d,h,u)}switch(l){case"input":$(i,a);break;case"textarea":se(i,a);break;case"select":var p=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!a.multiple;var f=a.value;null!=f?ne(i,!!a.multiple,f,!1):p!==!!a.multiple&&(null!=a.defaultValue?ne(i,!!a.multiple,a.defaultValue,!0):ne(i,!!a.multiple,a.multiple?[]:"",!1))}i[pi]=a}catch(g){Ec(e,e.return,g)}}break;case 6:if(gl(t,e),_l(e),4&r){if(null===e.stateNode)throw Error(s(162));i=e.stateNode,a=e.memoizedProps;try{i.nodeValue=a}catch(g){Ec(e,e.return,g)}}break;case 3:if(gl(t,e),_l(e),4&r&&null!==n&&n.memoizedState.isDehydrated)try{Wt(t.containerInfo)}catch(g){Ec(e,e.return,g)}break;case 4:default:gl(t,e),_l(e);break;case 13:gl(t,e),_l(e),8192&(i=e.child).flags&&(a=null!==i.memoizedState,i.stateNode.isHidden=a,!a||null!==i.alternate&&null!==i.alternate.memoizedState||(Wl=Je())),4&r&&ml(e);break;case 22:if(d=null!==n&&null!==n.memoizedState,1&e.mode?(Jo=(u=Jo)||d,gl(t,e),Jo=u):gl(t,e),_l(e),8192&r){if(u=null!==e.memoizedState,(e.stateNode.isHidden=u)&&!d&&0!==(1&e.mode))for(Zo=e,d=e.child;null!==d;){for(h=Zo=d;null!==Zo;){switch(f=(p=Zo).child,p.tag){case 0:case 11:case 14:case 15:rl(4,p,p.return);break;case 1:el(p,p.return);var m=p.stateNode;if("function"===typeof m.componentWillUnmount){r=p,n=p.return;try{t=r,m.props=t.memoizedProps,m.state=t.memoizedState,m.componentWillUnmount()}catch(g){Ec(r,n,g)}}break;case 5:el(p,p.return);break;case 22:if(null!==p.memoizedState){Sl(h);continue}}null!==f?(f.return=p,Zo=f):Sl(h)}d=d.sibling}e:for(d=null,h=e;;){if(5===h.tag){if(null===d){d=h;try{i=h.stateNode,u?"function"===typeof(a=i.style).setProperty?a.setProperty("display","none","important"):a.display="none":(l=h.stateNode,o=void 0!==(c=h.memoizedProps.style)&&null!==c&&c.hasOwnProperty("display")?c.display:null,l.style.display=me("display",o))}catch(g){Ec(e,e.return,g)}}}else if(6===h.tag){if(null===d)try{h.stateNode.nodeValue=u?"":h.memoizedProps}catch(g){Ec(e,e.return,g)}}else if((22!==h.tag&&23!==h.tag||null===h.memoizedState||h===e)&&null!==h.child){h.child.return=h,h=h.child;continue}if(h===e)break e;for(;null===h.sibling;){if(null===h.return||h.return===e)break e;d===h&&(d=null),h=h.return}d===h&&(d=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:gl(t,e),_l(e),4&r&&ml(e);case 21:}}function _l(e){var t=e.flags;if(2&t){try{e:{for(var n=e.return;null!==n;){if(ol(n)){var r=n;break e}n=n.return}throw Error(s(160))}switch(r.tag){case 5:var i=r.stateNode;32&r.flags&&(he(i,""),r.flags&=-33),ul(e,ll(e),i);break;case 3:case 4:var a=r.stateNode.containerInfo;cl(e,ll(e),a);break;default:throw Error(s(161))}}catch(o){Ec(e,e.return,o)}e.flags&=-3}4096&t&&(e.flags&=-4097)}function yl(e,t,n){Zo=e,bl(e,t,n)}function bl(e,t,n){for(var r=0!==(1&e.mode);null!==Zo;){var i=Zo,s=i.child;if(22===i.tag&&r){var a=null!==i.memoizedState||Qo;if(!a){var o=i.alternate,l=null!==o&&null!==o.memoizedState||Jo;o=Qo;var c=Jo;if(Qo=a,(Jo=l)&&!c)for(Zo=i;null!==Zo;)l=(a=Zo).child,22===a.tag&&null!==a.memoizedState?Pl(i):null!==l?(l.return=a,Zo=l):Pl(i);for(;null!==s;)Zo=s,bl(s,t,n),s=s.sibling;Zo=i,Qo=o,Jo=c}wl(e)}else 0!==(8772&i.subtreeFlags)&&null!==s?(s.return=i,Zo=s):wl(e)}}function wl(e){for(;null!==Zo;){var t=Zo;if(0!==(8772&t.flags)){var n=t.alternate;try{if(0!==(8772&t.flags))switch(t.tag){case 0:case 11:case 15:Jo||il(5,t);break;case 1:var r=t.stateNode;if(4&t.flags&&!Jo)if(null===n)r.componentDidMount();else{var i=t.elementType===t.type?n.memoizedProps:gs(t.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var a=t.updateQueue;null!==a&&js(t,a,r);break;case 3:var o=t.updateQueue;if(null!==o){if(n=null,null!==t.child)switch(t.child.tag){case 5:case 1:n=t.child.stateNode}js(t,o,n)}break;case 5:var l=t.stateNode;if(null===n&&4&t.flags){n=l;var c=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:case 4:case 12:case 19:case 17:case 21:case 22:case 23:case 25:break;case 13:if(null===t.memoizedState){var u=t.alternate;if(null!==u){var d=u.memoizedState;if(null!==d){var h=d.dehydrated;null!==h&&Wt(h)}}}break;default:throw Error(s(163))}Jo||512&t.flags&&sl(t)}catch(p){Ec(t,t.return,p)}}if(t===e){Zo=null;break}if(null!==(n=t.sibling)){n.return=t.return,Zo=n;break}Zo=t.return}}function Sl(e){for(;null!==Zo;){var t=Zo;if(t===e){Zo=null;break}var n=t.sibling;if(null!==n){n.return=t.return,Zo=n;break}Zo=t.return}}function Pl(e){for(;null!==Zo;){var t=Zo;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{il(4,t)}catch(l){Ec(t,n,l)}break;case 1:var r=t.stateNode;if("function"===typeof r.componentDidMount){var i=t.return;try{r.componentDidMount()}catch(l){Ec(t,i,l)}}var s=t.return;try{sl(t)}catch(l){Ec(t,s,l)}break;case 5:var a=t.return;try{sl(t)}catch(l){Ec(t,a,l)}}}catch(l){Ec(t,t.return,l)}if(t===e){Zo=null;break}var o=t.sibling;if(null!==o){o.return=t.return,Zo=o;break}Zo=t.return}}var Cl,El=Math.ceil,xl=b.ReactCurrentDispatcher,kl=b.ReactCurrentOwner,Al=b.ReactCurrentBatchConfig,Tl=0,Fl=null,Il=null,Rl=0,Ml=0,Nl=Ci(0),Dl=0,Ol=null,Ll=0,jl=0,Ul=0,Gl=null,Bl=null,Wl=0,zl=1/0,ql=null,Hl=!1,Vl=null,Kl=null,Xl=!1,Yl=null,Ql=0,Jl=0,$l=null,Zl=-1,ec=0;function tc(){return 0!==(6&Tl)?Je():-1!==Zl?Zl:Zl=Je()}function nc(e){return 0===(1&e.mode)?1:0!==(2&Tl)&&0!==Rl?Rl&-Rl:null!==ms.transition?(0===ec&&(ec=mt()),ec):0!==(e=yt)?e:e=void 0===(e=window.event)?16:Qt(e.type)}function rc(e,t,n,r){if(50<Jl)throw Jl=0,$l=null,Error(s(185));vt(e,n,r),0!==(2&Tl)&&e===Fl||(e===Fl&&(0===(2&Tl)&&(jl|=n),4===Dl&&lc(e,Rl)),ic(e,r),1===n&&0===Tl&&0===(1&t.mode)&&(zl=Je()+500,Ui&&Wi()))}function ic(e,t){var n=e.callbackNode;!function(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,i=e.expirationTimes,s=e.pendingLanes;0<s;){var a=31-at(s),o=1<<a,l=i[a];-1===l?0!==(o&n)&&0===(o&r)||(i[a]=pt(o,t)):l<=t&&(e.expiredLanes|=o),s&=~o}}(e,t);var r=ht(e,e===Fl?Rl:0);if(0===r)null!==n&&Xe(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(null!=n&&Xe(n),1===t)0===e.tag?function(e){Ui=!0,Bi(e)}(cc.bind(null,e)):Bi(cc.bind(null,e)),ai((function(){0===(6&Tl)&&Wi()})),n=null;else{switch(bt(r)){case 1:n=Ze;break;case 4:n=et;break;case 16:default:n=tt;break;case 536870912:n=rt}n=Fc(n,sc.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function sc(e,t){if(Zl=-1,ec=0,0!==(6&Tl))throw Error(s(327));var n=e.callbackNode;if(Pc()&&e.callbackNode!==n)return null;var r=ht(e,e===Fl?Rl:0);if(0===r)return null;if(0!==(30&r)||0!==(r&e.expiredLanes)||t)t=vc(e,r);else{t=r;var i=Tl;Tl|=2;var a=mc();for(Fl===e&&Rl===t||(ql=null,zl=Je()+500,pc(e,t));;)try{yc();break}catch(l){fc(e,l)}ws(),xl.current=a,Tl=i,null!==Il?t=0:(Fl=null,Rl=0,t=Dl)}if(0!==t){if(2===t&&(0!==(i=ft(e))&&(r=i,t=ac(e,i))),1===t)throw n=Ol,pc(e,0),lc(e,r),ic(e,Je()),n;if(6===t)lc(e,r);else{if(i=e.current.alternate,0===(30&r)&&!function(e){for(var t=e;;){if(16384&t.flags){var n=t.updateQueue;if(null!==n&&null!==(n=n.stores))for(var r=0;r<n.length;r++){var i=n[r],s=i.getSnapshot;i=i.value;try{if(!or(s(),i))return!1}catch(o){return!1}}}if(n=t.child,16384&t.subtreeFlags&&null!==n)n.return=t,t=n;else{if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}(i)&&(2===(t=vc(e,r))&&(0!==(a=ft(e))&&(r=a,t=ac(e,a))),1===t))throw n=Ol,pc(e,0),lc(e,r),ic(e,Je()),n;switch(e.finishedWork=i,e.finishedLanes=r,t){case 0:case 1:throw Error(s(345));case 2:case 5:Sc(e,Bl,ql);break;case 3:if(lc(e,r),(130023424&r)===r&&10<(t=Wl+500-Je())){if(0!==ht(e,0))break;if(((i=e.suspendedLanes)&r)!==r){tc(),e.pingedLanes|=e.suspendedLanes&i;break}e.timeoutHandle=ri(Sc.bind(null,e,Bl,ql),t);break}Sc(e,Bl,ql);break;case 4:if(lc(e,r),(4194240&r)===r)break;for(t=e.eventTimes,i=-1;0<r;){var o=31-at(r);a=1<<o,(o=t[o])>i&&(i=o),r&=~a}if(r=i,10<(r=(120>(r=Je()-r)?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*El(r/1960))-r)){e.timeoutHandle=ri(Sc.bind(null,e,Bl,ql),r);break}Sc(e,Bl,ql);break;default:throw Error(s(329))}}}return ic(e,Je()),e.callbackNode===n?sc.bind(null,e):null}function ac(e,t){var n=Gl;return e.current.memoizedState.isDehydrated&&(pc(e,t).flags|=256),2!==(e=vc(e,t))&&(t=Bl,Bl=n,null!==t&&oc(t)),e}function oc(e){null===Bl?Bl=e:Bl.push.apply(Bl,e)}function lc(e,t){for(t&=~Ul,t&=~jl,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-at(t),r=1<<n;e[n]=-1,t&=~r}}function cc(e){if(0!==(6&Tl))throw Error(s(327));Pc();var t=ht(e,0);if(0===(1&t))return ic(e,Je()),null;var n=vc(e,t);if(0!==e.tag&&2===n){var r=ft(e);0!==r&&(t=r,n=ac(e,r))}if(1===n)throw n=Ol,pc(e,0),lc(e,t),ic(e,Je()),n;if(6===n)throw Error(s(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,Sc(e,Bl,ql),ic(e,Je()),null}function uc(e,t){var n=Tl;Tl|=1;try{return e(t)}finally{0===(Tl=n)&&(zl=Je()+500,Ui&&Wi())}}function dc(e){null!==Yl&&0===Yl.tag&&0===(6&Tl)&&Pc();var t=Tl;Tl|=1;var n=Al.transition,r=yt;try{if(Al.transition=null,yt=1,e)return e()}finally{yt=r,Al.transition=n,0===(6&(Tl=t))&&Wi()}}function hc(){Ml=Nl.current,Ei(Nl)}function pc(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(-1!==n&&(e.timeoutHandle=-1,ii(n)),null!==Il)for(n=Il.return;null!==n;){var r=n;switch(ts(r),r.tag){case 1:null!==(r=r.type.childContextTypes)&&void 0!==r&&Mi();break;case 3:ia(),Ei(Ti),Ei(Ai),ua();break;case 5:aa(r);break;case 4:ia();break;case 13:case 19:Ei(oa);break;case 10:Ss(r.type._context);break;case 22:case 23:hc()}n=n.return}if(Fl=e,Il=e=Nc(e.current,null),Rl=Ml=t,Dl=0,Ol=null,Ul=jl=Ll=0,Bl=Gl=null,null!==xs){for(t=0;t<xs.length;t++)if(null!==(r=(n=xs[t]).interleaved)){n.interleaved=null;var i=r.next,s=n.pending;if(null!==s){var a=s.next;s.next=i,r.next=a}n.pending=r}xs=null}return e}function fc(e,t){for(;;){var n=Il;try{if(ws(),da.current=so,va){for(var r=fa.memoizedState;null!==r;){var i=r.queue;null!==i&&(i.pending=null),r=r.next}va=!1}if(pa=0,ga=ma=fa=null,_a=!1,ya=0,kl.current=null,null===n||null===n.return){Dl=1,Ol=t,Il=null;break}e:{var a=e,o=n.return,l=n,c=t;if(t=Rl,l.flags|=32768,null!==c&&"object"===typeof c&&"function"===typeof c.then){var u=c,d=l,h=d.tag;if(0===(1&d.mode)&&(0===h||11===h||15===h)){var p=d.alternate;p?(d.updateQueue=p.updateQueue,d.memoizedState=p.memoizedState,d.lanes=p.lanes):(d.updateQueue=null,d.memoizedState=null)}var f=vo(o);if(null!==f){f.flags&=-257,_o(f,o,l,0,t),1&f.mode&&go(a,u,t),c=u;var m=(t=f).updateQueue;if(null===m){var g=new Set;g.add(c),t.updateQueue=g}else m.add(c);break e}if(0===(1&t)){go(a,u,t),gc();break e}c=Error(s(426))}else if(is&&1&l.mode){var v=vo(o);if(null!==v){0===(65536&v.flags)&&(v.flags|=256),_o(v,o,l,0,t),fs(co(c,l));break e}}a=c=co(c,l),4!==Dl&&(Dl=2),null===Gl?Gl=[a]:Gl.push(a),a=o;do{switch(a.tag){case 3:a.flags|=65536,t&=-t,a.lanes|=t,Os(a,fo(0,c,t));break e;case 1:l=c;var _=a.type,y=a.stateNode;if(0===(128&a.flags)&&("function"===typeof _.getDerivedStateFromError||null!==y&&"function"===typeof y.componentDidCatch&&(null===Kl||!Kl.has(y)))){a.flags|=65536,t&=-t,a.lanes|=t,Os(a,mo(a,l,t));break e}}a=a.return}while(null!==a)}wc(n)}catch(b){t=b,Il===n&&null!==n&&(Il=n=n.return);continue}break}}function mc(){var e=xl.current;return xl.current=so,null===e?so:e}function gc(){0!==Dl&&3!==Dl&&2!==Dl||(Dl=4),null===Fl||0===(268435455&Ll)&&0===(268435455&jl)||lc(Fl,Rl)}function vc(e,t){var n=Tl;Tl|=2;var r=mc();for(Fl===e&&Rl===t||(ql=null,pc(e,t));;)try{_c();break}catch(i){fc(e,i)}if(ws(),Tl=n,xl.current=r,null!==Il)throw Error(s(261));return Fl=null,Rl=0,Dl}function _c(){for(;null!==Il;)bc(Il)}function yc(){for(;null!==Il&&!Ye();)bc(Il)}function bc(e){var t=Cl(e.alternate,e,Ml);e.memoizedProps=e.pendingProps,null===t?wc(e):Il=t,kl.current=null}function wc(e){var t=e;do{var n=t.alternate;if(e=t.return,0===(32768&t.flags)){if(null!==(n=Xo(n,t,Ml)))return void(Il=n)}else{if(null!==(n=Yo(n,t)))return n.flags&=32767,void(Il=n);if(null===e)return Dl=6,void(Il=null);e.flags|=32768,e.subtreeFlags=0,e.deletions=null}if(null!==(t=t.sibling))return void(Il=t);Il=t=e}while(null!==t);0===Dl&&(Dl=5)}function Sc(e,t,n){var r=yt,i=Al.transition;try{Al.transition=null,yt=1,function(e,t,n,r){do{Pc()}while(null!==Yl);if(0!==(6&Tl))throw Error(s(327));n=e.finishedWork;var i=e.finishedLanes;if(null===n)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(s(177));e.callbackNode=null,e.callbackPriority=0;var a=n.lanes|n.childLanes;if(function(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var i=31-at(n),s=1<<i;t[i]=0,r[i]=-1,e[i]=-1,n&=~s}}(e,a),e===Fl&&(Il=Fl=null,Rl=0),0===(2064&n.subtreeFlags)&&0===(2064&n.flags)||Xl||(Xl=!0,Fc(tt,(function(){return Pc(),null}))),a=0!==(15990&n.flags),0!==(15990&n.subtreeFlags)||a){a=Al.transition,Al.transition=null;var o=yt;yt=1;var l=Tl;Tl|=4,kl.current=null,function(e,t){if(ei=qt,pr(e=hr())){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{var r=(n=(n=e.ownerDocument)&&n.defaultView||window).getSelection&&n.getSelection();if(r&&0!==r.rangeCount){n=r.anchorNode;var i=r.anchorOffset,a=r.focusNode;r=r.focusOffset;try{n.nodeType,a.nodeType}catch(w){n=null;break e}var o=0,l=-1,c=-1,u=0,d=0,h=e,p=null;t:for(;;){for(var f;h!==n||0!==i&&3!==h.nodeType||(l=o+i),h!==a||0!==r&&3!==h.nodeType||(c=o+r),3===h.nodeType&&(o+=h.nodeValue.length),null!==(f=h.firstChild);)p=h,h=f;for(;;){if(h===e)break t;if(p===n&&++u===i&&(l=o),p===a&&++d===r&&(c=o),null!==(f=h.nextSibling))break;p=(h=p).parentNode}h=f}n=-1===l||-1===c?null:{start:l,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(ti={focusedElem:e,selectionRange:n},qt=!1,Zo=t;null!==Zo;)if(e=(t=Zo).child,0!==(1028&t.subtreeFlags)&&null!==e)e.return=t,Zo=e;else for(;null!==Zo;){t=Zo;try{var m=t.alternate;if(0!==(1024&t.flags))switch(t.tag){case 0:case 11:case 15:case 5:case 6:case 4:case 17:break;case 1:if(null!==m){var g=m.memoizedProps,v=m.memoizedState,_=t.stateNode,y=_.getSnapshotBeforeUpdate(t.elementType===t.type?g:gs(t.type,g),v);_.__reactInternalSnapshotBeforeUpdate=y}break;case 3:var b=t.stateNode.containerInfo;1===b.nodeType?b.textContent="":9===b.nodeType&&b.documentElement&&b.removeChild(b.documentElement);break;default:throw Error(s(163))}}catch(w){Ec(t,t.return,w)}if(null!==(e=t.sibling)){e.return=t.return,Zo=e;break}Zo=t.return}m=nl,nl=!1}(e,n),vl(n,e),fr(ti),qt=!!ei,ti=ei=null,e.current=n,yl(n,e,i),Qe(),Tl=l,yt=o,Al.transition=a}else e.current=n;if(Xl&&(Xl=!1,Yl=e,Ql=i),a=e.pendingLanes,0===a&&(Kl=null),function(e){if(st&&"function"===typeof st.onCommitFiberRoot)try{st.onCommitFiberRoot(it,e,void 0,128===(128&e.current.flags))}catch(t){}}(n.stateNode),ic(e,Je()),null!==t)for(r=e.onRecoverableError,n=0;n<t.length;n++)i=t[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(Hl)throw Hl=!1,e=Vl,Vl=null,e;0!==(1&Ql)&&0!==e.tag&&Pc(),a=e.pendingLanes,0!==(1&a)?e===$l?Jl++:(Jl=0,$l=e):Jl=0,Wi()}(e,t,n,r)}finally{Al.transition=i,yt=r}return null}function Pc(){if(null!==Yl){var e=bt(Ql),t=Al.transition,n=yt;try{if(Al.transition=null,yt=16>e?16:e,null===Yl)var r=!1;else{if(e=Yl,Yl=null,Ql=0,0!==(6&Tl))throw Error(s(331));var i=Tl;for(Tl|=4,Zo=e.current;null!==Zo;){var a=Zo,o=a.child;if(0!==(16&Zo.flags)){var l=a.deletions;if(null!==l){for(var c=0;c<l.length;c++){var u=l[c];for(Zo=u;null!==Zo;){var d=Zo;switch(d.tag){case 0:case 11:case 15:rl(8,d,a)}var h=d.child;if(null!==h)h.return=d,Zo=h;else for(;null!==Zo;){var p=(d=Zo).sibling,f=d.return;if(al(d),d===u){Zo=null;break}if(null!==p){p.return=f,Zo=p;break}Zo=f}}}var m=a.alternate;if(null!==m){var g=m.child;if(null!==g){m.child=null;do{var v=g.sibling;g.sibling=null,g=v}while(null!==g)}}Zo=a}}if(0!==(2064&a.subtreeFlags)&&null!==o)o.return=a,Zo=o;else e:for(;null!==Zo;){if(0!==(2048&(a=Zo).flags))switch(a.tag){case 0:case 11:case 15:rl(9,a,a.return)}var _=a.sibling;if(null!==_){_.return=a.return,Zo=_;break e}Zo=a.return}}var y=e.current;for(Zo=y;null!==Zo;){var b=(o=Zo).child;if(0!==(2064&o.subtreeFlags)&&null!==b)b.return=o,Zo=b;else e:for(o=y;null!==Zo;){if(0!==(2048&(l=Zo).flags))try{switch(l.tag){case 0:case 11:case 15:il(9,l)}}catch(S){Ec(l,l.return,S)}if(l===o){Zo=null;break e}var w=l.sibling;if(null!==w){w.return=l.return,Zo=w;break e}Zo=l.return}}if(Tl=i,Wi(),st&&"function"===typeof st.onPostCommitFiberRoot)try{st.onPostCommitFiberRoot(it,e)}catch(S){}r=!0}return r}finally{yt=n,Al.transition=t}}return!1}function Cc(e,t,n){e=Ns(e,t=fo(0,t=co(n,t),1),1),t=tc(),null!==e&&(vt(e,1,t),ic(e,t))}function Ec(e,t,n){if(3===e.tag)Cc(e,e,n);else for(;null!==t;){if(3===t.tag){Cc(t,e,n);break}if(1===t.tag){var r=t.stateNode;if("function"===typeof t.type.getDerivedStateFromError||"function"===typeof r.componentDidCatch&&(null===Kl||!Kl.has(r))){t=Ns(t,e=mo(t,e=co(n,e),1),1),e=tc(),null!==t&&(vt(t,1,e),ic(t,e));break}}t=t.return}}function xc(e,t,n){var r=e.pingCache;null!==r&&r.delete(t),t=tc(),e.pingedLanes|=e.suspendedLanes&n,Fl===e&&(Rl&n)===n&&(4===Dl||3===Dl&&(130023424&Rl)===Rl&&500>Je()-Wl?pc(e,0):Ul|=n),ic(e,t)}function kc(e,t){0===t&&(0===(1&e.mode)?t=1:(t=ut,0===(130023424&(ut<<=1))&&(ut=4194304)));var n=tc();null!==(e=Ts(e,t))&&(vt(e,t,n),ic(e,n))}function Ac(e){var t=e.memoizedState,n=0;null!==t&&(n=t.retryLane),kc(e,n)}function Tc(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,i=e.memoizedState;null!==i&&(n=i.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(s(314))}null!==r&&r.delete(t),kc(e,n)}function Fc(e,t){return Ke(e,t)}function Ic(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Rc(e,t,n,r){return new Ic(e,t,n,r)}function Mc(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Nc(e,t){var n=e.alternate;return null===n?((n=Rc(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=14680064&e.flags,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Dc(e,t,n,r,i,a){var o=2;if(r=e,"function"===typeof e)Mc(e)&&(o=1);else if("string"===typeof e)o=5;else e:switch(e){case P:return Oc(n.children,i,a,t);case C:o=8,i|=8;break;case E:return(e=Rc(12,n,t,2|i)).elementType=E,e.lanes=a,e;case T:return(e=Rc(13,n,t,i)).elementType=T,e.lanes=a,e;case F:return(e=Rc(19,n,t,i)).elementType=F,e.lanes=a,e;case M:return Lc(n,i,a,t);default:if("object"===typeof e&&null!==e)switch(e.$$typeof){case x:o=10;break e;case k:o=9;break e;case A:o=11;break e;case I:o=14;break e;case R:o=16,r=null;break e}throw Error(s(130,null==e?e:typeof e,""))}return(t=Rc(o,n,t,i)).elementType=e,t.type=r,t.lanes=a,t}function Oc(e,t,n,r){return(e=Rc(7,e,r,t)).lanes=n,e}function Lc(e,t,n,r){return(e=Rc(22,e,r,t)).elementType=M,e.lanes=n,e.stateNode={isHidden:!1},e}function jc(e,t,n){return(e=Rc(6,e,null,t)).lanes=n,e}function Uc(e,t,n){return(t=Rc(4,null!==e.children?e.children:[],e.key,t)).lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Gc(e,t,n,r,i){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=gt(0),this.expirationTimes=gt(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=gt(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function Bc(e,t,n,r,i,s,a,o,l){return e=new Gc(e,t,n,o,l),1===t?(t=1,!0===s&&(t|=8)):t=0,s=Rc(3,null,null,t),e.current=s,s.stateNode=e,s.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Is(s),e}function Wc(e){if(!e)return ki;e:{if(We(e=e._reactInternals)!==e||1!==e.tag)throw Error(s(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Ri(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(null!==t);throw Error(s(171))}if(1===e.tag){var n=e.type;if(Ri(n))return Di(e,n,t)}return t}function zc(e,t,n,r,i,s,a,o,l){return(e=Bc(n,r,!0,e,0,s,0,o,l)).context=Wc(null),n=e.current,(s=Ms(r=tc(),i=nc(n))).callback=void 0!==t&&null!==t?t:null,Ns(n,s,i),e.current.lanes=i,vt(e,i,r),ic(e,r),e}function qc(e,t,n,r){var i=t.current,s=tc(),a=nc(i);return n=Wc(n),null===t.context?t.context=n:t.pendingContext=n,(t=Ms(s,a)).payload={element:e},null!==(r=void 0===r?null:r)&&(t.callback=r),null!==(e=Ns(i,t,a))&&(rc(e,i,a,s),Ds(e,i,a)),a}function Hc(e){return(e=e.current).child?(e.child.tag,e.child.stateNode):null}function Vc(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var n=e.retryLane;e.retryLane=0!==n&&n<t?n:t}}function Kc(e,t){Vc(e,t),(e=e.alternate)&&Vc(e,t)}Cl=function(e,t,n){if(null!==e)if(e.memoizedProps!==t.pendingProps||Ti.current)bo=!0;else{if(0===(e.lanes&n)&&0===(128&t.flags))return bo=!1,function(e,t,n){switch(t.tag){case 3:Fo(t),ps();break;case 5:sa(t);break;case 1:Ri(t.type)&&Oi(t);break;case 4:ra(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,i=t.memoizedProps.value;xi(vs,r._currentValue),r._currentValue=i;break;case 13:if(null!==(r=t.memoizedState))return null!==r.dehydrated?(xi(oa,1&oa.current),t.flags|=128,null):0!==(n&t.child.childLanes)?jo(e,t,n):(xi(oa,1&oa.current),null!==(e=Ho(e,t,n))?e.sibling:null);xi(oa,1&oa.current);break;case 19:if(r=0!==(n&t.childLanes),0!==(128&e.flags)){if(r)return zo(e,t,n);t.flags|=128}if(null!==(i=t.memoizedState)&&(i.rendering=null,i.tail=null,i.lastEffect=null),xi(oa,oa.current),r)break;return null;case 22:case 23:return t.lanes=0,Eo(e,t,n)}return Ho(e,t,n)}(e,t,n);bo=0!==(131072&e.flags)}else bo=!1,is&&0!==(1048576&t.flags)&&Zi(t,Vi,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;qo(e,t),e=t.pendingProps;var i=Ii(t,Ai.current);Cs(t,n),i=Pa(null,t,r,e,i,n);var a=Ca();return t.flags|=1,"object"===typeof i&&null!==i&&"function"===typeof i.render&&void 0===i.$$typeof?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Ri(r)?(a=!0,Oi(t)):a=!1,t.memoizedState=null!==i.state&&void 0!==i.state?i.state:null,Is(t),i.updater=Bs,t.stateNode=i,i._reactInternals=t,Hs(t,r,e,n),t=To(null,t,r,!0,a,n)):(t.tag=0,is&&a&&es(t),wo(null,t,i,n),t=t.child),t;case 16:r=t.elementType;e:{switch(qo(e,t),e=t.pendingProps,r=(i=r._init)(r._payload),t.type=r,i=t.tag=function(e){if("function"===typeof e)return Mc(e)?1:0;if(void 0!==e&&null!==e){if((e=e.$$typeof)===A)return 11;if(e===I)return 14}return 2}(r),e=gs(r,e),i){case 0:t=ko(null,t,r,e,n);break e;case 1:t=Ao(null,t,r,e,n);break e;case 11:t=So(null,t,r,e,n);break e;case 14:t=Po(null,t,r,gs(r.type,e),n);break e}throw Error(s(306,r,""))}return t;case 0:return r=t.type,i=t.pendingProps,ko(e,t,r,i=t.elementType===r?i:gs(r,i),n);case 1:return r=t.type,i=t.pendingProps,Ao(e,t,r,i=t.elementType===r?i:gs(r,i),n);case 3:e:{if(Fo(t),null===e)throw Error(s(387));r=t.pendingProps,i=(a=t.memoizedState).element,Rs(e,t),Ls(t,r,null,n);var o=t.memoizedState;if(r=o.element,a.isDehydrated){if(a={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},t.updateQueue.baseState=a,t.memoizedState=a,256&t.flags){t=Io(e,t,r,n,i=co(Error(s(423)),t));break e}if(r!==i){t=Io(e,t,r,n,i=co(Error(s(424)),t));break e}for(rs=ci(t.stateNode.containerInfo.firstChild),ns=t,is=!0,ss=null,n=Js(t,null,r,n),t.child=n;n;)n.flags=-3&n.flags|4096,n=n.sibling}else{if(ps(),r===i){t=Ho(e,t,n);break e}wo(e,t,r,n)}t=t.child}return t;case 5:return sa(t),null===e&&cs(t),r=t.type,i=t.pendingProps,a=null!==e?e.memoizedProps:null,o=i.children,ni(r,i)?o=null:null!==a&&ni(r,a)&&(t.flags|=32),xo(e,t),wo(e,t,o,n),t.child;case 6:return null===e&&cs(t),null;case 13:return jo(e,t,n);case 4:return ra(t,t.stateNode.containerInfo),r=t.pendingProps,null===e?t.child=Qs(t,null,r,n):wo(e,t,r,n),t.child;case 11:return r=t.type,i=t.pendingProps,So(e,t,r,i=t.elementType===r?i:gs(r,i),n);case 7:return wo(e,t,t.pendingProps,n),t.child;case 8:case 12:return wo(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,i=t.pendingProps,a=t.memoizedProps,o=i.value,xi(vs,r._currentValue),r._currentValue=o,null!==a)if(or(a.value,o)){if(a.children===i.children&&!Ti.current){t=Ho(e,t,n);break e}}else for(null!==(a=t.child)&&(a.return=t);null!==a;){var l=a.dependencies;if(null!==l){o=a.child;for(var c=l.firstContext;null!==c;){if(c.context===r){if(1===a.tag){(c=Ms(-1,n&-n)).tag=2;var u=a.updateQueue;if(null!==u){var d=(u=u.shared).pending;null===d?c.next=c:(c.next=d.next,d.next=c),u.pending=c}}a.lanes|=n,null!==(c=a.alternate)&&(c.lanes|=n),Ps(a.return,n,t),l.lanes|=n;break}c=c.next}}else if(10===a.tag)o=a.type===t.type?null:a.child;else if(18===a.tag){if(null===(o=a.return))throw Error(s(341));o.lanes|=n,null!==(l=o.alternate)&&(l.lanes|=n),Ps(o,n,t),o=a.sibling}else o=a.child;if(null!==o)o.return=a;else for(o=a;null!==o;){if(o===t){o=null;break}if(null!==(a=o.sibling)){a.return=o.return,o=a;break}o=o.return}a=o}wo(e,t,i.children,n),t=t.child}return t;case 9:return i=t.type,r=t.pendingProps.children,Cs(t,n),r=r(i=Es(i)),t.flags|=1,wo(e,t,r,n),t.child;case 14:return i=gs(r=t.type,t.pendingProps),Po(e,t,r,i=gs(r.type,i),n);case 15:return Co(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:gs(r,i),qo(e,t),t.tag=1,Ri(r)?(e=!0,Oi(t)):e=!1,Cs(t,n),zs(t,r,i),Hs(t,r,i,n),To(null,t,r,!0,e,n);case 19:return zo(e,t,n);case 22:return Eo(e,t,n)}throw Error(s(156,t.tag))};var Xc="function"===typeof reportError?reportError:function(e){console.error(e)};function Yc(e){this._internalRoot=e}function Qc(e){this._internalRoot=e}function Jc(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType)}function $c(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function Zc(){}function eu(e,t,n,r,i){var s=n._reactRootContainer;if(s){var a=s;if("function"===typeof i){var o=i;i=function(){var e=Hc(a);o.call(e)}}qc(t,a,e,i)}else a=function(e,t,n,r,i){if(i){if("function"===typeof r){var s=r;r=function(){var e=Hc(a);s.call(e)}}var a=zc(t,r,e,0,null,!1,0,"",Zc);return e._reactRootContainer=a,e[fi]=a.current,Wr(8===e.nodeType?e.parentNode:e),dc(),a}for(;i=e.lastChild;)e.removeChild(i);if("function"===typeof r){var o=r;r=function(){var e=Hc(l);o.call(e)}}var l=Bc(e,0,!1,null,0,!1,0,"",Zc);return e._reactRootContainer=l,e[fi]=l.current,Wr(8===e.nodeType?e.parentNode:e),dc((function(){qc(t,l,n,r)})),l}(n,t,e,i,r);return Hc(a)}Qc.prototype.render=Yc.prototype.render=function(e){var t=this._internalRoot;if(null===t)throw Error(s(409));qc(e,t,null,null)},Qc.prototype.unmount=Yc.prototype.unmount=function(){var e=this._internalRoot;if(null!==e){this._internalRoot=null;var t=e.containerInfo;dc((function(){qc(null,e,null,null)})),t[fi]=null}},Qc.prototype.unstable_scheduleHydration=function(e){if(e){var t=Ct();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Mt.length&&0!==t&&t<Mt[n].priority;n++);Mt.splice(n,0,e),0===n&&Lt(e)}},wt=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=dt(t.pendingLanes);0!==n&&(_t(t,1|n),ic(t,Je()),0===(6&Tl)&&(zl=Je()+500,Wi()))}break;case 13:dc((function(){var t=Ts(e,1);if(null!==t){var n=tc();rc(t,e,1,n)}})),Kc(e,1)}},St=function(e){if(13===e.tag){var t=Ts(e,134217728);if(null!==t)rc(t,e,134217728,tc());Kc(e,134217728)}},Pt=function(e){if(13===e.tag){var t=nc(e),n=Ts(e,t);if(null!==n)rc(n,e,t,tc());Kc(e,t)}},Ct=function(){return yt},Et=function(e,t){var n=yt;try{return yt=e,t()}finally{yt=n}},Se=function(e,t,n){switch(t){case"input":if($(e,n),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var i=wi(r);if(!i)throw Error(s(90));K(r),$(r,i)}}}break;case"textarea":se(e,n);break;case"select":null!=(t=n.value)&&ne(e,!!n.multiple,t,!1)}},Ae=uc,Te=dc;var tu={usingClientEntryPoint:!1,Events:[yi,bi,wi,xe,ke,uc]},nu={findFiberByHostInstance:_i,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},ru={bundleType:nu.bundleType,version:nu.version,rendererPackageName:nu.rendererPackageName,rendererConfig:nu.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:b.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return null===(e=He(e))?null:e.stateNode},findFiberByHostInstance:nu.findFiberByHostInstance||function(){return null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var iu=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!iu.isDisabled&&iu.supportsFiber)try{it=iu.inject(ru),st=iu}catch(ue){}}t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=tu,t.createPortal=function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!Jc(t))throw Error(s(200));return function(e,t,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:S,key:null==r?null:""+r,children:e,containerInfo:t,implementation:n}}(e,t,null,n)},t.createRoot=function(e,t){if(!Jc(e))throw Error(s(299));var n=!1,r="",i=Xc;return null!==t&&void 0!==t&&(!0===t.unstable_strictMode&&(n=!0),void 0!==t.identifierPrefix&&(r=t.identifierPrefix),void 0!==t.onRecoverableError&&(i=t.onRecoverableError)),t=Bc(e,1,!1,null,0,n,0,r,i),e[fi]=t.current,Wr(8===e.nodeType?e.parentNode:e),new Yc(t)},t.findDOMNode=function(e){if(null==e)return null;if(1===e.nodeType)return e;var t=e._reactInternals;if(void 0===t){if("function"===typeof e.render)throw Error(s(188));throw e=Object.keys(e).join(","),Error(s(268,e))}return e=null===(e=He(t))?null:e.stateNode},t.flushSync=function(e){return dc(e)},t.hydrate=function(e,t,n){if(!$c(t))throw Error(s(200));return eu(null,e,t,!0,n)},t.hydrateRoot=function(e,t,n){if(!Jc(e))throw Error(s(405));var r=null!=n&&n.hydratedSources||null,i=!1,a="",o=Xc;if(null!==n&&void 0!==n&&(!0===n.unstable_strictMode&&(i=!0),void 0!==n.identifierPrefix&&(a=n.identifierPrefix),void 0!==n.onRecoverableError&&(o=n.onRecoverableError)),t=zc(t,null,e,1,null!=n?n:null,i,0,a,o),e[fi]=t.current,Wr(e),r)for(e=0;e<r.length;e++)i=(i=(n=r[e])._getVersion)(n._source),null==t.mutableSourceEagerHydrationData?t.mutableSourceEagerHydrationData=[n,i]:t.mutableSourceEagerHydrationData.push(n,i);return new Qc(t)},t.render=function(e,t,n){if(!$c(t))throw Error(s(200));return eu(null,e,t,!1,n)},t.unmountComponentAtNode=function(e){if(!$c(e))throw Error(s(40));return!!e._reactRootContainer&&(dc((function(){eu(null,null,e,!1,(function(){e._reactRootContainer=null,e[fi]=null}))})),!0)},t.unstable_batchedUpdates=uc,t.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!$c(n))throw Error(s(200));if(null==e||void 0===e._reactInternals)throw Error(s(38));return eu(e,t,n,!1,r)},t.version="18.2.0-next-9e3b772b8-20220608"},391:(e,t,n)=>{"use strict";var r=n(950);t.createRoot=r.createRoot,t.hydrateRoot=r.hydrateRoot},950:(e,t,n)=>{"use strict";!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=n(730)},153:(e,t,n)=>{"use strict";var r=n(43),i=Symbol.for("react.element"),s=Symbol.for("react.fragment"),a=Object.prototype.hasOwnProperty,o=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,l={key:!0,ref:!0,__self:!0,__source:!0};function c(e,t,n){var r,s={},c=null,u=null;for(r in void 0!==n&&(c=""+n),void 0!==t.key&&(c=""+t.key),void 0!==t.ref&&(u=t.ref),t)a.call(t,r)&&!l.hasOwnProperty(r)&&(s[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps)void 0===s[r]&&(s[r]=t[r]);return{$$typeof:i,type:e,key:c,ref:u,props:s,_owner:o.current}}t.Fragment=s,t.jsx=c,t.jsxs=c},202:(e,t)=>{"use strict";var n=Symbol.for("react.element"),r=Symbol.for("react.portal"),i=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),o=Symbol.for("react.provider"),l=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),u=Symbol.for("react.suspense"),d=Symbol.for("react.memo"),h=Symbol.for("react.lazy"),p=Symbol.iterator;var f={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},m=Object.assign,g={};function v(e,t,n){this.props=e,this.context=t,this.refs=g,this.updater=n||f}function _(){}function y(e,t,n){this.props=e,this.context=t,this.refs=g,this.updater=n||f}v.prototype.isReactComponent={},v.prototype.setState=function(e,t){if("object"!==typeof e&&"function"!==typeof e&&null!=e)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")},v.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},_.prototype=v.prototype;var b=y.prototype=new _;b.constructor=y,m(b,v.prototype),b.isPureReactComponent=!0;var w=Array.isArray,S=Object.prototype.hasOwnProperty,P={current:null},C={key:!0,ref:!0,__self:!0,__source:!0};function E(e,t,r){var i,s={},a=null,o=null;if(null!=t)for(i in void 0!==t.ref&&(o=t.ref),void 0!==t.key&&(a=""+t.key),t)S.call(t,i)&&!C.hasOwnProperty(i)&&(s[i]=t[i]);var l=arguments.length-2;if(1===l)s.children=r;else if(1<l){for(var c=Array(l),u=0;u<l;u++)c[u]=arguments[u+2];s.children=c}if(e&&e.defaultProps)for(i in l=e.defaultProps)void 0===s[i]&&(s[i]=l[i]);return{$$typeof:n,type:e,key:a,ref:o,props:s,_owner:P.current}}function x(e){return"object"===typeof e&&null!==e&&e.$$typeof===n}var k=/\/+/g;function A(e,t){return"object"===typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,(function(e){return t[e]}))}(""+e.key):t.toString(36)}function T(e,t,i,s,a){var o=typeof e;"undefined"!==o&&"boolean"!==o||(e=null);var l=!1;if(null===e)l=!0;else switch(o){case"string":case"number":l=!0;break;case"object":switch(e.$$typeof){case n:case r:l=!0}}if(l)return a=a(l=e),e=""===s?"."+A(l,0):s,w(a)?(i="",null!=e&&(i=e.replace(k,"$&/")+"/"),T(a,t,i,"",(function(e){return e}))):null!=a&&(x(a)&&(a=function(e,t){return{$$typeof:n,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(a,i+(!a.key||l&&l.key===a.key?"":(""+a.key).replace(k,"$&/")+"/")+e)),t.push(a)),1;if(l=0,s=""===s?".":s+":",w(e))for(var c=0;c<e.length;c++){var u=s+A(o=e[c],c);l+=T(o,t,i,u,a)}else if(u=function(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=p&&e[p]||e["@@iterator"])?e:null}(e),"function"===typeof u)for(e=u.call(e),c=0;!(o=e.next()).done;)l+=T(o=o.value,t,i,u=s+A(o,c++),a);else if("object"===o)throw t=String(e),Error("Objects are not valid as a React child (found: "+("[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return l}function F(e,t,n){if(null==e)return e;var r=[],i=0;return T(e,r,"","",(function(e){return t.call(n,e,i++)})),r}function I(e){if(-1===e._status){var t=e._result;(t=t()).then((function(t){0!==e._status&&-1!==e._status||(e._status=1,e._result=t)}),(function(t){0!==e._status&&-1!==e._status||(e._status=2,e._result=t)})),-1===e._status&&(e._status=0,e._result=t)}if(1===e._status)return e._result.default;throw e._result}var R={current:null},M={transition:null},N={ReactCurrentDispatcher:R,ReactCurrentBatchConfig:M,ReactCurrentOwner:P};t.Children={map:F,forEach:function(e,t,n){F(e,(function(){t.apply(this,arguments)}),n)},count:function(e){var t=0;return F(e,(function(){t++})),t},toArray:function(e){return F(e,(function(e){return e}))||[]},only:function(e){if(!x(e))throw Error("React.Children.only expected to receive a single React element child.");return e}},t.Component=v,t.Fragment=i,t.Profiler=a,t.PureComponent=y,t.StrictMode=s,t.Suspense=u,t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=N,t.cloneElement=function(e,t,r){if(null===e||void 0===e)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var i=m({},e.props),s=e.key,a=e.ref,o=e._owner;if(null!=t){if(void 0!==t.ref&&(a=t.ref,o=P.current),void 0!==t.key&&(s=""+t.key),e.type&&e.type.defaultProps)var l=e.type.defaultProps;for(c in t)S.call(t,c)&&!C.hasOwnProperty(c)&&(i[c]=void 0===t[c]&&void 0!==l?l[c]:t[c])}var c=arguments.length-2;if(1===c)i.children=r;else if(1<c){l=Array(c);for(var u=0;u<c;u++)l[u]=arguments[u+2];i.children=l}return{$$typeof:n,type:e.type,key:s,ref:a,props:i,_owner:o}},t.createContext=function(e){return(e={$$typeof:l,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null}).Provider={$$typeof:o,_context:e},e.Consumer=e},t.createElement=E,t.createFactory=function(e){var t=E.bind(null,e);return t.type=e,t},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:c,render:e}},t.isValidElement=x,t.lazy=function(e){return{$$typeof:h,_payload:{_status:-1,_result:e},_init:I}},t.memo=function(e,t){return{$$typeof:d,type:e,compare:void 0===t?null:t}},t.startTransition=function(e){var t=M.transition;M.transition={};try{e()}finally{M.transition=t}},t.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")},t.useCallback=function(e,t){return R.current.useCallback(e,t)},t.useContext=function(e){return R.current.useContext(e)},t.useDebugValue=function(){},t.useDeferredValue=function(e){return R.current.useDeferredValue(e)},t.useEffect=function(e,t){return R.current.useEffect(e,t)},t.useId=function(){return R.current.useId()},t.useImperativeHandle=function(e,t,n){return R.current.useImperativeHandle(e,t,n)},t.useInsertionEffect=function(e,t){return R.current.useInsertionEffect(e,t)},t.useLayoutEffect=function(e,t){return R.current.useLayoutEffect(e,t)},t.useMemo=function(e,t){return R.current.useMemo(e,t)},t.useReducer=function(e,t,n){return R.current.useReducer(e,t,n)},t.useRef=function(e){return R.current.useRef(e)},t.useState=function(e){return R.current.useState(e)},t.useSyncExternalStore=function(e,t,n){return R.current.useSyncExternalStore(e,t,n)},t.useTransition=function(){return R.current.useTransition()},t.version="18.2.0"},43:(e,t,n)=>{"use strict";e.exports=n(202)},579:(e,t,n)=>{"use strict";e.exports=n(153)},234:(e,t)=>{"use strict";function n(e,t){var n=e.length;e.push(t);e:for(;0<n;){var r=n-1>>>1,i=e[r];if(!(0<s(i,t)))break e;e[r]=t,e[n]=i,n=r}}function r(e){return 0===e.length?null:e[0]}function i(e){if(0===e.length)return null;var t=e[0],n=e.pop();if(n!==t){e[0]=n;e:for(var r=0,i=e.length,a=i>>>1;r<a;){var o=2*(r+1)-1,l=e[o],c=o+1,u=e[c];if(0>s(l,n))c<i&&0>s(u,l)?(e[r]=u,e[c]=n,r=c):(e[r]=l,e[o]=n,r=o);else{if(!(c<i&&0>s(u,n)))break e;e[r]=u,e[c]=n,r=c}}}return t}function s(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}if("object"===typeof performance&&"function"===typeof performance.now){var a=performance;t.unstable_now=function(){return a.now()}}else{var o=Date,l=o.now();t.unstable_now=function(){return o.now()-l}}var c=[],u=[],d=1,h=null,p=3,f=!1,m=!1,g=!1,v="function"===typeof setTimeout?setTimeout:null,_="function"===typeof clearTimeout?clearTimeout:null,y="undefined"!==typeof setImmediate?setImmediate:null;function b(e){for(var t=r(u);null!==t;){if(null===t.callback)i(u);else{if(!(t.startTime<=e))break;i(u),t.sortIndex=t.expirationTime,n(c,t)}t=r(u)}}function w(e){if(g=!1,b(e),!m)if(null!==r(c))m=!0,M(S);else{var t=r(u);null!==t&&N(w,t.startTime-e)}}function S(e,n){m=!1,g&&(g=!1,_(x),x=-1),f=!0;var s=p;try{for(b(n),h=r(c);null!==h&&(!(h.expirationTime>n)||e&&!T());){var a=h.callback;if("function"===typeof a){h.callback=null,p=h.priorityLevel;var o=a(h.expirationTime<=n);n=t.unstable_now(),"function"===typeof o?h.callback=o:h===r(c)&&i(c),b(n)}else i(c);h=r(c)}if(null!==h)var l=!0;else{var d=r(u);null!==d&&N(w,d.startTime-n),l=!1}return l}finally{h=null,p=s,f=!1}}"undefined"!==typeof navigator&&void 0!==navigator.scheduling&&void 0!==navigator.scheduling.isInputPending&&navigator.scheduling.isInputPending.bind(navigator.scheduling);var P,C=!1,E=null,x=-1,k=5,A=-1;function T(){return!(t.unstable_now()-A<k)}function F(){if(null!==E){var e=t.unstable_now();A=e;var n=!0;try{n=E(!0,e)}finally{n?P():(C=!1,E=null)}}else C=!1}if("function"===typeof y)P=function(){y(F)};else if("undefined"!==typeof MessageChannel){var I=new MessageChannel,R=I.port2;I.port1.onmessage=F,P=function(){R.postMessage(null)}}else P=function(){v(F,0)};function M(e){E=e,C||(C=!0,P())}function N(e,n){x=v((function(){e(t.unstable_now())}),n)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_continueExecution=function(){m||f||(m=!0,M(S))},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):k=0<e?Math.floor(1e3/e):5},t.unstable_getCurrentPriorityLevel=function(){return p},t.unstable_getFirstCallbackNode=function(){return r(c)},t.unstable_next=function(e){switch(p){case 1:case 2:case 3:var t=3;break;default:t=p}var n=p;p=t;try{return e()}finally{p=n}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=p;p=e;try{return t()}finally{p=n}},t.unstable_scheduleCallback=function(e,i,s){var a=t.unstable_now();switch("object"===typeof s&&null!==s?s="number"===typeof(s=s.delay)&&0<s?a+s:a:s=a,e){case 1:var o=-1;break;case 2:o=250;break;case 5:o=1073741823;break;case 4:o=1e4;break;default:o=5e3}return e={id:d++,callback:i,priorityLevel:e,startTime:s,expirationTime:o=s+o,sortIndex:-1},s>a?(e.sortIndex=s,n(u,e),null===r(c)&&e===r(u)&&(g?(_(x),x=-1):g=!0,N(w,s-a))):(e.sortIndex=o,n(c,e),m||f||(m=!0,M(S))),e},t.unstable_shouldYield=T,t.unstable_wrapCallback=function(e){var t=p;return function(){var n=p;p=t;try{return e.apply(this,arguments)}finally{p=n}}}},853:(e,t,n)=>{"use strict";e.exports=n(234)},640:()=>{},237:()=>{},492:()=>{},815:()=>{},671:()=>{},787:()=>{},756:e=>{e.exports=function(e,t,n){if("function"==typeof e?e===t:e.has(t))return arguments.length<3?t:n;throw new TypeError("Private element is not present on this object")},e.exports.__esModule=!0,e.exports.default=e.exports},101:e=>{e.exports=function(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")},e.exports.__esModule=!0,e.exports.default=e.exports},668:(e,t,n)=>{var r=n(756);e.exports=function(e,t){return e.get(r(e,t))},e.exports.__esModule=!0,e.exports.default=e.exports},459:(e,t,n)=>{var r=n(101);e.exports=function(e,t,n){r(e,t),t.set(e,n)},e.exports.__esModule=!0,e.exports.default=e.exports},88:(e,t,n)=>{var r=n(756);e.exports=function(e,t,n){return e.set(r(e,t),n),n},e.exports.__esModule=!0,e.exports.default=e.exports},183:(e,t,n)=>{var r=n(756);e.exports=function(e,t,n){return n(r(e,t))},e.exports.__esModule=!0,e.exports.default=e.exports},312:(e,t,n)=>{var r=n(101);e.exports=function(e,t){r(e,t),t.add(e)},e.exports.__esModule=!0,e.exports.default=e.exports},693:(e,t,n)=>{var r=n(736);e.exports=function(e,t,n){return(t=r(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e},e.exports.__esModule=!0,e.exports.default=e.exports},45:(e,t,n)=>{var r=n(738).default;e.exports=function(e,t){if("object"!=r(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t||"default");if("object"!=r(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)},e.exports.__esModule=!0,e.exports.default=e.exports},736:(e,t,n)=>{var r=n(738).default,i=n(45);e.exports=function(e){var t=i(e,"string");return"symbol"==r(t)?t:t+""},e.exports.__esModule=!0,e.exports.default=e.exports},738:e=>{function t(n){return e.exports=t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e.exports.__esModule=!0,e.exports.default=e.exports,t(n)}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports}},__webpack_module_cache__={};function __webpack_require__(e){var t=__webpack_module_cache__[e];if(void 0!==t)return t.exports;var n=__webpack_module_cache__[e]={exports:{}};return __webpack_modules__[e](n,n.exports,__webpack_require__),n.exports}(()=>{var e,t=Object.getPrototypeOf?e=>Object.getPrototypeOf(e):e=>e.__proto__;__webpack_require__.t=function(n,r){if(1&r&&(n=this(n)),8&r)return n;if("object"===typeof n&&n){if(4&r&&n.__esModule)return n;if(16&r&&"function"===typeof n.then)return n}var i=Object.create(null);__webpack_require__.r(i);var s={};e=e||[null,t({}),t([]),t(t)];for(var a=2&r&&n;"object"==typeof a&&!~e.indexOf(a);a=t(a))Object.getOwnPropertyNames(a).forEach((e=>s[e]=()=>n[e]));return s.default=()=>n,__webpack_require__.d(i,s),i}})(),__webpack_require__.d=(e,t)=>{for(var n in t)__webpack_require__.o(t,n)&&!__webpack_require__.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},__webpack_require__.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}(),__webpack_require__.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),__webpack_require__.r=e=>{"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},__webpack_require__.nc=void 0;var __webpack_exports__={};(()=>{"use strict";var e,t=__webpack_require__(43),n=__webpack_require__.t(t,2),r=__webpack_require__(391),i=__webpack_require__(950),s=__webpack_require__.t(i,2);function a(){return a=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},a.apply(this,arguments)}!function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"}(e||(e={}));const o="popstate";function l(e,t){if(!1===e||null===e||"undefined"===typeof e)throw new Error(t)}function c(e,t){if(!e){"undefined"!==typeof console&&console.warn(t);try{throw new Error(t)}catch(n){}}}function u(e,t){return{usr:e.state,key:e.key,idx:t}}function d(e,t,n,r){return void 0===n&&(n=null),a({pathname:"string"===typeof e?e:e.pathname,search:"",hash:""},"string"===typeof t?p(t):t,{state:n,key:t&&t.key||r||Math.random().toString(36).substr(2,8)})}function h(e){let{pathname:t="/",search:n="",hash:r=""}=e;return n&&"?"!==n&&(t+="?"===n.charAt(0)?n:"?"+n),r&&"#"!==r&&(t+="#"===r.charAt(0)?r:"#"+r),t}function p(e){let t={};if(e){let n=e.indexOf("#");n>=0&&(t.hash=e.substr(n),e=e.substr(0,n));let r=e.indexOf("?");r>=0&&(t.search=e.substr(r),e=e.substr(0,r)),e&&(t.pathname=e)}return t}function f(t,n,r,i){void 0===i&&(i={});let{window:s=document.defaultView,v5Compat:c=!1}=i,p=s.history,f=e.Pop,m=null,g=v();function v(){return(p.state||{idx:null}).idx}function _(){f=e.Pop;let t=v(),n=null==t?null:t-g;g=t,m&&m({action:f,location:b.location,delta:n})}function y(e){let t="null"!==s.location.origin?s.location.origin:s.location.href,n="string"===typeof e?e:h(e);return n=n.replace(/ $/,"%20"),l(t,"No window.location.(origin|href) available to create URL for href: "+n),new URL(n,t)}null==g&&(g=0,p.replaceState(a({},p.state,{idx:g}),""));let b={get action(){return f},get location(){return t(s,p)},listen(e){if(m)throw new Error("A history only accepts one active listener");return s.addEventListener(o,_),m=e,()=>{s.removeEventListener(o,_),m=null}},createHref:e=>n(s,e),createURL:y,encodeLocation(e){let t=y(e);return{pathname:t.pathname,search:t.search,hash:t.hash}},push:function(t,n){f=e.Push;let i=d(b.location,t,n);r&&r(i,t),g=v()+1;let a=u(i,g),o=b.createHref(i);try{p.pushState(a,"",o)}catch(cl){if(cl instanceof DOMException&&"DataCloneError"===cl.name)throw cl;s.location.assign(o)}c&&m&&m({action:f,location:b.location,delta:1})},replace:function(t,n){f=e.Replace;let i=d(b.location,t,n);r&&r(i,t),g=v();let s=u(i,g),a=b.createHref(i);p.replaceState(s,"",a),c&&m&&m({action:f,location:b.location,delta:0})},go:e=>p.go(e)};return b}var m;!function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"}(m||(m={}));new Set(["lazy","caseSensitive","path","id","index","children"]);function g(e,t,n){void 0===n&&(n="/");let r=F(("string"===typeof t?p(t):t).pathname||"/",n);if(null==r)return null;let i=v(e);!function(e){e.sort(((e,t)=>e.score!==t.score?t.score-e.score:function(e,t){let n=e.length===t.length&&e.slice(0,-1).every(((e,n)=>e===t[n]));return n?e[e.length-1]-t[t.length-1]:0}(e.routesMeta.map((e=>e.childrenIndex)),t.routesMeta.map((e=>e.childrenIndex)))))}(i);let s=null;for(let a=0;null==s&&a<i.length;++a){let e=T(r);s=k(i[a],e)}return s}function v(e,t,n,r){void 0===t&&(t=[]),void 0===n&&(n=[]),void 0===r&&(r="");let i=(e,i,s)=>{let a={relativePath:void 0===s?e.path||"":s,caseSensitive:!0===e.caseSensitive,childrenIndex:i,route:e};a.relativePath.startsWith("/")&&(l(a.relativePath.startsWith(r),'Absolute route path "'+a.relativePath+'" nested under path "'+r+'" is not valid. An absolute child route path must start with the combined path of all its parent routes.'),a.relativePath=a.relativePath.slice(r.length));let o=D([r,a.relativePath]),c=n.concat(a);e.children&&e.children.length>0&&(l(!0!==e.index,'Index routes must not have child routes. Please remove all child routes from route path "'+o+'".'),v(e.children,t,c,o)),(null!=e.path||e.index)&&t.push({path:o,score:x(o,e.index),routesMeta:c})};return e.forEach(((e,t)=>{var n;if(""!==e.path&&null!=(n=e.path)&&n.includes("?"))for(let r of _(e.path))i(e,t,r);else i(e,t)})),t}function _(e){let t=e.split("/");if(0===t.length)return[];let[n,...r]=t,i=n.endsWith("?"),s=n.replace(/\?$/,"");if(0===r.length)return i?[s,""]:[s];let a=_(r.join("/")),o=[];return o.push(...a.map((e=>""===e?s:[s,e].join("/")))),i&&o.push(...a),o.map((t=>e.startsWith("/")&&""===t?"/":t))}const y=/^:[\w-]+$/,b=3,w=2,S=1,P=10,C=-2,E=e=>"*"===e;function x(e,t){let n=e.split("/"),r=n.length;return n.some(E)&&(r+=C),t&&(r+=w),n.filter((e=>!E(e))).reduce(((e,t)=>e+(y.test(t)?b:""===t?S:P)),r)}function k(e,t){let{routesMeta:n}=e,r={},i="/",s=[];for(let a=0;a<n.length;++a){let e=n[a],o=a===n.length-1,l="/"===i?t:t.slice(i.length)||"/",c=A({path:e.relativePath,caseSensitive:e.caseSensitive,end:o},l);if(!c)return null;Object.assign(r,c.params);let u=e.route;s.push({params:r,pathname:D([i,c.pathname]),pathnameBase:O(D([i,c.pathnameBase])),route:u}),"/"!==c.pathnameBase&&(i=D([i,c.pathnameBase]))}return s}function A(e,t){"string"===typeof e&&(e={path:e,caseSensitive:!1,end:!0});let[n,r]=function(e,t,n){void 0===t&&(t=!1);void 0===n&&(n=!0);c("*"===e||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were "'+e.replace(/\*$/,"/*")+'" because the `*` character must always follow a `/` in the pattern. To get rid of this warning, please change the route path to "'+e.replace(/\*$/,"/*")+'".');let r=[],i="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,((e,t,n)=>(r.push({paramName:t,isOptional:null!=n}),n?"/?([^\\/]+)?":"/([^\\/]+)")));e.endsWith("*")?(r.push({paramName:"*"}),i+="*"===e||"/*"===e?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?i+="\\/*$":""!==e&&"/"!==e&&(i+="(?:(?=\\/|$))");let s=new RegExp(i,t?void 0:"i");return[s,r]}(e.path,e.caseSensitive,e.end),i=t.match(n);if(!i)return null;let s=i[0],a=s.replace(/(.)\/+$/,"$1"),o=i.slice(1);return{params:r.reduce(((e,t,n)=>{let{paramName:r,isOptional:i}=t;if("*"===r){let e=o[n]||"";a=s.slice(0,s.length-e.length).replace(/(.)\/+$/,"$1")}const l=o[n];return e[r]=i&&!l?void 0:(l||"").replace(/%2F/g,"/"),e}),{}),pathname:s,pathnameBase:a,pattern:e}}function T(e){try{return e.split("/").map((e=>decodeURIComponent(e).replace(/\//g,"%2F"))).join("/")}catch(cl){return c(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent encoding ('+cl+")."),e}}function F(e,t){if("/"===t)return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let n=t.endsWith("/")?t.length-1:t.length,r=e.charAt(n);return r&&"/"!==r?null:e.slice(n)||"/"}function I(e,t,n,r){return"Cannot include a '"+e+"' character in a manually specified `to."+t+"` field ["+JSON.stringify(r)+"].  Please separate it out to the `to."+n+'` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.'}function R(e){return e.filter(((e,t)=>0===t||e.route.path&&e.route.path.length>0))}function M(e,t){let n=R(e);return t?n.map(((t,n)=>n===e.length-1?t.pathname:t.pathnameBase)):n.map((e=>e.pathnameBase))}function N(e,t,n,r){let i;void 0===r&&(r=!1),"string"===typeof e?i=p(e):(i=a({},e),l(!i.pathname||!i.pathname.includes("?"),I("?","pathname","search",i)),l(!i.pathname||!i.pathname.includes("#"),I("#","pathname","hash",i)),l(!i.search||!i.search.includes("#"),I("#","search","hash",i)));let s,o=""===e||""===i.pathname,c=o?"/":i.pathname;if(null==c)s=n;else{let e=t.length-1;if(!r&&c.startsWith("..")){let t=c.split("/");for(;".."===t[0];)t.shift(),e-=1;i.pathname=t.join("/")}s=e>=0?t[e]:"/"}let u=function(e,t){void 0===t&&(t="/");let{pathname:n,search:r="",hash:i=""}="string"===typeof e?p(e):e,s=n?n.startsWith("/")?n:function(e,t){let n=t.replace(/\/+$/,"").split("/");return e.split("/").forEach((e=>{".."===e?n.length>1&&n.pop():"."!==e&&n.push(e)})),n.length>1?n.join("/"):"/"}(n,t):t;return{pathname:s,search:L(r),hash:j(i)}}(i,s),d=c&&"/"!==c&&c.endsWith("/"),h=(o||"."===c)&&n.endsWith("/");return u.pathname.endsWith("/")||!d&&!h||(u.pathname+="/"),u}const D=e=>e.join("/").replace(/\/\/+/g,"/"),O=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),L=e=>e&&"?"!==e?e.startsWith("?")?e:"?"+e:"",j=e=>e&&"#"!==e?e.startsWith("#")?e:"#"+e:"";Error;function U(e){return null!=e&&"number"===typeof e.status&&"string"===typeof e.statusText&&"boolean"===typeof e.internal&&"data"in e}const G=["post","put","patch","delete"],B=(new Set(G),["get",...G]);new Set(B),new Set([301,302,303,307,308]),new Set([307,308]);Symbol("deferred");function W(){return W=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},W.apply(this,arguments)}const z=t.createContext(null);const q=t.createContext(null);const H=t.createContext(null);const V=t.createContext(null);const K=t.createContext({outlet:null,matches:[],isDataRoute:!1});const X=t.createContext(null);function Y(){return null!=t.useContext(V)}function Q(){return Y()||l(!1),t.useContext(V).location}function J(e){t.useContext(H).static||t.useLayoutEffect(e)}function $(){let{isDataRoute:e}=t.useContext(K);return e?function(){let{router:e}=oe(se.UseNavigateStable),n=ce(ae.UseNavigateStable),r=t.useRef(!1);J((()=>{r.current=!0}));let i=t.useCallback((function(t,i){void 0===i&&(i={}),r.current&&("number"===typeof t?e.navigate(t):e.navigate(t,W({fromRouteId:n},i)))}),[e,n]);return i}():function(){Y()||l(!1);let e=t.useContext(z),{basename:n,future:r,navigator:i}=t.useContext(H),{matches:s}=t.useContext(K),{pathname:a}=Q(),o=JSON.stringify(M(s,r.v7_relativeSplatPath)),c=t.useRef(!1);J((()=>{c.current=!0}));let u=t.useCallback((function(t,r){if(void 0===r&&(r={}),!c.current)return;if("number"===typeof t)return void i.go(t);let s=N(t,JSON.parse(o),a,"path"===r.relative);null==e&&"/"!==n&&(s.pathname="/"===s.pathname?n:D([n,s.pathname])),(r.replace?i.replace:i.push)(s,r.state,r)}),[n,i,o,a,e]);return u}()}function Z(n,r,i,s){Y()||l(!1);let{navigator:a}=t.useContext(H),{matches:o}=t.useContext(K),c=o[o.length-1],u=c?c.params:{},d=(c&&c.pathname,c?c.pathnameBase:"/");c&&c.route;let h,f=Q();if(r){var m;let e="string"===typeof r?p(r):r;"/"===d||(null==(m=e.pathname)?void 0:m.startsWith(d))||l(!1),h=e}else h=f;let v=h.pathname||"/",_=v;if("/"!==d){let e=d.replace(/^\//,"").split("/");_="/"+v.replace(/^\//,"").split("/").slice(e.length).join("/")}let y=g(n,{pathname:_});let b=ie(y&&y.map((e=>Object.assign({},e,{params:Object.assign({},u,e.params),pathname:D([d,a.encodeLocation?a.encodeLocation(e.pathname).pathname:e.pathname]),pathnameBase:"/"===e.pathnameBase?d:D([d,a.encodeLocation?a.encodeLocation(e.pathnameBase).pathname:e.pathnameBase])}))),o,i,s);return r&&b?t.createElement(V.Provider,{value:{location:W({pathname:"/",search:"",hash:"",state:null,key:"default"},h),navigationType:e.Pop}},b):b}function ee(){let e=function(){var e;let n=t.useContext(X),r=le(ae.UseRouteError),i=ce(ae.UseRouteError);if(void 0!==n)return n;return null==(e=r.errors)?void 0:e[i]}(),n=U(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),r=e instanceof Error?e.stack:null,i="rgba(200,200,200, 0.5)",s={padding:"0.5rem",backgroundColor:i};return t.createElement(t.Fragment,null,t.createElement("h2",null,"Unexpected Application Error!"),t.createElement("h3",{style:{fontStyle:"italic"}},n),r?t.createElement("pre",{style:s},r):null,null)}const te=t.createElement(ee,null);class ne extends t.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||"idle"!==t.revalidation&&"idle"===e.revalidation?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:void 0!==e.error?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){console.error("React Router caught the following error during render",e,t)}render(){return void 0!==this.state.error?t.createElement(K.Provider,{value:this.props.routeContext},t.createElement(X.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function re(e){let{routeContext:n,match:r,children:i}=e,s=t.useContext(z);return s&&s.static&&s.staticContext&&(r.route.errorElement||r.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=r.route.id),t.createElement(K.Provider,{value:n},i)}function ie(e,n,r,i){var s;if(void 0===n&&(n=[]),void 0===r&&(r=null),void 0===i&&(i=null),null==e){var a;if(null==(a=r)||!a.errors)return null;e=r.matches}let o=e,c=null==(s=r)?void 0:s.errors;if(null!=c){let e=o.findIndex((e=>e.route.id&&(null==c?void 0:c[e.route.id])));e>=0||l(!1),o=o.slice(0,Math.min(o.length,e+1))}let u=!1,d=-1;if(r&&i&&i.v7_partialHydration)for(let t=0;t<o.length;t++){let e=o[t];if((e.route.HydrateFallback||e.route.hydrateFallbackElement)&&(d=t),e.route.id){let{loaderData:t,errors:n}=r,i=e.route.loader&&void 0===t[e.route.id]&&(!n||void 0===n[e.route.id]);if(e.route.lazy||i){u=!0,o=d>=0?o.slice(0,d+1):[o[0]];break}}}return o.reduceRight(((e,i,s)=>{let a,l=!1,h=null,p=null;var f;r&&(a=c&&i.route.id?c[i.route.id]:void 0,h=i.route.errorElement||te,u&&(d<0&&0===s?(f="route-fallback",!1||ue[f]||(ue[f]=!0),l=!0,p=null):d===s&&(l=!0,p=i.route.hydrateFallbackElement||null)));let m=n.concat(o.slice(0,s+1)),g=()=>{let n;return n=a?h:l?p:i.route.Component?t.createElement(i.route.Component,null):i.route.element?i.route.element:e,t.createElement(re,{match:i,routeContext:{outlet:e,matches:m,isDataRoute:null!=r},children:n})};return r&&(i.route.ErrorBoundary||i.route.errorElement||0===s)?t.createElement(ne,{location:r.location,revalidation:r.revalidation,component:h,error:a,children:g(),routeContext:{outlet:null,matches:m,isDataRoute:!0}}):g()}),null)}var se=function(e){return e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e}(se||{}),ae=function(e){return e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId",e}(ae||{});function oe(e){let n=t.useContext(z);return n||l(!1),n}function le(e){let n=t.useContext(q);return n||l(!1),n}function ce(e){let n=function(e){let n=t.useContext(K);return n||l(!1),n}(),r=n.matches[n.matches.length-1];return r.route.id||l(!1),r.route.id}const ue={};n.startTransition;function de(e){l(!1)}function he(n){let{basename:r="/",children:i=null,location:s,navigationType:a=e.Pop,navigator:o,static:c=!1,future:u}=n;Y()&&l(!1);let d=r.replace(/^\/*/,"/"),h=t.useMemo((()=>({basename:d,navigator:o,static:c,future:W({v7_relativeSplatPath:!1},u)})),[d,u,o,c]);"string"===typeof s&&(s=p(s));let{pathname:f="/",search:m="",hash:g="",state:v=null,key:_="default"}=s,y=t.useMemo((()=>{let e=F(f,d);return null==e?null:{location:{pathname:e,search:m,hash:g,state:v,key:_},navigationType:a}}),[d,f,m,g,v,_,a]);return null==y?null:t.createElement(H.Provider,{value:h},t.createElement(V.Provider,{children:i,value:y}))}function pe(e){let{children:t,location:n}=e;return Z(fe(t),n)}new Promise((()=>{}));t.Component;function fe(e,n){void 0===n&&(n=[]);let r=[];return t.Children.forEach(e,((e,i)=>{if(!t.isValidElement(e))return;let s=[...n,i];if(e.type===t.Fragment)return void r.push.apply(r,fe(e.props.children,s));e.type!==de&&l(!1),e.props.index&&e.props.children&&l(!1);let a={id:e.props.id||s.join("-"),caseSensitive:e.props.caseSensitive,element:e.props.element,Component:e.props.Component,index:e.props.index,path:e.props.path,loader:e.props.loader,action:e.props.action,errorElement:e.props.errorElement,ErrorBoundary:e.props.ErrorBoundary,hasErrorBoundary:null!=e.props.ErrorBoundary||null!=e.props.errorElement,shouldRevalidate:e.props.shouldRevalidate,handle:e.props.handle,lazy:e.props.lazy};e.props.children&&(a.children=fe(e.props.children,s)),r.push(a)})),r}new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);try{window.__reactRouterVersion="6"}catch(Tw){}new Map;const me=n.startTransition;s.flushSync,n.useId;function ge(e){let{basename:n,children:r,future:i,window:s}=e,a=t.useRef();null==a.current&&(a.current=function(e){return void 0===e&&(e={}),f((function(e,t){let{pathname:n,search:r,hash:i}=e.location;return d("",{pathname:n,search:r,hash:i},t.state&&t.state.usr||null,t.state&&t.state.key||"default")}),(function(e,t){return"string"===typeof t?t:h(t)}),null,e)}({window:s,v5Compat:!0}));let o=a.current,[l,c]=t.useState({action:o.action,location:o.location}),{v7_startTransition:u}=i||{},p=t.useCallback((e=>{u&&me?me((()=>c(e))):c(e)}),[c,u]);return t.useLayoutEffect((()=>o.listen(p)),[o,p]),t.createElement(he,{basename:n,children:r,location:l.location,navigationType:l.action,navigator:o,future:i})}"undefined"!==typeof window&&"undefined"!==typeof window.document&&window.document.createElement;var ve,_e;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmit="useSubmit",e.UseSubmitFetcher="useSubmitFetcher",e.UseFetcher="useFetcher",e.useViewTransitionState="useViewTransitionState"})(ve||(ve={})),function(e){e.UseFetcher="useFetcher",e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"}(_e||(_e={}));const ye=!1,be=!1,we="${JSCORE_VERSION}",Se=function(e,t){if(!e)throw Pe(t)},Pe=function(e){return new Error("Firebase Database ("+we+") INTERNAL ASSERT FAILED: "+e)},Ce=function(e){const t=[];let n=0;for(let r=0;r<e.length;r++){let i=e.charCodeAt(r);i<128?t[n++]=i:i<2048?(t[n++]=i>>6|192,t[n++]=63&i|128):55296===(64512&i)&&r+1<e.length&&56320===(64512&e.charCodeAt(r+1))?(i=65536+((1023&i)<<10)+(1023&e.charCodeAt(++r)),t[n++]=i>>18|240,t[n++]=i>>12&63|128,t[n++]=i>>6&63|128,t[n++]=63&i|128):(t[n++]=i>>12|224,t[n++]=i>>6&63|128,t[n++]=63&i|128)}return t},Ee={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"===typeof atob,encodeByteArray(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<e.length;i+=3){const t=e[i],s=i+1<e.length,a=s?e[i+1]:0,o=i+2<e.length,l=o?e[i+2]:0,c=t>>2,u=(3&t)<<4|a>>4;let d=(15&a)<<2|l>>6,h=63&l;o||(h=64,s||(d=64)),r.push(n[c],n[u],n[d],n[h])}return r.join("")},encodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(Ce(e),t)},decodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):function(e){const t=[];let n=0,r=0;for(;n<e.length;){const i=e[n++];if(i<128)t[r++]=String.fromCharCode(i);else if(i>191&&i<224){const s=e[n++];t[r++]=String.fromCharCode((31&i)<<6|63&s)}else if(i>239&&i<365){const s=((7&i)<<18|(63&e[n++])<<12|(63&e[n++])<<6|63&e[n++])-65536;t[r++]=String.fromCharCode(55296+(s>>10)),t[r++]=String.fromCharCode(56320+(1023&s))}else{const s=e[n++],a=e[n++];t[r++]=String.fromCharCode((15&i)<<12|(63&s)<<6|63&a)}}return t.join("")}(this.decodeStringToByteArray(e,t))},decodeStringToByteArray(e,t){this.init_();const n=t?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<e.length;){const t=n[e.charAt(i++)],s=i<e.length?n[e.charAt(i)]:0;++i;const a=i<e.length?n[e.charAt(i)]:64;++i;const o=i<e.length?n[e.charAt(i)]:64;if(++i,null==t||null==s||null==a||null==o)throw new xe;const l=t<<2|s>>4;if(r.push(l),64!==a){const e=s<<4&240|a>>2;if(r.push(e),64!==o){const e=a<<6&192|o;r.push(e)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}};class xe extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const ke=function(e){const t=Ce(e);return Ee.encodeByteArray(t,!0)},Ae=function(e){return ke(e).replace(/\./g,"")},Te=function(e){try{return Ee.decodeString(e,!0)}catch(Tw){console.error("base64Decode failed: ",Tw)}return null};function Fe(e){return Ie(void 0,e)}function Ie(e,t){if(!(t instanceof Object))return t;switch(t.constructor){case Date:return new Date(t.getTime());case Object:void 0===e&&(e={});break;case Array:e=[];break;default:return t}for(const n in t)t.hasOwnProperty(n)&&"__proto__"!==n&&(e[n]=Ie(e[n],t[n]));return e}const Re=()=>function(){if("undefined"!==typeof self)return self;if("undefined"!==typeof window)return window;if("undefined"!==typeof __webpack_require__.g)return __webpack_require__.g;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__,Me=()=>{try{return Re()||(()=>{if("undefined"===typeof process)return;const e={NODE_ENV:"production",PUBLIC_URL:"/read-pdf-by-page",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_FIREBASE_API_KEY:"AIzaSyBKA2ype48tLbkfy_qV29amJ_RMpONpUwg",REACT_APP_FIREBASE_APP_ID:"1:564116137461:web:e8247258126be9fb612cbc",REACT_APP_FIREBASE_AUTH_DOMAIN:"read-pdf-by-page.firebaseapp.com",REACT_APP_FIREBASE_MESSAGING_SENDER_ID:"564116137461",REACT_APP_FIREBASE_PROJECT_ID:"read-pdf-by-page",REACT_APP_FIREBASE_REALTIME_REFERENCE_URL:"https://read-pdf-by-page-default-rtdb.firebaseio.com/",REACT_APP_FIREBASE_STORAGE_BUCKET:"read-pdf-by-page.appspot.com"}.__FIREBASE_DEFAULTS__;return e?JSON.parse(e):void 0})()||(()=>{if("undefined"===typeof document)return;let e;try{e=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch(Tw){return}const t=e&&Te(e[1]);return t&&JSON.parse(t)})()}catch(Tw){return void console.info("Unable to get __FIREBASE_DEFAULTS__ due to: ".concat(Tw))}},Ne=e=>{var t,n;return null===(n=null===(t=Me())||void 0===t?void 0:t.emulatorHosts)||void 0===n?void 0:n[e]},De=e=>{const t=Ne(e);if(!t)return;const n=t.lastIndexOf(":");if(n<=0||n+1===t.length)throw new Error("Invalid host ".concat(t," with no separate hostname and port!"));const r=parseInt(t.substring(n+1),10);return"["===t[0]?[t.substring(1,n-1),r]:[t.substring(0,n),r]},Oe=()=>{var e;return null===(e=Me())||void 0===e?void 0:e.config},Le=e=>{var t;return null===(t=Me())||void 0===t?void 0:t["_".concat(e)]};class je{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}wrapCallback(e){return(t,n)=>{t?this.reject(t):this.resolve(n),"function"===typeof e&&(this.promise.catch((()=>{})),1===e.length?e(t):e(t,n))}}}function Ue(e,t){if(e.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n=t||"demo-project",r=e.iat||0,i=e.sub||e.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const s=Object.assign({iss:"https://securetoken.google.com/".concat(n),aud:n,iat:r,exp:r+3600,auth_time:r,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}}},e);return[Ae(JSON.stringify({alg:"none",type:"JWT"})),Ae(JSON.stringify(s)),""].join(".")}function Ge(){return"undefined"!==typeof navigator&&"string"===typeof navigator.userAgent?navigator.userAgent:""}function Be(){return"undefined"!==typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Ge())}function We(){return"object"===typeof navigator&&"ReactNative"===navigator.product}function ze(){return!0===ye||!0===be}class qe extends Error{constructor(e,t,n){super(t),this.code=e,this.customData=n,this.name="FirebaseError",Object.setPrototypeOf(this,qe.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,He.prototype.create)}}class He{constructor(e,t,n){this.service=e,this.serviceName=t,this.errors=n}create(e){const t=(arguments.length<=1?void 0:arguments[1])||{},n="".concat(this.service,"/").concat(e),r=this.errors[e],i=r?function(e,t){return e.replace(Ve,((e,n)=>{const r=t[n];return null!=r?String(r):"<".concat(n,"?>")}))}(r,t):"Error",s="".concat(this.serviceName,": ").concat(i," (").concat(n,").");return new qe(n,s,t)}}const Ve=/\{\$([^}]+)}/g;function Ke(e){return JSON.parse(e)}function Xe(e){return JSON.stringify(e)}const Ye=function(e){let t={},n={},r={},i="";try{const s=e.split(".");t=Ke(Te(s[0])||""),n=Ke(Te(s[1])||""),i=s[2],r=n.d||{},delete n.d}catch(Tw){}return{header:t,claims:n,data:r,signature:i}};function Qe(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function Je(e,t){return Object.prototype.hasOwnProperty.call(e,t)?e[t]:void 0}function $e(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}function Ze(e,t,n){const r={};for(const i in e)Object.prototype.hasOwnProperty.call(e,i)&&(r[i]=t.call(n,e[i],i,e));return r}function et(e,t){if(e===t)return!0;const n=Object.keys(e),r=Object.keys(t);for(const i of n){if(!r.includes(i))return!1;const n=e[i],s=t[i];if(tt(n)&&tt(s)){if(!et(n,s))return!1}else if(n!==s)return!1}for(const i of r)if(!n.includes(i))return!1;return!0}function tt(e){return null!==e&&"object"===typeof e}function nt(e){const t=[];for(const[n,r]of Object.entries(e))Array.isArray(r)?r.forEach((e=>{t.push(encodeURIComponent(n)+"="+encodeURIComponent(e))})):t.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return t.length?"&"+t.join("&"):""}function rt(e){const t={};return e.replace(/^\?/,"").split("&").forEach((e=>{if(e){const[n,r]=e.split("=");t[decodeURIComponent(n)]=decodeURIComponent(r)}})),t}function it(e){const t=e.indexOf("?");if(!t)return"";const n=e.indexOf("#",t);return e.substring(t,n>0?n:void 0)}class st{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(let e=1;e<this.blockSize;++e)this.pad_[e]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(e,t){t||(t=0);const n=this.W_;if("string"===typeof e)for(let u=0;u<16;u++)n[u]=e.charCodeAt(t)<<24|e.charCodeAt(t+1)<<16|e.charCodeAt(t+2)<<8|e.charCodeAt(t+3),t+=4;else for(let u=0;u<16;u++)n[u]=e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3],t+=4;for(let u=16;u<80;u++){const e=n[u-3]^n[u-8]^n[u-14]^n[u-16];n[u]=4294967295&(e<<1|e>>>31)}let r,i,s=this.chain_[0],a=this.chain_[1],o=this.chain_[2],l=this.chain_[3],c=this.chain_[4];for(let u=0;u<80;u++){u<40?u<20?(r=l^a&(o^l),i=1518500249):(r=a^o^l,i=1859775393):u<60?(r=a&o|l&(a|o),i=2400959708):(r=a^o^l,i=3395469782);const e=(s<<5|s>>>27)+r+c+i+n[u]&4294967295;c=l,l=o,o=4294967295&(a<<30|a>>>2),a=s,s=e}this.chain_[0]=this.chain_[0]+s&4294967295,this.chain_[1]=this.chain_[1]+a&4294967295,this.chain_[2]=this.chain_[2]+o&4294967295,this.chain_[3]=this.chain_[3]+l&4294967295,this.chain_[4]=this.chain_[4]+c&4294967295}update(e,t){if(null==e)return;void 0===t&&(t=e.length);const n=t-this.blockSize;let r=0;const i=this.buf_;let s=this.inbuf_;for(;r<t;){if(0===s)for(;r<=n;)this.compress_(e,r),r+=this.blockSize;if("string"===typeof e){for(;r<t;)if(i[s]=e.charCodeAt(r),++s,++r,s===this.blockSize){this.compress_(i),s=0;break}}else for(;r<t;)if(i[s]=e[r],++s,++r,s===this.blockSize){this.compress_(i),s=0;break}}this.inbuf_=s,this.total_+=t}digest(){const e=[];let t=8*this.total_;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(let r=this.blockSize-1;r>=56;r--)this.buf_[r]=255&t,t/=256;this.compress_(this.buf_);let n=0;for(let r=0;r<5;r++)for(let t=24;t>=0;t-=8)e[n]=this.chain_[r]>>t&255,++n;return e}}class at{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then((()=>{e(this)})).catch((e=>{this.error(e)}))}next(e){this.forEachObserver((t=>{t.next(e)}))}error(e){this.forEachObserver((t=>{t.error(e)})),this.close(e)}complete(){this.forEachObserver((e=>{e.complete()})),this.close()}subscribe(e,t,n){let r;if(void 0===e&&void 0===t&&void 0===n)throw new Error("Missing Observer.");r=function(e,t){if("object"!==typeof e||null===e)return!1;for(const n of t)if(n in e&&"function"===typeof e[n])return!0;return!1}(e,["next","error","complete"])?e:{next:e,error:t,complete:n},void 0===r.next&&(r.next=ot),void 0===r.error&&(r.error=ot),void 0===r.complete&&(r.complete=ot);const i=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then((()=>{try{this.finalError?r.error(this.finalError):r.complete()}catch(Tw){}})),this.observers.push(r),i}unsubscribeOne(e){void 0!==this.observers&&void 0!==this.observers[e]&&(delete this.observers[e],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then((()=>{if(void 0!==this.observers&&void 0!==this.observers[e])try{t(this.observers[e])}catch(Tw){"undefined"!==typeof console&&console.error&&console.error(Tw)}}))}close(e){this.finalized||(this.finalized=!0,void 0!==e&&(this.finalError=e),this.task.then((()=>{this.observers=void 0,this.onNoObservers=void 0})))}}function ot(){}function lt(e,t){return"".concat(e," failed: ").concat(t," argument ")}const ct=function(e){let t=0;for(let n=0;n<e.length;n++){const r=e.charCodeAt(n);r<128?t++:r<2048?t+=2:r>=55296&&r<=56319?(t+=4,n++):t+=3}return t};function ut(e){return e&&e._delegate?e._delegate:e}class dt{constructor(e,t,n){this.name=e,this.instanceFactory=t,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}const ht="[DEFAULT]";class pt{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const e=new je;if(this.instancesDeferred.set(t,e),this.isInitialized(t)||this.shouldAutoInitialize())try{const n=this.getOrInitializeService({instanceIdentifier:t});n&&e.resolve(n)}catch(Tw){}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;const n=this.normalizeInstanceIdentifier(null===e||void 0===e?void 0:e.identifier),r=null!==(t=null===e||void 0===e?void 0:e.optional)&&void 0!==t&&t;if(!this.isInitialized(n)&&!this.shouldAutoInitialize()){if(r)return null;throw Error("Service ".concat(this.name," is not available"))}try{return this.getOrInitializeService({instanceIdentifier:n})}catch(Tw){if(r)return null;throw Tw}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error("Mismatching Component ".concat(e.name," for Provider ").concat(this.name,"."));if(this.component)throw Error("Component for ".concat(this.name," has already been provided"));if(this.component=e,this.shouldAutoInitialize()){if(function(e){return"EAGER"===e.instantiationMode}(e))try{this.getOrInitializeService({instanceIdentifier:ht})}catch(Tw){}for(const[e,t]of this.instancesDeferred.entries()){const n=this.normalizeInstanceIdentifier(e);try{const e=this.getOrInitializeService({instanceIdentifier:n});t.resolve(e)}catch(Tw){}}}}clearInstance(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ht;this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter((e=>"INTERNAL"in e)).map((e=>e.INTERNAL.delete())),...e.filter((e=>"_delete"in e)).map((e=>e._delete()))])}isComponentSet(){return null!=this.component}isInitialized(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ht;return this.instances.has(e)}getOptions(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ht;return this.instancesOptions.get(e)||{}}initialize(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{options:t={}}=e,n=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(n))throw Error("".concat(this.name,"(").concat(n,") has already been initialized"));if(!this.isComponentSet())throw Error("Component ".concat(this.name," has not been registered yet"));const r=this.getOrInitializeService({instanceIdentifier:n,options:t});for(const[i,s]of this.instancesDeferred.entries()){n===this.normalizeInstanceIdentifier(i)&&s.resolve(r)}return r}onInit(e,t){var n;const r=this.normalizeInstanceIdentifier(t),i=null!==(n=this.onInitCallbacks.get(r))&&void 0!==n?n:new Set;i.add(e),this.onInitCallbacks.set(r,i);const s=this.instances.get(r);return s&&e(s,r),()=>{i.delete(e)}}invokeOnInitCallbacks(e,t){const n=this.onInitCallbacks.get(t);if(n)for(const i of n)try{i(e,t)}catch(r){}}getOrInitializeService(e){let{instanceIdentifier:t,options:n={}}=e,r=this.instances.get(t);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:(i=t,i===ht?void 0:i),options:n}),this.instances.set(t,r),this.instancesOptions.set(t,n),this.invokeOnInitCallbacks(r,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,r)}catch(s){}var i;return r||null}normalizeInstanceIdentifier(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ht;return this.component?this.component.multipleInstances?e:ht:e}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class ft{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error("Component ".concat(e.name," has already been registered with ").concat(this.name));t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new pt(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}const mt=[];var gt;!function(e){e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT"}(gt||(gt={}));const vt={debug:gt.DEBUG,verbose:gt.VERBOSE,info:gt.INFO,warn:gt.WARN,error:gt.ERROR,silent:gt.SILENT},_t=gt.INFO,yt={[gt.DEBUG]:"log",[gt.VERBOSE]:"log",[gt.INFO]:"info",[gt.WARN]:"warn",[gt.ERROR]:"error"},bt=function(e,t){if(t<e.logLevel)return;const n=(new Date).toISOString(),r=yt[t];if(!r)throw new Error("Attempted to log a message with an invalid logType (value: ".concat(t,")"));for(var i=arguments.length,s=new Array(i>2?i-2:0),a=2;a<i;a++)s[a-2]=arguments[a];console[r]("[".concat(n,"]  ").concat(e.name,":"),...s)};class wt{constructor(e){this.name=e,this._logLevel=_t,this._logHandler=bt,this._userLogHandler=null,mt.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in gt))throw new TypeError('Invalid value "'.concat(e,'" assigned to `logLevel`'));this._logLevel=e}setLogLevel(e){this._logLevel="string"===typeof e?vt[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if("function"!==typeof e)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,gt.DEBUG,...t),this._logHandler(this,gt.DEBUG,...t)}log(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,gt.VERBOSE,...t),this._logHandler(this,gt.VERBOSE,...t)}info(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,gt.INFO,...t),this._logHandler(this,gt.INFO,...t)}warn(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,gt.WARN,...t),this._logHandler(this,gt.WARN,...t)}error(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,gt.ERROR,...t),this._logHandler(this,gt.ERROR,...t)}}const St=(e,t)=>t.some((t=>e instanceof t));let Pt,Ct;const Et=new WeakMap,xt=new WeakMap,kt=new WeakMap,At=new WeakMap,Tt=new WeakMap;let Ft={get(e,t,n){if(e instanceof IDBTransaction){if("done"===t)return xt.get(e);if("objectStoreNames"===t)return e.objectStoreNames||kt.get(e);if("store"===t)return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Mt(e[t])},set:(e,t,n)=>(e[t]=n,!0),has:(e,t)=>e instanceof IDBTransaction&&("done"===t||"store"===t)||t in e};function It(e){return e!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?(Ct||(Ct=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])).includes(e)?function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return e.apply(Nt(this),n),Mt(Et.get(this))}:function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return Mt(e.apply(Nt(this),n))}:function(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];const s=e.call(Nt(this),t,...r);return kt.set(s,t.sort?t.sort():[t]),Mt(s)}}function Rt(e){return"function"===typeof e?It(e):(e instanceof IDBTransaction&&function(e){if(xt.has(e))return;const t=new Promise(((t,n)=>{const r=()=>{e.removeEventListener("complete",i),e.removeEventListener("error",s),e.removeEventListener("abort",s)},i=()=>{t(),r()},s=()=>{n(e.error||new DOMException("AbortError","AbortError")),r()};e.addEventListener("complete",i),e.addEventListener("error",s),e.addEventListener("abort",s)}));xt.set(e,t)}(e),St(e,Pt||(Pt=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction]))?new Proxy(e,Ft):e)}function Mt(e){if(e instanceof IDBRequest)return function(e){const t=new Promise(((t,n)=>{const r=()=>{e.removeEventListener("success",i),e.removeEventListener("error",s)},i=()=>{t(Mt(e.result)),r()},s=()=>{n(e.error),r()};e.addEventListener("success",i),e.addEventListener("error",s)}));return t.then((t=>{t instanceof IDBCursor&&Et.set(t,e)})).catch((()=>{})),Tt.set(t,e),t}(e);if(At.has(e))return At.get(e);const t=Rt(e);return t!==e&&(At.set(e,t),Tt.set(t,e)),t}const Nt=e=>Tt.get(e);const Dt=["get","getKey","getAll","getAllKeys","count"],Ot=["put","add","delete","clear"],Lt=new Map;function jt(e,t){if(!(e instanceof IDBDatabase)||t in e||"string"!==typeof t)return;if(Lt.get(t))return Lt.get(t);const n=t.replace(/FromIndex$/,""),r=t!==n,i=Ot.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!i&&!Dt.includes(n))return;const s=async function(e){const t=this.transaction(e,i?"readwrite":"readonly");let s=t.store;for(var a=arguments.length,o=new Array(a>1?a-1:0),l=1;l<a;l++)o[l-1]=arguments[l];return r&&(s=s.index(o.shift())),(await Promise.all([s[n](...o),i&&t.done]))[0]};return Lt.set(t,s),s}Ft=(e=>({...e,get:(t,n,r)=>jt(t,n)||e.get(t,n,r),has:(t,n)=>!!jt(t,n)||e.has(t,n)}))(Ft);class Ut{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map((e=>{if(function(e){const t=e.getComponent();return"VERSION"===(null===t||void 0===t?void 0:t.type)}(e)){const t=e.getImmediate();return"".concat(t.library,"/").concat(t.version)}return null})).filter((e=>e)).join(" ")}}const Gt="@firebase/app",Bt="0.10.1",Wt=new wt("@firebase/app"),zt="@firebase/app-compat",qt="@firebase/analytics-compat",Ht="@firebase/analytics",Vt="@firebase/app-check-compat",Kt="@firebase/app-check",Xt="@firebase/auth",Yt="@firebase/auth-compat",Qt="@firebase/database",Jt="@firebase/database-compat",$t="@firebase/functions",Zt="@firebase/functions-compat",en="@firebase/installations",tn="@firebase/installations-compat",nn="@firebase/messaging",rn="@firebase/messaging-compat",sn="@firebase/performance",an="@firebase/performance-compat",on="@firebase/remote-config",ln="@firebase/remote-config-compat",cn="@firebase/storage",un="@firebase/storage-compat",dn="@firebase/firestore",hn="@firebase/firestore-compat",pn="firebase",fn="[DEFAULT]",mn={[Gt]:"fire-core",[zt]:"fire-core-compat",[Ht]:"fire-analytics",[qt]:"fire-analytics-compat",[Kt]:"fire-app-check",[Vt]:"fire-app-check-compat",[Xt]:"fire-auth",[Yt]:"fire-auth-compat",[Qt]:"fire-rtdb",[Jt]:"fire-rtdb-compat",[$t]:"fire-fn",[Zt]:"fire-fn-compat",[en]:"fire-iid",[tn]:"fire-iid-compat",[nn]:"fire-fcm",[rn]:"fire-fcm-compat",[sn]:"fire-perf",[an]:"fire-perf-compat",[on]:"fire-rc",[ln]:"fire-rc-compat",[cn]:"fire-gcs",[un]:"fire-gcs-compat",[dn]:"fire-fst",[hn]:"fire-fst-compat","fire-js":"fire-js",[pn]:"fire-js-all"},gn=new Map,vn=new Map,_n=new Map;function yn(e,t){try{e.container.addComponent(t)}catch(Tw){Wt.debug("Component ".concat(t.name," failed to register with FirebaseApp ").concat(e.name),Tw)}}function bn(e){const t=e.name;if(_n.has(t))return Wt.debug("There were multiple attempts to register component ".concat(t,".")),!1;_n.set(t,e);for(const n of gn.values())yn(n,e);for(const n of vn.values())yn(n,e);return!0}function wn(e,t){const n=e.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),e.container.getProvider(t)}function Sn(e){return void 0!==e.settings}const Pn=new He("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."});class Cn{constructor(e,t,n){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=n,this.container.addComponent(new dt("app",(()=>this),"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Pn.create("app-deleted",{appName:this._name})}}const En="10.11.0";function xn(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e;if("object"!==typeof t){t={name:t}}const r=Object.assign({name:fn,automaticDataCollectionEnabled:!1},t),i=r.name;if("string"!==typeof i||!i)throw Pn.create("bad-app-name",{appName:String(i)});if(n||(n=Oe()),!n)throw Pn.create("no-options");const s=gn.get(i);if(s){if(et(n,s.options)&&et(r,s.config))return s;throw Pn.create("duplicate-app",{appName:i})}const a=new ft(i);for(const l of _n.values())a.addComponent(l);const o=new Cn(n,r,a);return gn.set(i,o),o}function kn(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:fn;const t=gn.get(e);if(!t&&e===fn&&Oe())return xn();if(!t)throw Pn.create("no-app",{appName:e});return t}function An(e,t,n){var r;let i=null!==(r=mn[e])&&void 0!==r?r:e;n&&(i+="-".concat(n));const s=i.match(/\s|\//),a=t.match(/\s|\//);if(s||a){const e=['Unable to register library "'.concat(i,'" with version "').concat(t,'":')];return s&&e.push('library name "'.concat(i,'" contains illegal characters (whitespace or "/")')),s&&a&&e.push("and"),a&&e.push('version name "'.concat(t,'" contains illegal characters (whitespace or "/")')),void Wt.warn(e.join(" "))}bn(new dt("".concat(i,"-version"),(()=>({library:i,version:t})),"VERSION"))}const Tn="firebase-heartbeat-database",Fn=1,In="firebase-heartbeat-store";let Rn=null;function Mn(){return Rn||(Rn=function(e,t){let{blocked:n,upgrade:r,blocking:i,terminated:s}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const a=indexedDB.open(e,t),o=Mt(a);return r&&a.addEventListener("upgradeneeded",(e=>{r(Mt(a.result),e.oldVersion,e.newVersion,Mt(a.transaction),e)})),n&&a.addEventListener("blocked",(e=>n(e.oldVersion,e.newVersion,e))),o.then((e=>{s&&e.addEventListener("close",(()=>s())),i&&e.addEventListener("versionchange",(e=>i(e.oldVersion,e.newVersion,e)))})).catch((()=>{})),o}(Tn,Fn,{upgrade:(e,t)=>{if(0===t)try{e.createObjectStore(In)}catch(Tw){console.warn(Tw)}}}).catch((e=>{throw Pn.create("idb-open",{originalErrorMessage:e.message})}))),Rn}async function Nn(e,t){try{const n=(await Mn()).transaction(In,"readwrite"),r=n.objectStore(In);await r.put(t,Dn(e)),await n.done}catch(Tw){if(Tw instanceof qe)Wt.warn(Tw.message);else{const t=Pn.create("idb-set",{originalErrorMessage:null===Tw||void 0===Tw?void 0:Tw.message});Wt.warn(t.message)}}}function Dn(e){return"".concat(e.name,"!").concat(e.options.appId)}class On{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new jn(t),this._heartbeatsCachePromise=this._storage.read().then((e=>(this._heartbeatsCache=e,e)))}async triggerHeartbeat(){var e,t;const n=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),r=Ln();if((null!=(null===(e=this._heartbeatsCache)||void 0===e?void 0:e.heartbeats)||(this._heartbeatsCache=await this._heartbeatsCachePromise,null!=(null===(t=this._heartbeatsCache)||void 0===t?void 0:t.heartbeats)))&&this._heartbeatsCache.lastSentHeartbeatDate!==r&&!this._heartbeatsCache.heartbeats.some((e=>e.date===r)))return this._heartbeatsCache.heartbeats.push({date:r,agent:n}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter((e=>{const t=new Date(e.date).valueOf();return Date.now()-t<=2592e6})),this._storage.overwrite(this._heartbeatsCache)}async getHeartbeatsHeader(){var e;if(null===this._heartbeatsCache&&await this._heartbeatsCachePromise,null==(null===(e=this._heartbeatsCache)||void 0===e?void 0:e.heartbeats)||0===this._heartbeatsCache.heartbeats.length)return"";const t=Ln(),{heartbeatsToSend:n,unsentEntries:r}=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1024;const n=[];let r=e.slice();for(const i of e){const e=n.find((e=>e.agent===i.agent));if(e){if(e.dates.push(i.date),Un(n)>t){e.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),Un(n)>t){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}(this._heartbeatsCache.heartbeats),i=Ae(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=t,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}}function Ln(){return(new Date).toISOString().substring(0,10)}class jn{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return!!function(){try{return"object"===typeof indexedDB}catch(Tw){return!1}}()&&new Promise(((e,t)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),e(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var e;t((null===(e=i.error)||void 0===e?void 0:e.message)||"")}}catch(cl){t(cl)}})).then((()=>!0)).catch((()=>!1))}async read(){if(await this._canUseIndexedDBPromise){const e=await async function(e){try{const t=(await Mn()).transaction(In),n=await t.objectStore(In).get(Dn(e));return await t.done,n}catch(Tw){if(Tw instanceof qe)Wt.warn(Tw.message);else{const t=Pn.create("idb-get",{originalErrorMessage:null===Tw||void 0===Tw?void 0:Tw.message});Wt.warn(t.message)}}}(this.app);return(null===e||void 0===e?void 0:e.heartbeats)?e:{heartbeats:[]}}return{heartbeats:[]}}async overwrite(e){var t;if(await this._canUseIndexedDBPromise){const n=await this.read();return Nn(this.app,{lastSentHeartbeatDate:null!==(t=e.lastSentHeartbeatDate)&&void 0!==t?t:n.lastSentHeartbeatDate,heartbeats:e.heartbeats})}}async add(e){var t;if(await this._canUseIndexedDBPromise){const n=await this.read();return Nn(this.app,{lastSentHeartbeatDate:null!==(t=e.lastSentHeartbeatDate)&&void 0!==t?t:n.lastSentHeartbeatDate,heartbeats:[...n.heartbeats,...e.heartbeats]})}}}function Un(e){return Ae(JSON.stringify({version:2,heartbeats:e})).length}var Gn;Gn="",bn(new dt("platform-logger",(e=>new Ut(e)),"PRIVATE")),bn(new dt("heartbeat",(e=>new On(e)),"PRIVATE")),An(Gt,Bt,Gn),An(Gt,Bt,"esm2017"),An("fire-js","");An("firebase","10.11.0","app");const Bn="firebasestorage.googleapis.com",Wn="storageBucket";class zn extends qe{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;super(Vn(e),"Firebase Storage: ".concat(t," (").concat(Vn(e),")")),this.status_=n,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,zn.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return Vn(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message="".concat(this._baseMessage,"\n").concat(this.customData.serverResponse):this.message=this._baseMessage}}var qn,Hn;function Vn(e){return"storage/"+e}function Kn(){return new zn(qn.UNKNOWN,"An unknown error occurred, please check the error payload for server response.")}function Xn(){return new zn(qn.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function Yn(){return new zn(qn.CANCELED,"User canceled the upload/download.")}function Qn(){return new zn(qn.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function Jn(e){return new zn(qn.INVALID_ARGUMENT,e)}function $n(){return new zn(qn.APP_DELETED,"The Firebase app was deleted.")}function Zn(e,t){return new zn(qn.INVALID_FORMAT,"String does not match format '"+e+"': "+t)}function er(e){throw new zn(qn.INTERNAL_ERROR,"Internal error: "+e)}!function(e){e.UNKNOWN="unknown",e.OBJECT_NOT_FOUND="object-not-found",e.BUCKET_NOT_FOUND="bucket-not-found",e.PROJECT_NOT_FOUND="project-not-found",e.QUOTA_EXCEEDED="quota-exceeded",e.UNAUTHENTICATED="unauthenticated",e.UNAUTHORIZED="unauthorized",e.UNAUTHORIZED_APP="unauthorized-app",e.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",e.INVALID_CHECKSUM="invalid-checksum",e.CANCELED="canceled",e.INVALID_EVENT_NAME="invalid-event-name",e.INVALID_URL="invalid-url",e.INVALID_DEFAULT_BUCKET="invalid-default-bucket",e.NO_DEFAULT_BUCKET="no-default-bucket",e.CANNOT_SLICE_BLOB="cannot-slice-blob",e.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",e.NO_DOWNLOAD_URL="no-download-url",e.INVALID_ARGUMENT="invalid-argument",e.INVALID_ARGUMENT_COUNT="invalid-argument-count",e.APP_DELETED="app-deleted",e.INVALID_ROOT_OPERATION="invalid-root-operation",e.INVALID_FORMAT="invalid-format",e.INTERNAL_ERROR="internal-error",e.UNSUPPORTED_ENVIRONMENT="unsupported-environment"}(qn||(qn={}));class tr{constructor(e,t){this.bucket=e,this.path_=t}get path(){return this.path_}get isRoot(){return 0===this.path.length}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,t){let n;try{n=tr.makeFromUrl(e,t)}catch(Tw){return new tr(e,"")}if(""===n.path)return n;throw r=e,new zn(qn.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+r+"'.");var r}static makeFromUrl(e,t){let n=null;const r="([A-Za-z0-9.\\-_]+)";const i=new RegExp("^gs://"+r+"(/(.*))?$","i");function s(e){e.path_=decodeURIComponent(e.path)}const a=t.replace(/[.]/g,"\\."),o=[{regex:i,indices:{bucket:1,path:3},postModify:function(e){"/"===e.path.charAt(e.path.length-1)&&(e.path_=e.path_.slice(0,-1))}},{regex:new RegExp("^https?://".concat(a,"/").concat("v[A-Za-z0-9_]+","/b/").concat(r,"/o").concat("(/([^?#]*).*)?$"),"i"),indices:{bucket:1,path:3},postModify:s},{regex:new RegExp("^https?://".concat(t===Bn?"(?:storage.googleapis.com|storage.cloud.google.com)":t,"/").concat(r,"/").concat("([^?#]*)"),"i"),indices:{bucket:1,path:2},postModify:s}];for(let l=0;l<o.length;l++){const t=o[l],r=t.regex.exec(e);if(r){const e=r[t.indices.bucket];let i=r[t.indices.path];i||(i=""),n=new tr(e,i),t.postModify(n);break}}if(null==n)throw function(e){return new zn(qn.INVALID_URL,"Invalid URL '"+e+"'.")}(e);return n}}class nr{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(){}}function rr(e){return"string"===typeof e||e instanceof String}function ir(e){return sr()&&e instanceof Blob}function sr(){return"undefined"!==typeof Blob}function ar(e,t,n,r){if(r<t)throw Jn("Invalid value for '".concat(e,"'. Expected ").concat(t," or greater."));if(r>n)throw Jn("Invalid value for '".concat(e,"'. Expected ").concat(n," or less."))}function or(e,t,n){let r=t;return null==n&&(r="https://".concat(t)),"".concat(n,"://").concat(r,"/v0").concat(e)}function lr(e){const t=encodeURIComponent;let n="?";for(const r in e)if(e.hasOwnProperty(r)){n=n+(t(r)+"="+t(e[r]))+"&"}return n=n.slice(0,-1),n}function cr(e,t){const n=e>=500&&e<600,r=-1!==[408,429].indexOf(e),i=-1!==t.indexOf(e);return n||r||i}!function(e){e[e.NO_ERROR=0]="NO_ERROR",e[e.NETWORK_ERROR=1]="NETWORK_ERROR",e[e.ABORT=2]="ABORT"}(Hn||(Hn={}));class ur{constructor(e,t,n,r,i,s,a,o,l,c,u){let d=!(arguments.length>11&&void 0!==arguments[11])||arguments[11];this.url_=e,this.method_=t,this.headers_=n,this.body_=r,this.successCodes_=i,this.additionalRetryCodes_=s,this.callback_=a,this.errorCallback_=o,this.timeout_=l,this.progressCallback_=c,this.connectionFactory_=u,this.retry=d,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise(((e,t)=>{this.resolve_=e,this.reject_=t,this.start_()}))}start_(){const e=(e,t)=>{if(t)return void e(!1,new dr(!1,null,!0));const n=this.connectionFactory_();this.pendingConnection_=n;const r=e=>{const t=e.loaded,n=e.lengthComputable?e.total:-1;null!==this.progressCallback_&&this.progressCallback_(t,n)};null!==this.progressCallback_&&n.addUploadProgressListener(r),n.send(this.url_,this.method_,this.body_,this.headers_).then((()=>{null!==this.progressCallback_&&n.removeUploadProgressListener(r),this.pendingConnection_=null;const t=n.getErrorCode()===Hn.NO_ERROR,i=n.getStatus();if(!t||cr(i,this.additionalRetryCodes_)&&this.retry){const t=n.getErrorCode()===Hn.ABORT;return void e(!1,new dr(!1,null,t))}const s=-1!==this.successCodes_.indexOf(i);e(!0,new dr(s,n))}))},t=(e,t)=>{const n=this.resolve_,r=this.reject_,i=t.connection;if(t.wasSuccessCode)try{const e=this.callback_(i,i.getResponse());void 0!==e?n(e):n()}catch(Tw){r(Tw)}else if(null!==i){const e=Kn();e.serverResponse=i.getErrorText(),this.errorCallback_?r(this.errorCallback_(i,e)):r(e)}else if(t.canceled){r(this.appDelete_?$n():Yn())}else{r(Xn())}};this.canceled_?t(0,new dr(!1,null,!0)):this.backoffId_=function(e,t,n){let r=1,i=null,s=null,a=!1,o=0;function l(){return 2===o}let c=!1;function u(){if(!c){c=!0;for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];t.apply(null,n)}}function d(t){i=setTimeout((()=>{i=null,e(p,l())}),t)}function h(){s&&clearTimeout(s)}function p(e){if(c)return void h();for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];if(e)return h(),void u.call(null,e,...n);if(l()||a)return h(),void u.call(null,e,...n);let s;r<64&&(r*=2),1===o?(o=2,s=0):s=1e3*(r+Math.random()),d(s)}let f=!1;function m(e){f||(f=!0,h(),c||(null!==i?(e||(o=2),clearTimeout(i),d(0)):e||(o=1)))}return d(0),s=setTimeout((()=>{a=!0,m(!0)}),n),m}(e,t,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,null!==this.backoffId_&&(0,this.backoffId_)(!1),null!==this.pendingConnection_&&this.pendingConnection_.abort()}}class dr{constructor(e,t,n){this.wasSuccessCode=e,this.connection=t,this.canceled=!!n}}function hr(){return"undefined"!==typeof BlobBuilder?BlobBuilder:"undefined"!==typeof WebKitBlobBuilder?WebKitBlobBuilder:void 0}function pr(){const e=hr();for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];if(void 0!==e){const t=new e;for(let e=0;e<n.length;e++)t.append(n[e]);return t.getBlob()}if(sr())return new Blob(n);throw new zn(qn.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}function fr(e){if("undefined"===typeof atob)throw t="base-64",new zn(qn.UNSUPPORTED_ENVIRONMENT,"".concat(t," is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information."));var t;return atob(e)}const mr={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class gr{constructor(e,t){this.data=e,this.contentType=t||null}}function vr(e,t){switch(e){case mr.RAW:return new gr(_r(t));case mr.BASE64:case mr.BASE64URL:return new gr(yr(e,t));case mr.DATA_URL:return new gr(function(e){const t=new br(e);return t.base64?yr(mr.BASE64,t.rest):function(e){let t;try{t=decodeURIComponent(e)}catch(Tw){throw Zn(mr.DATA_URL,"Malformed data URL.")}return _r(t)}(t.rest)}(t),new br(t).contentType)}throw Kn()}function _r(e){const t=[];for(let n=0;n<e.length;n++){let r=e.charCodeAt(n);if(r<=127)t.push(r);else if(r<=2047)t.push(192|r>>6,128|63&r);else if(55296===(64512&r)){if(n<e.length-1&&56320===(64512&e.charCodeAt(n+1))){r=65536|(1023&r)<<10|1023&e.charCodeAt(++n),t.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|63&r)}else t.push(239,191,189)}else 56320===(64512&r)?t.push(239,191,189):t.push(224|r>>12,128|r>>6&63,128|63&r)}return new Uint8Array(t)}function yr(e,t){switch(e){case mr.BASE64:{const n=-1!==t.indexOf("-"),r=-1!==t.indexOf("_");if(n||r){throw Zn(e,"Invalid character '"+(n?"-":"_")+"' found: is it base64url encoded?")}break}case mr.BASE64URL:{const n=-1!==t.indexOf("+"),r=-1!==t.indexOf("/");if(n||r){throw Zn(e,"Invalid character '"+(n?"+":"/")+"' found: is it base64 encoded?")}t=t.replace(/-/g,"+").replace(/_/g,"/");break}}let n;try{n=fr(t)}catch(Tw){if(Tw.message.includes("polyfill"))throw Tw;throw Zn(e,"Invalid character found")}const r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}class br{constructor(e){this.base64=!1,this.contentType=null;const t=e.match(/^data:([^,]+)?,/);if(null===t)throw Zn(mr.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const n=t[1]||null;null!=n&&(this.base64=function(e,t){if(!(e.length>=t.length))return!1;return e.substring(e.length-t.length)===t}(n,";base64"),this.contentType=this.base64?n.substring(0,n.length-7):n),this.rest=e.substring(e.indexOf(",")+1)}}class wr{constructor(e,t){let n=0,r="";ir(e)?(this.data_=e,n=e.size,r=e.type):e instanceof ArrayBuffer?(t?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),n=this.data_.length):e instanceof Uint8Array&&(t?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),n=e.length),this.size_=n,this.type_=r}size(){return this.size_}type(){return this.type_}slice(e,t){if(ir(this.data_)){const n=function(e,t,n){return e.webkitSlice?e.webkitSlice(t,n):e.mozSlice?e.mozSlice(t,n):e.slice?e.slice(t,n):null}(this.data_,e,t);return null===n?null:new wr(n)}{const n=new Uint8Array(this.data_.buffer,e,t-e);return new wr(n,!0)}}static getBlob(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];if(sr()){const e=t.map((e=>e instanceof wr?e.data_:e));return new wr(pr.apply(null,e))}{const e=t.map((e=>rr(e)?vr(mr.RAW,e).data:e.data_));let n=0;e.forEach((e=>{n+=e.byteLength}));const r=new Uint8Array(n);let i=0;return e.forEach((e=>{for(let t=0;t<e.length;t++)r[i++]=e[t]})),new wr(r,!0)}}uploadData(){return this.data_}}function Sr(e){let t;try{t=JSON.parse(e)}catch(Tw){return null}return"object"!==typeof(n=t)||Array.isArray(n)?null:t;var n}function Pr(e){const t=e.lastIndexOf("/",e.length-2);return-1===t?e:e.slice(t+1)}function Cr(e,t){return t}class Er{constructor(e,t,n,r){this.server=e,this.local=t||e,this.writable=!!n,this.xform=r||Cr}}let xr=null;function kr(){if(xr)return xr;const e=[];e.push(new Er("bucket")),e.push(new Er("generation")),e.push(new Er("metageneration")),e.push(new Er("name","fullPath",!0));const t=new Er("name");t.xform=function(e,t){return function(e){return!rr(e)||e.length<2?e:Pr(e)}(t)},e.push(t);const n=new Er("size");return n.xform=function(e,t){return void 0!==t?Number(t):t},e.push(n),e.push(new Er("timeCreated")),e.push(new Er("updated")),e.push(new Er("md5Hash",null,!0)),e.push(new Er("cacheControl",null,!0)),e.push(new Er("contentDisposition",null,!0)),e.push(new Er("contentEncoding",null,!0)),e.push(new Er("contentLanguage",null,!0)),e.push(new Er("contentType",null,!0)),e.push(new Er("metadata","customMetadata",!0)),xr=e,xr}function Ar(e,t,n){const r={type:"file"},i=n.length;for(let s=0;s<i;s++){const e=n[s];r[e.local]=e.xform(r,t[e.server])}return function(e,t){Object.defineProperty(e,"ref",{get:function(){const n=e.bucket,r=e.fullPath,i=new tr(n,r);return t._makeStorageReference(i)}})}(r,e),r}function Tr(e,t,n){const r=Sr(t);if(null===r)return null;return Ar(e,r,n)}function Fr(e,t){const n={},r=t.length;for(let i=0;i<r;i++){const r=t[i];r.writable&&(n[r.server]=e[r.local])}return JSON.stringify(n)}class Ir{constructor(e,t,n,r){this.url=e,this.method=t,this.handler=n,this.timeout=r,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}function Rr(e){if(!e)throw Kn()}function Mr(e,t){return function(n,r){const i=Tr(e,r,t);return Rr(null!==i),i}}function Nr(e,t){return function(n,r){const i=Tr(e,r,t);return Rr(null!==i),function(e,t,n,r){const i=Sr(t);if(null===i)return null;if(!rr(i.downloadTokens))return null;const s=i.downloadTokens;if(0===s.length)return null;const a=encodeURIComponent;return s.split(",").map((t=>{const i=e.bucket,s=e.fullPath;return or("/b/"+a(i)+"/o/"+a(s),n,r)+lr({alt:"media",token:t})}))[0]}(i,r,e.host,e._protocol)}}function Dr(e){return function(t,n){let r;var i,s;return 401===t.getStatus()?r=t.getErrorText().includes("Firebase App Check token is invalid")?new zn(qn.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project."):new zn(qn.UNAUTHENTICATED,"User is not authenticated, please authenticate using Firebase Authentication and try again."):402===t.getStatus()?(s=e.bucket,r=new zn(qn.QUOTA_EXCEEDED,"Quota for bucket '"+s+"' exceeded, please view quota on https://firebase.google.com/pricing/.")):403===t.getStatus()?(i=e.path,r=new zn(qn.UNAUTHORIZED,"User does not have permission to access '"+i+"'.")):r=n,r.status=t.getStatus(),r.serverResponse=n.serverResponse,r}}function Or(e){const t=Dr(e);return function(n,r){let i=t(n,r);var s;return 404===n.getStatus()&&(s=e.path,i=new zn(qn.OBJECT_NOT_FOUND,"Object '"+s+"' does not exist.")),i.serverResponse=r.serverResponse,i}}function Lr(e,t,n){const r=or(t.fullServerUrl(),e.host,e._protocol),i=e.maxOperationRetryTime,s=new Ir(r,"GET",Mr(e,n),i);return s.errorHandler=Or(t),s}function jr(e,t,n){const r=or(t.fullServerUrl(),e.host,e._protocol)+"?alt=media",i=e.maxOperationRetryTime,s=new Ir(r,"GET",((e,t)=>t),i);return s.errorHandler=Or(t),void 0!==n&&(s.headers.Range="bytes=0-".concat(n),s.successCodes=[200,206]),s}function Ur(e,t,n){const r=Object.assign({},n);return r.fullPath=e.path,r.size=t.size(),r.contentType||(r.contentType=function(e,t){return e&&e.contentType||t&&t.type()||"application/octet-stream"}(null,t)),r}function Gr(e,t,n,r,i){const s=t.bucketOnlyServerUrl(),a={"X-Goog-Upload-Protocol":"multipart"};const o=function(){let e="";for(let t=0;t<2;t++)e+=Math.random().toString().slice(2);return e}();a["Content-Type"]="multipart/related; boundary="+o;const l=Ur(t,r,i),c="--"+o+"\r\nContent-Type: application/json; charset=utf-8\r\n\r\n"+Fr(l,n)+"\r\n--"+o+"\r\nContent-Type: "+l.contentType+"\r\n\r\n",u="\r\n--"+o+"--",d=wr.getBlob(c,r,u);if(null===d)throw Qn();const h={name:l.fullPath},p=or(s,e.host,e._protocol),f=e.maxUploadRetryTime,m=new Ir(p,"POST",Mr(e,n),f);return m.urlParams=h,m.headers=a,m.body=d.uploadData(),m.errorHandler=Dr(t),m}class Br{constructor(e,t,n,r){this.current=e,this.total=t,this.finalized=!!n,this.metadata=r||null}}function Wr(e,t){let n=null;try{n=e.getResponseHeader("X-Goog-Upload-Status")}catch(Tw){Rr(!1)}return Rr(!!n&&-1!==(t||["active"]).indexOf(n)),n}const zr=262144;function qr(e,t,n,r,i,s,a,o){const l=new Br(0,0);if(a?(l.current=a.current,l.total=a.total):(l.current=0,l.total=r.size()),r.size()!==l.total)throw new zn(qn.SERVER_FILE_WRONG_SIZE,"Server recorded incorrect upload file size, please retry the upload.");const c=l.total-l.current;let u=c;i>0&&(u=Math.min(u,i));const d=l.current,h=d+u;let p="";p=0===u?"finalize":c===u?"upload, finalize":"upload";const f={"X-Goog-Upload-Command":p,"X-Goog-Upload-Offset":"".concat(l.current)},m=r.slice(d,h);if(null===m)throw Qn();const g=t.maxUploadRetryTime,v=new Ir(n,"POST",(function(e,n){const i=Wr(e,["active","final"]),a=l.current+u,o=r.size();let c;return c="final"===i?Mr(t,s)(e,n):null,new Br(a,o,"final"===i,c)}),g);return v.headers=f,v.body=m.uploadData(),v.progressCallback=o||null,v.errorHandler=Dr(e),v}const Hr="running",Vr="paused",Kr="success",Xr="canceled",Yr="error";function Qr(e){switch(e){case"running":case"pausing":case"canceling":return Hr;case"paused":return Vr;case"success":return Kr;case"canceled":return Xr;default:return Yr}}class Jr{constructor(e,t,n){if("function"===typeof e||null!=t||null!=n)this.next=e,this.error=null!==t&&void 0!==t?t:void 0,this.complete=null!==n&&void 0!==n?n:void 0;else{const t=e;this.next=t.next,this.error=t.error,this.complete=t.complete}}}function $r(e){return function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];Promise.resolve().then((()=>e(...n)))}}let Zr=null;class ei{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=Hn.NO_ERROR,this.sendPromise_=new Promise((e=>{this.xhr_.addEventListener("abort",(()=>{this.errorCode_=Hn.ABORT,e()})),this.xhr_.addEventListener("error",(()=>{this.errorCode_=Hn.NETWORK_ERROR,e()})),this.xhr_.addEventListener("load",(()=>{e()}))}))}send(e,t,n,r){if(this.sent_)throw er("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(t,e,!0),void 0!==r)for(const i in r)r.hasOwnProperty(i)&&this.xhr_.setRequestHeader(i,r[i].toString());return void 0!==n?this.xhr_.send(n):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw er("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw er("cannot .getStatus() before sending");try{return this.xhr_.status}catch(Tw){return-1}}getResponse(){if(!this.sent_)throw er("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw er("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){null!=this.xhr_.upload&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){null!=this.xhr_.upload&&this.xhr_.upload.removeEventListener("progress",e)}}class ti extends ei{initXhr(){this.xhr_.responseType="text"}}function ni(){return Zr?Zr():new ti}class ri extends ei{initXhr(){this.xhr_.responseType="blob"}}function ii(){return new ri}class si{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;this._transferred=0,this._needToFetchStatus=!1,this._needToFetchMetadata=!1,this._observers=[],this._error=void 0,this._uploadUrl=void 0,this._request=void 0,this._chunkMultiplier=1,this._resolve=void 0,this._reject=void 0,this._ref=e,this._blob=t,this._metadata=n,this._mappings=kr(),this._resumable=this._shouldDoResumable(this._blob),this._state="running",this._errorHandler=e=>{if(this._request=void 0,this._chunkMultiplier=1,e._codeEquals(qn.CANCELED))this._needToFetchStatus=!0,this.completeTransitions_();else{const t=this.isExponentialBackoffExpired();if(cr(e.status,[])){if(!t)return this.sleepTime=Math.max(2*this.sleepTime,1e3),this._needToFetchStatus=!0,void this.completeTransitions_();e=Xn()}this._error=e,this._transition("error")}},this._metadataErrorHandler=e=>{this._request=void 0,e._codeEquals(qn.CANCELED)?this.completeTransitions_():(this._error=e,this._transition("error"))},this.sleepTime=0,this.maxSleepTime=this._ref.storage.maxUploadRetryTime,this._promise=new Promise(((e,t)=>{this._resolve=e,this._reject=t,this._start()})),this._promise.then(null,(()=>{}))}isExponentialBackoffExpired(){return this.sleepTime>this.maxSleepTime}_makeProgressCallback(){const e=this._transferred;return t=>this._updateProgress(e+t)}_shouldDoResumable(e){return e.size()>262144}_start(){"running"===this._state&&void 0===this._request&&(this._resumable?void 0===this._uploadUrl?this._createResumable():this._needToFetchStatus?this._fetchStatus():this._needToFetchMetadata?this._fetchMetadata():this.pendingTimeout=setTimeout((()=>{this.pendingTimeout=void 0,this._continueUpload()}),this.sleepTime):this._oneShotUpload())}_resolveToken(e){Promise.all([this._ref.storage._getAuthToken(),this._ref.storage._getAppCheckToken()]).then((t=>{let[n,r]=t;switch(this._state){case"running":e(n,r);break;case"canceling":this._transition("canceled");break;case"pausing":this._transition("paused")}}))}_createResumable(){this._resolveToken(((e,t)=>{const n=function(e,t,n,r,i){const s=t.bucketOnlyServerUrl(),a=Ur(t,r,i),o={name:a.fullPath},l=or(s,e.host,e._protocol),c={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":"".concat(r.size()),"X-Goog-Upload-Header-Content-Type":a.contentType,"Content-Type":"application/json; charset=utf-8"},u=Fr(a,n),d=e.maxUploadRetryTime,h=new Ir(l,"POST",(function(e){let t;Wr(e);try{t=e.getResponseHeader("X-Goog-Upload-URL")}catch(Tw){Rr(!1)}return Rr(rr(t)),t}),d);return h.urlParams=o,h.headers=c,h.body=u,h.errorHandler=Dr(t),h}(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),r=this._ref.storage._makeRequest(n,ni,e,t);this._request=r,r.getPromise().then((e=>{this._request=void 0,this._uploadUrl=e,this._needToFetchStatus=!1,this.completeTransitions_()}),this._errorHandler)}))}_fetchStatus(){const e=this._uploadUrl;this._resolveToken(((t,n)=>{const r=function(e,t,n,r){const i=e.maxUploadRetryTime,s=new Ir(n,"POST",(function(e){const t=Wr(e,["active","final"]);let n=null;try{n=e.getResponseHeader("X-Goog-Upload-Size-Received")}catch(Tw){Rr(!1)}n||Rr(!1);const i=Number(n);return Rr(!isNaN(i)),new Br(i,r.size(),"final"===t)}),i);return s.headers={"X-Goog-Upload-Command":"query"},s.errorHandler=Dr(t),s}(this._ref.storage,this._ref._location,e,this._blob),i=this._ref.storage._makeRequest(r,ni,t,n);this._request=i,i.getPromise().then((e=>{this._request=void 0,this._updateProgress(e.current),this._needToFetchStatus=!1,e.finalized&&(this._needToFetchMetadata=!0),this.completeTransitions_()}),this._errorHandler)}))}_continueUpload(){const e=zr*this._chunkMultiplier,t=new Br(this._transferred,this._blob.size()),n=this._uploadUrl;this._resolveToken(((r,i)=>{let s;try{s=qr(this._ref._location,this._ref.storage,n,this._blob,e,this._mappings,t,this._makeProgressCallback())}catch(Tw){return this._error=Tw,void this._transition("error")}const a=this._ref.storage._makeRequest(s,ni,r,i,!1);this._request=a,a.getPromise().then((e=>{this._increaseMultiplier(),this._request=void 0,this._updateProgress(e.current),e.finalized?(this._metadata=e.metadata,this._transition("success")):this.completeTransitions_()}),this._errorHandler)}))}_increaseMultiplier(){2*(zr*this._chunkMultiplier)<33554432&&(this._chunkMultiplier*=2)}_fetchMetadata(){this._resolveToken(((e,t)=>{const n=Lr(this._ref.storage,this._ref._location,this._mappings),r=this._ref.storage._makeRequest(n,ni,e,t);this._request=r,r.getPromise().then((e=>{this._request=void 0,this._metadata=e,this._transition("success")}),this._metadataErrorHandler)}))}_oneShotUpload(){this._resolveToken(((e,t)=>{const n=Gr(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),r=this._ref.storage._makeRequest(n,ni,e,t);this._request=r,r.getPromise().then((e=>{this._request=void 0,this._metadata=e,this._updateProgress(this._blob.size()),this._transition("success")}),this._errorHandler)}))}_updateProgress(e){const t=this._transferred;this._transferred=e,this._transferred!==t&&this._notifyObservers()}_transition(e){if(this._state!==e)switch(e){case"canceling":case"pausing":this._state=e,void 0!==this._request?this._request.cancel():this.pendingTimeout&&(clearTimeout(this.pendingTimeout),this.pendingTimeout=void 0,this.completeTransitions_());break;case"running":const t="paused"===this._state;this._state=e,t&&(this._notifyObservers(),this._start());break;case"paused":case"error":case"success":this._state=e,this._notifyObservers();break;case"canceled":this._error=Yn(),this._state=e,this._notifyObservers()}}completeTransitions_(){switch(this._state){case"pausing":this._transition("paused");break;case"canceling":this._transition("canceled");break;case"running":this._start()}}get snapshot(){const e=Qr(this._state);return{bytesTransferred:this._transferred,totalBytes:this._blob.size(),state:e,metadata:this._metadata,task:this,ref:this._ref}}on(e,t,n,r){const i=new Jr(t||void 0,n||void 0,r||void 0);return this._addObserver(i),()=>{this._removeObserver(i)}}then(e,t){return this._promise.then(e,t)}catch(e){return this.then(null,e)}_addObserver(e){this._observers.push(e),this._notifyObserver(e)}_removeObserver(e){const t=this._observers.indexOf(e);-1!==t&&this._observers.splice(t,1)}_notifyObservers(){this._finishPromise();this._observers.slice().forEach((e=>{this._notifyObserver(e)}))}_finishPromise(){if(void 0!==this._resolve){let e=!0;switch(Qr(this._state)){case Kr:$r(this._resolve.bind(null,this.snapshot))();break;case Xr:case Yr:$r(this._reject.bind(null,this._error))();break;default:e=!1}e&&(this._resolve=void 0,this._reject=void 0)}}_notifyObserver(e){switch(Qr(this._state)){case Hr:case Vr:e.next&&$r(e.next.bind(e,this.snapshot))();break;case Kr:e.complete&&$r(e.complete.bind(e))();break;default:e.error&&$r(e.error.bind(e,this._error))()}}resume(){const e="paused"===this._state||"pausing"===this._state;return e&&this._transition("running"),e}pause(){const e="running"===this._state;return e&&this._transition("pausing"),e}cancel(){const e="running"===this._state||"pausing"===this._state;return e&&this._transition("canceling"),e}}class ai{constructor(e,t){this._service=e,this._location=t instanceof tr?t:tr.makeFromUrl(t,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,t){return new ai(e,t)}get root(){const e=new tr(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return Pr(this._location.path)}get storage(){return this._service}get parent(){const e=function(e){if(0===e.length)return null;const t=e.lastIndexOf("/");return-1===t?"":e.slice(0,t)}(this._location.path);if(null===e)return null;const t=new tr(this._location.bucket,e);return new ai(this._service,t)}_throwIfRoot(e){if(""===this._location.path)throw function(e){return new zn(qn.INVALID_ROOT_OPERATION,"The operation '"+e+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}(e)}}function oi(e){e._throwIfRoot("getDownloadURL");const t=function(e,t,n){const r=or(t.fullServerUrl(),e.host,e._protocol),i=e.maxOperationRetryTime,s=new Ir(r,"GET",Nr(e,n),i);return s.errorHandler=Or(t),s}(e.storage,e._location,kr());return e.storage.makeRequestWithTokens(t,ni).then((e=>{if(null===e)throw new zn(qn.NO_DOWNLOAD_URL,"The given file does not have any download URLs.");return e}))}function li(e){e._throwIfRoot("deleteObject");const t=function(e,t){const n=or(t.fullServerUrl(),e.host,e._protocol),r=e.maxOperationRetryTime,i=new Ir(n,"DELETE",(function(e,t){}),r);return i.successCodes=[200,204],i.errorHandler=Or(t),i}(e.storage,e._location);return e.storage.makeRequestWithTokens(t,ni)}function ci(e,t){const n=function(e,t){const n=t.split("/").filter((e=>e.length>0)).join("/");return 0===e.length?n:e+"/"+n}(e._location.path,t),r=new tr(e._location.bucket,n);return new ai(e.storage,r)}function ui(e,t){if(e instanceof pi){const n=e;if(null==n._bucket)throw new zn(qn.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+Wn+"' property when initializing the app?");const r=new ai(n,n._bucket);return null!=t?ui(r,t):r}return void 0!==t?ci(e,t):e}function di(e,t){if(t&&/^[A-Za-z]+:\/\//.test(t)){if(e instanceof pi)return new ai(e,t);throw Jn("To use ref(service, url), the first argument must be a Storage instance.")}return ui(e,t)}function hi(e,t){const n=null===t||void 0===t?void 0:t[Wn];return null==n?null:tr.makeFromBucketSpec(n,e)}class pi{constructor(e,t,n,r,i){this.app=e,this._authProvider=t,this._appCheckProvider=n,this._url=r,this._firebaseVersion=i,this._bucket=null,this._host=Bn,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=12e4,this._maxUploadRetryTime=6e5,this._requests=new Set,this._bucket=null!=r?tr.makeFromBucketSpec(r,this._host):hi(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,null!=this._url?this._bucket=tr.makeFromBucketSpec(this._url,e):this._bucket=hi(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){ar("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){ar("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const t=await e.getToken();if(null!==t)return t.accessToken}return null}async _getAppCheckToken(){const e=this._appCheckProvider.getImmediate({optional:!0});if(e){return(await e.getToken()).token}return null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach((e=>e.cancel())),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new ai(this,e)}_makeRequest(e,t,n,r){let i=!(arguments.length>4&&void 0!==arguments[4])||arguments[4];if(this._deleted)return new nr($n());{const s=function(e,t,n,r,i,s){let a=!(arguments.length>6&&void 0!==arguments[6])||arguments[6];const o=lr(e.urlParams),l=e.url+o,c=Object.assign({},e.headers);return function(e,t){t&&(e["X-Firebase-GMPID"]=t)}(c,t),function(e,t){null!==t&&t.length>0&&(e.Authorization="Firebase "+t)}(c,n),function(e,t){e["X-Firebase-Storage-Version"]="webjs/"+(null!==t&&void 0!==t?t:"AppManager")}(c,s),function(e,t){null!==t&&(e["X-Firebase-AppCheck"]=t)}(c,r),new ur(l,e.method,c,e.body,e.successCodes,e.additionalRetryCodes,e.handler,e.errorHandler,e.timeout,e.progressCallback,i,a)}(e,this._appId,n,r,t,this._firebaseVersion,i);return this._requests.add(s),s.getPromise().then((()=>this._requests.delete(s)),(()=>this._requests.delete(s))),s}}async makeRequestWithTokens(e,t){const[n,r]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,t,n,r).getPromise()}}const fi="@firebase/storage",mi="0.12.4",gi="storage";function vi(e,t,n){return function(e,t,n){return e._throwIfRoot("uploadBytesResumable"),new si(e,new wr(t),n)}(e=ut(e),t,n)}function _i(e,t){return di(e=ut(e),t)}function yi(e,t){return function(e,t){e._throwIfRoot("getBlob");const n=jr(e.storage,e._location,t);return e.storage.makeRequestWithTokens(n,ii).then((e=>void 0!==t?e.slice(0,t):e))}(e=ut(e),t)}function bi(e,t){let{instanceIdentifier:n}=t;const r=e.getProvider("app").getImmediate(),i=e.getProvider("auth-internal"),s=e.getProvider("app-check-internal");return new pi(r,i,s,n,En)}bn(new dt(gi,bi,"PUBLIC").setMultipleInstances(!0)),An(fi,mi,""),An(fi,mi,"esm2017");var wi=function(){return wi=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},wi.apply(this,arguments)};function Si(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n}Object.create;function Pi(e,t,n){if(n||2===arguments.length)for(var r,i=0,s=t.length;i<s;i++)!r&&i in t||(r||(r=Array.prototype.slice.call(t,0,i)),r[i]=t[i]);return e.concat(r||Array.prototype.slice.call(t))}Object.create;"function"===typeof SuppressedError&&SuppressedError;function Ci(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const Ei=Ci,xi=new He("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),ki=new wt("@firebase/auth");function Ai(e){if(ki.logLevel<=gt.ERROR){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];ki.error("Auth (".concat(En,"): ").concat(e),...n)}}function Ti(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];throw Ni(e,...n)}function Fi(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return Ni(e,...n)}function Ii(e,t,n){const r=Object.assign(Object.assign({},Ei()),{[t]:n});return new He("auth","Firebase",r).create(t,{appName:e.name})}function Ri(e){return Ii(e,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Mi(e,t,n){if(!(t instanceof n))throw n.name!==t.constructor.name&&Ti(e,"argument-error"),Ii(e,"argument-error","Type of ".concat(t.constructor.name," does not match expected instance.")+"Did you pass a reference from a different Auth SDK?")}function Ni(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];if("string"!==typeof e){const t=n[0],r=[...n.slice(1)];return r[0]&&(r[0].appName=e.name),e._errorFactory.create(t,...r)}return xi.create(e,...n)}function Di(e,t){if(!e){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];throw Ni(t,...r)}}function Oi(e){const t="INTERNAL ASSERTION FAILED: "+e;throw Ai(t),new Error(t)}function Li(e,t){e||Oi(t)}function ji(){var e;return"undefined"!==typeof self&&(null===(e=self.location)||void 0===e?void 0:e.href)||""}function Ui(){return"http:"===Gi()||"https:"===Gi()}function Gi(){var e;return"undefined"!==typeof self&&(null===(e=self.location)||void 0===e?void 0:e.protocol)||null}function Bi(){return!("undefined"!==typeof navigator&&navigator&&"onLine"in navigator&&"boolean"===typeof navigator.onLine&&(Ui()||function(){const e="object"===typeof chrome?chrome.runtime:"object"===typeof browser?browser.runtime:void 0;return"object"===typeof e&&void 0!==e.id}()||"connection"in navigator))||navigator.onLine}class Wi{constructor(e,t){this.shortDelay=e,this.longDelay=t,Li(t>e,"Short delay should be less than long delay!"),this.isMobile=Be()||We()}get(){return Bi()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function zi(e,t){Li(e.emulator,"Emulator should always be set here");const{url:n}=e.emulator;return t?"".concat(n).concat(t.startsWith("/")?t.slice(1):t):n}class qi{static initialize(e,t,n){this.fetchImpl=e,t&&(this.headersImpl=t),n&&(this.responseImpl=n)}static fetch(){return this.fetchImpl?this.fetchImpl:"undefined"!==typeof self&&"fetch"in self?self.fetch:"undefined"!==typeof globalThis&&globalThis.fetch?globalThis.fetch:"undefined"!==typeof fetch?fetch:void Oi("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:"undefined"!==typeof self&&"Headers"in self?self.Headers:"undefined"!==typeof globalThis&&globalThis.Headers?globalThis.Headers:"undefined"!==typeof Headers?Headers:void Oi("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:"undefined"!==typeof self&&"Response"in self?self.Response:"undefined"!==typeof globalThis&&globalThis.Response?globalThis.Response:"undefined"!==typeof Response?Response:void Oi("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const Hi={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"},Vi=new Wi(3e4,6e4);function Ki(e,t){return e.tenantId&&!t.tenantId?Object.assign(Object.assign({},t),{tenantId:e.tenantId}):t}async function Xi(e,t,n,r){return Yi(e,arguments.length>4&&void 0!==arguments[4]?arguments[4]:{},(async()=>{let i={},s={};r&&("GET"===t?s=r:i={body:JSON.stringify(r)});const a=nt(Object.assign({key:e.config.apiKey},s)).slice(1),o=await e._getAdditionalHeaders();return o["Content-Type"]="application/json",e.languageCode&&(o["X-Firebase-Locale"]=e.languageCode),qi.fetch()(Ji(e,e.config.apiHost,n,a),Object.assign({method:t,headers:o,referrerPolicy:"no-referrer"},i))}))}async function Yi(e,t,n){e._canInitEmulator=!1;const r=Object.assign(Object.assign({},Hi),t);try{const t=new Zi(e),i=await Promise.race([n(),t.promise]);t.clearNetworkTimeout();const s=await i.json();if("needConfirmation"in s)throw es(e,"account-exists-with-different-credential",s);if(i.ok&&!("errorMessage"in s))return s;{const t=i.ok?s.errorMessage:s.error.message,[n,a]=t.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===n)throw es(e,"credential-already-in-use",s);if("EMAIL_EXISTS"===n)throw es(e,"email-already-in-use",s);if("USER_DISABLED"===n)throw es(e,"user-disabled",s);const o=r[n]||n.toLowerCase().replace(/[_\s]+/g,"-");if(a)throw Ii(e,o,a);Ti(e,o)}}catch(Tw){if(Tw instanceof qe)throw Tw;Ti(e,"network-request-failed",{message:String(Tw)})}}async function Qi(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};const s=await Xi(e,t,n,r,i);return"mfaPendingCredential"in s&&Ti(e,"multi-factor-auth-required",{_serverResponse:s}),s}function Ji(e,t,n,r){const i="".concat(t).concat(n,"?").concat(r);return e.config.emulator?zi(e.config,i):"".concat(e.config.apiScheme,"://").concat(i)}function $i(e){switch(e){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class Zi{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise(((e,t)=>{this.timer=setTimeout((()=>t(Fi(this.auth,"network-request-failed"))),Vi.get())}))}clearNetworkTimeout(){clearTimeout(this.timer)}}function es(e,t,n){const r={appName:e.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const i=Fi(e,t,r);return i.customData._tokenResponse=n,i}function ts(e){return void 0!==e&&void 0!==e.enterprise}class ns{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],void 0===e.recaptchaKey)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||0===this.recaptchaEnforcementState.length)return null;for(const t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return $i(t.enforcementState);return null}isProviderEnabled(e){return"ENFORCE"===this.getProviderEnforcementState(e)||"AUDIT"===this.getProviderEnforcementState(e)}}async function rs(e,t){return Xi(e,"GET","/v2/recaptchaConfig",Ki(e,t))}async function is(e,t){return Xi(e,"POST","/v1/accounts:lookup",t)}function ss(e){if(e)try{const t=new Date(Number(e));if(!isNaN(t.getTime()))return t.toUTCString()}catch(Tw){}}function as(e){return 1e3*Number(e)}function os(e){const[t,n,r]=e.split(".");if(void 0===t||void 0===n||void 0===r)return Ai("JWT malformed, contained fewer than 3 sections"),null;try{const e=Te(n);return e?JSON.parse(e):(Ai("Failed to decode base64 JWT payload"),null)}catch(Tw){return Ai("Caught error parsing JWT payload as JSON",null===Tw||void 0===Tw?void 0:Tw.toString()),null}}function ls(e){const t=os(e);return Di(t,"internal-error"),Di("undefined"!==typeof t.exp,"internal-error"),Di("undefined"!==typeof t.iat,"internal-error"),Number(t.exp)-Number(t.iat)}async function cs(e,t){if(arguments.length>2&&void 0!==arguments[2]&&arguments[2])return t;try{return await t}catch(Tw){throw Tw instanceof qe&&function(e){let{code:t}=e;return t==="auth/".concat("user-disabled")||t==="auth/".concat("user-token-expired")}(Tw)&&e.auth.currentUser===e&&await e.auth.signOut(),Tw}}class us{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){const e=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),e}{this.errorBackoff=3e4;const e=(null!==(t=this.user.stsTokenManager.expirationTime)&&void 0!==t?t:0)-Date.now()-3e5;return Math.max(0,e)}}schedule(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout((async()=>{await this.iteration()}),t)}async iteration(){try{await this.user.getIdToken(!0)}catch(Tw){return void((null===Tw||void 0===Tw?void 0:Tw.code)==="auth/".concat("network-request-failed")&&this.schedule(!0))}this.schedule()}}class ds{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=ss(this.lastLoginAt),this.creationTime=ss(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}async function hs(e){var t;const n=e.auth,r=await e.getIdToken(),i=await cs(e,is(n,{idToken:r}));Di(null===i||void 0===i?void 0:i.users.length,n,"internal-error");const s=i.users[0];e._notifyReloadListener(s);const a=(null===(t=s.providerUserInfo)||void 0===t?void 0:t.length)?ps(s.providerUserInfo):[],o=(l=e.providerData,c=a,[...l.filter((e=>!c.some((t=>t.providerId===e.providerId)))),...c]);var l,c;const u=e.isAnonymous,d=!(e.email&&s.passwordHash)&&!(null===o||void 0===o?void 0:o.length),h=!!u&&d,p={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:o,metadata:new ds(s.createdAt,s.lastLoginAt),isAnonymous:h};Object.assign(e,p)}function ps(e){return e.map((e=>{var{providerId:t}=e,n=Si(e,["providerId"]);return{providerId:t,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}}))}class fs{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Di(e.idToken,"internal-error"),Di("undefined"!==typeof e.idToken,"internal-error"),Di("undefined"!==typeof e.refreshToken,"internal-error");const t="expiresIn"in e&&"undefined"!==typeof e.expiresIn?Number(e.expiresIn):ls(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){Di(0!==e.length,"internal-error");const t=ls(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e){return arguments.length>1&&void 0!==arguments[1]&&arguments[1]||!this.accessToken||this.isExpired?(Di(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null):this.accessToken}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:n,refreshToken:r,expiresIn:i}=await async function(e,t){const n=await Yi(e,{},(async()=>{const n=nt({grant_type:"refresh_token",refresh_token:t}).slice(1),{tokenApiHost:r,apiKey:i}=e.config,s=Ji(e,r,"/v1/token","key=".concat(i)),a=await e._getAdditionalHeaders();return a["Content-Type"]="application/x-www-form-urlencoded",qi.fetch()(s,{method:"POST",headers:a,body:n})}));return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}(e,t);this.updateTokensAndExpiration(n,r,Number(i))}updateTokensAndExpiration(e,t,n){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+1e3*n}static fromJSON(e,t){const{refreshToken:n,accessToken:r,expirationTime:i}=t,s=new fs;return n&&(Di("string"===typeof n,"internal-error",{appName:e}),s.refreshToken=n),r&&(Di("string"===typeof r,"internal-error",{appName:e}),s.accessToken=r),i&&(Di("number"===typeof i,"internal-error",{appName:e}),s.expirationTime=i),s}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new fs,this.toJSON())}_performRefresh(){return Oi("not implemented")}}function ms(e,t){Di("string"===typeof e||"undefined"===typeof e,"internal-error",{appName:t})}class gs{constructor(e){var{uid:t,auth:n,stsTokenManager:r}=e,i=Si(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new us(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=n,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=i.displayName||null,this.email=i.email||null,this.emailVerified=i.emailVerified||!1,this.phoneNumber=i.phoneNumber||null,this.photoURL=i.photoURL||null,this.isAnonymous=i.isAnonymous||!1,this.tenantId=i.tenantId||null,this.providerData=i.providerData?[...i.providerData]:[],this.metadata=new ds(i.createdAt||void 0,i.lastLoginAt||void 0)}async getIdToken(e){const t=await cs(this,this.stsTokenManager.getToken(this.auth,e));return Di(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return async function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const n=ut(e),r=await n.getIdToken(t),i=os(r);Di(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");const s="object"===typeof i.firebase?i.firebase:void 0,a=null===s||void 0===s?void 0:s.sign_in_provider;return{claims:i,token:r,authTime:ss(as(i.auth_time)),issuedAtTime:ss(as(i.iat)),expirationTime:ss(as(i.exp)),signInProvider:a||null,signInSecondFactor:(null===s||void 0===s?void 0:s.sign_in_second_factor)||null}}(this,e)}reload(){return async function(e){const t=ut(e);await hs(t),await t.auth._persistUserIfCurrent(t),t.auth._notifyListenersIfCurrent(t)}(this)}_assign(e){this!==e&&(Di(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map((e=>Object.assign({},e))),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new gs(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){Di(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),n=!0),t&&await hs(this),await this.auth._persistUserIfCurrent(this),n&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Sn(this.auth.app))return Promise.reject(Ri(this.auth));const e=await this.getIdToken();return await cs(this,async function(e,t){return Xi(e,"POST","/v1/accounts:delete",t)}(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map((e=>Object.assign({},e))),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var n,r,i,s,a,o,l,c;const u=null!==(n=t.displayName)&&void 0!==n?n:void 0,d=null!==(r=t.email)&&void 0!==r?r:void 0,h=null!==(i=t.phoneNumber)&&void 0!==i?i:void 0,p=null!==(s=t.photoURL)&&void 0!==s?s:void 0,f=null!==(a=t.tenantId)&&void 0!==a?a:void 0,m=null!==(o=t._redirectEventId)&&void 0!==o?o:void 0,g=null!==(l=t.createdAt)&&void 0!==l?l:void 0,v=null!==(c=t.lastLoginAt)&&void 0!==c?c:void 0,{uid:_,emailVerified:y,isAnonymous:b,providerData:w,stsTokenManager:S}=t;Di(_&&S,e,"internal-error");const P=fs.fromJSON(this.name,S);Di("string"===typeof _,e,"internal-error"),ms(u,e.name),ms(d,e.name),Di("boolean"===typeof y,e,"internal-error"),Di("boolean"===typeof b,e,"internal-error"),ms(h,e.name),ms(p,e.name),ms(f,e.name),ms(m,e.name),ms(g,e.name),ms(v,e.name);const C=new gs({uid:_,auth:e,email:d,emailVerified:y,displayName:u,isAnonymous:b,photoURL:p,phoneNumber:h,tenantId:f,stsTokenManager:P,createdAt:g,lastLoginAt:v});return w&&Array.isArray(w)&&(C.providerData=w.map((e=>Object.assign({},e)))),m&&(C._redirectEventId=m),C}static async _fromIdTokenResponse(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const r=new fs;r.updateFromServerResponse(t);const i=new gs({uid:t.localId,auth:e,stsTokenManager:r,isAnonymous:n});return await hs(i),i}static async _fromGetAccountInfoResponse(e,t,n){const r=t.users[0];Di(void 0!==r.localId,"internal-error");const i=void 0!==r.providerUserInfo?ps(r.providerUserInfo):[],s=!(r.email&&r.passwordHash)&&!(null===i||void 0===i?void 0:i.length),a=new fs;a.updateFromIdToken(n);const o=new gs({uid:r.localId,auth:e,stsTokenManager:a,isAnonymous:s}),l={uid:r.localId,displayName:r.displayName||null,photoURL:r.photoUrl||null,email:r.email||null,emailVerified:r.emailVerified||!1,phoneNumber:r.phoneNumber||null,tenantId:r.tenantId||null,providerData:i,metadata:new ds(r.createdAt,r.lastLoginAt),isAnonymous:!(r.email&&r.passwordHash)&&!(null===i||void 0===i?void 0:i.length)};return Object.assign(o,l),o}}const vs=new Map;function _s(e){Li(e instanceof Function,"Expected a class definition");let t=vs.get(e);return t?(Li(t instanceof e,"Instance stored in cache mismatched with class"),t):(t=new e,vs.set(e,t),t)}class ys{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return void 0===t?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}ys.type="NONE";const bs=ys;function ws(e,t,n){return"firebase".concat(":",e,":").concat(t,":").concat(n)}class Ss{constructor(e,t,n){this.persistence=e,this.auth=t,this.userKey=n;const{config:r,name:i}=this.auth;this.fullUserKey=ws(this.userKey,r.apiKey,i),this.fullPersistenceKey=ws("persistence",r.apiKey,i),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?gs._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();return await this.removeCurrentUser(),this.persistence=e,t?this.setCurrentUser(t):void 0}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"authUser";if(!t.length)return new Ss(_s(bs),e,n);const r=(await Promise.all(t.map((async e=>{if(await e._isAvailable())return e})))).filter((e=>e));let i=r[0]||_s(bs);const s=ws(n,e.config.apiKey,e.name);let a=null;for(const c of t)try{const t=await c._get(s);if(t){const n=gs._fromJSON(e,t);c!==i&&(a=n),i=c;break}}catch(l){}const o=r.filter((e=>e._shouldAllowMigration));return i._shouldAllowMigration&&o.length?(i=o[0],a&&await i._set(s,a.toJSON()),await Promise.all(t.map((async e=>{if(e!==i)try{await e._remove(s)}catch(l){}}))),new Ss(i,e,n)):new Ss(i,e,n)}}function Ps(e){const t=e.toLowerCase();if(t.includes("opera/")||t.includes("opr/")||t.includes("opios/"))return"Opera";if(ks(t))return"IEMobile";if(t.includes("msie")||t.includes("trident/"))return"IE";if(t.includes("edge/"))return"Edge";if(Cs(t))return"Firefox";if(t.includes("silk/"))return"Silk";if(Ts(t))return"Blackberry";if(Fs(t))return"Webos";if(Es(t))return"Safari";if((t.includes("chrome/")||xs(t))&&!t.includes("edge/"))return"Chrome";if(As(t))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,n=e.match(t);if(2===(null===n||void 0===n?void 0:n.length))return n[1]}return"Other"}function Cs(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ge();return/firefox\//i.test(e)}function Es(){const e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ge()).toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function xs(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ge();return/crios\//i.test(e)}function ks(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ge();return/iemobile/i.test(e)}function As(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ge();return/android/i.test(e)}function Ts(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ge();return/blackberry/i.test(e)}function Fs(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ge();return/webos/i.test(e)}function Is(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ge();return/iphone|ipad|ipod/i.test(e)||/macintosh/i.test(e)&&/mobile/i.test(e)}function Rs(){return function(){const e=Ge();return e.indexOf("MSIE ")>=0||e.indexOf("Trident/")>=0}()&&10===document.documentMode}function Ms(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ge();return Is(e)||As(e)||Fs(e)||Ts(e)||/windows phone/i.test(e)||ks(e)}function Ns(e){let t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];switch(e){case"Browser":t=Ps(Ge());break;case"Worker":t="".concat(Ps(Ge()),"-").concat(e);break;default:t=e}const r=n.length?n.join(","):"FirebaseCore-web";return"".concat(t,"/","JsCore","/").concat(En,"/").concat(r)}class Ds{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const n=t=>new Promise(((n,r)=>{try{n(e(t))}catch(Tw){r(Tw)}}));n.onAbort=t,this.queue.push(n);const r=this.queue.length-1;return()=>{this.queue[r]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const n of this.queue)await n(e),n.onAbort&&t.push(n.onAbort)}catch(Tw){t.reverse();for(const r of t)try{r()}catch(n){}throw this.auth._errorFactory.create("login-blocked",{originalMessage:null===Tw||void 0===Tw?void 0:Tw.message})}}}class Os{constructor(e){var t,n,r,i;const s=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=null!==(t=s.minPasswordLength)&&void 0!==t?t:6,s.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=s.maxPasswordLength),void 0!==s.containsLowercaseCharacter&&(this.customStrengthOptions.containsLowercaseLetter=s.containsLowercaseCharacter),void 0!==s.containsUppercaseCharacter&&(this.customStrengthOptions.containsUppercaseLetter=s.containsUppercaseCharacter),void 0!==s.containsNumericCharacter&&(this.customStrengthOptions.containsNumericCharacter=s.containsNumericCharacter),void 0!==s.containsNonAlphanumericCharacter&&(this.customStrengthOptions.containsNonAlphanumericCharacter=s.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,"ENFORCEMENT_STATE_UNSPECIFIED"===this.enforcementState&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=null!==(r=null===(n=e.allowedNonAlphanumericCharacters)||void 0===n?void 0:n.join(""))&&void 0!==r?r:"",this.forceUpgradeOnSignin=null!==(i=e.forceUpgradeOnSignin)&&void 0!==i&&i,this.schemaVersion=e.schemaVersion}validatePassword(e){var t,n,r,i,s,a;const o={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,o),this.validatePasswordCharacterOptions(e,o),o.isValid&&(o.isValid=null===(t=o.meetsMinPasswordLength)||void 0===t||t),o.isValid&&(o.isValid=null===(n=o.meetsMaxPasswordLength)||void 0===n||n),o.isValid&&(o.isValid=null===(r=o.containsLowercaseLetter)||void 0===r||r),o.isValid&&(o.isValid=null===(i=o.containsUppercaseLetter)||void 0===i||i),o.isValid&&(o.isValid=null===(s=o.containsNumericCharacter)||void 0===s||s),o.isValid&&(o.isValid=null===(a=o.containsNonAlphanumericCharacter)||void 0===a||a),o}validatePasswordLengthOptions(e,t){const n=this.customStrengthOptions.minPasswordLength,r=this.customStrengthOptions.maxPasswordLength;n&&(t.meetsMinPasswordLength=e.length>=n),r&&(t.meetsMaxPasswordLength=e.length<=r)}validatePasswordCharacterOptions(e,t){let n;this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);for(let r=0;r<e.length;r++)n=e.charAt(r),this.updatePasswordCharacterOptionsStatuses(t,n>="a"&&n<="z",n>="A"&&n<="Z",n>="0"&&n<="9",this.allowedNonAlphanumericCharacters.includes(n))}updatePasswordCharacterOptionsStatuses(e,t,n,r,i){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=n)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=r)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=i))}}class Ls{constructor(e,t,n,r){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=n,this.config=r,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Us(this),this.idTokenSubscription=new Us(this),this.beforeStateQueue=new Ds(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=xi,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=r.sdkClientVersion}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=_s(t)),this._initializationPromise=this.queue((async()=>{var n,r;if(!this._deleted&&(this.persistenceManager=await Ss.create(this,e),!this._deleted)){if(null===(n=this._popupRedirectResolver)||void 0===n?void 0:n._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch(Tw){}await this.initializeCurrentUser(t),this.lastNotifiedUid=(null===(r=this.currentUser)||void 0===r?void 0:r.uid)||null,this._deleted||(this._isInitialized=!0)}})),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();return this.currentUser||e?this.currentUser&&e&&this.currentUser.uid===e.uid?(this._currentUser._assign(e),void await this.currentUser.getIdToken()):void await this._updateCurrentUser(e,!0):void 0}async initializeCurrentUserFromIdToken(e){try{const t=await is(this,{idToken:e}),n=await gs._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(n)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var t;if(Sn(this.app)){const e=this.app.settings.authIdToken;return e?new Promise((t=>{setTimeout((()=>this.initializeCurrentUserFromIdToken(e).then(t,t)))})):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let r=n,i=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const n=null===(t=this.redirectUser)||void 0===t?void 0:t._redirectEventId,s=null===r||void 0===r?void 0:r._redirectEventId,a=await this.tryRedirectSignIn(e);n&&n!==s||!(null===a||void 0===a?void 0:a.user)||(r=a.user,i=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(i)try{await this.beforeStateQueue.runMiddleware(r)}catch(Tw){r=n,this._popupRedirectResolver._overrideRedirectResult(this,(()=>Promise.reject(Tw)))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return Di(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch(Tw){await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await hs(e)}catch(Tw){if((null===Tw||void 0===Tw?void 0:Tw.code)!=="auth/".concat("network-request-failed"))return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=function(){if("undefined"===typeof navigator)return null;const e=navigator;return e.languages&&e.languages[0]||e.language||null}()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Sn(this.app))return Promise.reject(Ri(this));const t=e?ut(e):null;return t&&Di(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!this._deleted)return e&&Di(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue((async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()}))}async signOut(){return Sn(this.app)?Promise.reject(Ri(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Sn(this.app)?Promise.reject(Ri(this)):this.queue((async()=>{await this.assertedPersistence.setPersistence(_s(e))}))}_getRecaptchaConfig(){return null==this.tenantId?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return null===this.tenantId?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await async function(e){return Xi(e,"GET","/v2/passwordPolicy",Ki(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}))}(this),t=new Os(e);null===this.tenantId?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new He("auth","Firebase",e())}onAuthStateChanged(e,t,n){return this.registerStateListener(this.authStateSubscription,e,t,n)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,n){return this.registerStateListener(this.idTokenSubscription,e,t,n)}authStateReady(){return new Promise(((e,t)=>{if(this.currentUser)e();else{const n=this.onAuthStateChanged((()=>{n(),e()}),t)}}))}async revokeAccessToken(e){if(this.currentUser){const t={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:await this.currentUser.getIdToken()};null!=this.tenantId&&(t.tenantId=this.tenantId),await async function(e,t){return Xi(e,"POST","/v2/accounts:revokeToken",Ki(e,t))}(this,t)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(e=this._currentUser)||void 0===e?void 0:e.toJSON()}}async _setRedirectUser(e,t){const n=await this.getOrInitRedirectPersistenceManager(t);return null===e?n.removeCurrentUser():n.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&_s(e)||this._popupRedirectResolver;Di(t,this,"argument-error"),this.redirectPersistenceManager=await Ss.create(this,[_s(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,n;return this._isInitialized&&await this.queue((async()=>{})),(null===(t=this._currentUser)||void 0===t?void 0:t._redirectEventId)===e?this._currentUser:(null===(n=this.redirectUser)||void 0===n?void 0:n._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue((async()=>this.directlySetCurrentUser(e)))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return"".concat(this.config.authDomain,":").concat(this.config.apiKey,":").concat(this.name)}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const n=null!==(t=null===(e=this.currentUser)||void 0===e?void 0:e.uid)&&void 0!==t?t:null;this.lastNotifiedUid!==n&&(this.lastNotifiedUid=n,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,n,r){if(this._deleted)return()=>{};const i="function"===typeof t?t:t.next.bind(t);let s=!1;const a=this._isInitialized?Promise.resolve():this._initializationPromise;if(Di(a,this,"internal-error"),a.then((()=>{s||i(this.currentUser)})),"function"===typeof t){const i=e.addObserver(t,n,r);return()=>{s=!0,i()}}{const n=e.addObserver(t);return()=>{s=!0,n()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Di(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){e&&!this.frameworks.includes(e)&&(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=Ns(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);const n=await(null===(e=this.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===e?void 0:e.getHeartbeatsHeader());n&&(t["X-Firebase-Client"]=n);const r=await this._getAppCheckToken();return r&&(t["X-Firebase-AppCheck"]=r),t}async _getAppCheckToken(){var e;const t=await(null===(e=this.appCheckServiceProvider.getImmediate({optional:!0}))||void 0===e?void 0:e.getToken());return(null===t||void 0===t?void 0:t.error)&&function(e){if(ki.logLevel<=gt.WARN){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];ki.warn("Auth (".concat(En,"): ").concat(e),...n)}}("Error while retrieving App Check token: ".concat(t.error)),null===t||void 0===t?void 0:t.token}}function js(e){return ut(e)}class Us{constructor(e){this.auth=e,this.observer=null,this.addObserver=function(e,t){const n=new at(e,t);return n.subscribe.bind(n)}((e=>this.observer=e))}get next(){return Di(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}let Gs={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function Bs(e){return Gs.loadJS(e)}function Ws(e){return"__".concat(e).concat(Math.floor(1e6*Math.random()))}class zs{constructor(e){this.type="recaptcha-enterprise",this.auth=js(e)}async verify(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"verify",t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];function n(t,n,r){const i=window.grecaptcha;ts(i)?i.enterprise.ready((()=>{i.enterprise.execute(t,{action:e}).then((e=>{n(e)})).catch((()=>{n("NO_RECAPTCHA")}))})):r(Error("No reCAPTCHA enterprise script loaded."))}return new Promise(((e,r)=>{(async function(e){if(!t){if(null==e.tenantId&&null!=e._agentRecaptchaConfig)return e._agentRecaptchaConfig.siteKey;if(null!=e.tenantId&&void 0!==e._tenantRecaptchaConfigs[e.tenantId])return e._tenantRecaptchaConfigs[e.tenantId].siteKey}return new Promise((async(t,n)=>{rs(e,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then((r=>{if(void 0!==r.recaptchaKey){const n=new ns(r);return null==e.tenantId?e._agentRecaptchaConfig=n:e._tenantRecaptchaConfigs[e.tenantId]=n,t(n.siteKey)}n(new Error("recaptcha Enterprise site key undefined"))})).catch((e=>{n(e)}))}))})(this.auth).then((i=>{if(!t&&ts(window.grecaptcha))n(i,e,r);else{if("undefined"===typeof window)return void r(new Error("RecaptchaVerifier is only supported in browser"));let t=Gs.recaptchaEnterpriseScript;0!==t.length&&(t+=i),Bs(t).then((()=>{n(i,e,r)})).catch((e=>{r(e)}))}})).catch((e=>{r(e)}))}))}}async function qs(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const i=new zs(e);let s;try{s=await i.verify(n)}catch(cl){s=await i.verify(n,!0)}const a=Object.assign({},t);return r?Object.assign(a,{captchaResp:s}):Object.assign(a,{captchaResponse:s}),Object.assign(a,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(a,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),a}async function Hs(e,t,n,r){var i;if(null===(i=e._getRecaptchaConfig())||void 0===i?void 0:i.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const i=await qs(e,t,n,"getOobCode"===n);return r(e,i)}return r(e,t).catch((async i=>{if(i.code==="auth/".concat("missing-recaptcha-token")){console.log("".concat(n," is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow."));const i=await qs(e,t,n,"getOobCode"===n);return r(e,i)}return Promise.reject(i)}))}function Vs(e,t,n){const r=js(e);Di(r._canInitEmulator,r,"emulator-config-failed"),Di(/^https?:\/\//.test(t),r,"invalid-emulator-scheme");const i=!!(null===n||void 0===n?void 0:n.disableWarnings),s=Ks(t),{host:a,port:o}=function(e){const t=Ks(e),n=/(\/\/)?([^?#/]+)/.exec(e.substr(t.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const e=i[1];return{host:e,port:Xs(r.substr(e.length+1))}}{const[e,t]=r.split(":");return{host:e,port:Xs(t)}}}(t),l=null===o?"":":".concat(o);r.config.emulator={url:"".concat(s,"//").concat(a).concat(l,"/")},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:a,port:o,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:i})}),i||function(){function e(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}"undefined"!==typeof console&&"function"===typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials.");"undefined"!==typeof window&&"undefined"!==typeof document&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",e):e())}()}function Ks(e){const t=e.indexOf(":");return t<0?"":e.substr(0,t+1)}function Xs(e){if(!e)return null;const t=Number(e);return isNaN(t)?null:t}class Ys{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return Oi("not implemented")}_getIdTokenResponse(e){return Oi("not implemented")}_linkToIdToken(e,t){return Oi("not implemented")}_getReauthenticationResolver(e){return Oi("not implemented")}}async function Qs(e,t){return Xi(e,"POST","/v1/accounts:signUp",t)}async function Js(e,t){return Qi(e,"POST","/v1/accounts:signInWithPassword",Ki(e,t))}class $s extends Ys{constructor(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;super("password",n),this._email=e,this._password=t,this._tenantId=r}static _fromEmailAndPassword(e,t){return new $s(e,t,"password")}static _fromEmailAndCode(e,t){return new $s(e,t,"emailLink",arguments.length>2&&void 0!==arguments[2]?arguments[2]:null)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t="string"===typeof e?JSON.parse(e):e;if((null===t||void 0===t?void 0:t.email)&&(null===t||void 0===t?void 0:t.password)){if("password"===t.signInMethod)return this._fromEmailAndPassword(t.email,t.password);if("emailLink"===t.signInMethod)return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":return Hs(e,{returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"},"signInWithPassword",Js);case"emailLink":return async function(e,t){return Qi(e,"POST","/v1/accounts:signInWithEmailLink",Ki(e,t))}(e,{email:this._email,oobCode:this._password});default:Ti(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":return Hs(e,{idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",Qs);case"emailLink":return async function(e,t){return Qi(e,"POST","/v1/accounts:signInWithEmailLink",Ki(e,t))}(e,{idToken:t,email:this._email,oobCode:this._password});default:Ti(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}async function Zs(e,t){return Qi(e,"POST","/v1/accounts:signInWithIdp",Ki(e,t))}class ea extends Ys{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new ea(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):Ti("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t="string"===typeof e?JSON.parse(e):e,{providerId:n,signInMethod:r}=t,i=Si(t,["providerId","signInMethod"]);if(!n||!r)return null;const s=new ea(n,r);return s.idToken=i.idToken||void 0,s.accessToken=i.accessToken||void 0,s.secret=i.secret,s.nonce=i.nonce,s.pendingToken=i.pendingToken||null,s}_getIdTokenResponse(e){return Zs(e,this.buildRequest())}_linkToIdToken(e,t){const n=this.buildRequest();return n.idToken=t,Zs(e,n)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,Zs(e,t)}buildRequest(){const e={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=nt(t)}return e}}const ta={USER_NOT_FOUND:"user-not-found"};class na extends Ys{constructor(e){super("phone","phone"),this.params=e}static _fromVerification(e,t){return new na({verificationId:e,verificationCode:t})}static _fromTokenResponse(e,t){return new na({phoneNumber:e,temporaryProof:t})}_getIdTokenResponse(e){return async function(e,t){return Qi(e,"POST","/v1/accounts:signInWithPhoneNumber",Ki(e,t))}(e,this._makeVerificationRequest())}_linkToIdToken(e,t){return async function(e,t){const n=await Qi(e,"POST","/v1/accounts:signInWithPhoneNumber",Ki(e,t));if(n.temporaryProof)throw es(e,"account-exists-with-different-credential",n);return n}(e,Object.assign({idToken:t},this._makeVerificationRequest()))}_getReauthenticationResolver(e){return async function(e,t){return Qi(e,"POST","/v1/accounts:signInWithPhoneNumber",Ki(e,Object.assign(Object.assign({},t),{operation:"REAUTH"})),ta)}(e,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:e,phoneNumber:t,verificationId:n,verificationCode:r}=this.params;return e&&t?{temporaryProof:e,phoneNumber:t}:{sessionInfo:n,code:r}}toJSON(){const e={providerId:this.providerId};return this.params.phoneNumber&&(e.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(e.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(e.verificationCode=this.params.verificationCode),this.params.verificationId&&(e.verificationId=this.params.verificationId),e}static fromJSON(e){"string"===typeof e&&(e=JSON.parse(e));const{verificationId:t,verificationCode:n,phoneNumber:r,temporaryProof:i}=e;return n||t||r||i?new na({verificationId:t,verificationCode:n,phoneNumber:r,temporaryProof:i}):null}}class ra{constructor(e){var t,n,r,i,s,a;const o=rt(it(e)),l=null!==(t=o.apiKey)&&void 0!==t?t:null,c=null!==(n=o.oobCode)&&void 0!==n?n:null,u=function(e){switch(e){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(r=o.mode)&&void 0!==r?r:null);Di(l&&c&&u,"argument-error"),this.apiKey=l,this.operation=u,this.code=c,this.continueUrl=null!==(i=o.continueUrl)&&void 0!==i?i:null,this.languageCode=null!==(s=o.languageCode)&&void 0!==s?s:null,this.tenantId=null!==(a=o.tenantId)&&void 0!==a?a:null}static parseLink(e){const t=function(e){const t=rt(it(e)).link,n=t?rt(it(t)).deep_link_id:null,r=rt(it(e)).deep_link_id;return(r?rt(it(r)).link:null)||r||n||t||e}(e);try{return new ra(t)}catch(n){return null}}}class ia{constructor(){this.providerId=ia.PROVIDER_ID}static credential(e,t){return $s._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const n=ra.parseLink(t);return Di(n,"argument-error"),$s._fromEmailAndCode(e,n.code,n.tenantId)}}ia.PROVIDER_ID="password",ia.EMAIL_PASSWORD_SIGN_IN_METHOD="password",ia.EMAIL_LINK_SIGN_IN_METHOD="emailLink";class sa{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}class aa extends sa{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class oa extends aa{constructor(){super("facebook.com")}static credential(e){return ea._fromParams({providerId:oa.PROVIDER_ID,signInMethod:oa.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return oa.credentialFromTaggedObject(e)}static credentialFromError(e){return oa.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t||!("oauthAccessToken"in t))return null;if(!t.oauthAccessToken)return null;try{return oa.credential(t.oauthAccessToken)}catch(n){return null}}}oa.FACEBOOK_SIGN_IN_METHOD="facebook.com",oa.PROVIDER_ID="facebook.com";class la extends aa{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return ea._fromParams({providerId:la.PROVIDER_ID,signInMethod:la.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return la.credentialFromTaggedObject(e)}static credentialFromError(e){return la.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t)return null;const{oauthIdToken:n,oauthAccessToken:r}=t;if(!n&&!r)return null;try{return la.credential(n,r)}catch(i){return null}}}la.GOOGLE_SIGN_IN_METHOD="google.com",la.PROVIDER_ID="google.com";class ca extends aa{constructor(){super("github.com")}static credential(e){return ea._fromParams({providerId:ca.PROVIDER_ID,signInMethod:ca.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return ca.credentialFromTaggedObject(e)}static credentialFromError(e){return ca.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t||!("oauthAccessToken"in t))return null;if(!t.oauthAccessToken)return null;try{return ca.credential(t.oauthAccessToken)}catch(n){return null}}}ca.GITHUB_SIGN_IN_METHOD="github.com",ca.PROVIDER_ID="github.com";class ua extends aa{constructor(){super("twitter.com")}static credential(e,t){return ea._fromParams({providerId:ua.PROVIDER_ID,signInMethod:ua.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return ua.credentialFromTaggedObject(e)}static credentialFromError(e){return ua.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=t;if(!n||!r)return null;try{return ua.credential(n,r)}catch(i){return null}}}ua.TWITTER_SIGN_IN_METHOD="twitter.com",ua.PROVIDER_ID="twitter.com";class da{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const i=await gs._fromIdTokenResponse(e,n,r),s=ha(n);return new da({user:i,providerId:s,_tokenResponse:n,operationType:t})}static async _forOperation(e,t,n){await e._updateTokensIfNecessary(n,!0);const r=ha(n);return new da({user:e,providerId:r,_tokenResponse:n,operationType:t})}}function ha(e){return e.providerId?e.providerId:"phoneNumber"in e?"phone":null}class pa extends qe{constructor(e,t,n,r){var i;super(t.code,t.message),this.operationType=n,this.user=r,Object.setPrototypeOf(this,pa.prototype),this.customData={appName:e.name,tenantId:null!==(i=e.tenantId)&&void 0!==i?i:void 0,_serverResponse:t.customData._serverResponse,operationType:n}}static _fromErrorAndOperation(e,t,n,r){return new pa(e,t,n,r)}}function fa(e,t,n,r){return("reauthenticate"===t?n._getReauthenticationResolver(e):n._getIdTokenResponse(e)).catch((n=>{if(n.code==="auth/".concat("multi-factor-auth-required"))throw pa._fromErrorAndOperation(e,n,t,r);throw n}))}async function ma(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const r=await cs(e,t._linkToIdToken(e.auth,await e.getIdToken()),n);return da._forOperation(e,"link",r)}async function ga(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const{auth:r}=e;if(Sn(r.app))return Promise.reject(Ri(r));const i="reauthenticate";try{const s=await cs(e,fa(r,i,t,e),n);Di(s.idToken,r,"internal-error");const a=os(s.idToken);Di(a,r,"internal-error");const{sub:o}=a;return Di(e.uid===o,r,"user-mismatch"),da._forOperation(e,i,s)}catch(Tw){throw(null===Tw||void 0===Tw?void 0:Tw.code)==="auth/".concat("user-not-found")&&Ti(r,"user-mismatch"),Tw}}async function va(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(Sn(e.app))return Promise.reject(Ri(e));const r="signIn",i=await fa(e,r,t),s=await da._fromIdTokenResponse(e,r,i);return n||await e._updateCurrentUser(s.user),s}class _a{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};this.isNewUser=e,this.providerId=t,this.profile=n}}class ya extends _a{constructor(e,t,n,r){super(e,t,n),this.username=r}}class ba extends _a{constructor(e,t){super(e,"facebook.com",t)}}class wa extends ya{constructor(e,t){super(e,"github.com",t,"string"===typeof(null===t||void 0===t?void 0:t.login)?null===t||void 0===t?void 0:t.login:null)}}class Sa extends _a{constructor(e,t){super(e,"google.com",t)}}class Pa extends ya{constructor(e,t,n){super(e,"twitter.com",t,n)}}function Ca(e){const{user:t,_tokenResponse:n}=e;return t.isAnonymous&&!n?{providerId:null,isNewUser:!1,profile:null}:function(e){var t,n;if(!e)return null;const{providerId:r}=e,i=e.rawUserInfo?JSON.parse(e.rawUserInfo):{},s=e.isNewUser||"identitytoolkit#SignupNewUserResponse"===e.kind;if(!r&&(null===e||void 0===e?void 0:e.idToken)){const r=null===(n=null===(t=os(e.idToken))||void 0===t?void 0:t.firebase)||void 0===n?void 0:n.sign_in_provider;if(r)return new _a(s,"anonymous"!==r&&"custom"!==r?r:null)}if(!r)return null;switch(r){case"facebook.com":return new ba(s,i);case"github.com":return new wa(s,i);case"google.com":return new Sa(s,i);case"twitter.com":return new Pa(s,i,e.screenName||null);case"custom":case"anonymous":return new _a(s,null);default:return new _a(s,r,i)}}(n)}new WeakMap;const Ea="__sak";class xa{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(Ea,"1"),this.storage.removeItem(Ea),Promise.resolve(!0)):Promise.resolve(!1)}catch(e){return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}class ka extends xa{constructor(){super((()=>window.localStorage),"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function(){const e=Ge();return Es(e)||Is(e)}()&&function(){try{return!(!window||window===window.top)}catch(Tw){return!1}}(),this.fallbackToPolling=Ms(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const n=this.storage.getItem(t),r=this.localCache[t];n!==r&&e(t,r,n)}}onStorageEvent(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!e.key)return void this.forAllChangedKeys(((e,t,n)=>{this.notifyListeners(e,n)}));const n=e.key;if(t?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const r=this.storage.getItem(n);if(e.newValue!==r)null!==e.newValue?this.storage.setItem(n,e.newValue):this.storage.removeItem(n);else if(this.localCache[n]===e.newValue&&!t)return}const r=()=>{const e=this.storage.getItem(n);(t||this.localCache[n]!==e)&&this.notifyListeners(n,e)},i=this.storage.getItem(n);Rs()&&i!==e.newValue&&e.newValue!==e.oldValue?setTimeout(r,10):r()}notifyListeners(e,t){this.localCache[e]=t;const n=this.listeners[e];if(n)for(const r of Array.from(n))r(t?JSON.parse(t):t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval((()=>{this.forAllChangedKeys(((e,t,n)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:n}),!0)}))}),1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}ka.type="LOCAL";const Aa=ka;class Ta extends xa{constructor(){super((()=>window.sessionStorage),"SESSION")}_addListener(e,t){}_removeListener(e,t){}}Ta.type="SESSION";const Fa=Ta;class Ia{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find((t=>t.isListeningto(e)));if(t)return t;const n=new Ia(e);return this.receivers.push(n),n}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:n,eventType:r,data:i}=t.data,s=this.handlersMap[r];if(!(null===s||void 0===s?void 0:s.size))return;t.ports[0].postMessage({status:"ack",eventId:n,eventType:r});const a=Array.from(s).map((async e=>e(t.origin,i))),o=await function(e){return Promise.all(e.map((async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}})))}(a);t.ports[0].postMessage({status:"done",eventId:n,eventType:r,response:o})}_subscribe(e,t){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),t&&0!==this.handlersMap[e].size||delete this.handlersMap[e],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}function Ra(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,n="";for(let r=0;r<t;r++)n+=Math.floor(10*Math.random());return e+n}Ia.receivers=[];class Ma{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:50;const r="undefined"!==typeof MessageChannel?new MessageChannel:null;if(!r)throw new Error("connection_unavailable");let i,s;return new Promise(((a,o)=>{const l=Ra("",20);r.port1.start();const c=setTimeout((()=>{o(new Error("unsupported_event"))}),n);s={messageChannel:r,onMessage(e){const t=e;if(t.data.eventId===l)switch(t.data.status){case"ack":clearTimeout(c),i=setTimeout((()=>{o(new Error("timeout"))}),3e3);break;case"done":clearTimeout(i),a(t.data.response);break;default:clearTimeout(c),clearTimeout(i),o(new Error("invalid_response"))}}},this.handlers.add(s),r.port1.addEventListener("message",s.onMessage),this.target.postMessage({eventType:e,eventId:l,data:t},[r.port2])})).finally((()=>{s&&this.removeMessageHandler(s)}))}}function Na(){return window}function Da(){return"undefined"!==typeof Na().WorkerGlobalScope&&"function"===typeof Na().importScripts}const Oa="firebaseLocalStorageDb",La="firebaseLocalStorage",ja="fbase_key";class Ua{constructor(e){this.request=e}toPromise(){return new Promise(((e,t)=>{this.request.addEventListener("success",(()=>{e(this.request.result)})),this.request.addEventListener("error",(()=>{t(this.request.error)}))}))}}function Ga(e,t){return e.transaction([La],t?"readwrite":"readonly").objectStore(La)}function Ba(){const e=indexedDB.open(Oa,1);return new Promise(((t,n)=>{e.addEventListener("error",(()=>{n(e.error)})),e.addEventListener("upgradeneeded",(()=>{const t=e.result;try{t.createObjectStore(La,{keyPath:ja})}catch(Tw){n(Tw)}})),e.addEventListener("success",(async()=>{const n=e.result;n.objectStoreNames.contains(La)?t(n):(n.close(),await function(){const e=indexedDB.deleteDatabase(Oa);return new Ua(e).toPromise()}(),t(await Ba()))}))}))}async function Wa(e,t,n){const r=Ga(e,!0).put({[ja]:t,value:n});return new Ua(r).toPromise()}function za(e,t){const n=Ga(e,!0).delete(t);return new Ua(n).toPromise()}class qa{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then((()=>{}),(()=>{}))}async _openDb(){return this.db||(this.db=await Ba()),this.db}async _withRetries(e){let t=0;for(;;)try{const t=await this._openDb();return await e(t)}catch(Tw){if(t++>3)throw Tw;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return Da()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Ia._getInstance(Da()?self:null),this.receiver._subscribe("keyChanged",(async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)}))),this.receiver._subscribe("ping",(async(e,t)=>["keyChanged"]))}async initializeSender(){var e,t;if(this.activeServiceWorker=await async function(){if(!(null===navigator||void 0===navigator?void 0:navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch(e){return null}}(),!this.activeServiceWorker)return;this.sender=new Ma(this.activeServiceWorker);const n=await this.sender._send("ping",{},800);n&&(null===(e=n[0])||void 0===e?void 0:e.fulfilled)&&(null===(t=n[0])||void 0===t?void 0:t.value.includes("keyChanged"))&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(this.sender&&this.activeServiceWorker&&function(){var e;return(null===(e=null===navigator||void 0===navigator?void 0:navigator.serviceWorker)||void 0===e?void 0:e.controller)||null}()===this.activeServiceWorker)try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch(t){}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Ba();return await Wa(e,Ea,"1"),await za(e,Ea),!0}catch(e){}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite((async()=>(await this._withRetries((n=>Wa(n,e,t))),this.localCache[e]=t,this.notifyServiceWorker(e))))}async _get(e){const t=await this._withRetries((t=>async function(e,t){const n=Ga(e,!1).get(t),r=await new Ua(n).toPromise();return void 0===r?null:r.value}(t,e)));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite((async()=>(await this._withRetries((t=>za(t,e))),delete this.localCache[e],this.notifyServiceWorker(e))))}async _poll(){const e=await this._withRetries((e=>{const t=Ga(e,!1).getAll();return new Ua(t).toPromise()}));if(!e)return[];if(0!==this.pendingWrites)return[];const t=[],n=new Set;if(0!==e.length)for(const{fbase_key:r,value:i}of e)n.add(r),JSON.stringify(this.localCache[r])!==JSON.stringify(i)&&(this.notifyListeners(r,i),t.push(r));for(const r of Object.keys(this.localCache))this.localCache[r]&&!n.has(r)&&(this.notifyListeners(r,null),t.push(r));return t}notifyListeners(e,t){this.localCache[e]=t;const n=this.listeners[e];if(n)for(const r of Array.from(n))r(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval((async()=>this._poll()),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&this.stopPolling()}}qa.type="LOCAL";const Ha=qa;Ws("rcb"),new Wi(3e4,6e4);const Va="recaptcha";async function Ka(e,t,n){var r;const i=await n.verify();try{let s;if(Di("string"===typeof i,e,"argument-error"),Di(n.type===Va,e,"argument-error"),s="string"===typeof t?{phoneNumber:t}:t,"session"in s){const t=s.session;if("phoneNumber"in s){Di("enroll"===t.type,e,"internal-error");const n=await function(e,t){return Xi(e,"POST","/v2/accounts/mfaEnrollment:start",Ki(e,t))}(e,{idToken:t.credential,phoneEnrollmentInfo:{phoneNumber:s.phoneNumber,recaptchaToken:i}});return n.phoneSessionInfo.sessionInfo}{Di("signin"===t.type,e,"internal-error");const n=(null===(r=s.multiFactorHint)||void 0===r?void 0:r.uid)||s.multiFactorUid;Di(n,e,"missing-multi-factor-info");const a=await function(e,t){return Xi(e,"POST","/v2/accounts/mfaSignIn:start",Ki(e,t))}(e,{mfaPendingCredential:t.credential,mfaEnrollmentId:n,phoneSignInInfo:{recaptchaToken:i}});return a.phoneResponseInfo.sessionInfo}}{const{sessionInfo:t}=await async function(e,t){return Xi(e,"POST","/v1/accounts:sendVerificationCode",Ki(e,t))}(e,{phoneNumber:s.phoneNumber,recaptchaToken:i});return t}}finally{n._reset()}}class Xa{constructor(e){this.providerId=Xa.PROVIDER_ID,this.auth=js(e)}verifyPhoneNumber(e,t){return Ka(this.auth,e,ut(t))}static credential(e,t){return na._fromVerification(e,t)}static credentialFromResult(e){const t=e;return Xa.credentialFromTaggedObject(t)}static credentialFromError(e){return Xa.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t)return null;const{phoneNumber:n,temporaryProof:r}=t;return n&&r?na._fromTokenResponse(n,r):null}}function Ya(e,t){return t?_s(t):(Di(e._popupRedirectResolver,e,"argument-error"),e._popupRedirectResolver)}Xa.PROVIDER_ID="phone",Xa.PHONE_SIGN_IN_METHOD="phone";class Qa extends Ys{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Zs(e,this._buildIdpRequest())}_linkToIdToken(e,t){return Zs(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return Zs(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function Ja(e){return va(e.auth,new Qa(e),e.bypassAuthState)}function $a(e){const{auth:t,user:n}=e;return Di(n,t,"internal-error"),ga(n,new Qa(e),e.bypassAuthState)}async function Za(e){const{auth:t,user:n}=e;return Di(n,t,"internal-error"),ma(n,new Qa(e),e.bypassAuthState)}class eo{constructor(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]&&arguments[4];this.auth=e,this.resolver=n,this.user=r,this.bypassAuthState=i,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise((async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(Tw){this.reject(Tw)}}))}async onAuthEvent(e){const{urlResponse:t,sessionId:n,postBody:r,tenantId:i,error:s,type:a}=e;if(s)return void this.reject(s);const o={auth:this.auth,requestUri:t,sessionId:n,tenantId:i||void 0,postBody:r||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(a)(o))}catch(Tw){this.reject(Tw)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return Ja;case"linkViaPopup":case"linkViaRedirect":return Za;case"reauthViaPopup":case"reauthViaRedirect":return $a;default:Ti(this.auth,"internal-error")}}resolve(e){Li(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Li(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const to=new Wi(2e3,1e4);class no extends eo{constructor(e,t,n,r,i){super(e,t,r,i),this.provider=n,this.authWindow=null,this.pollId=null,no.currentPopupAction&&no.currentPopupAction.cancel(),no.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Di(e,this.auth,"internal-error"),e}async onExecution(){Li(1===this.filter.length,"Popup operations only handle one event");const e=Ra();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch((e=>{this.reject(e)})),this.resolver._isIframeWebStorageSupported(this.auth,(e=>{e||this.reject(Fi(this.auth,"web-storage-unsupported"))})),this.pollUserCancellation()}get eventId(){var e;return(null===(e=this.authWindow)||void 0===e?void 0:e.associatedEvent)||null}cancel(){this.reject(Fi(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,no.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t,n;(null===(n=null===(t=this.authWindow)||void 0===t?void 0:t.window)||void 0===n?void 0:n.closed)?this.pollId=window.setTimeout((()=>{this.pollId=null,this.reject(Fi(this.auth,"popup-closed-by-user"))}),8e3):this.pollId=window.setTimeout(e,to.get())};e()}}no.currentPopupAction=null;const ro="pendingRedirect",io=new Map;class so extends eo{constructor(e,t){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,arguments.length>2&&void 0!==arguments[2]&&arguments[2]),this.eventId=null}async execute(){let e=io.get(this.auth._key());if(!e){try{const t=await async function(e,t){const n=lo(t),r=oo(e);if(!await r._isAvailable())return!1;const i="true"===await r._get(n);return await r._remove(n),i}(this.resolver,this.auth),n=t?await super.execute():null;e=()=>Promise.resolve(n)}catch(Tw){e=()=>Promise.reject(Tw)}io.set(this.auth._key(),e)}return this.bypassAuthState||io.set(this.auth._key(),(()=>Promise.resolve(null))),e()}async onAuthEvent(e){if("signInViaRedirect"===e.type)return super.onAuthEvent(e);if("unknown"!==e.type){if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}else this.resolve(null)}async onExecution(){}cleanUp(){}}function ao(e,t){io.set(e._key(),t)}function oo(e){return _s(e._redirectPersistence)}function lo(e){return ws(ro,e.config.apiKey,e.name)}async function co(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(Sn(e.app))return Promise.reject(Ri(e));const r=js(e),i=Ya(r,t),s=new so(r,i,n),a=await s.execute();return a&&!n&&(delete a.user._redirectEventId,await r._persistUserIfCurrent(a.user),await r._setRedirectUser(null,t)),a}class uo{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach((n=>{this.isEventForConsumer(e,n)&&(t=!0,this.sendToConsumer(e,n),this.saveEventToCache(e))})),this.hasHandledPotentialRedirect||!function(e){switch(e.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return po(e);default:return!1}}(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var n;if(e.error&&!po(e)){const r=(null===(n=e.error.code)||void 0===n?void 0:n.split("auth/")[1])||"internal-error";t.onError(Fi(this.auth,r))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const n=null===t.eventId||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&n}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(ho(e))}saveEventToCache(e){this.cachedEventUids.add(ho(e)),this.lastProcessedEventTime=Date.now()}}function ho(e){return[e.type,e.eventId,e.sessionId,e.tenantId].filter((e=>e)).join("-")}function po(e){let{type:t,error:n}=e;return"unknown"===t&&(null===n||void 0===n?void 0:n.code)==="auth/".concat("no-auth-event")}const fo=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,mo=/^https?/;async function go(e){if(e.config.emulator)return;const{authorizedDomains:t}=await async function(e){return Xi(e,"GET","/v1/projects",arguments.length>1&&void 0!==arguments[1]?arguments[1]:{})}(e);for(const r of t)try{if(vo(r))return}catch(n){}Ti(e,"unauthorized-domain")}function vo(e){const t=ji(),{protocol:n,hostname:r}=new URL(t);if(e.startsWith("chrome-extension://")){const i=new URL(e);return""===i.hostname&&""===r?"chrome-extension:"===n&&e.replace("chrome-extension://","")===t.replace("chrome-extension://",""):"chrome-extension:"===n&&i.hostname===r}if(!mo.test(n))return!1;if(fo.test(e))return r===e;const i=e.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}const _o=new Wi(3e4,6e4);function yo(){const e=Na().___jsl;if(null===e||void 0===e?void 0:e.H)for(const t of Object.keys(e.H))if(e.H[t].r=e.H[t].r||[],e.H[t].L=e.H[t].L||[],e.H[t].r=[...e.H[t].L],e.CP)for(let n=0;n<e.CP.length;n++)e.CP[n]=null}function bo(e){return new Promise(((t,n)=>{var r,i,s;function a(){yo(),gapi.load("gapi.iframes",{callback:()=>{t(gapi.iframes.getContext())},ontimeout:()=>{yo(),n(Fi(e,"network-request-failed"))},timeout:_o.get()})}if(null===(i=null===(r=Na().gapi)||void 0===r?void 0:r.iframes)||void 0===i?void 0:i.Iframe)t(gapi.iframes.getContext());else{if(!(null===(s=Na().gapi)||void 0===s?void 0:s.load)){const t=Ws("iframefcb");return Na()[t]=()=>{gapi.load?a():n(Fi(e,"network-request-failed"))},Bs("".concat(Gs.gapiScript,"?onload=").concat(t)).catch((e=>n(e)))}a()}})).catch((e=>{throw wo=null,e}))}let wo=null;const So=new Wi(5e3,15e3),Po="__/auth/iframe",Co="emulator/auth/iframe",Eo={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},xo=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function ko(e){const t=e.config;Di(t.authDomain,e,"auth-domain-config-required");const n=t.emulator?zi(t,Co):"https://".concat(e.config.authDomain,"/").concat(Po),r={apiKey:t.apiKey,appName:e.name,v:En},i=xo.get(e.config.apiHost);i&&(r.eid=i);const s=e._getFrameworks();return s.length&&(r.fw=s.join(",")),"".concat(n,"?").concat(nt(r).slice(1))}async function Ao(e){const t=await function(e){return wo=wo||bo(e),wo}(e),n=Na().gapi;return Di(n,e,"internal-error"),t.open({where:document.body,url:ko(e),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Eo,dontclear:!0},(t=>new Promise((async(n,r)=>{await t.restyle({setHideOnLeave:!1});const i=Fi(e,"network-request-failed"),s=Na().setTimeout((()=>{r(i)}),So.get());function a(){Na().clearTimeout(s),n(t)}t.ping(a).then(a,(()=>{r(i)}))}))))}const To={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class Fo{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch(Tw){}}}function Io(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:500,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:600;const s=Math.max((window.screen.availHeight-i)/2,0).toString(),a=Math.max((window.screen.availWidth-r)/2,0).toString();let o="";const l=Object.assign(Object.assign({},To),{width:r.toString(),height:i.toString(),top:s,left:a}),c=Ge().toLowerCase();n&&(o=xs(c)?"_blank":n),Cs(c)&&(t=t||"http://localhost",l.scrollbars="yes");const u=Object.entries(l).reduce(((e,t)=>{let[n,r]=t;return"".concat(e).concat(n,"=").concat(r,",")}),"");if(function(){var e;return Is(arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ge())&&!!(null===(e=window.navigator)||void 0===e?void 0:e.standalone)}(c)&&"_self"!==o)return function(e,t){const n=document.createElement("a");n.href=e,n.target=t;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}(t||"",o),new Fo(null);const d=window.open(t||"",o,u);Di(d,e,"popup-blocked");try{d.focus()}catch(Tw){}return new Fo(d)}const Ro="__/auth/handler",Mo="emulator/auth/handler",No=encodeURIComponent("fac");async function Do(e,t,n,r,i,s){Di(e.config.authDomain,e,"auth-domain-config-required"),Di(e.config.apiKey,e,"invalid-api-key");const a={apiKey:e.config.apiKey,appName:e.name,authType:n,redirectUrl:r,v:En,eventId:i};if(t instanceof sa){t.setDefaultLanguage(e.languageCode),a.providerId=t.providerId||"",$e(t.getCustomParameters())||(a.customParameters=JSON.stringify(t.getCustomParameters()));for(const[e,t]of Object.entries(s||{}))a[e]=t}if(t instanceof aa){const e=t.getScopes().filter((e=>""!==e));e.length>0&&(a.scopes=e.join(","))}e.tenantId&&(a.tid=e.tenantId);const o=a;for(const u of Object.keys(o))void 0===o[u]&&delete o[u];const l=await e._getAppCheckToken(),c=l?"#".concat(No,"=").concat(encodeURIComponent(l)):"";return"".concat(function(e){let{config:t}=e;if(!t.emulator)return"https://".concat(t.authDomain,"/").concat(Ro);return zi(t,Mo)}(e),"?").concat(nt(o).slice(1)).concat(c)}const Oo="webStorageSupport";const Lo=class{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Fa,this._completeRedirectFn=co,this._overrideRedirectResult=ao}async _openPopup(e,t,n,r){var i;Li(null===(i=this.eventManagers[e._key()])||void 0===i?void 0:i.manager,"_initialize() not called before _openPopup()");return Io(e,await Do(e,t,n,ji(),r),Ra())}async _openRedirect(e,t,n,r){await this._originValidation(e);return function(e){Na().location.href=e}(await Do(e,t,n,ji(),r)),new Promise((()=>{}))}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:e,promise:n}=this.eventManagers[t];return e?Promise.resolve(e):(Li(n,"If manager is not set, promise should be"),n)}const n=this.initAndGetManager(e);return this.eventManagers[t]={promise:n},n.catch((()=>{delete this.eventManagers[t]})),n}async initAndGetManager(e){const t=await Ao(e),n=new uo(e);return t.register("authEvent",(t=>{Di(null===t||void 0===t?void 0:t.authEvent,e,"invalid-auth-event");return{status:n.onEvent(t.authEvent)?"ACK":"ERROR"}}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:n},this.iframes[e._key()]=t,n}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(Oo,{type:Oo},(n=>{var r;const i=null===(r=null===n||void 0===n?void 0:n[0])||void 0===r?void 0:r[Oo];void 0!==i&&t(!!i),Ti(e,"internal-error")}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=go(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return Ms()||Es()||Is()}};var jo="@firebase/auth",Uo="1.7.1";class Go{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),(null===(e=this.auth.currentUser)||void 0===e?void 0:e.uid)||null}async getToken(e){if(this.assertAuthConfigured(),await this.auth._initializationPromise,!this.auth.currentUser)return null;return{accessToken:await this.auth.currentUser.getIdToken(e)}}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged((t=>{e((null===t||void 0===t?void 0:t.stsTokenManager.accessToken)||null)}));this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){Di(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}const Bo=Le("authIdTokenMaxAge")||300;let Wo=null;var zo,qo;zo={loadJS:e=>new Promise(((t,n)=>{const r=document.createElement("script");r.setAttribute("src",e),r.onload=t,r.onerror=e=>{const t=Fi("internal-error");t.customData=e,n(t)},r.type="text/javascript",r.charset="UTF-8",function(){var e,t;return null!==(t=null===(e=document.getElementsByTagName("head"))||void 0===e?void 0:e[0])&&void 0!==t?t:document}().appendChild(r)})),gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="},Gs=zo,qo="Browser",bn(new dt("auth",((e,t)=>{let{options:n}=t;const r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:a,authDomain:o}=r.options;Di(a&&!a.includes(":"),"invalid-api-key",{appName:r.name});const l={apiKey:a,authDomain:o,clientPlatform:qo,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Ns(qo)},c=new Ls(r,i,s,l);return function(e,t){const n=(null===t||void 0===t?void 0:t.persistence)||[],r=(Array.isArray(n)?n:[n]).map(_s);(null===t||void 0===t?void 0:t.errorMap)&&e._updateErrorMap(t.errorMap),e._initializeWithPersistence(r,null===t||void 0===t?void 0:t.popupRedirectResolver)}(c,n),c}),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback(((e,t,n)=>{e.getProvider("auth-internal").initialize()}))),bn(new dt("auth-internal",(e=>(e=>new Go(e))(js(e.getProvider("auth").getImmediate()))),"PRIVATE").setInstantiationMode("EXPLICIT")),An(jo,Uo,function(e){switch(e){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}(qo)),An(jo,Uo,"esm2017");const Ho="@firebase/database",Vo="1.0.4";let Ko="";function Xo(e){Ko=e}class Yo{constructor(e){this.domStorage_=e,this.prefix_="firebase:"}set(e,t){null==t?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),Xe(t))}get(e){const t=this.domStorage_.getItem(this.prefixedName_(e));return null==t?null:Ke(t)}remove(e){this.domStorage_.removeItem(this.prefixedName_(e))}prefixedName_(e){return this.prefix_+e}toString(){return this.domStorage_.toString()}}class Qo{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(e,t){null==t?delete this.cache_[e]:this.cache_[e]=t}get(e){return Qe(this.cache_,e)?this.cache_[e]:null}remove(e){delete this.cache_[e]}}const Jo=function(e){try{if("undefined"!==typeof window&&"undefined"!==typeof window[e]){const t=window[e];return t.setItem("firebase:sentinel","cache"),t.removeItem("firebase:sentinel"),new Yo(t)}}catch(Tw){}return new Qo},$o=Jo("localStorage"),Zo=Jo("sessionStorage"),el=new wt("@firebase/database"),tl=function(){let e=1;return function(){return e++}}(),nl=function(e){const t=function(e){const t=[];let n=0;for(let r=0;r<e.length;r++){let i=e.charCodeAt(r);if(i>=55296&&i<=56319){const t=i-55296;r++,Se(r<e.length,"Surrogate pair missing trail surrogate."),i=65536+(t<<10)+(e.charCodeAt(r)-56320)}i<128?t[n++]=i:i<2048?(t[n++]=i>>6|192,t[n++]=63&i|128):i<65536?(t[n++]=i>>12|224,t[n++]=i>>6&63|128,t[n++]=63&i|128):(t[n++]=i>>18|240,t[n++]=i>>12&63|128,t[n++]=i>>6&63|128,t[n++]=63&i|128)}return t}(e),n=new st;n.update(t);const r=n.digest();return Ee.encodeByteArray(r)},rl=function(){let e="";for(let t=0;t<arguments.length;t++){const n=t<0||arguments.length<=t?void 0:arguments[t];Array.isArray(n)||n&&"object"===typeof n&&"number"===typeof n.length?e+=rl.apply(null,n):e+="object"===typeof n?Xe(n):n,e+=" "}return e};let il=null,sl=!0;const al=function(e,t){Se(!t||!0===e||!1===e,"Can't turn on custom loggers persistently."),!0===e?(el.logLevel=gt.VERBOSE,il=el.log.bind(el),t&&Zo.set("logging_enabled",!0)):"function"===typeof e?il=e:(il=null,Zo.remove("logging_enabled"))},ol=function(){if(!0===sl&&(sl=!1,null===il&&!0===Zo.get("logging_enabled")&&al(!0)),il){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];const r=rl.apply(null,t);il(r)}},ll=function(e){return function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];ol(e,...n)}},cl=function(){const e="FIREBASE INTERNAL ERROR: "+rl(...arguments);el.error(e)},ul=function(){const e="FIREBASE FATAL ERROR: ".concat(rl(...arguments));throw el.error(e),new Error(e)},dl=function(){const e="FIREBASE WARNING: "+rl(...arguments);el.warn(e)},hl=function(e){return"number"===typeof e&&(e!==e||e===Number.POSITIVE_INFINITY||e===Number.NEGATIVE_INFINITY)},pl="[MIN_NAME]",fl="[MAX_NAME]",ml=function(e,t){if(e===t)return 0;if(e===pl||t===fl)return-1;if(t===pl||e===fl)return 1;{const n=Pl(e),r=Pl(t);return null!==n?null!==r?n-r===0?e.length-t.length:n-r:-1:null!==r?1:e<t?-1:1}},gl=function(e,t){return e===t?0:e<t?-1:1},vl=function(e,t){if(t&&e in t)return t[e];throw new Error("Missing required key ("+e+") in object: "+Xe(t))},_l=function(e){if("object"!==typeof e||null===e)return Xe(e);const t=[];for(const r in e)t.push(r);t.sort();let n="{";for(let r=0;r<t.length;r++)0!==r&&(n+=","),n+=Xe(t[r]),n+=":",n+=_l(e[t[r]]);return n+="}",n},yl=function(e,t){const n=e.length;if(n<=t)return[e];const r=[];for(let i=0;i<n;i+=t)i+t>n?r.push(e.substring(i,n)):r.push(e.substring(i,i+t));return r};function bl(e,t){for(const n in e)e.hasOwnProperty(n)&&t(n,e[n])}const wl=function(e){Se(!hl(e),"Invalid JSON number");const t=1023;let n,r,i,s,a;0===e?(r=0,i=0,n=1/e===-1/0?1:0):(n=e<0,(e=Math.abs(e))>=Math.pow(2,-1022)?(s=Math.min(Math.floor(Math.log(e)/Math.LN2),t),r=s+t,i=Math.round(e*Math.pow(2,52-s)-Math.pow(2,52))):(r=0,i=Math.round(e/Math.pow(2,-1074))));const o=[];for(a=52;a;a-=1)o.push(i%2?1:0),i=Math.floor(i/2);for(a=11;a;a-=1)o.push(r%2?1:0),r=Math.floor(r/2);o.push(n?1:0),o.reverse();const l=o.join("");let c="";for(a=0;a<64;a+=8){let e=parseInt(l.substr(a,8),2).toString(16);1===e.length&&(e="0"+e),c+=e}return c.toLowerCase()};const Sl=new RegExp("^-?(0*)\\d{1,10}$"),Pl=function(e){if(Sl.test(e)){const t=Number(e);if(t>=-2147483648&&t<=2147483647)return t}return null},Cl=function(e){try{e()}catch(Tw){setTimeout((()=>{const t=Tw.stack||"";throw dl("Exception was thrown by user callback.",t),Tw}),Math.floor(0))}},El=function(e,t){const n=setTimeout(e,t);return"number"===typeof n&&"undefined"!==typeof Deno&&Deno.unrefTimer?Deno.unrefTimer(n):"object"===typeof n&&n.unref&&n.unref(),n};class xl{constructor(e,t){this.appName_=e,this.appCheckProvider=t,this.appCheck=null===t||void 0===t?void 0:t.getImmediate({optional:!0}),this.appCheck||null===t||void 0===t||t.get().then((e=>this.appCheck=e))}getToken(e){return this.appCheck?this.appCheck.getToken(e):new Promise(((t,n)=>{setTimeout((()=>{this.appCheck?this.getToken(e).then(t,n):t(null)}),0)}))}addTokenChangeListener(e){var t;null===(t=this.appCheckProvider)||void 0===t||t.get().then((t=>t.addTokenListener(e)))}notifyForInvalidToken(){dl('Provided AppCheck credentials for the app named "'.concat(this.appName_,'" ')+"are invalid. This usually indicates your app was not initialized correctly.")}}class kl{constructor(e,t,n){this.appName_=e,this.firebaseOptions_=t,this.authProvider_=n,this.auth_=null,this.auth_=n.getImmediate({optional:!0}),this.auth_||n.onInit((e=>this.auth_=e))}getToken(e){return this.auth_?this.auth_.getToken(e).catch((e=>e&&"auth/token-not-initialized"===e.code?(ol("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(e))):new Promise(((t,n)=>{setTimeout((()=>{this.auth_?this.getToken(e).then(t,n):t(null)}),0)}))}addTokenChangeListener(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then((t=>t.addAuthTokenListener(e)))}removeTokenChangeListener(e){this.authProvider_.get().then((t=>t.removeAuthTokenListener(e)))}notifyForInvalidToken(){let e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';"credential"in this.firebaseOptions_?e+='Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?e+='Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':e+='Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',dl(e)}}class Al{constructor(e){this.accessToken=e}getToken(e){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(e){e(this.accessToken)}removeTokenChangeListener(e){}notifyForInvalidToken(){}}Al.OWNER="owner";const Tl="5",Fl=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,Il="ac",Rl="websocket",Ml="long_polling";class Nl{constructor(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]&&arguments[4],s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"",a=arguments.length>6&&void 0!==arguments[6]&&arguments[6],o=arguments.length>7&&void 0!==arguments[7]&&arguments[7];this.secure=t,this.namespace=n,this.webSocketOnly=r,this.nodeAdmin=i,this.persistenceKey=s,this.includeNamespaceInQueryParams=a,this.isUsingEmulator=o,this._host=e.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=$o.get("host:"+e)||this._host}isCacheableHost(){return"s-"===this.internalHost.substr(0,2)}isCustomHost(){return"firebaseio.com"!==this._domain&&"firebaseio-demo.com"!==this._domain}get host(){return this._host}set host(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&$o.set("host:"+this._host,this.internalHost))}toString(){let e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e}toURLString(){const e=this.secure?"https://":"http://",t=this.includeNamespaceInQueryParams?"?ns=".concat(this.namespace):"";return"".concat(e).concat(this.host,"/").concat(t)}}function Dl(e,t,n){let r;if(Se("string"===typeof t,"typeof type must == string"),Se("object"===typeof n,"typeof params must == object"),t===Rl)r=(e.secure?"wss://":"ws://")+e.internalHost+"/.ws?";else{if(t!==Ml)throw new Error("Unknown connection type: "+t);r=(e.secure?"https://":"http://")+e.internalHost+"/.lp?"}(function(e){return e.host!==e.internalHost||e.isCustomHost()||e.includeNamespaceInQueryParams})(e)&&(n.ns=e.namespace);const i=[];return bl(n,((e,t)=>{i.push(e+"="+t)})),r+i.join("&")}class Ol{constructor(){this.counters_={}}incrementCounter(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;Qe(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=t}get(){return Fe(this.counters_)}}const Ll={},jl={};function Ul(e){const t=e.toString();return Ll[t]||(Ll[t]=new Ol),Ll[t]}class Gl{constructor(e){this.onMessage_=e,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(e,t){this.closeAfterResponse=e,this.onClose=t,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(e,t){for(this.pendingResponses[e]=t;this.pendingResponses[this.currentResponseNum];){const e=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let t=0;t<e.length;++t)e[t]&&Cl((()=>{this.onMessage_(e[t])}));if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}const Bl="start";class Wl{constructor(e,t,n,r,i,s,a){this.connId=e,this.repoInfo=t,this.applicationId=n,this.appCheckToken=r,this.authToken=i,this.transportSessionId=s,this.lastSessionId=a,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=ll(e),this.stats_=Ul(t),this.urlFn=e=>(this.appCheckToken&&(e[Il]=this.appCheckToken),Dl(t,Ml,e))}open(e,t){var n=this;this.curSegmentNum=0,this.onDisconnect_=t,this.myPacketOrderer=new Gl(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout((()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null}),Math.floor(3e4)),function(e){if(ze()||"complete"===document.readyState)e();else{let t=!1;const n=function(){document.body?t||(t=!0,e()):setTimeout(n,Math.floor(10))};document.addEventListener?(document.addEventListener("DOMContentLoaded",n,!1),window.addEventListener("load",n,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",(()=>{"complete"===document.readyState&&n()})),window.attachEvent("onload",n))}}((()=>{if(this.isClosed_)return;this.scriptTagHolder=new zl((function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];const[i,s,a,o,l]=t;if(n.incrementIncomingBytes_(t),n.scriptTagHolder)if(n.connectTimeoutTimer_&&(clearTimeout(n.connectTimeoutTimer_),n.connectTimeoutTimer_=null),n.everConnected_=!0,i===Bl)n.id=s,n.password=a;else{if("close"!==i)throw new Error("Unrecognized command received: "+i);s?(n.scriptTagHolder.sendNewPolls=!1,n.myPacketOrderer.closeAfter(s,(()=>{n.onClosed_()}))):n.onClosed_()}}),(function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];const[i,s]=t;n.incrementIncomingBytes_(t),n.myPacketOrderer.handleResponse(i,s)}),(()=>{this.onClosed_()}),this.urlFn);const e={};e[Bl]="t",e.ser=Math.floor(1e8*Math.random()),this.scriptTagHolder.uniqueCallbackIdentifier&&(e.cb=this.scriptTagHolder.uniqueCallbackIdentifier),e.v=Tl,this.transportSessionId&&(e.s=this.transportSessionId),this.lastSessionId&&(e.ls=this.lastSessionId),this.applicationId&&(e.p=this.applicationId),this.appCheckToken&&(e[Il]=this.appCheckToken),"undefined"!==typeof location&&location.hostname&&Fl.test(location.hostname)&&(e.r="f");const t=this.urlFn(e);this.log_("Connecting via long-poll to "+t),this.scriptTagHolder.addTag(t,(()=>{}))}))}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){Wl.forceAllow_=!0}static forceDisallow(){Wl.forceDisallow_=!0}static isAvailable(){return!ze()&&(!!Wl.forceAllow_||!Wl.forceDisallow_&&"undefined"!==typeof document&&null!=document.createElement&&!("object"===typeof window&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href))&&!("object"===typeof Windows&&"object"===typeof Windows.UI))}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(e){const t=Xe(e);this.bytesSent+=t.length,this.stats_.incrementCounter("bytes_sent",t.length);const n=ke(t),r=yl(n,1840);for(let i=0;i<r.length;i++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,r.length,r[i]),this.curSegmentNum++}addDisconnectPingFrame(e,t){if(ze())return;this.myDisconnFrame=document.createElement("iframe");const n={dframe:"t"};n.id=e,n.pw=t,this.myDisconnFrame.src=this.urlFn(n),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(e){const t=Xe(e).length;this.bytesReceived+=t,this.stats_.incrementCounter("bytes_received",t)}}class zl{constructor(e,t,n,r){if(this.onDisconnect=n,this.urlFn=r,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(1e8*Math.random()),this.sendNewPolls=!0,ze())this.commandCB=e,this.onMessageCB=t;else{this.uniqueCallbackIdentifier=tl(),window["pLPCommand"+this.uniqueCallbackIdentifier]=e,window["pRTLPCB"+this.uniqueCallbackIdentifier]=t,this.myIFrame=zl.createIFrame_();let n="";if(this.myIFrame.src&&"javascript:"===this.myIFrame.src.substr(0,11)){n='<script>document.domain="'+document.domain+'";<\/script>'}const r="<html><body>"+n+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(r),this.myIFrame.doc.close()}catch(Tw){ol("frame writing exception"),Tw.stack&&ol(Tw.stack),ol(Tw)}}}static createIFrame_(){const e=document.createElement("iframe");if(e.style.display="none",!document.body)throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";document.body.appendChild(e);try{e.contentWindow.document||ol("No IE domain setting required")}catch(Tw){const n=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+n+"';document.close();})())"}return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.textContent="",setTimeout((()=>{null!==this.myIFrame&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)}),Math.floor(0)));const e=this.onDisconnect;e&&(this.onDisconnect=null,e())}startLongPoll(e,t){for(this.myID=e,this.myPW=t,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const e={};e.id=this.myID,e.pw=this.myPW,e.ser=this.currentSerial;let t=this.urlFn(e),n="",r=0;for(;this.pendingSegs.length>0;){if(!(this.pendingSegs[0].d.length+30+n.length<=1870))break;{const e=this.pendingSegs.shift();n=n+"&seg"+r+"="+e.seg+"&ts"+r+"="+e.ts+"&d"+r+"="+e.d,r++}}return t+=n,this.addLongPollTag_(t,this.currentSerial),!0}return!1}enqueueSegment(e,t,n){this.pendingSegs.push({seg:e,ts:t,d:n}),this.alive&&this.newRequest_()}addLongPollTag_(e,t){this.outstandingRequests.add(t);const n=()=>{this.outstandingRequests.delete(t),this.newRequest_()},r=setTimeout(n,Math.floor(25e3));this.addTag(e,(()=>{clearTimeout(r),n()}))}addTag(e,t){ze()?this.doNodeLongPoll(e,t):setTimeout((()=>{try{if(!this.sendNewPolls)return;const n=this.myIFrame.doc.createElement("script");n.type="text/javascript",n.async=!0,n.src=e,n.onload=n.onreadystatechange=function(){const e=n.readyState;e&&"loaded"!==e&&"complete"!==e||(n.onload=n.onreadystatechange=null,n.parentNode&&n.parentNode.removeChild(n),t())},n.onerror=()=>{ol("Long-poll script failed to load: "+e),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(n)}catch(Tw){}}),Math.floor(1))}}let ql=null;"undefined"!==typeof MozWebSocket?ql=MozWebSocket:"undefined"!==typeof WebSocket&&(ql=WebSocket);class Hl{constructor(e,t,n,r,i,s,a){this.connId=e,this.applicationId=n,this.appCheckToken=r,this.authToken=i,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=ll(this.connId),this.stats_=Ul(t),this.connURL=Hl.connectionURL_(t,s,a,r,n),this.nodeAdmin=t.nodeAdmin}static connectionURL_(e,t,n,r,i){const s={};return s.v=Tl,!ze()&&"undefined"!==typeof location&&location.hostname&&Fl.test(location.hostname)&&(s.r="f"),t&&(s.s=t),n&&(s.ls=n),r&&(s[Il]=r),i&&(s.p=i),Dl(e,Rl,s)}open(e,t){this.onDisconnect=t,this.onMessage=e,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,$o.set("previous_websocket_failure",!0);try{let e;if(ze()){const t=this.nodeAdmin?"AdminNode":"Node";e={headers:{"User-Agent":"Firebase/".concat(Tl,"/").concat(Ko,"/").concat(process.platform,"/").concat(t),"X-Firebase-GMPID":this.applicationId||""}},this.authToken&&(e.headers.Authorization="Bearer ".concat(this.authToken)),this.appCheckToken&&(e.headers["X-Firebase-AppCheck"]=this.appCheckToken);const n={NODE_ENV:"production",PUBLIC_URL:"/read-pdf-by-page",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_FIREBASE_API_KEY:"AIzaSyBKA2ype48tLbkfy_qV29amJ_RMpONpUwg",REACT_APP_FIREBASE_APP_ID:"1:564116137461:web:e8247258126be9fb612cbc",REACT_APP_FIREBASE_AUTH_DOMAIN:"read-pdf-by-page.firebaseapp.com",REACT_APP_FIREBASE_MESSAGING_SENDER_ID:"564116137461",REACT_APP_FIREBASE_PROJECT_ID:"read-pdf-by-page",REACT_APP_FIREBASE_REALTIME_REFERENCE_URL:"https://read-pdf-by-page-default-rtdb.firebaseio.com/",REACT_APP_FIREBASE_STORAGE_BUCKET:"read-pdf-by-page.appspot.com"},r=0===this.connURL.indexOf("wss://")?n.HTTPS_PROXY||n.https_proxy:n.HTTP_PROXY||n.http_proxy;r&&(e.proxy={origin:r})}this.mySock=new ql(this.connURL,[],e)}catch(Tw){this.log_("Error instantiating WebSocket.");const t=Tw.message||Tw.data;return t&&this.log_(t),void this.onClosed_()}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=e=>{this.handleIncomingFrame(e)},this.mySock.onerror=e=>{this.log_("WebSocket error.  Closing connection.");const t=e.message||e.data;t&&this.log_(t),this.onClosed_()}}start(){}static forceDisallow(){Hl.forceDisallow_=!0}static isAvailable(){let e=!1;if("undefined"!==typeof navigator&&navigator.userAgent){const t=/Android ([0-9]{0,}\.[0-9]{0,})/,n=navigator.userAgent.match(t);n&&n.length>1&&parseFloat(n[1])<4.4&&(e=!0)}return!e&&null!==ql&&!Hl.forceDisallow_}static previouslyFailed(){return $o.isInMemoryStorage||!0===$o.get("previous_websocket_failure")}markConnectionHealthy(){$o.remove("previous_websocket_failure")}appendFrame_(e){if(this.frames.push(e),this.frames.length===this.totalFrames){const e=this.frames.join("");this.frames=null;const t=Ke(e);this.onMessage(t)}}handleNewFrameCount_(e){this.totalFrames=e,this.frames=[]}extractFrameCount_(e){if(Se(null===this.frames,"We already have a frame buffer"),e.length<=6){const t=Number(e);if(!isNaN(t))return this.handleNewFrameCount_(t),null}return this.handleNewFrameCount_(1),e}handleIncomingFrame(e){if(null===this.mySock)return;const t=e.data;if(this.bytesReceived+=t.length,this.stats_.incrementCounter("bytes_received",t.length),this.resetKeepAlive(),null!==this.frames)this.appendFrame_(t);else{const e=this.extractFrameCount_(t);null!==e&&this.appendFrame_(e)}}send(e){this.resetKeepAlive();const t=Xe(e);this.bytesSent+=t.length,this.stats_.incrementCounter("bytes_sent",t.length);const n=yl(t,16384);n.length>1&&this.sendString_(String(n.length));for(let r=0;r<n.length;r++)this.sendString_(n[r])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval((()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()}),Math.floor(45e3))}sendString_(e){try{this.mySock.send(e)}catch(Tw){this.log_("Exception thrown from WebSocket.send():",Tw.message||Tw.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}Hl.responsesRequiredToBeHealthy=2,Hl.healthyTimeout=3e4;class Vl{constructor(e){this.initTransports_(e)}static get ALL_TRANSPORTS(){return[Wl,Hl]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}initTransports_(e){const t=Hl&&Hl.isAvailable();let n=t&&!Hl.previouslyFailed();if(e.webSocketOnly&&(t||dl("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),n=!0),n)this.transports_=[Hl];else{const e=this.transports_=[];for(const t of Vl.ALL_TRANSPORTS)t&&t.isAvailable()&&e.push(t);Vl.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}Vl.globalTransportInitialized_=!1;class Kl{constructor(e,t,n,r,i,s,a,o,l,c){this.id=e,this.repoInfo_=t,this.applicationId_=n,this.appCheckToken_=r,this.authToken_=i,this.onMessage_=s,this.onReady_=a,this.onDisconnect_=o,this.onKill_=l,this.lastSessionId=c,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=ll("c:"+this.id+":"),this.transportManager_=new Vl(t),this.log_("Connection created"),this.start_()}start_(){const e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const t=this.connReceiver_(this.conn_),n=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout((()=>{this.conn_&&this.conn_.open(t,n)}),Math.floor(0));const r=e.healthyTimeout||0;r>0&&(this.healthyTimeout_=El((()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>102400?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>10240?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))}),Math.floor(r)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(e){return t=>{e===this.conn_?this.onConnectionLost_(t):e===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(e){return t=>{2!==this.state_&&(e===this.rx_?this.onPrimaryMessageReceived_(t):e===this.secondaryConn_?this.onSecondaryMessageReceived_(t):this.log_("message on old connection"))}}sendRequest(e){const t={t:"d",d:e};this.sendData_(t)}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(e){if("t"in e){const t=e.t;"a"===t?this.upgradeIfSecondaryHealthy_():"r"===t?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),this.tx_!==this.secondaryConn_&&this.rx_!==this.secondaryConn_||this.close()):"o"===t&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(e){const t=vl("t",e),n=vl("d",e);if("c"===t)this.onSecondaryControl_(n);else{if("d"!==t)throw new Error("Unknown protocol layer: "+t);this.pendingDataMessages.push(n)}}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:"p",d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:"a",d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:"n",d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(e){const t=vl("t",e),n=vl("d",e);"c"===t?this.onControl_(n):"d"===t&&this.onDataMessage_(n)}onDataMessage_(e){this.onPrimaryResponse_(),this.onMessage_(e)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(e){const t=vl("t",e);if("d"in e){const n=e.d;if("h"===t){const e=Object.assign({},n);this.repoInfo_.isUsingEmulator&&(e.h=this.repoInfo_.host),this.onHandshake_(e)}else if("n"===t){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let e=0;e<this.pendingDataMessages.length;++e)this.onDataMessage_(this.pendingDataMessages[e]);this.pendingDataMessages=[],this.tryCleanupConnection()}else"s"===t?this.onConnectionShutdown_(n):"r"===t?this.onReset_(n):"e"===t?cl("Server Error: "+n):"o"===t?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):cl("Unknown control packet command: "+t)}}onHandshake_(e){const t=e.ts,n=e.v,r=e.h;this.sessionId=e.s,this.repoInfo_.host=r,0===this.state_&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,t),Tl!==n&&dl("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}startUpgrade_(e){this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const t=this.connReceiver_(this.secondaryConn_),n=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(t,n),El((()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())}),Math.floor(6e4))}onReset_(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,1===this.state_?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(e,t){this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(t,this.sessionId),this.onReady_=null),0===this.primaryResponsesRequired_?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):El((()=>{this.sendPingOnPrimaryIfNecessary_()}),Math.floor(5e3))}sendPingOnPrimaryIfNecessary_(){this.isHealthy_||1!==this.state_||(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:"p",d:{}}}))}onSecondaryConnectionLost_(){const e=this.secondaryConn_;this.secondaryConn_=null,this.tx_!==e&&this.rx_!==e||this.close()}onConnectionLost_(e){this.conn_=null,e||0!==this.state_?1===this.state_&&this.log_("Realtime connection lost."):(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&($o.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)),this.close()}onConnectionShutdown_(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(e){if(1!==this.state_)throw"Connection is not connected";this.tx_.send(e)}close(){2!==this.state_&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}class Xl{put(e,t,n,r){}merge(e,t,n,r){}refreshAuthToken(e){}refreshAppCheckToken(e){}onDisconnectPut(e,t,n){}onDisconnectMerge(e,t,n){}onDisconnectCancel(e,t){}reportStats(e){}}class Yl{constructor(e){this.allowedEvents_=e,this.listeners_={},Se(Array.isArray(e)&&e.length>0,"Requires a non-empty array")}trigger(e){if(Array.isArray(this.listeners_[e])){const i=[...this.listeners_[e]];for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];for(let e=0;e<i.length;e++)i[e].callback.apply(i[e].context,n)}}on(e,t,n){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:t,context:n});const r=this.getInitialEvent(e);r&&t.apply(n,r)}off(e,t,n){this.validateEventType_(e);const r=this.listeners_[e]||[];for(let i=0;i<r.length;i++)if(r[i].callback===t&&(!n||n===r[i].context))return void r.splice(i,1)}validateEventType_(e){Se(this.allowedEvents_.find((t=>t===e)),"Unknown event: "+e)}}class Ql extends Yl{constructor(){super(["online"]),this.online_=!0,"undefined"===typeof window||"undefined"===typeof window.addEventListener||Be()||(window.addEventListener("online",(()=>{this.online_||(this.online_=!0,this.trigger("online",!0))}),!1),window.addEventListener("offline",(()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))}),!1))}static getInstance(){return new Ql}getInitialEvent(e){return Se("online"===e,"Unknown event type: "+e),[this.online_]}currentlyOnline(){return this.online_}}const Jl=32,$l=768;class Zl{constructor(e,t){if(void 0===t){this.pieces_=e.split("/");let t=0;for(let e=0;e<this.pieces_.length;e++)this.pieces_[e].length>0&&(this.pieces_[t]=this.pieces_[e],t++);this.pieces_.length=t,this.pieceNum_=0}else this.pieces_=e,this.pieceNum_=t}toString(){let e="";for(let t=this.pieceNum_;t<this.pieces_.length;t++)""!==this.pieces_[t]&&(e+="/"+this.pieces_[t]);return e||"/"}}function ec(){return new Zl("")}function tc(e){return e.pieceNum_>=e.pieces_.length?null:e.pieces_[e.pieceNum_]}function nc(e){return e.pieces_.length-e.pieceNum_}function rc(e){let t=e.pieceNum_;return t<e.pieces_.length&&t++,new Zl(e.pieces_,t)}function ic(e){return e.pieceNum_<e.pieces_.length?e.pieces_[e.pieces_.length-1]:null}function sc(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return e.pieces_.slice(e.pieceNum_+t)}function ac(e){if(e.pieceNum_>=e.pieces_.length)return null;const t=[];for(let n=e.pieceNum_;n<e.pieces_.length-1;n++)t.push(e.pieces_[n]);return new Zl(t,0)}function oc(e,t){const n=[];for(let r=e.pieceNum_;r<e.pieces_.length;r++)n.push(e.pieces_[r]);if(t instanceof Zl)for(let r=t.pieceNum_;r<t.pieces_.length;r++)n.push(t.pieces_[r]);else{const e=t.split("/");for(let t=0;t<e.length;t++)e[t].length>0&&n.push(e[t])}return new Zl(n,0)}function lc(e){return e.pieceNum_>=e.pieces_.length}function cc(e,t){const n=tc(e),r=tc(t);if(null===n)return t;if(n===r)return cc(rc(e),rc(t));throw new Error("INTERNAL ERROR: innerPath ("+t+") is not within outerPath ("+e+")")}function uc(e,t){if(nc(e)!==nc(t))return!1;for(let n=e.pieceNum_,r=t.pieceNum_;n<=e.pieces_.length;n++,r++)if(e.pieces_[n]!==t.pieces_[r])return!1;return!0}function dc(e,t){let n=e.pieceNum_,r=t.pieceNum_;if(nc(e)>nc(t))return!1;for(;n<e.pieces_.length;){if(e.pieces_[n]!==t.pieces_[r])return!1;++n,++r}return!0}class hc{constructor(e,t){this.errorPrefix_=t,this.parts_=sc(e,0),this.byteLength_=Math.max(1,this.parts_.length);for(let n=0;n<this.parts_.length;n++)this.byteLength_+=ct(this.parts_[n]);pc(this)}}function pc(e){if(e.byteLength_>$l)throw new Error(e.errorPrefix_+"has a key path longer than "+$l+" bytes ("+e.byteLength_+").");if(e.parts_.length>Jl)throw new Error(e.errorPrefix_+"path specified exceeds the maximum depth that can be written ("+Jl+") or object contains a cycle "+fc(e))}function fc(e){return 0===e.parts_.length?"":"in property '"+e.parts_.join(".")+"'"}class mc extends Yl{constructor(){let e,t;super(["visible"]),"undefined"!==typeof document&&"undefined"!==typeof document.addEventListener&&("undefined"!==typeof document.hidden?(t="visibilitychange",e="hidden"):"undefined"!==typeof document.mozHidden?(t="mozvisibilitychange",e="mozHidden"):"undefined"!==typeof document.msHidden?(t="msvisibilitychange",e="msHidden"):"undefined"!==typeof document.webkitHidden&&(t="webkitvisibilitychange",e="webkitHidden")),this.visible_=!0,t&&document.addEventListener(t,(()=>{const t=!document[e];t!==this.visible_&&(this.visible_=t,this.trigger("visible",t))}),!1)}static getInstance(){return new mc}getInitialEvent(e){return Se("visible"===e,"Unknown event type: "+e),[this.visible_]}}const gc=1e3;class vc extends Xl{constructor(e,t,n,r,i,s,a,o){if(super(),this.repoInfo_=e,this.applicationId_=t,this.onDataUpdate_=n,this.onConnectStatus_=r,this.onServerInfoUpdate_=i,this.authTokenProvider_=s,this.appCheckTokenProvider_=a,this.authOverride_=o,this.id=vc.nextPersistentConnectionId_++,this.log_=ll("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=gc,this.maxReconnectDelay_=3e5,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,o&&!ze())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");mc.getInstance().on("visible",this.onVisible_,this),-1===e.host.indexOf("fblocal")&&Ql.getInstance().on("online",this.onOnline_,this)}sendRequest(e,t,n){const r=++this.requestNumber_,i={r:r,a:e,b:t};this.log_(Xe(i)),Se(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(i),n&&(this.requestCBHash_[r]=n)}get(e){this.initConnection_();const t=new je,n={action:"g",request:{p:e._path.toString(),q:e._queryObject},onComplete:e=>{const n=e.d;"ok"===e.s?t.resolve(n):t.reject(n)}};this.outstandingGets_.push(n),this.outstandingGetCount_++;const r=this.outstandingGets_.length-1;return this.connected_&&this.sendGet_(r),t.promise}listen(e,t,n,r){this.initConnection_();const i=e._queryIdentifier,s=e._path.toString();this.log_("Listen called for "+s+" "+i),this.listens.has(s)||this.listens.set(s,new Map),Se(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"listen() called for non-default but complete query"),Se(!this.listens.get(s).has(i),"listen() called twice for same path/queryId.");const a={onComplete:r,hashFn:t,query:e,tag:n};this.listens.get(s).set(i,a),this.connected_&&this.sendListen_(a)}sendGet_(e){const t=this.outstandingGets_[e];this.sendRequest("g",t.request,(n=>{delete this.outstandingGets_[e],this.outstandingGetCount_--,0===this.outstandingGetCount_&&(this.outstandingGets_=[]),t.onComplete&&t.onComplete(n)}))}sendListen_(e){const t=e.query,n=t._path.toString(),r=t._queryIdentifier;this.log_("Listen on "+n+" for "+r);const i={p:n};e.tag&&(i.q=t._queryObject,i.t=e.tag),i.h=e.hashFn(),this.sendRequest("q",i,(i=>{const s=i.d,a=i.s;vc.warnOnListenWarnings_(s,t);(this.listens.get(n)&&this.listens.get(n).get(r))===e&&(this.log_("listen response",i),"ok"!==a&&this.removeListen_(n,r),e.onComplete&&e.onComplete(a,s))}))}static warnOnListenWarnings_(e,t){if(e&&"object"===typeof e&&Qe(e,"w")){const n=Je(e,"w");if(Array.isArray(n)&&~n.indexOf("no_index")){const e='".indexOn": "'+t._queryParams.getIndex().toString()+'"',n=t._path.toString();dl("Using an unspecified index. Your data will be downloaded and "+"filtered on the client. Consider adding ".concat(e," at ")+"".concat(n," to your security rules for better performance."))}}}refreshAuthToken(e){this.authToken_=e,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},(()=>{})),this.reduceReconnectDelayIfAdminCredential_(e)}reduceReconnectDelayIfAdminCredential_(e){(e&&40===e.length||function(e){const t=Ye(e).claims;return"object"===typeof t&&!0===t.admin}(e))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=3e4)}refreshAppCheckToken(e){this.appCheckToken_=e,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},(()=>{}))}tryAuth(){if(this.connected_&&this.authToken_){const e=this.authToken_,t=function(e){const t=Ye(e).claims;return!!t&&"object"===typeof t&&t.hasOwnProperty("iat")}(e)?"auth":"gauth",n={cred:e};null===this.authOverride_?n.noauth=!0:"object"===typeof this.authOverride_&&(n.authvar=this.authOverride_),this.sendRequest(t,n,(t=>{const n=t.s,r=t.d||"error";this.authToken_===e&&("ok"===n?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(n,r))}))}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},(e=>{const t=e.s,n=e.d||"error";"ok"===t?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(t,n)}))}unlisten(e,t){const n=e._path.toString(),r=e._queryIdentifier;this.log_("Unlisten called for "+n+" "+r),Se(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"unlisten() called for non-default but complete query");this.removeListen_(n,r)&&this.connected_&&this.sendUnlisten_(n,r,e._queryObject,t)}sendUnlisten_(e,t,n,r){this.log_("Unlisten on "+e+" for "+t);const i={p:e};r&&(i.q=n,i.t=r),this.sendRequest("n",i)}onDisconnectPut(e,t,n){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",e,t,n):this.onDisconnectRequestQueue_.push({pathString:e,action:"o",data:t,onComplete:n})}onDisconnectMerge(e,t,n){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",e,t,n):this.onDisconnectRequestQueue_.push({pathString:e,action:"om",data:t,onComplete:n})}onDisconnectCancel(e,t){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",e,null,t):this.onDisconnectRequestQueue_.push({pathString:e,action:"oc",data:null,onComplete:t})}sendOnDisconnect_(e,t,n,r){const i={p:t,d:n};this.log_("onDisconnect "+e,i),this.sendRequest(e,i,(e=>{r&&setTimeout((()=>{r(e.s,e.d)}),Math.floor(0))}))}put(e,t,n,r){this.putInternal("p",e,t,n,r)}merge(e,t,n,r){this.putInternal("m",e,t,n,r)}putInternal(e,t,n,r,i){this.initConnection_();const s={p:t,d:n};void 0!==i&&(s.h=i),this.outstandingPuts_.push({action:e,request:s,onComplete:r}),this.outstandingPutCount_++;const a=this.outstandingPuts_.length-1;this.connected_?this.sendPut_(a):this.log_("Buffering put: "+t)}sendPut_(e){const t=this.outstandingPuts_[e].action,n=this.outstandingPuts_[e].request,r=this.outstandingPuts_[e].onComplete;this.outstandingPuts_[e].queued=this.connected_,this.sendRequest(t,n,(n=>{this.log_(t+" response",n),delete this.outstandingPuts_[e],this.outstandingPutCount_--,0===this.outstandingPutCount_&&(this.outstandingPuts_=[]),r&&r(n.s,n.d)}))}reportStats(e){if(this.connected_){const t={c:e};this.log_("reportStats",t),this.sendRequest("s",t,(e=>{if("ok"!==e.s){const t=e.d;this.log_("reportStats","Error sending stats: "+t)}}))}}onDataMessage_(e){if("r"in e){this.log_("from server: "+Xe(e));const t=e.r,n=this.requestCBHash_[t];n&&(delete this.requestCBHash_[t],n(e.b))}else{if("error"in e)throw"A server-side error has occurred: "+e.error;"a"in e&&this.onDataPush_(e.a,e.b)}}onDataPush_(e,t){this.log_("handleServerMessage",e,t),"d"===e?this.onDataUpdate_(t.p,t.d,!1,t.t):"m"===e?this.onDataUpdate_(t.p,t.d,!0,t.t):"c"===e?this.onListenRevoked_(t.p,t.q):"ac"===e?this.onAuthRevoked_(t.s,t.d):"apc"===e?this.onAppCheckRevoked_(t.s,t.d):"sd"===e?this.onSecurityDebugPacket_(t):cl("Unrecognized action received from server: "+Xe(e)+"\nAre you using the latest client?")}onReady_(e,t){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=(new Date).getTime(),this.handleTimestamp_(e),this.lastSessionId=t,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(e){Se(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout((()=>{this.establishConnectionTimer_=null,this.establishConnection_()}),Math.floor(e))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(e){e&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=gc,this.realtime_||this.scheduleConnect_(0)),this.visible_=e}onOnline_(e){e?(this.log_("Browser went online."),this.reconnectDelay_=gc,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){if(this.visible_){if(this.lastConnectionEstablishedTime_){(new Date).getTime()-this.lastConnectionEstablishedTime_>3e4&&(this.reconnectDelay_=gc),this.lastConnectionEstablishedTime_=null}}else this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=(new Date).getTime();const e=(new Date).getTime()-this.lastConnectionAttemptTime_;let t=Math.max(0,this.reconnectDelay_-e);t=Math.random()*t,this.log_("Trying to reconnect in "+t+"ms"),this.scheduleConnect_(t),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,1.3*this.reconnectDelay_)}this.onConnectStatus_(!1)}async establishConnection_(){if(this.shouldReconnect_()){this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=(new Date).getTime(),this.lastConnectionEstablishedTime_=null;const e=this.onDataMessage_.bind(this),t=this.onReady_.bind(this),n=this.onRealtimeDisconnect_.bind(this),r=this.id+":"+vc.nextConnectionId_++,i=this.lastSessionId;let s=!1,a=null;const o=function(){a?a.close():(s=!0,n())},l=function(e){Se(a,"sendRequest call when we're not connected not allowed."),a.sendRequest(e)};this.realtime_={close:o,sendRequest:l};const c=this.forceTokenRefresh_;this.forceTokenRefresh_=!1;try{const[o,l]=await Promise.all([this.authTokenProvider_.getToken(c),this.appCheckTokenProvider_.getToken(c)]);s?ol("getToken() completed but was canceled"):(ol("getToken() completed. Creating connection."),this.authToken_=o&&o.accessToken,this.appCheckToken_=l&&l.token,a=new Kl(r,this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,e,t,n,(e=>{dl(e+" ("+this.repoInfo_.toString()+")"),this.interrupt("server_kill")}),i))}catch(cl){this.log_("Failed to get token: "+cl),s||(this.repoInfo_.nodeAdmin&&dl(cl),o())}}}interrupt(e){ol("Interrupting connection for reason: "+e),this.interruptReasons_[e]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(e){ol("Resuming connection for reason: "+e),delete this.interruptReasons_[e],$e(this.interruptReasons_)&&(this.reconnectDelay_=gc,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(e){const t=e-(new Date).getTime();this.onServerInfoUpdate_({serverTimeOffset:t})}cancelSentTransactions_(){for(let e=0;e<this.outstandingPuts_.length;e++){const t=this.outstandingPuts_[e];t&&"h"in t.request&&t.queued&&(t.onComplete&&t.onComplete("disconnect"),delete this.outstandingPuts_[e],this.outstandingPutCount_--)}0===this.outstandingPutCount_&&(this.outstandingPuts_=[])}onListenRevoked_(e,t){let n;n=t?t.map((e=>_l(e))).join("$"):"default";const r=this.removeListen_(e,n);r&&r.onComplete&&r.onComplete("permission_denied")}removeListen_(e,t){const n=new Zl(e).toString();let r;if(this.listens.has(n)){const e=this.listens.get(n);r=e.get(t),e.delete(t),0===e.size&&this.listens.delete(n)}else r=void 0;return r}onAuthRevoked_(e,t){ol("Auth token revoked: "+e+"/"+t),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),"invalid_token"!==e&&"permission_denied"!==e||(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=3&&(this.reconnectDelay_=3e4,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(e,t){ol("App check token revoked: "+e+"/"+t),this.appCheckToken_=null,this.forceTokenRefresh_=!0,"invalid_token"!==e&&"permission_denied"!==e||(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=3&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(e){this.securityDebugCallback_?this.securityDebugCallback_(e):"msg"in e&&console.log("FIREBASE: "+e.msg.replace("\n","\nFIREBASE: "))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const e of this.listens.values())for(const t of e.values())this.sendListen_(t);for(let e=0;e<this.outstandingPuts_.length;e++)this.outstandingPuts_[e]&&this.sendPut_(e);for(;this.onDisconnectRequestQueue_.length;){const e=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(e.action,e.pathString,e.data,e.onComplete)}for(let e=0;e<this.outstandingGets_.length;e++)this.outstandingGets_[e]&&this.sendGet_(e)}sendConnectStats_(){const e={};let t="js";ze()&&(t=this.repoInfo_.nodeAdmin?"admin_node":"node"),e["sdk."+t+"."+Ko.replace(/\./g,"-")]=1,Be()?e["framework.cordova"]=1:We()&&(e["framework.reactnative"]=1),this.reportStats(e)}shouldReconnect_(){const e=Ql.getInstance().currentlyOnline();return $e(this.interruptReasons_)&&e}}vc.nextPersistentConnectionId_=0,vc.nextConnectionId_=0;class _c{constructor(e,t){this.name=e,this.node=t}static Wrap(e,t){return new _c(e,t)}}class yc{getCompare(){return this.compare.bind(this)}indexedValueChanged(e,t){const n=new _c(pl,e),r=new _c(pl,t);return 0!==this.compare(n,r)}minPost(){return _c.MIN}}let bc;class wc extends yc{static get __EMPTY_NODE(){return bc}static set __EMPTY_NODE(e){bc=e}compare(e,t){return ml(e.name,t.name)}isDefinedOn(e){throw Pe("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(e,t){return!1}minPost(){return _c.MIN}maxPost(){return new _c(fl,bc)}makePost(e,t){return Se("string"===typeof e,"KeyIndex indexValue must always be a string."),new _c(e,bc)}toString(){return".key"}}const Sc=new wc;class Pc{constructor(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null;this.isReverse_=r,this.resultGenerator_=i,this.nodeStack_=[];let s=1;for(;!e.isEmpty();)if(s=t?n(e.key,t):1,r&&(s*=-1),s<0)e=this.isReverse_?e.left:e.right;else{if(0===s){this.nodeStack_.push(e);break}this.nodeStack_.push(e),e=this.isReverse_?e.right:e.left}}getNext(){if(0===this.nodeStack_.length)return null;let e,t=this.nodeStack_.pop();if(e=this.resultGenerator_?this.resultGenerator_(t.key,t.value):{key:t.key,value:t.value},this.isReverse_)for(t=t.left;!t.isEmpty();)this.nodeStack_.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack_.push(t),t=t.left;return e}hasNext(){return this.nodeStack_.length>0}peek(){if(0===this.nodeStack_.length)return null;const e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}}class Cc{constructor(e,t,n,r,i){this.key=e,this.value=t,this.color=null!=n?n:Cc.RED,this.left=null!=r?r:Ec.EMPTY_NODE,this.right=null!=i?i:Ec.EMPTY_NODE}copy(e,t,n,r,i){return new Cc(null!=e?e:this.key,null!=t?t:this.value,null!=n?n:this.color,null!=r?r:this.left,null!=i?i:this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||!!e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,n){let r=this;const i=n(e,r.key);return r=i<0?r.copy(null,null,null,r.left.insert(e,t,n),null):0===i?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,n)),r.fixUp_()}removeMin_(){if(this.left.isEmpty())return Ec.EMPTY_NODE;let e=this;return e.left.isRed_()||e.left.left.isRed_()||(e=e.moveRedLeft_()),e=e.copy(null,null,null,e.left.removeMin_(),null),e.fixUp_()}remove(e,t){let n,r;if(n=this,t(e,n.key)<0)n.left.isEmpty()||n.left.isRed_()||n.left.left.isRed_()||(n=n.moveRedLeft_()),n=n.copy(null,null,null,n.left.remove(e,t),null);else{if(n.left.isRed_()&&(n=n.rotateRight_()),n.right.isEmpty()||n.right.isRed_()||n.right.left.isRed_()||(n=n.moveRedRight_()),0===t(e,n.key)){if(n.right.isEmpty())return Ec.EMPTY_NODE;r=n.right.min_(),n=n.copy(r.key,r.value,null,null,n.right.removeMin_())}n=n.copy(null,null,null,null,n.right.remove(e,t))}return n.fixUp_()}isRed_(){return this.color}fixUp_(){let e=this;return e.right.isRed_()&&!e.left.isRed_()&&(e=e.rotateLeft_()),e.left.isRed_()&&e.left.left.isRed_()&&(e=e.rotateRight_()),e.left.isRed_()&&e.right.isRed_()&&(e=e.colorFlip_()),e}moveRedLeft_(){let e=this.colorFlip_();return e.right.left.isRed_()&&(e=e.copy(null,null,null,null,e.right.rotateRight_()),e=e.rotateLeft_(),e=e.colorFlip_()),e}moveRedRight_(){let e=this.colorFlip_();return e.left.left.isRed_()&&(e=e.rotateRight_(),e=e.colorFlip_()),e}rotateLeft_(){const e=this.copy(null,null,Cc.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight_(){const e=this.copy(null,null,Cc.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip_(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth_(){const e=this.check_();return Math.pow(2,e)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const e=this.left.check_();if(e!==this.right.check_())throw new Error("Black depths differ");return e+(this.isRed_()?0:1)}}Cc.RED=!0,Cc.BLACK=!1;class Ec{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Ec.EMPTY_NODE;this.comparator_=e,this.root_=t}insert(e,t){return new Ec(this.comparator_,this.root_.insert(e,t,this.comparator_).copy(null,null,Cc.BLACK,null,null))}remove(e){return new Ec(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,Cc.BLACK,null,null))}get(e){let t,n=this.root_;for(;!n.isEmpty();){if(t=this.comparator_(e,n.key),0===t)return n.value;t<0?n=n.left:t>0&&(n=n.right)}return null}getPredecessorKey(e){let t,n=this.root_,r=null;for(;!n.isEmpty();){if(t=this.comparator_(e,n.key),0===t){if(n.left.isEmpty())return r?r.key:null;for(n=n.left;!n.right.isEmpty();)n=n.right;return n.key}t<0?n=n.left:t>0&&(r=n,n=n.right)}throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(e){return this.root_.inorderTraversal(e)}reverseTraversal(e){return this.root_.reverseTraversal(e)}getIterator(e){return new Pc(this.root_,null,this.comparator_,!1,e)}getIteratorFrom(e,t){return new Pc(this.root_,e,this.comparator_,!1,t)}getReverseIteratorFrom(e,t){return new Pc(this.root_,e,this.comparator_,!0,t)}getReverseIterator(e){return new Pc(this.root_,null,this.comparator_,!0,e)}}function xc(e,t){return ml(e.name,t.name)}function kc(e,t){return ml(e,t)}let Ac;Ec.EMPTY_NODE=new class{copy(e,t,n,r,i){return this}insert(e,t,n){return new Cc(e,t,null)}remove(e,t){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}};const Tc=function(e){return"number"===typeof e?"number:"+wl(e):"string:"+e},Fc=function(e){if(e.isLeafNode()){const t=e.val();Se("string"===typeof t||"number"===typeof t||"object"===typeof t&&Qe(t,".sv"),"Priority must be a string or number.")}else Se(e===Ac||e.isEmpty(),"priority of unexpected type.");Se(e===Ac||e.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};let Ic,Rc,Mc;class Nc{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Nc.__childrenNodeConstructor.EMPTY_NODE;this.value_=e,this.priorityNode_=t,this.lazyHash_=null,Se(void 0!==this.value_&&null!==this.value_,"LeafNode shouldn't be created with null/undefined value."),Fc(this.priorityNode_)}static set __childrenNodeConstructor(e){Ic=e}static get __childrenNodeConstructor(){return Ic}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(e){return new Nc(this.value_,e)}getImmediateChild(e){return".priority"===e?this.priorityNode_:Nc.__childrenNodeConstructor.EMPTY_NODE}getChild(e){return lc(e)?this:".priority"===tc(e)?this.priorityNode_:Nc.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(e,t){return null}updateImmediateChild(e,t){return".priority"===e?this.updatePriority(t):t.isEmpty()&&".priority"!==e?this:Nc.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(e,t).updatePriority(this.priorityNode_)}updateChild(e,t){const n=tc(e);return null===n?t:t.isEmpty()&&".priority"!==n?this:(Se(".priority"!==n||1===nc(e),".priority must be the last token in a path"),this.updateImmediateChild(n,Nc.__childrenNodeConstructor.EMPTY_NODE.updateChild(rc(e),t)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(e,t){return!1}val(e){return e&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(null===this.lazyHash_){let e="";this.priorityNode_.isEmpty()||(e+="priority:"+Tc(this.priorityNode_.val())+":");const t=typeof this.value_;e+=t+":",e+="number"===t?wl(this.value_):this.value_,this.lazyHash_=nl(e)}return this.lazyHash_}getValue(){return this.value_}compareTo(e){return e===Nc.__childrenNodeConstructor.EMPTY_NODE?1:e instanceof Nc.__childrenNodeConstructor?-1:(Se(e.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(e))}compareToLeafNode_(e){const t=typeof e.value_,n=typeof this.value_,r=Nc.VALUE_TYPE_ORDER.indexOf(t),i=Nc.VALUE_TYPE_ORDER.indexOf(n);return Se(r>=0,"Unknown leaf type: "+t),Se(i>=0,"Unknown leaf type: "+n),r===i?"object"===n?0:this.value_<e.value_?-1:this.value_===e.value_?0:1:i-r}withIndex(){return this}isIndexed(){return!0}equals(e){if(e===this)return!0;if(e.isLeafNode()){const t=e;return this.value_===t.value_&&this.priorityNode_.equals(t.priorityNode_)}return!1}}Nc.VALUE_TYPE_ORDER=["object","boolean","number","string"];const Dc=new class extends yc{compare(e,t){const n=e.node.getPriority(),r=t.node.getPriority(),i=n.compareTo(r);return 0===i?ml(e.name,t.name):i}isDefinedOn(e){return!e.getPriority().isEmpty()}indexedValueChanged(e,t){return!e.getPriority().equals(t.getPriority())}minPost(){return _c.MIN}maxPost(){return new _c(fl,new Nc("[PRIORITY-POST]",Mc))}makePost(e,t){const n=Rc(e);return new _c(t,new Nc("[PRIORITY-POST]",n))}toString(){return".priority"}},Oc=Math.log(2);class Lc{constructor(e){var t;this.count=(t=e+1,parseInt(Math.log(t)/Oc,10)),this.current_=this.count-1;const n=(r=this.count,parseInt(Array(r+1).join("1"),2));var r;this.bits_=e+1&n}nextBitIsOne(){const e=!(this.bits_&1<<this.current_);return this.current_--,e}}const jc=function(e,t,n,r){e.sort(t);const i=function(t,r){const s=r-t;let a,o;if(0===s)return null;if(1===s)return a=e[t],o=n?n(a):a,new Cc(o,a.node,Cc.BLACK,null,null);{const l=parseInt(s/2,10)+t,c=i(t,l),u=i(l+1,r);return a=e[l],o=n?n(a):a,new Cc(o,a.node,Cc.BLACK,c,u)}},s=function(t){let r=null,s=null,a=e.length;const o=function(t,r){const s=a-t,o=a;a-=t;const c=i(s+1,o),u=e[s],d=n?n(u):u;l(new Cc(d,u.node,r,null,c))},l=function(e){r?(r.left=e,r=e):(s=e,r=e)};for(let e=0;e<t.count;++e){const n=t.nextBitIsOne(),r=Math.pow(2,t.count-(e+1));n?o(r,Cc.BLACK):(o(r,Cc.BLACK),o(r,Cc.RED))}return s}(new Lc(e.length));return new Ec(r||t,s)};let Uc;const Gc={};class Bc{constructor(e,t){this.indexes_=e,this.indexSet_=t}static get Default(){return Se(Gc&&Dc,"ChildrenNode.ts has not been loaded"),Uc=Uc||new Bc({".priority":Gc},{".priority":Dc}),Uc}get(e){const t=Je(this.indexes_,e);if(!t)throw new Error("No index defined for "+e);return t instanceof Ec?t:null}hasIndex(e){return Qe(this.indexSet_,e.toString())}addIndex(e,t){Se(e!==Sc,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const n=[];let r=!1;const i=t.getIterator(_c.Wrap);let s,a=i.getNext();for(;a;)r=r||e.isDefinedOn(a.node),n.push(a),a=i.getNext();s=r?jc(n,e.getCompare()):Gc;const o=e.toString(),l=Object.assign({},this.indexSet_);l[o]=e;const c=Object.assign({},this.indexes_);return c[o]=s,new Bc(c,l)}addToIndexes(e,t){const n=Ze(this.indexes_,((n,r)=>{const i=Je(this.indexSet_,r);if(Se(i,"Missing index implementation for "+r),n===Gc){if(i.isDefinedOn(e.node)){const n=[],r=t.getIterator(_c.Wrap);let s=r.getNext();for(;s;)s.name!==e.name&&n.push(s),s=r.getNext();return n.push(e),jc(n,i.getCompare())}return Gc}{const r=t.get(e.name);let i=n;return r&&(i=i.remove(new _c(e.name,r))),i.insert(e,e.node)}}));return new Bc(n,this.indexSet_)}removeFromIndexes(e,t){const n=Ze(this.indexes_,(n=>{if(n===Gc)return n;{const r=t.get(e.name);return r?n.remove(new _c(e.name,r)):n}}));return new Bc(n,this.indexSet_)}}let Wc;class zc{constructor(e,t,n){this.children_=e,this.priorityNode_=t,this.indexMap_=n,this.lazyHash_=null,this.priorityNode_&&Fc(this.priorityNode_),this.children_.isEmpty()&&Se(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}static get EMPTY_NODE(){return Wc||(Wc=new zc(new Ec(kc),null,Bc.Default))}isLeafNode(){return!1}getPriority(){return this.priorityNode_||Wc}updatePriority(e){return this.children_.isEmpty()?this:new zc(this.children_,e,this.indexMap_)}getImmediateChild(e){if(".priority"===e)return this.getPriority();{const t=this.children_.get(e);return null===t?Wc:t}}getChild(e){const t=tc(e);return null===t?this:this.getImmediateChild(t).getChild(rc(e))}hasChild(e){return null!==this.children_.get(e)}updateImmediateChild(e,t){if(Se(t,"We should always be passing snapshot nodes"),".priority"===e)return this.updatePriority(t);{const n=new _c(e,t);let r,i;t.isEmpty()?(r=this.children_.remove(e),i=this.indexMap_.removeFromIndexes(n,this.children_)):(r=this.children_.insert(e,t),i=this.indexMap_.addToIndexes(n,this.children_));const s=r.isEmpty()?Wc:this.priorityNode_;return new zc(r,s,i)}}updateChild(e,t){const n=tc(e);if(null===n)return t;{Se(".priority"!==tc(e)||1===nc(e),".priority must be the last token in a path");const r=this.getImmediateChild(n).updateChild(rc(e),t);return this.updateImmediateChild(n,r)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(e){if(this.isEmpty())return null;const t={};let n=0,r=0,i=!0;if(this.forEachChild(Dc,((s,a)=>{t[s]=a.val(e),n++,i&&zc.INTEGER_REGEXP_.test(s)?r=Math.max(r,Number(s)):i=!1})),!e&&i&&r<2*n){const e=[];for(const n in t)e[n]=t[n];return e}return e&&!this.getPriority().isEmpty()&&(t[".priority"]=this.getPriority().val()),t}hash(){if(null===this.lazyHash_){let e="";this.getPriority().isEmpty()||(e+="priority:"+Tc(this.getPriority().val())+":"),this.forEachChild(Dc,((t,n)=>{const r=n.hash();""!==r&&(e+=":"+t+":"+r)})),this.lazyHash_=""===e?"":nl(e)}return this.lazyHash_}getPredecessorChildName(e,t,n){const r=this.resolveIndex_(n);if(r){const n=r.getPredecessorKey(new _c(e,t));return n?n.name:null}return this.children_.getPredecessorKey(e)}getFirstChildName(e){const t=this.resolveIndex_(e);if(t){const e=t.minKey();return e&&e.name}return this.children_.minKey()}getFirstChild(e){const t=this.getFirstChildName(e);return t?new _c(t,this.children_.get(t)):null}getLastChildName(e){const t=this.resolveIndex_(e);if(t){const e=t.maxKey();return e&&e.name}return this.children_.maxKey()}getLastChild(e){const t=this.getLastChildName(e);return t?new _c(t,this.children_.get(t)):null}forEachChild(e,t){const n=this.resolveIndex_(e);return n?n.inorderTraversal((e=>t(e.name,e.node))):this.children_.inorderTraversal(t)}getIterator(e){return this.getIteratorFrom(e.minPost(),e)}getIteratorFrom(e,t){const n=this.resolveIndex_(t);if(n)return n.getIteratorFrom(e,(e=>e));{const n=this.children_.getIteratorFrom(e.name,_c.Wrap);let r=n.peek();for(;null!=r&&t.compare(r,e)<0;)n.getNext(),r=n.peek();return n}}getReverseIterator(e){return this.getReverseIteratorFrom(e.maxPost(),e)}getReverseIteratorFrom(e,t){const n=this.resolveIndex_(t);if(n)return n.getReverseIteratorFrom(e,(e=>e));{const n=this.children_.getReverseIteratorFrom(e.name,_c.Wrap);let r=n.peek();for(;null!=r&&t.compare(r,e)>0;)n.getNext(),r=n.peek();return n}}compareTo(e){return this.isEmpty()?e.isEmpty()?0:-1:e.isLeafNode()||e.isEmpty()?1:e===qc?-1:0}withIndex(e){if(e===Sc||this.indexMap_.hasIndex(e))return this;{const t=this.indexMap_.addIndex(e,this.children_);return new zc(this.children_,this.priorityNode_,t)}}isIndexed(e){return e===Sc||this.indexMap_.hasIndex(e)}equals(e){if(e===this)return!0;if(e.isLeafNode())return!1;{const t=e;if(this.getPriority().equals(t.getPriority())){if(this.children_.count()===t.children_.count()){const e=this.getIterator(Dc),n=t.getIterator(Dc);let r=e.getNext(),i=n.getNext();for(;r&&i;){if(r.name!==i.name||!r.node.equals(i.node))return!1;r=e.getNext(),i=n.getNext()}return null===r&&null===i}return!1}return!1}}resolveIndex_(e){return e===Sc?null:this.indexMap_.get(e.toString())}}zc.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/;const qc=new class extends zc{constructor(){super(new Ec(kc),zc.EMPTY_NODE,Bc.Default)}compareTo(e){return e===this?0:1}equals(e){return e===this}getPriority(){return this}getImmediateChild(e){return zc.EMPTY_NODE}isEmpty(){return!1}};Object.defineProperties(_c,{MIN:{value:new _c(pl,zc.EMPTY_NODE)},MAX:{value:new _c(fl,qc)}}),wc.__EMPTY_NODE=zc.EMPTY_NODE,Nc.__childrenNodeConstructor=zc,Ac=qc,function(e){Mc=e}(qc);const Hc=!0;function Vc(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(null===e)return zc.EMPTY_NODE;if("object"===typeof e&&".priority"in e&&(t=e[".priority"]),Se(null===t||"string"===typeof t||"number"===typeof t||"object"===typeof t&&".sv"in t,"Invalid priority type found: "+typeof t),"object"===typeof e&&".value"in e&&null!==e[".value"]&&(e=e[".value"]),"object"!==typeof e||".sv"in e){return new Nc(e,Vc(t))}if(e instanceof Array||!Hc){let n=zc.EMPTY_NODE;return bl(e,((t,r)=>{if(Qe(e,t)&&"."!==t.substring(0,1)){const e=Vc(r);!e.isLeafNode()&&e.isEmpty()||(n=n.updateImmediateChild(t,e))}})),n.updatePriority(Vc(t))}{const n=[];let r=!1;if(bl(e,((e,t)=>{if("."!==e.substring(0,1)){const i=Vc(t);i.isEmpty()||(r=r||!i.getPriority().isEmpty(),n.push(new _c(e,i)))}})),0===n.length)return zc.EMPTY_NODE;const i=jc(n,xc,(e=>e.name),kc);if(r){const e=jc(n,Dc.getCompare());return new zc(i,Vc(t),new Bc({".priority":e},{".priority":Dc}))}return new zc(i,Vc(t),Bc.Default)}}!function(e){Rc=e}(Vc);class Kc extends yc{constructor(e){super(),this.indexPath_=e,Se(!lc(e)&&".priority"!==tc(e),"Can't create PathIndex with empty path or .priority key")}extractChild(e){return e.getChild(this.indexPath_)}isDefinedOn(e){return!e.getChild(this.indexPath_).isEmpty()}compare(e,t){const n=this.extractChild(e.node),r=this.extractChild(t.node),i=n.compareTo(r);return 0===i?ml(e.name,t.name):i}makePost(e,t){const n=Vc(e),r=zc.EMPTY_NODE.updateChild(this.indexPath_,n);return new _c(t,r)}maxPost(){const e=zc.EMPTY_NODE.updateChild(this.indexPath_,qc);return new _c(fl,e)}toString(){return sc(this.indexPath_,0).join("/")}}const Xc=new class extends yc{compare(e,t){const n=e.node.compareTo(t.node);return 0===n?ml(e.name,t.name):n}isDefinedOn(e){return!0}indexedValueChanged(e,t){return!e.equals(t)}minPost(){return _c.MIN}maxPost(){return _c.MAX}makePost(e,t){const n=Vc(e);return new _c(t,n)}toString(){return".value"}};function Yc(e){return{type:"value",snapshotNode:e}}function Qc(e,t){return{type:"child_added",snapshotNode:t,childName:e}}function Jc(e,t){return{type:"child_removed",snapshotNode:t,childName:e}}function $c(e,t,n){return{type:"child_changed",snapshotNode:t,childName:e,oldSnap:n}}class Zc{constructor(e){this.index_=e}updateChild(e,t,n,r,i,s){Se(e.isIndexed(this.index_),"A node must be indexed if only a child is updated");const a=e.getImmediateChild(t);return a.getChild(r).equals(n.getChild(r))&&a.isEmpty()===n.isEmpty()?e:(null!=s&&(n.isEmpty()?e.hasChild(t)?s.trackChildChange(Jc(t,a)):Se(e.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):a.isEmpty()?s.trackChildChange(Qc(t,n)):s.trackChildChange($c(t,n,a))),e.isLeafNode()&&n.isEmpty()?e:e.updateImmediateChild(t,n).withIndex(this.index_))}updateFullNode(e,t,n){return null!=n&&(e.isLeafNode()||e.forEachChild(Dc,((e,r)=>{t.hasChild(e)||n.trackChildChange(Jc(e,r))})),t.isLeafNode()||t.forEachChild(Dc,((t,r)=>{if(e.hasChild(t)){const i=e.getImmediateChild(t);i.equals(r)||n.trackChildChange($c(t,r,i))}else n.trackChildChange(Qc(t,r))}))),t.withIndex(this.index_)}updatePriority(e,t){return e.isEmpty()?zc.EMPTY_NODE:e.updatePriority(t)}filtersNodes(){return!1}getIndexedFilter(){return this}getIndex(){return this.index_}}class eu{constructor(e){this.indexedFilter_=new Zc(e.getIndex()),this.index_=e.getIndex(),this.startPost_=eu.getStartPost_(e),this.endPost_=eu.getEndPost_(e),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}getStartPost(){return this.startPost_}getEndPost(){return this.endPost_}matches(e){const t=this.startIsInclusive_?this.index_.compare(this.getStartPost(),e)<=0:this.index_.compare(this.getStartPost(),e)<0,n=this.endIsInclusive_?this.index_.compare(e,this.getEndPost())<=0:this.index_.compare(e,this.getEndPost())<0;return t&&n}updateChild(e,t,n,r,i,s){return this.matches(new _c(t,n))||(n=zc.EMPTY_NODE),this.indexedFilter_.updateChild(e,t,n,r,i,s)}updateFullNode(e,t,n){t.isLeafNode()&&(t=zc.EMPTY_NODE);let r=t.withIndex(this.index_);r=r.updatePriority(zc.EMPTY_NODE);const i=this;return t.forEachChild(Dc,((e,t)=>{i.matches(new _c(e,t))||(r=r.updateImmediateChild(e,zc.EMPTY_NODE))})),this.indexedFilter_.updateFullNode(e,r,n)}updatePriority(e,t){return e}filtersNodes(){return!0}getIndexedFilter(){return this.indexedFilter_}getIndex(){return this.index_}static getStartPost_(e){if(e.hasStart()){const t=e.getIndexStartName();return e.getIndex().makePost(e.getIndexStartValue(),t)}return e.getIndex().minPost()}static getEndPost_(e){if(e.hasEnd()){const t=e.getIndexEndName();return e.getIndex().makePost(e.getIndexEndValue(),t)}return e.getIndex().maxPost()}}class tu{constructor(e){this.withinDirectionalStart=e=>this.reverse_?this.withinEndPost(e):this.withinStartPost(e),this.withinDirectionalEnd=e=>this.reverse_?this.withinStartPost(e):this.withinEndPost(e),this.withinStartPost=e=>{const t=this.index_.compare(this.rangedFilter_.getStartPost(),e);return this.startIsInclusive_?t<=0:t<0},this.withinEndPost=e=>{const t=this.index_.compare(e,this.rangedFilter_.getEndPost());return this.endIsInclusive_?t<=0:t<0},this.rangedFilter_=new eu(e),this.index_=e.getIndex(),this.limit_=e.getLimit(),this.reverse_=!e.isViewFromLeft(),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}updateChild(e,t,n,r,i,s){return this.rangedFilter_.matches(new _c(t,n))||(n=zc.EMPTY_NODE),e.getImmediateChild(t).equals(n)?e:e.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(e,t,n,r,i,s):this.fullLimitUpdateChild_(e,t,n,i,s)}updateFullNode(e,t,n){let r;if(t.isLeafNode()||t.isEmpty())r=zc.EMPTY_NODE.withIndex(this.index_);else if(2*this.limit_<t.numChildren()&&t.isIndexed(this.index_)){let e;r=zc.EMPTY_NODE.withIndex(this.index_),e=this.reverse_?t.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):t.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);let n=0;for(;e.hasNext()&&n<this.limit_;){const t=e.getNext();if(this.withinDirectionalStart(t)){if(!this.withinDirectionalEnd(t))break;r=r.updateImmediateChild(t.name,t.node),n++}}}else{let e;r=t.withIndex(this.index_),r=r.updatePriority(zc.EMPTY_NODE),e=this.reverse_?r.getReverseIterator(this.index_):r.getIterator(this.index_);let n=0;for(;e.hasNext();){const t=e.getNext();n<this.limit_&&this.withinDirectionalStart(t)&&this.withinDirectionalEnd(t)?n++:r=r.updateImmediateChild(t.name,zc.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(e,r,n)}updatePriority(e,t){return e}filtersNodes(){return!0}getIndexedFilter(){return this.rangedFilter_.getIndexedFilter()}getIndex(){return this.index_}fullLimitUpdateChild_(e,t,n,r,i){let s;if(this.reverse_){const e=this.index_.getCompare();s=(t,n)=>e(n,t)}else s=this.index_.getCompare();const a=e;Se(a.numChildren()===this.limit_,"");const o=new _c(t,n),l=this.reverse_?a.getFirstChild(this.index_):a.getLastChild(this.index_),c=this.rangedFilter_.matches(o);if(a.hasChild(t)){const e=a.getImmediateChild(t);let u=r.getChildAfterChild(this.index_,l,this.reverse_);for(;null!=u&&(u.name===t||a.hasChild(u.name));)u=r.getChildAfterChild(this.index_,u,this.reverse_);const d=null==u?1:s(u,o);if(c&&!n.isEmpty()&&d>=0)return null!=i&&i.trackChildChange($c(t,n,e)),a.updateImmediateChild(t,n);{null!=i&&i.trackChildChange(Jc(t,e));const n=a.updateImmediateChild(t,zc.EMPTY_NODE);return null!=u&&this.rangedFilter_.matches(u)?(null!=i&&i.trackChildChange(Qc(u.name,u.node)),n.updateImmediateChild(u.name,u.node)):n}}return n.isEmpty()?e:c&&s(l,o)>=0?(null!=i&&(i.trackChildChange(Jc(l.name,l.node)),i.trackChildChange(Qc(t,n))),a.updateImmediateChild(t,n).updateImmediateChild(l.name,zc.EMPTY_NODE)):e}}class nu{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=Dc}hasStart(){return this.startSet_}isViewFromLeft(){return""===this.viewFrom_?this.startSet_:"l"===this.viewFrom_}getIndexStartValue(){return Se(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return Se(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:pl}hasEnd(){return this.endSet_}getIndexEndValue(){return Se(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return Se(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:fl}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&""!==this.viewFrom_}getLimit(){return Se(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===Dc}copy(){const e=new nu;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.startAfterSet_=this.startAfterSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.endBeforeSet_=this.endBeforeSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e}}function ru(e){const t={};if(e.isDefault())return t;let n;if(e.index_===Dc?n="$priority":e.index_===Xc?n="$value":e.index_===Sc?n="$key":(Se(e.index_ instanceof Kc,"Unrecognized index type!"),n=e.index_.toString()),t.orderBy=Xe(n),e.startSet_){const n=e.startAfterSet_?"startAfter":"startAt";t[n]=Xe(e.indexStartValue_),e.startNameSet_&&(t[n]+=","+Xe(e.indexStartName_))}if(e.endSet_){const n=e.endBeforeSet_?"endBefore":"endAt";t[n]=Xe(e.indexEndValue_),e.endNameSet_&&(t[n]+=","+Xe(e.indexEndName_))}return e.limitSet_&&(e.isViewFromLeft()?t.limitToFirst=e.limit_:t.limitToLast=e.limit_),t}function iu(e){const t={};if(e.startSet_&&(t.sp=e.indexStartValue_,e.startNameSet_&&(t.sn=e.indexStartName_),t.sin=!e.startAfterSet_),e.endSet_&&(t.ep=e.indexEndValue_,e.endNameSet_&&(t.en=e.indexEndName_),t.ein=!e.endBeforeSet_),e.limitSet_){t.l=e.limit_;let n=e.viewFrom_;""===n&&(n=e.isViewFromLeft()?"l":"r"),t.vf=n}return e.index_!==Dc&&(t.i=e.index_.toString()),t}class su extends Xl{constructor(e,t,n,r){super(),this.repoInfo_=e,this.onDataUpdate_=t,this.authTokenProvider_=n,this.appCheckTokenProvider_=r,this.log_=ll("p:rest:"),this.listens_={}}reportStats(e){throw new Error("Method not implemented.")}static getListenId_(e,t){return void 0!==t?"tag$"+t:(Se(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())}listen(e,t,n,r){const i=e._path.toString();this.log_("Listen called for "+i+" "+e._queryIdentifier);const s=su.getListenId_(e,n),a={};this.listens_[s]=a;const o=ru(e._queryParams);this.restRequest_(i+".json",o,((e,t)=>{let o=t;if(404===e&&(o=null,e=null),null===e&&this.onDataUpdate_(i,o,!1,n),Je(this.listens_,s)===a){let t;t=e?401===e?"permission_denied":"rest_error:"+e:"ok",r(t,null)}}))}unlisten(e,t){const n=su.getListenId_(e,t);delete this.listens_[n]}get(e){const t=ru(e._queryParams),n=e._path.toString(),r=new je;return this.restRequest_(n+".json",t,((e,t)=>{let i=t;404===e&&(i=null,e=null),null===e?(this.onDataUpdate_(n,i,!1,null),r.resolve(i)):r.reject(new Error(i))})),r.promise}refreshAuthToken(e){}restRequest_(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2?arguments[2]:void 0;return t.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then((r=>{let[i,s]=r;i&&i.accessToken&&(t.auth=i.accessToken),s&&s.token&&(t.ac=s.token);const a=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+e+"?ns="+this.repoInfo_.namespace+nt(t);this.log_("Sending REST request for "+a);const o=new XMLHttpRequest;o.onreadystatechange=()=>{if(n&&4===o.readyState){this.log_("REST Response for "+a+" received. status:",o.status,"response:",o.responseText);let e=null;if(o.status>=200&&o.status<300){try{e=Ke(o.responseText)}catch(Tw){dl("Failed to parse JSON response for "+a+": "+o.responseText)}n(null,e)}else 401!==o.status&&404!==o.status&&dl("Got unsuccessful REST response for "+a+" Status: "+o.status),n(o.status);n=null}},o.open("GET",a,!0),o.send()}))}}class au{constructor(){this.rootNode_=zc.EMPTY_NODE}getNode(e){return this.rootNode_.getChild(e)}updateSnapshot(e,t){this.rootNode_=this.rootNode_.updateChild(e,t)}}function ou(){return{value:null,children:new Map}}function lu(e,t,n){if(lc(t))e.value=n,e.children.clear();else if(null!==e.value)e.value=e.value.updateChild(t,n);else{const r=tc(t);e.children.has(r)||e.children.set(r,ou());lu(e.children.get(r),t=rc(t),n)}}function cu(e,t,n){null!==e.value?n(t,e.value):function(e,t){e.children.forEach(((e,n)=>{t(n,e)}))}(e,((e,r)=>{cu(r,new Zl(t.toString()+"/"+e),n)}))}class uu{constructor(e){this.collection_=e,this.last_=null}get(){const e=this.collection_.get(),t=Object.assign({},e);return this.last_&&bl(this.last_,((e,n)=>{t[e]=t[e]-n})),this.last_=e,t}}class du{constructor(e,t){this.server_=t,this.statsToReport_={},this.statsListener_=new uu(e);const n=1e4+2e4*Math.random();El(this.reportStats_.bind(this),Math.floor(n))}reportStats_(){const e=this.statsListener_.get(),t={};let n=!1;bl(e,((e,r)=>{r>0&&Qe(this.statsToReport_,e)&&(t[e]=r,n=!0)})),n&&this.server_.reportStats(t),El(this.reportStats_.bind(this),Math.floor(2*Math.random()*3e5))}}var hu;function pu(e){return{fromUser:!1,fromServer:!0,queryId:e,tagged:!0}}!function(e){e[e.OVERWRITE=0]="OVERWRITE",e[e.MERGE=1]="MERGE",e[e.ACK_USER_WRITE=2]="ACK_USER_WRITE",e[e.LISTEN_COMPLETE=3]="LISTEN_COMPLETE"}(hu||(hu={}));class fu{constructor(e,t,n){this.path=e,this.affectedTree=t,this.revert=n,this.type=hu.ACK_USER_WRITE,this.source={fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}operationForChild(e){if(lc(this.path)){if(null!=this.affectedTree.value)return Se(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const t=this.affectedTree.subtree(new Zl(e));return new fu(ec(),t,this.revert)}}return Se(tc(this.path)===e,"operationForChild called for unrelated child."),new fu(rc(this.path),this.affectedTree,this.revert)}}class mu{constructor(e,t){this.source=e,this.path=t,this.type=hu.LISTEN_COMPLETE}operationForChild(e){return lc(this.path)?new mu(this.source,ec()):new mu(this.source,rc(this.path))}}class gu{constructor(e,t,n){this.source=e,this.path=t,this.snap=n,this.type=hu.OVERWRITE}operationForChild(e){return lc(this.path)?new gu(this.source,ec(),this.snap.getImmediateChild(e)):new gu(this.source,rc(this.path),this.snap)}}class vu{constructor(e,t,n){this.source=e,this.path=t,this.children=n,this.type=hu.MERGE}operationForChild(e){if(lc(this.path)){const t=this.children.subtree(new Zl(e));return t.isEmpty()?null:t.value?new gu(this.source,ec(),t.value):new vu(this.source,ec(),t)}return Se(tc(this.path)===e,"Can't get a merge for a child not on the path of the operation"),new vu(this.source,rc(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}class _u{constructor(e,t,n){this.node_=e,this.fullyInitialized_=t,this.filtered_=n}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(e){if(lc(e))return this.isFullyInitialized()&&!this.filtered_;const t=tc(e);return this.isCompleteForChild(t)}isCompleteForChild(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}getNode(){return this.node_}}class yu{constructor(e){this.query_=e,this.index_=this.query_._queryParams.getIndex()}}function bu(e,t,n,r,i,s){const a=r.filter((e=>e.type===n));a.sort(((t,n)=>function(e,t,n){if(null==t.childName||null==n.childName)throw Pe("Should only compare child_ events.");const r=new _c(t.childName,t.snapshotNode),i=new _c(n.childName,n.snapshotNode);return e.index_.compare(r,i)}(e,t,n))),a.forEach((n=>{const r=function(e,t,n){return"value"===t.type||"child_removed"===t.type||(t.prevName=n.getPredecessorChildName(t.childName,t.snapshotNode,e.index_)),t}(e,n,s);i.forEach((i=>{i.respondsTo(n.type)&&t.push(i.createEvent(r,e.query_))}))}))}function wu(e,t){return{eventCache:e,serverCache:t}}function Su(e,t,n,r){return wu(new _u(t,n,r),e.serverCache)}function Pu(e,t,n,r){return wu(e.eventCache,new _u(t,n,r))}function Cu(e){return e.eventCache.isFullyInitialized()?e.eventCache.getNode():null}function Eu(e){return e.serverCache.isFullyInitialized()?e.serverCache.getNode():null}let xu;class ku{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:(xu||(xu=new Ec(gl)),xu);this.value=e,this.children=t}static fromObject(e){let t=new ku(null);return bl(e,((e,n)=>{t=t.set(new Zl(e),n)})),t}isEmpty(){return null===this.value&&this.children.isEmpty()}findRootMostMatchingPathAndValue(e,t){if(null!=this.value&&t(this.value))return{path:ec(),value:this.value};if(lc(e))return null;{const n=tc(e),r=this.children.get(n);if(null!==r){const i=r.findRootMostMatchingPathAndValue(rc(e),t);if(null!=i){return{path:oc(new Zl(n),i.path),value:i.value}}return null}return null}}findRootMostValueAndPath(e){return this.findRootMostMatchingPathAndValue(e,(()=>!0))}subtree(e){if(lc(e))return this;{const t=tc(e),n=this.children.get(t);return null!==n?n.subtree(rc(e)):new ku(null)}}set(e,t){if(lc(e))return new ku(t,this.children);{const n=tc(e),r=(this.children.get(n)||new ku(null)).set(rc(e),t),i=this.children.insert(n,r);return new ku(this.value,i)}}remove(e){if(lc(e))return this.children.isEmpty()?new ku(null):new ku(null,this.children);{const t=tc(e),n=this.children.get(t);if(n){const r=n.remove(rc(e));let i;return i=r.isEmpty()?this.children.remove(t):this.children.insert(t,r),null===this.value&&i.isEmpty()?new ku(null):new ku(this.value,i)}return this}}get(e){if(lc(e))return this.value;{const t=tc(e),n=this.children.get(t);return n?n.get(rc(e)):null}}setTree(e,t){if(lc(e))return t;{const n=tc(e),r=(this.children.get(n)||new ku(null)).setTree(rc(e),t);let i;return i=r.isEmpty()?this.children.remove(n):this.children.insert(n,r),new ku(this.value,i)}}fold(e){return this.fold_(ec(),e)}fold_(e,t){const n={};return this.children.inorderTraversal(((r,i)=>{n[r]=i.fold_(oc(e,r),t)})),t(e,this.value,n)}findOnPath(e,t){return this.findOnPath_(e,ec(),t)}findOnPath_(e,t,n){const r=!!this.value&&n(t,this.value);if(r)return r;if(lc(e))return null;{const r=tc(e),i=this.children.get(r);return i?i.findOnPath_(rc(e),oc(t,r),n):null}}foreachOnPath(e,t){return this.foreachOnPath_(e,ec(),t)}foreachOnPath_(e,t,n){if(lc(e))return this;{this.value&&n(t,this.value);const r=tc(e),i=this.children.get(r);return i?i.foreachOnPath_(rc(e),oc(t,r),n):new ku(null)}}foreach(e){this.foreach_(ec(),e)}foreach_(e,t){this.children.inorderTraversal(((n,r)=>{r.foreach_(oc(e,n),t)})),this.value&&t(e,this.value)}foreachChild(e){this.children.inorderTraversal(((t,n)=>{n.value&&e(t,n.value)}))}}class Au{constructor(e){this.writeTree_=e}static empty(){return new Au(new ku(null))}}function Tu(e,t,n){if(lc(t))return new Au(new ku(n));{const r=e.writeTree_.findRootMostValueAndPath(t);if(null!=r){const i=r.path;let s=r.value;const a=cc(i,t);return s=s.updateChild(a,n),new Au(e.writeTree_.set(i,s))}{const r=new ku(n),i=e.writeTree_.setTree(t,r);return new Au(i)}}}function Fu(e,t,n){let r=e;return bl(n,((e,n)=>{r=Tu(r,oc(t,e),n)})),r}function Iu(e,t){if(lc(t))return Au.empty();{const n=e.writeTree_.setTree(t,new ku(null));return new Au(n)}}function Ru(e,t){return null!=Mu(e,t)}function Mu(e,t){const n=e.writeTree_.findRootMostValueAndPath(t);return null!=n?e.writeTree_.get(n.path).getChild(cc(n.path,t)):null}function Nu(e){const t=[],n=e.writeTree_.value;return null!=n?n.isLeafNode()||n.forEachChild(Dc,((e,n)=>{t.push(new _c(e,n))})):e.writeTree_.children.inorderTraversal(((e,n)=>{null!=n.value&&t.push(new _c(e,n.value))})),t}function Du(e,t){if(lc(t))return e;{const n=Mu(e,t);return new Au(null!=n?new ku(n):e.writeTree_.subtree(t))}}function Ou(e){return e.writeTree_.isEmpty()}function Lu(e,t){return ju(ec(),e.writeTree_,t)}function ju(e,t,n){if(null!=t.value)return n.updateChild(e,t.value);{let r=null;return t.children.inorderTraversal(((t,i)=>{".priority"===t?(Se(null!==i.value,"Priority writes must always be leaf nodes"),r=i.value):n=ju(oc(e,t),i,n)})),n.getChild(e).isEmpty()||null===r||(n=n.updateChild(oc(e,".priority"),r)),n}}function Uu(e,t){return $u(t,e)}function Gu(e,t){const n=e.allWrites.findIndex((e=>e.writeId===t));Se(n>=0,"removeWrite called with nonexistent writeId.");const r=e.allWrites[n];e.allWrites.splice(n,1);let i=r.visible,s=!1,a=e.allWrites.length-1;for(;i&&a>=0;){const t=e.allWrites[a];t.visible&&(a>=n&&Bu(t,r.path)?i=!1:dc(r.path,t.path)&&(s=!0)),a--}if(i){if(s)return function(e){e.visibleWrites=zu(e.allWrites,Wu,ec()),e.allWrites.length>0?e.lastWriteId=e.allWrites[e.allWrites.length-1].writeId:e.lastWriteId=-1}(e),!0;if(r.snap)e.visibleWrites=Iu(e.visibleWrites,r.path);else{bl(r.children,(t=>{e.visibleWrites=Iu(e.visibleWrites,oc(r.path,t))}))}return!0}return!1}function Bu(e,t){if(e.snap)return dc(e.path,t);for(const n in e.children)if(e.children.hasOwnProperty(n)&&dc(oc(e.path,n),t))return!0;return!1}function Wu(e){return e.visible}function zu(e,t,n){let r=Au.empty();for(let i=0;i<e.length;++i){const s=e[i];if(t(s)){const e=s.path;let t;if(s.snap)dc(n,e)?(t=cc(n,e),r=Tu(r,t,s.snap)):dc(e,n)&&(t=cc(e,n),r=Tu(r,ec(),s.snap.getChild(t)));else{if(!s.children)throw Pe("WriteRecord should have .snap or .children");if(dc(n,e))t=cc(n,e),r=Fu(r,t,s.children);else if(dc(e,n))if(t=cc(e,n),lc(t))r=Fu(r,ec(),s.children);else{const e=Je(s.children,tc(t));if(e){const n=e.getChild(rc(t));r=Tu(r,ec(),n)}}}}}return r}function qu(e,t,n,r,i){if(r||i){const s=Du(e.visibleWrites,t);if(!i&&Ou(s))return n;if(i||null!=n||Ru(s,ec())){const s=function(e){return(e.visible||i)&&(!r||!~r.indexOf(e.writeId))&&(dc(e.path,t)||dc(t,e.path))};return Lu(zu(e.allWrites,s,t),n||zc.EMPTY_NODE)}return null}{const r=Mu(e.visibleWrites,t);if(null!=r)return r;{const r=Du(e.visibleWrites,t);if(Ou(r))return n;if(null!=n||Ru(r,ec())){return Lu(r,n||zc.EMPTY_NODE)}return null}}}function Hu(e,t,n,r){return qu(e.writeTree,e.treePath,t,n,r)}function Vu(e,t){return function(e,t,n){let r=zc.EMPTY_NODE;const i=Mu(e.visibleWrites,t);if(i)return i.isLeafNode()||i.forEachChild(Dc,((e,t)=>{r=r.updateImmediateChild(e,t)})),r;if(n){const i=Du(e.visibleWrites,t);return n.forEachChild(Dc,((e,t)=>{const n=Lu(Du(i,new Zl(e)),t);r=r.updateImmediateChild(e,n)})),Nu(i).forEach((e=>{r=r.updateImmediateChild(e.name,e.node)})),r}return Nu(Du(e.visibleWrites,t)).forEach((e=>{r=r.updateImmediateChild(e.name,e.node)})),r}(e.writeTree,e.treePath,t)}function Ku(e,t,n,r){return function(e,t,n,r,i){Se(r||i,"Either existingEventSnap or existingServerSnap must exist");const s=oc(t,n);if(Ru(e.visibleWrites,s))return null;{const t=Du(e.visibleWrites,s);return Ou(t)?i.getChild(n):Lu(t,i.getChild(n))}}(e.writeTree,e.treePath,t,n,r)}function Xu(e,t){return function(e,t){return Mu(e.visibleWrites,t)}(e.writeTree,oc(e.treePath,t))}function Yu(e,t,n,r,i,s){return function(e,t,n,r,i,s,a){let o;const l=Du(e.visibleWrites,t),c=Mu(l,ec());if(null!=c)o=c;else{if(null==n)return[];o=Lu(l,n)}if(o=o.withIndex(a),o.isEmpty()||o.isLeafNode())return[];{const e=[],t=a.getCompare(),n=s?o.getReverseIteratorFrom(r,a):o.getIteratorFrom(r,a);let l=n.getNext();for(;l&&e.length<i;)0!==t(l,r)&&e.push(l),l=n.getNext();return e}}(e.writeTree,e.treePath,t,n,r,i,s)}function Qu(e,t,n){return function(e,t,n,r){const i=oc(t,n),s=Mu(e.visibleWrites,i);if(null!=s)return s;if(r.isCompleteForChild(n))return Lu(Du(e.visibleWrites,i),r.getNode().getImmediateChild(n));return null}(e.writeTree,e.treePath,t,n)}function Ju(e,t){return $u(oc(e.treePath,t),e.writeTree)}function $u(e,t){return{treePath:e,writeTree:t}}class Zu{constructor(){this.changeMap=new Map}trackChildChange(e){const t=e.type,n=e.childName;Se("child_added"===t||"child_changed"===t||"child_removed"===t,"Only child changes supported for tracking"),Se(".priority"!==n,"Only non-priority child changes can be tracked.");const r=this.changeMap.get(n);if(r){const i=r.type;if("child_added"===t&&"child_removed"===i)this.changeMap.set(n,$c(n,e.snapshotNode,r.snapshotNode));else if("child_removed"===t&&"child_added"===i)this.changeMap.delete(n);else if("child_removed"===t&&"child_changed"===i)this.changeMap.set(n,Jc(n,r.oldSnap));else if("child_changed"===t&&"child_added"===i)this.changeMap.set(n,Qc(n,e.snapshotNode));else{if("child_changed"!==t||"child_changed"!==i)throw Pe("Illegal combination of changes: "+e+" occurred after "+r);this.changeMap.set(n,$c(n,e.snapshotNode,r.oldSnap))}}else this.changeMap.set(n,e)}getChanges(){return Array.from(this.changeMap.values())}}const ed=new class{getCompleteChild(e){return null}getChildAfterChild(e,t,n){return null}};class td{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;this.writes_=e,this.viewCache_=t,this.optCompleteServerCache_=n}getCompleteChild(e){const t=this.viewCache_.eventCache;if(t.isCompleteForChild(e))return t.getNode().getImmediateChild(e);{const t=null!=this.optCompleteServerCache_?new _u(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return Qu(this.writes_,e,t)}}getChildAfterChild(e,t,n){const r=null!=this.optCompleteServerCache_?this.optCompleteServerCache_:Eu(this.viewCache_),i=Yu(this.writes_,r,t,1,n,e);return 0===i.length?null:i[0]}}function nd(e,t,n,r,i){const s=new Zu;let a,o;if(n.type===hu.OVERWRITE){const l=n;l.source.fromUser?a=sd(e,t,l.path,l.snap,r,i,s):(Se(l.source.fromServer,"Unknown source."),o=l.source.tagged||t.serverCache.isFiltered()&&!lc(l.path),a=id(e,t,l.path,l.snap,r,i,o,s))}else if(n.type===hu.MERGE){const l=n;l.source.fromUser?a=function(e,t,n,r,i,s,a){let o=t;return r.foreach(((r,l)=>{const c=oc(n,r);ad(t,tc(c))&&(o=sd(e,o,c,l,i,s,a))})),r.foreach(((r,l)=>{const c=oc(n,r);ad(t,tc(c))||(o=sd(e,o,c,l,i,s,a))})),o}(e,t,l.path,l.children,r,i,s):(Se(l.source.fromServer,"Unknown source."),o=l.source.tagged||t.serverCache.isFiltered(),a=ld(e,t,l.path,l.children,r,i,o,s))}else if(n.type===hu.ACK_USER_WRITE){const o=n;a=o.revert?function(e,t,n,r,i,s){let a;if(null!=Xu(r,n))return t;{const o=new td(r,t,i),l=t.eventCache.getNode();let c;if(lc(n)||".priority"===tc(n)){let n;if(t.serverCache.isFullyInitialized())n=Hu(r,Eu(t));else{const e=t.serverCache.getNode();Se(e instanceof zc,"serverChildren would be complete if leaf node"),n=Vu(r,e)}c=e.filter.updateFullNode(l,n,s)}else{const i=tc(n);let u=Qu(r,i,t.serverCache);null==u&&t.serverCache.isCompleteForChild(i)&&(u=l.getImmediateChild(i)),c=null!=u?e.filter.updateChild(l,i,u,rc(n),o,s):t.eventCache.getNode().hasChild(i)?e.filter.updateChild(l,i,zc.EMPTY_NODE,rc(n),o,s):l,c.isEmpty()&&t.serverCache.isFullyInitialized()&&(a=Hu(r,Eu(t)),a.isLeafNode()&&(c=e.filter.updateFullNode(c,a,s)))}return a=t.serverCache.isFullyInitialized()||null!=Xu(r,ec()),Su(t,c,a,e.filter.filtersNodes())}}(e,t,o.path,r,i,s):function(e,t,n,r,i,s,a){if(null!=Xu(i,n))return t;const o=t.serverCache.isFiltered(),l=t.serverCache;if(null!=r.value){if(lc(n)&&l.isFullyInitialized()||l.isCompleteForPath(n))return id(e,t,n,l.getNode().getChild(n),i,s,o,a);if(lc(n)){let r=new ku(null);return l.getNode().forEachChild(Sc,((e,t)=>{r=r.set(new Zl(e),t)})),ld(e,t,n,r,i,s,o,a)}return t}{let c=new ku(null);return r.foreach(((e,t)=>{const r=oc(n,e);l.isCompleteForPath(r)&&(c=c.set(e,l.getNode().getChild(r)))})),ld(e,t,n,c,i,s,o,a)}}(e,t,o.path,o.affectedTree,r,i,s)}else{if(n.type!==hu.LISTEN_COMPLETE)throw Pe("Unknown operation type: "+n.type);a=function(e,t,n,r,i){const s=t.serverCache,a=Pu(t,s.getNode(),s.isFullyInitialized()||lc(n),s.isFiltered());return rd(e,a,n,r,ed,i)}(e,t,n.path,r,s)}const l=s.getChanges();return function(e,t,n){const r=t.eventCache;if(r.isFullyInitialized()){const i=r.getNode().isLeafNode()||r.getNode().isEmpty(),s=Cu(e);(n.length>0||!e.eventCache.isFullyInitialized()||i&&!r.getNode().equals(s)||!r.getNode().getPriority().equals(s.getPriority()))&&n.push(Yc(Cu(t)))}}(t,a,l),{viewCache:a,changes:l}}function rd(e,t,n,r,i,s){const a=t.eventCache;if(null!=Xu(r,n))return t;{let o,l;if(lc(n))if(Se(t.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),t.serverCache.isFiltered()){const n=Eu(t),i=Vu(r,n instanceof zc?n:zc.EMPTY_NODE);o=e.filter.updateFullNode(t.eventCache.getNode(),i,s)}else{const n=Hu(r,Eu(t));o=e.filter.updateFullNode(t.eventCache.getNode(),n,s)}else{const c=tc(n);if(".priority"===c){Se(1===nc(n),"Can't have a priority with additional path components");const i=a.getNode();l=t.serverCache.getNode();const s=Ku(r,n,i,l);o=null!=s?e.filter.updatePriority(i,s):a.getNode()}else{const u=rc(n);let d;if(a.isCompleteForChild(c)){l=t.serverCache.getNode();const e=Ku(r,n,a.getNode(),l);d=null!=e?a.getNode().getImmediateChild(c).updateChild(u,e):a.getNode().getImmediateChild(c)}else d=Qu(r,c,t.serverCache);o=null!=d?e.filter.updateChild(a.getNode(),c,d,u,i,s):a.getNode()}}return Su(t,o,a.isFullyInitialized()||lc(n),e.filter.filtersNodes())}}function id(e,t,n,r,i,s,a,o){const l=t.serverCache;let c;const u=a?e.filter:e.filter.getIndexedFilter();if(lc(n))c=u.updateFullNode(l.getNode(),r,null);else if(u.filtersNodes()&&!l.isFiltered()){const e=l.getNode().updateChild(n,r);c=u.updateFullNode(l.getNode(),e,null)}else{const e=tc(n);if(!l.isCompleteForPath(n)&&nc(n)>1)return t;const i=rc(n),s=l.getNode().getImmediateChild(e).updateChild(i,r);c=".priority"===e?u.updatePriority(l.getNode(),s):u.updateChild(l.getNode(),e,s,i,ed,null)}const d=Pu(t,c,l.isFullyInitialized()||lc(n),u.filtersNodes());return rd(e,d,n,i,new td(i,d,s),o)}function sd(e,t,n,r,i,s,a){const o=t.eventCache;let l,c;const u=new td(i,t,s);if(lc(n))c=e.filter.updateFullNode(t.eventCache.getNode(),r,a),l=Su(t,c,!0,e.filter.filtersNodes());else{const i=tc(n);if(".priority"===i)c=e.filter.updatePriority(t.eventCache.getNode(),r),l=Su(t,c,o.isFullyInitialized(),o.isFiltered());else{const s=rc(n),c=o.getNode().getImmediateChild(i);let d;if(lc(s))d=r;else{const e=u.getCompleteChild(i);d=null!=e?".priority"===ic(s)&&e.getChild(ac(s)).isEmpty()?e:e.updateChild(s,r):zc.EMPTY_NODE}if(c.equals(d))l=t;else{l=Su(t,e.filter.updateChild(o.getNode(),i,d,s,u,a),o.isFullyInitialized(),e.filter.filtersNodes())}}}return l}function ad(e,t){return e.eventCache.isCompleteForChild(t)}function od(e,t,n){return n.foreach(((e,n)=>{t=t.updateChild(e,n)})),t}function ld(e,t,n,r,i,s,a,o){if(t.serverCache.getNode().isEmpty()&&!t.serverCache.isFullyInitialized())return t;let l,c=t;l=lc(n)?r:new ku(null).setTree(n,r);const u=t.serverCache.getNode();return l.children.inorderTraversal(((n,r)=>{if(u.hasChild(n)){const l=od(0,t.serverCache.getNode().getImmediateChild(n),r);c=id(e,c,new Zl(n),l,i,s,a,o)}})),l.children.inorderTraversal(((n,r)=>{const l=!t.serverCache.isCompleteForChild(n)&&null===r.value;if(!u.hasChild(n)&&!l){const l=od(0,t.serverCache.getNode().getImmediateChild(n),r);c=id(e,c,new Zl(n),l,i,s,a,o)}})),c}class cd{constructor(e,t){this.query_=e,this.eventRegistrations_=[];const n=this.query_._queryParams,r=new Zc(n.getIndex()),i=(s=n).loadsAllData()?new Zc(s.getIndex()):s.hasLimit()?new tu(s):new eu(s);var s;this.processor_=function(e){return{filter:e}}(i);const a=t.serverCache,o=t.eventCache,l=r.updateFullNode(zc.EMPTY_NODE,a.getNode(),null),c=i.updateFullNode(zc.EMPTY_NODE,o.getNode(),null),u=new _u(l,a.isFullyInitialized(),r.filtersNodes()),d=new _u(c,o.isFullyInitialized(),i.filtersNodes());this.viewCache_=wu(d,u),this.eventGenerator_=new yu(this.query_)}get query(){return this.query_}}function ud(e,t){const n=Eu(e.viewCache_);return n&&(e.query._queryParams.loadsAllData()||!lc(t)&&!n.getImmediateChild(tc(t)).isEmpty())?n.getChild(t):null}function dd(e){return 0===e.eventRegistrations_.length}function hd(e,t,n){const r=[];if(n){Se(null==t,"A cancel should cancel all event registrations.");const i=e.query._path;e.eventRegistrations_.forEach((e=>{const t=e.createCancelEvent(n,i);t&&r.push(t)}))}if(t){let n=[];for(let r=0;r<e.eventRegistrations_.length;++r){const i=e.eventRegistrations_[r];if(i.matches(t)){if(t.hasAnyCallback()){n=n.concat(e.eventRegistrations_.slice(r+1));break}}else n.push(i)}e.eventRegistrations_=n}else e.eventRegistrations_=[];return r}function pd(e,t,n,r){t.type===hu.MERGE&&null!==t.source.queryId&&(Se(Eu(e.viewCache_),"We should always have a full cache before handling merges"),Se(Cu(e.viewCache_),"Missing event cache, even though we have a server cache"));const i=e.viewCache_,s=nd(e.processor_,i,t,n,r);var a,o;return a=e.processor_,o=s.viewCache,Se(o.eventCache.getNode().isIndexed(a.filter.getIndex()),"Event snap not indexed"),Se(o.serverCache.getNode().isIndexed(a.filter.getIndex()),"Server snap not indexed"),Se(s.viewCache.serverCache.isFullyInitialized()||!i.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),e.viewCache_=s.viewCache,fd(e,s.changes,s.viewCache.eventCache.getNode(),null)}function fd(e,t,n,r){const i=r?[r]:e.eventRegistrations_;return function(e,t,n,r){const i=[],s=[];return t.forEach((t=>{var n;"child_changed"===t.type&&e.index_.indexedValueChanged(t.oldSnap,t.snapshotNode)&&s.push((n=t.childName,{type:"child_moved",snapshotNode:t.snapshotNode,childName:n}))})),bu(e,i,"child_removed",t,r,n),bu(e,i,"child_added",t,r,n),bu(e,i,"child_moved",s,r,n),bu(e,i,"child_changed",t,r,n),bu(e,i,"value",t,r,n),i}(e.eventGenerator_,t,n,i)}let md,gd;class vd{constructor(){this.views=new Map}}function _d(e,t,n,r){const i=t.source.queryId;if(null!==i){const s=e.views.get(i);return Se(null!=s,"SyncTree gave us an op for an invalid query."),pd(s,t,n,r)}{let i=[];for(const s of e.views.values())i=i.concat(pd(s,t,n,r));return i}}function yd(e,t,n,r,i){const s=t._queryIdentifier,a=e.views.get(s);if(!a){let e=Hu(n,i?r:null),s=!1;e?s=!0:r instanceof zc?(e=Vu(n,r),s=!1):(e=zc.EMPTY_NODE,s=!1);const a=wu(new _u(e,s,!1),new _u(r,i,!1));return new cd(t,a)}return a}function bd(e,t,n,r,i,s){const a=yd(e,t,r,i,s);return e.views.has(t._queryIdentifier)||e.views.set(t._queryIdentifier,a),function(e,t){e.eventRegistrations_.push(t)}(a,n),function(e,t){const n=e.viewCache_.eventCache,r=[];n.getNode().isLeafNode()||n.getNode().forEachChild(Dc,((e,t)=>{r.push(Qc(e,t))}));return n.isFullyInitialized()&&r.push(Yc(n.getNode())),fd(e,r,n.getNode(),t)}(a,n)}function wd(e,t,n,r){const i=t._queryIdentifier,s=[];let a=[];const o=xd(e);if("default"===i)for(const[l,c]of e.views.entries())a=a.concat(hd(c,n,r)),dd(c)&&(e.views.delete(l),c.query._queryParams.loadsAllData()||s.push(c.query));else{const t=e.views.get(i);t&&(a=a.concat(hd(t,n,r)),dd(t)&&(e.views.delete(i),t.query._queryParams.loadsAllData()||s.push(t.query)))}return o&&!xd(e)&&s.push(new(Se(md,"Reference.ts has not been loaded"),md)(t._repo,t._path)),{removed:s,events:a}}function Sd(e){const t=[];for(const n of e.views.values())n.query._queryParams.loadsAllData()||t.push(n);return t}function Pd(e,t){let n=null;for(const r of e.views.values())n=n||ud(r,t);return n}function Cd(e,t){if(t._queryParams.loadsAllData())return kd(e);{const n=t._queryIdentifier;return e.views.get(n)}}function Ed(e,t){return null!=Cd(e,t)}function xd(e){return null!=kd(e)}function kd(e){for(const t of e.views.values())if(t.query._queryParams.loadsAllData())return t;return null}let Ad=1;class Td{constructor(e){this.listenProvider_=e,this.syncPointTree_=new ku(null),this.pendingWriteTree_={visibleWrites:Au.empty(),allWrites:[],lastWriteId:-1},this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function Fd(e,t,n,r,i){return function(e,t,n,r,i){Se(r>e.lastWriteId,"Stacking an older write on top of newer ones"),void 0===i&&(i=!0),e.allWrites.push({path:t,snap:n,writeId:r,visible:i}),i&&(e.visibleWrites=Tu(e.visibleWrites,t,n)),e.lastWriteId=r}(e.pendingWriteTree_,t,n,r,i),i?Ld(e,new gu({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},t,n)):[]}function Id(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const r=function(e,t){for(let n=0;n<e.allWrites.length;n++){const r=e.allWrites[n];if(r.writeId===t)return r}return null}(e.pendingWriteTree_,t);if(Gu(e.pendingWriteTree_,t)){let t=new ku(null);return null!=r.snap?t=t.set(ec(),!0):bl(r.children,(e=>{t=t.set(new Zl(e),!0)})),Ld(e,new fu(r.path,t,n))}return[]}function Rd(e,t,n){return Ld(e,new gu({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},t,n))}function Md(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]&&arguments[4];const s=t._path,a=e.syncPointTree_.get(s);let o=[];if(a&&("default"===t._queryIdentifier||Ed(a,t))){const l=wd(a,t,n,r);0===a.views.size&&(e.syncPointTree_=e.syncPointTree_.remove(s));const c=l.removed;if(o=l.events,!i){const n=-1!==c.findIndex((e=>e._queryParams.loadsAllData())),i=e.syncPointTree_.findOnPath(s,((e,t)=>xd(t)));if(n&&!i){const t=e.syncPointTree_.subtree(s);if(!t.isEmpty()){const n=function(e){return e.fold(((e,t,n)=>{if(t&&xd(t)){return[kd(t)]}{let e=[];return t&&(e=Sd(t)),bl(n,((t,n)=>{e=e.concat(n)})),e}}))}(t);for(let t=0;t<n.length;++t){const r=n[t],i=r.query,s=Gd(e,r);e.listenProvider_.startListening(Vd(i),Bd(e,i),s.hashFn,s.onComplete)}}}if(!i&&c.length>0&&!r)if(n){const n=null;e.listenProvider_.stopListening(Vd(t),n)}else c.forEach((t=>{const n=e.queryToTagMap.get(Wd(t));e.listenProvider_.stopListening(Vd(t),n)}))}!function(e,t){for(let n=0;n<t.length;++n){const r=t[n];if(!r._queryParams.loadsAllData()){const t=Wd(r),n=e.queryToTagMap.get(t);e.queryToTagMap.delete(t),e.tagToQueryMap.delete(n)}}}(e,c)}return o}function Nd(e,t,n,r){const i=zd(e,r);if(null!=i){const r=qd(i),s=r.path,a=r.queryId,o=cc(s,t);return Hd(e,s,new gu(pu(a),o,n))}return[]}function Dd(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const i=t._path;let s=null,a=!1;e.syncPointTree_.foreachOnPath(i,((e,t)=>{const n=cc(e,i);s=s||Pd(t,n),a=a||xd(t)}));let o,l=e.syncPointTree_.get(i);if(l?(a=a||xd(l),s=s||Pd(l,ec())):(l=new vd,e.syncPointTree_=e.syncPointTree_.set(i,l)),null!=s)o=!0;else{o=!1,s=zc.EMPTY_NODE;e.syncPointTree_.subtree(i).foreachChild(((e,t)=>{const n=Pd(t,ec());n&&(s=s.updateImmediateChild(e,n))}))}const c=Ed(l,t);if(!c&&!t._queryParams.loadsAllData()){const n=Wd(t);Se(!e.queryToTagMap.has(n),"View does not exist, but we have a tag");const r=Ad++;e.queryToTagMap.set(n,r),e.tagToQueryMap.set(r,n)}let u=bd(l,t,n,Uu(e.pendingWriteTree_,i),s,o);if(!c&&!a&&!r){const n=Cd(l,t);u=u.concat(function(e,t,n){const r=t._path,i=Bd(e,t),s=Gd(e,n),a=e.listenProvider_.startListening(Vd(t),i,s.hashFn,s.onComplete),o=e.syncPointTree_.subtree(r);if(i)Se(!xd(o.value),"If we're adding a query, it shouldn't be shadowed");else{const t=o.fold(((e,t,n)=>{if(!lc(e)&&t&&xd(t))return[kd(t).query];{let e=[];return t&&(e=e.concat(Sd(t).map((e=>e.query)))),bl(n,((t,n)=>{e=e.concat(n)})),e}}));for(let n=0;n<t.length;++n){const r=t[n];e.listenProvider_.stopListening(Vd(r),Bd(e,r))}}return a}(e,t,n))}return u}function Od(e,t,n){const r=e.pendingWriteTree_,i=e.syncPointTree_.findOnPath(t,((e,n)=>{const r=Pd(n,cc(e,t));if(r)return r}));return qu(r,t,i,n,!0)}function Ld(e,t){return jd(t,e.syncPointTree_,null,Uu(e.pendingWriteTree_,ec()))}function jd(e,t,n,r){if(lc(e.path))return Ud(e,t,n,r);{const i=t.get(ec());null==n&&null!=i&&(n=Pd(i,ec()));let s=[];const a=tc(e.path),o=e.operationForChild(a),l=t.children.get(a);if(l&&o){const e=n?n.getImmediateChild(a):null,t=Ju(r,a);s=s.concat(jd(o,l,e,t))}return i&&(s=s.concat(_d(i,e,r,n))),s}}function Ud(e,t,n,r){const i=t.get(ec());null==n&&null!=i&&(n=Pd(i,ec()));let s=[];return t.children.inorderTraversal(((t,i)=>{const a=n?n.getImmediateChild(t):null,o=Ju(r,t),l=e.operationForChild(t);l&&(s=s.concat(Ud(l,i,a,o)))})),i&&(s=s.concat(_d(i,e,r,n))),s}function Gd(e,t){const n=t.query,r=Bd(e,n);return{hashFn:()=>{const e=function(e){return e.viewCache_.serverCache.getNode()}(t)||zc.EMPTY_NODE;return e.hash()},onComplete:t=>{if("ok"===t)return r?function(e,t,n){const r=zd(e,n);if(r){const n=qd(r),i=n.path,s=n.queryId,a=cc(i,t);return Hd(e,i,new mu(pu(s),a))}return[]}(e,n._path,r):function(e,t){return Ld(e,new mu({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},t))}(e,n._path);{const r=function(e,t){let n="Unknown Error";"too_big"===e?n="The data requested exceeds the maximum size that can be accessed with a single request.":"permission_denied"===e?n="Client doesn't have permission to access the desired data.":"unavailable"===e&&(n="The service is unavailable");const r=new Error(e+" at "+t._path.toString()+": "+n);return r.code=e.toUpperCase(),r}(t,n);return Md(e,n,null,r)}}}}function Bd(e,t){const n=Wd(t);return e.queryToTagMap.get(n)}function Wd(e){return e._path.toString()+"$"+e._queryIdentifier}function zd(e,t){return e.tagToQueryMap.get(t)}function qd(e){const t=e.indexOf("$");return Se(-1!==t&&t<e.length-1,"Bad queryKey."),{queryId:e.substr(t+1),path:new Zl(e.substr(0,t))}}function Hd(e,t,n){const r=e.syncPointTree_.get(t);Se(r,"Missing sync point for query tag that we're tracking");return _d(r,n,Uu(e.pendingWriteTree_,t),null)}function Vd(e){return e._queryParams.loadsAllData()&&!e._queryParams.isDefault()?new(Se(gd,"Reference.ts has not been loaded"),gd)(e._repo,e._path):e}class Kd{constructor(e){this.node_=e}getImmediateChild(e){const t=this.node_.getImmediateChild(e);return new Kd(t)}node(){return this.node_}}class Xd{constructor(e,t){this.syncTree_=e,this.path_=t}getImmediateChild(e){const t=oc(this.path_,e);return new Xd(this.syncTree_,t)}node(){return Od(this.syncTree_,this.path_)}}const Yd=function(e){return(e=e||{}).timestamp=e.timestamp||(new Date).getTime(),e},Qd=function(e,t,n){return e&&"object"===typeof e?(Se(".sv"in e,"Unexpected leaf node or priority contents"),"string"===typeof e[".sv"]?Jd(e[".sv"],t,n):"object"===typeof e[".sv"]?$d(e[".sv"],t):void Se(!1,"Unexpected server value: "+JSON.stringify(e,null,2))):e},Jd=function(e,t,n){if("timestamp"===e)return n.timestamp;Se(!1,"Unexpected server value: "+e)},$d=function(e,t,n){e.hasOwnProperty("increment")||Se(!1,"Unexpected server value: "+JSON.stringify(e,null,2));const r=e.increment;"number"!==typeof r&&Se(!1,"Unexpected increment value: "+r);const i=t.node();if(Se(null!==i&&"undefined"!==typeof i,"Expected ChildrenNode.EMPTY_NODE for nulls"),!i.isLeafNode())return r;const s=i.getValue();return"number"!==typeof s?r:s+r},Zd=function(e,t,n,r){return th(t,new Xd(n,e),r)},eh=function(e,t,n){return th(e,new Kd(t),n)};function th(e,t,n){const r=e.getPriority().val(),i=Qd(r,t.getImmediateChild(".priority"),n);let s;if(e.isLeafNode()){const r=e,s=Qd(r.getValue(),t,n);return s!==r.getValue()||i!==r.getPriority().val()?new Nc(s,Vc(i)):e}{const r=e;return s=r,i!==r.getPriority().val()&&(s=s.updatePriority(new Nc(i))),r.forEachChild(Dc,((e,r)=>{const i=th(r,t.getImmediateChild(e),n);i!==r&&(s=s.updateImmediateChild(e,i))})),s}}class nh{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{children:{},childCount:0};this.name=e,this.parent=t,this.node=n}}function rh(e,t){let n=t instanceof Zl?t:new Zl(t),r=e,i=tc(n);for(;null!==i;){const e=Je(r.node.children,i)||{children:{},childCount:0};r=new nh(i,r,e),n=rc(n),i=tc(n)}return r}function ih(e){return e.node.value}function sh(e,t){e.node.value=t,uh(e)}function ah(e){return e.node.childCount>0}function oh(e,t){bl(e.node.children,((n,r)=>{t(new nh(n,e,r))}))}function lh(e,t,n,r){n&&!r&&t(e),oh(e,(e=>{lh(e,t,!0,r)})),n&&r&&t(e)}function ch(e){return new Zl(null===e.parent?e.name:ch(e.parent)+"/"+e.name)}function uh(e){null!==e.parent&&function(e,t,n){const r=function(e){return void 0===ih(e)&&!ah(e)}(n),i=Qe(e.node.children,t);r&&i?(delete e.node.children[t],e.node.childCount--,uh(e)):r||i||(e.node.children[t]=n.node,e.node.childCount++,uh(e))}(e.parent,e.name,e)}const dh=/[\[\].#$\/\u0000-\u001F\u007F]/,hh=/[\[\].#$\u0000-\u001F\u007F]/,ph=10485760,fh=function(e){return"string"===typeof e&&0!==e.length&&!dh.test(e)},mh=function(e){return"string"===typeof e&&0!==e.length&&!hh.test(e)},gh=function(e,t,n,r){r&&void 0===t||vh(lt(e,"value"),t,n)},vh=function(e,t,n){const r=n instanceof Zl?new hc(n,e):n;if(void 0===t)throw new Error(e+"contains undefined "+fc(r));if("function"===typeof t)throw new Error(e+"contains a function "+fc(r)+" with contents = "+t.toString());if(hl(t))throw new Error(e+"contains "+t.toString()+" "+fc(r));if("string"===typeof t&&t.length>ph/3&&ct(t)>ph)throw new Error(e+"contains a string greater than "+ph+" utf8 bytes "+fc(r)+" ('"+t.substring(0,50)+"...')");if(t&&"object"===typeof t){let n=!1,i=!1;if(bl(t,((t,s)=>{if(".value"===t)n=!0;else if(".priority"!==t&&".sv"!==t&&(i=!0,!fh(t)))throw new Error(e+" contains an invalid key ("+t+") "+fc(r)+'.  Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');!function(e,t){e.parts_.length>0&&(e.byteLength_+=1),e.parts_.push(t),e.byteLength_+=ct(t),pc(e)}(r,t),vh(e,s,r),function(e){const t=e.parts_.pop();e.byteLength_-=ct(t),e.parts_.length>0&&(e.byteLength_-=1)}(r)})),n&&i)throw new Error(e+' contains ".value" child '+fc(r)+" in addition to actual children.")}},_h=function(e,t,n,r){if((!r||void 0!==n)&&!mh(n))throw new Error(lt(e,t)+'was an invalid path = "'+n+'". Paths must be non-empty strings and can\'t contain ".", "#", "$", "[", or "]"')},yh=function(e,t,n,r){n&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),_h(e,t,n,r)},bh=function(e,t){if(".info"===tc(t))throw new Error(e+" failed = Can't modify data under /.info/")},wh=function(e,t){const n=t.path.toString();if("string"!==typeof t.repoInfo.host||0===t.repoInfo.host.length||!fh(t.repoInfo.namespace)&&"localhost"!==t.repoInfo.host.split(":")[0]||0!==n.length&&!function(e){return e&&(e=e.replace(/^\/*\.info(\/|$)/,"/")),mh(e)}(n))throw new Error(lt(e,"url")+'must be a valid firebase URL and the path can\'t contain ".", "#", "$", "[", or "]".')};class Sh{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function Ph(e,t){let n=null;for(let r=0;r<t.length;r++){const i=t[r],s=i.getPath();null===n||uc(s,n.path)||(e.eventLists_.push(n),n=null),null===n&&(n={events:[],path:s}),n.events.push(i)}n&&e.eventLists_.push(n)}function Ch(e,t,n){Ph(e,n),xh(e,(e=>uc(e,t)))}function Eh(e,t,n){Ph(e,n),xh(e,(e=>dc(e,t)||dc(t,e)))}function xh(e,t){e.recursionDepth_++;let n=!0;for(let r=0;r<e.eventLists_.length;r++){const i=e.eventLists_[r];if(i){t(i.path)?(kh(e.eventLists_[r]),e.eventLists_[r]=null):n=!1}}n&&(e.eventLists_=[]),e.recursionDepth_--}function kh(e){for(let t=0;t<e.events.length;t++){const n=e.events[t];if(null!==n){e.events[t]=null;const r=n.getEventRunner();il&&ol("event: "+n.toString()),Cl(r)}}}const Ah="repo_interrupt",Th=25;class Fh{constructor(e,t,n,r){this.repoInfo_=e,this.forceRestClient_=t,this.authTokenProvider_=n,this.appCheckProvider_=r,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new Sh,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=ou(),this.transactionQueueTree_=new nh,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function Ih(e,t,n){if(e.stats_=Ul(e.repoInfo_),e.forceRestClient_||("object"===typeof window&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0)e.server_=new su(e.repoInfo_,((t,n,r,i)=>{Nh(e,t,n,r,i)}),e.authTokenProvider_,e.appCheckProvider_),setTimeout((()=>Dh(e,!0)),0);else{if("undefined"!==typeof n&&null!==n){if("object"!==typeof n)throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{Xe(n)}catch(Tw){throw new Error("Invalid authOverride provided: "+Tw)}}e.persistentConnection_=new vc(e.repoInfo_,t,((t,n,r,i)=>{Nh(e,t,n,r,i)}),(t=>{Dh(e,t)}),(t=>{!function(e,t){bl(t,((t,n)=>{Oh(e,t,n)}))}(e,t)}),e.authTokenProvider_,e.appCheckProvider_,n),e.server_=e.persistentConnection_}e.authTokenProvider_.addTokenChangeListener((t=>{e.server_.refreshAuthToken(t)})),e.appCheckProvider_.addTokenChangeListener((t=>{e.server_.refreshAppCheckToken(t.token)})),e.statsReporter_=function(e,t){const n=e.toString();return jl[n]||(jl[n]=t()),jl[n]}(e.repoInfo_,(()=>new du(e.stats_,e.server_))),e.infoData_=new au,e.infoSyncTree_=new Td({startListening:(t,n,r,i)=>{let s=[];const a=e.infoData_.getNode(t._path);return a.isEmpty()||(s=Rd(e.infoSyncTree_,t._path,a),setTimeout((()=>{i("ok")}),0)),s},stopListening:()=>{}}),Oh(e,"connected",!1),e.serverSyncTree_=new Td({startListening:(t,n,r,i)=>(e.server_.listen(t,r,n,((n,r)=>{const s=i(n,r);Eh(e.eventQueue_,t._path,s)})),[]),stopListening:(t,n)=>{e.server_.unlisten(t,n)}})}function Rh(e){const t=e.infoData_.getNode(new Zl(".info/serverTimeOffset")).val()||0;return(new Date).getTime()+t}function Mh(e){return Yd({timestamp:Rh(e)})}function Nh(e,t,n,r,i){e.dataUpdateCount++;const s=new Zl(t);n=e.interceptServerDataCallback_?e.interceptServerDataCallback_(t,n):n;let a=[];if(i)if(r){const t=Ze(n,(e=>Vc(e)));a=function(e,t,n,r){const i=zd(e,r);if(i){const r=qd(i),s=r.path,a=r.queryId,o=cc(s,t),l=ku.fromObject(n);return Hd(e,s,new vu(pu(a),o,l))}return[]}(e.serverSyncTree_,s,t,i)}else{const t=Vc(n);a=Nd(e.serverSyncTree_,s,t,i)}else if(r){const t=Ze(n,(e=>Vc(e)));a=function(e,t,n){const r=ku.fromObject(n);return Ld(e,new vu({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},t,r))}(e.serverSyncTree_,s,t)}else{const t=Vc(n);a=Rd(e.serverSyncTree_,s,t)}let o=s;a.length>0&&(o=Hh(e,s)),Eh(e.eventQueue_,o,a)}function Dh(e,t){Oh(e,"connected",t),!1===t&&function(e){Bh(e,"onDisconnectEvents");const t=Mh(e),n=ou();cu(e.onDisconnect_,ec(),((r,i)=>{const s=Zd(r,i,e.serverSyncTree_,t);lu(n,r,s)}));let r=[];cu(n,ec(),((t,n)=>{r=r.concat(Rd(e.serverSyncTree_,t,n));const i=Qh(e,t);Hh(e,i)})),e.onDisconnect_=ou(),Eh(e.eventQueue_,ec(),r)}(e)}function Oh(e,t,n){const r=new Zl("/.info/"+t),i=Vc(n);e.infoData_.updateSnapshot(r,i);const s=Rd(e.infoSyncTree_,r,i);Eh(e.eventQueue_,r,s)}function Lh(e){return e.nextWriteId_++}function jh(e,t,n,r,i){Bh(e,"set",{path:t.toString(),value:n,priority:r});const s=Mh(e),a=Vc(n,r),o=Od(e.serverSyncTree_,t),l=eh(a,o,s),c=Lh(e),u=Fd(e.serverSyncTree_,t,l,c,!0);Ph(e.eventQueue_,u),e.server_.put(t.toString(),a.val(!0),((n,r)=>{const s="ok"===n;s||dl("set at "+t+" failed: "+n);const a=Id(e.serverSyncTree_,c,!s);Eh(e.eventQueue_,t,a),Wh(e,i,n,r)}));const d=Qh(e,t);Hh(e,d),Eh(e.eventQueue_,d,[])}function Uh(e,t,n){let r;r=".info"===tc(t._path)?Md(e.infoSyncTree_,t,n):Md(e.serverSyncTree_,t,n),Ch(e.eventQueue_,t._path,r)}function Gh(e){e.persistentConnection_&&e.persistentConnection_.interrupt(Ah)}function Bh(e){let t="";e.persistentConnection_&&(t=e.persistentConnection_.id+":");for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];ol(t,...r)}function Wh(e,t,n,r){t&&Cl((()=>{if("ok"===n)t(null);else{const e=(n||"error").toUpperCase();let i=e;r&&(i+=": "+r);const s=new Error(i);s.code=e,t(s)}}))}function zh(e,t,n){return Od(e.serverSyncTree_,t,n)||zc.EMPTY_NODE}function qh(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.transactionQueueTree_;if(t||Yh(e,t),ih(t)){const n=Kh(e,t);Se(n.length>0,"Sending zero length transaction queue");n.every((e=>0===e.status))&&function(e,t,n){const r=n.map((e=>e.currentWriteId)),i=zh(e,t,r);let s=i;const a=i.hash();for(let c=0;c<n.length;c++){const e=n[c];Se(0===e.status,"tryToSendTransactionQueue_: items in queue should all be run."),e.status=1,e.retryCount++;const r=cc(t,e.path);s=s.updateChild(r,e.currentOutputSnapshotRaw)}const o=s.val(!0),l=t;e.server_.put(l.toString(),o,(r=>{Bh(e,"transaction put response",{path:l.toString(),status:r});let i=[];if("ok"===r){const r=[];for(let t=0;t<n.length;t++)n[t].status=2,i=i.concat(Id(e.serverSyncTree_,n[t].currentWriteId)),n[t].onComplete&&r.push((()=>n[t].onComplete(null,!0,n[t].currentOutputSnapshotResolved))),n[t].unwatcher();Yh(e,rh(e.transactionQueueTree_,t)),qh(e,e.transactionQueueTree_),Eh(e.eventQueue_,t,i);for(let e=0;e<r.length;e++)Cl(r[e])}else{if("datastale"===r)for(let e=0;e<n.length;e++)3===n[e].status?n[e].status=4:n[e].status=0;else{dl("transaction at "+l.toString()+" failed: "+r);for(let e=0;e<n.length;e++)n[e].status=4,n[e].abortReason=r}Hh(e,t)}}),a)}(e,ch(t),n)}else ah(t)&&oh(t,(t=>{qh(e,t)}))}function Hh(e,t){const n=Vh(e,t),r=ch(n);return function(e,t,n){if(0===t.length)return;const r=[];let i=[];const s=t.filter((e=>0===e.status)),a=s.map((e=>e.currentWriteId));for(let l=0;l<t.length;l++){const s=t[l],c=cc(n,s.path);let u,d=!1;if(Se(null!==c,"rerunTransactionsUnderNode_: relativePath should not be null."),4===s.status)d=!0,u=s.abortReason,i=i.concat(Id(e.serverSyncTree_,s.currentWriteId,!0));else if(0===s.status)if(s.retryCount>=Th)d=!0,u="maxretry",i=i.concat(Id(e.serverSyncTree_,s.currentWriteId,!0));else{const n=zh(e,s.path,a);s.currentInputSnapshot=n;const r=t[l].update(n.val());if(void 0!==r){vh("transaction failed: Data returned ",r,s.path);let t=Vc(r);"object"===typeof r&&null!=r&&Qe(r,".priority")||(t=t.updatePriority(n.getPriority()));const o=s.currentWriteId,l=Mh(e),c=eh(t,n,l);s.currentOutputSnapshotRaw=t,s.currentOutputSnapshotResolved=c,s.currentWriteId=Lh(e),a.splice(a.indexOf(o),1),i=i.concat(Fd(e.serverSyncTree_,s.path,c,s.currentWriteId,s.applyLocally)),i=i.concat(Id(e.serverSyncTree_,o,!0))}else d=!0,u="nodata",i=i.concat(Id(e.serverSyncTree_,s.currentWriteId,!0))}Eh(e.eventQueue_,n,i),i=[],d&&(t[l].status=2,o=t[l].unwatcher,setTimeout(o,Math.floor(0)),t[l].onComplete&&("nodata"===u?r.push((()=>t[l].onComplete(null,!1,t[l].currentInputSnapshot))):r.push((()=>t[l].onComplete(new Error(u),!1,null)))))}var o;Yh(e,e.transactionQueueTree_);for(let l=0;l<r.length;l++)Cl(r[l]);qh(e,e.transactionQueueTree_)}(e,Kh(e,n),r),r}function Vh(e,t){let n,r=e.transactionQueueTree_;for(n=tc(t);null!==n&&void 0===ih(r);)r=rh(r,n),n=tc(t=rc(t));return r}function Kh(e,t){const n=[];return Xh(e,t,n),n.sort(((e,t)=>e.order-t.order)),n}function Xh(e,t,n){const r=ih(t);if(r)for(let i=0;i<r.length;i++)n.push(r[i]);oh(t,(t=>{Xh(e,t,n)}))}function Yh(e,t){const n=ih(t);if(n){let e=0;for(let t=0;t<n.length;t++)2!==n[t].status&&(n[e]=n[t],e++);n.length=e,sh(t,n.length>0?n:void 0)}oh(t,(t=>{Yh(e,t)}))}function Qh(e,t){const n=ch(Vh(e,t)),r=rh(e.transactionQueueTree_,t);return function(e,t,n){let r=n?e:e.parent;for(;null!==r;){if(t(r))return!0;r=r.parent}}(r,(t=>{Jh(e,t)})),Jh(e,r),lh(r,(t=>{Jh(e,t)})),n}function Jh(e,t){const n=ih(t);if(n){const r=[];let i=[],s=-1;for(let t=0;t<n.length;t++)3===n[t].status||(1===n[t].status?(Se(s===t-1,"All SENT items should be at beginning of queue."),s=t,n[t].status=3,n[t].abortReason="set"):(Se(0===n[t].status,"Unexpected transaction status in abort"),n[t].unwatcher(),i=i.concat(Id(e.serverSyncTree_,n[t].currentWriteId,!0)),n[t].onComplete&&r.push(n[t].onComplete.bind(null,new Error("set"),!1,null))));-1===s?sh(t,void 0):n.length=s+1,Eh(e.eventQueue_,ch(t),i);for(let e=0;e<r.length;e++)Cl(r[e])}}const $h=function(e,t){const n=Zh(e),r=n.namespace;"firebase.com"===n.domain&&ul(n.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),r&&"undefined"!==r||"localhost"===n.domain||ul("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),n.secure||"undefined"!==typeof window&&window.location&&window.location.protocol&&-1!==window.location.protocol.indexOf("https:")&&dl("Insecure Firebase access from a secure page. Please use https in calls to new Firebase().");const i="ws"===n.scheme||"wss"===n.scheme;return{repoInfo:new Nl(n.host,n.secure,r,i,t,"",r!==n.subdomain),path:new Zl(n.pathString)}},Zh=function(e){let t="",n="",r="",i="",s="",a=!0,o="https",l=443;if("string"===typeof e){let c=e.indexOf("//");c>=0&&(o=e.substring(0,c-1),e=e.substring(c+2));let u=e.indexOf("/");-1===u&&(u=e.length);let d=e.indexOf("?");-1===d&&(d=e.length),t=e.substring(0,Math.min(u,d)),u<d&&(i=function(e){let t="";const n=e.split("/");for(let r=0;r<n.length;r++)if(n[r].length>0){let e=n[r];try{e=decodeURIComponent(e.replace(/\+/g," "))}catch(Tw){}t+="/"+e}return t}(e.substring(u,d)));const h=function(e){const t={};"?"===e.charAt(0)&&(e=e.substring(1));for(const n of e.split("&")){if(0===n.length)continue;const r=n.split("=");2===r.length?t[decodeURIComponent(r[0])]=decodeURIComponent(r[1]):dl("Invalid query segment '".concat(n,"' in query '").concat(e,"'"))}return t}(e.substring(Math.min(e.length,d)));c=t.indexOf(":"),c>=0?(a="https"===o||"wss"===o,l=parseInt(t.substring(c+1),10)):c=t.length;const p=t.slice(0,c);if("localhost"===p.toLowerCase())n="localhost";else if(p.split(".").length<=2)n=p;else{const e=t.indexOf(".");r=t.substring(0,e).toLowerCase(),n=t.substring(e+1),s=r}"ns"in h&&(s=h.ns)}return{host:t,port:l,domain:n,subdomain:r,secure:a,scheme:o,pathString:i,namespace:s}},ep="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz";!function(){let e=0;const t=[]}();class tp{constructor(e,t,n,r){this.eventType=e,this.eventRegistration=t,this.snapshot=n,this.prevName=r}getPath(){const e=this.snapshot.ref;return"value"===this.eventType?e._path:e.parent._path}getEventType(){return this.eventType}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.getPath().toString()+":"+this.eventType+":"+Xe(this.snapshot.exportVal())}}class np{constructor(e,t,n){this.eventRegistration=e,this.error=t,this.path=n}getPath(){return this.path}getEventType(){return"cancel"}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.path.toString()+":cancel"}}class rp{constructor(e,t){this.snapshotCallback=e,this.cancelCallback=t}onValue(e,t){this.snapshotCallback.call(null,e,t)}onCancel(e){return Se(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,e)}get hasCancelCallback(){return!!this.cancelCallback}matches(e){return this.snapshotCallback===e.snapshotCallback||void 0!==this.snapshotCallback.userCallback&&this.snapshotCallback.userCallback===e.snapshotCallback.userCallback&&this.snapshotCallback.context===e.snapshotCallback.context}}class ip{constructor(e,t,n,r){this._repo=e,this._path=t,this._queryParams=n,this._orderByCalled=r}get key(){return lc(this._path)?null:ic(this._path)}get ref(){return new sp(this._repo,this._path)}get _queryIdentifier(){const e=iu(this._queryParams),t=_l(e);return"{}"===t?"default":t}get _queryObject(){return iu(this._queryParams)}isEqual(e){if(!((e=ut(e))instanceof ip))return!1;const t=this._repo===e._repo,n=uc(this._path,e._path),r=this._queryIdentifier===e._queryIdentifier;return t&&n&&r}toJSON(){return this.toString()}toString(){return this._repo.toString()+function(e){let t="";for(let n=e.pieceNum_;n<e.pieces_.length;n++)""!==e.pieces_[n]&&(t+="/"+encodeURIComponent(String(e.pieces_[n])));return t||"/"}(this._path)}}class sp extends ip{constructor(e,t){super(e,t,new nu,!1)}get parent(){const e=ac(this._path);return null===e?null:new sp(this._repo,e)}get root(){let e=this;for(;null!==e.parent;)e=e.parent;return e}}class ap{constructor(e,t,n){this._node=e,this.ref=t,this._index=n}get priority(){return this._node.getPriority().val()}get key(){return this.ref.key}get size(){return this._node.numChildren()}child(e){const t=new Zl(e),n=lp(this.ref,e);return new ap(this._node.getChild(t),n,Dc)}exists(){return!this._node.isEmpty()}exportVal(){return this._node.val(!0)}forEach(e){if(this._node.isLeafNode())return!1;return!!this._node.forEachChild(this._index,((t,n)=>e(new ap(n,lp(this.ref,t),Dc))))}hasChild(e){const t=new Zl(e);return!this._node.getChild(t).isEmpty()}hasChildren(){return!this._node.isLeafNode()&&!this._node.isEmpty()}toJSON(){return this.exportVal()}val(){return this._node.val()}}function op(e,t){return(e=ut(e))._checkNotDeleted("ref"),void 0!==t?lp(e._root,t):e._root}function lp(e,t){return null===tc((e=ut(e))._path)?yh("child","path",t,!1):_h("child","path",t,!1),new sp(e._repo,oc(e._path,t))}function cp(e,t){e=ut(e),bh("set",e._path),gh("set",t,e._path,!1);const n=new je;return jh(e._repo,e._path,t,null,n.wrapCallback((()=>{}))),n.promise}class up{constructor(e){this.callbackContext=e}respondsTo(e){return"value"===e}createEvent(e,t){const n=t._queryParams.getIndex();return new tp("value",this,new ap(e.snapshotNode,new sp(t._repo,t._path),n))}getEventRunner(e){return"cancel"===e.getEventType()?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,null)}createCancelEvent(e,t){return this.callbackContext.hasCancelCallback?new np(this,e,t):null}matches(e){return e instanceof up&&(!e.callbackContext||!this.callbackContext||e.callbackContext.matches(this.callbackContext))}hasAnyCallback(){return null!==this.callbackContext}}class dp{constructor(e,t){this.eventType=e,this.callbackContext=t}respondsTo(e){let t="children_added"===e?"child_added":e;return t="children_removed"===t?"child_removed":t,this.eventType===t}createCancelEvent(e,t){return this.callbackContext.hasCancelCallback?new np(this,e,t):null}createEvent(e,t){Se(null!=e.childName,"Child events should have a childName.");const n=lp(new sp(t._repo,t._path),e.childName),r=t._queryParams.getIndex();return new tp(e.type,this,new ap(e.snapshotNode,n,r),e.prevName)}getEventRunner(e){return"cancel"===e.getEventType()?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,e.prevName)}matches(e){return e instanceof dp&&(this.eventType===e.eventType&&(!this.callbackContext||!e.callbackContext||this.callbackContext.matches(e.callbackContext)))}hasAnyCallback(){return!!this.callbackContext}}function hp(e,t,n,r,i){let s;if("object"===typeof r&&(s=void 0,i=r),"function"===typeof r&&(s=r),i&&i.onlyOnce){const t=n,r=(n,r)=>{Uh(e._repo,e,o),t(n,r)};r.userCallback=n.userCallback,r.context=n.context,n=r}const a=new rp(n,s||void 0),o="value"===t?new up(a):new dp(t,a);return function(e,t,n){let r;r=".info"===tc(t._path)?Dd(e.infoSyncTree_,t,n):Dd(e.serverSyncTree_,t,n),Ch(e.eventQueue_,t._path,r)}(e._repo,e,o),()=>Uh(e._repo,e,o)}function pp(e,t,n,r){return hp(e,"value",t,n,r)}function fp(e,t,n){let r=null;const i=n?new rp(n):null;"value"===t?r=new up(i):t&&(r=new dp(t,i)),Uh(e._repo,e,r)}!function(e){Se(!md,"__referenceConstructor has already been defined"),md=e}(sp),function(e){Se(!gd,"__referenceConstructor has already been defined"),gd=e}(sp);const mp="FIREBASE_DATABASE_EMULATOR_HOST",gp={};let vp=!1;function _p(e,t,n,r,i){let s=r||e.options.databaseURL;void 0===s&&(e.options.projectId||ul("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),ol("Using default host for project ",e.options.projectId),s="".concat(e.options.projectId,"-default-rtdb.firebaseio.com"));let a,o,l=$h(s,i),c=l.repoInfo;"undefined"!==typeof process&&(o={NODE_ENV:"production",PUBLIC_URL:"/read-pdf-by-page",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_FIREBASE_API_KEY:"AIzaSyBKA2ype48tLbkfy_qV29amJ_RMpONpUwg",REACT_APP_FIREBASE_APP_ID:"1:564116137461:web:e8247258126be9fb612cbc",REACT_APP_FIREBASE_AUTH_DOMAIN:"read-pdf-by-page.firebaseapp.com",REACT_APP_FIREBASE_MESSAGING_SENDER_ID:"564116137461",REACT_APP_FIREBASE_PROJECT_ID:"read-pdf-by-page",REACT_APP_FIREBASE_REALTIME_REFERENCE_URL:"https://read-pdf-by-page-default-rtdb.firebaseio.com/",REACT_APP_FIREBASE_STORAGE_BUCKET:"read-pdf-by-page.appspot.com"}[mp]),o?(a=!0,s="http://".concat(o,"?ns=").concat(c.namespace),l=$h(s,i),c=l.repoInfo):a=!l.repoInfo.secure;const u=i&&a?new Al(Al.OWNER):new kl(e.name,e.options,t);wh("Invalid Firebase Database URL",l),lc(l.path)||ul("Database URL must point to the root of a Firebase Database (not including a child path).");const d=function(e,t,n,r){let i=gp[t.name];i||(i={},gp[t.name]=i);let s=i[e.toURLString()];s&&ul("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call.");return s=new Fh(e,vp,n,r),i[e.toURLString()]=s,s}(c,e,u,new xl(e.name,n));return new yp(d,e)}class yp{constructor(e,t){this._repoInternal=e,this.app=t,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(Ih(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new sp(this._repo,ec())),this._rootInternal}_delete(){return null!==this._rootInternal&&(!function(e,t){const n=gp[t];n&&n[e.key]===e||ul("Database ".concat(t,"(").concat(e.repoInfo_,") has already been deleted.")),Gh(e),delete n[e.key]}(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(e){null===this._rootInternal&&ul("Cannot call "+e+" on a deleted database.")}}const bp={".sv":"timestamp"};vc.prototype.simpleListen=function(e,t){this.sendRequest("q",{p:e},t)},vc.prototype.echo=function(e,t){this.sendRequest("echo",{d:e},t)};!function(e){Xo(En),bn(new dt("database",((e,t)=>{let{instanceIdentifier:n}=t;return _p(e.getProvider("app").getImmediate(),e.getProvider("auth-internal"),e.getProvider("app-check-internal"),n)}),"PUBLIC").setMultipleInstances(!0)),An(Ho,Vo,e),An(Ho,Vo,"esm2017")}();const wp=xn({apiKey:"AIzaSyBKA2ype48tLbkfy_qV29amJ_RMpONpUwg",authDomain:"read-pdf-by-page.firebaseapp.com",projectId:"read-pdf-by-page",storageBucket:"read-pdf-by-page.appspot.com",messagingSenderId:"564116137461",appId:"1:564116137461:web:e8247258126be9fb612cbc"}),Sp=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:kn();const t=wn(e,"auth");if(t.isInitialized())return t.getImmediate();const n=function(e,t){const n=wn(e,"auth");if(n.isInitialized()){const e=n.getImmediate();if(et(n.getOptions(),null!==t&&void 0!==t?t:{}))return e;Ti(e,"already-initialized")}return n.initialize({options:t})}(e,{popupRedirectResolver:Lo,persistence:[Ha,Aa,Fa]}),r=Le("authTokenSyncURL");if(r&&"boolean"===typeof isSecureContext&&isSecureContext){const e=new URL(r,location.origin);if(location.origin===e.origin){const t=(i=e.toString(),async e=>{const t=e&&await e.getIdTokenResult(),n=t&&((new Date).getTime()-Date.parse(t.issuedAtTime))/1e3;if(n&&n>Bo)return;const r=null===t||void 0===t?void 0:t.token;Wo!==r&&(Wo=r,await fetch(i,{method:r?"POST":"DELETE",headers:r?{Authorization:"Bearer ".concat(r)}:{}}))});!function(e,t,n){ut(e).beforeAuthStateChanged(t,n)}(n,t,(()=>t(n.currentUser))),function(e,t,n,r){ut(e).onIdTokenChanged(t,n,r)}(n,(e=>t(e)))}}var i;const s=Ne("auth");return s&&Vs(n,"http://".concat(s)),n}(wp),Pp=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:kn(),t=arguments.length>1?arguments[1]:void 0;const n=wn(e,"database").getImmediate({identifier:t});if(!n._instanceStarted){const e=De("database");e&&function(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};e=ut(e),e._checkNotDeleted("useEmulator"),e._instanceStarted&&ul("Cannot call useEmulator() after instance has already been initialized.");const i=e._repoInternal;let s;if(i.repoInfo_.nodeAdmin)r.mockUserToken&&ul('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),s=new Al(Al.OWNER);else if(r.mockUserToken){const t="string"===typeof r.mockUserToken?r.mockUserToken:Ue(r.mockUserToken,e.app.options.projectId);s=new Al(t)}!function(e,t,n,r){e.repoInfo_=new Nl("".concat(t,":").concat(n),!1,e.repoInfo_.namespace,e.repoInfo_.webSocketOnly,e.repoInfo_.nodeAdmin,e.repoInfo_.persistenceKey,e.repoInfo_.includeNamespaceInQueryParams,!0),r&&(e.authTokenProvider_=r)}(i,t,n,s)}(n,...e)}return n}(wp),Cp=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:kn(),t=arguments.length>1?arguments[1]:void 0;e=ut(e);const n=wn(e,gi).getImmediate({identifier:t}),r=De("storage");return r&&function(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};!function(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};e.host="".concat(t,":").concat(n),e._protocol="http";const{mockUserToken:i}=r;i&&(e._overrideAuthToken="string"===typeof i?i:Ue(i,e.app.options.projectId))}(e,t,n,r)}(n,...r),n}(wp),Ep=(e,n,r,i)=>{(0,t.useEffect)((()=>{let t;const s=function(e,t,n,r){return ut(e).onAuthStateChanged(t,n,r)}(e,(async e=>{e?(t=op(n,"users/".concat(e.uid)),pp(t,(t=>{const s=t.val();if(s&&s.savedPdfs)r({...s});else{const t={...s,uid:e.uid,email:e.email,savedPdfs:[]};cp(op(n,"users/".concat(e.uid)),t),r(t)}i(!1)}))):(t&&fp(t),r(null),i(!1))}));return()=>{s(),t&&fp(t)}}),[])},xp=async(e,t,n,r)=>{if(!n||!r)throw new Error("Profile or storage is null");const i=n.savedPdfs.findIndex((t=>t.title===e.title));if(i<0)return alert("Pdf is not existing in database."),n;const s=[...n.savedPdfs];s.splice(i,1);const a={...n,savedPdfs:s};cp(op(t,"users/".concat(n.uid)),a);const o="files/".concat(n.uid,"/").concat(e.title);try{return await function(e){return li(e=ut(e))}(_i(r,o)),a}catch(cl){return console.error("Error deleting pdf from storage:",cl),n}},kp=async(e,t,n,r,i)=>{if(null===e)throw new Error("userId is null");if(null===t)throw new Error("file is null");if(null===i||""===i)throw new Error("fileName is null");const s=vi(_i(n,"files/".concat(e,"/").concat(i)),new Blob([JSON.stringify(t)],{type:"application/json"}));await Ap(s,r);const a=await function(e){return oi(e=ut(e))}(s.snapshot.ref);return a},Ap=(e,t)=>new Promise(((n,r)=>{e.on("state_changed",(e=>{const n=e.bytesTransferred/e.totalBytes*100;t(.8*n)}),r,n)}));let Tp=0;const Fp=new Map,Ip=e=>{if(Fp.has(e))return;const t=setTimeout((()=>{Fp.delete(e),Dp({type:"REMOVE_TOAST",toastId:e})}),1e6);Fp.set(e,t)},Rp=(e,t)=>{switch(t.type){case"ADD_TOAST":return{...e,toasts:[t.toast,...e.toasts].slice(0,1)};case"UPDATE_TOAST":return{...e,toasts:e.toasts.map((e=>e.id===t.toast.id?{...e,...t.toast}:e))};case"DISMISS_TOAST":{const{toastId:n}=t;return n?Ip(n):e.toasts.forEach((e=>{Ip(e.id)})),{...e,toasts:e.toasts.map((e=>e.id===n||void 0===n?{...e,open:!1}:e))}}case"REMOVE_TOAST":return void 0===t.toastId?{...e,toasts:[]}:{...e,toasts:e.toasts.filter((e=>e.id!==t.toastId))}}},Mp=[];let Np={toasts:[]};function Dp(e){Np=Rp(Np,e),Mp.forEach((e=>{e(Np)}))}function Op(e){let{...t}=e;const n=(Tp=(Tp+1)%Number.MAX_SAFE_INTEGER,Tp.toString()),r=()=>Dp({type:"DISMISS_TOAST",toastId:n});return Dp({type:"ADD_TOAST",toast:{...t,id:n,open:!0,onOpenChange:e=>{e||r()}}}),{id:n,dismiss:r,update:e=>Dp({type:"UPDATE_TOAST",toast:{...e,id:n}})}}function Lp(){const[e,n]=t.useState(Np);return t.useEffect((()=>(Mp.push(n),()=>{const e=Mp.indexOf(n);e>-1&&Mp.splice(e,1)})),[e]),{...e,toast:Op,dismiss:e=>Dp({type:"DISMISS_TOAST",toastId:e})}}var jp=__webpack_require__(579);const Up=(0,t.createContext)({profile:null,isLoading:!0,handleAddSavedPdf:()=>{},updatePageOfPdf:()=>{},deletePdf:()=>{}}),Gp=e=>{let{children:n}=e;const[r,i]=(0,t.useState)(null),[s,a]=(0,t.useState)(!0),{toast:o}=Lp();Ep(Sp,Pp,i,a);const l=async(e,t,n)=>{if(r){const s=await(async(e,t,n,r,i,s)=>{if(!t||!r)throw new Error("Profile or file is null");const a=t.savedPdfs.findIndex((e=>e.title===n.title));if(-1===a){s(85);const{uid:a}=t,o=await kp(a,r,i,s,n.title),l=[...t.savedPdfs,{...n,downloadURL:o}],c={...t,savedPdfs:l};return await cp(op(e,"users/".concat(a)),c),s(99),c}return t})(Pp,r,e,t,Cp,n);i(s)}},c=(e,t)=>{if(r){const{profile:n,success:s}=((e,t,n,r)=>{const i=r.savedPdfs.findIndex((t=>t.title===e));if(-1===i)return{profile:r,success:!1};const s=[...r.savedPdfs],a=s[i];a.savedPage=t,a.updateDate=(new Date).toISOString();const o={...r,savedPdfs:s};try{return cp(op(n,"users/".concat(r.uid)),o),{profile:o,success:!0}}catch(cl){return console.error("Error updating saved pdf page:",cl),{profile:r,success:!1}}})(e,t,Pp,r);o(s?{title:"Success",description:"Page saved successfully.",duration:3e3}:{title:"Error",description:"Please make sure you uploaded the Pdf first.",variant:"destructive",duration:3e3}),i(n)}},u=async e=>{if(r){const t=await xp(e,Pp,r,Cp);i(t)}},d=(0,t.useMemo)((()=>({profile:r,isLoading:s,handleAddSavedPdf:l,updatePageOfPdf:c,deletePdf:u})),[r,s]);return(0,jp.jsx)(Up.Provider,{value:d,children:n})},Bp=e=>{let{children:n}=e;const{profile:r,isLoading:i}=(0,t.useContext)(Up),s=$();return(0,t.useEffect)((()=>{!i&&r&&s("/read-pdf-by-page")}),[i,r,s]),(0,jp.jsx)(jp.Fragment,{children:i?(0,jp.jsxs)("p",{className:"mt-4 text-center animate-bounce",children:["Loading... ",(0,jp.jsx)("div",{className:"animate-spin",children:"|"})]}):n})},Wp=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.filter(((e,t,n)=>Boolean(e)&&n.indexOf(e)===t)).join(" ")};var zp={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const qp=(0,t.forwardRef)(((e,n)=>{let{color:r="currentColor",size:i=24,strokeWidth:s=2,absoluteStrokeWidth:a,className:o="",children:l,iconNode:c,...u}=e;return(0,t.createElement)("svg",{ref:n,...zp,width:i,height:i,stroke:r,strokeWidth:a?24*Number(s)/Number(i):s,className:Wp("lucide",o),...u},[...c.map((e=>{let[n,r]=e;return(0,t.createElement)(n,r)})),...Array.isArray(l)?l:[l]])})),Hp=(e,n)=>{const r=(0,t.forwardRef)(((r,i)=>{let{className:s,...a}=r;return(0,t.createElement)(qp,{ref:i,iconNode:n,className:Wp("lucide-".concat((o=e,o.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase())),s),...a});var o}));return r.displayName="".concat(e),r},Vp=Hp("LogIn",[["path",{d:"M15 3h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-4",key:"u53s6r"}],["polyline",{points:"10 17 15 12 10 7",key:"1ail0h"}],["line",{x1:"15",x2:"3",y1:"12",y2:"12",key:"v6grx8"}]]);function Kp(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return e=>t.forEach((t=>function(e,t){"function"===typeof e?e(t):null!==e&&void 0!==e&&(e.current=t)}(t,e)))}function Xp(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return t.useCallback(Kp(...n),n)}var Yp=t.forwardRef(((e,n)=>{const{children:r,...i}=e,s=t.Children.toArray(r),a=s.find($p);if(a){const e=a.props.children,r=s.map((n=>n===a?t.Children.count(e)>1?t.Children.only(null):t.isValidElement(e)?e.props.children:null:n));return(0,jp.jsx)(Qp,{...i,ref:n,children:t.isValidElement(e)?t.cloneElement(e,void 0,r):null})}return(0,jp.jsx)(Qp,{...i,ref:n,children:r})}));Yp.displayName="Slot";var Qp=t.forwardRef(((e,n)=>{const{children:r,...i}=e;if(t.isValidElement(r)){const e=function(e){var t,n;let r=null===(t=Object.getOwnPropertyDescriptor(e.props,"ref"))||void 0===t?void 0:t.get,i=r&&"isReactWarning"in r&&r.isReactWarning;if(i)return e.ref;if(r=null===(n=Object.getOwnPropertyDescriptor(e,"ref"))||void 0===n?void 0:n.get,i=r&&"isReactWarning"in r&&r.isReactWarning,i)return e.props.ref;return e.props.ref||e.ref}(r);return t.cloneElement(r,{...Zp(i,r.props),ref:n?Kp(n,e):e})}return t.Children.count(r)>1?t.Children.only(null):null}));Qp.displayName="SlotClone";var Jp=e=>{let{children:t}=e;return(0,jp.jsx)(jp.Fragment,{children:t})};function $p(e){return t.isValidElement(e)&&e.type===Jp}function Zp(e,t){const n={...t};for(const r in t){const i=e[r],s=t[r];/^on[A-Z]/.test(r)?i&&s?n[r]=function(){s(...arguments),i(...arguments)}:i&&(n[r]=i):"style"===r?n[r]={...i,...s}:"className"===r&&(n[r]=[i,s].filter(Boolean).join(" "))}return{...e,...n}}function ef(e){var t,n,r="";if("string"==typeof e||"number"==typeof e)r+=e;else if("object"==typeof e)if(Array.isArray(e))for(t=0;t<e.length;t++)e[t]&&(n=ef(e[t]))&&(r&&(r+=" "),r+=n);else for(t in e)e[t]&&(r&&(r+=" "),r+=t);return r}function tf(){for(var e,t,n=0,r="";n<arguments.length;)(e=arguments[n++])&&(t=ef(e))&&(r&&(r+=" "),r+=t);return r}const nf=e=>"boolean"===typeof e?"".concat(e):0===e?"0":e,rf=tf,sf=(e,t)=>n=>{var r;if(null==(null===t||void 0===t?void 0:t.variants))return rf(e,null===n||void 0===n?void 0:n.class,null===n||void 0===n?void 0:n.className);const{variants:i,defaultVariants:s}=t,a=Object.keys(i).map((e=>{const t=null===n||void 0===n?void 0:n[e],r=null===s||void 0===s?void 0:s[e];if(null===t)return null;const a=nf(t)||nf(r);return i[e][a]})),o=n&&Object.entries(n).reduce(((e,t)=>{let[n,r]=t;return void 0===r||(e[n]=r),e}),{}),l=null===t||void 0===t||null===(r=t.compoundVariants)||void 0===r?void 0:r.reduce(((e,t)=>{let{class:n,className:r,...i}=t;return Object.entries(i).every((e=>{let[t,n]=e;return Array.isArray(n)?n.includes({...s,...o}[t]):{...s,...o}[t]===n}))?[...e,n,r]:e}),[]);return rf(e,a,l,null===n||void 0===n?void 0:n.class,null===n||void 0===n?void 0:n.className)};function af(e){var t,n,r="";if("string"==typeof e||"number"==typeof e)r+=e;else if("object"==typeof e)if(Array.isArray(e)){var i=e.length;for(t=0;t<i;t++)e[t]&&(n=af(e[t]))&&(r&&(r+=" "),r+=n)}else for(n in e)e[n]&&(r&&(r+=" "),r+=n);return r}function of(){for(var e,t,n=0,r="",i=arguments.length;n<i;n++)(e=arguments[n])&&(t=af(e))&&(r&&(r+=" "),r+=t);return r}const lf="-";function cf(e){const t=function(e){const{theme:t,prefix:n}=e,r={nextPart:new Map,validators:[]},i=function(e,t){if(!t)return e;return e.map((e=>{let[n,r]=e;return[n,r.map((e=>"string"===typeof e?t+e:"object"===typeof e?Object.fromEntries(Object.entries(e).map((e=>{let[n,r]=e;return[t+n,r]}))):e))]}))}(Object.entries(e.classGroups),n);return i.forEach((e=>{let[n,i]=e;hf(i,r,n,t)})),r}(e),{conflictingClassGroups:n,conflictingClassGroupModifiers:r}=e;return{getClassGroupId:function(e){const n=e.split(lf);return""===n[0]&&1!==n.length&&n.shift(),uf(n,t)||function(e){if(df.test(e)){const t=df.exec(e)[1],n=null===t||void 0===t?void 0:t.substring(0,t.indexOf(":"));if(n)return"arbitrary.."+n}}(e)},getConflictingClassGroupIds:function(e,t){const i=n[e]||[];return t&&r[e]?[...i,...r[e]]:i}}}function uf(e,t){var n;if(0===e.length)return t.classGroupId;const r=e[0],i=t.nextPart.get(r),s=i?uf(e.slice(1),i):void 0;if(s)return s;if(0===t.validators.length)return;const a=e.join(lf);return null===(n=t.validators.find((e=>{let{validator:t}=e;return t(a)})))||void 0===n?void 0:n.classGroupId}const df=/^\[(.+)\]$/;function hf(e,t,n,r){e.forEach((e=>{if("string"!==typeof e){if("function"===typeof e)return e.isThemeGetter?void hf(e(r),t,n,r):void t.validators.push({validator:e,classGroupId:n});Object.entries(e).forEach((e=>{let[i,s]=e;hf(s,pf(t,i),n,r)}))}else{(""===e?t:pf(t,e)).classGroupId=n}}))}function pf(e,t){let n=e;return t.split(lf).forEach((e=>{n.nextPart.has(e)||n.nextPart.set(e,{nextPart:new Map,validators:[]}),n=n.nextPart.get(e)})),n}function ff(e){if(e<1)return{get:()=>{},set:()=>{}};let t=0,n=new Map,r=new Map;function i(i,s){n.set(i,s),t++,t>e&&(t=0,r=n,n=new Map)}return{get(e){let t=n.get(e);return void 0!==t?t:void 0!==(t=r.get(e))?(i(e,t),t):void 0},set(e,t){n.has(e)?n.set(e,t):i(e,t)}}}const mf="!";function gf(e){const{separator:t,experimentalParseClassName:n}=e,r=1===t.length,i=t[0],s=t.length;function a(e){const n=[];let a,o=0,l=0;for(let d=0;d<e.length;d++){let c=e[d];if(0===o){if(c===i&&(r||e.slice(d,d+s)===t)){n.push(e.slice(l,d)),l=d+s;continue}if("/"===c){a=d;continue}}"["===c?o++:"]"===c&&o--}const c=0===n.length?e:e.substring(l),u=c.startsWith(mf);return{modifiers:n,hasImportantModifier:u,baseClassName:u?c.substring(1):c,maybePostfixModifierPosition:a&&a>l?a-l:void 0}}return n?function(e){return n({className:e,parseClassName:a})}:a}const vf=/\s+/;function _f(){let e,t,n=0,r="";for(;n<arguments.length;)(e=arguments[n++])&&(t=yf(e))&&(r&&(r+=" "),r+=t);return r}function yf(e){if("string"===typeof e)return e;let t,n="";for(let r=0;r<e.length;r++)e[r]&&(t=yf(e[r]))&&(n&&(n+=" "),n+=t);return n}function bf(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];let i,s,a,o=function(t){const r=n.reduce(((e,t)=>t(e)),e());return i=function(e){return{cache:ff(e.cacheSize),parseClassName:gf(e),...cf(e)}}(r),s=i.cache.get,a=i.cache.set,o=l,l(t)};function l(e){const t=s(e);if(t)return t;const n=function(e,t){const{parseClassName:n,getClassGroupId:r,getConflictingClassGroupIds:i}=t,s=new Set;return e.trim().split(vf).map((e=>{const{modifiers:t,hasImportantModifier:i,baseClassName:s,maybePostfixModifierPosition:a}=n(e);let o=Boolean(a),l=r(o?s.substring(0,a):s);if(!l){if(!o)return{isTailwindClass:!1,originalClassName:e};if(l=r(s),!l)return{isTailwindClass:!1,originalClassName:e};o=!1}const c=function(e){if(e.length<=1)return e;const t=[];let n=[];return e.forEach((e=>{"["===e[0]?(t.push(...n.sort(),e),n=[]):n.push(e)})),t.push(...n.sort()),t}(t).join(":");return{isTailwindClass:!0,modifierId:i?c+mf:c,classGroupId:l,originalClassName:e,hasPostfixModifier:o}})).reverse().filter((e=>{if(!e.isTailwindClass)return!0;const{modifierId:t,classGroupId:n,hasPostfixModifier:r}=e,a=t+n;return!s.has(a)&&(s.add(a),i(n,r).forEach((e=>s.add(t+e))),!0)})).reverse().map((e=>e.originalClassName)).join(" ")}(e,i);return a(e,n),n}return function(){return o(_f.apply(null,arguments))}}function wf(e){const t=t=>t[e]||[];return t.isThemeGetter=!0,t}const Sf=/^\[(?:([a-z-]+):)?(.+)\]$/i,Pf=/^\d+\/\d+$/,Cf=new Set(["px","full","screen"]),Ef=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,xf=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,kf=/^(rgba?|hsla?|hwb|(ok)?(lab|lch))\(.+\)$/,Af=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,Tf=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/;function Ff(e){return Rf(e)||Cf.has(e)||Pf.test(e)}function If(e){return Hf(e,"length",Vf)}function Rf(e){return Boolean(e)&&!Number.isNaN(Number(e))}function Mf(e){return Hf(e,"number",Rf)}function Nf(e){return Boolean(e)&&Number.isInteger(Number(e))}function Df(e){return e.endsWith("%")&&Rf(e.slice(0,-1))}function Of(e){return Sf.test(e)}function Lf(e){return Ef.test(e)}const jf=new Set(["length","size","percentage"]);function Uf(e){return Hf(e,jf,Kf)}function Gf(e){return Hf(e,"position",Kf)}const Bf=new Set(["image","url"]);function Wf(e){return Hf(e,Bf,Yf)}function zf(e){return Hf(e,"",Xf)}function qf(){return!0}function Hf(e,t,n){const r=Sf.exec(e);return!!r&&(r[1]?"string"===typeof t?r[1]===t:t.has(r[1]):n(r[2]))}function Vf(e){return xf.test(e)&&!kf.test(e)}function Kf(){return!1}function Xf(e){return Af.test(e)}function Yf(e){return Tf.test(e)}Symbol.toStringTag;function Qf(){const e=wf("colors"),t=wf("spacing"),n=wf("blur"),r=wf("brightness"),i=wf("borderColor"),s=wf("borderRadius"),a=wf("borderSpacing"),o=wf("borderWidth"),l=wf("contrast"),c=wf("grayscale"),u=wf("hueRotate"),d=wf("invert"),h=wf("gap"),p=wf("gradientColorStops"),f=wf("gradientColorStopPositions"),m=wf("inset"),g=wf("margin"),v=wf("opacity"),_=wf("padding"),y=wf("saturate"),b=wf("scale"),w=wf("sepia"),S=wf("skew"),P=wf("space"),C=wf("translate"),E=()=>["auto",Of,t],x=()=>[Of,t],k=()=>["",Ff,If],A=()=>["auto",Rf,Of],T=()=>["","0",Of],F=()=>[Rf,Mf],I=()=>[Rf,Of];return{cacheSize:500,separator:":",theme:{colors:[qf],spacing:[Ff,If],blur:["none","",Lf,Of],brightness:F(),borderColor:[e],borderRadius:["none","","full",Lf,Of],borderSpacing:x(),borderWidth:k(),contrast:F(),grayscale:T(),hueRotate:I(),invert:T(),gap:x(),gradientColorStops:[e],gradientColorStopPositions:[Df,If],inset:E(),margin:E(),opacity:F(),padding:x(),saturate:F(),scale:F(),sepia:T(),skew:I(),space:x(),translate:x()},classGroups:{aspect:[{aspect:["auto","square","video",Of]}],container:["container"],columns:[{columns:[Lf]}],"break-after":[{"break-after":["auto","avoid","all","avoid-page","page","left","right","column"]}],"break-before":[{"break-before":["auto","avoid","all","avoid-page","page","left","right","column"]}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top",Of]}],overflow:[{overflow:["auto","hidden","clip","visible","scroll"]}],"overflow-x":[{"overflow-x":["auto","hidden","clip","visible","scroll"]}],"overflow-y":[{"overflow-y":["auto","hidden","clip","visible","scroll"]}],overscroll:[{overscroll:["auto","contain","none"]}],"overscroll-x":[{"overscroll-x":["auto","contain","none"]}],"overscroll-y":[{"overscroll-y":["auto","contain","none"]}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:[m]}],"inset-x":[{"inset-x":[m]}],"inset-y":[{"inset-y":[m]}],start:[{start:[m]}],end:[{end:[m]}],top:[{top:[m]}],right:[{right:[m]}],bottom:[{bottom:[m]}],left:[{left:[m]}],visibility:["visible","invisible","collapse"],z:[{z:["auto",Nf,Of]}],basis:[{basis:E()}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["wrap","wrap-reverse","nowrap"]}],flex:[{flex:["1","auto","initial","none",Of]}],grow:[{grow:T()}],shrink:[{shrink:T()}],order:[{order:["first","last","none",Nf,Of]}],"grid-cols":[{"grid-cols":[qf]}],"col-start-end":[{col:["auto",{span:["full",Nf,Of]},Of]}],"col-start":[{"col-start":A()}],"col-end":[{"col-end":A()}],"grid-rows":[{"grid-rows":[qf]}],"row-start-end":[{row:["auto",{span:[Nf,Of]},Of]}],"row-start":[{"row-start":A()}],"row-end":[{"row-end":A()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":["auto","min","max","fr",Of]}],"auto-rows":[{"auto-rows":["auto","min","max","fr",Of]}],gap:[{gap:[h]}],"gap-x":[{"gap-x":[h]}],"gap-y":[{"gap-y":[h]}],"justify-content":[{justify:["normal","start","end","center","between","around","evenly","stretch"]}],"justify-items":[{"justify-items":["start","end","center","stretch"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch"]}],"align-content":[{content:["normal","start","end","center","between","around","evenly","stretch","baseline"]}],"align-items":[{items:["start","end","center","baseline","stretch"]}],"align-self":[{self:["auto","start","end","center","stretch","baseline"]}],"place-content":[{"place-content":["start","end","center","between","around","evenly","stretch","baseline"]}],"place-items":[{"place-items":["start","end","center","baseline","stretch"]}],"place-self":[{"place-self":["auto","start","end","center","stretch"]}],p:[{p:[_]}],px:[{px:[_]}],py:[{py:[_]}],ps:[{ps:[_]}],pe:[{pe:[_]}],pt:[{pt:[_]}],pr:[{pr:[_]}],pb:[{pb:[_]}],pl:[{pl:[_]}],m:[{m:[g]}],mx:[{mx:[g]}],my:[{my:[g]}],ms:[{ms:[g]}],me:[{me:[g]}],mt:[{mt:[g]}],mr:[{mr:[g]}],mb:[{mb:[g]}],ml:[{ml:[g]}],"space-x":[{"space-x":[P]}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":[P]}],"space-y-reverse":["space-y-reverse"],w:[{w:["auto","min","max","fit","svw","lvw","dvw",Of,t]}],"min-w":[{"min-w":[Of,t,"min","max","fit"]}],"max-w":[{"max-w":[Of,t,"none","full","min","max","fit","prose",{screen:[Lf]},Lf]}],h:[{h:[Of,t,"auto","min","max","fit","svh","lvh","dvh"]}],"min-h":[{"min-h":[Of,t,"min","max","fit","svh","lvh","dvh"]}],"max-h":[{"max-h":[Of,t,"min","max","fit","svh","lvh","dvh"]}],size:[{size:[Of,t,"auto","min","max","fit"]}],"font-size":[{text:["base",Lf,If]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:["thin","extralight","light","normal","medium","semibold","bold","extrabold","black",Mf]}],"font-family":[{font:[qf]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractons"],tracking:[{tracking:["tighter","tight","normal","wide","wider","widest",Of]}],"line-clamp":[{"line-clamp":["none",Rf,Mf]}],leading:[{leading:["none","tight","snug","normal","relaxed","loose",Ff,Of]}],"list-image":[{"list-image":["none",Of]}],"list-style-type":[{list:["none","disc","decimal",Of]}],"list-style-position":[{list:["inside","outside"]}],"placeholder-color":[{placeholder:[e]}],"placeholder-opacity":[{"placeholder-opacity":[v]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"text-color":[{text:[e]}],"text-opacity":[{"text-opacity":[v]}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:["solid","dashed","dotted","double","none","wavy"]}],"text-decoration-thickness":[{decoration:["auto","from-font",Ff,If]}],"underline-offset":[{"underline-offset":["auto",Ff,Of]}],"text-decoration-color":[{decoration:[e]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:x()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",Of]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",Of]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-opacity":[{"bg-opacity":[v]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top",Gf]}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","round","space"]}]}],"bg-size":[{bg:["auto","cover","contain",Uf]}],"bg-image":[{bg:["none",{"gradient-to":["t","tr","r","br","b","bl","l","tl"]},Wf]}],"bg-color":[{bg:[e]}],"gradient-from-pos":[{from:[f]}],"gradient-via-pos":[{via:[f]}],"gradient-to-pos":[{to:[f]}],"gradient-from":[{from:[p]}],"gradient-via":[{via:[p]}],"gradient-to":[{to:[p]}],rounded:[{rounded:[s]}],"rounded-s":[{"rounded-s":[s]}],"rounded-e":[{"rounded-e":[s]}],"rounded-t":[{"rounded-t":[s]}],"rounded-r":[{"rounded-r":[s]}],"rounded-b":[{"rounded-b":[s]}],"rounded-l":[{"rounded-l":[s]}],"rounded-ss":[{"rounded-ss":[s]}],"rounded-se":[{"rounded-se":[s]}],"rounded-ee":[{"rounded-ee":[s]}],"rounded-es":[{"rounded-es":[s]}],"rounded-tl":[{"rounded-tl":[s]}],"rounded-tr":[{"rounded-tr":[s]}],"rounded-br":[{"rounded-br":[s]}],"rounded-bl":[{"rounded-bl":[s]}],"border-w":[{border:[o]}],"border-w-x":[{"border-x":[o]}],"border-w-y":[{"border-y":[o]}],"border-w-s":[{"border-s":[o]}],"border-w-e":[{"border-e":[o]}],"border-w-t":[{"border-t":[o]}],"border-w-r":[{"border-r":[o]}],"border-w-b":[{"border-b":[o]}],"border-w-l":[{"border-l":[o]}],"border-opacity":[{"border-opacity":[v]}],"border-style":[{border:["solid","dashed","dotted","double","none","hidden"]}],"divide-x":[{"divide-x":[o]}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":[o]}],"divide-y-reverse":["divide-y-reverse"],"divide-opacity":[{"divide-opacity":[v]}],"divide-style":[{divide:["solid","dashed","dotted","double","none"]}],"border-color":[{border:[i]}],"border-color-x":[{"border-x":[i]}],"border-color-y":[{"border-y":[i]}],"border-color-t":[{"border-t":[i]}],"border-color-r":[{"border-r":[i]}],"border-color-b":[{"border-b":[i]}],"border-color-l":[{"border-l":[i]}],"divide-color":[{divide:[i]}],"outline-style":[{outline:["","solid","dashed","dotted","double","none"]}],"outline-offset":[{"outline-offset":[Ff,Of]}],"outline-w":[{outline:[Ff,If]}],"outline-color":[{outline:[e]}],"ring-w":[{ring:k()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:[e]}],"ring-opacity":[{"ring-opacity":[v]}],"ring-offset-w":[{"ring-offset":[Ff,If]}],"ring-offset-color":[{"ring-offset":[e]}],shadow:[{shadow:["","inner","none",Lf,zf]}],"shadow-color":[{shadow:[qf]}],opacity:[{opacity:[v]}],"mix-blend":[{"mix-blend":["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity","plus-lighter","plus-darker"]}],"bg-blend":[{"bg-blend":["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"]}],filter:[{filter:["","none"]}],blur:[{blur:[n]}],brightness:[{brightness:[r]}],contrast:[{contrast:[l]}],"drop-shadow":[{"drop-shadow":["","none",Lf,Of]}],grayscale:[{grayscale:[c]}],"hue-rotate":[{"hue-rotate":[u]}],invert:[{invert:[d]}],saturate:[{saturate:[y]}],sepia:[{sepia:[w]}],"backdrop-filter":[{"backdrop-filter":["","none"]}],"backdrop-blur":[{"backdrop-blur":[n]}],"backdrop-brightness":[{"backdrop-brightness":[r]}],"backdrop-contrast":[{"backdrop-contrast":[l]}],"backdrop-grayscale":[{"backdrop-grayscale":[c]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[u]}],"backdrop-invert":[{"backdrop-invert":[d]}],"backdrop-opacity":[{"backdrop-opacity":[v]}],"backdrop-saturate":[{"backdrop-saturate":[y]}],"backdrop-sepia":[{"backdrop-sepia":[w]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":[a]}],"border-spacing-x":[{"border-spacing-x":[a]}],"border-spacing-y":[{"border-spacing-y":[a]}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["none","all","","colors","opacity","shadow","transform",Of]}],duration:[{duration:I()}],ease:[{ease:["linear","in","out","in-out",Of]}],delay:[{delay:I()}],animate:[{animate:["none","spin","ping","pulse","bounce",Of]}],transform:[{transform:["","gpu","none"]}],scale:[{scale:[b]}],"scale-x":[{"scale-x":[b]}],"scale-y":[{"scale-y":[b]}],rotate:[{rotate:[Nf,Of]}],"translate-x":[{"translate-x":[C]}],"translate-y":[{"translate-y":[C]}],"skew-x":[{"skew-x":[S]}],"skew-y":[{"skew-y":[S]}],"transform-origin":[{origin:["center","top","top-right","right","bottom-right","bottom","bottom-left","left","top-left",Of]}],accent:[{accent:["auto",e]}],appearance:[{appearance:["none","auto"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",Of]}],"caret-color":[{caret:[e]}],"pointer-events":[{"pointer-events":["none","auto"]}],resize:[{resize:["none","y","x",""]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":x()}],"scroll-mx":[{"scroll-mx":x()}],"scroll-my":[{"scroll-my":x()}],"scroll-ms":[{"scroll-ms":x()}],"scroll-me":[{"scroll-me":x()}],"scroll-mt":[{"scroll-mt":x()}],"scroll-mr":[{"scroll-mr":x()}],"scroll-mb":[{"scroll-mb":x()}],"scroll-ml":[{"scroll-ml":x()}],"scroll-p":[{"scroll-p":x()}],"scroll-px":[{"scroll-px":x()}],"scroll-py":[{"scroll-py":x()}],"scroll-ps":[{"scroll-ps":x()}],"scroll-pe":[{"scroll-pe":x()}],"scroll-pt":[{"scroll-pt":x()}],"scroll-pr":[{"scroll-pr":x()}],"scroll-pb":[{"scroll-pb":x()}],"scroll-pl":[{"scroll-pl":x()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",Of]}],fill:[{fill:[e,"none"]}],"stroke-w":[{stroke:[Ff,If,Mf]}],stroke:[{stroke:[e,"none"]}],sr:["sr-only","not-sr-only"],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]}}}const Jf=bf(Qf);function $f(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return Jf(of(t))}const Zf=sf("inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),em=t.forwardRef(((e,t)=>{let{className:n,variant:r,size:i,asChild:s=!1,...a}=e;const o=s?Yp:"button";return(0,jp.jsx)(o,{className:$f(Zf({variant:r,size:i,className:n})),ref:t,...a})}));em.displayName="Button";const tm=async e=>{try{const t=await async function(e,t,n){if(Sn(e.app))return Promise.reject(Fi(e,"operation-not-supported-in-this-environment"));const r=js(e);Mi(e,t,sa);const i=Ya(r,n);return new no(r,"signInViaPopup",t,i).executeNotNull()}(Sp,e),n=Ca(t);null!==n&&void 0!==n&&n.isNewUser&&cp(op(Pp,"users/".concat(t.user.uid)),{name:t.user.displayName,createdAt:bp,avatar:t.user.photoURL}),alert("You have successfully logged in.")}catch(cl){console.log(cl),alert("Something went wrong")}},nm=async()=>{await tm(new la)},rm=()=>(0,jp.jsxs)(em,{type:"button",className:"flex w-full",onClick:nm,size:"lg",variant:"outline",children:[(0,jp.jsx)(Vp,{className:"w-4 h-4 mr-2"}),"Sign In With Google"]}),im=e=>{let{children:n}=e;const{profile:r,isLoading:i}=(0,t.useContext)(Up),s=$();return(0,t.useEffect)((()=>{i||r||s("/read-pdf-by-page/login")}),[i,r,s]),(0,jp.jsx)(jp.Fragment,{children:i?(0,jp.jsxs)("p",{className:"text-center animate-bounce mt-4",children:["Loading... ",(0,jp.jsx)("div",{className:"animate-spin",children:"|"})]}):n})};var sm=__webpack_require__(749);const am=sm;am.GlobalWorkerOptions.workerSrc="//cdnjs.cloudflare.com/ajax/libs/pdf.js/".concat(am.version,"/pdf.worker.js");const om=async(e,t)=>{try{if(!e)throw new Error("No file provided.");const n=URL.createObjectURL(e),r=am.getDocument(n),i=await r.promise,s=i.numPages,a=[];for(let e=1;e<=s;e++){const n=await i.getPage(e),r=(await n.getTextContent()).items.map((e=>e.str)).join(" ");a.push(r);t&&t(e/s*100)}return URL.revokeObjectURL(n),a}catch(cl){return console.error("Error extracting text from PDF:",cl),[]}},lm=(0,t.createContext)({activePDFContent:null,setActivePDFContent:()=>{},activePDFTitle:null,setActivePDFTitle:()=>{},activePDFPage:0,setActivePDFPage:()=>{},resetPDF:()=>{},setNewPDF:()=>{},isFileLoading:!1,progress:0,setIsFileLoading:()=>{},setProgress:()=>{},setFileLoadingType:()=>{},fileLoadingType:"..."}),cm=e=>{let{children:n}=e;const{profile:r}=(0,t.useContext)(Up),[i,s]=(0,t.useState)(null),[a,o]=(0,t.useState)(null),[l,c]=(0,t.useState)(0),[u,d]=(0,t.useState)(!1),[h,p]=(0,t.useState)(0),[f,m]=(0,t.useState)("...");(0,t.useEffect)((()=>{if(r)for(const e of r.savedPdfs)e.title===a&&c(e.savedPage)}),[r,a]);const g=()=>{s(null),o(null),c(0),p(0),d(!1),m("...");const e=document.getElementById("fileInput");e instanceof HTMLInputElement&&(e.value="")},v=async e=>{if(null!==e)if(d(!0),m("Extracting text..."),"application/json"===e.type){var t;o(null!==(t=null===e||void 0===e?void 0:e.name.replace(".json",""))&&void 0!==t?t:"Unknown File");const n=JSON.parse(await e.text());s(n),d(!1)}else"application/pdf"===e.type&&om(e,p).then((t=>{var n;s(t),o(null!==(n=null===e||void 0===e?void 0:e.name.replace(".pdf",""))&&void 0!==n?n:"Unknown File"),d(!1)})).catch((e=>{console.error("Failed to extract text from pdf",e)}));else console.error("setNewPDF was called with a null File.")},_=(0,t.useMemo)((()=>({activePDFContent:i,setActivePDFContent:s,activePDFTitle:a,setActivePDFTitle:o,activePDFPage:l,setActivePDFPage:c,resetPDF:g,setNewPDF:v,isFileLoading:u,progress:h,setIsFileLoading:d,setProgress:p,setFileLoadingType:m,fileLoadingType:f})),[i,a,l,u,h,f]);return(0,jp.jsx)(lm.Provider,{value:_,children:n})},um=()=>{const[e,n]=(0,t.useState)([]),{activePDFContent:r,activePDFTitle:i,activePDFPage:s}=(0,t.useContext)(lm);return(0,t.useEffect)((()=>{n(r?[...r]:[])}),[r]),(0,jp.jsxs)("div",{className:"mt-8 mb-24",children:[(0,jp.jsx)("div",{children:(0,jp.jsx)("h3",{className:"mb-4 text-2xl font-semibold",children:i&&"".concat(i," - ").concat(s)})}),(0,jp.jsxs)("article",{className:"flex flex-col gap-4 text-justify bg-secondary",children:[e.length<1&&(0,jp.jsx)("span",{className:"italic shadow-inner",children:"Add new PDF Please"}),e.map(((e,t)=>(0,jp.jsxs)("p",{id:"page-"+(t+1),className:t+1>=s?" bg-light px-4 py-10 rounded-sm shadow-inner":"hide-page",lang:"tr",children:[e,(0,jp.jsx)("span",{"aria-hidden":"true",className:"float-right mt-6 mr-2 text-sm italic",children:t+1},"pageNum-"+t)]},"p"+t)))]})]})};function dm(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],r=[];const i=()=>{const n=r.map((e=>t.createContext(e)));return function(r){const i=(null===r||void 0===r?void 0:r[e])||n;return t.useMemo((()=>({["__scope".concat(e)]:{...r,[e]:i}})),[r,i])}};return i.scopeName=e,[function(n,i){const s=t.createContext(i),a=r.length;function o(n){const{scope:r,children:i,...o}=n,l=(null===r||void 0===r?void 0:r[e][a])||s,c=t.useMemo((()=>o),Object.values(o));return(0,jp.jsx)(l.Provider,{value:c,children:i})}return r=[...r,i],o.displayName=n+"Provider",[o,function(r,o){const l=(null===o||void 0===o?void 0:o[e][a])||s,c=t.useContext(l);if(c)return c;if(void 0!==i)return i;throw new Error("`".concat(r,"` must be used within `").concat(n,"`"))}]},hm(i,...n)]}function hm(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];const i=n[0];if(1===n.length)return i;const s=()=>{const e=n.map((e=>({useScope:e(),scopeName:e.scopeName})));return function(n){const r=e.reduce(((e,t)=>{let{useScope:r,scopeName:i}=t;return{...e,...r(n)["__scope".concat(i)]}}),{});return t.useMemo((()=>({["__scope".concat(i.scopeName)]:r})),[r])}};return s.scopeName=i.scopeName,s}function pm(e,t){let{checkForDefaultPrevented:n=!0}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return function(r){if(null===e||void 0===e||e(r),!1===n||!r.defaultPrevented)return null===t||void 0===t?void 0:t(r)}}var fm=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","span","svg","ul"].reduce(((e,n)=>{const r=t.forwardRef(((e,t)=>{const{asChild:r,...i}=e,s=r?Yp:n;return"undefined"!==typeof window&&(window[Symbol.for("radix-ui")]=!0),(0,jp.jsx)(s,{...i,ref:t})}));return r.displayName="Primitive.".concat(n),{...e,[n]:r}}),{});function mm(e,t){e&&i.flushSync((()=>e.dispatchEvent(t)))}function gm(e){const n=t.useRef(e);return t.useEffect((()=>{n.current=e})),t.useMemo((()=>function(){for(var e,t=arguments.length,r=new Array(t),i=0;i<t;i++)r[i]=arguments[i];return null===(e=n.current)||void 0===e?void 0:e.call(n,...r)}),[])}function vm(e){let{prop:n,defaultProp:r,onChange:i=(()=>{})}=e;const[s,a]=function(e){let{defaultProp:n,onChange:r}=e;const i=t.useState(n),[s]=i,a=t.useRef(s),o=gm(r);return t.useEffect((()=>{a.current!==s&&(o(s),a.current=s)}),[s,a,o]),i}({defaultProp:r,onChange:i}),o=void 0!==n,l=o?n:s,c=gm(i);return[l,t.useCallback((e=>{if(o){const t="function"===typeof e?e(n):e;t!==n&&c(t)}else a(e)}),[o,n,a,c])]}var _m=t.createContext(void 0);var ym=Boolean(null===globalThis||void 0===globalThis?void 0:globalThis.document)?t.useLayoutEffect:()=>{};var bm=e=>{const{present:n,children:r}=e,s=function(e){const[n,r]=t.useState(),s=t.useRef({}),a=t.useRef(e),o=t.useRef("none"),l=e?"mounted":"unmounted",[c,u]=function(e,n){return t.useReducer(((e,t)=>{const r=n[e][t];return null!==r&&void 0!==r?r:e}),e)}(l,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return t.useEffect((()=>{const e=wm(s.current);o.current="mounted"===c?e:"none"}),[c]),ym((()=>{const t=s.current,n=a.current;if(n!==e){const r=o.current,i=wm(t);if(e)u("MOUNT");else if("none"===i||"none"===(null===t||void 0===t?void 0:t.display))u("UNMOUNT");else{u(n&&r!==i?"ANIMATION_OUT":"UNMOUNT")}a.current=e}}),[e,u]),ym((()=>{if(n){const e=e=>{const t=wm(s.current).includes(e.animationName);e.target===n&&t&&i.flushSync((()=>u("ANIMATION_END")))},t=e=>{e.target===n&&(o.current=wm(s.current))};return n.addEventListener("animationstart",t),n.addEventListener("animationcancel",e),n.addEventListener("animationend",e),()=>{n.removeEventListener("animationstart",t),n.removeEventListener("animationcancel",e),n.removeEventListener("animationend",e)}}u("ANIMATION_END")}),[n,u]),{isPresent:["mounted","unmountSuspended"].includes(c),ref:t.useCallback((e=>{e&&(s.current=getComputedStyle(e)),r(e)}),[])}}(n),a="function"===typeof r?r({present:s.isPresent}):t.Children.only(r),o=Xp(s.ref,function(e){var t,n;let r=null===(t=Object.getOwnPropertyDescriptor(e.props,"ref"))||void 0===t?void 0:t.get,i=r&&"isReactWarning"in r&&r.isReactWarning;if(i)return e.ref;if(r=null===(n=Object.getOwnPropertyDescriptor(e,"ref"))||void 0===n?void 0:n.get,i=r&&"isReactWarning"in r&&r.isReactWarning,i)return e.props.ref;return e.props.ref||e.ref}(a));return"function"===typeof r||s.isPresent?t.cloneElement(a,{ref:o}):null};function wm(e){return(null===e||void 0===e?void 0:e.animationName)||"none"}bm.displayName="Presence";var Sm=n["useId".toString()]||(()=>{}),Pm=0;function Cm(e){const[n,r]=t.useState(Sm());return ym((()=>{e||r((e=>null!==e&&void 0!==e?e:String(Pm++)))}),[e]),e||(n?"radix-".concat(n):"")}function Em(e){const n=e+"CollectionProvider",[r,i]=dm(n),[s,a]=r(n,{collectionRef:{current:null},itemMap:new Map}),o=e=>{const{scope:n,children:r}=e,i=t.useRef(null),a=t.useRef(new Map).current;return(0,jp.jsx)(s,{scope:n,itemMap:a,collectionRef:i,children:r})};o.displayName=n;const l=e+"CollectionSlot",c=t.forwardRef(((e,t)=>{const{scope:n,children:r}=e,i=Xp(t,a(l,n).collectionRef);return(0,jp.jsx)(Yp,{ref:i,children:r})}));c.displayName=l;const u=e+"CollectionItemSlot",d="data-radix-collection-item",h=t.forwardRef(((e,n)=>{const{scope:r,children:i,...s}=e,o=t.useRef(null),l=Xp(n,o),c=a(u,r);return t.useEffect((()=>(c.itemMap.set(o,{ref:o,...s}),()=>{c.itemMap.delete(o)}))),(0,jp.jsx)(Yp,{[d]:"",ref:l,children:i})}));return h.displayName=u,[{Provider:o,Slot:c,ItemSlot:h},function(n){const r=a(e+"CollectionConsumer",n);return t.useCallback((()=>{const e=r.collectionRef.current;if(!e)return[];const t=Array.from(e.querySelectorAll("[".concat(d,"]")));return Array.from(r.itemMap.values()).sort(((e,n)=>t.indexOf(e.ref.current)-t.indexOf(n.ref.current)))}),[r.collectionRef,r.itemMap])},i]}var xm,km="dismissableLayer.update",Am="dismissableLayer.pointerDownOutside",Tm="dismissableLayer.focusOutside",Fm=t.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),Im=t.forwardRef(((e,n)=>{var r;const{disableOutsidePointerEvents:i=!1,onEscapeKeyDown:s,onPointerDownOutside:a,onFocusOutside:o,onInteractOutside:l,onDismiss:c,...u}=e,d=t.useContext(Fm),[h,p]=t.useState(null),f=null!==(r=null===h||void 0===h?void 0:h.ownerDocument)&&void 0!==r?r:null===globalThis||void 0===globalThis?void 0:globalThis.document,[,m]=t.useState({}),g=Xp(n,(e=>p(e))),v=Array.from(d.layers),[_]=[...d.layersWithOutsidePointerEventsDisabled].slice(-1),y=v.indexOf(_),b=h?v.indexOf(h):-1,w=d.layersWithOutsidePointerEventsDisabled.size>0,S=b>=y,P=function(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null===globalThis||void 0===globalThis?void 0:globalThis.document;const r=gm(e),i=t.useRef(!1),s=t.useRef((()=>{}));return t.useEffect((()=>{const e=e=>{if(e.target&&!i.current){let t=function(){Nm(Am,r,i,{discrete:!0})};const i={originalEvent:e};"touch"===e.pointerType?(n.removeEventListener("click",s.current),s.current=t,n.addEventListener("click",s.current,{once:!0})):t()}else n.removeEventListener("click",s.current);i.current=!1},t=window.setTimeout((()=>{n.addEventListener("pointerdown",e)}),0);return()=>{window.clearTimeout(t),n.removeEventListener("pointerdown",e),n.removeEventListener("click",s.current)}}),[n,r]),{onPointerDownCapture:()=>i.current=!0}}((e=>{const t=e.target,n=[...d.branches].some((e=>e.contains(t)));S&&!n&&(null===a||void 0===a||a(e),null===l||void 0===l||l(e),e.defaultPrevented||null===c||void 0===c||c())}),f),C=function(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null===globalThis||void 0===globalThis?void 0:globalThis.document;const r=gm(e),i=t.useRef(!1);return t.useEffect((()=>{const e=e=>{if(e.target&&!i.current){Nm(Tm,r,{originalEvent:e},{discrete:!1})}};return n.addEventListener("focusin",e),()=>n.removeEventListener("focusin",e)}),[n,r]),{onFocusCapture:()=>i.current=!0,onBlurCapture:()=>i.current=!1}}((e=>{const t=e.target;[...d.branches].some((e=>e.contains(t)))||(null===o||void 0===o||o(e),null===l||void 0===l||l(e),e.defaultPrevented||null===c||void 0===c||c())}),f);return function(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null===globalThis||void 0===globalThis?void 0:globalThis.document;const r=gm(e);t.useEffect((()=>{const e=e=>{"Escape"===e.key&&r(e)};return n.addEventListener("keydown",e,{capture:!0}),()=>n.removeEventListener("keydown",e,{capture:!0})}),[r,n])}((e=>{b===d.layers.size-1&&(null===s||void 0===s||s(e),!e.defaultPrevented&&c&&(e.preventDefault(),c()))}),f),t.useEffect((()=>{if(h)return i&&(0===d.layersWithOutsidePointerEventsDisabled.size&&(xm=f.body.style.pointerEvents,f.body.style.pointerEvents="none"),d.layersWithOutsidePointerEventsDisabled.add(h)),d.layers.add(h),Mm(),()=>{i&&1===d.layersWithOutsidePointerEventsDisabled.size&&(f.body.style.pointerEvents=xm)}}),[h,f,i,d]),t.useEffect((()=>()=>{h&&(d.layers.delete(h),d.layersWithOutsidePointerEventsDisabled.delete(h),Mm())}),[h,d]),t.useEffect((()=>{const e=()=>m({});return document.addEventListener(km,e),()=>document.removeEventListener(km,e)}),[]),(0,jp.jsx)(fm.div,{...u,ref:g,style:{pointerEvents:w?S?"auto":"none":void 0,...e.style},onFocusCapture:pm(e.onFocusCapture,C.onFocusCapture),onBlurCapture:pm(e.onBlurCapture,C.onBlurCapture),onPointerDownCapture:pm(e.onPointerDownCapture,P.onPointerDownCapture)})}));Im.displayName="DismissableLayer";var Rm=t.forwardRef(((e,n)=>{const r=t.useContext(Fm),i=t.useRef(null),s=Xp(n,i);return t.useEffect((()=>{const e=i.current;if(e)return r.branches.add(e),()=>{r.branches.delete(e)}}),[r.branches]),(0,jp.jsx)(fm.div,{...e,ref:s})}));function Mm(){const e=new CustomEvent(km);document.dispatchEvent(e)}function Nm(e,t,n,r){let{discrete:i}=r;const s=n.originalEvent.target,a=new CustomEvent(e,{bubbles:!1,cancelable:!0,detail:n});t&&s.addEventListener(e,t,{once:!0}),i?mm(s,a):s.dispatchEvent(a)}Rm.displayName="DismissableLayerBranch";var Dm=Im,Om=Rm;function Lm(e){const n=t.useRef({value:e,previous:e});return t.useMemo((()=>(n.current.value!==e&&(n.current.previous=n.current.value,n.current.value=e),n.current.previous)),[e])}var jm=t.forwardRef(((e,t)=>(0,jp.jsx)(fm.span,{...e,ref:t,style:{position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal",...e.style}})));jm.displayName="VisuallyHidden";var Um=jm,Gm="NavigationMenu",[Bm,Wm,zm]=Em(Gm),[qm,Hm,Vm]=Em(Gm),[Km,Xm]=dm(Gm,[zm,Vm]),[Ym,Qm]=Km(Gm),[Jm,$m]=Km(Gm),Zm=t.forwardRef(((e,n)=>{const{__scopeNavigationMenu:r,value:i,onValueChange:s,defaultValue:a,delayDuration:o=200,skipDelayDuration:l=300,orientation:c="horizontal",dir:u,...d}=e,[h,p]=t.useState(null),f=Xp(n,(e=>p(e))),m=function(e){const n=t.useContext(_m);return e||n||"ltr"}(u),g=t.useRef(0),v=t.useRef(0),_=t.useRef(0),[y,b]=t.useState(!0),[w="",S]=vm({prop:i,onChange:e=>{const t=l>0;""!==e?(window.clearTimeout(_.current),t&&b(!1)):(window.clearTimeout(_.current),_.current=window.setTimeout((()=>b(!0)),l)),null===s||void 0===s||s(e)},defaultProp:a}),P=t.useCallback((()=>{window.clearTimeout(v.current),v.current=window.setTimeout((()=>S("")),150)}),[S]),C=t.useCallback((e=>{window.clearTimeout(v.current),S(e)}),[S]),E=t.useCallback((e=>{w===e?window.clearTimeout(v.current):g.current=window.setTimeout((()=>{window.clearTimeout(v.current),S(e)}),o)}),[w,S,o]);return t.useEffect((()=>()=>{window.clearTimeout(g.current),window.clearTimeout(v.current),window.clearTimeout(_.current)}),[]),(0,jp.jsx)(ng,{scope:r,isRootMenu:!0,value:w,dir:m,orientation:c,rootNavigationMenu:h,onTriggerEnter:e=>{window.clearTimeout(g.current),y?E(e):C(e)},onTriggerLeave:()=>{window.clearTimeout(g.current),P()},onContentEnter:()=>window.clearTimeout(v.current),onContentLeave:P,onItemSelect:e=>{S((t=>t===e?"":e))},onItemDismiss:()=>S(""),children:(0,jp.jsx)(fm.nav,{"aria-label":"Main","data-orientation":c,dir:m,...d,ref:f})})}));Zm.displayName=Gm;var eg="NavigationMenuSub",tg=t.forwardRef(((e,t)=>{const{__scopeNavigationMenu:n,value:r,onValueChange:i,defaultValue:s,orientation:a="horizontal",...o}=e,l=Qm(eg,n),[c="",u]=vm({prop:r,onChange:i,defaultProp:s});return(0,jp.jsx)(ng,{scope:n,isRootMenu:!1,value:c,dir:l.dir,orientation:a,rootNavigationMenu:l.rootNavigationMenu,onTriggerEnter:e=>u(e),onItemSelect:e=>u(e),onItemDismiss:()=>u(""),children:(0,jp.jsx)(fm.div,{"data-orientation":a,...o,ref:t})})}));tg.displayName=eg;var ng=e=>{const{scope:n,isRootMenu:r,rootNavigationMenu:i,dir:s,orientation:a,children:o,value:l,onItemSelect:c,onItemDismiss:u,onTriggerEnter:d,onTriggerLeave:h,onContentEnter:p,onContentLeave:f}=e,[m,g]=t.useState(null),[v,_]=t.useState(new Map),[y,b]=t.useState(null);return(0,jp.jsx)(Ym,{scope:n,isRootMenu:r,rootNavigationMenu:i,value:l,previousValue:Lm(l),baseId:Cm(),dir:s,orientation:a,viewport:m,onViewportChange:g,indicatorTrack:y,onIndicatorTrackChange:b,onTriggerEnter:gm(d),onTriggerLeave:gm(h),onContentEnter:gm(p),onContentLeave:gm(f),onItemSelect:gm(c),onItemDismiss:gm(u),onViewportContentChange:t.useCallback(((e,t)=>{_((n=>(n.set(e,t),new Map(n))))}),[]),onViewportContentRemove:t.useCallback((e=>{_((t=>t.has(e)?(t.delete(e),new Map(t)):t))}),[]),children:(0,jp.jsx)(Bm.Provider,{scope:n,children:(0,jp.jsx)(Jm,{scope:n,items:v,children:o})})})},rg="NavigationMenuList",ig=t.forwardRef(((e,t)=>{const{__scopeNavigationMenu:n,...r}=e,i=Qm(rg,n),s=(0,jp.jsx)(fm.ul,{"data-orientation":i.orientation,...r,ref:t});return(0,jp.jsx)(fm.div,{style:{position:"relative"},ref:i.onIndicatorTrackChange,children:(0,jp.jsx)(Bm.Slot,{scope:n,children:i.isRootMenu?(0,jp.jsx)(Cg,{asChild:!0,children:s}):s})})}));ig.displayName=rg;var sg="NavigationMenuItem",[ag,og]=Km(sg),lg=t.forwardRef(((e,n)=>{const{__scopeNavigationMenu:r,value:i,...s}=e,a=Cm(),o=i||a||"LEGACY_REACT_AUTO_VALUE",l=t.useRef(null),c=t.useRef(null),u=t.useRef(null),d=t.useRef((()=>{})),h=t.useRef(!1),p=t.useCallback((function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"start";if(l.current){d.current();const t=kg(l.current);t.length&&Ag("start"===e?t:t.reverse())}}),[]),f=t.useCallback((()=>{if(l.current){const e=kg(l.current);e.length&&(d.current=function(e){return e.forEach((e=>{e.dataset.tabindex=e.getAttribute("tabindex")||"",e.setAttribute("tabindex","-1")})),()=>{e.forEach((e=>{const t=e.dataset.tabindex;e.setAttribute("tabindex",t)}))}}(e))}}),[]);return(0,jp.jsx)(ag,{scope:r,value:o,triggerRef:c,contentRef:l,focusProxyRef:u,wasEscapeCloseRef:h,onEntryKeyDown:p,onFocusProxyEnter:p,onRootContentClose:f,onContentFocusOutside:f,children:(0,jp.jsx)(fm.li,{...s,ref:n})})}));lg.displayName=sg;var cg="NavigationMenuTrigger",ug=t.forwardRef(((e,n)=>{const{__scopeNavigationMenu:r,disabled:i,...s}=e,a=Qm(cg,e.__scopeNavigationMenu),o=og(cg,e.__scopeNavigationMenu),l=t.useRef(null),c=Xp(l,o.triggerRef,n),u=Ig(a.baseId,o.value),d=Rg(a.baseId,o.value),h=t.useRef(!1),p=t.useRef(!1),f=o.value===a.value;return(0,jp.jsxs)(jp.Fragment,{children:[(0,jp.jsx)(Bm.ItemSlot,{scope:r,value:o.value,children:(0,jp.jsx)(xg,{asChild:!0,children:(0,jp.jsx)(fm.button,{id:u,disabled:i,"data-disabled":i?"":void 0,"data-state":Fg(f),"aria-expanded":f,"aria-controls":d,...s,ref:c,onPointerEnter:pm(e.onPointerEnter,(()=>{p.current=!1,o.wasEscapeCloseRef.current=!1})),onPointerMove:pm(e.onPointerMove,Mg((()=>{i||p.current||o.wasEscapeCloseRef.current||h.current||(a.onTriggerEnter(o.value),h.current=!0)}))),onPointerLeave:pm(e.onPointerLeave,Mg((()=>{i||(a.onTriggerLeave(),h.current=!1)}))),onClick:pm(e.onClick,(()=>{a.onItemSelect(o.value),p.current=f})),onKeyDown:pm(e.onKeyDown,(e=>{const t={horizontal:"ArrowDown",vertical:"rtl"===a.dir?"ArrowLeft":"ArrowRight"}[a.orientation];f&&e.key===t&&(o.onEntryKeyDown(),e.preventDefault())}))})})}),f&&(0,jp.jsxs)(jp.Fragment,{children:[(0,jp.jsx)(Um,{"aria-hidden":!0,tabIndex:0,ref:o.focusProxyRef,onFocus:e=>{const t=o.contentRef.current,n=e.relatedTarget,r=n===l.current,i=null===t||void 0===t?void 0:t.contains(n);!r&&i||o.onFocusProxyEnter(r?"start":"end")}}),a.viewport&&(0,jp.jsx)("span",{"aria-owns":d})]})]})}));ug.displayName=cg;var dg="navigationMenu.linkSelect",hg=t.forwardRef(((e,t)=>{const{__scopeNavigationMenu:n,active:r,onSelect:i,...s}=e;return(0,jp.jsx)(xg,{asChild:!0,children:(0,jp.jsx)(fm.a,{"data-active":r?"":void 0,"aria-current":r?"page":void 0,...s,ref:t,onClick:pm(e.onClick,(e=>{const t=e.target,n=new CustomEvent(dg,{bubbles:!0,cancelable:!0});if(t.addEventListener(dg,(e=>null===i||void 0===i?void 0:i(e)),{once:!0}),mm(t,n),!n.defaultPrevented&&!e.metaKey){mm(t,new CustomEvent(yg,{bubbles:!0,cancelable:!0}))}}),{checkForDefaultPrevented:!1})})})}));hg.displayName="NavigationMenuLink";var pg="NavigationMenuIndicator",fg=t.forwardRef(((e,t)=>{const{forceMount:n,...r}=e,s=Qm(pg,e.__scopeNavigationMenu),a=Boolean(s.value);return s.indicatorTrack?i.createPortal((0,jp.jsx)(bm,{present:n||a,children:(0,jp.jsx)(mg,{...r,ref:t})}),s.indicatorTrack):null}));fg.displayName=pg;var mg=t.forwardRef(((e,n)=>{const{__scopeNavigationMenu:r,...i}=e,s=Qm(pg,r),a=Wm(r),[o,l]=t.useState(null),[c,u]=t.useState(null),d="horizontal"===s.orientation,h=Boolean(s.value);t.useEffect((()=>{var e;const t=null===(e=a().find((e=>e.value===s.value)))||void 0===e?void 0:e.ref.current;t&&l(t)}),[a,s.value]);const p=()=>{o&&u({size:d?o.offsetWidth:o.offsetHeight,offset:d?o.offsetLeft:o.offsetTop})};return Tg(o,p),Tg(s.indicatorTrack,p),c?(0,jp.jsx)(fm.div,{"aria-hidden":!0,"data-state":h?"visible":"hidden","data-orientation":s.orientation,...i,ref:n,style:{position:"absolute",...d?{left:0,width:c.size+"px",transform:"translateX(".concat(c.offset,"px)")}:{top:0,height:c.size+"px",transform:"translateY(".concat(c.offset,"px)")},...i.style}}):null})),gg="NavigationMenuContent",vg=t.forwardRef(((e,t)=>{const{forceMount:n,...r}=e,i=Qm(gg,e.__scopeNavigationMenu),s=og(gg,e.__scopeNavigationMenu),a=Xp(s.contentRef,t),o=s.value===i.value,l={value:s.value,triggerRef:s.triggerRef,focusProxyRef:s.focusProxyRef,wasEscapeCloseRef:s.wasEscapeCloseRef,onContentFocusOutside:s.onContentFocusOutside,onRootContentClose:s.onRootContentClose,...r};return i.viewport?(0,jp.jsx)(_g,{forceMount:n,...l,ref:a}):(0,jp.jsx)(bm,{present:n||o,children:(0,jp.jsx)(bg,{"data-state":Fg(o),...l,ref:a,onPointerEnter:pm(e.onPointerEnter,i.onContentEnter),onPointerLeave:pm(e.onPointerLeave,Mg(i.onContentLeave)),style:{pointerEvents:!o&&i.isRootMenu?"none":void 0,...l.style}})})}));vg.displayName=gg;var _g=t.forwardRef(((e,t)=>{const n=Qm(gg,e.__scopeNavigationMenu),{onViewportContentChange:r,onViewportContentRemove:i}=n;return ym((()=>{r(e.value,{ref:t,...e})}),[e,t,r]),ym((()=>()=>i(e.value)),[e.value,i]),null})),yg="navigationMenu.rootContentDismiss",bg=t.forwardRef(((e,n)=>{const{__scopeNavigationMenu:r,value:i,triggerRef:s,focusProxyRef:a,wasEscapeCloseRef:o,onRootContentClose:l,onContentFocusOutside:c,...u}=e,d=Qm(gg,r),h=t.useRef(null),p=Xp(h,n),f=Ig(d.baseId,i),m=Rg(d.baseId,i),g=Wm(r),v=t.useRef(null),{onItemDismiss:_}=d;t.useEffect((()=>{const e=h.current;if(d.isRootMenu&&e){const t=()=>{var t;_(),l(),e.contains(document.activeElement)&&(null===(t=s.current)||void 0===t||t.focus())};return e.addEventListener(yg,t),()=>e.removeEventListener(yg,t)}}),[d.isRootMenu,e.value,s,_,l]);const y=t.useMemo((()=>{const e=g().map((e=>e.value));"rtl"===d.dir&&e.reverse();const t=e.indexOf(d.value),n=e.indexOf(d.previousValue),r=i===d.value,s=n===e.indexOf(i);if(!r&&!s)return v.current;const a=(()=>{if(t!==n){if(r&&-1!==n)return t>n?"from-end":"from-start";if(s&&-1!==t)return t>n?"to-start":"to-end"}return null})();return v.current=a,a}),[d.previousValue,d.value,d.dir,g,i]);return(0,jp.jsx)(Cg,{asChild:!0,children:(0,jp.jsx)(Im,{id:m,"aria-labelledby":f,"data-motion":y,"data-orientation":d.orientation,...u,ref:p,disableOutsidePointerEvents:!1,onDismiss:()=>{var e;const t=new Event(yg,{bubbles:!0,cancelable:!0});null===(e=h.current)||void 0===e||e.dispatchEvent(t)},onFocusOutside:pm(e.onFocusOutside,(e=>{var t;c();const n=e.target;null!==(t=d.rootNavigationMenu)&&void 0!==t&&t.contains(n)&&e.preventDefault()})),onPointerDownOutside:pm(e.onPointerDownOutside,(e=>{var t;const n=e.target,r=g().some((e=>{var t;return null===(t=e.ref.current)||void 0===t?void 0:t.contains(n)})),i=d.isRootMenu&&(null===(t=d.viewport)||void 0===t?void 0:t.contains(n));(r||i||!d.isRootMenu)&&e.preventDefault()})),onKeyDown:pm(e.onKeyDown,(e=>{const t=e.altKey||e.ctrlKey||e.metaKey;if("Tab"===e.key&&!t){const t=kg(e.currentTarget),r=document.activeElement,i=t.findIndex((e=>e===r));var n;if(Ag(e.shiftKey?t.slice(0,i).reverse():t.slice(i+1,t.length)))e.preventDefault();else null===(n=a.current)||void 0===n||n.focus()}})),onEscapeKeyDown:pm(e.onEscapeKeyDown,(e=>{o.current=!0}))})})})),wg="NavigationMenuViewport",Sg=t.forwardRef(((e,t)=>{const{forceMount:n,...r}=e,i=Qm(wg,e.__scopeNavigationMenu),s=Boolean(i.value);return(0,jp.jsx)(bm,{present:n||s,children:(0,jp.jsx)(Pg,{...r,ref:t})})}));Sg.displayName=wg;var Pg=t.forwardRef(((e,n)=>{const{__scopeNavigationMenu:r,children:i,...s}=e,a=Qm(wg,r),o=Xp(n,a.onViewportChange),l=$m(gg,e.__scopeNavigationMenu),[c,u]=t.useState(null),[d,h]=t.useState(null),p=c?(null===c||void 0===c?void 0:c.width)+"px":void 0,f=c?(null===c||void 0===c?void 0:c.height)+"px":void 0,m=Boolean(a.value),g=m?a.value:a.previousValue;return Tg(d,(()=>{d&&u({width:d.offsetWidth,height:d.offsetHeight})})),(0,jp.jsx)(fm.div,{"data-state":Fg(m),"data-orientation":a.orientation,...s,ref:o,style:{pointerEvents:!m&&a.isRootMenu?"none":void 0,"--radix-navigation-menu-viewport-width":p,"--radix-navigation-menu-viewport-height":f,...s.style},onPointerEnter:pm(e.onPointerEnter,a.onContentEnter),onPointerLeave:pm(e.onPointerLeave,Mg(a.onContentLeave)),children:Array.from(l.items).map((e=>{let[t,{ref:n,forceMount:r,...i}]=e;const s=g===t;return(0,jp.jsx)(bm,{present:r||s,children:(0,jp.jsx)(bg,{...i,ref:Kp(n,(e=>{s&&e&&h(e)}))})},t)}))})})),Cg=t.forwardRef(((e,t)=>{const{__scopeNavigationMenu:n,...r}=e,i=Qm("FocusGroup",n);return(0,jp.jsx)(qm.Provider,{scope:n,children:(0,jp.jsx)(qm.Slot,{scope:n,children:(0,jp.jsx)(fm.div,{dir:i.dir,...r,ref:t})})})})),Eg=["ArrowRight","ArrowLeft","ArrowUp","ArrowDown"],xg=t.forwardRef(((e,t)=>{const{__scopeNavigationMenu:n,...r}=e,i=Hm(n),s=Qm("FocusGroupItem",n);return(0,jp.jsx)(qm.ItemSlot,{scope:n,children:(0,jp.jsx)(fm.button,{...r,ref:t,onKeyDown:pm(e.onKeyDown,(e=>{if(["Home","End",...Eg].includes(e.key)){let t=i().map((e=>e.ref.current));if(["rtl"===s.dir?"ArrowRight":"ArrowLeft","ArrowUp","End"].includes(e.key)&&t.reverse(),Eg.includes(e.key)){const n=t.indexOf(e.currentTarget);t=t.slice(n+1)}setTimeout((()=>Ag(t))),e.preventDefault()}}))})})}));function kg(e){const t=[],n=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,{acceptNode:e=>{const t="INPUT"===e.tagName&&"hidden"===e.type;return e.disabled||e.hidden||t?NodeFilter.FILTER_SKIP:e.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)t.push(n.currentNode);return t}function Ag(e){const t=document.activeElement;return e.some((e=>e===t||(e.focus(),document.activeElement!==t)))}function Tg(e,t){const n=gm(t);ym((()=>{let t=0;if(e){const r=new ResizeObserver((()=>{cancelAnimationFrame(t),t=window.requestAnimationFrame(n)}));return r.observe(e),()=>{window.cancelAnimationFrame(t),r.unobserve(e)}}}),[e,n])}function Fg(e){return e?"open":"closed"}function Ig(e,t){return"".concat(e,"-trigger-").concat(t)}function Rg(e,t){return"".concat(e,"-content-").concat(t)}function Mg(e){return t=>"mouse"===t.pointerType?e(t):void 0}var Ng=Zm,Dg=ig,Og=lg,Lg=ug,jg=fg,Ug=vg,Gg=Sg;const Bg=Hp("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]),Wg=t.forwardRef(((e,t)=>{let{className:n,children:r,...i}=e;return(0,jp.jsxs)(Ng,{ref:t,className:$f("relative z-10 flex flex-1 items-center justify-center",n),...i,children:[r,(0,jp.jsx)(Xg,{})]})}));Wg.displayName=Ng.displayName;const zg=t.forwardRef(((e,t)=>{let{className:n,...r}=e;return(0,jp.jsx)(Dg,{ref:t,className:$f("group flex flex-1 list-none items-center justify-center space-x-1",n),...r})}));zg.displayName=Dg.displayName;const qg=Og,Hg=sf("group inline-flex h-10 w-max items-center justify-center rounded-md bg-background px-4 py-2 text-sm font-medium transition-colors hover:bg-accent hover:text-accent-foreground focus:bg-accent focus:text-accent-foreground focus:outline-none disabled:pointer-events-none disabled:opacity-50 data-[active]:bg-accent/50 data-[state=open]:bg-accent/50"),Vg=t.forwardRef(((e,t)=>{let{className:n,children:r,...i}=e;return(0,jp.jsxs)(Lg,{ref:t,className:$f(Hg(),"group",n),...i,children:[r," ",(0,jp.jsx)(Bg,{className:"relative top-[1px] ml-1 h-3 w-3 transition duration-200 group-data-[state=open]:rotate-180","aria-hidden":"true"})]})}));Vg.displayName=Lg.displayName;const Kg=t.forwardRef(((e,t)=>{let{className:n,...r}=e;return(0,jp.jsx)(Ug,{ref:t,className:$f("left-0 top-0 w-full data-[motion^=from-]:animate-in data-[motion^=to-]:animate-out data-[motion^=from-]:fade-in data-[motion^=to-]:fade-out data-[motion=from-end]:slide-in-from-right-52 data-[motion=from-start]:slide-in-from-left-52 data-[motion=to-end]:slide-out-to-right-52 data-[motion=to-start]:slide-out-to-left-52 md:absolute md:w-auto ",n),...r})}));Kg.displayName=Ug.displayName;const Xg=t.forwardRef(((e,t)=>{let{className:n,...r}=e;return(0,jp.jsx)("div",{className:$f("absolute left-0 top-full flex justify-center"),children:(0,jp.jsx)(Gg,{className:$f("origin-top-center relative mt-1.5 h-[var(--radix-navigation-menu-viewport-height)] w-full overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-90 md:w-[var(--radix-navigation-menu-viewport-width)]",n),ref:t,...r})})}));Xg.displayName=Gg.displayName;const Yg=t.forwardRef(((e,t)=>{let{className:n,...r}=e;return(0,jp.jsx)(jg,{ref:t,className:$f("top-full z-[1] flex h-1.5 items-end justify-center overflow-hidden data-[state=visible]:animate-in data-[state=hidden]:animate-out data-[state=hidden]:fade-out data-[state=visible]:fade-in",n),...r,children:(0,jp.jsx)("div",{className:"relative top-[60%] h-2 w-2 rotate-45 rounded-tl-sm bg-border shadow-md"})})}));Yg.displayName=jg.displayName;const Qg=t.forwardRef(((e,t)=>{let{className:n,type:r,...i}=e;return(0,jp.jsx)("input",{type:r,className:$f("h-9 rounded-md border border-input bg-background px-2 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",n),ref:t,...i})}));Qg.displayName="Input";const Jg=Hp("BookMarked",[["path",{d:"M10 2v8l3-3 3 3V2",key:"sqw3rj"}],["path",{d:"M4 19.5v-15A2.5 2.5 0 0 1 6.5 2H19a1 1 0 0 1 1 1v18a1 1 0 0 1-1 1H6.5a1 1 0 0 1 0-5H20",key:"k3hazp"}]]);function $g(){const{innerWidth:e,innerHeight:t}=window;return{width:e,height:t}}function Zg(){const[e,n]=(0,t.useState)($g().width);return(0,t.useEffect)((()=>{function e(){n($g().width)}return window.addEventListener("resize",e),()=>window.removeEventListener("resize",e)}),[]),e}const ev=()=>{const[e,n]=(0,t.useState)(null),{activePDFTitle:r,setActivePDFPage:i}=(0,t.useContext)(lm),{updatePageOfPdf:s}=(0,t.useContext)(Up),a=Zg();return(0,t.useEffect)((()=>{e&&i(e)}),[e]),(0,t.useEffect)((()=>{r||n(1)}),[r]),(0,jp.jsx)("div",{className:"flex flex-row ml-2",children:(0,jp.jsxs)("form",{className:"flex flex-row items-center space-x-1",children:[(0,jp.jsx)(Qg,{disabled:!r,type:"number",placeholder:"Go",required:!0,min:"0",name:"pageNum",value:e||"",onChange:e=>{const t=parseInt(e.target.value);n(isNaN(t)?null:t)},className:"w-12 placeholder:text-xs opacity-90 focus:opacity-100"}),(0,jp.jsxs)(em,{variant:"secondary",onClick:()=>{r&&e?s(r,e):alert("PDF or page number is missing")},type:"button",size:"default",disabled:!e||!r,children:[(0,jp.jsx)(Jg,{className:"w-6 h-6 ".concat(a<470?"":"mr-2")}),a<470?"":"Save"]})]})})},tv=Hp("FileUp",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M12 12v6",key:"3ahymv"}],["path",{d:"m15 15-3-3-3 3",key:"15xj92"}]]),nv=Hp("ListRestart",[["path",{d:"M21 6H3",key:"1jwq7v"}],["path",{d:"M7 12H3",key:"13ou7f"}],["path",{d:"M7 18H3",key:"1sijw9"}],["path",{d:"M12 18a5 5 0 0 0 9-3 4.5 4.5 0 0 0-4.5-4.5c-1.33 0-2.54.54-3.41 1.41L11 14",key:"qth677"}],["path",{d:"M11 10v4h4",key:"172dkj"}]]),rv=()=>{const{resetPDF:e,isFileLoading:n,activePDFTitle:r}=(0,t.useContext)(lm),i=Zg();return(0,jp.jsx)("div",{children:(0,jp.jsxs)(em,{type:"button",onClick:e,variant:"secondary",size:"default",disabled:n||!r,children:[(0,jp.jsx)(nv,{className:"w-6 h-6 ".concat(i<470?"":"mr-2")}),i<470?"":"Reset"]})})},iv=()=>{const{handleAddSavedPdf:e}=(0,t.useContext)(Up),{activePDFTitle:n,setProgress:r,setIsFileLoading:i,setFileLoadingType:s,activePDFContent:a}=(0,t.useContext)(lm),o=Zg();return(0,jp.jsx)(Wg,{"aria-hidden":"true",className:"fixed bottom-0 left-0 p-2 m-2 rounded-md shadow-sm bg-primary",children:(0,jp.jsxs)(zg,{children:[(0,jp.jsx)(qg,{children:(0,jp.jsxs)(em,{onClick:async()=>{if(a&&n){i(!0),s("Uploading...");const t={title:n,savedPage:0,updateDate:(new Date).toISOString(),downloadURL:""};await e(t,a,r),r(100),i(!1)}},disabled:""===n||!n,type:"button",variant:"secondary",size:"default",children:[(0,jp.jsx)(tv,{className:"w-6 h-6 ".concat(o<470?"":"mr-2")}),o<470?"":"Upload"]})}),(0,jp.jsx)(qg,{children:(0,jp.jsx)(rv,{})}),(0,jp.jsx)(qg,{children:(0,jp.jsx)(ev,{})})]})})},sv=t.forwardRef(((e,t)=>{let{className:n,...r}=e;return(0,jp.jsx)("div",{ref:t,className:$f("rounded-lg border bg-card text-card-foreground shadow-sm",n),...r})}));sv.displayName="Card";const av=t.forwardRef(((e,t)=>{let{className:n,...r}=e;return(0,jp.jsx)("div",{ref:t,className:$f("flex flex-col space-y-1.5 p-6",n),...r})}));av.displayName="CardHeader";const ov=t.forwardRef(((e,t)=>{let{className:n,...r}=e;return(0,jp.jsx)("h3",{ref:t,className:$f("text-2xl font-semibold leading-none tracking-tight",n),...r})}));ov.displayName="CardTitle";const lv=t.forwardRef(((e,t)=>{let{className:n,...r}=e;return(0,jp.jsx)("p",{ref:t,className:$f("text-sm text-muted-foreground",n),...r})}));lv.displayName="CardDescription";const cv=t.forwardRef(((e,t)=>{let{className:n,...r}=e;return(0,jp.jsx)("div",{ref:t,className:$f("p-6 pt-0",n),...r})}));cv.displayName="CardContent";const uv=t.forwardRef(((e,t)=>{let{className:n,...r}=e;return(0,jp.jsx)("div",{ref:t,className:$f("flex items-center p-6 pt-0",n),...r})}));uv.displayName="CardFooter";const dv=()=>{const{isFileLoading:e,progress:n,fileLoadingType:r}=(0,t.useContext)(lm),[i,s]=(0,t.useState)(!1),a=(0,t.useRef)(null);return(0,t.useEffect)((()=>{const t=a.current;t&&(i?t.showModal():t.close()),s(e)}),[e,i]),(0,jp.jsx)("dialog",{ref:a,className:"rounded-md",children:(0,jp.jsxs)(sv,{className:"p-4 w-60",children:[(0,jp.jsxs)("div",{className:"flex flex-col items-center mt-2 text-sm motion-safe:animate-bounce",children:[r,(0,jp.jsx)("div",{className:"w-0 motion-safe:animate-spin",children:"|"})]}),(0,jp.jsx)("div",{className:"p-2 mt-2 text-xs text-left border-solid rounded text-secondary border-light bg-primary opacity-80",style:{width:"".concat(n,"%")},children:n.toFixed(0)+"%"})]})})};var hv=t.forwardRef(((e,n)=>{var r;const{container:s,...a}=e,[o,l]=t.useState(!1);ym((()=>l(!0)),[]);const c=s||o&&(null===globalThis||void 0===globalThis||null===(r=globalThis.document)||void 0===r?void 0:r.body);return c?i.createPortal((0,jp.jsx)(fm.div,{...a,ref:n}),c):null}));hv.displayName="Portal";var pv="ToastProvider",[fv,mv,gv]=Em("Toast"),[vv,_v]=dm("Toast",[gv]),[yv,bv]=vv(pv),wv=e=>{const{__scopeToast:n,label:r="Notification",duration:i=5e3,swipeDirection:s="right",swipeThreshold:a=50,children:o}=e,[l,c]=t.useState(null),[u,d]=t.useState(0),h=t.useRef(!1),p=t.useRef(!1);return r.trim()||console.error("Invalid prop `label` supplied to `".concat(pv,"`. Expected non-empty `string`.")),(0,jp.jsx)(fv.Provider,{scope:n,children:(0,jp.jsx)(yv,{scope:n,label:r,duration:i,swipeDirection:s,swipeThreshold:a,toastCount:u,viewport:l,onViewportChange:c,onToastAdd:t.useCallback((()=>d((e=>e+1))),[]),onToastRemove:t.useCallback((()=>d((e=>e-1))),[]),isFocusedToastEscapeKeyDownRef:h,isClosePausedRef:p,children:o})})};wv.displayName=pv;var Sv="ToastViewport",Pv=["F8"],Cv="toast.viewportPause",Ev="toast.viewportResume",xv=t.forwardRef(((e,n)=>{const{__scopeToast:r,hotkey:i=Pv,label:s="Notifications ({hotkey})",...a}=e,o=bv(Sv,r),l=mv(r),c=t.useRef(null),u=t.useRef(null),d=t.useRef(null),h=t.useRef(null),p=Xp(n,h,o.onViewportChange),f=i.join("+").replace(/Key/g,"").replace(/Digit/g,""),m=o.toastCount>0;t.useEffect((()=>{const e=e=>{var t;i.every((t=>e[t]||e.code===t))&&(null===(t=h.current)||void 0===t||t.focus())};return document.addEventListener("keydown",e),()=>document.removeEventListener("keydown",e)}),[i]),t.useEffect((()=>{const e=c.current,t=h.current;if(m&&e&&t){const n=()=>{if(!o.isClosePausedRef.current){const e=new CustomEvent(Cv);t.dispatchEvent(e),o.isClosePausedRef.current=!0}},r=()=>{if(o.isClosePausedRef.current){const e=new CustomEvent(Ev);t.dispatchEvent(e),o.isClosePausedRef.current=!1}},i=t=>{!e.contains(t.relatedTarget)&&r()},s=()=>{e.contains(document.activeElement)||r()};return e.addEventListener("focusin",n),e.addEventListener("focusout",i),e.addEventListener("pointermove",n),e.addEventListener("pointerleave",s),window.addEventListener("blur",n),window.addEventListener("focus",r),()=>{e.removeEventListener("focusin",n),e.removeEventListener("focusout",i),e.removeEventListener("pointermove",n),e.removeEventListener("pointerleave",s),window.removeEventListener("blur",n),window.removeEventListener("focus",r)}}}),[m,o.isClosePausedRef]);const g=t.useCallback((e=>{let{tabbingDirection:t}=e;const n=l().map((e=>{const n=e.ref.current,r=[n,...Hv(n)];return"forwards"===t?r:r.reverse()}));return("forwards"===t?n.reverse():n).flat()}),[l]);return t.useEffect((()=>{const e=h.current;if(e){const t=t=>{const n=t.altKey||t.ctrlKey||t.metaKey;if("Tab"===t.key&&!n){const n=document.activeElement,a=t.shiftKey;var r;if(t.target===e&&a)return void(null===(r=u.current)||void 0===r||r.focus());const o=g({tabbingDirection:a?"backwards":"forwards"}),l=o.findIndex((e=>e===n));var i,s;if(Vv(o.slice(l+1)))t.preventDefault();else a?null===(i=u.current)||void 0===i||i.focus():null===(s=d.current)||void 0===s||s.focus()}};return e.addEventListener("keydown",t),()=>e.removeEventListener("keydown",t)}}),[l,g]),(0,jp.jsxs)(Om,{ref:c,role:"region","aria-label":s.replace("{hotkey}",f),tabIndex:-1,style:{pointerEvents:m?void 0:"none"},children:[m&&(0,jp.jsx)(Av,{ref:u,onFocusFromOutsideViewport:()=>{Vv(g({tabbingDirection:"forwards"}))}}),(0,jp.jsx)(fv.Slot,{scope:r,children:(0,jp.jsx)(fm.ol,{tabIndex:-1,...a,ref:p})}),m&&(0,jp.jsx)(Av,{ref:d,onFocusFromOutsideViewport:()=>{Vv(g({tabbingDirection:"backwards"}))}})]})}));xv.displayName=Sv;var kv="ToastFocusProxy",Av=t.forwardRef(((e,t)=>{const{__scopeToast:n,onFocusFromOutsideViewport:r,...i}=e,s=bv(kv,n);return(0,jp.jsx)(jm,{"aria-hidden":!0,tabIndex:0,...i,ref:t,style:{position:"fixed"},onFocus:e=>{var t;const n=e.relatedTarget;!(null!==(t=s.viewport)&&void 0!==t&&t.contains(n))&&r()}})}));Av.displayName=kv;var Tv="Toast",Fv=t.forwardRef(((e,t)=>{const{forceMount:n,open:r,defaultOpen:i,onOpenChange:s,...a}=e,[o=!0,l]=vm({prop:r,defaultProp:i,onChange:s});return(0,jp.jsx)(bm,{present:n||o,children:(0,jp.jsx)(Mv,{open:o,...a,ref:t,onClose:()=>l(!1),onPause:gm(e.onPause),onResume:gm(e.onResume),onSwipeStart:pm(e.onSwipeStart,(e=>{e.currentTarget.setAttribute("data-swipe","start")})),onSwipeMove:pm(e.onSwipeMove,(e=>{const{x:t,y:n}=e.detail.delta;e.currentTarget.setAttribute("data-swipe","move"),e.currentTarget.style.setProperty("--radix-toast-swipe-move-x","".concat(t,"px")),e.currentTarget.style.setProperty("--radix-toast-swipe-move-y","".concat(n,"px"))})),onSwipeCancel:pm(e.onSwipeCancel,(e=>{e.currentTarget.setAttribute("data-swipe","cancel"),e.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),e.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),e.currentTarget.style.removeProperty("--radix-toast-swipe-end-x"),e.currentTarget.style.removeProperty("--radix-toast-swipe-end-y")})),onSwipeEnd:pm(e.onSwipeEnd,(e=>{const{x:t,y:n}=e.detail.delta;e.currentTarget.setAttribute("data-swipe","end"),e.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),e.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),e.currentTarget.style.setProperty("--radix-toast-swipe-end-x","".concat(t,"px")),e.currentTarget.style.setProperty("--radix-toast-swipe-end-y","".concat(n,"px")),l(!1)}))})})}));Fv.displayName=Tv;var[Iv,Rv]=vv(Tv,{onClose(){}}),Mv=t.forwardRef(((e,n)=>{const{__scopeToast:r,type:s="foreground",duration:a,open:o,onClose:l,onEscapeKeyDown:c,onPause:u,onResume:d,onSwipeStart:h,onSwipeMove:p,onSwipeCancel:f,onSwipeEnd:m,...g}=e,v=bv(Tv,r),[_,y]=t.useState(null),b=Xp(n,(e=>y(e))),w=t.useRef(null),S=t.useRef(null),P=a||v.duration,C=t.useRef(0),E=t.useRef(P),x=t.useRef(0),{onToastAdd:k,onToastRemove:A}=v,T=gm((()=>{var e;(null===_||void 0===_?void 0:_.contains(document.activeElement))&&(null===(e=v.viewport)||void 0===e||e.focus()),l()})),F=t.useCallback((e=>{e&&e!==1/0&&(window.clearTimeout(x.current),C.current=(new Date).getTime(),x.current=window.setTimeout(T,e))}),[T]);t.useEffect((()=>{const e=v.viewport;if(e){const t=()=>{F(E.current),null===d||void 0===d||d()},n=()=>{const e=(new Date).getTime()-C.current;E.current=E.current-e,window.clearTimeout(x.current),null===u||void 0===u||u()};return e.addEventListener(Cv,n),e.addEventListener(Ev,t),()=>{e.removeEventListener(Cv,n),e.removeEventListener(Ev,t)}}}),[v.viewport,P,u,d,F]),t.useEffect((()=>{o&&!v.isClosePausedRef.current&&F(P)}),[o,P,v.isClosePausedRef,F]),t.useEffect((()=>(k(),()=>A())),[k,A]);const I=t.useMemo((()=>_?Wv(_):null),[_]);return v.viewport?(0,jp.jsxs)(jp.Fragment,{children:[I&&(0,jp.jsx)(Nv,{__scopeToast:r,role:"status","aria-live":"foreground"===s?"assertive":"polite","aria-atomic":!0,children:I}),(0,jp.jsx)(Iv,{scope:r,onClose:T,children:i.createPortal((0,jp.jsx)(fv.ItemSlot,{scope:r,children:(0,jp.jsx)(Dm,{asChild:!0,onEscapeKeyDown:pm(c,(()=>{v.isFocusedToastEscapeKeyDownRef.current||T(),v.isFocusedToastEscapeKeyDownRef.current=!1})),children:(0,jp.jsx)(fm.li,{role:"status","aria-live":"off","aria-atomic":!0,tabIndex:0,"data-state":o?"open":"closed","data-swipe-direction":v.swipeDirection,...g,ref:b,style:{userSelect:"none",touchAction:"none",...e.style},onKeyDown:pm(e.onKeyDown,(e=>{"Escape"===e.key&&(null===c||void 0===c||c(e.nativeEvent),e.nativeEvent.defaultPrevented||(v.isFocusedToastEscapeKeyDownRef.current=!0,T()))})),onPointerDown:pm(e.onPointerDown,(e=>{0===e.button&&(w.current={x:e.clientX,y:e.clientY})})),onPointerMove:pm(e.onPointerMove,(e=>{if(!w.current)return;const t=e.clientX-w.current.x,n=e.clientY-w.current.y,r=Boolean(S.current),i=["left","right"].includes(v.swipeDirection),s=["left","up"].includes(v.swipeDirection)?Math.min:Math.max,a=i?s(0,t):0,o=i?0:s(0,n),l="touch"===e.pointerType?10:2,c={x:a,y:o},u={originalEvent:e,delta:c};r?(S.current=c,zv("toast.swipeMove",p,u,{discrete:!1})):qv(c,v.swipeDirection,l)?(S.current=c,zv("toast.swipeStart",h,u,{discrete:!1}),e.target.setPointerCapture(e.pointerId)):(Math.abs(t)>l||Math.abs(n)>l)&&(w.current=null)})),onPointerUp:pm(e.onPointerUp,(e=>{const t=S.current,n=e.target;if(n.hasPointerCapture(e.pointerId)&&n.releasePointerCapture(e.pointerId),S.current=null,w.current=null,t){const n=e.currentTarget,r={originalEvent:e,delta:t};qv(t,v.swipeDirection,v.swipeThreshold)?zv("toast.swipeEnd",m,r,{discrete:!0}):zv("toast.swipeCancel",f,r,{discrete:!0}),n.addEventListener("click",(e=>e.preventDefault()),{once:!0})}}))})})}),v.viewport)})]}):null})),Nv=e=>{const{__scopeToast:n,children:r,...i}=e,s=bv(Tv,n),[a,o]=t.useState(!1),[l,c]=t.useState(!1);return function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:()=>{};const t=gm(e);ym((()=>{let e=0,n=0;return e=window.requestAnimationFrame((()=>n=window.requestAnimationFrame(t))),()=>{window.cancelAnimationFrame(e),window.cancelAnimationFrame(n)}}),[t])}((()=>o(!0))),t.useEffect((()=>{const e=window.setTimeout((()=>c(!0)),1e3);return()=>window.clearTimeout(e)}),[]),l?null:(0,jp.jsx)(hv,{asChild:!0,children:(0,jp.jsx)(jm,{...i,children:a&&(0,jp.jsxs)(jp.Fragment,{children:[s.label," ",r]})})})},Dv=t.forwardRef(((e,t)=>{const{__scopeToast:n,...r}=e;return(0,jp.jsx)(fm.div,{...r,ref:t})}));Dv.displayName="ToastTitle";var Ov=t.forwardRef(((e,t)=>{const{__scopeToast:n,...r}=e;return(0,jp.jsx)(fm.div,{...r,ref:t})}));Ov.displayName="ToastDescription";var Lv="ToastAction",jv=t.forwardRef(((e,t)=>{const{altText:n,...r}=e;return n.trim()?(0,jp.jsx)(Bv,{altText:n,asChild:!0,children:(0,jp.jsx)(Gv,{...r,ref:t})}):(console.error("Invalid prop `altText` supplied to `".concat(Lv,"`. Expected non-empty `string`.")),null)}));jv.displayName=Lv;var Uv="ToastClose",Gv=t.forwardRef(((e,t)=>{const{__scopeToast:n,...r}=e,i=Rv(Uv,n);return(0,jp.jsx)(Bv,{asChild:!0,children:(0,jp.jsx)(fm.button,{type:"button",...r,ref:t,onClick:pm(e.onClick,i.onClose)})})}));Gv.displayName=Uv;var Bv=t.forwardRef(((e,t)=>{const{__scopeToast:n,altText:r,...i}=e;return(0,jp.jsx)(fm.div,{"data-radix-toast-announce-exclude":"","data-radix-toast-announce-alt":r||void 0,...i,ref:t})}));function Wv(e){const t=[];return Array.from(e.childNodes).forEach((e=>{if(e.nodeType===e.TEXT_NODE&&e.textContent&&t.push(e.textContent),function(e){return e.nodeType===e.ELEMENT_NODE}(e)){const n=e.ariaHidden||e.hidden||"none"===e.style.display,r=""===e.dataset.radixToastAnnounceExclude;if(!n)if(r){const n=e.dataset.radixToastAnnounceAlt;n&&t.push(n)}else t.push(...Wv(e))}})),t}function zv(e,t,n,r){let{discrete:i}=r;const s=n.originalEvent.currentTarget,a=new CustomEvent(e,{bubbles:!0,cancelable:!0,detail:n});t&&s.addEventListener(e,t,{once:!0}),i?mm(s,a):s.dispatchEvent(a)}var qv=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;const r=Math.abs(e.x),i=Math.abs(e.y),s=r>i;return"left"===t||"right"===t?s&&r>n:!s&&i>n};function Hv(e){const t=[],n=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,{acceptNode:e=>{const t="INPUT"===e.tagName&&"hidden"===e.type;return e.disabled||e.hidden||t?NodeFilter.FILTER_SKIP:e.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)t.push(n.currentNode);return t}function Vv(e){const t=document.activeElement;return e.some((e=>e===t||(e.focus(),document.activeElement!==t)))}var Kv=wv,Xv=xv,Yv=Fv,Qv=Dv,Jv=Ov,$v=jv,Zv=Gv;const e_=Hp("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),t_=Kv,n_=t.forwardRef(((e,t)=>{let{className:n,...r}=e;return(0,jp.jsx)(Xv,{ref:t,className:$f("fixed top-0 z-[100] flex max-h-screen w-full flex-col-reverse p-4 sm:bottom-0 sm:right-0 sm:top-auto sm:flex-col md:max-w-[420px]",n),...r})}));n_.displayName=Xv.displayName;const r_=sf("group pointer-events-auto relative flex w-full items-center justify-between space-x-4 overflow-hidden rounded-md border p-6 pr-8 shadow-lg transition-all data-[swipe=cancel]:translate-x-0 data-[swipe=end]:translate-x-[var(--radix-toast-swipe-end-x)] data-[swipe=move]:translate-x-[var(--radix-toast-swipe-move-x)] data-[swipe=move]:transition-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[swipe=end]:animate-out data-[state=closed]:fade-out-80 data-[state=closed]:slide-out-to-right-full data-[state=open]:slide-in-from-top-full data-[state=open]:sm:slide-in-from-bottom-full",{variants:{variant:{default:"border bg-background text-foreground",destructive:"destructive group border-destructive bg-destructive text-destructive-foreground"}},defaultVariants:{variant:"default"}}),i_=t.forwardRef(((e,t)=>{let{className:n,variant:r,...i}=e;return(0,jp.jsx)(Yv,{ref:t,className:$f(r_({variant:r}),n),...i})}));i_.displayName=Yv.displayName;const s_=t.forwardRef(((e,t)=>{let{className:n,...r}=e;return(0,jp.jsx)($v,{ref:t,className:$f("inline-flex h-8 shrink-0 items-center justify-center rounded-md border bg-transparent px-3 text-sm font-medium ring-offset-background transition-colors hover:bg-secondary focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 group-[.destructive]:border-muted/40 group-[.destructive]:hover:border-destructive/30 group-[.destructive]:hover:bg-destructive group-[.destructive]:hover:text-destructive-foreground group-[.destructive]:focus:ring-destructive",n),...r})}));s_.displayName=$v.displayName;const a_=t.forwardRef(((e,t)=>{let{className:n,...r}=e;return(0,jp.jsx)(Zv,{ref:t,className:$f("absolute right-2 top-2 rounded-md p-1 text-foreground/50 opacity-0 transition-opacity hover:text-foreground focus:opacity-100 focus:outline-none focus:ring-2 group-hover:opacity-100 group-[.destructive]:text-red-300 group-[.destructive]:hover:text-red-50 group-[.destructive]:focus:ring-red-400 group-[.destructive]:focus:ring-offset-red-600",n),"toast-close":"",...r,children:(0,jp.jsx)(e_,{className:"w-4 h-4"})})}));a_.displayName=Zv.displayName;const o_=t.forwardRef(((e,t)=>{let{className:n,...r}=e;return(0,jp.jsx)(Qv,{ref:t,className:$f("text-sm font-semibold",n),...r})}));o_.displayName=Qv.displayName;const l_=t.forwardRef(((e,t)=>{let{className:n,...r}=e;return(0,jp.jsx)(Jv,{ref:t,className:$f("text-sm opacity-90",n),...r})}));function c_(){const{toasts:e}=Lp();return(0,jp.jsxs)(t_,{children:[e.map((function(e){let{id:t,title:n,description:r,action:i,...s}=e;return(0,jp.jsxs)(i_,{...s,children:[(0,jp.jsxs)("div",{className:"grid gap-1",children:[n&&(0,jp.jsx)(o_,{children:n}),r&&(0,jp.jsx)(l_,{children:r})]}),i,(0,jp.jsx)(a_,{})]},t)})),(0,jp.jsx)(n_,{})]})}l_.displayName=Jv.displayName;const u_=()=>(0,jp.jsxs)("div",{className:"flex flex-col justify-center gap-8 align-middle",children:[(0,jp.jsx)(dv,{}),(0,jp.jsx)(iv,{}),(0,jp.jsx)(um,{}),(0,jp.jsx)(c_,{})]}),d_=()=>(0,jp.jsxs)(pe,{children:[(0,jp.jsx)(de,{path:"/read-pdf-by-page/login",element:(0,jp.jsx)(Bp,{children:(0,jp.jsx)(rm,{})})}),(0,jp.jsx)(de,{index:!0,path:"/read-pdf-by-page",element:(0,jp.jsx)(im,{children:(0,jp.jsx)(u_,{})})})]}),h_=Hp("FilePlus2",[["path",{d:"M4 22h14a2 2 0 0 0 2-2V7l-5-5H6a2 2 0 0 0-2 2v4",key:"1pf5j1"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M3 15h6",key:"4e2qda"}],["path",{d:"M6 12v6",key:"1u72j0"}]]);var p_="focusScope.autoFocusOnMount",f_="focusScope.autoFocusOnUnmount",m_={bubbles:!1,cancelable:!0},g_=t.forwardRef(((e,n)=>{const{loop:r=!1,trapped:i=!1,onMountAutoFocus:s,onUnmountAutoFocus:a,...o}=e,[l,c]=t.useState(null),u=gm(s),d=gm(a),h=t.useRef(null),p=Xp(n,(e=>c(e))),f=t.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;t.useEffect((()=>{if(i){let e=function(e){if(f.paused||!l)return;const t=e.target;l.contains(t)?h.current=t:b_(h.current,{select:!0})},t=function(e){if(f.paused||!l)return;const t=e.relatedTarget;null!==t&&(l.contains(t)||b_(h.current,{select:!0}))},n=function(e){if(document.activeElement===document.body)for(const t of e)t.removedNodes.length>0&&b_(l)};document.addEventListener("focusin",e),document.addEventListener("focusout",t);const r=new MutationObserver(n);return l&&r.observe(l,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",e),document.removeEventListener("focusout",t),r.disconnect()}}}),[i,l,f.paused]),t.useEffect((()=>{if(l){w_.add(f);const t=document.activeElement;if(!l.contains(t)){const n=new CustomEvent(p_,m_);l.addEventListener(p_,u),l.dispatchEvent(n),n.defaultPrevented||(!function(e){let{select:t=!1}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const n=document.activeElement;for(const r of e)if(b_(r,{select:t}),document.activeElement!==n)return}((e=v_(l),e.filter((e=>"A"!==e.tagName))),{select:!0}),document.activeElement===t&&b_(l))}return()=>{l.removeEventListener(p_,u),setTimeout((()=>{const e=new CustomEvent(f_,m_);l.addEventListener(f_,d),l.dispatchEvent(e),e.defaultPrevented||b_(null!==t&&void 0!==t?t:document.body,{select:!0}),l.removeEventListener(f_,d),w_.remove(f)}),0)}}var e}),[l,u,d,f]);const m=t.useCallback((e=>{if(!r&&!i)return;if(f.paused)return;const t="Tab"===e.key&&!e.altKey&&!e.ctrlKey&&!e.metaKey,n=document.activeElement;if(t&&n){const t=e.currentTarget,[i,s]=function(e){const t=v_(e),n=__(t,e),r=__(t.reverse(),e);return[n,r]}(t);i&&s?e.shiftKey||n!==s?e.shiftKey&&n===i&&(e.preventDefault(),r&&b_(s,{select:!0})):(e.preventDefault(),r&&b_(i,{select:!0})):n===t&&e.preventDefault()}}),[r,i,f.paused]);return(0,jp.jsx)(fm.div,{tabIndex:-1,...o,ref:p,onKeyDown:m})}));function v_(e){const t=[],n=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,{acceptNode:e=>{const t="INPUT"===e.tagName&&"hidden"===e.type;return e.disabled||e.hidden||t?NodeFilter.FILTER_SKIP:e.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)t.push(n.currentNode);return t}function __(e,t){for(const n of e)if(!y_(n,{upTo:t}))return n}function y_(e,t){let{upTo:n}=t;if("hidden"===getComputedStyle(e).visibility)return!0;for(;e;){if(void 0!==n&&e===n)return!1;if("none"===getComputedStyle(e).display)return!0;e=e.parentElement}return!1}function b_(e){let{select:t=!1}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(e&&e.focus){const n=document.activeElement;e.focus({preventScroll:!0}),e!==n&&function(e){return e instanceof HTMLInputElement&&"select"in e}(e)&&t&&e.select()}}g_.displayName="FocusScope";var w_=function(){let e=[];return{add(t){const n=e[0];t!==n&&(null===n||void 0===n||n.pause()),e=S_(e,t),e.unshift(t)},remove(t){var n;e=S_(e,t),null===(n=e[0])||void 0===n||n.resume()}}}();function S_(e,t){const n=[...e],r=n.indexOf(t);return-1!==r&&n.splice(r,1),n}var P_=0;function C_(){t.useEffect((()=>{var e,t;const n=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",null!==(e=n[0])&&void 0!==e?e:E_()),document.body.insertAdjacentElement("beforeend",null!==(t=n[1])&&void 0!==t?t:E_()),P_++,()=>{1===P_&&document.querySelectorAll("[data-radix-focus-guard]").forEach((e=>e.remove())),P_--}}),[])}function E_(){const e=document.createElement("span");return e.setAttribute("data-radix-focus-guard",""),e.tabIndex=0,e.style.cssText="outline: none; opacity: 0; position: fixed; pointer-events: none",e}var x_="right-scroll-bar-position",k_="width-before-scroll-bar";function A_(e,t){return"function"===typeof e?e(t):e&&(e.current=t),e}var T_="undefined"!==typeof window?t.useLayoutEffect:t.useEffect,F_=new WeakMap;function I_(e,n){var r=function(e,n){var r=(0,t.useState)((function(){return{value:e,callback:n,facade:{get current(){return r.value},set current(e){var t=r.value;t!==e&&(r.value=e,r.callback(e,t))}}}}))[0];return r.callback=n,r.facade}(n||null,(function(t){return e.forEach((function(e){return A_(e,t)}))}));return T_((function(){var t=F_.get(r);if(t){var n=new Set(t),i=new Set(e),s=r.current;n.forEach((function(e){i.has(e)||A_(e,null)})),i.forEach((function(e){n.has(e)||A_(e,s)}))}F_.set(r,e)}),[e]),r}function R_(e){return e}function M_(e,t){void 0===t&&(t=R_);var n=[],r=!1;return{read:function(){if(r)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return n.length?n[n.length-1]:e},useMedium:function(e){var i=t(e,r);return n.push(i),function(){n=n.filter((function(e){return e!==i}))}},assignSyncMedium:function(e){for(r=!0;n.length;){var t=n;n=[],t.forEach(e)}n={push:function(t){return e(t)},filter:function(){return n}}},assignMedium:function(e){r=!0;var t=[];if(n.length){var i=n;n=[],i.forEach(e),t=n}var s=function(){var n=t;t=[],n.forEach(e)},a=function(){return Promise.resolve().then(s)};a(),n={push:function(e){t.push(e),a()},filter:function(e){return t=t.filter(e),n}}}}}var N_=function(e){void 0===e&&(e={});var t=M_(null);return t.options=wi({async:!0,ssr:!1},e),t}(),D_=function(){},O_=t.forwardRef((function(e,n){var r=t.useRef(null),i=t.useState({onScrollCapture:D_,onWheelCapture:D_,onTouchMoveCapture:D_}),s=i[0],a=i[1],o=e.forwardProps,l=e.children,c=e.className,u=e.removeScrollBar,d=e.enabled,h=e.shards,p=e.sideCar,f=e.noIsolation,m=e.inert,g=e.allowPinchZoom,v=e.as,_=void 0===v?"div":v,y=e.gapMode,b=Si(e,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noIsolation","inert","allowPinchZoom","as","gapMode"]),w=p,S=I_([r,n]),P=wi(wi({},b),s);return t.createElement(t.Fragment,null,d&&t.createElement(w,{sideCar:N_,removeScrollBar:u,shards:h,noIsolation:f,inert:m,setCallbacks:a,allowPinchZoom:!!g,lockRef:r,gapMode:y}),o?t.cloneElement(t.Children.only(l),wi(wi({},P),{ref:S})):t.createElement(_,wi({},P,{className:c,ref:S}),l))}));O_.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1},O_.classNames={fullWidth:k_,zeroRight:x_};var L_,j_=function(e){var n=e.sideCar,r=Si(e,["sideCar"]);if(!n)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var i=n.read();if(!i)throw new Error("Sidecar medium not found");return t.createElement(i,wi({},r))};j_.isSideCarExport=!0;function U_(){if(!document)return null;var e=document.createElement("style");e.type="text/css";var t=L_||__webpack_require__.nc;return t&&e.setAttribute("nonce",t),e}var G_=function(){var e=0,t=null;return{add:function(n){var r,i;0==e&&(t=U_())&&(i=n,(r=t).styleSheet?r.styleSheet.cssText=i:r.appendChild(document.createTextNode(i)),function(e){(document.head||document.getElementsByTagName("head")[0]).appendChild(e)}(t)),e++},remove:function(){! --e&&t&&(t.parentNode&&t.parentNode.removeChild(t),t=null)}}},B_=function(){var e=function(){var e=G_();return function(n,r){t.useEffect((function(){return e.add(n),function(){e.remove()}}),[n&&r])}}();return function(t){var n=t.styles,r=t.dynamic;return e(n,r),null}},W_={left:0,top:0,right:0,gap:0},z_=function(e){return parseInt(e||"",10)||0},q_=function(e){if(void 0===e&&(e="margin"),"undefined"===typeof window)return W_;var t=function(e){var t=window.getComputedStyle(document.body),n=t["padding"===e?"paddingLeft":"marginLeft"],r=t["padding"===e?"paddingTop":"marginTop"],i=t["padding"===e?"paddingRight":"marginRight"];return[z_(n),z_(r),z_(i)]}(e),n=document.documentElement.clientWidth,r=window.innerWidth;return{left:t[0],top:t[1],right:t[2],gap:Math.max(0,r-n+t[2]-t[0])}},H_=B_(),V_="data-scroll-locked",K_=function(e,t,n,r){var i=e.left,s=e.top,a=e.right,o=e.gap;return void 0===n&&(n="margin"),"\n  .".concat("with-scroll-bars-hidden"," {\n   overflow: hidden ").concat(r,";\n   padding-right: ").concat(o,"px ").concat(r,";\n  }\n  body[").concat(V_,"] {\n    overflow: hidden ").concat(r,";\n    overscroll-behavior: contain;\n    ").concat([t&&"position: relative ".concat(r,";"),"margin"===n&&"\n    padding-left: ".concat(i,"px;\n    padding-top: ").concat(s,"px;\n    padding-right: ").concat(a,"px;\n    margin-left:0;\n    margin-top:0;\n    margin-right: ").concat(o,"px ").concat(r,";\n    "),"padding"===n&&"padding-right: ".concat(o,"px ").concat(r,";")].filter(Boolean).join(""),"\n  }\n  \n  .").concat(x_," {\n    right: ").concat(o,"px ").concat(r,";\n  }\n  \n  .").concat(k_," {\n    margin-right: ").concat(o,"px ").concat(r,";\n  }\n  \n  .").concat(x_," .").concat(x_," {\n    right: 0 ").concat(r,";\n  }\n  \n  .").concat(k_," .").concat(k_," {\n    margin-right: 0 ").concat(r,";\n  }\n  \n  body[").concat(V_,"] {\n    ").concat("--removed-body-scroll-bar-size",": ").concat(o,"px;\n  }\n")},X_=function(){var e=parseInt(document.body.getAttribute(V_)||"0",10);return isFinite(e)?e:0},Y_=function(e){var n=e.noRelative,r=e.noImportant,i=e.gapMode,s=void 0===i?"margin":i;t.useEffect((function(){return document.body.setAttribute(V_,(X_()+1).toString()),function(){var e=X_()-1;e<=0?document.body.removeAttribute(V_):document.body.setAttribute(V_,e.toString())}}),[]);var a=t.useMemo((function(){return q_(s)}),[s]);return t.createElement(H_,{styles:K_(a,!n,s,r?"":"!important")})},Q_=!1;if("undefined"!==typeof window)try{var J_=Object.defineProperty({},"passive",{get:function(){return Q_=!0,!0}});window.addEventListener("test",J_,J_),window.removeEventListener("test",J_,J_)}catch(Fw){Q_=!1}var $_=!!Q_&&{passive:!1},Z_=function(e,t){var n=window.getComputedStyle(e);return"hidden"!==n[t]&&!(n.overflowY===n.overflowX&&!function(e){return"TEXTAREA"===e.tagName}(e)&&"visible"===n[t])},ey=function(e,t){var n=t.ownerDocument,r=t;do{if("undefined"!==typeof ShadowRoot&&r instanceof ShadowRoot&&(r=r.host),ty(e,r)){var i=ny(e,r);if(i[1]>i[2])return!0}r=r.parentNode}while(r&&r!==n.body);return!1},ty=function(e,t){return"v"===e?function(e){return Z_(e,"overflowY")}(t):function(e){return Z_(e,"overflowX")}(t)},ny=function(e,t){return"v"===e?[(n=t).scrollTop,n.scrollHeight,n.clientHeight]:function(e){return[e.scrollLeft,e.scrollWidth,e.clientWidth]}(t);var n},ry=function(e){return"changedTouches"in e?[e.changedTouches[0].clientX,e.changedTouches[0].clientY]:[0,0]},iy=function(e){return[e.deltaX,e.deltaY]},sy=function(e){return e&&"current"in e?e.current:e},ay=function(e){return"\n  .block-interactivity-".concat(e," {pointer-events: none;}\n  .allow-interactivity-").concat(e," {pointer-events: all;}\n")},oy=0,ly=[];function cy(e){for(var t=null;null!==e;)e instanceof ShadowRoot&&(t=e.host,e=e.host),e=e.parentNode;return t}const uy=(dy=function(e){var n=t.useRef([]),r=t.useRef([0,0]),i=t.useRef(),s=t.useState(oy++)[0],a=t.useState(B_)[0],o=t.useRef(e);t.useEffect((function(){o.current=e}),[e]),t.useEffect((function(){if(e.inert){document.body.classList.add("block-interactivity-".concat(s));var t=Pi([e.lockRef.current],(e.shards||[]).map(sy),!0).filter(Boolean);return t.forEach((function(e){return e.classList.add("allow-interactivity-".concat(s))})),function(){document.body.classList.remove("block-interactivity-".concat(s)),t.forEach((function(e){return e.classList.remove("allow-interactivity-".concat(s))}))}}}),[e.inert,e.lockRef.current,e.shards]);var l=t.useCallback((function(e,t){if("touches"in e&&2===e.touches.length)return!o.current.allowPinchZoom;var n,s=ry(e),a=r.current,l="deltaX"in e?e.deltaX:a[0]-s[0],c="deltaY"in e?e.deltaY:a[1]-s[1],u=e.target,d=Math.abs(l)>Math.abs(c)?"h":"v";if("touches"in e&&"h"===d&&"range"===u.type)return!1;var h=ey(d,u);if(!h)return!0;if(h?n=d:(n="v"===d?"h":"v",h=ey(d,u)),!h)return!1;if(!i.current&&"changedTouches"in e&&(l||c)&&(i.current=n),!n)return!0;var p=i.current||n;return function(e,t,n,r,i){var s=function(e,t){return"h"===e&&"rtl"===t?-1:1}(e,window.getComputedStyle(t).direction),a=s*r,o=n.target,l=t.contains(o),c=!1,u=a>0,d=0,h=0;do{var p=ny(e,o),f=p[0],m=p[1]-p[2]-s*f;(f||m)&&ty(e,o)&&(d+=m,h+=f),o=o instanceof ShadowRoot?o.host:o.parentNode}while(!l&&o!==document.body||l&&(t.contains(o)||t===o));return(u&&(i&&Math.abs(d)<1||!i&&a>d)||!u&&(i&&Math.abs(h)<1||!i&&-a>h))&&(c=!0),c}(p,t,e,"h"===p?l:c,!0)}),[]),c=t.useCallback((function(e){var t=e;if(ly.length&&ly[ly.length-1]===a){var r="deltaY"in t?iy(t):ry(t),i=n.current.filter((function(e){return e.name===t.type&&(e.target===t.target||t.target===e.shadowParent)&&(n=e.delta,i=r,n[0]===i[0]&&n[1]===i[1]);var n,i}))[0];if(i&&i.should)t.cancelable&&t.preventDefault();else if(!i){var s=(o.current.shards||[]).map(sy).filter(Boolean).filter((function(e){return e.contains(t.target)}));(s.length>0?l(t,s[0]):!o.current.noIsolation)&&t.cancelable&&t.preventDefault()}}}),[]),u=t.useCallback((function(e,t,r,i){var s={name:e,delta:t,target:r,should:i,shadowParent:cy(r)};n.current.push(s),setTimeout((function(){n.current=n.current.filter((function(e){return e!==s}))}),1)}),[]),d=t.useCallback((function(e){r.current=ry(e),i.current=void 0}),[]),h=t.useCallback((function(t){u(t.type,iy(t),t.target,l(t,e.lockRef.current))}),[]),p=t.useCallback((function(t){u(t.type,ry(t),t.target,l(t,e.lockRef.current))}),[]);t.useEffect((function(){return ly.push(a),e.setCallbacks({onScrollCapture:h,onWheelCapture:h,onTouchMoveCapture:p}),document.addEventListener("wheel",c,$_),document.addEventListener("touchmove",c,$_),document.addEventListener("touchstart",d,$_),function(){ly=ly.filter((function(e){return e!==a})),document.removeEventListener("wheel",c,$_),document.removeEventListener("touchmove",c,$_),document.removeEventListener("touchstart",d,$_)}}),[]);var f=e.removeScrollBar,m=e.inert;return t.createElement(t.Fragment,null,m?t.createElement(a,{styles:ay(s)}):null,f?t.createElement(Y_,{gapMode:e.gapMode}):null)},N_.useMedium(dy),j_);var dy,hy=t.forwardRef((function(e,n){return t.createElement(O_,wi({},e,{ref:n,sideCar:uy}))}));hy.classNames=O_.classNames;const py=hy;var fy=function(e){return"undefined"===typeof document?null:(Array.isArray(e)?e[0]:e).ownerDocument.body},my=new WeakMap,gy=new WeakMap,vy={},_y=0,yy=function(e){return e&&(e.host||yy(e.parentNode))},by=function(e,t,n,r){var i=function(e,t){return t.map((function(t){if(e.contains(t))return t;var n=yy(t);return n&&e.contains(n)?n:(console.error("aria-hidden",t,"in not contained inside",e,". Doing nothing"),null)})).filter((function(e){return Boolean(e)}))}(t,Array.isArray(e)?e:[e]);vy[n]||(vy[n]=new WeakMap);var s=vy[n],a=[],o=new Set,l=new Set(i),c=function(e){e&&!o.has(e)&&(o.add(e),c(e.parentNode))};i.forEach(c);var u=function(e){e&&!l.has(e)&&Array.prototype.forEach.call(e.children,(function(e){if(o.has(e))u(e);else try{var t=e.getAttribute(r),i=null!==t&&"false"!==t,l=(my.get(e)||0)+1,c=(s.get(e)||0)+1;my.set(e,l),s.set(e,c),a.push(e),1===l&&i&&gy.set(e,!0),1===c&&e.setAttribute(n,"true"),i||e.setAttribute(r,"true")}catch(Tw){console.error("aria-hidden: cannot operate on ",e,Tw)}}))};return u(t),o.clear(),_y++,function(){a.forEach((function(e){var t=my.get(e)-1,i=s.get(e)-1;my.set(e,t),s.set(e,i),t||(gy.has(e)||e.removeAttribute(r),gy.delete(e)),i||e.removeAttribute(n)})),--_y||(my=new WeakMap,my=new WeakMap,gy=new WeakMap,vy={})}},wy=function(e,t,n){void 0===n&&(n="data-aria-hidden");var r=Array.from(Array.isArray(e)?e:[e]),i=t||fy(e);return i?(r.push.apply(r,Array.from(i.querySelectorAll("[aria-live]"))),by(r,i,n,"aria-hidden")):function(){return null}},Sy="Dialog",[Py,Cy]=dm(Sy),[Ey,xy]=Py(Sy),ky=e=>{const{__scopeDialog:n,children:r,open:i,defaultOpen:s,onOpenChange:a,modal:o=!0}=e,l=t.useRef(null),c=t.useRef(null),[u=!1,d]=vm({prop:i,defaultProp:s,onChange:a});return(0,jp.jsx)(Ey,{scope:n,triggerRef:l,contentRef:c,contentId:Cm(),titleId:Cm(),descriptionId:Cm(),open:u,onOpenChange:d,onOpenToggle:t.useCallback((()=>d((e=>!e))),[d]),modal:o,children:r})};ky.displayName=Sy;var Ay="DialogTrigger",Ty=t.forwardRef(((e,t)=>{const{__scopeDialog:n,...r}=e,i=xy(Ay,n),s=Xp(t,i.triggerRef);return(0,jp.jsx)(fm.button,{type:"button","aria-haspopup":"dialog","aria-expanded":i.open,"aria-controls":i.contentId,"data-state":Xy(i.open),...r,ref:s,onClick:pm(e.onClick,i.onOpenToggle)})}));Ty.displayName=Ay;var Fy="DialogPortal",[Iy,Ry]=Py(Fy,{forceMount:void 0}),My=e=>{const{__scopeDialog:n,forceMount:r,children:i,container:s}=e,a=xy(Fy,n);return(0,jp.jsx)(Iy,{scope:n,forceMount:r,children:t.Children.map(i,(e=>(0,jp.jsx)(bm,{present:r||a.open,children:(0,jp.jsx)(hv,{asChild:!0,container:s,children:e})})))})};My.displayName=Fy;var Ny="DialogOverlay",Dy=t.forwardRef(((e,t)=>{const n=Ry(Ny,e.__scopeDialog),{forceMount:r=n.forceMount,...i}=e,s=xy(Ny,e.__scopeDialog);return s.modal?(0,jp.jsx)(bm,{present:r||s.open,children:(0,jp.jsx)(Oy,{...i,ref:t})}):null}));Dy.displayName=Ny;var Oy=t.forwardRef(((e,t)=>{const{__scopeDialog:n,...r}=e,i=xy(Ny,n);return(0,jp.jsx)(py,{as:Yp,allowPinchZoom:!0,shards:[i.contentRef],children:(0,jp.jsx)(fm.div,{"data-state":Xy(i.open),...r,ref:t,style:{pointerEvents:"auto",...r.style}})})})),Ly="DialogContent",jy=t.forwardRef(((e,t)=>{const n=Ry(Ly,e.__scopeDialog),{forceMount:r=n.forceMount,...i}=e,s=xy(Ly,e.__scopeDialog);return(0,jp.jsx)(bm,{present:r||s.open,children:s.modal?(0,jp.jsx)(Uy,{...i,ref:t}):(0,jp.jsx)(Gy,{...i,ref:t})})}));jy.displayName=Ly;var Uy=t.forwardRef(((e,n)=>{const r=xy(Ly,e.__scopeDialog),i=t.useRef(null),s=Xp(n,r.contentRef,i);return t.useEffect((()=>{const e=i.current;if(e)return wy(e)}),[]),(0,jp.jsx)(By,{...e,ref:s,trapFocus:r.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:pm(e.onCloseAutoFocus,(e=>{var t;e.preventDefault(),null===(t=r.triggerRef.current)||void 0===t||t.focus()})),onPointerDownOutside:pm(e.onPointerDownOutside,(e=>{const t=e.detail.originalEvent,n=0===t.button&&!0===t.ctrlKey;(2===t.button||n)&&e.preventDefault()})),onFocusOutside:pm(e.onFocusOutside,(e=>e.preventDefault()))})})),Gy=t.forwardRef(((e,n)=>{const r=xy(Ly,e.__scopeDialog),i=t.useRef(!1),s=t.useRef(!1);return(0,jp.jsx)(By,{...e,ref:n,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:t=>{var n,a;(null===(n=e.onCloseAutoFocus)||void 0===n||n.call(e,t),t.defaultPrevented)||(i.current||null===(a=r.triggerRef.current)||void 0===a||a.focus(),t.preventDefault());i.current=!1,s.current=!1},onInteractOutside:t=>{var n,a;null===(n=e.onInteractOutside)||void 0===n||n.call(e,t),t.defaultPrevented||(i.current=!0,"pointerdown"===t.detail.originalEvent.type&&(s.current=!0));const o=t.target;(null===(a=r.triggerRef.current)||void 0===a?void 0:a.contains(o))&&t.preventDefault(),"focusin"===t.detail.originalEvent.type&&s.current&&t.preventDefault()}})})),By=t.forwardRef(((e,n)=>{const{__scopeDialog:r,trapFocus:i,onOpenAutoFocus:s,onCloseAutoFocus:a,...o}=e,l=xy(Ly,r),c=t.useRef(null),u=Xp(n,c);return C_(),(0,jp.jsxs)(jp.Fragment,{children:[(0,jp.jsx)(g_,{asChild:!0,loop:!0,trapped:i,onMountAutoFocus:s,onUnmountAutoFocus:a,children:(0,jp.jsx)(Im,{role:"dialog",id:l.contentId,"aria-describedby":l.descriptionId,"aria-labelledby":l.titleId,"data-state":Xy(l.open),...o,ref:u,onDismiss:()=>l.onOpenChange(!1)})}),(0,jp.jsxs)(jp.Fragment,{children:[(0,jp.jsx)($y,{titleId:l.titleId}),(0,jp.jsx)(Zy,{contentRef:c,descriptionId:l.descriptionId})]})]})})),Wy="DialogTitle",zy=t.forwardRef(((e,t)=>{const{__scopeDialog:n,...r}=e,i=xy(Wy,n);return(0,jp.jsx)(fm.h2,{id:i.titleId,...r,ref:t})}));zy.displayName=Wy;var qy="DialogDescription",Hy=t.forwardRef(((e,t)=>{const{__scopeDialog:n,...r}=e,i=xy(qy,n);return(0,jp.jsx)(fm.p,{id:i.descriptionId,...r,ref:t})}));Hy.displayName=qy;var Vy="DialogClose",Ky=t.forwardRef(((e,t)=>{const{__scopeDialog:n,...r}=e,i=xy(Vy,n);return(0,jp.jsx)(fm.button,{type:"button",...r,ref:t,onClick:pm(e.onClick,(()=>i.onOpenChange(!1)))})}));function Xy(e){return e?"open":"closed"}Ky.displayName=Vy;var Yy="DialogTitleWarning",[Qy,Jy]=function(e,n){const r=t.createContext(n);function i(e){const{children:n,...i}=e,s=t.useMemo((()=>i),Object.values(i));return(0,jp.jsx)(r.Provider,{value:s,children:n})}return i.displayName=e+"Provider",[i,function(i){const s=t.useContext(r);if(s)return s;if(void 0!==n)return n;throw new Error("`".concat(i,"` must be used within `").concat(e,"`"))}]}(Yy,{contentName:Ly,titleName:Wy,docsSlug:"dialog"}),$y=e=>{let{titleId:n}=e;const r=Jy(Yy),i="`".concat(r.contentName,"` requires a `").concat(r.titleName,"` for the component to be accessible for screen reader users.\n\nIf you want to hide the `").concat(r.titleName,"`, you can wrap it with our VisuallyHidden component.\n\nFor more information, see https://radix-ui.com/primitives/docs/components/").concat(r.docsSlug);return t.useEffect((()=>{if(n){document.getElementById(n)||console.error(i)}}),[i,n]),null},Zy=e=>{let{contentRef:n,descriptionId:r}=e;const i=Jy("DialogDescriptionWarning"),s="Warning: Missing `Description` or `aria-describedby={undefined}` for {".concat(i.contentName,"}.");return t.useEffect((()=>{var e;const t=null===(e=n.current)||void 0===e?void 0:e.getAttribute("aria-describedby");if(r&&t){document.getElementById(r)||console.warn(s)}}),[s,n,r]),null},eb=ky,tb=Ty,nb=My,rb=Dy,ib=jy,sb=zy,ab=Hy,ob=Ky;const lb=t.createContext({drawerRef:{current:null},overlayRef:{current:null},scaleBackground:()=>{},onPress:()=>{},onRelease:()=>{},onDrag:()=>{},onNestedDrag:()=>{},onNestedOpenChange:()=>{},onNestedRelease:()=>{},openProp:void 0,dismissible:!1,handleOnly:!1,isOpen:!1,isDragging:!1,keyboardIsOpen:{current:!1},snapPointsOffset:null,snapPoints:null,modal:!1,shouldFade:!1,activeSnapPoint:null,onOpenChange:()=>{},setActiveSnapPoint:()=>{},visible:!1,closeDrawer:()=>{},setVisible:()=>{},direction:"bottom"}),cb=()=>{const e=t.useContext(lb);if(!e)throw new Error("useDrawerContext must be used within a Drawer.Root");return e};!function(e){if(!e||"undefined"==typeof document)return;let t=document.head||document.getElementsByTagName("head")[0],n=document.createElement("style");n.type="text/css",t.appendChild(n),n.styleSheet?n.styleSheet.cssText=e:n.appendChild(document.createTextNode(e))}("[vaul-drawer]{touch-action:none;will-change:transform;transition:transform .5s cubic-bezier(.32, .72, 0, 1)}[vaul-drawer][vaul-drawer-direction=bottom]{transform:translate3d(0,100%,0)}[vaul-drawer][vaul-drawer-direction=top]{transform:translate3d(0,-100%,0)}[vaul-drawer][vaul-drawer-direction=left]{transform:translate3d(-100%,0,0)}[vaul-drawer][vaul-drawer-direction=right]{transform:translate3d(100%,0,0)}.vaul-dragging .vaul-scrollable [vault-drawer-direction=top]{overflow-y:hidden!important}.vaul-dragging .vaul-scrollable [vault-drawer-direction=bottom]{overflow-y:hidden!important}.vaul-dragging .vaul-scrollable [vault-drawer-direction=left]{overflow-x:hidden!important}.vaul-dragging .vaul-scrollable [vault-drawer-direction=right]{overflow-x:hidden!important}[vaul-drawer][vaul-drawer-visible=true][vaul-drawer-direction=top]{transform:translate3d(0,var(--snap-point-height,0),0)}[vaul-drawer][vaul-drawer-visible=true][vaul-drawer-direction=bottom]{transform:translate3d(0,var(--snap-point-height,0),0)}[vaul-drawer][vaul-drawer-visible=true][vaul-drawer-direction=left]{transform:translate3d(var(--snap-point-height,0),0,0)}[vaul-drawer][vaul-drawer-visible=true][vaul-drawer-direction=right]{transform:translate3d(var(--snap-point-height,0),0,0)}[vaul-overlay]{opacity:0;transition:opacity .5s cubic-bezier(.32, .72, 0, 1)}[vaul-overlay][vaul-drawer-visible=true]{opacity:1}[vaul-drawer]::after{content:'';position:absolute;background:inherit;background-color:inherit}[vaul-drawer][vaul-drawer-direction=top]::after{top:initial;bottom:100%;left:0;right:0;height:200%}[vaul-drawer][vaul-drawer-direction=bottom]::after{top:100%;bottom:initial;left:0;right:0;height:200%}[vaul-drawer][vaul-drawer-direction=left]::after{left:initial;right:100%;top:0;bottom:0;width:200%}[vaul-drawer][vaul-drawer-direction=right]::after{left:100%;right:initial;top:0;bottom:0;width:200%}[vaul-handle]{display:block;position:relative;opacity:.8;margin-left:auto;margin-right:auto;height:5px;width:56px;border-radius:1rem;touch-action:pan-y;cursor:grab}[vaul-handle]:active,[vaul-handle]:hover{opacity:1}[vaul-handle]:active{cursor:grabbing}[vaul-handle-hitarea]{position:absolute;left:50%;top:50%;transform:translate(-50%,-50%);width:max(100%,2.75rem);height:max(100%,2.75rem);touch-action:inherit}[vaul-overlay][vaul-snap-points=true]:not([vaul-snap-points-overlay=true]):not([data-state=closed]){opacity:0}[vaul-overlay][vaul-snap-points-overlay=true]:not([vaul-drawer-visible=false]){opacity:1}@media (hover:hover) and (pointer:fine){[vaul-drawer]{user-select:none}}@media (pointer:fine){[vaul-handle-hitarea]:{width:100%;height:100%}}");const ub="undefined"!==typeof window?t.useLayoutEffect:t.useEffect;function db(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return function(){for(let e of t)"function"===typeof e&&e(...arguments)}}function hb(){return fb(/^iPad/)||fb(/^Mac/)&&navigator.maxTouchPoints>1}function pb(){return fb(/^iPhone/)||hb()}function fb(e){return"undefined"!==typeof window&&null!=window.navigator?e.test(window.navigator.platform):void 0}const mb="undefined"!==typeof document&&window.visualViewport;function gb(e){let t=window.getComputedStyle(e);return/(auto|scroll)/.test(t.overflow+t.overflowX+t.overflowY)}function vb(e){for(gb(e)&&(e=e.parentElement);e&&!gb(e);)e=e.parentElement;return e||document.scrollingElement||document.documentElement}const _b=new Set(["checkbox","radio","range","color","file","image","button","submit","reset"]);let yb,bb=0;function wb(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{isDisabled:t}=e;ub((()=>{if(!t)return bb++,1===bb&&(yb=pb()?function(){let e,t=0,n=n=>{e=vb(n.target),e===document.documentElement&&e===document.body||(t=n.changedTouches[0].pageY)},r=n=>{if(!e||e===document.documentElement||e===document.body)return void n.preventDefault();let r=n.changedTouches[0].pageY,i=e.scrollTop,s=e.scrollHeight-e.clientHeight;0!==s&&((i<=0&&r>t||i>=s&&r<t)&&n.preventDefault(),t=r)},i=e=>{let t=e.target;Eb(t)&&t!==document.activeElement&&(e.preventDefault(),t.style.transform="translateY(-2000px)",t.focus(),requestAnimationFrame((()=>{t.style.transform=""})))},s=e=>{let t=e.target;Eb(t)&&(t.style.transform="translateY(-2000px)",requestAnimationFrame((()=>{t.style.transform="",mb&&(mb.height<window.innerHeight?requestAnimationFrame((()=>{Cb(t)})):mb.addEventListener("resize",(()=>Cb(t)),{once:!0}))})))},a=()=>{window.scrollTo(0,0)},o=window.pageXOffset,l=window.pageYOffset,c=db(Sb(document.documentElement,"paddingRight","".concat(window.innerWidth-document.documentElement.clientWidth,"px")));window.scrollTo(0,0);let u=db(Pb(document,"touchstart",n,{passive:!1,capture:!0}),Pb(document,"touchmove",r,{passive:!1,capture:!0}),Pb(document,"touchend",i,{passive:!1,capture:!0}),Pb(document,"focus",s,!0),Pb(window,"scroll",a));return()=>{c(),u(),window.scrollTo(o,l)}}():db(Sb(document.documentElement,"paddingRight","".concat(window.innerWidth-document.documentElement.clientWidth,"px")))),()=>{bb--,0===bb&&yb()}}),[t])}function Sb(e,t,n){let r=e.style[t];return e.style[t]=n,()=>{e.style[t]=r}}function Pb(e,t,n,r){return e.addEventListener(t,n,r),()=>{e.removeEventListener(t,n,r)}}function Cb(e){let t=document.scrollingElement||document.documentElement;for(;e&&e!==t;){let t=vb(e);if(t!==document.documentElement&&t!==document.body&&t!==e){let n=t.getBoundingClientRect().top,r=e.getBoundingClientRect().top;e.getBoundingClientRect().bottom>t.getBoundingClientRect().bottom&&(t.scrollTop+=r-n)}e=t.parentElement}}function Eb(e){return e instanceof HTMLInputElement&&!_b.has(e.type)||e instanceof HTMLTextAreaElement||e instanceof HTMLElement&&e.isContentEditable}function xb(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return t.useCallback(function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return e=>t.forEach((t=>function(e,t){"function"===typeof e?e(t):null!==e&&void 0!==e&&(e.current=t)}(t,e)))}(...n),n)}let kb=null;const Ab=new WeakMap;function Tb(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(!e||!(e instanceof HTMLElement))return;let r={};Object.entries(t).forEach((t=>{let[n,i]=t;n.startsWith("--")?e.style.setProperty(n,i):(r[n]=e.style[n],e.style[n]=i)})),n||Ab.set(e,r)}function Fb(e,t){if(!e||!(e instanceof HTMLElement))return;let n=Ab.get(e);n&&(t?e.style[t]=n[t]:Object.entries(n).forEach((t=>{let[n,r]=t;e.style[n]=r})))}const Ib=e=>{switch(e){case"top":case"bottom":return!0;case"left":case"right":return!1;default:return e}};function Rb(e,t){if(!e)return null;const n=window.getComputedStyle(e),r=n.transform||n.webkitTransform||n.mozTransform;let i=r.match(/^matrix3d\((.+)\)$/);return i?parseFloat(i[1].split(", ")[Ib(t)?13:12]):(i=r.match(/^matrix\((.+)\)$/),i?parseFloat(i[1].split(", ")[Ib(t)?5:4]):null)}const Mb={DURATION:.5,EASE:[.32,.72,0,1]},Nb=.4;function Db(e){const n=t.useRef(e);return t.useEffect((()=>{n.current=e})),t.useMemo((()=>function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return null==n.current?void 0:n.current.call(n,...t)}),[])}function Ob(e){let{prop:n,defaultProp:r,onChange:i=(()=>{})}=e;const[s,a]=function(e){let{defaultProp:n,onChange:r}=e;const i=t.useState(n),[s]=i,a=t.useRef(s),o=Db(r);return t.useEffect((()=>{a.current!==s&&(o(s),a.current=s)}),[s,a,o]),i}({defaultProp:r,onChange:i}),o=void 0!==n,l=o?n:s,c=Db(i),u=t.useCallback((e=>{if(o){const t="function"===typeof e?e(n):e;t!==n&&c(t)}else a(e)}),[o,n,a,c]);return[l,u]}const Lb=.25,jb=100,Ub=8,Gb=16,Bb=26,Wb="vaul-dragging";function zb(e){let{open:n,onOpenChange:r,children:i,shouldScaleBackground:s,onDrag:a,onRelease:o,snapPoints:l,nested:c=!1,setBackgroundColorOnScale:u=!0,closeThreshold:d=Lb,scrollLockTimeout:h=jb,dismissible:p=!0,handleOnly:f=!1,fadeFromIndex:m=l&&l.length-1,activeSnapPoint:g,setActiveSnapPoint:v,fixed:_,modal:y=!0,onClose:b,noBodyStyles:w,direction:S="bottom",preventScrollRestoration:P=!0,disablePreventScroll:C=!1}=e;var E;const[x=!1,k]=t.useState(!1),[A,T]=t.useState(!1),[F,I]=t.useState(!1),[R,M]=t.useState(!1),[N,D]=t.useState(!1),[O,L]=t.useState(!1),j=t.useRef(null),U=t.useRef(null),G=t.useRef(null),B=t.useRef(null),W=t.useRef(null),z=t.useRef(!1),q=t.useRef(null),H=t.useRef(0),V=t.useRef(!1),K=t.useRef(0),X=t.useRef(null),Y=t.useRef((null==(E=X.current)?void 0:E.getBoundingClientRect().height)||0),Q=t.useRef(0),J=t.useCallback((e=>{l&&e===ne.length-1&&(U.current=new Date)}),[]),{activeSnapPoint:$,activeSnapPointIndex:Z,setActiveSnapPoint:ee,onRelease:te,snapPointsOffset:ne,onDrag:re,shouldFade:ie,getPercentageDragged:se}=function(e){let{activeSnapPointProp:n,setActiveSnapPointProp:r,snapPoints:i,drawerRef:s,overlayRef:a,fadeFromIndex:o,onSnapPointChange:l,direction:c="bottom"}=e;const[u,d]=Ob({prop:n,defaultProp:null==i?void 0:i[0],onChange:r}),h=t.useMemo((()=>u===(null==i?void 0:i[i.length-1])||null),[i,u]),p=i&&i.length>0&&(o||0===o)&&!Number.isNaN(o)&&i[o]===u||!i,f=t.useMemo((()=>null==i?void 0:i.findIndex((e=>e===u))),[i,u]),m=t.useMemo((()=>{var e;return null!=(e=null==i?void 0:i.map((e=>{const t="undefined"!==typeof window,n="string"===typeof e;let r=0;if(n&&(r=parseInt(e,10)),Ib(c)){const i=n?r:t?e*window.innerHeight:0;return t?"bottom"===c?window.innerHeight-i:-window.innerHeight+i:i}const i=n?r:t?e*window.innerWidth:0;return t?"right"===c?window.innerWidth-i:-window.innerWidth+i:i})))?e:[]}),[i]),g=t.useMemo((()=>null!==f?null==m?void 0:m[f]:null),[m,f]),v=t.useCallback((e=>{var t;const n=null!=(t=null==m?void 0:m.findIndex((t=>t===e)))?t:null;l(n),Tb(s.current,{transition:"transform ".concat(Mb.DURATION,"s cubic-bezier(").concat(Mb.EASE.join(","),")"),transform:Ib(c)?"translate3d(0, ".concat(e,"px, 0)"):"translate3d(".concat(e,"px, 0, 0)")}),m&&n!==m.length-1&&n!==o?Tb(a.current,{transition:"opacity ".concat(Mb.DURATION,"s cubic-bezier(").concat(Mb.EASE.join(","),")"),opacity:"0"}):Tb(a.current,{transition:"opacity ".concat(Mb.DURATION,"s cubic-bezier(").concat(Mb.EASE.join(","),")"),opacity:"1"}),d(null!==n?null==i?void 0:i[n]:null)}),[s.current,i,m,o,a,d]);return t.useEffect((()=>{if(u||n){var e;const t=null!=(e=null==i?void 0:i.findIndex((e=>e===n||e===u)))?e:-1;m&&-1!==t&&"number"===typeof m[t]&&v(m[t])}}),[u,n,i,m,v]),{isLastSnapPoint:h,activeSnapPoint:u,shouldFade:p,getPercentageDragged:function(e,t){if(!i||"number"!==typeof f||!m||void 0===o)return null;const n=f===o-1;if(f>=o&&t)return 0;if(n&&!t)return 1;if(!p&&!n)return null;const r=n?f+1:f-1,s=n?m[r]-m[r-1]:m[r+1]-m[r],a=e/Math.abs(s);return n?1-a:a},setActiveSnapPoint:d,activeSnapPointIndex:f,onRelease:function(e){let{draggedDistance:t,closeDrawer:n,velocity:r,dismissible:s}=e;if(void 0===o)return;const l="bottom"===c||"right"===c?(null!=g?g:0)-t:(null!=g?g:0)+t,u=0===f,d=t>0;if(f===o-1&&Tb(a.current,{transition:"opacity ".concat(Mb.DURATION,"s cubic-bezier(").concat(Mb.EASE.join(","),")")}),r>2&&!d)return void(s?n():v(m[0]));if(r>2&&d&&m&&i)return void v(m[i.length-1]);const p=null==m?void 0:m.reduce(((e,t)=>"number"!==typeof e||"number"!==typeof t?e:Math.abs(t-l)<Math.abs(e-l)?t:e)),_=Ib(c)?window.innerHeight:window.innerWidth;if(r>Nb&&Math.abs(t)<.4*_){const e=d?1:-1;if(e>0&&h)return void v(m[i.length-1]);if(u&&e<0&&s&&n(),null===f)return;v(m[f+e])}else v(p)},onDrag:function(e){let{draggedDistance:t}=e;if(null===g)return;const n="bottom"===c||"right"===c?g-t:g+t;("bottom"===c||"right"===c)&&n<m[m.length-1]||("top"===c||"left"===c)&&n>m[m.length-1]||Tb(s.current,{transform:Ib(c)?"translate3d(0, ".concat(n,"px, 0)"):"translate3d(".concat(n,"px, 0, 0)")})},snapPointsOffset:m}}({snapPoints:l,activeSnapPointProp:g,setActiveSnapPointProp:v,drawerRef:X,fadeFromIndex:m,overlayRef:j,onSnapPointChange:J,direction:S});wb({isDisabled:!x||N||!y||O||!A||C});const{restorePositionSetting:ae}=function(e){let{isOpen:n,modal:r,nested:i,hasBeenOpened:s,preventScrollRestoration:a,noBodyStyles:o}=e;const[l,c]=t.useState((()=>"undefined"!==typeof window?window.location.href:"")),u=t.useRef(0),d=t.useCallback((()=>{if(null===kb&&n&&!o){kb={position:document.body.style.position,top:document.body.style.top,left:document.body.style.left,height:document.body.style.height,right:"unset"};const{scrollX:e,innerHeight:t}=window;document.body.style.setProperty("position","fixed","important"),Object.assign(document.body.style,{top:"".concat(-u.current,"px"),left:"".concat(-e,"px"),right:"0px",height:"auto"}),window.setTimeout((()=>window.requestAnimationFrame((()=>{const e=t-window.innerHeight;e&&u.current>=t&&(document.body.style.top="".concat(-(u.current+e),"px"))}))),300)}}),[n]),h=t.useCallback((()=>{if(null!==kb&&!o){const e=-parseInt(document.body.style.top,10),t=-parseInt(document.body.style.left,10);Object.assign(document.body.style,kb),window.requestAnimationFrame((()=>{a&&l!==window.location.href?c(window.location.href):window.scrollTo(t,e)})),kb=null}}),[l]);return t.useEffect((()=>{function e(){u.current=window.scrollY}return e(),window.addEventListener("scroll",e),()=>{window.removeEventListener("scroll",e)}}),[]),t.useEffect((()=>{!i&&s&&(n?(!window.matchMedia("(display-mode: standalone)").matches&&d(),r||window.setTimeout((()=>{h()}),500)):h())}),[n,s,l,r,i,d,h]),{restorePositionSetting:h}}({isOpen:x,modal:y,nested:c,hasBeenOpened:A,preventScrollRestoration:P,noBodyStyles:w});function oe(){return(window.innerWidth-Bb)/window.innerWidth}function le(e,t){var n;let r=e;const i=null==(n=window.getSelection())?void 0:n.toString(),s=X.current?Rb(X.current,S):null,a=new Date;if(r.hasAttribute("data-vaul-no-drag")||r.closest("[data-vaul-no-drag]"))return!1;if("right"===S||"left"===S)return!0;if(U.current&&a.getTime()-U.current.getTime()<500)return!1;if(null!==s&&("bottom"===S?s>0:s<0))return!0;if(i&&i.length>0)return!1;if(W.current&&a.getTime()-W.current.getTime()<h&&0===s)return W.current=a,!1;if(t)return W.current=a,!1;for(;r;){if(r.scrollHeight>r.clientHeight){if(0!==r.scrollTop)return W.current=new Date,!1;if("dialog"===r.getAttribute("role"))return!0}r=r.parentNode}return!0}function ce(){X.current&&(!function(){if(!N||!X.current)return;X.current.classList.remove(Wb),z.current=!1,D(!1),B.current=new Date}(),null==b||b(),Tb(X.current,{transform:Ib(S)?"translate3d(0, ".concat("bottom"===S?"100%":"-100%",", 0)"):"translate3d(".concat("right"===S?"100%":"-100%",", 0, 0)"),transition:"transform ".concat(Mb.DURATION,"s cubic-bezier(").concat(Mb.EASE.join(","),")")}),Tb(j.current,{opacity:"0",transition:"opacity ".concat(Mb.DURATION,"s cubic-bezier(").concat(Mb.EASE.join(","),")")}),de(!1),setTimeout((()=>{I(!1),k(!1)}),300),setTimeout((()=>{l&&ee(l[0])}),1e3*Mb.DURATION))}function ue(){if(!X.current)return;const e=document.querySelector("[vaul-drawer-wrapper]"),t=Rb(X.current,S);Tb(X.current,{transform:"translate3d(0, 0, 0)",transition:"transform ".concat(Mb.DURATION,"s cubic-bezier(").concat(Mb.EASE.join(","),")")}),Tb(j.current,{transition:"opacity ".concat(Mb.DURATION,"s cubic-bezier(").concat(Mb.EASE.join(","),")"),opacity:"1"}),s&&t&&t>0&&x&&Tb(e,{borderRadius:"".concat(Ub,"px"),overflow:"hidden",...Ib(S)?{transform:"scale(".concat(oe(),") translate3d(0, calc(env(safe-area-inset-top) + 14px), 0)"),transformOrigin:"top"}:{transform:"scale(".concat(oe(),") translate3d(calc(env(safe-area-inset-top) + 14px), 0, 0)"),transformOrigin:"left"},transitionProperty:"transform, border-radius",transitionDuration:"".concat(Mb.DURATION,"s"),transitionTimingFunction:"cubic-bezier(".concat(Mb.EASE.join(","),")")},!0)}function de(e){const t=document.querySelector("[vaul-drawer-wrapper]");t&&s&&(e?(u&&(w||(Tb(document.body,{background:document.body.style.backgroundColor||document.body.style.background}),Tb(document.body,{background:"black"},!0))),Tb(t,{borderRadius:"".concat(Ub,"px"),overflow:"hidden",...Ib(S)?{transform:"scale(".concat(oe(),") translate3d(0, calc(env(safe-area-inset-top) + 14px), 0)"),transformOrigin:"top"}:{transform:"scale(".concat(oe(),") translate3d(calc(env(safe-area-inset-top) + 14px), 0, 0)"),transformOrigin:"left"},transitionProperty:"transform, border-radius",transitionDuration:"".concat(Mb.DURATION,"s"),transitionTimingFunction:"cubic-bezier(".concat(Mb.EASE.join(","),")")})):(Fb(t,"overflow"),Fb(t,"transform"),Fb(t,"borderRadius"),Tb(t,{transitionProperty:"transform, border-radius",transitionDuration:"".concat(Mb.DURATION,"s"),transitionTimingFunction:"cubic-bezier(".concat(Mb.EASE.join(","),")")})))}return t.useEffect((()=>()=>{de(!1),ae()}),[]),t.useEffect((()=>{var e;function t(){if(!X.current)return;if(Eb(document.activeElement)||V.current){var e;const t=(null==(e=window.visualViewport)?void 0:e.height)||0;let n=window.innerHeight-t;const r=X.current.getBoundingClientRect().height||0;Q.current||(Q.current=r);const i=X.current.getBoundingClientRect().top;if(Math.abs(K.current-n)>60&&(V.current=!V.current),l&&l.length>0&&ne&&Z){n+=ne[Z]||0}if(K.current=n,r>t||V.current){const e=X.current.getBoundingClientRect().height;let r=e;e>t&&(r=t-Bb),X.current.style.height="".concat(_?e-Math.max(n,0):Math.max(r,t-i),"px")}else X.current.style.height="".concat(Q.current,"px");l&&l.length>0&&!V.current?X.current.style.bottom="0px":X.current.style.bottom="".concat(Math.max(n,0),"px")}}return null==(e=window.visualViewport)||e.addEventListener("resize",t),()=>{var e;return null==(e=window.visualViewport)?void 0:e.removeEventListener("resize",t)}}),[Z,l,ne]),t.useEffect((()=>{if(!x&&s){const e=setTimeout((()=>{Fb(document.body)}),200);return()=>clearTimeout(e)}}),[x,s]),t.useLayoutEffect((()=>{n?(k(!0),T(!0)):ce()}),[n]),t.useEffect((()=>{R&&(null==r||r(x))}),[x]),t.useEffect((()=>{M(!0)}),[]),t.useEffect((()=>{x&&(Tb(document.documentElement,{scrollBehavior:"auto"}),U.current=new Date,de(!0))}),[x]),t.useEffect((()=>{if(X.current&&F){var e;const t=null==X||null==(e=X.current)?void 0:e.querySelectorAll("*");null==t||t.forEach((e=>{const t=e;(t.scrollHeight>t.clientHeight||t.scrollWidth>t.clientWidth)&&t.classList.add("vaul-scrollable")}))}}),[F]),t.createElement(eb,{modal:y,onOpenChange:e=>{void 0===n?e?(T(!0),k(e)):ce():null==r||r(e)},open:x},t.createElement(lb.Provider,{value:{visible:F,activeSnapPoint:$,snapPoints:l,setActiveSnapPoint:ee,drawerRef:X,overlayRef:j,scaleBackground:de,onOpenChange:r,onPress:function(e){var t;(p||l)&&(X.current&&!X.current.contains(e.target)||(Y.current=(null==(t=X.current)?void 0:t.getBoundingClientRect().height)||0,D(!0),G.current=new Date,pb()&&window.addEventListener("touchend",(()=>z.current=!1),{once:!0}),e.target.setPointerCapture(e.pointerId),H.current=Ib(S)?e.clientY:e.clientX))},setVisible:I,onRelease:function(e){if(!N||!X.current)return;X.current.classList.remove(Wb),z.current=!1,D(!1),B.current=new Date;const t=Rb(X.current,S);if(!le(e.target,!1)||!t||Number.isNaN(t))return;if(null===G.current)return;const n=B.current.getTime()-G.current.getTime(),r=H.current-(Ib(S)?e.clientY:e.clientX),i=Math.abs(r)/n;if(i>.05&&(L(!0),setTimeout((()=>{L(!1)}),200)),l){return te({draggedDistance:r*("bottom"===S||"right"===S?1:-1),closeDrawer:ce,velocity:i,dismissible:p}),void(null==o||o(e,!0))}if("bottom"===S||"right"===S?r>0:r<0)return ue(),void(null==o||o(e,!0));if(i>Nb)return ce(),void(null==o||o(e,!1));var s;if(t>=Math.min(null!=(s=X.current.getBoundingClientRect().height)?s:0,window.innerHeight)*d)return ce(),void(null==o||o(e,!1));null==o||o(e,!0),ue()},onDrag:function(e){var t;if(X.current&&N){const n="bottom"===S||"right"===S?1:-1,r=(H.current-(Ib(S)?e.clientY:e.clientX))*n,i=r>0,o=l&&!p&&!i;if(o&&0===Z)return;const c=Math.abs(r),u=document.querySelector("[vaul-drawer-wrapper]");let d=c/Y.current;const h=se(c,i);if(null!==h&&(d=h),o&&d>=1)return;if(!z.current&&!le(e.target,i))return;if(X.current.classList.add(Wb),z.current=!0,Tb(X.current,{transition:"none"}),Tb(j.current,{transition:"none"}),l&&re({draggedDistance:r}),i&&!l){const e=(t=r,8*(Math.log(t+1)-2)),i=Math.min(-1*e,0)*n;return void Tb(X.current,{transform:Ib(S)?"translate3d(0, ".concat(i,"px, 0)"):"translate3d(".concat(i,"px, 0, 0)")})}const f=1-d;if((ie||m&&Z===m-1)&&(null==a||a(e,d),Tb(j.current,{opacity:"".concat(f),transition:"none"},!0)),u&&j.current&&s){const e=Math.min(oe()+d*(1-oe()),1),t=8-8*d,n=Math.max(0,14-14*d);Tb(u,{borderRadius:"".concat(t,"px"),transform:Ib(S)?"scale(".concat(e,") translate3d(0, ").concat(n,"px, 0)"):"scale(".concat(e,") translate3d(").concat(n,"px, 0, 0)"),transition:"none"},!0)}if(!l){const e=c*n;Tb(X.current,{transform:Ib(S)?"translate3d(0, ".concat(e,"px, 0)"):"translate3d(".concat(e,"px, 0, 0)")})}}},dismissible:p,handleOnly:f,isOpen:x,isDragging:N,shouldFade:ie,closeDrawer:ce,onNestedDrag:function(e,t){if(t<0)return;const n=Ib(S)?window.innerHeight:window.innerWidth,r=(n-Gb)/n,i=r+t*(1-r),s=t*Gb-Gb;Tb(X.current,{transform:Ib(S)?"scale(".concat(i,") translate3d(0, ").concat(s,"px, 0)"):"scale(".concat(i,") translate3d(").concat(s,"px, 0, 0)"),transition:"none"})},onNestedOpenChange:function(e){const t=e?(window.innerWidth-Gb)/window.innerWidth:1,n=e?-Gb:0;q.current&&window.clearTimeout(q.current),Tb(X.current,{transition:"transform ".concat(Mb.DURATION,"s cubic-bezier(").concat(Mb.EASE.join(","),")"),transform:"scale(".concat(t,") translate3d(0, ").concat(n,"px, 0)")}),!e&&X.current&&(q.current=setTimeout((()=>{const e=Rb(X.current,S);Tb(X.current,{transition:"none",transform:Ib(S)?"translate3d(0, ".concat(e,"px, 0)"):"translate3d(".concat(e,"px, 0, 0)")})}),500))},onNestedRelease:function(e,t){const n=Ib(S)?window.innerHeight:window.innerWidth,r=t?(n-Gb)/n:1,i=t?-Gb:0;t&&Tb(X.current,{transition:"transform ".concat(Mb.DURATION,"s cubic-bezier(").concat(Mb.EASE.join(","),")"),transform:Ib(S)?"scale(".concat(r,") translate3d(0, ").concat(i,"px, 0)"):"scale(".concat(r,") translate3d(").concat(i,"px, 0, 0)")})},keyboardIsOpen:V,openProp:n,modal:y,snapPointsOffset:ne,direction:S}},i))}const qb=t.forwardRef((function(e,n){let{preventCycle:r=!1,children:i,...s}=e;const{visible:a,closeDrawer:o,isDragging:l,snapPoints:c,activeSnapPoint:u,setActiveSnapPoint:d,dismissible:h,handleOnly:p,onPress:f,onDrag:m}=cb(),g=t.useRef(null),v=t.useRef(!1);function _(){window.clearTimeout(g.current),v.current=!1}return t.createElement("div",{onClick:function(){v.current?_():window.setTimeout((()=>{!function(){if(l||r||v.current)return void _();if(_(),(!c||0===c.length)&&h)return void o();if(u===c[c.length-1]&&h)return void o();const e=c.findIndex((e=>e===u));if(-1===e)return;const t=c[e+1];d(t)}()}),120)},onDoubleClick:()=>{v.current=!0,o()},onPointerCancel:_,onPointerDown:e=>{p&&f(e),g.current=window.setTimeout((()=>{v.current=!0}),250)},onPointerMove:e=>{p&&m(e)},ref:n,"vaul-drawer-visible":a?"true":"false","vaul-handle":"","aria-hidden":"true",...s},t.createElement("span",{"vaul-handle-hitarea":"","aria-hidden":"true"},i))}));qb.displayName="Drawer.Handle";const Hb=t.forwardRef((function(e,n){let{children:r,...i}=e;const{overlayRef:s,snapPoints:a,onRelease:o,shouldFade:l,isOpen:c,visible:u}=cb(),d=xb(n,s),h=a&&a.length>0;return t.createElement(rb,{onMouseUp:o,ref:d,"vaul-drawer-visible":u?"true":"false","vaul-overlay":"","vaul-snap-points":c&&h?"true":"false","vaul-snap-points-overlay":c&&l?"true":"false",...i})}));Hb.displayName="Drawer.Overlay";const Vb=t.forwardRef((function(e,n){let{onOpenAutoFocus:r,onPointerDownOutside:i,onAnimationEnd:s,style:a,...o}=e;const{drawerRef:l,onPress:c,onRelease:u,onDrag:d,dismissible:h,keyboardIsOpen:p,snapPointsOffset:f,visible:m,closeDrawer:g,modal:v,openProp:_,onOpenChange:y,setVisible:b,handleOnly:w,direction:S}=cb(),P=xb(n,l),C=t.useRef(null),E=t.useRef(!1);return t.useEffect((()=>{b(!0)}),[]),t.createElement(ib,{"vaul-drawer":"","vaul-drawer-direction":S,"vaul-drawer-visible":m?"true":"false",...o,ref:P,style:f&&f.length>0?{"--snap-point-height":"".concat(f[0],"px"),...a}:a,onOpenAutoFocus:e=>{var t;r?r(e):(e.preventDefault(),null==(t=l.current)||t.focus())},onPointerDown:e=>{w||(null==o.onPointerDown||o.onPointerDown.call(o,e),C.current={x:e.clientX,y:e.clientY},c(e))},onPointerDownOutside:e=>{null==i||i(e),v&&!e.defaultPrevented?(p.current&&(p.current=!1),e.preventDefault(),null==y||y(!1),h&&void 0===_&&g()):e.preventDefault()},onFocusOutside:e=>{v||e.preventDefault()},onEscapeKeyDown:e=>{v||e.preventDefault()},onPointerMove:e=>{if(w)return;if(null==o.onPointerMove||o.onPointerMove.call(o,e),!C.current)return;const t=e.clientY-C.current.y,n=e.clientX-C.current.x,r="touch"===e.pointerType?10:2,i=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;if(E.current)return!0;const r=Math.abs(e.y),i=Math.abs(e.x),s=i>r,a=["bottom","right"].includes(t)?1:-1;if("left"===t||"right"===t){if(!(e.x*a<0)&&i>=0&&i<=n)return s}else if(!(e.y*a<0)&&r>=0&&r<=n)return!s;return E.current=!0,!0}({x:n,y:t},S,r);i?d(e):(Math.abs(n)>r||Math.abs(t)>r)&&(C.current=null)},onPointerUp:e=>{null==o.onPointerUp||o.onPointerUp.call(o,e),C.current=null,E.current=!1,u(e)}})}));Vb.displayName="Drawer.Content";const Kb={Root:zb,NestedRoot:function(e){let{onDrag:n,onOpenChange:r,...i}=e;const{onNestedDrag:s,onNestedOpenChange:a,onNestedRelease:o}=cb();if(!s)throw new Error("Drawer.NestedRoot must be placed in another drawer");return t.createElement(zb,{nested:!0,onClose:()=>{a(!1)},onDrag:(e,t)=>{s(e,t),null==n||n(e,t)},onOpenChange:e=>{e&&a(e),null==r||r(e)},onRelease:o,...i})},Content:Vb,Handle:qb,Overlay:Hb,Trigger:tb,Portal:nb,Close:ob,Title:sb,Description:ab},Xb=e=>{let{shouldScaleBackground:t=!0,...n}=e;return(0,jp.jsx)(Kb.Root,{shouldScaleBackground:t,...n})};Xb.displayName="Drawer";const Yb=Kb.Trigger,Qb=Kb.Portal,Jb=Kb.Close,$b=t.forwardRef(((e,t)=>{let{className:n,...r}=e;return(0,jp.jsx)(Kb.Overlay,{ref:t,className:$f("fixed inset-0 z-50 bg-black/80",n),...r})}));$b.displayName=Kb.Overlay.displayName;const Zb=t.forwardRef(((e,t)=>{let{className:n,children:r,...i}=e;return(0,jp.jsxs)(Qb,{children:[(0,jp.jsx)($b,{}),(0,jp.jsxs)(Kb.Content,{ref:t,className:$f("fixed inset-x-0 bottom-0 z-50 mt-24 flex h-auto flex-col rounded-t-[10px] border bg-background",n),...i,children:[(0,jp.jsx)("div",{className:"mx-auto mt-4 h-2 w-[100px] rounded-full bg-muted"}),r]})]})}));Zb.displayName="DrawerContent";const ew=e=>{let{className:t,...n}=e;return(0,jp.jsx)("div",{className:$f("grid gap-1.5 p-4 text-center sm:text-left",t),...n})};ew.displayName="DrawerHeader";const tw=e=>{let{className:t,...n}=e;return(0,jp.jsx)("div",{className:$f("mt-auto flex flex-col gap-2 p-4",t),...n})};tw.displayName="DrawerFooter";const nw=t.forwardRef(((e,t)=>{let{className:n,...r}=e;return(0,jp.jsx)(Kb.Title,{ref:t,className:$f("text-lg font-semibold leading-none tracking-tight",n),...r})}));nw.displayName=Kb.Title.displayName;const rw=t.forwardRef(((e,t)=>{let{className:n,...r}=e;return(0,jp.jsx)(Kb.Description,{ref:t,className:$f("text-sm text-muted-foreground",n),...r})}));rw.displayName=Kb.Description.displayName;const iw=()=>{const{setNewPDF:e,isFileLoading:n,progress:r,fileLoadingType:i}=(0,t.useContext)(lm),[s,a]=(0,t.useState)(null);return(0,t.useEffect)((()=>{s&&e(s)}),[s]),(0,jp.jsx)("div",{className:"flex flex-col gap-2",children:(0,jp.jsx)(sv,{children:(0,jp.jsxs)("form",{className:"flex flex-col gap-2",children:[(0,jp.jsxs)("label",{className:"items-center justify-center p-4 text-5xl text-center align-middle rounded-md cursor-pointer text-primary hover:bg-secondary",htmlFor:"fileInput",children:[n?(0,jp.jsxs)("div",{className:"text-sm mt-2 ".concat(n&&"motion-safe:animate-bounce"),children:[i,(0,jp.jsx)("div",{className:"".concat(n&&"motion-safe:animate-spin"),children:"|"})]}):"+",(0,jp.jsx)("div",{className:"p-2 mt-2 text-xs text-left border-solid rounded text-secondary border-light bg-primary opacity-80",style:{width:"".concat(n?r:100,"%")},children:n?r.toFixed(0)+"%":"Add new PDF"})]}),(0,jp.jsx)("input",{type:"file",id:"fileInput",accept:".pdf",onChange:e=>{const t=e.target.files;t&&t.length>0&&a(t[0])},disabled:n})]})})})};const sw=function(){const e=Zg();return(0,jp.jsxs)(Xb,{children:[(0,jp.jsx)(Yb,{asChild:!0,children:(0,jp.jsxs)(em,{variant:"outline",size:"default",children:[(0,jp.jsx)(h_,{className:"w-6 h-6 ".concat(e<470?"":"mr-2")}),e<470?"":"Add New PDF"]})}),(0,jp.jsx)(Zb,{children:(0,jp.jsxs)("div",{className:"w-full max-w-sm mx-auto",children:[(0,jp.jsxs)(ew,{children:[(0,jp.jsx)(nw,{children:"Add New Document"}),(0,jp.jsx)(rw,{children:"Click plus button to add new PDF"})]}),(0,jp.jsx)("div",{className:"p-4 pb-0",children:(0,jp.jsx)(iw,{})}),(0,jp.jsx)(tw,{children:(0,jp.jsx)(Jb,{asChild:!0,children:(0,jp.jsx)(em,{variant:"outline",children:"Cancel"})})})]})})]})},aw=Hp("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]),ow=()=>{if(Sp)try{Sp.signOut()}catch(cl){console.error("Error signing out:",cl)}else console.error("Auth instance is not defined")},lw=Hp("FileBadge",[["path",{d:"M12 22h6a2 2 0 0 0 2-2V7l-5-5H6a2 2 0 0 0-2 2v3",key:"12ixgl"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M5 17a3 3 0 1 0 0-6 3 3 0 0 0 0 6Z",key:"u0c8gj"}],["path",{d:"M7 16.5 8 22l-3-1-3 1 1-5.5",key:"5gm2nr"}]]),cw=eb,uw=tb,dw=ob,hw=nb,pw=t.forwardRef(((e,t)=>{let{className:n,...r}=e;return(0,jp.jsx)(rb,{className:$f("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",n),...r,ref:t})}));pw.displayName=rb.displayName;const fw=sf("fixed z-50 gap-4 bg-background p-6 shadow-lg transition ease-in-out data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:duration-300 data-[state=open]:duration-500",{variants:{side:{top:"inset-x-0 top-0 border-b data-[state=closed]:slide-out-to-top data-[state=open]:slide-in-from-top",bottom:"inset-x-0 bottom-0 border-t data-[state=closed]:slide-out-to-bottom data-[state=open]:slide-in-from-bottom",left:"inset-y-0 left-0 h-full w-3/4 border-r data-[state=closed]:slide-out-to-left data-[state=open]:slide-in-from-left sm:max-w-sm",right:"inset-y-0 right-0 h-full w-3/4  border-l data-[state=closed]:slide-out-to-right data-[state=open]:slide-in-from-right sm:max-w-sm"}},defaultVariants:{side:"right"}}),mw=t.forwardRef(((e,t)=>{let{side:n="right",className:r,children:i,...s}=e;return(0,jp.jsxs)(hw,{children:[(0,jp.jsx)(pw,{}),(0,jp.jsxs)(ib,{ref:t,className:$f(fw({side:n}),r),...s,children:[i,(0,jp.jsxs)(ob,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-secondary",children:[(0,jp.jsx)(e_,{className:"w-4 h-4"}),(0,jp.jsx)("span",{className:"sr-only",children:"Close"})]})]})]})}));mw.displayName=ib.displayName;const gw=e=>{let{className:t,...n}=e;return(0,jp.jsx)("div",{className:$f("flex flex-col space-y-2 text-center sm:text-left",t),...n})};gw.displayName="SheetHeader";const vw=e=>{let{className:t,...n}=e;return(0,jp.jsx)("div",{className:$f("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",t),...n})};vw.displayName="SheetFooter";const _w=t.forwardRef(((e,t)=>{let{className:n,...r}=e;return(0,jp.jsx)(sb,{ref:t,className:$f("text-lg font-semibold text-foreground",n),...r})}));_w.displayName=sb.displayName;const yw=t.forwardRef(((e,t)=>{let{className:n,...r}=e;return(0,jp.jsx)(ab,{ref:t,className:$f("text-sm text-muted-foreground",n),...r})}));yw.displayName=ab.displayName;const bw=Hp("CircleX",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]),ww=e=>{let{message:t,onConfirm:n,onCancel:r}=e;const i=(e,t)=>{t.stopPropagation(),e()};return(0,jp.jsx)("div",{className:"z-50",children:(0,jp.jsxs)("div",{className:"flex flex-row gap-1 mx-2",children:[(0,jp.jsx)(em,{variant:"default",size:"sm",type:"button",onClick:e=>i(r,e),children:(0,jp.jsx)(bw,{className:"w-4 h-4"})}),(0,jp.jsx)(em,{variant:"destructive",size:"sm",type:"button",onClick:e=>i(n,e),children:t})]})})},Sw=Hp("FileX2",[["path",{d:"M4 22h14a2 2 0 0 0 2-2V7l-5-5H6a2 2 0 0 0-2 2v4",key:"1pf5j1"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"m8 12.5-5 5",key:"b853mi"}],["path",{d:"m3 12.5 5 5",key:"1qls4r"}]]),Pw=Hp("FileDown",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M12 18v-6",key:"17g6i2"}],["path",{d:"m9 15 3 3 3-3",key:"1npd3o"}]]),Cw=e=>{let{pdfItem:n}=e;const{profile:r,deletePdf:i}=(0,t.useContext)(Up),{setNewPDF:s,isFileLoading:a,setFileLoadingType:o,setIsFileLoading:l,setProgress:c}=(0,t.useContext)(lm),[u,d]=(0,t.useState)(!1),h=async e=>{if(!r)return;l(!0),o("Downloading...");const t=await(async(e,t,n)=>{if(!e||!e.uid||!t.title)return console.error("Error retrieving PDF from storage: Invalid input"),null;const r=_i(n,"files/".concat(e.uid,"/").concat(t.title));try{const e=await yi(r);return new File([e],t.title,{type:e.type})}catch(cl){return console.error("Error retrieving PDF from storage:",cl),null}})(r,e,Cp);t&&(c(50),s(t))};return(0,jp.jsxs)("li",{className:"p-2 rounded-md shadow-sm bg-secondary",children:[(0,jp.jsx)("p",{className:"overflow-x-auto whitespace-nowrap",children:n.title}),(0,jp.jsxs)("p",{className:"font-bold",children:["Page: ",n.savedPage]}),u&&!a?(0,jp.jsx)("span",{className:"float-right mt-1",children:(0,jp.jsx)(ww,{message:"Delete PDF",onCancel:()=>d(!1),onConfirm:()=>(e=>{i(e,Cp),d(!1)})(n)})}):(0,jp.jsx)(em,{disabled:a,onClick:e=>(e=>{e.stopPropagation(),d(!0)})(e),className:"float-right mt-1",type:"button",variant:"destructive",size:"sm",children:(0,jp.jsx)(Sw,{className:"w-4 h-4"})}),(0,jp.jsx)(em,{type:"button",disabled:a,className:"float-right mt-1 mr-1",onClick:()=>h(n),size:"sm",variant:"default",children:(0,jp.jsx)(Pw,{className:"w-4 h-4"})})]},n.title)},Ew=()=>{const{profile:e}=(0,t.useContext)(Up),n=null===e||void 0===e?void 0:e.savedPdfs;return n&&n.sort(((e,t)=>new Date(t.updateDate).getTime()-new Date(e.updateDate).getTime())),(0,jp.jsxs)("ul",{className:"flex flex-col gap-2 p-1 overflow-y-scroll rounded-sm shadow-sm",children:[0===(null===n||void 0===n?void 0:n.length)&&(0,jp.jsx)("li",{className:"text-center",children:"You have no saved PDFs"}),null===n||void 0===n?void 0:n.map((e=>(0,jp.jsx)(Cw,{pdfItem:e},e.title)))]})};const xw=function(){const e=Zg();return(0,jp.jsxs)(cw,{children:[(0,jp.jsx)(uw,{asChild:!0,children:(0,jp.jsxs)(em,{variant:"outline",size:"default",children:[(0,jp.jsx)(lw,{className:"w-6 h-6 ".concat(e<470?"":"mr-2")}),e<470?"":"Your PDFs"]})}),(0,jp.jsxs)(mw,{children:[(0,jp.jsxs)(gw,{children:[(0,jp.jsx)(_w,{children:"Your PDFs"}),(0,jp.jsx)(yw,{children:"List of your uploaded PDFs"})]}),(0,jp.jsx)("div",{className:"py-4",children:(0,jp.jsx)(Ew,{})}),(0,jp.jsx)(vw,{children:(0,jp.jsx)(dw,{asChild:!0,children:(0,jp.jsx)(em,{type:"button",variant:"secondary",size:"sm",children:"Close"})})})]})]})},kw=()=>{const{profile:e}=(0,t.useContext)(Up),n=Zg();return(0,jp.jsx)(jp.Fragment,{children:e&&(0,jp.jsx)(Wg,{"aria-hidden":"true",className:"fixed p-2 m-2 rounded-md shadow-sm bg-primary",children:(0,jp.jsxs)(zg,{className:"gap-4",children:[(0,jp.jsx)(qg,{children:(0,jp.jsx)(sw,{})}),(0,jp.jsx)(qg,{children:(0,jp.jsx)(xw,{})}),(0,jp.jsx)(qg,{children:(0,jp.jsxs)(em,{type:"button",onClick:ow,variant:"destructive",size:"default",children:[(0,jp.jsx)(aw,{className:"w-6 h-6 ".concat(n<470?"":"mr-2")}),n<470?"":"Logout"]})})]})})})};const Aw=function(){return(0,jp.jsx)("div",{className:"h-screen bg-secondary",children:(0,jp.jsx)(Gp,{children:(0,jp.jsx)(cm,{children:(0,jp.jsx)(ge,{children:(0,jp.jsxs)("main",{className:"flex flex-col flex-1 text-primary bg-secondary",children:[(0,jp.jsx)(kw,{}),(0,jp.jsxs)("section",{className:"w-full h-full p-4 mt-8",children:[(0,jp.jsxs)("h2",{className:"mt-8 text-md sm:text-xl",children:[(0,jp.jsx)("span",{className:"text-xl font-bold sm:text-2xl",children:"RPBP"})," (Read PDF By Page) is a web application that allows users to read PDF files by page."]}),(0,jp.jsx)(d_,{})]})]})})})})})};r.createRoot(document.getElementById("root")).render((0,jp.jsx)(t.StrictMode,{children:(0,jp.jsx)(Aw,{})}))})()})();
//# sourceMappingURL=main.fde552b2.js.map